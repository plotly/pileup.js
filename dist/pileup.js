(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.pileup = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=r.slice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){return c(this,"on",t,[e,i])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:i,ctx:i||this}),this):this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,u,l,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,u=o.length;h<u;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;l<d;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){return(this._listeningTo||(this._listeningTo={}))[e._listenId||(e._listenId=i.uniqueId("l"))]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,c,u,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(u[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;d<f;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(c)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){if(!e.set(e.parse(i,t),t))return!1;n&&n(e,i,t),e.trigger("sync",e,i,t)},U(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,c=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);if(n.wait&&(e=i.extend(s||{},e)),i.isObject(e)&&!h.set(e,n))return!1;c&&c(h,t,n),h.trigger("sync",h,t,n)},U(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;s<r;s++)(o=t[s]=this.get(t[s]))&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,c,u,l=e.at,f=this.model,p=this.comparator&&null==l&&!1!==e.sort,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!(p||!b||!x)&&[];for(s=0,r=t.length;s<r;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],c=this.get(a))x&&(_[c.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=c.parse(h,e)),c.set(h,e),p&&!u&&c.hasChanged(v)&&(u=!0)),t[s]=c;else if(b){if(!(o=t[s]=this._prepareModel(h,e)))continue;m.push(o),this._addReference(o,e)}o=c||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;s<r;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(u=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;s<r;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;s<r;s++)this.models.push(k[s])}if(u&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;s<r;s++)(o=m[s]).trigger("add",o,this,e);(u||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],!1!==i&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(b),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,S=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\$&").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=R.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!A.started)return!1;e&&!0!==e||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var C=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=k.extend=_.extend=A.extend=C;var j=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});

},{"underscore":178}],2:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:r<o?-1:r<o+10?r-o+26+26:r<i+26?r-i:r<A+26?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;n<c;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}var e,n,a,h=t.length%3,c="";for(e=0,a=t.length-h;e<a;e+=3)n=(t[e]<<16)+(t[e+1]<<8)+t[e+2],c+=function(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}(n);switch(h){case 1:n=t[t.length-1],c+=r(n>>2),c+=r(n<<4&63),c+="==";break;case 2:n=(t[t.length-2]<<8)+t[t.length-1],c+=r(n>>10),c+=r(n>>4&63),c+=r(n<<2&63),c+="="}return c}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);

},{}],3:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function fromString(t,e,r){return"string"==typeof r&&""!==r||(r="utf8"),t=allocate(t,0|byteLength(e,r)),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var f=0;f<n;f+=1)t[f]=255&r[f];return t}function allocate(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0),0!==e&&e<=Buffer.poolSize>>>1&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e|=0,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n))>f&&(n=f):n=f;var i=e.length;if(i%2!=0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128==(192&s)&&(c=(31&i)<<6|63&s)>127&&(o=c);break;case 3:s=t[f+1],a=t[f+2],128==(192&s)&&128==(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a)>2047&&(c<55296||c>57343)&&(o=c);break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128==(192&s)&&128==(192&a)&&128==(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h)>65535&&c<1114112&&(o=c)}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(127&t[f]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;i++)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;f++)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;f++)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!=0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=65536+(f-55296<<10|r-56320)}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i&&t[f]===e[f];)++f;return f!==i&&(r=t[f],n=e[f]),r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),f=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,f=0;r+f<t.length;f++)if(t[r+f]===e[-1===n?0:f-n]){if(-1===n&&(n=f),f-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var f=n;n=e,e=0|r,r=f}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;i++)n[i]=this[i+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e|=0,r|=0,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=t<0?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;f--)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var f=utf8ToBytes(t.toString()),i=f.length;for(n=e;n<r;n++)this[n]=f[n%i]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":2,"ieee754":30,"isarray":31}],4:[function(require,module,exports){
!function(){"use strict";function t(t,e,n){n=n||!1;for(var r in e)!function(r){"function"==typeof e[r]?n||(t[r]=e[r].bind(e)):Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t}})}(r)}function e(e){t(this,e),this.pushObject=this.popObject=this.reset=function(){}}function n(t){if(t instanceof HTMLCanvasElement)return n(t.getContext("2d"));var r=t;if(u)return u(r);for(var o=0;o<n.cache.length;o++){var i=n.cache[o];if(i[0]==r)return i[1]}var c=new e(r);return n.cache.push([r,c]),c}function r(e){t(this,e,!0);var n=[];this.calls=n;for(var i in e)(function(t){"function"==typeof e[t]&&(this[t]=function(){var r=Array.prototype.slice.call(arguments);return n.push([t].concat(r)),e[t].apply(e,arguments)})}).bind(this)(i);this.pushObject=function(t){n.push(["pushObject",t])},this.popObject=function(){n.push(["popObject"])},this.reset=function(){this.calls=n=[]};var c=this.drawImage;this.drawImage=function(t){var i=r.recorderForCanvas(t);i?(e.drawImage.apply(e,arguments),n=n.concat(o(i.calls,arguments)),this.calls=n):c.apply(e,arguments)}}function o(t,e){var n,r,o=e[0],a=0,s=0,u=o.width,h=o.height,d=o.width,p=o.height;3==e.length?(n=e[1],r=e[2]):5==e.length?(n=e[1],r=e[2],d=e[3],p=e[4]):9==e.length&&(a=e[1],s=e[2],u=e[3],h=e[4],n=e[5],r=e[6],d=e[7],p=e[8]);var v=i(a,a+u,n,n+d),g=c(a,a+u,n,n+d),b=i(s,s+h,r,r+p),C=c(s,s+h,r,r+p),w=function(t){var e=t.slice(),n=e[0];if(n in l){var r=l[n];"number"==typeof r&&(r=[r]),r.forEach(function(t){e[1+t]=g(e[1+t]),e[2+t]=C(e[2+t])})}if(n in f){var o=f[n];"number"==typeof o&&(o=[o]),o.forEach(function(t){e[1+t]*=v,e[2+t]*=b})}return e};return t.map(w)}function i(t,e,n,r){return(r-n)/(e-t)}function c(t,e,n,r){var o=i(t,e,n,r);return function(e){return n+o*(e-t)}}function a(t,e){if(t)return r.recorderForSelector(t,e);if(r.recorders){if(0==r.recorders.length)throw"Called a RecordingContext method, but no canvases are being recorded.";if(r.recorders.length>1)throw"Called a RecordingContext method while multiple canvases were being recorded. Specify one using a div and selector.";return r.recorders[0][1]}throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods"}function s(e,n,r){function o(){c.hits.unshift(Array.prototype.slice.call(i)),c.hit=c.hits[0]}t(this,e);var i=[];this.hits=[],this.hit=null;var c=this;this.pushObject=function(t){i.unshift(t)},this.popObject=function(){i.shift()},this.reset=function(){this.hits=[],this.hit=null},this.clearRect=function(t,e,n,r){},this.fillRect=function(t,e,i,c){n>=t&&n<=t+i&&r>=e&&r<=e+c&&o()},this.strokeRect=function(t,e,n,r){},this.fill=function(t){e.isPointInPath(n,r)&&o()},this.stroke=function(){e.isPointInStroke(n,r)&&o()},this.fillText=function(t,e,n,r){},this.strokeText=function(t,e,n,r){}}var u=null;n.cache=[];var l={clearRect:0,fillRect:0,strokeRect:0,fillText:1,strokeText:1,moveTo:0,lineTo:0,bezierCurveTo:[0,2,4],quadraticCurveTo:[0,2],rect:0},f={clearRect:2,fillRect:2,strokeRect:2,rect:2};r.prototype.drawnObjectsWith=function(t){return t||(t=function(){return!0}),this.callsOf("pushObject").filter(function(e){return t(e[1])}).map(function(t){return t[1]})},r.prototype.drawnObjects=r.prototype.drawnObjectsWith,r.prototype.callsOf=function(t){return this.calls.filter(function(e){return e[0]==t})},r.recordAll=function(){if(null!=u)throw"You forgot to call RecordingContext.reset()";r.recorders=[],u=function(t){var e=r.recorderForCanvas(t.canvas);return e||(e=new r(t),r.recorders.push([t.canvas,e]),e)}},r.reset=function(){if(!u)throw"Called RecordingContext.reset() before RecordingContext.recordAll()";u=null,r.recorders=null},r.recorderForCanvas=function(t){var e=r.recorders;if(null==e)throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods";for(var n=0;n<e.length;n++){var o=e[n];if(o[0]==t)return o[1]}return null},r.recorderForSelector=function(t,e){var n=t.querySelector(e+" canvas")||t.querySelector(e);if(!n)throw"Unable to find a canvas matching "+e;if(!(n instanceof HTMLCanvasElement))throw"Selector "+e+" neither matches nor contains a canvas";return r.recorderForCanvas(n)},r.drawnObjectsWith=function(t,e,n){"function"!=typeof t&&0!=arguments.length||(n=t,t=null);var r=a(t,e);return n=n||function(){return!0},r?r.drawnObjectsWith(n):[]},r.drawnObjects=r.drawnObjectsWith,r.callsOf=function(t,e,n){"string"==typeof t&&(n=t,t=null);var r=a(t,e);return r?r.callsOf(n):[]};var h={DataContext:e,RecordingContext:r,ClickTrackingContext:s,getDataContext:n};"undefined"!=typeof module?module.exports=h:window.dataCanvas=h}();

},{}],5:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),EventListener={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:emptyFunction}},registerDefault:function(){}};module.exports=EventListener;

},{"./emptyFunction":12}],6:[function(require,module,exports){
"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment;

},{}],7:[function(require,module,exports){
"use strict";function camelize(e){return e.replace(_hyphenPattern,function(e,t){return t.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize;

},{}],8:[function(require,module,exports){
"use strict";function camelizeStyleName(e){return camelize(e.replace(msPattern,"ms-"))}var camelize=require("./camelize"),msPattern=/^-ms-/;module.exports=camelizeStyleName;

},{"./camelize":7}],9:[function(require,module,exports){
"use strict";function containsNode(e,o){var t=!0;e:for(;t;){var n=e,i=o;if(t=!1,n&&i){if(n===i)return!0;if(isTextNode(n))return!1;if(isTextNode(i)){e=n,o=i.parentNode,t=!0;continue e}return n.contains?n.contains(i):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(i))}return!1}}var isTextNode=require("./isTextNode");module.exports=containsNode;

},{"./isTextNode":22}],10:[function(require,module,exports){
"use strict";function hasArrayNature(r){return!!r&&("object"==typeof r||"function"==typeof r)&&"length"in r&&!("setInterval"in r)&&"number"!=typeof r.nodeType&&(Array.isArray(r)||"callee"in r||"item"in r)}function createArrayFromMixed(r){return hasArrayNature(r)?Array.isArray(r)?r.slice():toArray(r):[r]}var toArray=require("./toArray");module.exports=createArrayFromMixed;

},{"./toArray":28}],11:[function(require,module,exports){
"use strict";function getNodeName(e){var r=e.match(nodeNamePattern);return r&&r[1].toLowerCase()}function createNodesFromMarkup(e,r){var a=dummyNode;dummyNode||invariant(!1);var t=getNodeName(e),n=t&&getMarkupWrap(t);if(n){a.innerHTML=n[1]+e+n[2];for(var i=n[0];i--;)a=a.lastChild}else a.innerHTML=e;var o=a.getElementsByTagName("script");o.length&&(r||invariant(!1),createArrayFromMixed(o).forEach(r));for(var m=createArrayFromMixed(a.childNodes);a.lastChild;)a.removeChild(a.lastChild);return m}var ExecutionEnvironment=require("./ExecutionEnvironment"),createArrayFromMixed=require("./createArrayFromMixed"),getMarkupWrap=require("./getMarkupWrap"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup;

},{"./ExecutionEnvironment":6,"./createArrayFromMixed":10,"./getMarkupWrap":16,"./invariant":20}],12:[function(require,module,exports){
"use strict";function makeEmptyFunction(t){return function(){return t}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t},module.exports=emptyFunction;

},{}],13:[function(require,module,exports){
"use strict";var emptyObject={};module.exports=emptyObject;

},{}],14:[function(require,module,exports){
"use strict";function focusNode(o){try{o.focus()}catch(o){}}module.exports=focusNode;

},{}],15:[function(require,module,exports){
"use strict";function getActiveElement(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement;

},{}],16:[function(require,module,exports){
"use strict";function getMarkupWrap(t){return dummyNode||invariant(!1),markupWrap.hasOwnProperty(t)||(t="*"),shouldWrap.hasOwnProperty(t)||(dummyNode.innerHTML="*"===t?"<link />":"<"+t+"></"+t+">",shouldWrap[t]=!dummyNode.firstChild),shouldWrap[t]?markupWrap[t]:null}var ExecutionEnvironment=require("./ExecutionEnvironment"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(t){markupWrap[t]=svgWrap,shouldWrap[t]=!0}),module.exports=getMarkupWrap;

},{"./ExecutionEnvironment":6,"./invariant":20}],17:[function(require,module,exports){
"use strict";function getUnboundedScrollPosition(o){return o===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:o.scrollLeft,y:o.scrollTop}}module.exports=getUnboundedScrollPosition;

},{}],18:[function(require,module,exports){
"use strict";function hyphenate(e){return e.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate;

},{}],19:[function(require,module,exports){
"use strict";function hyphenateStyleName(e){return hyphenate(e).replace(msPattern,"-ms-")}var hyphenate=require("./hyphenate"),msPattern=/^ms-/;module.exports=hyphenateStyleName;

},{"./hyphenate":18}],20:[function(require,module,exports){
"use strict";function invariant(e,n,r,i,o,a,t,f){if(!e){var s;if(void 0===n)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,i,o,a,t,f],l=0;s=new Error(n.replace(/%s/g,function(){return d[l++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}module.exports=invariant;

},{}],21:[function(require,module,exports){
"use strict";function isNode(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}module.exports=isNode;

},{}],22:[function(require,module,exports){
"use strict";function isTextNode(e){return isNode(e)&&3==e.nodeType}var isNode=require("./isNode");module.exports=isTextNode;

},{"./isNode":21}],23:[function(require,module,exports){
"use strict";var invariant=require("./invariant"),keyMirror=function(r){var i,n={};r instanceof Object&&!Array.isArray(r)||invariant(!1);for(i in r)r.hasOwnProperty(i)&&(n[i]=i);return n};module.exports=keyMirror;

},{"./invariant":20}],24:[function(require,module,exports){
"use strict";var keyOf=function(r){var e;for(e in r)if(r.hasOwnProperty(e))return e;return null};module.exports=keyOf;

},{}],25:[function(require,module,exports){
"use strict";function mapObject(r,t,e){if(!r)return null;var a={};for(var n in r)hasOwnProperty.call(r,n)&&(a[n]=t.call(e,r[n],n,r));return a}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=mapObject;

},{}],26:[function(require,module,exports){
"use strict";function memoizeStringOnly(n){var r={};return function(t){return r.hasOwnProperty(t)||(r[t]=n.call(this,t)),r[t]}}module.exports=memoizeStringOnly;

},{}],27:[function(require,module,exports){
"use strict";function shallowEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=hasOwnProperty.bind(t),l=0;l<r.length;l++)if(!o(r[l])||e[r[l]]!==t[r[l]])return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual;

},{}],28:[function(require,module,exports){
"use strict";function toArray(r){var t=r.length;if((Array.isArray(r)||"object"!=typeof r&&"function"!=typeof r)&&invariant(!1),"number"!=typeof t&&invariant(!1),0===t||t-1 in r||invariant(!1),r.hasOwnProperty)try{return Array.prototype.slice.call(r)}catch(r){}for(var a=Array(t),n=0;n<t;n++)a[n]=r[n];return a}var invariant=require("./invariant");module.exports=toArray;

},{"./invariant":20}],29:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),warning=emptyFunction;module.exports=warning;

},{"./emptyFunction":12}],30:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],31:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],32:[function(require,module,exports){
!function(t){var e=this;"object"==typeof exports?module.exports=t(e,require("jdataview")):"function"==typeof define&&define.amd?define(["jdataview"],function(i){return t(e,i)}):e.jBinary=t(e,e.jDataView)}(function(t,e){"use strict";function i(t,e){return e&&t instanceof e}function n(t){for(var e=1,i=arguments.length;i>e;++e){var n=arguments[e];for(var r in n)void 0!==n[r]&&(t[r]=n[r])}return t}function r(t){return arguments[0]=l(t),n.apply(null,arguments)}function a(t,e,n){return i(n,Function)?n.call(t,e.contexts[0]):n}function s(t){return function(){var e=arguments,n=e.length-1,r=t.length-1,a=e[n];if(e.length=r+1,!i(a,Function)){var s=this;return new f(function(i,n){e[r]=function(t,e){return t?n(t):i(e)},t.apply(s,e)})}e[n]=void 0,e[r]=a,t.apply(this,e)}}function o(t,n){return i(t,o)?t.as(n):(i(t,e)||(t=new e(t,void 0,void 0,n?n["jBinary.littleEndian"]:void 0)),i(this,o)?(this.view=t,this.view.seek(0),this.contexts=[],this.as(n,!0)):new o(t,n))}function h(t){return r(h.prototype,t)}function u(t){return r(u.prototype,t,{createProperty:function(){var e=(t.createProperty||u.prototype.createProperty).apply(this,arguments);return e.getBaseType&&(e.baseType=e.binary.getType(e.getBaseType(e.binary.contexts[0]))),e}})}var c=t.document;"atob"in t&&"btoa"in t||function(){function e(t){var e,i,r,a,s,o;for(r=t.length,i=0,e="";r>i;){if(a=255&t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4),e+="==";break}if(s=t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2),e+="=";break}o=t.charCodeAt(i++),e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2|(192&o)>>6),e+=n.charAt(63&o)}return e}function i(t){var e,i,n,a,s,o,h;for(o=t.length,s=0,h="";o>s;){do{e=r[255&t.charCodeAt(s++)]}while(o>s&&-1==e);if(-1==e)break;do{i=r[255&t.charCodeAt(s++)]}while(o>s&&-1==i);if(-1==i)break;h+=String.fromCharCode(e<<2|(48&i)>>4);do{if(61==(n=255&t.charCodeAt(s++)))return h;n=r[n]}while(o>s&&-1==n);if(-1==n)break;h+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(61==(a=255&t.charCodeAt(s++)))return h;a=r[a]}while(o>s&&-1==a);if(-1==a)break;h+=String.fromCharCode((3&n)<<6|a)}return h}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];t.btoa||(t.btoa=e),t.atob||(t.atob=i)}();var f=t.Promise||function(t){this.then=t},l=Object.create;l||(l=function(t){var e=function(){};return e.prototype=t,new e});var p=o.prototype,y=p.typeSet={};p.toValue=function(t){return a(this,this,t)},p._named=function(t,e,i){return t.displayName=e+" @ "+(void 0!==i?i:this.view.tell()),t};var d=Object.defineProperty;if(d)try{d({},"x",{})}catch(t){d=void 0}else d=function(t,e,i,n){n&&(t[e]=i.value)};var v="jBinary.Cache",b=0;if(p._getCached=function(t,e,i){if(t.hasOwnProperty(this.cacheKey))return t[this.cacheKey];var n=e.call(this,t);return d(t,this.cacheKey,{value:n},i),n},p.getContext=function(t){switch(typeof t){case"undefined":t=0;case"number":return this.contexts[t];case"string":return this.getContext(function(e){return t in e});case"function":for(var e=0,i=this.contexts.length;i>e;e++){var n=this.contexts[e];if(t.call(this,n))return n}}},p.inContext=function(t,e){this.contexts.unshift(t);var i=e.call(this);return this.contexts.shift(),i},h.prototype={inherit:function(t,e){function i(t,e){var i=a[t];i&&(n||(n=r(a)),e.call(n,i),n[t]=null)}var n,a=this;return i("params",function(e){for(var i=0,n=e.length;n>i;i++)this[e[i]]=t[i]}),i("setParams",function(e){e.apply(this,t)}),i("typeParams",function(t){for(var i=0,n=t.length;n>i;i++){var r=t[i],a=this[r];a&&(this[r]=e(a))}}),i("resolve",function(t){t.call(this,e)}),n||a},createProperty:function(t){return r(this,{binary:t,view:t.view})},toValue:function(t,e){return!1!==e&&"string"==typeof t?this.binary.getContext(t)[t]:a(this,this.binary,t)}},o.Type=h,u.prototype=r(h.prototype,{setParams:function(){this.baseType&&(this.typeParams=["baseType"].concat(this.typeParams||[]))},baseRead:function(){return this.binary.read(this.baseType)},baseWrite:function(t){return this.binary.write(this.baseType,t)}}),n(u.prototype,{read:u.prototype.baseRead,write:u.prototype.baseWrite}),o.Template=u,p.as=function(t,e){var i=e?this:r(this);return t=t||y,i.typeSet=t===y||y.isPrototypeOf(t)?t:r(y,t),i.cacheKey=v,i.cacheKey=i._getCached(t,function(){return v+"."+ ++b},!0),i},p.seek=function(t,e){if(t=this.toValue(t),void 0!==e){var i=this.view.tell();this.view.seek(t);var n=e.call(this);return this.view.seek(i),n}return this.view.seek(t)},p.tell=function(){return this.view.tell()},p.skip=function(t,e){return this.seek(this.tell()+this.toValue(t),e)},p.slice=function(t,e,i){return new o(this.view.slice(t,e,i),this.typeSet)},p._getType=function(t,e){switch(typeof t){case"string":if(!(t in this.typeSet))throw new ReferenceError("Unknown type: "+t);return this._getType(this.typeSet[t],e);case"number":return this._getType(y.bitfield,[t]);case"object":if(i(t,h)){var n=this;return t.inherit(e||[],function(t){return n.getType(t)})}return i(t,Array)?this._getCached(t,function(t){return this.getType(t[0],t.slice(1))},!0):this._getCached(t,function(t){return this.getType(y.object,[t])},!1)}},p.getType=function(t,e){var n=this._getType(t,e);return n&&!i(t,h)&&(n.name="object"==typeof t?i(t,Array)?t[0]+"("+t.slice(1).join(", ")+")":"object":String(t)),n},p._action=function(t,e,i){if(void 0!==t){t=this.getType(t);var n=this._named(function(){return i.call(this,t.createProperty(this),this.contexts[0])},"["+t.name+"]",e);return void 0!==e?this.seek(e,n):n.call(this)}},p.read=function(t,e){return this._action(t,e,function(t,e){return t.read(e)})},p.readAll=function(){return this.read("jBinary.all",0)},p.write=function(t,e,i){return this._action(t,i,function(t,i){var n=this.tell();return t.write(e,i),this.tell()-n})},p.writeAll=function(t){return this.write("jBinary.all",t,0)},function(t,e){for(var i=0,n=e.length;n>i;i++){var a=e[i];y[a.toLowerCase()]=r(t,{dataType:a})}}(h({params:["littleEndian"],read:function(){return this.view["get"+this.dataType](void 0,this.littleEndian)},write:function(t){this.view["write"+this.dataType](t,this.littleEndian)}}),["Uint8","Uint16","Uint32","Uint64","Int8","Int16","Int32","Int64","Float32","Float64","Char"]),n(y,{byte:y.uint8,float:y.float32,double:y.float64}),y.array=u({params:["baseType","length"],read:function(){var t=this.toValue(this.length);if(this.baseType===y.uint8)return this.view.getBytes(t,void 0,!0,!0);var e;if(void 0!==t){e=new Array(t);for(var i=0;t>i;i++)e[i]=this.baseRead()}else{var n=this.view.byteLength;for(e=[];this.binary.tell()<n;)e.push(this.baseRead())}return e},write:function(t){if(this.baseType===y.uint8)return this.view.writeBytes(t);for(var e=0,i=t.length;i>e;e++)this.baseWrite(t[e])}}),y.binary=u({params:["length","typeSet"],read:function(){var t=this.binary.tell(),e=this.binary.skip(this.toValue(this.length));return new o(this.view.slice(t,e),this.typeSet)},write:function(t){this.binary.write("blob",t.read("blob",0))}}),y.bitfield=h({params:["bitSize"],read:function(){return this.view.getUnsigned(this.bitSize)},write:function(t){this.view.writeUnsigned(t,this.bitSize)}}),y.blob=h({params:["length"],read:function(){return this.view.getBytes(this.toValue(this.length))},write:function(t){this.view.writeBytes(t,!0)}}),y.const=u({params:["baseType","value","strict"],read:function(){var t=this.baseRead();if(this.strict&&t!==this.value){if(i(this.strict,Function))return this.strict(t);throw new TypeError("Unexpected value ("+t+" !== "+this.value+").")}return t},write:function(t){this.baseWrite(this.strict||void 0===t?this.value:t)}}),y.enum=u({params:["baseType","matches"],setParams:function(t,e){this.backMatches={};for(var i in e)this.backMatches[e[i]]=i},read:function(){var t=this.baseRead();return t in this.matches?this.matches[t]:t},write:function(t){this.baseWrite(t in this.backMatches?this.backMatches[t]:t)}}),y.extend=h({setParams:function(){this.parts=arguments},resolve:function(t){for(var e=this.parts,i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=t(e[r]);this.parts=n},read:function(){var t=this.parts,e=this.binary.read(t[0]);return this.binary.inContext(e,function(){for(var i=1,r=t.length;r>i;i++)n(e,this.read(t[i]))}),e},write:function(t){var e=this.parts;this.binary.inContext(t,function(){for(var i=0,n=e.length;n>i;i++)this.write(e[i],t)})}}),y.if=u({params:["condition","trueType","falseType"],typeParams:["trueType","falseType"],getBaseType:function(){return this.toValue(this.condition)?this.trueType:this.falseType}}),y.if_not=y.ifNot=u({setParams:function(t,e,i){this.baseType=["if",t,i,e]}}),y.lazy=u({marker:"jBinary.Lazy",params:["innerType","length"],getBaseType:function(){return["binary",this.length,this.binary.typeSet]},read:function(){var t=function(e){return 0===arguments.length?"value"in t?t.value:t.value=t.binary.read(t.innerType):n(t,{wasChanged:!0,value:e}).value};return t[this.marker]=!0,n(t,{binary:n(this.baseRead(),{contexts:this.binary.contexts.slice()}),innerType:this.innerType})},write:function(t){t.wasChanged||!t[this.marker]?this.binary.write(this.innerType,t()):this.baseWrite(t.binary)}}),y.object=h({params:["structure","proto"],resolve:function(t){var e={};for(var n in this.structure)e[n]=i(this.structure[n],Function)?this.structure[n]:t(this.structure[n]);this.structure=e},read:function(){var t=this,e=this.structure,n=this.proto?r(this.proto):{};return this.binary.inContext(n,function(){for(var r in e)this._named(function(){var a=i(e[r],Function)?e[r].call(t,n):this.read(e[r]);void 0!==a&&(n[r]=a)},r).call(this)}),n},write:function(t){var e=this,n=this.structure;this.binary.inContext(t,function(){for(var r in n)this._named(function(){i(n[r],Function)?t[r]=n[r].call(e,t):this.write(n[r],t[r])},r).call(this)})}}),y.skip=h({params:["length"],read:function(){this.view.skip(this.toValue(this.length))},write:function(){this.read()}}),y.string=u({params:["length","encoding"],read:function(){return this.view.getString(this.toValue(this.length),void 0,this.encoding)},write:function(t){this.view.writeString(t,this.encoding)}}),y.string0=h({params:["length","encoding"],read:function(){var t=this.view,e=this.length;if(void 0===e){var i=t.tell(),n=0;for(e=t.byteLength-i;e>n&&t.getUint8();)n++;var r=t.getString(n,i,this.encoding);return e>n&&t.skip(1),r}return t.getString(e,void 0,this.encoding).replace(/\0.*$/,"")},write:function(t){var e=this.view,i=void 0===this.length?1:this.length-t.length;e.writeString(t,void 0,this.encoding),i>0&&(e.writeUint8(0),e.skip(i-1))}}),o.loadData=s(function(e,n){var r;if(i(e,t.Blob)){var a;if("FileReader"in t)a=new FileReader,a.onload=a.onerror=function(){n(this.error,this.result)},a.readAsArrayBuffer(e);else{a=new FileReaderSync;var s,o;try{o=a.readAsArrayBuffer(e)}catch(t){s=t}finally{n(s,o)}}}else if("string"!=typeof e)n(new TypeError("Unsupported source type."));else if(r=e.match(/^data:(.+?)(;base64)?,(.*)$/))try{var h=r[2],u=r[3];n(null,(h?atob:decodeURIComponent)(u))}catch(t){n(t)}else if("XMLHttpRequest"in t){var c=new XMLHttpRequest;c.open("GET",e,!0),"responseType"in c?c.responseType="arraybuffer":"overrideMimeType"in c?c.overrideMimeType("text/plain; charset=x-user-defined"):c.setRequestHeader("Accept-Charset","x-user-defined"),"onload"in c||(c.onreadystatechange=function(){4===this.readyState&&this.onload()});var f=function(t){n(new Error(t))};c.onload=function(){return 0!==this.status&&200!==this.status?f("HTTP Error #"+this.status+": "+this.statusText):("response"in this||(this.response=new VBArray(this.responseBody).toArray()),void n(null,this.response))},c.onerror=function(){f("Network error.")},c.send(null)}else n(new TypeError("Unsupported source type."))}),o.load=s(function(t,e,i){var n=o.loadData(t);o.load.getTypeSet(t,e,function(t){n.then(function(e){i(null,new o(e,t))},i)})}),o.load.getTypeSet=function(t,e,i){i(e)},p._toURI="URL"in t&&"createObjectURL"in URL?function(t){var e=this.seek(0,function(){return this.view.getBytes()});return URL.createObjectURL(new Blob([e],{type:t}))}:function(t){var e=this.seek(0,function(){return this.view.getString(void 0,void 0,"binary")});return"data:"+t+";base64,"+btoa(e)},p._mimeType=function(t){return t||this.typeSet["jBinary.mimeType"]||"application/octet-stream"},p.toURI=function(t){return this._toURI(this._mimeType(t))},c){var g=o.downloader=c.createElement("a");g.style.display="none"}return p.saveAs=s(function(t,e,i){"string"==typeof t?("msSaveBlob"in navigator?navigator.msSaveBlob(new Blob([this.read("blob",0)],{type:this._mimeType(e)}),t):c?(g.parentNode||c.body.appendChild(g),g.href=this.toURI(e),g.download=t,g.click(),g.href=g.download=""):i(new TypeError("Saving from Web Worker is not supported.")),i()):i(new TypeError("Unsupported storage type."))}),o});

},{"jdataview":33}],33:[function(require,module,exports){
(function (Buffer){
!function(t){var e=this;module.exports=function(t){"use strict";function e(t,e){return"object"==typeof t&&null!==t&&(t.constructor===e||Object.prototype.toString.call(t)==="[object "+e.name+"]")}function i(t,i){return!i&&e(t,Array)?t:Array.prototype.slice.call(t)}function n(t,e){return void 0!==t?t:e}function r(t,i,f,s){if(r.is(t)){var o=t.slice(i,i+f);return o._littleEndian=n(s,o._littleEndian),o}if(!r.is(this))return new r(t,i,f,s);if(this.buffer=t=r.wrapBuffer(t),this._isArrayBuffer=h.ArrayBuffer&&e(t,ArrayBuffer),this._isPixelData=!1,this._isDataView=h.DataView&&this._isArrayBuffer,this._isNodeBuffer=h.NodeBuffer&&e(t,Buffer),!this._isNodeBuffer&&!this._isArrayBuffer&&!e(t,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!s;var u="byteLength"in t?t.byteLength:t.length;this.byteOffset=i=n(i,0),this.byteLength=f=n(f,u-i),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(t,i,f):this._checkBounds(i,f,u),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function f(t){if(h.NodeBuffer)return new Buffer(t,"binary");for(var e=h.ArrayBuffer?Uint8Array:Array,i=new e(t.length),n=0,r=t.length;r>n;n++)i[n]=255&t.charCodeAt(n);return i}function s(t){return t>=0&&31>t?1<<t:s[t]||(s[t]=Math.pow(2,t))}function o(t,e){this.lo=t,this.hi=e}function u(){o.apply(this,arguments)}var h={NodeBuffer:"Buffer"in t,DataView:"DataView"in t,ArrayBuffer:"ArrayBuffer"in t,PixelData:!1},a=t.TextEncoder,_=t.TextDecoder;h.NodeBuffer&&function(t){try{t.writeFloatLE(1/0,0)}catch(t){h.NodeBuffer=!1}}(new Buffer(4));var c={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};r.wrapBuffer=function(t){switch(typeof t){case"number":if(h.NodeBuffer)t=new Buffer(t),t.fill(0);else if(h.ArrayBuffer)t=new Uint8Array(t).buffer;else{t=new Array(t);for(var n=0;n<t.length;n++)t[n]=0}return t;case"string":t=f(t);default:return"length"in t&&!(h.NodeBuffer&&e(t,Buffer)||h.ArrayBuffer&&e(t,ArrayBuffer))&&(h.NodeBuffer?t=new Buffer(t):h.ArrayBuffer?e(t,ArrayBuffer)||(t=new Uint8Array(t).buffer,e(t,ArrayBuffer)||(t=new Uint8Array(i(t,!0)).buffer)):t=i(t)),t}},r.is=function(t){return t&&t.jDataView},r.from=function(){return new r(arguments)},r.Uint64=o,o.prototype={valueOf:function(){return this.lo+s(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},o.fromNumber=function(t){var e=Math.floor(t/s(32));return new o(t-e*s(32),e)},r.Int64=u,u.prototype="create"in Object?Object.create(o.prototype):new o,u.prototype.valueOf=function(){return this.hi<s(31)?o.prototype.valueOf.apply(this,arguments):-(s(32)-this.lo+s(32)*(s(32)-1-this.hi))},u.fromNumber=function(t){var e,i;if(t>=0){var n=o.fromNumber(t);e=n.lo,i=n.hi}else i=Math.floor(t/s(32)),e=t-i*s(32),i+=s(32);return new u(e,i)};var y=r.prototype={compatibility:h,jDataView:!0,_checkBounds:function(t,e,i){if("number"!=typeof t)throw new TypeError("Offset is not a number.");if("number"!=typeof e)throw new TypeError("Size is not a number.");if(0>e)throw new RangeError("Length is negative.");if(0>t||t+e>n(i,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(t,e,i,r,f){return this._engineAction(t,e,n(i,this._offset),n(r,this._littleEndian),f)},_dataViewAction:function(t,e,i,n,r){return this._offset=i+c[t],e?this._view["get"+t](i,n):this._view["set"+t](i,r,n)},_arrayBufferAction:function(e,i,r,f,s){var o,u=c[e],h=t[e+"Array"];if(f=n(f,this._littleEndian),1===u||(this.byteOffset+r)%u==0&&f)return o=new h(this.buffer,this.byteOffset+r,1),this._offset=r+u,i?o[0]:o[0]=s;var a=new Uint8Array(i?this.getBytes(u,r,f,!0):u);return o=new h(a.buffer,0,1),i?o[0]:(o[0]=s,void this._setBytes(r,a,f))},_arrayAction:function(t,e,i,n,r){return e?this["_get"+t](i,n):this["_set"+t](i,r,n)},_getBytes:function(t,e,r){r=n(r,this._littleEndian),e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),e+=this.byteOffset,this._offset=e-this.byteOffset+t;var f=this._isArrayBuffer?new Uint8Array(this.buffer,e,t):(this.buffer.slice||Array.prototype.slice).call(this.buffer,e,e+t);return r||1>=t?f:i(f).reverse()},getBytes:function(t,e,r,f){var s=this._getBytes(t,e,n(r,!0));return f?i(s):s},_setBytes:function(t,e,r){var f=e.length;if(0!==f){if(r=n(r,this._littleEndian),t=n(t,this._offset),this._checkBounds(t,f),!r&&f>1&&(e=i(e,!0).reverse()),t+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,t,f).set(e);else if(this._isNodeBuffer)new Buffer(e).copy(this.buffer,t);else for(var s=0;f>s;s++)this.buffer[t+s]=e[s];this._offset=t-this.byteOffset+f}},setBytes:function(t,e,i){this._setBytes(t,e,n(i,!0))},getString:function(t,e,i){if(this._isNodeBuffer)return e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),this._offset=e+t,this.buffer.toString(i||"binary",this.byteOffset+e,this.byteOffset+this._offset);var r=this._getBytes(t,e,!0);if(i="utf8"===i?"utf-8":i||"binary",_&&"binary"!==i)return new _(i).decode(this._isArrayBuffer?r:new Uint8Array(r));var f="";t=r.length;for(var s=0;t>s;s++)f+=String.fromCharCode(r[s]);return"utf-8"===i&&(f=decodeURIComponent(escape(f))),f},setString:function(t,e,i){if(this._isNodeBuffer)return t=n(t,this._offset),this._checkBounds(t,e.length),void(this._offset=t+this.buffer.write(e,this.byteOffset+t,i||"binary"));i="utf8"===i?"utf-8":i||"binary";var r;a&&"binary"!==i?r=new a(i).encode(e):("utf-8"===i&&(e=unescape(encodeURIComponent(e))),r=f(e)),this._setBytes(t,r,!0)},getChar:function(t){return this.getString(1,t)},setChar:function(t,e){this.setString(t,e)},tell:function(){return this._offset},seek:function(t){return this._checkBounds(t,0),this._offset=t},skip:function(t){return this.seek(this._offset+t)},slice:function(t,e,i){function f(t,e){return 0>t?t+e:t}return t=f(t,this.byteLength),e=f(n(e,this.byteLength),this.byteLength),i?new r(this.getBytes(e-t,t,!0,!0),void 0,void 0,this._littleEndian):new r(this.buffer,this.byteOffset+t,e-t,this._littleEndian)},alignBy:function(t){return this._bitOffset=0,1!==n(t,1)?this.skip(t-(this._offset%t||t)):this._offset},_getFloat64:function(t,e){var i=this._getBytes(8,t,e),n=1-2*(i[7]>>7),r=((i[7]<<1&255)<<3|i[6]>>4)-1023,f=(15&i[6])*s(48)+i[5]*s(40)+i[4]*s(32)+i[3]*s(24)+i[2]*s(16)+i[1]*s(8)+i[0];return 1024===r?0!==f?NaN:1/0*n:-1023===r?n*f*s(-1074):n*(1+f*s(-52))*s(r)},_getFloat32:function(t,e){var i=this._getBytes(4,t,e),n=1-2*(i[3]>>7),r=(i[3]<<1&255|i[2]>>7)-127,f=(127&i[2])<<16|i[1]<<8|i[0];return 128===r?0!==f?NaN:1/0*n:-127===r?n*f*s(-149):n*(1+f*s(-23))*s(r)},_get64:function(t,e,i){i=n(i,this._littleEndian),e=n(e,this._offset);for(var r=i?[0,4]:[4,0],f=0;2>f;f++)r[f]=this.getUint32(e+r[f],i);return this._offset=e+8,new t(r[0],r[1])},getInt64:function(t,e){return this._get64(u,t,e)},getUint64:function(t,e){return this._get64(o,t,e)},_getInt32:function(t,e){var i=this._getBytes(4,t,e);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},_getUint32:function(t,e){return this._getInt32(t,e)>>>0},_getInt16:function(t,e){return this._getUint16(t,e)<<16>>16},_getUint16:function(t,e){var i=this._getBytes(2,t,e);return i[1]<<8|i[0]},_getInt8:function(t){return this._getUint8(t)<<24>>24},_getUint8:function(t){return this._getBytes(1,t)[0]},_getBitRangeData:function(t,e){var i=(n(e,this._offset)<<3)+this._bitOffset,r=i+t,f=i>>>3,s=r+7>>>3,o=this._getBytes(s-f,f,!0),u=0;(this._bitOffset=7&r)&&(this._bitOffset-=8);for(var h=0,a=o.length;a>h;h++)u=u<<8|o[h];return{start:f,bytes:o,wideValue:u}},getSigned:function(t,e){var i=32-t;return this.getUnsigned(t,e)<<i>>i},getUnsigned:function(t,e){var i=this._getBitRangeData(t,e).wideValue>>>-this._bitOffset;return 32>t?i&~(-1<<t):i},_setBinaryFloat:function(t,e,i,n,r){var f,o,u=0>e?1:0,h=~(-1<<n-1),a=1-h;0>e&&(e=-e),0===e?(f=0,o=0):isNaN(e)?(f=2*h+1,o=1):1/0===e?(f=2*h+1,o=0):(f=Math.floor(Math.log(e)/Math.LN2),f>=a&&h>=f?(o=Math.floor((e*s(-f)-1)*s(i)),f+=h):(o=Math.floor(e/s(a-i)),f=0));for(var _=[];i>=8;)_.push(o%256),o=Math.floor(o/256),i-=8;for(f=f<<i|o,n+=i;n>=8;)_.push(255&f),f>>>=8,n-=8;_.push(u<<n|f),this._setBytes(t,_,r)},_setFloat32:function(t,e,i){this._setBinaryFloat(t,e,23,8,i)},_setFloat64:function(t,e,i){this._setBinaryFloat(t,e,52,11,i)},_set64:function(t,e,i,r){"object"!=typeof i&&(i=t.fromNumber(i)),r=n(r,this._littleEndian),e=n(e,this._offset);var f=r?{lo:0,hi:4}:{lo:4,hi:0};for(var s in f)this.setUint32(e+f[s],i[s],r);this._offset=e+8},setInt64:function(t,e,i){this._set64(u,t,e,i)},setUint64:function(t,e,i){this._set64(o,t,e,i)},_setUint32:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255,e>>>16&255,e>>>24],i)},_setUint16:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255],i)},_setUint8:function(t,e){this._setBytes(t,[255&e])},setUnsigned:function(t,e,i){var n=this._getBitRangeData(i,t),r=n.wideValue,f=n.bytes;r&=~(~(-1<<i)<<-this._bitOffset),r|=(32>i?e&~(-1<<i):e)<<-this._bitOffset;for(var s=f.length-1;s>=0;s--)f[s]=255&r,r>>>=8;this._setBytes(n.start,f,!0)}},l={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};y._nodeBufferAction=function(t,e,i,n,r){this._offset=i+c[t];var f=l[t]+("Int8"===t||"Uint8"===t?"":n?"LE":"BE");return i+=this.byteOffset,e?this.buffer["read"+f](i):this.buffer["write"+f](r,i)};for(var g in c)!function(t){y["get"+t]=function(e,i){return this._action(t,!0,e,i)},y["set"+t]=function(e,i,n){this._action(t,!1,e,n,i)}}(g);y._setInt32=y._setUint32,y._setInt16=y._setUint16,y._setInt8=y._setUint8,y.setSigned=y.setUnsigned;for(var B in y)"set"===B.slice(0,3)&&function(t){y["write"+t]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+t].apply(this,arguments)}}(B.slice(3));return r}(e)}();

}).call(this,require("buffer").Buffer)

},{"buffer":3}],34:[function(require,module,exports){
"use strict";function _del(e){size--,delete cache[e]}var cache=Object.create(null),debug=!1,hitCount=0,missCount=0,size=0;exports.put=function(e,t,i,o){if(debug&&console.log("caching: %s = %j (@%s)",e,t,i),void 0!==i&&("number"!=typeof i||isNaN(i)||i<=0))throw new Error("Cache timeout must be a positive number");if(void 0!==o&&"function"!=typeof o)throw new Error("Cache timeout callback must be a function");var u=cache[e];u?clearTimeout(u.timeout):size++;var n={value:t,expire:i+Date.now()};return isNaN(n.expire)||(n.timeout=setTimeout(function(){_del(e),o&&o(e,t)},i)),cache[e]=n,t},exports.del=function(e){var t=!0,i=cache[e];return i?(clearTimeout(i.timeout),!isNaN(i.expire)&&i.expire<Date.now()&&(t=!1)):t=!1,t&&_del(e),t},exports.clear=function(){for(var e in cache)clearTimeout(cache[e].timeout);size=0,cache=Object.create(null),debug&&(hitCount=0,missCount=0)},exports.get=function(e){var t=cache[e];if(void 0!==t){if(isNaN(t.expire)||t.expire>=Date.now())return debug&&hitCount++,t.value;debug&&missCount++,size--,delete cache[e]}else debug&&missCount++;return null},exports.size=function(){return size},exports.memsize=function(){var e,t=0;for(e in cache)t++;return t},exports.debug=function(e){debug=e},exports.hits=function(){return hitCount},exports.misses=function(){return missCount},exports.keys=function(){return Object.keys(cache)};

},{}],35:[function(require,module,exports){
"use strict";function Inflate(t){if(!(this instanceof Inflate))return new Inflate(t);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},t||{});var i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),!(i.windowBits>=0&&i.windowBits<16)||t&&t.windowBits||(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&0==(15&i.windowBits)&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var n=zlib_inflate.inflateInit2(this.strm,i.windowBits);if(n!==c.Z_OK)throw new Error(msg[n]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}function inflate(t,i){var n=new Inflate(i);if(n.push(t,!0),n.err)throw n.msg;return n.result}function inflateRaw(t,i){return i=i||{},i.raw=!0,inflate(t,i)}var zlib_inflate=require("./zlib/inflate"),utils=require("./utils/common"),strings=require("./utils/strings"),c=require("./zlib/constants"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),GZheader=require("./zlib/gzheader"),toString=Object.prototype.toString;Inflate.prototype.push=function(t,i){var n,s,e,r,o,a,u=this.strm,l=this.options.chunkSize,h=this.options.dictionary,_=!1;if(this.ended)return!1;s=i===~~i?i:!0===i?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?u.input=strings.binstring2buf(t):"[object ArrayBuffer]"===toString.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new utils.Buf8(l),u.next_out=0,u.avail_out=l),n=zlib_inflate.inflate(u,c.Z_NO_FLUSH),n===c.Z_NEED_DICT&&h&&(a="string"==typeof h?strings.string2buf(h):"[object ArrayBuffer]"===toString.call(h)?new Uint8Array(h):h,n=zlib_inflate.inflateSetDictionary(this.strm,a)),n===c.Z_BUF_ERROR&&!0===_&&(n=c.Z_OK,_=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==c.Z_STREAM_END&&(0!==u.avail_in||s!==c.Z_FINISH&&s!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(e=strings.utf8border(u.output,u.next_out),r=u.next_out-e,o=strings.buf2string(u.output,e),u.next_out=r,u.avail_out=l-r,r&&utils.arraySet(u.output,u.output,e,r,0),this.onData(o)):this.onData(utils.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(_=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(s=c.Z_FINISH),s===c.Z_FINISH?(n=zlib_inflate.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):s!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),u.avail_out=0,!0)},Inflate.prototype.onData=function(t){this.chunks.push(t)},Inflate.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=inflateRaw,exports.ungzip=inflate;

},{"./utils/common":36,"./utils/strings":37,"./zlib/constants":39,"./zlib/gzheader":41,"./zlib/inflate":43,"./zlib/messages":45,"./zlib/zstream":46}],36:[function(require,module,exports){
"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);

},{}],37:[function(require,module,exports){
"use strict";function buf2binstring(r,t){if(t<65537&&(r.subarray&&STR_APPLY_UIA_OK||!r.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(r,t));for(var n="",e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(r){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(r){var t,n,e,u,f,o=r.length,i=0;for(u=0;u<o;u++)n=r.charCodeAt(u),55296==(64512&n)&&u+1<o&&56320==(64512&(e=r.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(e-56320),u++),i+=n<128?1:n<2048?2:n<65536?3:4;for(t=new utils.Buf8(i),f=0,u=0;f<i;u++)n=r.charCodeAt(u),55296==(64512&n)&&u+1<o&&56320==(64512&(e=r.charCodeAt(u+1)))&&(n=65536+(n-55296<<10)+(e-56320),u++),n<128?t[f++]=n:n<2048?(t[f++]=192|n>>>6,t[f++]=128|63&n):n<65536?(t[f++]=224|n>>>12,t[f++]=128|n>>>6&63,t[f++]=128|63&n):(t[f++]=240|n>>>18,t[f++]=128|n>>>12&63,t[f++]=128|n>>>6&63,t[f++]=128|63&n);return t},exports.buf2binstring=function(r){return buf2binstring(r,r.length)},exports.binstring2buf=function(r){for(var t=new utils.Buf8(r.length),n=0,e=t.length;n<e;n++)t[n]=r.charCodeAt(n);return t},exports.buf2string=function(r,t){var n,e,u,f,o=t||r.length,i=new Array(2*o);for(e=0,n=0;n<o;)if((u=r[n++])<128)i[e++]=u;else if((f=_utf8len[u])>4)i[e++]=65533,n+=f-1;else{for(u&=2===f?31:3===f?15:7;f>1&&n<o;)u=u<<6|63&r[n++],f--;f>1?i[e++]=65533:u<65536?i[e++]=u:(u-=65536,i[e++]=55296|u>>10&1023,i[e++]=56320|1023&u)}return buf2binstring(i,e)},exports.utf8border=function(r,t){var n;for(t=t||r.length,t>r.length&&(t=r.length),n=t-1;n>=0&&128==(192&r[n]);)n--;return n<0?t:0===n?t:n+_utf8len[r[n]]>t?n:t};

},{"./common":36}],38:[function(require,module,exports){
"use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do{d=d+r[t++]|0,l=l+d|0}while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;

},{}],39:[function(require,module,exports){
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};

},{}],40:[function(require,module,exports){
"use strict";function makeTable(){for(var r,a=[],c=0;c<256;c++){r=c;for(var e=0;e<8;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r^=-1;for(var n=e;n<t;n++)r=r>>>8^o[255&(r^a[n])];return-1^r}var crcTable=makeTable();module.exports=crc32;

},{}],41:[function(require,module,exports){
"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=GZheader;

},{}],42:[function(require,module,exports){
"use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,0===(x=_>>>16&255))E[d++]=65535&_;else{if(!(16&x)){if(0==(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(v<x&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,!(16&(x=_>>>16&255))){if(0==(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,v<x&&(u+=p[a++]<<v,(v+=8)<x&&(u+=p[a++]<<v,v+=8)),(A+=u&(1<<x)-1)>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if((x=A-x)>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}else if(b<x){if(B+=f+b-x,(x-=b)<g){g-=x;do{E[d++]=c[B++]}while(--x);if(B=0,b<g){x=b,g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}}}else if(B+=b-x,x<g){g-=x;do{E[d++]=c[B++]}while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do{E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3}while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(a<t&&d<l);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=a<t?t-a+5:5-(a-t),i.avail_out=d<l?l-d+257:257-(d-l),o.hold=u,o.bits=v};

},{}],43:[function(require,module,exports){
"use strict";function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,t<0?(a=0,t=-t):(a=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,_,k,m,w,u,R,T,D,g,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,g=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,D=8+(15&d),0===a.wbits)a.wbits=D;else if(D>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<D,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(D=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,D)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.name+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do{D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.comment+=String.fromCharCode(D))}while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=zswap32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;f<14;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=257+(31&d),d>>>=5,f-=5,a.ndist=1+(31&d),d>>>=5,f-=5,a.ncode=4+(15&d),d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},g=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(w<16)d>>>=k,f-=k,a.lens[a.have++]=w;else{if(16===w){for(x=k+2;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=k,f-=k,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}D=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===w){for(x=k+3;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=k+7;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=D}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},g=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},g=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,g){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0==(240&m)){for(u=k,R=m,T=w;A=a.lencode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,a.length=w,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0==(240&m)){for(u=k,R=m,T=w;A=a.distcode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=w,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if((E=a.offset-E)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),_=a.window}else _=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do{n[l++]=_[b++]}while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;f<32;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:zswap32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:g=Z_STREAM_END;break e;case BAD:g=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&g===Z_OK&&(g=Z_BUF_ERROR),g)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0==(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}function inflateSetDictionary(e,t){var a,i,n=t.length;return e&&e.state?(a=e.state,0!==a.wrap&&a.mode!==DICT?Z_STREAM_ERROR:a.mode===DICT&&(i=1,(i=adler32(i,t,n,0))!==a.check)?Z_DATA_ERROR:updatewindow(e,t,n,n)?(a.mode=MEM,Z_MEM_ERROR):(a.havedict=1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)";

},{"../utils/common":36,"./adler32":38,"./crc32":40,"./inffast":42,"./inftrees":44}],44:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;a<=MAXBITS;a++)c[a]=0;for(b=0;b<f;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;A<L&&0===c[A];A++);for(M<A&&(M=A),G=1,a=1;a<=MAXBITS;a++)if(G<<=1,(G-=c[a])<0)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;a<MAXBITS;a++)m[a+1]=m[a]+c[a];for(b=0;b<f;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do{l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0}while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0==--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;X+d<L&&!((G-=c[X+d])<=0);)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};

},{"../utils/common":36}],45:[function(require,module,exports){
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};

},{}],46:[function(require,module,exports){
"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;

},{}],47:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.prependListener=noop,process.prependOnceListener=noop,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],48:[function(require,module,exports){
(function (process){
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var n="undefined"!=typeof window?window:self,e=n.Q;n.Q=t(),n.Q.noConflict=function(){return n.Q=e,this}}}(function(){"use strict";function t(t){return function(){return q.apply(t,arguments)}}function n(t){return t===Object(t)}function e(t){return"[object StopIteration]"===nt(t)||t instanceof V}function r(t,n){if(B&&n.stack&&"object"==typeof t&&null!==t&&t.stack){for(var e=[],r=n;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(Y(t,"__minimumStackCounter__",{value:r.stackCounter,configurable:!0}),e.unshift(r.stack));e.unshift(t.stack);var i=e.join("\n"+et+"\n"),u=o(i);Y(t,"stack",{value:u,configurable:!0})}}function o(t){for(var n=t.split("\n"),e=[],r=0;r<n.length;++r){var o=n[r];c(o)||i(o)||!o||e.push(o)}return e.join("\n")}function i(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var n=u(t);if(!n)return!1;var e=n[0],r=n[1];return e===$&&r>=G&&r<=ft}function f(){if(B)try{throw new Error}catch(r){var t=r.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],e=u(n);if(!e)return;return $=e[0],e[1]}}function s(t){return t instanceof d?t:m(t)?S(t):R(t)}function p(){function t(t){n=t,s.longStackSupport&&B&&(i.source=t),J(e,function(n,e){s.nextTick(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=X(p.prototype),i=X(d.prototype);if(i.promiseDispatch=function(t,o,i){var u=z(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):s.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=y(n);return v(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},s.longStackSupport&&B)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1),i.stackCounter=rt++}return o.promise=i,o.resolve=function(e){n||t(s(e))},o.fulfill=function(e){n||t(R(e))},o.reject=function(e){n||t(T(e))},o.notify=function(t){n||J(r,function(n,e){s.nextTick(function(){e(t)})},void 0)},o}function a(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=p();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function l(t){return a(function(n,e){for(var r=0,o=t.length;r<o;r++)s(t[r]).then(n,e)})}function d(t,n,e){void 0===n&&(n=function(t){return T(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var r=X(d.prototype);if(r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(t){u=T(t)}e&&e(u)},r.inspect=e,e){var o=e();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function h(t,n,e,r){return s(t).then(n,e,r)}function y(t){if(v(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function v(t){return t instanceof d}function m(t){return n(t)&&"function"==typeof t.then}function k(t){return v(t)&&"pending"===t.inspect().state}function w(t){return!v(t)||"fulfilled"===t.inspect().state}function j(t){return v(t)&&"rejected"===t.inspect().state}function g(){ot.length=0,it.length=0,ct||(ct=!0)}function b(t,n){ct&&("object"==typeof process&&"function"==typeof process.emit&&s.nextTick.runAfter(function(){-1!==K(it,t)&&(process.emit("unhandledRejection",n,t),ut.push(t))}),it.push(t),n&&void 0!==n.stack?ot.push(n.stack):ot.push("(no stack) "+n))}function x(t){if(ct){var n=K(it,t);-1!==n&&("object"==typeof process&&"function"==typeof process.emit&&s.nextTick.runAfter(function(){var e=K(ut,t);-1!==e&&(process.emit("rejectionHandled",ot[n],t),ut.splice(e,1))}),it.splice(n,1),ot.splice(n,1))}}function T(t){var n=d({when:function(n){return n&&x(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return b(n,t),n}function R(t){return d({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},delete:function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return tt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function S(t){var n=p();return s.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function E(t){return d({isDef:function(){}},function(n,e){return P(t,n,e)},function(){return s(t).inspect()})}function O(t,n,e){return s(t).spread(n,e)}function C(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=r[t](n)}catch(t){return T(t)}return u.done?s(u.value):h(u.value,o,i)}try{u=r[t](n)}catch(t){return e(t)?s(t.value):T(t)}return h(u,o,i)}var r=t.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function Q(t){s.done(s.async(t)())}function _(t){throw new V(t)}function N(t){return function(){return O([this,D(arguments)],function(n,e){return t.apply(n,e)})}}function P(t,n,e){return s(t).dispatch(n,e)}function D(t){return h(t,function(t){var n=0,e=p();return J(t,function(r,o,i){var u;v(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,h(o,function(r){t[i]=r,0==--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function A(t){if(0===t.length)return s.resolve();var n=s.defer(),e=0;return J(t,function(r,o,i){function u(t){n.resolve(t)}function c(t){if(0===--e){var r=t||new Error(""+t);r.message="Q can't get fulfillment value from any promise, all promises were rejected. Last error message: "+r.message,n.reject(r)}}function f(t){n.notify({index:i,value:t})}var s=t[i];e++,h(s,u,c,f)},void 0),n.promise}function I(t){return h(t,function(t){return t=W(t,s),h(D(W(t,function(t){return h(t,H,H)})),function(){return t})})}function U(t){return s(t).allSettled()}function F(t,n){return s(t).then(void 0,void 0,n)}function M(t,n){return s(t).nodeify(n)}var B=!1;try{throw new Error}catch(t){B=!!t.stack}var $,V,G=f(),H=function(){},L=function(){function t(){for(var t,r;e.next;)e=e.next,t=e.task,e.task=void 0,r=e.domain,r&&(e.domain=void 0,r.enter()),n(t,r);for(;c.length;)t=c.pop(),n(t);o=!1}function n(n,e){try{n()}catch(n){if(u)throw e&&e.exit(),setTimeout(t,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}var e={task:void 0,next:null},r=e,o=!1,i=void 0,u=!1,c=[];if(L=function(t){r=r.next={task:t,domain:u&&process.domain,next:null},o||(o=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)u=!0,i=function(){process.nextTick(t)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){i=s,f.port1.onmessage=t,t()};var s=function(){f.port2.postMessage(0)};i=function(){setTimeout(t,0),s()}}else i=function(){setTimeout(t,0)};return L.runAfter=function(t){c.push(t),o||(o=!0,i())},L}(),q=Function.call,z=t(Array.prototype.slice),J=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;e<r;e++)e in this&&(n=t(n,this[e],e));return n}),K=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),W=t(Array.prototype.map||function(t,n){var e=this,r=[];return J(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),X=Object.create||function(t){function n(){}return n.prototype=t,new n},Y=Object.defineProperty||function(t,n,e){return t[n]=e.value,t},Z=t(Object.prototype.hasOwnProperty),tt=Object.keys||function(t){var n=[];for(var e in t)Z(t,e)&&n.push(e);return n},nt=t(Object.prototype.toString);V="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";s.resolve=s,s.nextTick=L,s.longStackSupport=!1;var rt=1;"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(s.longStackSupport=!0),s.defer=p,p.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):arguments.length>2?t.resolve(z(arguments,1)):t.resolve(e)}},s.Promise=a,s.promise=a,a.race=l,a.all=D,a.reject=T,a.resolve=s,s.passByCopy=function(t){return t},d.prototype.passByCopy=function(){return this},s.join=function(t,n){return s(t).join(n)},d.prototype.join=function(t){return s([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Q can't join: not the same: "+t+" "+n)})},s.race=l,d.prototype.race=function(){return this.then(s.race)},s.makePromise=d,d.prototype.toString=function(){return"[object Promise]"},d.prototype.then=function(t,n,e){function o(n){try{return"function"==typeof t?t(n):n}catch(t){return T(t)}}function i(t){if("function"==typeof n){r(t,c);try{return n(t)}catch(t){return T(t)}}return T(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,f=p(),a=!1;return s.nextTick(function(){c.promiseDispatch(function(t){a||(a=!0,f.resolve(o(t)))},"when",[function(t){a||(a=!0,f.resolve(i(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(t){if(e=!0,!s.onerror)throw t;s.onerror(t)}e||f.notify(n)}]),f.promise},s.tap=function(t,n){return s(t).tap(n)},d.prototype.tap=function(t){return t=s(t),this.then(function(n){return t.fcall(n).thenResolve(n)})},s.when=h,d.prototype.thenResolve=function(t){return this.then(function(){return t})},s.thenResolve=function(t,n){return s(t).thenResolve(n)},d.prototype.thenReject=function(t){return this.then(function(){throw t})},s.thenReject=function(t,n){return s(t).thenReject(n)},s.nearer=y,s.isPromise=v,s.isPromiseAlike=m,s.isPending=k,d.prototype.isPending=function(){return"pending"===this.inspect().state},s.isFulfilled=w,d.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},s.isRejected=j,d.prototype.isRejected=function(){return"rejected"===this.inspect().state};var ot=[],it=[],ut=[],ct=!0;s.resetUnhandledRejections=g,s.getUnhandledReasons=function(){return ot.slice()},s.stopUnhandledRejectionTracking=function(){g(),ct=!1},g(),s.reject=T,s.fulfill=R,s.master=E,s.spread=O,d.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},s.async=C,s.spawn=Q,s.return=_,s.promised=N,s.dispatch=P,d.prototype.dispatch=function(t,n){var e=this,r=p();return s.nextTick(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},s.get=function(t,n){return s(t).dispatch("get",[n])},d.prototype.get=function(t){return this.dispatch("get",[t])},s.set=function(t,n,e){return s(t).dispatch("set",[n,e])},d.prototype.set=function(t,n){return this.dispatch("set",[t,n])},s.del=s.delete=function(t,n){return s(t).dispatch("delete",[n])},d.prototype.del=d.prototype.delete=function(t){return this.dispatch("delete",[t])},s.mapply=s.post=function(t,n,e){return s(t).dispatch("post",[n,e])},d.prototype.mapply=d.prototype.post=function(t,n){return this.dispatch("post",[t,n])},s.send=s.mcall=s.invoke=function(t,n){return s(t).dispatch("post",[n,z(arguments,2)])},d.prototype.send=d.prototype.mcall=d.prototype.invoke=function(t){return this.dispatch("post",[t,z(arguments,1)])},s.fapply=function(t,n){return s(t).dispatch("apply",[void 0,n])},d.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},s.try=s.fcall=function(t){return s(t).dispatch("apply",[void 0,z(arguments,1)])},d.prototype.fcall=function(){return this.dispatch("apply",[void 0,z(arguments)])},s.fbind=function(t){var n=s(t),e=z(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(z(arguments))])}},d.prototype.fbind=function(){var t=this,n=z(arguments);return function(){return t.dispatch("apply",[this,n.concat(z(arguments))])}},s.keys=function(t){return s(t).dispatch("keys",[])},d.prototype.keys=function(){return this.dispatch("keys",[])},s.all=D,d.prototype.all=function(){return D(this)},s.any=A,d.prototype.any=function(){return A(this)},s.allResolved=function(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}(I,"allResolved","allSettled"),d.prototype.allResolved=function(){return I(this)},s.allSettled=U,d.prototype.allSettled=function(){return this.then(function(t){return D(W(t,function(t){function n(){return t.inspect()}return t=s(t),t.then(n,n)}))})},s.fail=s.catch=function(t,n){return s(t).then(void 0,n)},d.prototype.fail=d.prototype.catch=function(t){return this.then(void 0,t)},s.progress=F,d.prototype.progress=function(t){return this.then(void 0,void 0,t)},s.fin=s.finally=function(t,n){return s(t).finally(n)},d.prototype.fin=d.prototype.finally=function(t){if(!t||"function"!=typeof t.apply)throw new Error("Q can't apply finally callback");return t=s(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},s.done=function(t,n,e,r){return s(t).done(n,e,r)},d.prototype.done=function(t,n,e){var o=function(t){s.nextTick(function(){if(r(t,i),!s.onerror)throw t;s.onerror(t)})},i=t||n||e?this.then(t,n,e):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},s.timeout=function(t,n,e){return s(t).timeout(n,e)},d.prototype.timeout=function(t,n){var e=p(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+t+" ms"),n.code="ETIMEDOUT"),e.reject(n)},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},s.delay=function(t,n){return void 0===n&&(n=t,t=void 0),s(t).delay(n)},d.prototype.delay=function(t){return this.then(function(n){var e=p();return setTimeout(function(){e.resolve(n)},t),e.promise})},s.nfapply=function(t,n){return s(t).nfapply(n)},d.prototype.nfapply=function(t){var n=p(),e=z(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},s.nfcall=function(t){var n=z(arguments,1);return s(t).nfapply(n)},d.prototype.nfcall=function(){var t=z(arguments),n=p();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},s.nfbind=s.denodeify=function(t){if(void 0===t)throw new Error("Q can't wrap an undefined function");var n=z(arguments,1);return function(){var e=n.concat(z(arguments)),r=p();return e.push(r.makeNodeResolver()),s(t).fapply(e).fail(r.reject),r.promise}},d.prototype.nfbind=d.prototype.denodeify=function(){var t=z(arguments);return t.unshift(this),s.denodeify.apply(void 0,t)},s.nbind=function(t,n){var e=z(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(z(arguments)),i=p();return o.push(i.makeNodeResolver()),s(r).fapply(o).fail(i.reject),i.promise}},d.prototype.nbind=function(){var t=z(arguments,0);return t.unshift(this),s.nbind.apply(void 0,t)},s.nmapply=s.npost=function(t,n,e){return s(t).npost(n,e)},d.prototype.nmapply=d.prototype.npost=function(t,n){var e=z(n||[]),r=p();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},s.nsend=s.nmcall=s.ninvoke=function(t,n){var e=z(arguments,2),r=p();return e.push(r.makeNodeResolver()),s(t).dispatch("post",[n,e]).fail(r.reject),r.promise},d.prototype.nsend=d.prototype.nmcall=d.prototype.ninvoke=function(t){var n=z(arguments,1),e=p();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},s.nodeify=M,d.prototype.nodeify=function(t){if(!t)return this;this.then(function(n){s.nextTick(function(){t(null,n)})},function(n){s.nextTick(function(){t(n)})})},s.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ft=f();return s});

}).call(this,require('_process'))

},{"_process":47}],49:[function(require,module,exports){
"use strict";module.exports=require("react/lib/ReactDOM");

},{"react/lib/ReactDOM":84}],50:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount"),findDOMNode=require("./findDOMNode"),focusNode=require("fbjs/lib/focusNode"),Mixin={componentDidMount:function(){this.props.autoFocus&&focusNode(findDOMNode(this))}},AutoFocusUtils={Mixin:Mixin,focusDOMComponent:function(){focusNode(ReactMount.getNode(this._rootNodeID))}};module.exports=AutoFocusUtils;

},{"./ReactMount":112,"./findDOMNode":155,"fbjs/lib/focusNode":14}],51:[function(require,module,exports){
"use strict";function isPresto(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function isKeypressCommand(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function getCompositionEventType(e){switch(e){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(e,t){return e===topLevelTypes.topKeyDown&&t.keyCode===START_KEYCODE}function isFallbackCompositionEnd(e,t){switch(e){case topLevelTypes.topKeyUp:return-1!==END_KEYCODES.indexOf(t.keyCode);case topLevelTypes.topKeyDown:return t.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function extractCompositionEvent(e,t,o,n,p){var s,i;if(canUseCompositionEvent?s=getCompositionEventType(e):currentComposition?isFallbackCompositionEnd(e,n)&&(s=eventTypes.compositionEnd):isFallbackCompositionStart(e,n)&&(s=eventTypes.compositionStart),!s)return null;useFallbackCompositionData&&(currentComposition||s!==eventTypes.compositionStart?s===eventTypes.compositionEnd&&currentComposition&&(i=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(t));var r=SyntheticCompositionEvent.getPooled(s,o,n,p);if(i)r.data=i;else{var a=getDataFromCustomEvent(n);null!==a&&(r.data=a)}return EventPropagators.accumulateTwoPhaseDispatches(r),r}function getNativeBeforeInputChars(e,t){switch(e){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(t);case topLevelTypes.topKeyPress:return t.which!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var o=t.data;return o===SPACEBAR_CHAR&&hasSpaceKeypress?null:o;default:return null}}function getFallbackBeforeInputChars(e,t){if(currentComposition){if(e===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(e,t)){var o=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,o}return null}switch(e){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return t.which&&!isKeypressCommand(t)?String.fromCharCode(t.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:t.data;default:return null}}function extractBeforeInputEvent(e,t,o,n,p){var s;if(!(s=canUseTextInputEvent?getNativeBeforeInputChars(e,n):getFallbackBeforeInputChars(e,n)))return null;var i=SyntheticInputEvent.getPooled(eventTypes.beforeInput,o,n,p);return i.data=s,EventPropagators.accumulateTwoPhaseDispatches(i),i}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),FallbackCompositionState=require("./FallbackCompositionState"),SyntheticCompositionEvent=require("./SyntheticCompositionEvent"),SyntheticInputEvent=require("./SyntheticInputEvent"),keyOf=require("fbjs/lib/keyOf"),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,o,n,p){return[extractCompositionEvent(e,t,o,n,p),extractBeforeInputEvent(e,t,o,n,p)]}};module.exports=BeforeInputEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./FallbackCompositionState":68,"./SyntheticCompositionEvent":137,"./SyntheticInputEvent":141,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/keyOf":24}],52:[function(require,module,exports){
"use strict";function prefixKey(o,r){return o+r.charAt(0).toUpperCase()+r.substring(1)}var isUnitlessNumber={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(o){prefixes.forEach(function(r){isUnitlessNumber[prefixKey(r,o)]=isUnitlessNumber[o]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty;

},{}],53:[function(require,module,exports){
"use strict";var CSSProperty=require("./CSSProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactPerf=require("./ReactPerf"),camelizeStyleName=require("fbjs/lib/camelizeStyleName"),dangerousStyleValue=require("./dangerousStyleValue"),hyphenateStyleName=require("fbjs/lib/hyphenateStyleName"),memoizeStringOnly=require("fbjs/lib/memoizeStringOnly"),warning=require("fbjs/lib/warning"),processStyleName=memoizeStringOnly(function(e){return hyphenateStyleName(e)}),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var badVendoredStyleNamePattern,badStyleValueWithSemicolonPattern,warnedStyleNames,warnedStyleValues,warnHyphenatedStyleName,warnBadVendoredStyleName,warnStyleValueWithSemicolon,warnValidStyle,CSSPropertyOperations={createMarkupForStyles:function(e){var r="";for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];null!=a&&(r+=processStyleName(t)+":",r+=dangerousStyleValue(t,a)+";")}return r||null},setValueForStyles:function(e,r){var t=e.style;for(var a in r)if(r.hasOwnProperty(a)){var n=dangerousStyleValue(a,r[a]);if("float"===a&&(a=styleFloatAccessor),n)t[a]=n;else{var l=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[a];if(l)for(var o in l)t[o]="";else t[a]=""}}}};ReactPerf.measureMethods(CSSPropertyOperations,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),module.exports=CSSPropertyOperations;

},{"./CSSProperty":52,"./ReactPerf":118,"./dangerousStyleValue":152,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/camelizeStyleName":8,"fbjs/lib/hyphenateStyleName":19,"fbjs/lib/memoizeStringOnly":26,"fbjs/lib/warning":29}],54:[function(require,module,exports){
"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant");assign(CallbackQueue.prototype,{enqueue:function(t,l){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(l)},notifyAll:function(){var t=this._callbacks,l=this._contexts;if(t){t.length!==l.length&&invariant(!1),this._callbacks=null,this._contexts=null;for(var s=0;s<t.length;s++)t[s].call(l[s]);t.length=0,l.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue;

},{"./Object.assign":71,"./PooledClass":72,"fbjs/lib/invariant":20}],55:[function(require,module,exports){
"use strict";function shouldUseChangeEvent(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function manualDispatchChangeEvent(e){var t=SyntheticEvent.getPooled(eventTypes.change,activeElementID,e,getEventTarget(e));EventPropagators.accumulateTwoPhaseDispatches(t),ReactUpdates.batchedUpdates(runEventInBatch,t)}function runEventInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(e,t){activeElement=e,activeElementID=t,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementID=null)}function getTargetIDForChangeEvent(e,t,n){if(e===topLevelTypes.topChange)return n}function handleEventsForChangeEventIE8(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(t,n)):e===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(e,t){activeElement=e,activeElementID=t,activeElementValue=e.value,activeElementValueProp=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent("onpropertychange",handlePropertyChange),activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==activeElementValue&&(activeElementValue=t,manualDispatchChangeEvent(e))}}function getTargetIDForInputEvent(e,t,n){if(e===topLevelTypes.topInput)return n}function handleEventsForInputEventIE(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(t,n)):e===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetIDForInputEventIE(e,t,n){if((e===topLevelTypes.topSelectionChange||e===topLevelTypes.topKeyUp||e===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementID}function shouldUseClickEvent(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function getTargetIDForClickEvent(e,t,n){if(e===topLevelTypes.topClick)return n}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactUpdates=require("./ReactUpdates"),SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),isEventSupported=require("./isEventSupported"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(e){activeElementValue=""+e,activeElementValueProp.set.call(this,e)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,a,o){var l,u;if(shouldUseChangeEvent(t)?doesChangeEventBubble?l=getTargetIDForChangeEvent:u=handleEventsForChangeEventIE8:isTextInputElement(t)?isInputEventSupported?l=getTargetIDForInputEvent:(l=getTargetIDForInputEventIE,u=handleEventsForInputEventIE):shouldUseClickEvent(t)&&(l=getTargetIDForClickEvent),l){var v=l(e,t,n);if(v){var p=SyntheticEvent.getPooled(eventTypes.change,v,a,o);return p.type="change",EventPropagators.accumulateTwoPhaseDispatches(p),p}}u&&u(e,t,n)}};module.exports=ChangeEventPlugin;

},{"./EventConstants":63,"./EventPluginHub":64,"./EventPropagators":67,"./ReactUpdates":130,"./SyntheticEvent":139,"./getEventTarget":161,"./isEventSupported":166,"./isTextInputElement":167,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/keyOf":24}],56:[function(require,module,exports){
"use strict";var nextReactRootIndex=0,ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex;

},{}],57:[function(require,module,exports){
"use strict";function insertChildAt(e,t,n){var r=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,r)}var Danger=require("./Danger"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactPerf=require("./ReactPerf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),invariant=require("fbjs/lib/invariant"),DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(e,t){for(var n,r=null,a=null,i=0;i<e.length;i++)if(n=e[i],n.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||n.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var d=n.fromIndex,l=n.parentNode.childNodes[d],p=n.parentID;l||invariant(!1),r=r||{},r[p]=r[p]||[],r[p][d]=l,a=a||[],a.push(l)}var s;if(s=t.length&&"string"==typeof t[0]?Danger.dangerouslyRenderMarkup(t):t,a)for(var o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);for(var u=0;u<e.length;u++)switch(n=e[u],n.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(n.parentNode,s[n.markupIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(n.parentNode,r[n.parentID][n.fromIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:}}};ReactPerf.measureMethods(DOMChildrenOperations,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),module.exports=DOMChildrenOperations;

},{"./Danger":60,"./ReactMultiChildUpdateTypes":114,"./ReactPerf":118,"./setInnerHTML":171,"./setTextContent":172,"fbjs/lib/invariant":20}],58:[function(require,module,exports){
"use strict";function checkMask(t,e){return(t&e)===e}var invariant=require("fbjs/lib/invariant"),DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=DOMPropertyInjection,r=t.Properties||{},a=t.DOMAttributeNamespaces||{},o=t.DOMAttributeNames||{},i=t.DOMPropertyNames||{},s=t.DOMMutationMethods||{};t.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var u in r){DOMProperty.properties.hasOwnProperty(u)&&invariant(!1);var n=u.toLowerCase(),c=r[u],E={attributeName:n,attributeNamespace:null,propertyName:u,mutationMethod:null,mustUseAttribute:checkMask(c,e.MUST_USE_ATTRIBUTE),mustUseProperty:checkMask(c,e.MUST_USE_PROPERTY),hasSideEffects:checkMask(c,e.HAS_SIDE_EFFECTS),hasBooleanValue:checkMask(c,e.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(c,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(c,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(c,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(E.mustUseAttribute&&E.mustUseProperty&&invariant(!1),!E.mustUseProperty&&E.hasSideEffects&&invariant(!1),E.hasBooleanValue+E.hasNumericValue+E.hasOverloadedBooleanValue<=1||invariant(!1),o.hasOwnProperty(u)){var A=o[u];E.attributeName=A}a.hasOwnProperty(u)&&(E.attributeNamespace=a[u]),i.hasOwnProperty(u)&&(E.propertyName=i[u]),s.hasOwnProperty(u)&&(E.mutationMethod=s[u]),DOMProperty.properties[u]=E}}},defaultValueCache={},DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<DOMProperty._isCustomAttributeFunctions.length;e++){if((0,DOMProperty._isCustomAttributeFunctions[e])(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var r,a=defaultValueCache[t];return a||(defaultValueCache[t]=a={}),e in a||(r=document.createElement(t),a[e]=r[e]),a[e]},injection:DOMPropertyInjection};module.exports=DOMProperty;

},{"fbjs/lib/invariant":20}],59:[function(require,module,exports){
"use strict";function isAttributeNameSafe(e){return!!validatedAttributeNameCache.hasOwnProperty(e)||!illegalAttributeNameCache.hasOwnProperty(e)&&(VALID_ATTRIBUTE_NAME_REGEX.test(e)?(validatedAttributeNameCache[e]=!0,!0):(illegalAttributeNameCache[e]=!0,!1))}function shouldIgnoreValue(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&!1===t}var DOMProperty=require("./DOMProperty"),ReactPerf=require("./ReactPerf"),quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser"),warning=require("fbjs/lib/warning"),VALID_ATTRIBUTE_NAME_REGEX=/^[a-zA-Z_][\w\.\-]*$/,illegalAttributeNameCache={},validatedAttributeNameCache={},reactProps,warnedProperties,warnUnknownProperty,DOMPropertyOperations={createMarkupForID:function(e){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(e)},setAttributeForID:function(e,t){e.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(e)?DOMProperty.properties[e]:null;if(r){if(shouldIgnoreValue(r,t))return"";var o=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===t?o+'=""':o+"="+quoteAttributeValueForBrowser(t)}return DOMProperty.isCustomAttribute(e)?null==t?"":e+"="+quoteAttributeValueForBrowser(t):null},createMarkupForCustomAttribute:function(e,t){return isAttributeNameSafe(e)&&null!=t?e+"="+quoteAttributeValueForBrowser(t):""},setValueForProperty:function(e,t,r){var o=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(o){var a=o.mutationMethod;if(a)a(e,r);else if(shouldIgnoreValue(o,r))this.deleteValueForProperty(e,t);else if(o.mustUseAttribute){var u=o.attributeName,i=o.attributeNamespace;i?e.setAttributeNS(i,u,""+r):o.hasBooleanValue||o.hasOverloadedBooleanValue&&!0===r?e.setAttribute(u,""):e.setAttribute(u,""+r)}else{var s=o.propertyName;o.hasSideEffects&&""+e[s]==""+r||(e[s]=r)}}else DOMProperty.isCustomAttribute(t)&&DOMPropertyOperations.setValueForAttribute(e,t,r)},setValueForAttribute:function(e,t,r){isAttributeNameSafe(t)&&(null==r?e.removeAttribute(t):e.setAttribute(t,""+r))},deleteValueForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseAttribute)e.removeAttribute(r.attributeName);else{var a=r.propertyName,u=DOMProperty.getDefaultValueForProperty(e.nodeName,a);r.hasSideEffects&&""+e[a]===u||(e[a]=u)}}else DOMProperty.isCustomAttribute(t)&&e.removeAttribute(t)}};ReactPerf.measureMethods(DOMPropertyOperations,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),module.exports=DOMPropertyOperations;

},{"./DOMProperty":58,"./ReactPerf":118,"./quoteAttributeValueForBrowser":169,"fbjs/lib/warning":29}],60:[function(require,module,exports){
"use strict";function getNodeName(e){return e.substring(1,e.indexOf(" "))}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup"),emptyFunction=require("fbjs/lib/emptyFunction"),getMarkupWrap=require("fbjs/lib/getMarkupWrap"),invariant=require("fbjs/lib/invariant"),OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/,RESULT_INDEX_ATTR="data-danger-index",Danger={dangerouslyRenderMarkup:function(e){ExecutionEnvironment.canUseDOM||invariant(!1);for(var r,n={},t=0;t<e.length;t++)e[t]||invariant(!1),r=getNodeName(e[t]),r=getMarkupWrap(r)?r:"*",n[r]=n[r]||[],n[r][t]=e[t];var a=[],i=0;for(r in n)if(n.hasOwnProperty(r)){var o,u=n[r];for(o in u)if(u.hasOwnProperty(o)){var p=u[o];u[o]=p.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+o+'" ')}for(var s=createNodesFromMarkup(u.join(""),emptyFunction),E=0;E<s.length;++E){var v=s[E];v.hasAttribute&&v.hasAttribute(RESULT_INDEX_ATTR)&&(o=+v.getAttribute(RESULT_INDEX_ATTR),v.removeAttribute(RESULT_INDEX_ATTR),a.hasOwnProperty(o)&&invariant(!1),a[o]=v,i+=1)}}return i!==a.length&&invariant(!1),a.length!==e.length&&invariant(!1),a},dangerouslyReplaceNodeWithMarkup:function(e,r){ExecutionEnvironment.canUseDOM||invariant(!1),r||invariant(!1),"html"===e.tagName.toLowerCase()&&invariant(!1);var n;n="string"==typeof r?createNodesFromMarkup(r,emptyFunction)[0]:r,e.parentNode.replaceChild(n,e)}};module.exports=Danger;

},{"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/createNodesFromMarkup":11,"fbjs/lib/emptyFunction":12,"fbjs/lib/getMarkupWrap":16,"fbjs/lib/invariant":20}],61:[function(require,module,exports){
"use strict";var keyOf=require("fbjs/lib/keyOf"),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null})];module.exports=DefaultEventPluginOrder;

},{"fbjs/lib/keyOf":24}],62:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),ReactMount=require("./ReactMount"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,getFirstReactDOM=ReactMount.getFirstReactDOM,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},extractedEvents=[null,null],EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,r){if(e===topLevelTypes.topMouseOver&&(o.relatedTarget||o.fromElement))return null;if(e!==topLevelTypes.topMouseOut&&e!==topLevelTypes.topMouseOver)return null;var s;if(t.window===t)s=t;else{var a=t.ownerDocument;s=a?a.defaultView||a.parentWindow:window}var u,v,p="",l="";if(e===topLevelTypes.topMouseOut?(u=t,p=n,v=getFirstReactDOM(o.relatedTarget||o.toElement),v?l=ReactMount.getID(v):v=s,v=v||s):(u=s,v=t,l=n),u===v)return null;var i=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,p,o,r);i.type="mouseleave",i.target=u,i.relatedTarget=v;var y=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,l,o,r);return y.type="mouseenter",y.target=v,y.relatedTarget=u,EventPropagators.accumulateEnterLeaveDispatches(i,y,p,l),extractedEvents[0]=i,extractedEvents[1]=y,extractedEvents}};module.exports=EnterLeaveEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./ReactMount":112,"./SyntheticMouseEvent":143,"fbjs/lib/keyOf":24}],63:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants;

},{"fbjs/lib/keyMirror":23}],64:[function(require,module,exports){
"use strict";function validateInstanceHandle(){InstanceHandle&&InstanceHandle.traverseTwoPhase&&InstanceHandle.traverseEnterLeave}var EventPluginRegistry=require("./EventPluginRegistry"),EventPluginUtils=require("./EventPluginUtils"),ReactErrorUtils=require("./ReactErrorUtils"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),listenerBank={},eventQueue=null,executeDispatchesAndRelease=function(e,n){e&&(EventPluginUtils.executeDispatchesInOrder(e,n),e.isPersistent()||e.constructor.release(e))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},InstanceHandle=null,EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(e){InstanceHandle=e},getInstanceHandle:function(){return InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(e,n,t){"function"!=typeof t&&invariant(!1),(listenerBank[n]||(listenerBank[n]={}))[e]=t;var i=EventPluginRegistry.registrationNameModules[n];i&&i.didPutListener&&i.didPutListener(e,n,t)},getListener:function(e,n){var t=listenerBank[n];return t&&t[e]},deleteListener:function(e,n){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n);var i=listenerBank[n];i&&delete i[e]},deleteAllListeners:function(e){for(var n in listenerBank)if(listenerBank[n][e]){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n),delete listenerBank[n][e]}},extractEvents:function(e,n,t,i,r){for(var a,u=EventPluginRegistry.plugins,s=0;s<u.length;s++){var l=u[s];if(l){var c=l.extractEvents(e,n,t,i,r);c&&(a=accumulateInto(a,c))}}return a},enqueueEvents:function(e){e&&(eventQueue=accumulateInto(eventQueue,e))},processEventQueue:function(e){var n=eventQueue;eventQueue=null,e?forEachAccumulated(n,executeDispatchesAndReleaseSimulated):forEachAccumulated(n,executeDispatchesAndReleaseTopLevel),eventQueue&&invariant(!1),ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub;

},{"./EventPluginRegistry":65,"./EventPluginUtils":66,"./ReactErrorUtils":103,"./accumulateInto":149,"./forEachAccumulated":157,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],65:[function(require,module,exports){
"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var e in namesToPlugins){var n=namesToPlugins[e],i=EventPluginOrder.indexOf(e);if(i>-1||invariant(!1),!EventPluginRegistry.plugins[i]){n.extractEvents||invariant(!1),EventPluginRegistry.plugins[i]=n;var r=n.eventTypes;for(var t in r)publishEventForPlugin(r[t],n,t)||invariant(!1)}}}function publishEventForPlugin(e,n,i){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(i)&&invariant(!1),EventPluginRegistry.eventNameDispatchConfigs[i]=e;var r=e.phasedRegistrationNames;if(r){for(var t in r)if(r.hasOwnProperty(t)){var a=r[t];publishRegistrationName(a,n,i)}return!0}return!!e.registrationName&&(publishRegistrationName(e.registrationName,n,i),!0)}function publishRegistrationName(e,n,i){EventPluginRegistry.registrationNameModules[e]&&invariant(!1),EventPluginRegistry.registrationNameModules[e]=n,EventPluginRegistry.registrationNameDependencies[e]=n.eventTypes[i].dependencies}var invariant=require("fbjs/lib/invariant"),EventPluginOrder=null,namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){EventPluginOrder&&invariant(!1),EventPluginOrder=Array.prototype.slice.call(e),recomputePluginOrdering()},injectEventPluginsByName:function(e){var n=!1;for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];namesToPlugins.hasOwnProperty(i)&&namesToPlugins[i]===r||(namesToPlugins[i]&&invariant(!1),namesToPlugins[i]=r,n=!0)}n&&recomputePluginOrdering()},getPluginModuleForEvent:function(e){var n=e.dispatchConfig;if(n.registrationName)return EventPluginRegistry.registrationNameModules[n.registrationName]||null;for(var i in n.phasedRegistrationNames)if(n.phasedRegistrationNames.hasOwnProperty(i)){var r=EventPluginRegistry.registrationNameModules[n.phasedRegistrationNames[i]];if(r)return r}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var e in namesToPlugins)namesToPlugins.hasOwnProperty(e)&&delete namesToPlugins[e];EventPluginRegistry.plugins.length=0;var n=EventPluginRegistry.eventNameDispatchConfigs;for(var i in n)n.hasOwnProperty(i)&&delete n[i];var r=EventPluginRegistry.registrationNameModules;for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};module.exports=EventPluginRegistry;

},{"fbjs/lib/invariant":20}],66:[function(require,module,exports){
"use strict";function isEndish(e){return e===topLevelTypes.topMouseUp||e===topLevelTypes.topTouchEnd||e===topLevelTypes.topTouchCancel}function isMoveish(e){return e===topLevelTypes.topMouseMove||e===topLevelTypes.topTouchMove}function isStartish(e){return e===topLevelTypes.topMouseDown||e===topLevelTypes.topTouchStart}function executeDispatch(e,t,i,n){var s=e.type||"unknown-event";e.currentTarget=injection.Mount.getNode(n),t?ReactErrorUtils.invokeGuardedCallbackWithCatch(s,i,e,n):ReactErrorUtils.invokeGuardedCallback(s,i,e,n),e.currentTarget=null}function executeDispatchesInOrder(e,t){var i=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(i))for(var s=0;s<i.length&&!e.isPropagationStopped();s++)executeDispatch(e,t,i[s],n[s]);else i&&executeDispatch(e,t,i,n);e._dispatchListeners=null,e._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(e){var t=e._dispatchListeners,i=e._dispatchIDs;if(Array.isArray(t)){for(var n=0;n<t.length&&!e.isPropagationStopped();n++)if(t[n](e,i[n]))return i[n]}else if(t&&t(e,i))return i;return null}function executeDispatchesInOrderStopAtTrue(e){var t=executeDispatchesInOrderStopAtTrueImpl(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function executeDirectDispatch(e){var t=e._dispatchListeners,i=e._dispatchIDs;Array.isArray(t)&&invariant(!1);var n=t?t(e,i):null;return e._dispatchListeners=null,e._dispatchIDs=null,n}function hasDispatches(e){return!!e._dispatchListeners}var EventConstants=require("./EventConstants"),ReactErrorUtils=require("./ReactErrorUtils"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),injection={Mount:null,injectMount:function(e){injection.Mount=e}},topLevelTypes=EventConstants.topLevelTypes,validateEventDispatches,EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getNode:function(e){return injection.Mount.getNode(e)},getID:function(e){return injection.Mount.getID(e)},injection:injection};module.exports=EventPluginUtils;

},{"./EventConstants":63,"./ReactErrorUtils":103,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],67:[function(require,module,exports){
"use strict";function listenerAtPhase(e,a,t){var c=a.dispatchConfig.phasedRegistrationNames[t];return getListener(e,c)}function accumulateDirectionalDispatches(e,a,t){var c=a?PropagationPhases.bubbled:PropagationPhases.captured,s=listenerAtPhase(e,t,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}function accumulateTwoPhaseDispatchesSingle(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateTwoPhaseDispatchesSingleSkipTarget(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateDispatches(e,a,t){if(t&&t.dispatchConfig.registrationName){var c=t.dispatchConfig.registrationName,s=getListener(e,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}}function accumulateDirectDispatchesSingle(e){e&&e.dispatchConfig.registrationName&&accumulateDispatches(e.dispatchMarker,null,e)}function accumulateTwoPhaseDispatches(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(e,a,t,c){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(t,c,accumulateDispatches,e,a)}function accumulateDirectDispatches(e){forEachAccumulated(e,accumulateDirectDispatchesSingle)}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),warning=require("fbjs/lib/warning"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),PropagationPhases=EventConstants.PropagationPhases,getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators;

},{"./EventConstants":63,"./EventPluginHub":64,"./accumulateInto":149,"./forEachAccumulated":157,"fbjs/lib/warning":29}],68:[function(require,module,exports){
"use strict";function FallbackCompositionState(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),getTextContentAccessor=require("./getTextContentAccessor");assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,o=this._startText,s=o.length,a=this.getText(),l=a.length;for(t=0;t<s&&o[t]===a[t];t++);var i=s-t;for(e=1;e<=i&&o[s-e]===a[l-e];e++);var r=e>1?1-e:void 0;return this._fallbackText=a.slice(t,r),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState;

},{"./Object.assign":71,"./PooledClass":72,"./getTextContentAccessor":164}],69:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE,hasSVG;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,capture:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,challenge:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,inputMode:MUST_USE_ATTRIBUTE,integrity:null,is:MUST_USE_ATTRIBUTE,keyParams:MUST_USE_ATTRIBUTE,keyType:MUST_USE_ATTRIBUTE,kind:null,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,minLength:MUST_USE_ATTRIBUTE,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,nonce:MUST_USE_ATTRIBUTE,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcLang:null,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,wrap:null,about:MUST_USE_ATTRIBUTE,datatype:MUST_USE_ATTRIBUTE,inlist:MUST_USE_ATTRIBUTE,prefix:MUST_USE_ATTRIBUTE,property:MUST_USE_ATTRIBUTE,resource:MUST_USE_ATTRIBUTE,typeof:MUST_USE_ATTRIBUTE,vocab:MUST_USE_ATTRIBUTE,autoCapitalize:MUST_USE_ATTRIBUTE,autoCorrect:MUST_USE_ATTRIBUTE,autoSave:null,color:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,results:null,security:MUST_USE_ATTRIBUTE,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig;

},{"./DOMProperty":58,"fbjs/lib/ExecutionEnvironment":6}],70:[function(require,module,exports){
"use strict";function _assertSingleLink(e){null!=e.checkedLink&&null!=e.valueLink&&invariant(!1)}function _assertValueLink(e){_assertSingleLink(e),(null!=e.value||null!=e.onChange)&&invariant(!1)}function _assertCheckedLink(e){_assertSingleLink(e),(null!=e.checked||null!=e.onChange)&&invariant(!1)}function getDeclarationErrorAddendum(e){if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}var ReactPropTypes=require("./ReactPropTypes"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),hasReadOnlyValue={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},propTypes={value:function(e,n,a){return!e[n]||hasReadOnlyValue[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,n,a){return!e[n]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(e,n,a){for(var r in propTypes){if(propTypes.hasOwnProperty(r))var i=propTypes[r](n,r,e,ReactPropTypeLocations.prop,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum(a)}}},getValue:function(e){return e.valueLink?(_assertValueLink(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(_assertCheckedLink(e),e.checkedLink.value):e.checked},executeOnChange:function(e,n){return e.valueLink?(_assertValueLink(e),e.valueLink.requestChange(n.target.value)):e.checkedLink?(_assertCheckedLink(e),e.checkedLink.requestChange(n.target.checked)):e.onChange?e.onChange.call(void 0,n):void 0}};module.exports=LinkedValueUtils;

},{"./ReactPropTypeLocations":120,"./ReactPropTypes":121,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],71:[function(require,module,exports){
"use strict";function assign(r,e){if(null==r)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(r),t=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a){var l=Object(a);for(var s in l)t.call(l,s)&&(n[s]=l[s])}}return n}module.exports=assign;

},{}],72:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),oneArgumentPooler=function(o){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,o),n}return new e(o)},twoArgumentPooler=function(o,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,o,e),r}return new n(o,e)},threeArgumentPooler=function(o,e,n){var r=this;if(r.instancePool.length){var t=r.instancePool.pop();return r.call(t,o,e,n),t}return new r(o,e,n)},fourArgumentPooler=function(o,e,n,r){var t=this;if(t.instancePool.length){var l=t.instancePool.pop();return t.call(l,o,e,n,r),l}return new t(o,e,n,r)},fiveArgumentPooler=function(o,e,n,r,t){var l=this;if(l.instancePool.length){var a=l.instancePool.pop();return l.call(a,o,e,n,r,t),a}return new l(o,e,n,r,t)},standardReleaser=function(o){var e=this;o instanceof e||invariant(!1),o.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(o)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(o,e){var n=o;return n.instancePool=[],n.getPooled=e||DEFAULT_POOLER,n.poolSize||(n.poolSize=DEFAULT_POOL_SIZE),n.release=standardReleaser,n},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass;

},{"fbjs/lib/invariant":20}],73:[function(require,module,exports){
"use strict";var ReactDOM=require("./ReactDOM"),ReactDOMServer=require("./ReactDOMServer"),ReactIsomorphic=require("./ReactIsomorphic"),assign=require("./Object.assign"),deprecated=require("./deprecated"),React={};assign(React,ReactIsomorphic),assign(React,{findDOMNode:deprecated("findDOMNode","ReactDOM","react-dom",ReactDOM,ReactDOM.findDOMNode),render:deprecated("render","ReactDOM","react-dom",ReactDOM,ReactDOM.render),unmountComponentAtNode:deprecated("unmountComponentAtNode","ReactDOM","react-dom",ReactDOM,ReactDOM.unmountComponentAtNode),renderToString:deprecated("renderToString","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToString),renderToStaticMarkup:deprecated("renderToStaticMarkup","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToStaticMarkup)}),React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOM,React.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOMServer,module.exports=React;

},{"./Object.assign":71,"./ReactDOM":84,"./ReactDOMServer":94,"./ReactIsomorphic":110,"./deprecated":153}],74:[function(require,module,exports){
"use strict";var ReactInstanceMap=require("./ReactInstanceMap"),findDOMNode=require("./findDOMNode"),warning=require("fbjs/lib/warning"),didWarnKey="_getDOMNodeDidWarn",ReactBrowserComponentMixin={getDOMNode:function(){return this.constructor[didWarnKey]=!0,findDOMNode(this)}};module.exports=ReactBrowserComponentMixin;

},{"./ReactInstanceMap":109,"./findDOMNode":155,"fbjs/lib/warning":29}],75:[function(require,module,exports){
"use strict";function getListeningForDocument(e){return Object.prototype.hasOwnProperty.call(e,topListenersIDKey)||(e[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[e[topListenersIDKey]]={}),alreadyListeningTo[e[topListenersIDKey]]}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPluginRegistry=require("./EventPluginRegistry"),ReactEventEmitterMixin=require("./ReactEventEmitterMixin"),ReactPerf=require("./ReactPerf"),ViewportMetrics=require("./ViewportMetrics"),assign=require("./Object.assign"),isEventSupported=require("./isEventSupported"),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=e}},setEnabled:function(e){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var r=t,n=getListeningForDocument(r),o=EventPluginRegistry.registrationNameDependencies[e],i=EventConstants.topLevelTypes,a=0;a<o.length;a++){var s=o[a];n.hasOwnProperty(s)&&n[s]||(s===i.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"wheel",r):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"mousewheel",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"DOMMouseScroll",r):s===i.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topScroll,"scroll",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):s===i.topFocus||s===i.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topFocus,"focus",r),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topBlur,"blur",r)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topFocus,"focusin",r),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topBlur,"focusout",r)),n[i.topBlur]=!0,n[i.topFocus]=!0):topEventMapping.hasOwnProperty(s)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(s,topEventMapping[s],r),n[s]=!0)}},trapBubbledEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(e,t,r)},trapCapturedEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(e,t,r)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var e=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(e),isMonitoringScrollValue=!0}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});ReactPerf.measureMethods(ReactBrowserEventEmitter,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),module.exports=ReactBrowserEventEmitter;

},{"./EventConstants":63,"./EventPluginHub":64,"./EventPluginRegistry":65,"./Object.assign":71,"./ReactEventEmitterMixin":104,"./ReactPerf":118,"./ViewportMetrics":148,"./isEventSupported":166}],76:[function(require,module,exports){
"use strict";function instantiateChild(e,n,t){var r=void 0===e[t];null!=n&&r&&(e[t]=instantiateReactComponent(n,null))}var ReactReconciler=require("./ReactReconciler"),instantiateReactComponent=require("./instantiateReactComponent"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning"),ReactChildReconciler={instantiateChildren:function(e,n,t){if(null==e)return null;var r={};return traverseAllChildren(e,instantiateChild,r),r},updateChildren:function(e,n,t,r){if(!n&&!e)return null;var i;for(i in n)if(n.hasOwnProperty(i)){var o=e&&e[i],a=o&&o._currentElement,l=n[i];if(null!=o&&shouldUpdateReactComponent(a,l))ReactReconciler.receiveComponent(o,l,t,r),n[i]=o;else{o&&ReactReconciler.unmountComponent(o,i);var c=instantiateReactComponent(l,null);n[i]=c}}for(i in e)!e.hasOwnProperty(i)||n&&n.hasOwnProperty(i)||ReactReconciler.unmountComponent(e[i]);return n},unmountChildren:function(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];ReactReconciler.unmountComponent(t)}}};module.exports=ReactChildReconciler;

},{"./ReactReconciler":123,"./instantiateReactComponent":165,"./shouldUpdateReactComponent":173,"./traverseAllChildren":174,"fbjs/lib/warning":29}],77:[function(require,module,exports){
"use strict";function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,"//")}function ForEachBookKeeping(e,n){this.func=e,this.context=n,this.count=0}function forEachSingleChild(e,n,t){var r=e.func,o=e.context;r.call(o,n,e.count++)}function forEachChildren(e,n,t){if(null==e)return e;var r=ForEachBookKeeping.getPooled(n,t);traverseAllChildren(e,forEachSingleChild,r),ForEachBookKeeping.release(r)}function MapBookKeeping(e,n,t,r){this.result=e,this.keyPrefix=n,this.func=t,this.context=r,this.count=0}function mapSingleChildIntoContext(e,n,t){var r=e.result,o=e.keyPrefix,l=e.func,i=e.context,u=l.call(i,n,e.count++);Array.isArray(u)?mapIntoWithKeyPrefixInternal(u,r,t,emptyFunction.thatReturnsArgument):null!=u&&(ReactElement.isValidElement(u)&&(u=ReactElement.cloneAndReplaceKey(u,o+(u!==n?escapeUserProvidedKey(u.key||"")+"/":"")+t)),r.push(u))}function mapIntoWithKeyPrefixInternal(e,n,t,r,o){var l="";null!=t&&(l=escapeUserProvidedKey(t)+"/");var i=MapBookKeeping.getPooled(n,l,r,o);traverseAllChildren(e,mapSingleChildIntoContext,i),MapBookKeeping.release(i)}function mapChildren(e,n,t){if(null==e)return e;var r=[];return mapIntoWithKeyPrefixInternal(e,r,null,n,t),r}function forEachSingleChildDummy(e,n,t){return null}function countChildren(e,n){return traverseAllChildren(e,forEachSingleChildDummy,null)}function toArray(e){var n=[];return mapIntoWithKeyPrefixInternal(e,n,null,emptyFunction.thatReturnsArgument),n}var PooledClass=require("./PooledClass"),ReactElement=require("./ReactElement"),emptyFunction=require("fbjs/lib/emptyFunction"),traverseAllChildren=require("./traverseAllChildren"),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/(?!\/)/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren;

},{"./PooledClass":72,"./ReactElement":99,"./traverseAllChildren":174,"fbjs/lib/emptyFunction":12}],78:[function(require,module,exports){
"use strict";function warnSetProps(){warnedSetProps||(warnedSetProps=!0)}function validateTypeDef(e,t,n){for(var i in t)t.hasOwnProperty(i)}function validateMethodOverride(e,t){var n=ReactClassInterface.hasOwnProperty(t)?ReactClassInterface[t]:null;ReactClassMixin.hasOwnProperty(t)&&n!==SpecPolicy.OVERRIDE_BASE&&invariant(!1),e.hasOwnProperty(t)&&n!==SpecPolicy.DEFINE_MANY&&n!==SpecPolicy.DEFINE_MANY_MERGED&&invariant(!1)}function mixSpecIntoComponent(e,t){if(t){"function"==typeof t&&invariant(!1),ReactElement.isValidElement(t)&&invariant(!1);var n=e.prototype;t.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==MIXINS_KEY){var o=t[i];if(validateMethodOverride(n,i),RESERVED_SPEC_KEYS.hasOwnProperty(i))RESERVED_SPEC_KEYS[i](e,o);else{var a=ReactClassInterface.hasOwnProperty(i),r=n.hasOwnProperty(i),c="function"==typeof o,p=c&&!a&&!r&&!1!==t.autobind;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=o,n[i]=o;else if(r){var s=ReactClassInterface[i];(!a||s!==SpecPolicy.DEFINE_MANY_MERGED&&s!==SpecPolicy.DEFINE_MANY)&&invariant(!1),s===SpecPolicy.DEFINE_MANY_MERGED?n[i]=createMergedResultFunction(n[i],o):s===SpecPolicy.DEFINE_MANY&&(n[i]=createChainedFunction(n[i],o))}else n[i]=o}}}}function mixStaticSpecIntoComponent(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var o=n in RESERVED_SPEC_KEYS;o&&invariant(!1);var a=n in e;a&&invariant(!1),e[n]=i}}}function mergeIntoWithNoDuplicateKeys(e,t){e&&t&&"object"==typeof e&&"object"==typeof t||invariant(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]&&invariant(!1),e[n]=t[n]);return e}function createMergedResultFunction(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return mergeIntoWithNoDuplicateKeys(o,n),mergeIntoWithNoDuplicateKeys(o,i),o}}function createChainedFunction(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function bindAutoBindMethod(e,t){var n=t.bind(e);return n}function bindAutoBindMethods(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=bindAutoBindMethod(e,n)}}var ReactComponent=require("./ReactComponent"),ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),keyMirror=require("fbjs/lib/keyMirror"),keyOf=require("fbjs/lib/keyOf"),warning=require("fbjs/lib/warning"),MIXINS_KEY=keyOf({mixins:null}),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],warnedSetProps=!1,ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)mixSpecIntoComponent(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=assign({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=assign({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=createMergedResultFunction(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=assign({},e.propTypes,t)},statics:function(e,t){mixStaticSpecIntoComponent(e,t)},autobind:function(){}},ReactClassMixin={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,t){this.updater.enqueueSetProps(this,e),t&&this.updater.enqueueCallback(this,t)},replaceProps:function(e,t){this.updater.enqueueReplaceProps(this,e),t&&this.updater.enqueueCallback(this,t)}},ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindMap&&bindAutoBindMethods(this),this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue,this.state=null;var i=this.getInitialState?this.getInitialState():null;("object"!=typeof i||Array.isArray(i))&&invariant(!1),this.state=i};t.prototype=new ReactClassComponent,t.prototype.constructor=t,injectedMixins.forEach(mixSpecIntoComponent.bind(null,t)),mixSpecIntoComponent(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render||invariant(!1);for(var n in ReactClassInterface)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){injectedMixins.push(e)}}};module.exports=ReactClass;

},{"./Object.assign":71,"./ReactComponent":79,"./ReactElement":99,"./ReactNoopUpdateQueue":116,"./ReactPropTypeLocationNames":119,"./ReactPropTypeLocations":120,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/keyMirror":23,"fbjs/lib/keyOf":24,"fbjs/lib/warning":29}],79:[function(require,module,exports){
"use strict";function ReactComponent(e,t,n){this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue}var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),canDefineProperty=require("./canDefineProperty"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&invariant(!1),this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t)},ReactComponent.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)};var deprecatedAPIs,defineDeprecationWarning,fnName;module.exports=ReactComponent;

},{"./ReactNoopUpdateQueue":116,"./canDefineProperty":151,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],80:[function(require,module,exports){
"use strict";var ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactMount=require("./ReactMount"),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){ReactMount.purgeID(e)}};module.exports=ReactComponentBrowserEnvironment;

},{"./ReactDOMIDOperations":89,"./ReactMount":112}],81:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),injected=!1,ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(n){injected&&invariant(!1),ReactComponentEnvironment.unmountIDFromEnvironment=n.unmountIDFromEnvironment,ReactComponentEnvironment.replaceNodeWithMarkupByID=n.replaceNodeWithMarkupByID,ReactComponentEnvironment.processChildrenUpdates=n.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment;

},{"fbjs/lib/invariant":20}],82:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function StatelessComponent(e){}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactPerf=require("./ReactPerf"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),warning=require("fbjs/lib/warning");StatelessComponent.prototype.render=function(){return(0,ReactInstanceMap.get(this)._currentElement.type)(this.props,this.context,this.updater)};var nextMountID=1,ReactCompositeComponentMixin={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=nextMountID++,this._rootNodeID=e;var o,i,r=this._processProps(this._currentElement.props),a=this._processContext(n),s=this._currentElement.type,c="prototype"in s;c&&(o=new s(r,a,ReactUpdateQueue)),c&&null!==o&&!1!==o&&!ReactElement.isValidElement(o)||(i=o,o=new StatelessComponent(s)),o.props=r,o.context=a,o.refs=emptyObject,o.updater=ReactUpdateQueue,this._instance=o,ReactInstanceMap.set(o,this);var p=o.state;void 0===p&&(o.state=p=null),("object"!=typeof p||Array.isArray(p))&&invariant(!1),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===i&&(i=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(i);var u=ReactReconciler.mountComponent(this._renderedComponent,e,t,this._processChildContext(n));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),u},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),ReactReconciler.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,ReactInstanceMap.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,o=n.contextTypes;if(!o)return emptyObject;t={};for(var i in o)t[i]=e[i];return t},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){"object"!=typeof t.childContextTypes&&invariant(!1);for(var i in o)i in t.childContextTypes||invariant(!1);return assign({},e,o)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var o=this.getName();for(var i in e)if(e.hasOwnProperty(i)){var r;try{"function"!=typeof e[i]&&invariant(!1),r=e[i](t,i,o,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){r=e}if(r instanceof Error){getDeclarationErrorAddendum(this);ReactPropTypeLocations.prop}}},receiveComponent:function(e,t,n){var o=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,o,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,t,n,o,i){var r,a=this._instance,s=this._context===i?a.context:this._processContext(i);t===n?r=n.props:(r=this._processProps(n.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(r,s));var c=this._processPendingState(r,s),p=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(r,c,s);p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,r,c,s,e,i)):(this._currentElement=n,this._context=i,a.props=r,a.state=c,a.context=s)},_processPendingState:function(e,t){var n=this._instance,o=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!o)return n.state;if(i&&1===o.length)return o[0];for(var r=assign({},i?o[0]:n.state),a=i?1:0;a<o.length;a++){var s=o[a];assign(r,"function"==typeof s?s.call(n,r,e,t):s)}return r},_performComponentUpdate:function(e,t,n,o,i,r){var a,s,c,p=this._instance,u=Boolean(p.componentDidUpdate);u&&(a=p.props,s=p.state,c=p.context),p.componentWillUpdate&&p.componentWillUpdate(t,n,o),this._currentElement=e,this._context=r,p.props=t,p.state=n,p.context=o,this._updateRenderedComponent(i,r),u&&i.getReactMountReady().enqueue(p.componentDidUpdate.bind(p,a,s,c),p)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,o=n._currentElement,i=this._renderValidatedComponent();if(shouldUpdateReactComponent(o,i))ReactReconciler.receiveComponent(n,i,e,this._processChildContext(t));else{var r=this._rootNodeID,a=n._rootNodeID;ReactReconciler.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i);var s=ReactReconciler.mountComponent(this._renderedComponent,r,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){ReactComponentEnvironment.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;ReactCurrentOwner.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}return null===e||!1===e||ReactElement.isValidElement(e)||invariant(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n&&invariant(!1);var o=t.getPublicInstance();(n.refs===emptyObject?n.refs={}:n.refs)[e]=o},detachRef:function(e){delete this.getPublicInstance().refs[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof StatelessComponent?null:e},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent;

},{"./Object.assign":71,"./ReactComponentEnvironment":81,"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactInstanceMap":109,"./ReactPerf":118,"./ReactPropTypeLocationNames":119,"./ReactPropTypeLocations":120,"./ReactReconciler":123,"./ReactUpdateQueue":129,"./shouldUpdateReactComponent":173,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],83:[function(require,module,exports){
"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner;

},{}],84:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactDefaultInjection=require("./ReactDefaultInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdates=require("./ReactUpdates"),ReactVersion=require("./ReactVersion"),findDOMNode=require("./findDOMNode"),renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer"),warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var render=ReactPerf.measure("React","render",ReactMount.render),React={findDOMNode:findDOMNode,render:render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent});var ExecutionEnvironment,ieCompatibilityMode,expectedFeatures,i;module.exports=React;

},{"./ReactCurrentOwner":83,"./ReactDOMTextComponent":95,"./ReactDefaultInjection":98,"./ReactInstanceHandles":108,"./ReactMount":112,"./ReactPerf":118,"./ReactReconciler":123,"./ReactUpdates":130,"./ReactVersion":131,"./findDOMNode":155,"./renderSubtreeIntoContainer":170,"fbjs/lib/warning":29}],85:[function(require,module,exports){
"use strict";var mouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},ReactDOMButton={getNativeProps:function(e,o,n){if(!o.disabled)return o;var t={};for(var u in o)o.hasOwnProperty(u)&&!mouseListenerNames[u]&&(t[u]=o[u]);return t}};module.exports=ReactDOMButton;

},{}],86:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e._currentElement._owner||null;if(t){var r=t.getName();if(r)return" This DOM node was rendered by `"+r+"`."}}return""}function legacyGetDOMNode(){return this}function legacyIsMounted(){var e=this._reactInternalComponent;return!!e}function legacySetStateEtc(){}function legacySetProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueSetPropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function legacyReplaceProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueReplacePropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function friendlyStringify(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(friendlyStringify).join(", ")+"]";var t=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=/^[a-z$_][\w$_]*$/i.test(r)?r:JSON.stringify(r);t.push(n+": "+friendlyStringify(e[r]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function checkAndWarnForMutatedStyle(e,t,r){if(null!=e&&null!=t&&!shallowEqual(e,t)){var n,a=r._tag,o=r._currentElement._owner;o&&(n=o.getName());var i=n+"|"+a;styleMutationWarning.hasOwnProperty(i)||(styleMutationWarning[i]=!0)}}function assertValidProps(e,t){t&&(null!=t.dangerouslySetInnerHTML&&(null!=t.children&&invariant(!1),"object"==typeof t.dangerouslySetInnerHTML&&HTML in t.dangerouslySetInnerHTML||invariant(!1)),null!=t.style&&"object"!=typeof t.style&&invariant(!1))}function enqueuePutListener(e,t,r,n){var a=ReactMount.findReactContainerForID(e);if(a){var o=a.nodeType===ELEMENT_NODE_TYPE?a.ownerDocument:a;listenTo(t,o)}n.getReactMountReady().enqueue(putListener,{id:e,registrationName:t,listener:r})}function putListener(){var e=this;ReactBrowserEventEmitter.putListener(e.id,e.registrationName,e.listener)}function trapBubbledEventsLocal(){var e=this;e._rootNodeID||invariant(!1);var t=ReactMount.getNode(e._rootNodeID);switch(t||invariant(!1),e._tag){case"iframe":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in mediaEvents)mediaEvents.hasOwnProperty(r)&&e._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[r],mediaEvents[r],t));break;case"img":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",t)]}}function mountReadyInputWrapper(){ReactDOMInput.mountReadyWrapper(this)}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(e){hasOwnProperty.call(validatedTagCache,e)||(VALID_TAG_REGEX.test(e)||invariant(!1),validatedTagCache[e]=!0)}function processChildContextDev(e,t){e=assign({},e);var r=e[validateDOMNesting.ancestorInfoContextKey];return e[validateDOMNesting.ancestorInfoContextKey]=validateDOMNesting.updatedAncestorInfo(r,t._tag,t),e}function isCustomComponent(e,t){return e.indexOf("-")>=0||null!=t.is}function ReactDOMComponent(e){validateDangerousTag(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var AutoFocusUtils=require("./AutoFocusUtils"),CSSPropertyOperations=require("./CSSPropertyOperations"),DOMProperty=require("./DOMProperty"),DOMPropertyOperations=require("./DOMPropertyOperations"),EventConstants=require("./EventConstants"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDOMButton=require("./ReactDOMButton"),ReactDOMInput=require("./ReactDOMInput"),ReactDOMOption=require("./ReactDOMOption"),ReactDOMSelect=require("./ReactDOMSelect"),ReactDOMTextarea=require("./ReactDOMTextarea"),ReactMount=require("./ReactMount"),ReactMultiChild=require("./ReactMultiChild"),ReactPerf=require("./ReactPerf"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),invariant=require("fbjs/lib/invariant"),isEventSupported=require("./isEventSupported"),keyOf=require("fbjs/lib/keyOf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),shallowEqual=require("fbjs/lib/shallowEqual"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),deleteListener=ReactBrowserEventEmitter.deleteListener,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=ReactBrowserEventEmitter.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},CHILDREN=keyOf({children:null}),STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),ELEMENT_NODE_TYPE=1,legacyPropsDescriptor,styleMutationWarning={},mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,r){this._rootNodeID=e;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":n=ReactDOMButton.getNativeProps(this,n,r);break;case"input":ReactDOMInput.mountWrapper(this,n,r),n=ReactDOMInput.getNativeProps(this,n,r);break;case"option":ReactDOMOption.mountWrapper(this,n,r),n=ReactDOMOption.getNativeProps(this,n,r);break;case"select":ReactDOMSelect.mountWrapper(this,n,r),n=ReactDOMSelect.getNativeProps(this,n,r),r=ReactDOMSelect.processChildContext(this,n,r);break;case"textarea":ReactDOMTextarea.mountWrapper(this,n,r),n=ReactDOMTextarea.getNativeProps(this,n,r)}assertValidProps(this,n);var a;if(t.useCreateElement){var o=r[ReactMount.ownerDocumentContextKey],i=o.createElement(this._currentElement.type);DOMPropertyOperations.setAttributeForID(i,this._rootNodeID),ReactMount.getID(i),this._updateDOMProperties({},n,t,i),this._createInitialChildren(t,n,r,i),a=i}else{var s=this._createOpenTagMarkupAndPutListeners(t,n),p=this._createContentMarkup(t,n,r);a=!p&&omittedCloseTags[this._tag]?s+"/>":s+">"+p+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(mountReadyInputWrapper,this);case"button":case"select":case"textarea":n.autoFocus&&t.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}return a},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];if(null!=a)if(registrationNameModules.hasOwnProperty(n))a&&enqueuePutListener(this._rootNodeID,n,a,e);else{n===STYLE&&(a&&(a=this._previousStyleCopy=assign({},t.style)),a=CSSPropertyOperations.createMarkupForStyles(a));var o=null;null!=this._tag&&isCustomComponent(this._tag,t)?n!==CHILDREN&&(o=DOMPropertyOperations.createMarkupForCustomAttribute(n,a)):o=DOMPropertyOperations.createMarkupForProperty(n,a),o&&(r+=" "+o)}}return e.renderToStaticMarkup?r:r+" "+DOMPropertyOperations.createMarkupForID(this._rootNodeID)},_createContentMarkup:function(e,t,r){var n="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(n=a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)n=escapeTextContentForBrowser(o);else if(null!=i){var s=this.mountChildren(i,e,r);n=s.join("")}}return newlineEatingTags[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(e,t,r,n){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&setInnerHTML(n,a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)setTextContent(n,o);else if(null!=i)for(var s=this.mountChildren(i,e,r),p=0;p<s.length;p++)n.appendChild(s[p])}},receiveComponent:function(e,t,r){var n=this._currentElement;this._currentElement=e,this.updateComponent(t,n,e,r)},updateComponent:function(e,t,r,n){var a=t.props,o=this._currentElement.props;switch(this._tag){case"button":a=ReactDOMButton.getNativeProps(this,a),o=ReactDOMButton.getNativeProps(this,o);break;case"input":ReactDOMInput.updateWrapper(this),a=ReactDOMInput.getNativeProps(this,a),o=ReactDOMInput.getNativeProps(this,o);break;case"option":a=ReactDOMOption.getNativeProps(this,a),o=ReactDOMOption.getNativeProps(this,o);break;case"select":a=ReactDOMSelect.getNativeProps(this,a),o=ReactDOMSelect.getNativeProps(this,o);break;case"textarea":ReactDOMTextarea.updateWrapper(this),a=ReactDOMTextarea.getNativeProps(this,a),o=ReactDOMTextarea.getNativeProps(this,o)}assertValidProps(this,o),this._updateDOMProperties(a,o,e,null),this._updateDOMChildren(a,o,e,n),!canDefineProperty&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&e.getReactMountReady().enqueue(postUpdateSelectWrapper,this)},_updateDOMProperties:function(e,t,r,n){var a,o,i;for(a in e)if(!t.hasOwnProperty(a)&&e.hasOwnProperty(a))if(a===STYLE){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(i=i||{},i[o]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(a)?e[a]&&deleteListener(this._rootNodeID,a):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),DOMPropertyOperations.deleteValueForProperty(n,a));for(a in t){var p=t[a],l=a===STYLE?this._previousStyleCopy:e[a];if(t.hasOwnProperty(a)&&p!==l)if(a===STYLE)if(p?p=this._previousStyleCopy=assign({},p):this._previousStyleCopy=null,l){for(o in l)!l.hasOwnProperty(o)||p&&p.hasOwnProperty(o)||(i=i||{},i[o]="");for(o in p)p.hasOwnProperty(o)&&l[o]!==p[o]&&(i=i||{},i[o]=p[o])}else i=p;else registrationNameModules.hasOwnProperty(a)?p?enqueuePutListener(this._rootNodeID,a,p,r):l&&deleteListener(this._rootNodeID,a):isCustomComponent(this._tag,t)?(n||(n=ReactMount.getNode(this._rootNodeID)),a===CHILDREN&&(p=null),DOMPropertyOperations.setValueForAttribute(n,a,p)):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),null!=p?DOMPropertyOperations.setValueForProperty(n,a,p):DOMPropertyOperations.deleteValueForProperty(n,a))}i&&(n||(n=ReactMount.getNode(this._rootNodeID)),CSSPropertyOperations.setValueForStyles(n,i))},_updateDOMChildren:function(e,t,r,n){var a=CONTENT_TYPES[typeof e.children]?e.children:null,o=CONTENT_TYPES[typeof t.children]?t.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,p=null!=a?null:e.children,l=null!=o?null:t.children,u=null!=a||null!=i,c=null!=o||null!=s;null!=p&&null==l?this.updateChildren(null,r,n):u&&!c&&this.updateTextContent(""),null!=o?a!==o&&this.updateTextContent(""+o):null!=s?i!==s&&this.updateMarkup(""+s):null!=l&&this.updateChildren(l,r,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var t=0;t<e.length;t++)e[t].remove();break;case"input":ReactDOMInput.unmountWrapper(this);break;case"html":case"head":case"body":invariant(!1)}if(this.unmountChildren(),ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID),ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){this._nodeWithLegacyProperties._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=ReactMount.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=legacyGetDOMNode,e.isMounted=legacyIsMounted,e.setState=legacySetStateEtc,e.replaceState=legacySetStateEtc,e.forceUpdate=legacySetStateEtc,e.setProps=legacySetProps,e.replaceProps=legacyReplaceProps,e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent;

},{"./AutoFocusUtils":50,"./CSSPropertyOperations":53,"./DOMProperty":58,"./DOMPropertyOperations":59,"./EventConstants":63,"./Object.assign":71,"./ReactBrowserEventEmitter":75,"./ReactComponentBrowserEnvironment":80,"./ReactDOMButton":85,"./ReactDOMInput":90,"./ReactDOMOption":91,"./ReactDOMSelect":92,"./ReactDOMTextarea":96,"./ReactMount":112,"./ReactMultiChild":113,"./ReactPerf":118,"./ReactUpdateQueue":129,"./canDefineProperty":151,"./escapeTextContentForBrowser":154,"./isEventSupported":166,"./setInnerHTML":171,"./setTextContent":172,"./validateDOMNesting":175,"fbjs/lib/invariant":20,"fbjs/lib/keyOf":24,"fbjs/lib/shallowEqual":27,"fbjs/lib/warning":29}],87:[function(require,module,exports){
"use strict";function createDOMFactory(e){return ReactElement.createFactory(e)}var ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),mapObject=require("fbjs/lib/mapObject"),ReactDOMFactories=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOMFactories;

},{"./ReactElement":99,"./ReactElementValidator":100,"fbjs/lib/mapObject":25}],88:[function(require,module,exports){
"use strict";var ReactDOMFeatureFlags={useCreateElement:!1};module.exports=ReactDOMFeatureFlags;

},{}],89:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),invariant=require("fbjs/lib/invariant"),INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},ReactDOMIDOperations={updatePropertyByID:function(e,r,t){var a=ReactMount.getNode(e);INVALID_PROPERTY_ERRORS.hasOwnProperty(r)&&invariant(!1),null!=t?DOMPropertyOperations.setValueForProperty(a,r,t):DOMPropertyOperations.deleteValueForProperty(a,r)},dangerouslyReplaceNodeWithMarkupByID:function(e,r){var t=ReactMount.getNode(e);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(t,r)},dangerouslyProcessChildrenUpdates:function(e,r){for(var t=0;t<e.length;t++)e[t].parentNode=ReactMount.getNode(e[t].parentID);DOMChildrenOperations.processUpdates(e,r)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),module.exports=ReactDOMIDOperations;

},{"./DOMChildrenOperations":57,"./DOMPropertyOperations":59,"./ReactMount":112,"./ReactPerf":118,"fbjs/lib/invariant":20}],90:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);ReactUpdates.asap(forceUpdateIfMounted,this);var n=t.name;if("radio"===t.type&&null!=n){for(var r=ReactMount.getNode(this._rootNodeID),i=r;i.parentNode;)i=i.parentNode;for(var u=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),o=0;o<u.length;o++){var l=u[o];if(l!==r&&l.form===r.form){var d=ReactMount.getID(l);d||invariant(!1);var p=instancesByReactID[d];p||invariant(!1),ReactUpdates.asap(forceUpdateIfMounted,p)}}}return a}var ReactDOMIDOperations=require("./ReactDOMIDOperations"),LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),instancesByReactID={},ReactDOMInput={getNativeProps:function(e,t,a){var n=LinkedValueUtils.getValue(t),r=LinkedValueUtils.getChecked(t);return assign({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange})},mountWrapper:function(e,t){var a=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=a?a:null,onChange:_handleChange.bind(e)}},mountReadyWrapper:function(e){instancesByReactID[e._rootNodeID]=e},unmountWrapper:function(e){delete instancesByReactID[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,a=t.checked;null!=a&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"checked",a||!1);var n=LinkedValueUtils.getValue(t);null!=n&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+n)}};module.exports=ReactDOMInput;

},{"./LinkedValueUtils":70,"./Object.assign":71,"./ReactDOMIDOperations":89,"./ReactMount":112,"./ReactUpdates":130,"fbjs/lib/invariant":20}],91:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactDOMSelect=require("./ReactDOMSelect"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey=ReactDOMSelect.valueContextKey,ReactDOMOption={mountWrapper:function(e,t,r){var a=r[valueContextKey],n=null;if(null!=a)if(n=!1,Array.isArray(a)){for(var l=0;l<a.length;l++)if(""+a[l]==""+t.value){n=!0;break}}else n=""+a==""+t.value;e._wrapperState={selected:n}},getNativeProps:function(e,t,r){var a=assign({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(a.selected=e._wrapperState.selected);var n="";return ReactChildren.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(n+=e))}),n&&(a.children=n),a}};module.exports=ReactDOMOption;

},{"./Object.assign":71,"./ReactChildren":77,"./ReactDOMSelect":92,"fbjs/lib/warning":29}],92:[function(require,module,exports){
"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=LinkedValueUtils.getValue(e);null!=t&&updateOptions(this,Boolean(e.multiple),t)}}function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function checkSelectPropTypes(e,t){var a=e._currentElement._owner;LinkedValueUtils.checkPropTypes("select",t,a);for(var n=0;n<valuePropNames.length;n++){var l=valuePropNames[n];null!=t[l]&&t.multiple}}function updateOptions(e,t,a){var n,l,r=ReactMount.getNode(e._rootNodeID).options;if(t){for(n={},l=0;l<a.length;l++)n[""+a[l]]=!0;for(l=0;l<r.length;l++){var i=n.hasOwnProperty(r[l].value);r[l].selected!==i&&(r[l].selected=i)}}else{for(n=""+a,l=0;l<r.length;l++)if(r[l].value===n)return void(r[l].selected=!0);r.length&&(r[0].selected=!0)}}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),a}var LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),valuePropNames=["value","defaultValue"],ReactDOMSelect={valueContextKey:valueContextKey,getNativeProps:function(e,t,a){return assign({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var a=LinkedValueUtils.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=a?a:t.defaultValue,onChange:_handleChange.bind(e),wasMultiple:Boolean(t.multiple)}},processChildContext:function(e,t,a){var n=assign({},a);return n[valueContextKey]=e._wrapperState.initialValue,n},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var a=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var n=LinkedValueUtils.getValue(t);null!=n?(e._wrapperState.pendingUpdate=!1,updateOptions(e,Boolean(t.multiple),n)):a!==Boolean(t.multiple)&&(null!=t.defaultValue?updateOptions(e,Boolean(t.multiple),t.defaultValue):updateOptions(e,Boolean(t.multiple),t.multiple?[]:""))}};module.exports=ReactDOMSelect;

},{"./LinkedValueUtils":70,"./Object.assign":71,"./ReactMount":112,"./ReactUpdates":130,"fbjs/lib/warning":29}],93:[function(require,module,exports){
"use strict";function isCollapsed(e,t,n,o){return e===n&&t===o}function getIEOffsets(e){var t=document.selection,n=t.createRange(),o=n.text.length,s=n.duplicate();s.moveToElementText(e),s.setEndPoint("EndToStart",n);var r=s.text.length;return{start:r,end:r+o}}function getModernOffsets(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,s=t.focusNode,r=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}var f=isCollapsed(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),d=f?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(e),c.setEnd(a.startContainer,a.startOffset);var i=isCollapsed(c.startContainer,c.startOffset,c.endContainer,c.endOffset),l=i?0:c.toString().length,g=l+d,u=document.createRange();u.setStart(n,o),u.setEnd(s,r);var O=u.collapsed;return{start:O?g:l,end:O?l:g}}function setIEOffsets(e,t){var n,o,s=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,o=n):t.start>t.end?(n=t.end,o=t.start):(n=t.start,o=t.end),s.moveToElementText(e),s.moveStart("character",n),s.setEndPoint("EndToStart",s),s.moveEnd("character",o-n),s.select()}function setModernOffsets(e,t){if(window.getSelection){var n=window.getSelection(),o=e[getTextContentAccessor()].length,s=Math.min(t.start,o),r=void 0===t.end?s:Math.min(t.end,o);if(!n.extend&&s>r){var a=r;r=s,s=a}var f=getNodeForCharacterOffset(e,s),d=getNodeForCharacterOffset(e,r);if(f&&d){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),s>r?(n.addRange(c),n.extend(d.node,d.offset)):(c.setEnd(d.node,d.offset),n.addRange(c))}}}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),getNodeForCharacterOffset=require("./getNodeForCharacterOffset"),getTextContentAccessor=require("./getTextContentAccessor"),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection;

},{"./getNodeForCharacterOffset":163,"./getTextContentAccessor":164,"fbjs/lib/ExecutionEnvironment":6}],94:[function(require,module,exports){
"use strict";var ReactDefaultInjection=require("./ReactDefaultInjection"),ReactServerRendering=require("./ReactServerRendering"),ReactVersion=require("./ReactVersion");ReactDefaultInjection.inject();var ReactDOMServer={renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,version:ReactVersion};module.exports=ReactDOMServer;

},{"./ReactDefaultInjection":98,"./ReactServerRendering":127,"./ReactVersion":131}],95:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactMount=require("./ReactMount"),assign=require("./Object.assign"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setTextContent=require("./setTextContent"),validateDOMNesting=require("./validateDOMNesting"),ReactDOMTextComponent=function(e){};assign(ReactDOMTextComponent.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){if(this._rootNodeID=e,t.useCreateElement){var r=n[ReactMount.ownerDocumentContextKey],o=r.createElement("span");return DOMPropertyOperations.setAttributeForID(o,e),ReactMount.getID(o),setTextContent(o,this._stringText),o}var i=escapeTextContentForBrowser(this._stringText);return t.renderToStaticMarkup?i:"<span "+DOMPropertyOperations.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=ReactMount.getNode(this._rootNodeID);DOMChildrenOperations.updateTextContent(r,n)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}}),module.exports=ReactDOMTextComponent;

},{"./DOMChildrenOperations":57,"./DOMPropertyOperations":59,"./Object.assign":71,"./ReactComponentBrowserEnvironment":80,"./ReactMount":112,"./escapeTextContentForBrowser":154,"./setTextContent":172,"./validateDOMNesting":175}],96:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(e){var a=this._currentElement.props,t=LinkedValueUtils.executeOnChange(a,e);return ReactUpdates.asap(forceUpdateIfMounted,this),t}var LinkedValueUtils=require("./LinkedValueUtils"),ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactDOMTextarea={getNativeProps:function(e,a,t){return null!=a.dangerouslySetInnerHTML&&invariant(!1),assign({},a,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange})},mountWrapper:function(e,a){var t=a.defaultValue,n=a.children;null!=n&&(null!=t&&invariant(!1),Array.isArray(n)&&(n.length<=1||invariant(!1),n=n[0]),t=""+n),null==t&&(t="");var r=LinkedValueUtils.getValue(a);e._wrapperState={initialValue:""+(null!=r?r:t),onChange:_handleChange.bind(e)}},updateWrapper:function(e){var a=e._currentElement.props,t=LinkedValueUtils.getValue(a);null!=t&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+t)}};module.exports=ReactDOMTextarea;

},{"./LinkedValueUtils":70,"./Object.assign":71,"./ReactDOMIDOperations":89,"./ReactUpdates":130,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],97:[function(require,module,exports){
"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var ReactUpdates=require("./ReactUpdates"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t,a,e,i,n,c){var r=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,r?t(a,e,i,n,c):transaction.perform(t,null,a,e,i,n,c)}};module.exports=ReactDefaultBatchingStrategy;

},{"./Object.assign":71,"./ReactUpdates":130,"./Transaction":147,"fbjs/lib/emptyFunction":12}],98:[function(require,module,exports){
"use strict";function inject(){if(!alreadyInjected){alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles),ReactInjection.EventPluginHub.injectMount(ReactMount),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.Class.injectMixin(ReactBrowserComponentMixin),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponent("noscript"),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}}var BeforeInputEventPlugin=require("./BeforeInputEventPlugin"),ChangeEventPlugin=require("./ChangeEventPlugin"),ClientReactRootIndex=require("./ClientReactRootIndex"),DefaultEventPluginOrder=require("./DefaultEventPluginOrder"),EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig"),ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactDOMComponent=require("./ReactDOMComponent"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactEventListener=require("./ReactEventListener"),ReactInjection=require("./ReactInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactReconcileTransaction=require("./ReactReconcileTransaction"),SelectEventPlugin=require("./SelectEventPlugin"),ServerReactRootIndex=require("./ServerReactRootIndex"),SimpleEventPlugin=require("./SimpleEventPlugin"),SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig"),alreadyInjected=!1;module.exports={inject:inject};

},{"./BeforeInputEventPlugin":51,"./ChangeEventPlugin":55,"./ClientReactRootIndex":56,"./DefaultEventPluginOrder":61,"./EnterLeaveEventPlugin":62,"./HTMLDOMPropertyConfig":69,"./ReactBrowserComponentMixin":74,"./ReactComponentBrowserEnvironment":80,"./ReactDOMComponent":86,"./ReactDOMTextComponent":95,"./ReactDefaultBatchingStrategy":97,"./ReactEventListener":105,"./ReactInjection":106,"./ReactInstanceHandles":108,"./ReactMount":112,"./ReactReconcileTransaction":122,"./SVGDOMPropertyConfig":132,"./SelectEventPlugin":133,"./ServerReactRootIndex":134,"./SimpleEventPlugin":135,"fbjs/lib/ExecutionEnvironment":6}],99:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(e,r,n,t,l,o,c){var a={$$typeof:REACT_ELEMENT_TYPE,type:e,key:r,ref:n,props:c,_owner:o};return a};ReactElement.createElement=function(e,r,n){var t,l={},o=null,c=null,a=null,u=null;if(null!=r){c=void 0===r.ref?null:r.ref,o=void 0===r.key?null:""+r.key,a=void 0===r.__self?null:r.__self,u=void 0===r.__source?null:r.__source;for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var f=arguments.length-2;if(1===f)l.children=n;else if(f>1){for(var i=Array(f),E=0;E<f;E++)i[E]=arguments[E+2];l.children=i}if(e&&e.defaultProps){var s=e.defaultProps;for(t in s)void 0===l[t]&&(l[t]=s[t])}return ReactElement(e,o,c,a,u,ReactCurrentOwner.current,l)},ReactElement.createFactory=function(e){var r=ReactElement.createElement.bind(null,e);return r.type=e,r},ReactElement.cloneAndReplaceKey=function(e,r){return ReactElement(e.type,r,e.ref,e._self,e._source,e._owner,e.props)},ReactElement.cloneAndReplaceProps=function(e,r){var n=ReactElement(e.type,e.key,e.ref,e._self,e._source,e._owner,r);return n},ReactElement.cloneElement=function(e,r,n){var t,l=assign({},e.props),o=e.key,c=e.ref,a=e._self,u=e._source,f=e._owner;if(null!=r){void 0!==r.ref&&(c=r.ref,f=ReactCurrentOwner.current),void 0!==r.key&&(o=""+r.key);for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var i=arguments.length-2;if(1===i)l.children=n;else if(i>1){for(var E=Array(i),s=0;s<i;s++)E[s]=arguments[s+2];l.children=E}return ReactElement(e.type,o,c,a,u,f,l)},ReactElement.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement;

},{"./Object.assign":71,"./ReactCurrentOwner":83,"./canDefineProperty":151}],100:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var e=ReactCurrentOwner.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function validateExplicitKey(e,r){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;getAddendaForKeyUse("uniqueKey",e,r)}}function getAddendaForKeyUse(e,r,t){var a=getDeclarationErrorAddendum();if(!a){var n="string"==typeof t?t:t.displayName||t.name;n&&(a=" Check the top-level render call using <"+n+">.")}var i=ownerHasKeyUseWarning[e]||(ownerHasKeyUseWarning[e]={});if(i[a])return null;i[a]=!0;var o={parentOrOwner:a,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return r&&r._owner&&r._owner!==ReactCurrentOwner.current&&(o.childOwner=" It was passed a child from "+r._owner.getName()+"."),o}function validateChildKeys(e,r){if("object"==typeof e)if(Array.isArray(e))for(var t=0;t<e.length;t++){var a=e[t];ReactElement.isValidElement(a)&&validateExplicitKey(a,r)}else if(ReactElement.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var n=getIteratorFn(e);if(n&&n!==e.entries)for(var i,o=n.call(e);!(i=o.next()).done;)ReactElement.isValidElement(i.value)&&validateExplicitKey(i.value,r)}}function checkPropTypes(e,r,t,a){for(var n in r)if(r.hasOwnProperty(n)){var i;try{"function"!=typeof r[n]&&invariant(!1),i=r[n](t,n,e,a,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){i=e}if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum()}}}function validatePropTypes(e){var r=e.type;if("function"==typeof r){var t=r.displayName||r.name;r.propTypes&&checkPropTypes(t,r.propTypes,e.props,ReactPropTypeLocations.prop),r.getDefaultProps}}var ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactCurrentOwner=require("./ReactCurrentOwner"),canDefineProperty=require("./canDefineProperty"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ownerHasKeyUseWarning={},loggedTypeFailures={},ReactElementValidator={createElement:function(e,r,t){var a="string"==typeof e||"function"==typeof e,n=ReactElement.createElement.apply(this,arguments);if(null==n)return n;if(a)for(var i=2;i<arguments.length;i++)validateChildKeys(arguments[i],e);return validatePropTypes(n),n},createFactory:function(e){var r=ReactElementValidator.createElement.bind(null,e);return r.type=e,r},cloneElement:function(e,r,t){for(var a=ReactElement.cloneElement.apply(this,arguments),n=2;n<arguments.length;n++)validateChildKeys(arguments[n],a.type);return validatePropTypes(a),a}};module.exports=ReactElementValidator;

},{"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactPropTypeLocationNames":119,"./ReactPropTypeLocations":120,"./canDefineProperty":151,"./getIteratorFn":162,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],101:[function(require,module,exports){
"use strict";function registerNullComponentID(){ReactEmptyComponentRegistry.registerNullComponentID(this._rootNodeID)}var ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactReconciler=require("./ReactReconciler"),assign=require("./Object.assign"),placeholderElement,ReactEmptyComponentInjection={injectEmptyComponent:function(e){placeholderElement=ReactElement.createElement(e)}},ReactEmptyComponent=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(placeholderElement)};assign(ReactEmptyComponent.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(registerNullComponentID,this),this._rootNodeID=e,ReactReconciler.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){ReactReconciler.unmountComponent(this._renderedComponent),ReactEmptyComponentRegistry.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent;

},{"./Object.assign":71,"./ReactElement":99,"./ReactEmptyComponentRegistry":102,"./ReactReconciler":123}],102:[function(require,module,exports){
"use strict";function isNullComponentID(e){return!!nullComponentIDsRegistry[e]}function registerNullComponentID(e){nullComponentIDsRegistry[e]=!0}function deregisterNullComponentID(e){delete nullComponentIDsRegistry[e]}var nullComponentIDsRegistry={},ReactEmptyComponentRegistry={isNullComponentID:isNullComponentID,registerNullComponentID:registerNullComponentID,deregisterNullComponentID:deregisterNullComponentID};module.exports=ReactEmptyComponentRegistry;

},{}],103:[function(require,module,exports){
"use strict";function invokeGuardedCallback(r,a,t,o){try{return a(t,o)}catch(r){return void(null===caughtError&&(caughtError=r))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var r=caughtError;throw caughtError=null,r}}},fakeNode;module.exports=ReactErrorUtils;

},{}],104:[function(require,module,exports){
"use strict";function runEventQueueInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}var EventPluginHub=require("./EventPluginHub"),ReactEventEmitterMixin={handleTopLevel:function(e,n,t,u,i){runEventQueueInBatch(EventPluginHub.extractEvents(e,n,t,u,i))}};module.exports=ReactEventEmitterMixin;

},{"./EventPluginHub":64}],105:[function(require,module,exports){
"use strict";function findParent(e){var t=ReactMount.getID(e),n=ReactInstanceHandles.getReactRootIDFromNodeID(t),a=ReactMount.findReactContainerForID(n);return ReactMount.getFirstReactDOM(a)}function TopLevelCallbackBookKeeping(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function handleTopLevelImpl(e){handleTopLevelWithoutPath(e)}function handleTopLevelWithoutPath(e){for(var t=ReactMount.getFirstReactDOM(getEventTarget(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=findParent(n);for(var a=0;a<e.ancestors.length;a++){t=e.ancestors[a];var o=ReactMount.getID(t)||"";ReactEventListener._handleTopLevel(e.topLevelType,t,o,e.nativeEvent,getEventTarget(e.nativeEvent))}}function handleTopLevelWithPath(e){for(var t=e.nativeEvent.path,n=t[0],a=0,o=0;o<t.length;o++){var l=t[o];l.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE&&(n=t[o+1]);if(ReactMount.getFirstReactDOM(l)===l){var i=ReactMount.getID(l),r=ReactInstanceHandles.getReactRootIDFromNodeID(i);e.ancestors.push(l);var s=ReactMount.getID(l)||"";for(a++,ReactEventListener._handleTopLevel(e.topLevelType,l,s,e.nativeEvent,n);i!==r;)o++,l=t[o],i=ReactMount.getID(l)}}0===a&&ReactEventListener._handleTopLevel(e.topLevelType,window,"",e.nativeEvent,getEventTarget(e.nativeEvent))}function scrollValueMonitor(e){e(getUnboundedScrollPosition(window))}var EventListener=require("fbjs/lib/EventListener"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),PooledClass=require("./PooledClass"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),getEventTarget=require("./getEventTarget"),getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition"),DOCUMENT_FRAGMENT_NODE_TYPE=11;assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(e){ReactEventListener._handleTopLevel=e},setEnabled:function(e){ReactEventListener._enabled=!!e},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(e,t,n){var a=n;return a?EventListener.listen(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var a=n;return a?EventListener.capture(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=scrollValueMonitor.bind(null,e);EventListener.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(ReactEventListener._enabled){var n=TopLevelCallbackBookKeeping.getPooled(e,t);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,n)}finally{TopLevelCallbackBookKeeping.release(n)}}}};module.exports=ReactEventListener;

},{"./Object.assign":71,"./PooledClass":72,"./ReactInstanceHandles":108,"./ReactMount":112,"./ReactUpdates":130,"./getEventTarget":161,"fbjs/lib/EventListener":5,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/getUnboundedScrollPosition":17}],106:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),EventPluginHub=require("./EventPluginHub"),ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactClass=require("./ReactClass"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactNativeComponent=require("./ReactNativeComponent"),ReactPerf=require("./ReactPerf"),ReactRootIndex=require("./ReactRootIndex"),ReactUpdates=require("./ReactUpdates"),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection;

},{"./DOMProperty":58,"./EventPluginHub":64,"./ReactBrowserEventEmitter":75,"./ReactClass":78,"./ReactComponentEnvironment":81,"./ReactEmptyComponent":101,"./ReactNativeComponent":115,"./ReactPerf":118,"./ReactRootIndex":125,"./ReactUpdates":130}],107:[function(require,module,exports){
"use strict";function isInDocument(e){return containsNode(document.documentElement,e)}var ReactDOMSelection=require("./ReactDOMSelection"),containsNode=require("fbjs/lib/containsNode"),focusNode=require("fbjs/lib/focusNode"),getActiveElement=require("fbjs/lib/getActiveElement"),ReactInputSelection={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=getActiveElement();return{focusedElem:e,selectionRange:ReactInputSelection.hasSelectionCapabilities(e)?ReactInputSelection.getSelection(e):null}},restoreSelection:function(e){var t=getActiveElement(),n=e.focusedElem,o=e.selectionRange;t!==n&&isInDocument(n)&&(ReactInputSelection.hasSelectionCapabilities(n)&&ReactInputSelection.setSelection(n,o),focusNode(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=ReactDOMSelection.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,o=t.end;if(void 0===o&&(o=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var c=e.createTextRange();c.collapse(!0),c.moveStart("character",n),c.moveEnd("character",o-n),c.select()}else ReactDOMSelection.setOffsets(e,t)}};module.exports=ReactInputSelection;

},{"./ReactDOMSelection":93,"fbjs/lib/containsNode":9,"fbjs/lib/focusNode":14,"fbjs/lib/getActiveElement":15}],108:[function(require,module,exports){
"use strict";function getReactRootIDString(t){return SEPARATOR+t.toString(36)}function isBoundary(t,e){return t.charAt(e)===SEPARATOR||e===t.length}function isValidID(t){return""===t||t.charAt(0)===SEPARATOR&&t.charAt(t.length-1)!==SEPARATOR}function isAncestorIDOf(t,e){return 0===e.indexOf(t)&&isBoundary(e,t.length)}function getParentID(t){return t?t.substr(0,t.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(t,e){if(isValidID(t)&&isValidID(e)||invariant(!1),isAncestorIDOf(t,e)||invariant(!1),t===e)return t;var r,n=t.length+SEPARATOR_LENGTH;for(r=n;r<e.length&&!isBoundary(e,r);r++);return e.substr(0,r)}function getFirstCommonAncestorID(t,e){var r=Math.min(t.length,e.length);if(0===r)return"";for(var n=0,a=0;a<=r;a++)if(isBoundary(t,a)&&isBoundary(e,a))n=a;else if(t.charAt(a)!==e.charAt(a))break;var i=t.substr(0,n);return isValidID(i)||invariant(!1),i}function traverseParentPath(t,e,r,n,a,i){t=t||"",e=e||"",t===e&&invariant(!1);var s=isAncestorIDOf(e,t);s||isAncestorIDOf(t,e)||invariant(!1);for(var o=0,c=s?getParentID:getNextDescendantID,R=t;;R=c(R,e)){var A;if(a&&R===t||i&&R===e||(A=r(R,s,n)),!1===A||R===e)break;o++<MAX_TREE_DEPTH||invariant(!1)}}var ReactRootIndex=require("./ReactRootIndex"),invariant=require("fbjs/lib/invariant"),SEPARATOR=".",SEPARATOR_LENGTH=SEPARATOR.length,MAX_TREE_DEPTH=1e4,ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===SEPARATOR&&t.length>1){var e=t.indexOf(SEPARATOR,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,r,n,a){var i=getFirstCommonAncestorID(t,e);i!==t&&traverseParentPath(t,i,r,n,!1,!0),i!==e&&traverseParentPath(i,e,r,a,!0,!1)},traverseTwoPhase:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!1),traverseParentPath(t,"",e,r,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!0),traverseParentPath(t,"",e,r,!0,!0))},traverseAncestors:function(t,e,r){traverseParentPath("",t,e,r,!0,!1)},getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles;

},{"./ReactRootIndex":125,"fbjs/lib/invariant":20}],109:[function(require,module,exports){
"use strict";var ReactInstanceMap={remove:function(n){n._reactInternalInstance=void 0},get:function(n){return n._reactInternalInstance},has:function(n){return void 0!==n._reactInternalInstance},set:function(n,t){n._reactInternalInstance=t}};module.exports=ReactInstanceMap;

},{}],110:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactComponent=require("./ReactComponent"),ReactClass=require("./ReactClass"),ReactDOMFactories=require("./ReactDOMFactories"),ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),ReactPropTypes=require("./ReactPropTypes"),ReactVersion=require("./ReactVersion"),assign=require("./Object.assign"),onlyChild=require("./onlyChild"),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(e){return e},DOM:ReactDOMFactories,version:ReactVersion,__spread:assign};module.exports=React;

},{"./Object.assign":71,"./ReactChildren":77,"./ReactClass":78,"./ReactComponent":79,"./ReactDOMFactories":87,"./ReactElement":99,"./ReactElementValidator":100,"./ReactPropTypes":121,"./ReactVersion":131,"./onlyChild":168}],111:[function(require,module,exports){
"use strict";var adler32=require("./adler32"),TAG_END=/\/?>/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var r=adler32(e);return e.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+r+'"$&')},canReuseMarkup:function(e,r){var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);return a=a&&parseInt(a,10),adler32(e)===a}};module.exports=ReactMarkupChecksum;

},{"./adler32":150}],112:[function(require,module,exports){
"use strict";function firstDifferenceIndex(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e.charAt(o)!==t.charAt(o))return o;return e.length===t.length?-1:n}function getReactRootElementInContainer(e){return e?e.nodeType===DOC_NODE_TYPE?e.documentElement:e.firstChild:null}function getReactRootID(e){var t=getReactRootElementInContainer(e);return t&&ReactMount.getID(t)}function getID(e){var t=internalGetID(e);if(t)if(nodeCache.hasOwnProperty(t)){var n=nodeCache[t];n!==e&&(isValid(n,t)&&invariant(!1),nodeCache[t]=e)}else nodeCache[t]=e;return t}function internalGetID(e){return e&&e.getAttribute&&e.getAttribute(ATTR_NAME)||""}function setID(e,t){var n=internalGetID(e);n!==t&&delete nodeCache[n],e.setAttribute(ATTR_NAME,t),nodeCache[t]=e}function getNode(e){return nodeCache.hasOwnProperty(e)&&isValid(nodeCache[e],e)||(nodeCache[e]=ReactMount.findReactNodeByID(e)),nodeCache[e]}function getNodeFromInstance(e){var t=ReactInstanceMap.get(e)._rootNodeID;return ReactEmptyComponentRegistry.isNullComponentID(t)?null:(nodeCache.hasOwnProperty(t)&&isValid(nodeCache[t],t)||(nodeCache[t]=ReactMount.findReactNodeByID(t)),nodeCache[t])}function isValid(e,t){if(e){internalGetID(e)!==t&&invariant(!1);var n=ReactMount.findReactContainerForID(t);if(n&&containsNode(n,e))return!0}return!1}function purgeID(e){delete nodeCache[e]}function findDeepestCachedAncestorImpl(e){var t=nodeCache[e];if(!t||!isValid(t,e))return!1;deepestNodeSoFar=t}function findDeepestCachedAncestor(e){deepestNodeSoFar=null,ReactInstanceHandles.traverseAncestors(e,findDeepestCachedAncestorImpl);var t=deepestNodeSoFar;return deepestNodeSoFar=null,t}function mountComponentIntoNode(e,t,n,o,r,a){ReactDOMFeatureFlags.useCreateElement&&(a=assign({},a),n.nodeType===DOC_NODE_TYPE?a[ownerDocumentContextKey]=n:a[ownerDocumentContextKey]=n.ownerDocument);var c=ReactReconciler.mountComponent(e,t,o,a);e._renderedComponent._topLevelWrapper=e,ReactMount._mountImageIntoNode(c,n,r,o)}function batchedMountComponentIntoNode(e,t,n,o,r){var a=ReactUpdates.ReactReconcileTransaction.getPooled(o);a.perform(mountComponentIntoNode,null,e,t,n,a,o,r),ReactUpdates.ReactReconcileTransaction.release(a)}function unmountComponentFromNode(e,t){for(ReactReconciler.unmountComponent(e),t.nodeType===DOC_NODE_TYPE&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function hasNonRootReactChild(e){var t=getReactRootID(e);return!!t&&t!==ReactInstanceHandles.getReactRootIDFromNodeID(t)}function findFirstReactDOMImpl(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=internalGetID(e);if(t){var n,o=ReactInstanceHandles.getReactRootIDFromNodeID(t),r=e;do{if(n=internalGetID(r),null==(r=r.parentNode))return null}while(n!==o);if(r===containersByReactRootID[o])return e}}return null}var DOMProperty=require("./DOMProperty"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),containsNode=require("fbjs/lib/containsNode"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant"),setInnerHTML=require("./setInnerHTML"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME,nodeCache={},ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,ownerDocumentContextKey="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),instancesByReactRootID={},containersByReactRootID={},rootElementsByReactRootID,findComponentRootReusableArray=[],deepestNodeSoFar=null,TopLevelWrapper=function(){};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,o){return ReactMount.scrollMonitor(n,function(){ReactUpdateQueue.enqueueElementInternal(e,t),o&&ReactUpdateQueue.enqueueCallbackInternal(e,o)}),e},_registerComponent:function(e,t){(!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1),ReactBrowserEventEmitter.ensureScrollValueMonitoring();var n=ReactMount.registerContainer(t);return instancesByReactRootID[n]=e,n},_renderNewRootComponent:function(e,t,n,o){var r=instantiateReactComponent(e,null),a=ReactMount._registerComponent(r,t);return ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,r,a,t,n,o),r},renderSubtreeIntoContainer:function(e,t,n,o){return(null==e||null==e._reactInternalInstance)&&invariant(!1),ReactMount._renderSubtreeIntoContainer(e,t,n,o)},_renderSubtreeIntoContainer:function(e,t,n,o){ReactElement.isValidElement(t)||invariant(!1);var r=new ReactElement(TopLevelWrapper,null,null,null,null,null,t),a=instancesByReactRootID[getReactRootID(n)];if(a){var c=a._currentElement,i=c.props;if(shouldUpdateReactComponent(i,t)){var u=a._renderedComponent.getPublicInstance(),R=o&&function(){o.call(u)};return ReactMount._updateRootComponent(a,r,n,R),u}ReactMount.unmountComponentAtNode(n)}var d=getReactRootElementInContainer(n),s=d&&!!internalGetID(d),l=hasNonRootReactChild(n),p=s&&!a&&!l,C=ReactMount._renderNewRootComponent(r,n,p,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):emptyObject)._renderedComponent.getPublicInstance();return o&&o.call(C),C},render:function(e,t,n){return ReactMount._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=getReactRootID(e);return t&&(t=ReactInstanceHandles.getReactRootIDFromNodeID(t)),t||(t=ReactInstanceHandles.createReactRootID()),containersByReactRootID[t]=e,t},unmountComponentAtNode:function(e){(!e||e.nodeType!==ELEMENT_NODE_TYPE&&e.nodeType!==DOC_NODE_TYPE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1);var t=getReactRootID(e),n=instancesByReactRootID[t];if(!n){var o=(hasNonRootReactChild(e),internalGetID(e));o&&ReactInstanceHandles.getReactRootIDFromNodeID(o);return!1}return ReactUpdates.batchedUpdates(unmountComponentFromNode,n,e),delete instancesByReactRootID[t],delete containersByReactRootID[t],!0},findReactContainerForID:function(e){var t=ReactInstanceHandles.getReactRootIDFromNodeID(e),n=containersByReactRootID[t];return n},findReactNodeByID:function(e){var t=ReactMount.findReactContainerForID(e);return ReactMount.findComponentRoot(t,e)},getFirstReactDOM:function(e){return findFirstReactDOMImpl(e)},findComponentRoot:function(e,t){var n=findComponentRootReusableArray,o=0,r=findDeepestCachedAncestor(t)||e;for(n[0]=r.firstChild,n.length=1;o<n.length;){for(var a,c=n[o++];c;){var i=ReactMount.getID(c);i?t===i?a=c:ReactInstanceHandles.isAncestorIDOf(i,t)&&(n.length=o=0,n.push(c.firstChild)):n.push(c.firstChild),c=c.nextSibling}if(a)return n.length=0,a}n.length=0,invariant(!1)},_mountImageIntoNode:function(e,t,n,o){if((!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE)&&invariant(!1),n){var r=getReactRootElementInContainer(t);if(ReactMarkupChecksum.canReuseMarkup(e,r))return;var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);r.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var c=r.outerHTML;r.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,a);var i=e,u=firstDifferenceIndex(i,c);i.substring(u-20,u+20),c.substring(u-20,u+20);t.nodeType===DOC_NODE_TYPE&&invariant(!1)}if(t.nodeType===DOC_NODE_TYPE&&invariant(!1),o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}else setInnerHTML(t,e)},ownerDocumentContextKey:ownerDocumentContextKey,getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,isValid:isValid,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),module.exports=ReactMount;

},{"./DOMProperty":58,"./Object.assign":71,"./ReactBrowserEventEmitter":75,"./ReactCurrentOwner":83,"./ReactDOMFeatureFlags":88,"./ReactElement":99,"./ReactEmptyComponentRegistry":102,"./ReactInstanceHandles":108,"./ReactInstanceMap":109,"./ReactMarkupChecksum":111,"./ReactPerf":118,"./ReactReconciler":123,"./ReactUpdateQueue":129,"./ReactUpdates":130,"./instantiateReactComponent":165,"./setInnerHTML":171,"./shouldUpdateReactComponent":173,"./validateDOMNesting":175,"fbjs/lib/containsNode":9,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],113:[function(require,module,exports){
"use strict";function enqueueInsertMarkup(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(n)-1,content:null,fromIndex:null,toIndex:t})}function enqueueMove(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:n,toIndex:t})}function enqueueRemove(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,content:null,fromIndex:n,toIndex:null})}function enqueueSetMarkup(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.SET_MARKUP,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function enqueueTextContent(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function processQueue(){updateQueue.length&&(ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue),clearQueue())}function clearQueue(){updateQueue.length=0,markupQueue.length=0}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactReconciler=require("./ReactReconciler"),ReactChildReconciler=require("./ReactChildReconciler"),flattenChildren=require("./flattenChildren"),updateDepth=0,updateQueue=[],markupQueue=[],ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(e,n,t){return ReactChildReconciler.instantiateChildren(e,n,t)},_reconcilerUpdateChildren:function(e,n,t,u){var r;return r=flattenChildren(n),ReactChildReconciler.updateChildren(e,r,t,u)},mountChildren:function(e,n,t){var u=this._reconcilerInstantiateChildren(e,n,t);this._renderedChildren=u;var r=[],i=0;for(var o in u)if(u.hasOwnProperty(o)){var d=u[o],a=this._rootNodeID+o,l=ReactReconciler.mountComponent(d,a,n,t);d._mountIndex=i++,r.push(l)}return r},updateTextContent:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChild(t[u]);this.setTextContent(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateMarkup:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChildByName(t[u],u);this.setMarkup(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateChildren:function(e,n,t){updateDepth++;var u=!0;try{this._updateChildren(e,n,t),u=!1}finally{updateDepth--,updateDepth||(u?clearQueue():processQueue())}},_updateChildren:function(e,n,t){var u=this._renderedChildren,r=this._reconcilerUpdateChildren(u,e,n,t);if(this._renderedChildren=r,r||u){var i,o=0,d=0;for(i in r)if(r.hasOwnProperty(i)){var a=u&&u[i],l=r[i];a===l?(this.moveChild(a,d,o),o=Math.max(a._mountIndex,o),a._mountIndex=d):(a&&(o=Math.max(a._mountIndex,o),this._unmountChild(a)),this._mountChildByNameAtIndex(l,i,d,n,t)),d++}for(i in u)!u.hasOwnProperty(i)||r&&r.hasOwnProperty(i)||this._unmountChild(u[i])}},unmountChildren:function(){var e=this._renderedChildren;ReactChildReconciler.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,n,t){e._mountIndex<t&&enqueueMove(this._rootNodeID,e._mountIndex,n)},createChild:function(e,n){enqueueInsertMarkup(this._rootNodeID,n,e._mountIndex)},removeChild:function(e){enqueueRemove(this._rootNodeID,e._mountIndex)},setTextContent:function(e){enqueueTextContent(this._rootNodeID,e)},setMarkup:function(e){enqueueSetMarkup(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,n,t,u,r){var i=this._rootNodeID+n,o=ReactReconciler.mountComponent(e,i,u,r);e._mountIndex=t,this.createChild(e,o)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};module.exports=ReactMultiChild;

},{"./ReactChildReconciler":76,"./ReactComponentEnvironment":81,"./ReactCurrentOwner":83,"./ReactMultiChildUpdateTypes":114,"./ReactReconciler":123,"./flattenChildren":156}],114:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes;

},{"fbjs/lib/keyMirror":23}],115:[function(require,module,exports){
"use strict";function getComponentClassForElement(n){if("function"==typeof n.type)return n.type;var e=n.type,t=tagToComponentClass[e];return null==t&&(tagToComponentClass[e]=t=autoGenerateWrapperClass(e)),t}function createInternalComponent(n){return genericComponentClass||invariant(!1),new genericComponentClass(n.type,n.props)}function createInstanceForText(n){return new textComponentClass(n)}function isTextComponent(n){return n instanceof textComponentClass}var assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),autoGenerateWrapperClass=null,genericComponentClass=null,tagToComponentClass={},textComponentClass=null,ReactNativeComponentInjection={injectGenericComponentClass:function(n){genericComponentClass=n},injectTextComponentClass:function(n){textComponentClass=n},injectComponentClasses:function(n){assign(tagToComponentClass,n)}},ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent;

},{"./Object.assign":71,"fbjs/lib/invariant":20}],116:[function(require,module,exports){
"use strict";function warnTDZ(e,n){}var warning=require("fbjs/lib/warning"),ReactNoopUpdateQueue={isMounted:function(e){return!1},enqueueCallback:function(e,n){},enqueueForceUpdate:function(e){warnTDZ(e,"forceUpdate")},enqueueReplaceState:function(e,n){warnTDZ(e,"replaceState")},enqueueSetState:function(e,n){warnTDZ(e,"setState")},enqueueSetProps:function(e,n){warnTDZ(e,"setProps")},enqueueReplaceProps:function(e,n){warnTDZ(e,"replaceProps")}};module.exports=ReactNoopUpdateQueue;

},{"fbjs/lib/warning":29}],117:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),ReactOwner={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,n,t){ReactOwner.isValidOwner(t)||invariant(!1),t.attachRef(n,e)},removeComponentAsRefFrom:function(e,n,t){ReactOwner.isValidOwner(t)||invariant(!1),t.getPublicInstance().refs[n]===e.getPublicInstance()&&t.detachRef(n)}};module.exports=ReactOwner;

},{"fbjs/lib/invariant":20}],118:[function(require,module,exports){
"use strict";function _noMeasure(e,r,t){return t}var ReactPerf={enableMeasure:!1,storedMeasure:_noMeasure,measureMethods:function(e,r,t){},measure:function(e,r,t){return t},injection:{injectMeasure:function(e){ReactPerf.storedMeasure=e}}};module.exports=ReactPerf;

},{}],119:[function(require,module,exports){
"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames;

},{}],120:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations;

},{"fbjs/lib/keyMirror":23}],121:[function(require,module,exports){
"use strict";function createChainableTypeChecker(e){function r(r,n,t,a,c,o){if(a=a||ANONYMOUS,o=o||t,null==n[t]){var i=ReactPropTypeLocationNames[c];return r?new Error("Required "+i+" `"+o+"` was not specified in `"+a+"`."):null}return e(n,t,a,c,o)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function createPrimitiveTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(getPropType(o)!==e){var i=ReactPropTypeLocationNames[a],u=getPreciseType(o);return new Error("Invalid "+i+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected `"+e+"`.")}return null}return createChainableTypeChecker(r)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(!Array.isArray(o)){var i=ReactPropTypeLocationNames[a],u=getPropType(o);return new Error("Invalid "+i+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected an array.")}for(var p=0;p<o.length;p++){var l=e(o,p,t,a,c+"["+p+"]","SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createElementTypeChecker(){function e(e,r,n,t,a){if(!ReactElement.isValidElement(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to `"+n+"`, expected a single ReactElement.")}return null}return createChainableTypeChecker(e)}function createInstanceTypeChecker(e){function r(r,n,t,a,c){if(!(r[n]instanceof e)){var o=ReactPropTypeLocationNames[a],i=e.name||ANONYMOUS,u=getClassName(r[n]);return new Error("Invalid "+o+" `"+c+"` of type `"+u+"` supplied to `"+t+"`, expected instance of `"+i+"`.")}return null}return createChainableTypeChecker(r)}function createEnumTypeChecker(e){function r(r,n,t,a,c){for(var o=r[n],i=0;i<e.length;i++)if(o===e[i])return null;var u=ReactPropTypeLocationNames[a],p=JSON.stringify(e);return new Error("Invalid "+u+" `"+c+"` of value `"+o+"` supplied to `"+t+"`, expected one of "+p+".")}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` supplied to `"+t+"`, expected an object.")}for(var p in o)if(o.hasOwnProperty(p)){var l=e(o,p,t,a,c+"."+p,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createUnionTypeChecker(e){function r(r,n,t,a,c){for(var o=0;o<e.length;o++){if(null==(0,e[o])(r,n,t,a,c,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"))return null}var i=ReactPropTypeLocationNames[a];return new Error("Invalid "+i+" `"+c+"` supplied to `"+t+"`.")}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function e(e,r,n,t,a){if(!isNode(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to `"+n+"`, expected a ReactNode.")}return null}return createChainableTypeChecker(e)}function createShapeTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` supplied to `"+t+"`, expected `object`.")}for(var p in e){var l=e[p];if(l){var y=l(o,p,t,a,c+"."+p,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED");if(y)return y}}return null}return createChainableTypeChecker(r)}function isNode(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(isNode);if(null===e||ReactElement.isValidElement(e))return!0;var r=getIteratorFn(e);if(!r)return!1;var n,t=r.call(e);if(r!==e.entries){for(;!(n=t.next()).done;)if(!isNode(n.value))return!1}else for(;!(n=t.next()).done;){var a=n.value;if(a&&!isNode(a[1]))return!1}return!0;default:return!1}}function getPropType(e){var r=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":r}function getPreciseType(e){var r=getPropType(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function getClassName(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var ReactElement=require("./ReactElement"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),emptyFunction=require("fbjs/lib/emptyFunction"),getIteratorFn=require("./getIteratorFn"),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes;

},{"./ReactElement":99,"./ReactPropTypeLocationNames":119,"./getIteratorFn":162,"fbjs/lib/emptyFunction":12}],122:[function(require,module,exports){
"use strict";function ReactReconcileTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!e&&ReactDOMFeatureFlags.useCreateElement}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactInputSelection=require("./ReactInputSelection"),Transaction=require("./Transaction"),assign=require("./Object.assign"),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var e=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),e},close:function(e){ReactBrowserEventEmitter.setEnabled(e)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction;

},{"./CallbackQueue":54,"./Object.assign":71,"./PooledClass":72,"./ReactBrowserEventEmitter":75,"./ReactDOMFeatureFlags":88,"./ReactInputSelection":107,"./Transaction":147}],123:[function(require,module,exports){
"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=require("./ReactRef"),ReactReconciler={mountComponent:function(e,t,n,c){var r=e.mountComponent(t,n,c);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e),r},unmountComponent:function(e){ReactRef.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,c){var r=e._currentElement;if(t!==r||c!==e._context){var a=ReactRef.shouldUpdateRefs(r,t);a&&ReactRef.detachRefs(e,r),e.receiveComponent(t,n,c),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};module.exports=ReactReconciler;

},{"./ReactRef":124}],124:[function(require,module,exports){
"use strict";function attachRef(e,n,t){"function"==typeof e?e(n.getPublicInstance()):ReactOwner.addComponentAsRefTo(n,e,t)}function detachRef(e,n,t){"function"==typeof e?e(null):ReactOwner.removeComponentAsRefFrom(n,e,t)}var ReactOwner=require("./ReactOwner"),ReactRef={};ReactRef.attachRefs=function(e,n){if(null!==n&&!1!==n){var t=n.ref;null!=t&&attachRef(t,e,n._owner)}},ReactRef.shouldUpdateRefs=function(e,n){var t=null===e||!1===e,f=null===n||!1===n;return t||f||n._owner!==e._owner||n.ref!==e.ref},ReactRef.detachRefs=function(e,n){if(null!==n&&!1!==n){var t=n.ref;null!=t&&detachRef(t,e,n._owner)}},module.exports=ReactRef;

},{"./ReactOwner":117}],125:[function(require,module,exports){
"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(e){ReactRootIndex.createReactRootIndex=e}},ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex;

},{}],126:[function(require,module,exports){
"use strict";var ReactServerBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t){}};module.exports=ReactServerBatchingStrategy;

},{}],127:[function(require,module,exports){
"use strict";function renderToString(e){ReactElement.isValidElement(e)||invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!1),t.perform(function(){var n=instantiateReactComponent(e,null),r=n.mountComponent(a,t,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(r)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}function renderToStaticMarkup(e){ReactElement.isValidElement(e)||invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!0),t.perform(function(){return instantiateReactComponent(e,null).mountComponent(a,t,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactServerBatchingStrategy=require("./ReactServerBatchingStrategy"),ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction"),ReactUpdates=require("./ReactUpdates"),emptyObject=require("fbjs/lib/emptyObject"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant");module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup};

},{"./ReactDefaultBatchingStrategy":97,"./ReactElement":99,"./ReactInstanceHandles":108,"./ReactMarkupChecksum":111,"./ReactServerBatchingStrategy":126,"./ReactServerRenderingTransaction":128,"./ReactUpdates":130,"./instantiateReactComponent":165,"fbjs/lib/emptyObject":13,"fbjs/lib/invariant":20}],128:[function(require,module,exports){
"use strict";function ReactServerRenderingTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!1}var PooledClass=require("./PooledClass"),CallbackQueue=require("./CallbackQueue"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction},TRANSACTION_WRAPPERS=[ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction;

},{"./CallbackQueue":54,"./Object.assign":71,"./PooledClass":72,"./Transaction":147,"fbjs/lib/emptyFunction":12}],129:[function(require,module,exports){
"use strict";function enqueueUpdate(e){ReactUpdates.enqueueUpdate(e)}function getInternalInstanceReadyForUpdate(e,n){var t=ReactInstanceMap.get(e);return t||null}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactUpdateQueue={isMounted:function(e){var n=ReactInstanceMap.get(e);return!!n&&!!n._renderedComponent},enqueueCallback:function(e,n){"function"!=typeof n&&invariant(!1);var t=getInternalInstanceReadyForUpdate(e);if(!t)return null;t._pendingCallbacks?t._pendingCallbacks.push(n):t._pendingCallbacks=[n],enqueueUpdate(t)},enqueueCallbackInternal:function(e,n){"function"!=typeof n&&invariant(!1),e._pendingCallbacks?e._pendingCallbacks.push(n):e._pendingCallbacks=[n],enqueueUpdate(e)},enqueueForceUpdate:function(e){var n=getInternalInstanceReadyForUpdate(e,"forceUpdate");n&&(n._pendingForceUpdate=!0,enqueueUpdate(n))},enqueueReplaceState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceState");t&&(t._pendingStateQueue=[n],t._pendingReplaceState=!0,enqueueUpdate(t))},enqueueSetState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setState");if(t){(t._pendingStateQueue||(t._pendingStateQueue=[])).push(n),enqueueUpdate(t)}},enqueueSetProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setProps");t&&ReactUpdateQueue.enqueueSetPropsInternal(t,n)},enqueueSetPropsInternal:function(e,n){var t=e._topLevelWrapper;t||invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props,u=assign({},r.props,n);t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,u)),enqueueUpdate(t)},enqueueReplaceProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceProps");t&&ReactUpdateQueue.enqueueReplacePropsInternal(t,n)},enqueueReplacePropsInternal:function(e,n){var t=e._topLevelWrapper;t||invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props;t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,n)),enqueueUpdate(t)},enqueueElementInternal:function(e,n){e._pendingElement=n,enqueueUpdate(e)}};module.exports=ReactUpdateQueue;

},{"./Object.assign":71,"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactInstanceMap":109,"./ReactUpdates":130,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],130:[function(require,module,exports){
"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy||invariant(!1)}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!1)}function batchedUpdates(e,t,a,n,i,c){ensureInjected(),batchingStrategy.batchedUpdates(e,t,a,n,i,c)}function mountOrderComparator(e,t){return e._mountOrder-t._mountOrder}function runBatchedUpdates(e){var t=e.dirtyComponentsLength;t!==dirtyComponents.length&&invariant(!1),dirtyComponents.sort(mountOrderComparator);for(var a=0;a<t;a++){var n=dirtyComponents[a],i=n._pendingCallbacks;if(n._pendingCallbacks=null,ReactReconciler.performUpdateIfNecessary(n,e.reconcileTransaction),i)for(var c=0;c<i.length;c++)e.callbackQueue.enqueue(i[c],n.getPublicInstance())}}function enqueueUpdate(e){if(ensureInjected(),!batchingStrategy.isBatchingUpdates)return void batchingStrategy.batchedUpdates(enqueueUpdate,e);dirtyComponents.push(e)}function asap(e,t){batchingStrategy.isBatchingUpdates||invariant(!1),asapCallbackQueue.enqueue(e,t),asapEnqueued=!0}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),Transaction=require("./Transaction"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),dirtyComponents=[],asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var e=ReactUpdatesFlushTransaction.getPooled();e.perform(runBatchedUpdates,null,e),ReactUpdatesFlushTransaction.release(e)}if(asapEnqueued){asapEnqueued=!1;var t=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),t.notifyAll(),CallbackQueue.release(t)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);var ReactUpdatesInjection={injectReconcileTransaction:function(e){e||invariant(!1),ReactUpdates.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e||invariant(!1),"function"!=typeof e.batchedUpdates&&invariant(!1),"boolean"!=typeof e.isBatchingUpdates&&invariant(!1),batchingStrategy=e}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates;

},{"./CallbackQueue":54,"./Object.assign":71,"./PooledClass":72,"./ReactPerf":118,"./ReactReconciler":123,"./Transaction":147,"fbjs/lib/invariant":20}],131:[function(require,module,exports){
"use strict";module.exports="0.14.9";

},{}],132:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,xlinkActuate:MUST_USE_ATTRIBUTE,xlinkArcrole:MUST_USE_ATTRIBUTE,xlinkHref:MUST_USE_ATTRIBUTE,xlinkRole:MUST_USE_ATTRIBUTE,xlinkShow:MUST_USE_ATTRIBUTE,xlinkTitle:MUST_USE_ATTRIBUTE,xlinkType:MUST_USE_ATTRIBUTE,xmlBase:MUST_USE_ATTRIBUTE,xmlLang:MUST_USE_ATTRIBUTE,xmlSpace:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};module.exports=SVGDOMPropertyConfig;

},{"./DOMProperty":58}],133:[function(require,module,exports){
"use strict";function getSelection(e){if("selectionStart"in e&&ReactInputSelection.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function constructSelectEvent(e,t){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var n=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,n)){lastSelection=n;var o=SyntheticEvent.getPooled(eventTypes.select,activeElementID,e,t);return o.type="select",o.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(o),o}return null}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactInputSelection=require("./ReactInputSelection"),SyntheticEvent=require("./SyntheticEvent"),getActiveElement=require("fbjs/lib/getActiveElement"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),shallowEqual=require("fbjs/lib/shallowEqual"),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,l){if(!hasListener)return null;switch(e){case topLevelTypes.topFocus:(isTextInputElement(t)||"true"===t.contentEditable)&&(activeElement=t,activeElementID=n,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementID=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(o,l);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(o,l)}return null},didPutListener:function(e,t,n){t===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./ReactInputSelection":107,"./SyntheticEvent":139,"./isTextInputElement":167,"fbjs/lib/ExecutionEnvironment":6,"fbjs/lib/getActiveElement":15,"fbjs/lib/keyOf":24,"fbjs/lib/shallowEqual":27}],134:[function(require,module,exports){
"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53),ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex;

},{}],135:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventListener=require("fbjs/lib/EventListener"),EventPropagators=require("./EventPropagators"),ReactMount=require("./ReactMount"),SyntheticClipboardEvent=require("./SyntheticClipboardEvent"),SyntheticEvent=require("./SyntheticEvent"),SyntheticFocusEvent=require("./SyntheticFocusEvent"),SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),SyntheticDragEvent=require("./SyntheticDragEvent"),SyntheticTouchEvent=require("./SyntheticTouchEvent"),SyntheticUIEvent=require("./SyntheticUIEvent"),SyntheticWheelEvent=require("./SyntheticWheelEvent"),emptyFunction=require("fbjs/lib/emptyFunction"),getEventCharCode=require("./getEventCharCode"),invariant=require("fbjs/lib/invariant"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,a,o,p){var s=topLevelEventsToDispatchConfig[e];if(!s)return null;var n;switch(e){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:n=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(o))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:n=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:n=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===o.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:n=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:n=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:n=SyntheticTouchEvent;break;case topLevelTypes.topScroll:n=SyntheticUIEvent;break;case topLevelTypes.topWheel:n=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:n=SyntheticClipboardEvent}n||invariant(!1);var r=n.getPooled(s,a,o,p);return EventPropagators.accumulateTwoPhaseDispatches(r),r},didPutListener:function(e,t,a){if(t===ON_CLICK_KEY){var o=ReactMount.getNode(e);onClickListeners[e]||(onClickListeners[e]=EventListener.listen(o,"click",emptyFunction))}},willDeleteListener:function(e,t){t===ON_CLICK_KEY&&(onClickListeners[e].remove(),delete onClickListeners[e])}};module.exports=SimpleEventPlugin;

},{"./EventConstants":63,"./EventPropagators":67,"./ReactMount":112,"./SyntheticClipboardEvent":136,"./SyntheticDragEvent":138,"./SyntheticEvent":139,"./SyntheticFocusEvent":140,"./SyntheticKeyboardEvent":142,"./SyntheticMouseEvent":143,"./SyntheticTouchEvent":144,"./SyntheticUIEvent":145,"./SyntheticWheelEvent":146,"./getEventCharCode":158,"fbjs/lib/EventListener":5,"fbjs/lib/emptyFunction":12,"fbjs/lib/invariant":20,"fbjs/lib/keyOf":24}],136:[function(require,module,exports){
"use strict";function SyntheticClipboardEvent(t,e,n,a){SyntheticEvent.call(this,t,e,n,a)}var SyntheticEvent=require("./SyntheticEvent"),ClipboardEventInterface={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent;

},{"./SyntheticEvent":139}],137:[function(require,module,exports){
"use strict";function SyntheticCompositionEvent(t,n,e,i){SyntheticEvent.call(this,t,n,e,i)}var SyntheticEvent=require("./SyntheticEvent"),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent;

},{"./SyntheticEvent":139}],138:[function(require,module,exports){
"use strict";function SyntheticDragEvent(t,e,n,a){SyntheticMouseEvent.call(this,t,e,n,a)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent;

},{"./SyntheticMouseEvent":143}],139:[function(require,module,exports){
"use strict";function SyntheticEvent(t,e,n,r){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var a=this.constructor.Interface;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i?this[s]=i(n):"target"===s?this.target=r:this[s]=n[s]}var o=null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue;this.isDefaultPrevented=o?emptyFunction.thatReturnsTrue:emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);assign(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=assign({},n.Interface,e),t.augmentClass=n.augmentClass,PooledClass.addPoolingTo(t,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent;

},{"./Object.assign":71,"./PooledClass":72,"fbjs/lib/emptyFunction":12,"fbjs/lib/warning":29}],140:[function(require,module,exports){
"use strict";function SyntheticFocusEvent(t,e,n,c){SyntheticUIEvent.call(this,t,e,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent;

},{"./SyntheticUIEvent":145}],141:[function(require,module,exports){
"use strict";function SyntheticInputEvent(t,n,e,c){SyntheticEvent.call(this,t,n,e,c)}var SyntheticEvent=require("./SyntheticEvent"),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent;

},{"./SyntheticEvent":139}],142:[function(require,module,exports){
"use strict";function SyntheticKeyboardEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventCharCode=require("./getEventCharCode"),getEventKey=require("./getEventKey"),getEventModifierState=require("./getEventModifierState"),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(e){return"keypress"===e.type?getEventCharCode(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?getEventCharCode(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent;

},{"./SyntheticUIEvent":145,"./getEventCharCode":158,"./getEventKey":159,"./getEventModifierState":160}],143:[function(require,module,exports){
"use strict";function SyntheticMouseEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),ViewportMetrics=require("./ViewportMetrics"),getEventModifierState=require("./getEventModifierState"),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+ViewportMetrics.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent;

},{"./SyntheticUIEvent":145,"./ViewportMetrics":148,"./getEventModifierState":160}],144:[function(require,module,exports){
"use strict";function SyntheticTouchEvent(e,t,n,c){SyntheticUIEvent.call(this,e,t,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventModifierState=require("./getEventModifierState"),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent;

},{"./SyntheticUIEvent":145,"./getEventModifierState":160}],145:[function(require,module,exports){
"use strict";function SyntheticUIEvent(e,t,n,i){SyntheticEvent.call(this,e,t,n,i)}var SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),UIEventInterface={view:function(e){if(e.view)return e.view;var t=getEventTarget(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent;

},{"./SyntheticEvent":139,"./getEventTarget":161}],146:[function(require,module,exports){
"use strict";function SyntheticWheelEvent(e,t,n,l){SyntheticMouseEvent.call(this,e,t,n,l)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),WheelEventInterface={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent;

},{"./SyntheticMouseEvent":143}],147:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(i,t,a,n,r,s,l,e){this.isInTransaction()&&invariant(!1);var c,o;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),o=i.call(t,a,n,r,s,l,e),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(i){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return o},initializeAll:function(i){for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n=t[a];try{this.wrapperInitData[a]=Transaction.OBSERVED_ERROR,this.wrapperInitData[a]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[a]===Transaction.OBSERVED_ERROR)try{this.initializeAll(a+1)}catch(i){}}}},closeAll:function(i){this.isInTransaction()||invariant(!1);for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n,r=t[a],s=this.wrapperInitData[a];try{n=!0,s!==Transaction.OBSERVED_ERROR&&r.close&&r.close.call(this,s),n=!1}finally{if(n)try{this.closeAll(a+1)}catch(i){}}}this.wrapperInitData.length=0}},Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction;

},{"fbjs/lib/invariant":20}],148:[function(require,module,exports){
"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(r){ViewportMetrics.currentScrollLeft=r.x,ViewportMetrics.currentScrollTop=r.y}};module.exports=ViewportMetrics;

},{}],149:[function(require,module,exports){
"use strict";function accumulateInto(r,a){if(null==a&&invariant(!1),null==r)return a;var n=Array.isArray(r),t=Array.isArray(a);return n&&t?(r.push.apply(r,a),r):n?(r.push(a),r):t?[r].concat(a):[r,a]}var invariant=require("fbjs/lib/invariant");module.exports=accumulateInto;

},{"fbjs/lib/invariant":20}],150:[function(require,module,exports){
"use strict";function adler32(r){for(var e=1,t=0,o=0,a=r.length,d=-4&a;o<d;){for(;o<Math.min(o+4096,d);o+=4)t+=(e+=r.charCodeAt(o))+(e+=r.charCodeAt(o+1))+(e+=r.charCodeAt(o+2))+(e+=r.charCodeAt(o+3));e%=MOD,t%=MOD}for(;o<a;o++)t+=e+=r.charCodeAt(o);return e%=MOD,t%=MOD,e|t<<16}var MOD=65521;module.exports=adler32;

},{}],151:[function(require,module,exports){
"use strict";var canDefineProperty=!1;module.exports=canDefineProperty;

},{}],152:[function(require,module,exports){
"use strict";function dangerousStyleValue(e,r){return null==r||"boolean"==typeof r||""===r?"":isNaN(r)||0===r||isUnitlessNumber.hasOwnProperty(e)&&isUnitlessNumber[e]?""+r:("string"==typeof r&&(r=r.trim()),r+"px")}var CSSProperty=require("./CSSProperty"),isUnitlessNumber=CSSProperty.isUnitlessNumber;module.exports=dangerousStyleValue;

},{"./CSSProperty":52}],153:[function(require,module,exports){
"use strict";function deprecated(e,r,i,n,s){return s}var assign=require("./Object.assign"),warning=require("fbjs/lib/warning");module.exports=deprecated;

},{"./Object.assign":71,"fbjs/lib/warning":29}],154:[function(require,module,exports){
"use strict";function escaper(e){return ESCAPE_LOOKUP[e]}function escapeTextContentForBrowser(e){return(""+e).replace(ESCAPE_REGEX,escaper)}var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;module.exports=escapeTextContentForBrowser;

},{}],155:[function(require,module,exports){
"use strict";function findDOMNode(e){return null==e?null:1===e.nodeType?e:ReactInstanceMap.has(e)?ReactMount.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render&&invariant(!1),void invariant(!1))}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMount=require("./ReactMount"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");module.exports=findDOMNode;

},{"./ReactCurrentOwner":83,"./ReactInstanceMap":109,"./ReactMount":112,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],156:[function(require,module,exports){
"use strict";function flattenSingleChildIntoContext(e,n,r){var l=e,t=void 0===l[r];t&&null!=n&&(l[r]=n)}function flattenChildren(e){if(null==e)return e;var n={};return traverseAllChildren(e,flattenSingleChildIntoContext,n),n}var traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning");module.exports=flattenChildren;

},{"./traverseAllChildren":174,"fbjs/lib/warning":29}],157:[function(require,module,exports){
"use strict";var forEachAccumulated=function(c,r,a){Array.isArray(c)?c.forEach(r,a):c&&r.call(a,c)};module.exports=forEachAccumulated;

},{}],158:[function(require,module,exports){
"use strict";function getEventCharCode(e){var r,t=e.keyCode;return"charCode"in e?0===(r=e.charCode)&&13===t&&(r=13):r=t,r>=32||13===r?r:0}module.exports=getEventCharCode;

},{}],159:[function(require,module,exports){
"use strict";function getEventKey(e){if(e.key){var r=normalizeKey[e.key]||e.key;if("Unidentified"!==r)return r}if("keypress"===e.type){var t=getEventCharCode(e);return 13===t?"Enter":String.fromCharCode(t)}return"keydown"===e.type||"keyup"===e.type?translateToKey[e.keyCode]||"Unidentified":""}var getEventCharCode=require("./getEventCharCode"),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey;

},{"./getEventCharCode":158}],160:[function(require,module,exports){
"use strict";function modifierStateGetter(t){var e=this,r=e.nativeEvent;if(r.getModifierState)return r.getModifierState(t);var i=modifierKeyToProp[t];return!!i&&!!r[i]}function getEventModifierState(t){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState;

},{}],161:[function(require,module,exports){
"use strict";function getEventTarget(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}module.exports=getEventTarget;

},{}],162:[function(require,module,exports){
"use strict";function getIteratorFn(t){var r=t&&(ITERATOR_SYMBOL&&t[ITERATOR_SYMBOL]||t[FAUX_ITERATOR_SYMBOL]);if("function"==typeof r)return r}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn;

},{}],163:[function(require,module,exports){
"use strict";function getLeafNode(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function getSiblingNode(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function getNodeForCharacterOffset(e,t){for(var o=getLeafNode(e),n=0,r=0;o;){if(3===o.nodeType){if(r=n+o.textContent.length,n<=t&&r>=t)return{node:o,offset:t-n};n=r}o=getLeafNode(getSiblingNode(o))}}module.exports=getNodeForCharacterOffset;

},{}],164:[function(require,module,exports){
"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),contentKey=null;module.exports=getTextContentAccessor;

},{"fbjs/lib/ExecutionEnvironment":6}],165:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function isInternalComponentType(e){return"function"==typeof e&&void 0!==e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function instantiateReactComponent(e){var t;if(null===e||!1===e)t=new ReactEmptyComponent(instantiateReactComponent);else if("object"==typeof e){var n=e;(!n||"function"!=typeof n.type&&"string"!=typeof n.type)&&invariant(!1),t="string"==typeof n.type?ReactNativeComponent.createInternalComponent(n):isInternalComponentType(n.type)?new n.type(n):new ReactCompositeComponentWrapper}else"string"==typeof e||"number"==typeof e?t=ReactNativeComponent.createInstanceForText(e):invariant(!1);return t.construct(e),t._mountIndex=0,t._mountImage=null,t}var ReactCompositeComponent=require("./ReactCompositeComponent"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactNativeComponent=require("./ReactNativeComponent"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactCompositeComponentWrapper=function(){};assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent}),module.exports=instantiateReactComponent;

},{"./Object.assign":71,"./ReactCompositeComponent":82,"./ReactEmptyComponent":101,"./ReactNativeComponent":115,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],166:[function(require,module,exports){
"use strict";function isEventSupported(e,t){if(!ExecutionEnvironment.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,u=n in document;if(!u){var i=document.createElement("div");i.setAttribute(n,"return;"),u="function"==typeof i[n]}return!u&&useHasFeature&&"wheel"===e&&(u=document.implementation.hasFeature("Events.wheel","3.0")),u}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),module.exports=isEventSupported;

},{"fbjs/lib/ExecutionEnvironment":6}],167:[function(require,module,exports){
"use strict";function isTextInputElement(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&supportedInputTypes[e.type]||"textarea"===t)}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement;

},{}],168:[function(require,module,exports){
"use strict";function onlyChild(e){return ReactElement.isValidElement(e)||invariant(!1),e}var ReactElement=require("./ReactElement"),invariant=require("fbjs/lib/invariant");module.exports=onlyChild;

},{"./ReactElement":99,"fbjs/lib/invariant":20}],169:[function(require,module,exports){
"use strict";function quoteAttributeValueForBrowser(e){return'"'+escapeTextContentForBrowser(e)+'"'}var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");module.exports=quoteAttributeValueForBrowser;

},{"./escapeTextContentForBrowser":154}],170:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer;

},{"./ReactMount":112}],171:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,setInnerHTML=function(e,n){e.innerHTML=n};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(setInnerHTML=function(e,n){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=n})}),ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(e,n){if(e.parentNode&&e.parentNode.replaceChild(e,e),WHITESPACE_TEST.test(n)||"<"===n[0]&&NONVISIBLE_TEST.test(n)){e.innerHTML=String.fromCharCode(65279)+n;var t=e.firstChild;1===t.data.length?e.removeChild(t):t.deleteData(0,1)}else e.innerHTML=n})}module.exports=setInnerHTML;

},{"fbjs/lib/ExecutionEnvironment":6}],172:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setInnerHTML=require("./setInnerHTML"),setTextContent=function(e,t){e.textContent=t};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(e,t){setInnerHTML(e,escapeTextContentForBrowser(t))})),module.exports=setTextContent;

},{"./escapeTextContentForBrowser":154,"./setInnerHTML":171,"fbjs/lib/ExecutionEnvironment":6}],173:[function(require,module,exports){
"use strict";function shouldUpdateReactComponent(e,t){var n=null===e||!1===e,o=null===t||!1===t;if(n||o)return n===o;var r=typeof e,u=typeof t;return"string"===r||"number"===r?"string"===u||"number"===u:"object"===u&&e.type===t.type&&e.key===t.key}module.exports=shouldUpdateReactComponent;

},{}],174:[function(require,module,exports){
"use strict";function userProvidedKeyEscaper(e){return userProvidedKeyEscaperLookup[e]}function getComponentKey(e,r){return e&&null!=e.key?wrapUserProvidedKey(e.key):r.toString(36)}function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(e){return"$"+escapeUserProvidedKey(e)}function traverseAllChildrenImpl(e,r,n,t){var a=typeof e;if("undefined"!==a&&"boolean"!==a||(e=null),null===e||"string"===a||"number"===a||ReactElement.isValidElement(e))return n(t,e,""===r?SEPARATOR+getComponentKey(e,0):r),1;var i,l,o=0,s=""===r?SEPARATOR:r+SUBSEPARATOR;if(Array.isArray(e))for(var d=0;d<e.length;d++)i=e[d],l=s+getComponentKey(i,d),o+=traverseAllChildrenImpl(i,l,n,t);else{var u=getIteratorFn(e);if(u){var v,c=u.call(e);if(u!==e.entries)for(var p=0;!(v=c.next()).done;)i=v.value,l=s+getComponentKey(i,p++),o+=traverseAllChildrenImpl(i,l,n,t);else for(;!(v=c.next()).done;){var A=v.value;A&&(i=A[1],l=s+wrapUserProvidedKey(A[0])+SUBSEPARATOR+getComponentKey(i,0),o+=traverseAllChildrenImpl(i,l,n,t))}}else if("object"===a){String(e);invariant(!1)}}return o}function traverseAllChildren(e,r,n){return null==e?0:traverseAllChildrenImpl(e,"",r,n)}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),SEPARATOR=ReactInstanceHandles.SEPARATOR,SUBSEPARATOR=":",userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"},userProvidedKeyEscapeRegex=/[=.:]/g,didWarnAboutMaps=!1;module.exports=traverseAllChildren;

},{"./ReactCurrentOwner":83,"./ReactElement":99,"./ReactInstanceHandles":108,"./getIteratorFn":162,"fbjs/lib/invariant":20,"fbjs/lib/warning":29}],175:[function(require,module,exports){
"use strict";var assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),validateDOMNesting=emptyFunction,specialTags,inScopeTags,buttonScopeTags,impliedEndTags,emptyAncestorInfo,updatedAncestorInfo,isTagValidWithParent,findInvalidAncestorForTag,findOwnerStack,didWarn;module.exports=validateDOMNesting;

},{"./Object.assign":71,"fbjs/lib/emptyFunction":12,"fbjs/lib/warning":29}],176:[function(require,module,exports){
"use strict";module.exports=require("./lib/React");

},{"./lib/React":73}],177:[function(require,module,exports){
function shallow(r,n,t){var a=Array.isArray(r);if(a!==Array.isArray(n))return!1;var e=typeof r;return e===typeof n&&(flat(e)?t?t(r,n):r===n:a?shallowArray(r,n,t):shallowObject(r,n,t))}function shallowArray(r,n,t){var a=r.length;if(a!==n.length)return!1;if(t){for(var e=0;e<a;e++)if(!t(r[e],n[e]))return!1}else for(var e=0;e<a;e++)if(r[e]!==n[e])return!1;return!0}function shallowObject(r,n,t){var a=0,e=0;if(t)for(var o in r){if(r.hasOwnProperty(o)&&!t(r[o],n[o]))return!1;a++}else for(var o in r){if(r.hasOwnProperty(o)&&r[o]!==n[o])return!1;a++}for(var o in n)n.hasOwnProperty(o)&&e++;return a===e}function flat(r){return"function"!==r&&"object"!==r}module.exports=shallow;

},{}],178:[function(require,module,exports){
(function (global){
!function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},r=n._,t=Array.prototype,e=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,i=t.push,o=t.slice,a=e.toString,c=e.hasOwnProperty,l=Array.isArray,f=Object.keys,s=Object.create,p=function(){},v=function(n){return n instanceof v?n:this instanceof v?void(this._wrapped=n):new v(n)};"undefined"==typeof exports||exports.nodeType?n._=v:("undefined"!=typeof module&&!module.nodeType&&module.exports&&(exports=module.exports=v),exports._=v),v.VERSION="1.9.1";var h,y=function(n,r,t){if(void 0===r)return n;switch(null==t?3:t){case 1:return function(t){return n.call(r,t)};case 3:return function(t,e,u){return n.call(r,t,e,u)};case 4:return function(t,e,u,i){return n.call(r,t,e,u,i)}}return function(){return n.apply(r,arguments)}},d=function(n,r,t){return v.iteratee!==h?v.iteratee(n,r):null==n?v.identity:v.isFunction(n)?y(n,r,t):v.isObject(n)&&!v.isArray(n)?v.matcher(n):v.property(n)};v.iteratee=h=function(n,r){return d(n,r,1/0)};var g=function(n,r){return r=null==r?n.length-1:+r,function(){for(var t=Math.max(arguments.length-r,0),e=Array(t),u=0;u<t;u++)e[u]=arguments[u+r];switch(r){case 0:return n.call(this,e);case 1:return n.call(this,arguments[0],e);case 2:return n.call(this,arguments[0],arguments[1],e)}var i=Array(r+1);for(u=0;u<r;u++)i[u]=arguments[u];return i[r]=e,n.apply(this,i)}},m=function(n){if(!v.isObject(n))return{};if(s)return s(n);p.prototype=n;var r=new p;return p.prototype=null,r},b=function(n){return function(r){return null==r?void 0:r[n]}},j=function(n,r){return null!=n&&c.call(n,r)},x=function(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0},_=Math.pow(2,53)-1,A=b("length"),w=function(n){var r=A(n);return"number"==typeof r&&r>=0&&r<=_};v.each=v.forEach=function(n,r,t){r=y(r,t);var e,u;if(w(n))for(e=0,u=n.length;e<u;e++)r(n[e],e,n);else{var i=v.keys(n);for(e=0,u=i.length;e<u;e++)r(n[i[e]],i[e],n)}return n},v.map=v.collect=function(n,r,t){r=d(r,t);for(var e=!w(n)&&v.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=r(n[a],a,n)}return i};var O=function(n){var r=function(r,t,e,u){var i=!w(r)&&v.keys(r),o=(i||r).length,a=n>0?0:o-1;for(u||(e=r[i?i[a]:a],a+=n);a>=0&&a<o;a+=n){var c=i?i[a]:a;e=t(e,r[c],c,r)}return e};return function(n,t,e,u){var i=arguments.length>=3;return r(n,y(t,u,4),e,i)}};v.reduce=v.foldl=v.inject=O(1),v.reduceRight=v.foldr=O(-1),v.find=v.detect=function(n,r,t){var e=w(n)?v.findIndex:v.findKey,u=e(n,r,t);if(void 0!==u&&-1!==u)return n[u]},v.filter=v.select=function(n,r,t){var e=[];return r=d(r,t),v.each(n,function(n,t,u){r(n,t,u)&&e.push(n)}),e},v.reject=function(n,r,t){return v.filter(n,v.negate(d(r)),t)},v.every=v.all=function(n,r,t){r=d(r,t);for(var e=!w(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!r(n[o],o,n))return!1}return!0},v.some=v.any=function(n,r,t){r=d(r,t);for(var e=!w(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(r(n[o],o,n))return!0}return!1},v.contains=v.includes=v.include=function(n,r,t,e){return w(n)||(n=v.values(n)),("number"!=typeof t||e)&&(t=0),v.indexOf(n,r,t)>=0},v.invoke=g(function(n,r,t){var e,u;return v.isFunction(r)?u=r:v.isArray(r)&&(e=r.slice(0,-1),r=r[r.length-1]),v.map(n,function(n){var i=u;if(!i){if(e&&e.length&&(n=x(n,e)),null==n)return;i=n[r]}return null==i?i:i.apply(n,t)})}),v.pluck=function(n,r){return v.map(n,v.property(r))},v.where=function(n,r){return v.filter(n,v.matcher(r))},v.findWhere=function(n,r){return v.find(n,v.matcher(r))},v.max=function(n,r,t){var e,u,i=-1/0,o=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n){n=w(n)?n:v.values(n);for(var a=0,c=n.length;a<c;a++)null!=(e=n[a])&&e>i&&(i=e)}else r=d(r,t),v.each(n,function(n,t,e){((u=r(n,t,e))>o||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},v.min=function(n,r,t){var e,u,i=1/0,o=1/0;if(null==r||"number"==typeof r&&"object"!=typeof n[0]&&null!=n){n=w(n)?n:v.values(n);for(var a=0,c=n.length;a<c;a++)null!=(e=n[a])&&e<i&&(i=e)}else r=d(r,t),v.each(n,function(n,t,e){((u=r(n,t,e))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},v.shuffle=function(n){return v.sample(n,1/0)},v.sample=function(n,r,t){if(null==r||t)return w(n)||(n=v.values(n)),n[v.random(n.length-1)];var e=w(n)?v.clone(n):v.values(n),u=A(e);r=Math.max(Math.min(r,u),0);for(var i=u-1,o=0;o<r;o++){var a=v.random(o,i),c=e[o];e[o]=e[a],e[a]=c}return e.slice(0,r)},v.sortBy=function(n,r,t){var e=0;return r=d(r,t),v.pluck(v.map(n,function(n,t,u){return{value:n,index:e++,criteria:r(n,t,u)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(t>e||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")};var k=function(n,r){return function(t,e,u){var i=r?[[],[]]:{};return e=d(e,u),v.each(t,function(r,u){var o=e(r,u,t);n(i,r,o)}),i}};v.groupBy=k(function(n,r,t){j(n,t)?n[t].push(r):n[t]=[r]}),v.indexBy=k(function(n,r,t){n[t]=r}),v.countBy=k(function(n,r,t){j(n,t)?n[t]++:n[t]=1});var S=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(n){return n?v.isArray(n)?o.call(n):v.isString(n)?n.match(S):w(n)?v.map(n,v.identity):v.values(n):[]},v.size=function(n){return null==n?0:w(n)?n.length:v.keys(n).length},v.partition=k(function(n,r,t){n[t?0:1].push(r)},!0),v.first=v.head=v.take=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[0]:v.initial(n,n.length-r)},v.initial=function(n,r,t){return o.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))},v.last=function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[n.length-1]:v.rest(n,Math.max(0,n.length-r))},v.rest=v.tail=v.drop=function(n,r,t){return o.call(n,null==r||t?1:r)},v.compact=function(n){return v.filter(n,Boolean)};var M=function(n,r,t,e){e=e||[];for(var u=e.length,i=0,o=A(n);i<o;i++){var a=n[i];if(w(a)&&(v.isArray(a)||v.isArguments(a)))if(r)for(var c=0,l=a.length;c<l;)e[u++]=a[c++];else M(a,r,t,e),u=e.length;else t||(e[u++]=a)}return e};v.flatten=function(n,r){return M(n,r,!1)},v.without=g(function(n,r){return v.difference(n,r)}),v.uniq=v.unique=function(n,r,t,e){v.isBoolean(r)||(e=t,t=r,r=!1),null!=t&&(t=d(t,e));for(var u=[],i=[],o=0,a=A(n);o<a;o++){var c=n[o],l=t?t(c,o,n):c;r&&!t?(o&&i===l||u.push(c),i=l):t?v.contains(i,l)||(i.push(l),u.push(c)):v.contains(u,c)||u.push(c)}return u},v.union=g(function(n){return v.uniq(M(n,!0,!0))}),v.intersection=function(n){for(var r=[],t=arguments.length,e=0,u=A(n);e<u;e++){var i=n[e];if(!v.contains(r,i)){var o;for(o=1;o<t&&v.contains(arguments[o],i);o++);o===t&&r.push(i)}}return r},v.difference=g(function(n,r){return r=M(r,!0,!0),v.filter(n,function(n){return!v.contains(r,n)})}),v.unzip=function(n){for(var r=n&&v.max(n,A).length||0,t=Array(r),e=0;e<r;e++)t[e]=v.pluck(n,e);return t},v.zip=g(v.unzip),v.object=function(n,r){for(var t={},e=0,u=A(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t};var F=function(n){return function(r,t,e){t=d(t,e);for(var u=A(r),i=n>0?0:u-1;i>=0&&i<u;i+=n)if(t(r[i],i,r))return i;return-1}};v.findIndex=F(1),v.findLastIndex=F(-1),v.sortedIndex=function(n,r,t,e){t=d(t,e,1);for(var u=t(r),i=0,o=A(n);i<o;){var a=Math.floor((i+o)/2);t(n[a])<u?i=a+1:o=a}return i};var E=function(n,r,t){return function(e,u,i){var a=0,c=A(e);if("number"==typeof i)n>0?a=i>=0?i:Math.max(i+c,a):c=i>=0?Math.min(i+1,c):i+c+1;else if(t&&i&&c)return i=t(e,u),e[i]===u?i:-1;if(u!==u)return i=r(o.call(e,a,c),v.isNaN),i>=0?i+a:-1;for(i=n>0?a:c-1;i>=0&&i<c;i+=n)if(e[i]===u)return i;return-1}};v.indexOf=E(1,v.findIndex,v.sortedIndex),v.lastIndexOf=E(-1,v.findLastIndex),v.range=function(n,r,t){null==r&&(r=n||0,n=0),t||(t=r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),i=0;i<e;i++,n+=t)u[i]=n;return u},v.chunk=function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(o.call(n,e,e+=r));return t};var N=function(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var i=m(n.prototype),o=n.apply(i,u);return v.isObject(o)?o:i};v.bind=g(function(n,r,t){if(!v.isFunction(n))throw new TypeError("Bind must be called on a function");var e=g(function(u){return N(n,e,r,this,t.concat(u))});return e}),v.partial=g(function(n,r){var t=v.partial.placeholder,e=function(){for(var u=0,i=r.length,o=Array(i),a=0;a<i;a++)o[a]=r[a]===t?arguments[u++]:r[a];for(;u<arguments.length;)o.push(arguments[u++]);return N(n,e,this,this,o)};return e}),v.partial.placeholder=v,v.bindAll=g(function(n,r){r=M(r,!1,!1);var t=r.length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=v.bind(n[e],n)}}),v.memoize=function(n,r){var t=function(e){var u=t.cache,i=""+(r?r.apply(this,arguments):e);return j(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return t.cache={},t},v.delay=g(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),v.defer=v.partial(v.delay,v,1),v.throttle=function(n,r,t){var e,u,i,o,a=0;t||(t={});var c=function(){a=!1===t.leading?0:v.now(),e=null,o=n.apply(u,i),e||(u=i=null)},l=function(){var l=v.now();a||!1!==t.leading||(a=l);var f=r-(l-a);return u=this,i=arguments,f<=0||f>r?(e&&(clearTimeout(e),e=null),a=l,o=n.apply(u,i),e||(u=i=null)):e||!1===t.trailing||(e=setTimeout(c,f)),o};return l.cancel=function(){clearTimeout(e),a=0,e=u=i=null},l},v.debounce=function(n,r,t){var e,u,i=function(r,t){e=null,t&&(u=n.apply(r,t))},o=g(function(o){if(e&&clearTimeout(e),t){var a=!e;e=setTimeout(i,r),a&&(u=n.apply(this,o))}else e=v.delay(i,r,this,o);return u});return o.cancel=function(){clearTimeout(e),e=null},o},v.wrap=function(n,r){return v.partial(r,n)},v.negate=function(n){return function(){return!n.apply(this,arguments)}},v.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},v.after=function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},v.before=function(n,r){var t;return function(){return--n>0&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}},v.once=v.partial(v.before,2),v.restArguments=g;var I=!{toString:null}.propertyIsEnumerable("toString"),T=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],B=function(n,r){var t=T.length,u=n.constructor,i=v.isFunction(u)&&u.prototype||e,o="constructor";for(j(n,o)&&!v.contains(r,o)&&r.push(o);t--;)(o=T[t])in n&&n[o]!==i[o]&&!v.contains(r,o)&&r.push(o)};v.keys=function(n){if(!v.isObject(n))return[];if(f)return f(n);var r=[];for(var t in n)j(n,t)&&r.push(t);return I&&B(n,r),r},v.allKeys=function(n){if(!v.isObject(n))return[];var r=[];for(var t in n)r.push(t);return I&&B(n,r),r},v.values=function(n){for(var r=v.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e},v.mapObject=function(n,r,t){r=d(r,t);for(var e=v.keys(n),u=e.length,i={},o=0;o<u;o++){var a=e[o];i[a]=r(n[a],a,n)}return i},v.pairs=function(n){for(var r=v.keys(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},v.invert=function(n){for(var r={},t=v.keys(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r},v.functions=v.methods=function(n){var r=[];for(var t in n)v.isFunction(n[t])&&r.push(t);return r.sort()};var R=function(n,r){return function(t){var e=arguments.length;if(r&&(t=Object(t)),e<2||null==t)return t;for(var u=1;u<e;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;c<a;c++){var l=o[c];r&&void 0!==t[l]||(t[l]=i[l])}return t}};v.extend=R(v.allKeys),v.extendOwn=v.assign=R(v.keys),v.findKey=function(n,r,t){r=d(r,t);for(var e,u=v.keys(n),i=0,o=u.length;i<o;i++)if(e=u[i],r(n[e],e,n))return e};var q=function(n,r,t){return r in t};v.pick=g(function(n,r){var t={},e=r[0];if(null==n)return t;v.isFunction(e)?(r.length>1&&(e=y(e,r[1])),r=v.allKeys(n)):(e=q,r=M(r,!1,!1),n=Object(n));for(var u=0,i=r.length;u<i;u++){var o=r[u],a=n[o];e(a,o,n)&&(t[o]=a)}return t}),v.omit=g(function(n,r){var t,e=r[0];return v.isFunction(e)?(e=v.negate(e),r.length>1&&(t=r[1])):(r=v.map(M(r,!1,!1),String),e=function(n,t){return!v.contains(r,t)}),v.pick(n,e,t)}),v.defaults=R(v.allKeys,!0),v.create=function(n,r){var t=m(n);return r&&v.extendOwn(t,r),t},v.clone=function(n){return v.isObject(n)?v.isArray(n)?n.slice():v.extend({},n):n},v.tap=function(n,r){return r(n),n},v.isMatch=function(n,r){var t=v.keys(r),e=t.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=t[i];if(r[o]!==u[o]||!(o in u))return!1}return!0};var K,z;K=function(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!==n)return r!==r;var u=typeof n;return("function"===u||"object"===u||"object"==typeof r)&&z(n,r,t,e)},z=function(n,r,t,e){n instanceof v&&(n=n._wrapped),r instanceof v&&(r=r._wrapped);var i=a.call(n);if(i!==a.call(r))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/+n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return u.valueOf.call(n)===u.valueOf.call(r)}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof r)return!1;var c=n.constructor,l=r.constructor;if(c!==l&&!(v.isFunction(c)&&c instanceof c&&v.isFunction(l)&&l instanceof l)&&"constructor"in n&&"constructor"in r)return!1}t=t||[],e=e||[];for(var f=t.length;f--;)if(t[f]===n)return e[f]===r;if(t.push(n),e.push(r),o){if((f=n.length)!==r.length)return!1;for(;f--;)if(!K(n[f],r[f],t,e))return!1}else{var s,p=v.keys(n);if(f=p.length,v.keys(r).length!==f)return!1;for(;f--;)if(s=p[f],!j(r,s)||!K(n[s],r[s],t,e))return!1}return t.pop(),e.pop(),!0},v.isEqual=function(n,r){return K(n,r)},v.isEmpty=function(n){return null==n||(w(n)&&(v.isArray(n)||v.isString(n)||v.isArguments(n))?0===n.length:0===v.keys(n).length)},v.isElement=function(n){return!(!n||1!==n.nodeType)},v.isArray=l||function(n){return"[object Array]"===a.call(n)},v.isObject=function(n){var r=typeof n;return"function"===r||"object"===r&&!!n},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){v["is"+n]=function(r){return a.call(r)==="[object "+n+"]"}}),v.isArguments(arguments)||(v.isArguments=function(n){return j(n,"callee")});var D=n.document&&n.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof D&&(v.isFunction=function(n){return"function"==typeof n||!1}),v.isFinite=function(n){return!v.isSymbol(n)&&isFinite(n)&&!isNaN(parseFloat(n))},v.isNaN=function(n){return v.isNumber(n)&&isNaN(n)},v.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===a.call(n)},v.isNull=function(n){return null===n},v.isUndefined=function(n){return void 0===n},v.has=function(n,r){if(!v.isArray(r))return j(n,r);for(var t=r.length,e=0;e<t;e++){var u=r[e];if(null==n||!c.call(n,u))return!1;n=n[u]}return!!t},v.noConflict=function(){return n._=r,this},v.identity=function(n){return n},v.constant=function(n){return function(){return n}},v.noop=function(){},v.property=function(n){return v.isArray(n)?function(r){return x(r,n)}:b(n)},v.propertyOf=function(n){return null==n?function(){}:function(r){return v.isArray(r)?x(n,r):n[r]}},v.matcher=v.matches=function(n){return n=v.extendOwn({},n),function(r){return v.isMatch(r,n)}},v.times=function(n,r,t){var e=Array(Math.max(0,n));r=y(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},v.random=function(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))},v.now=Date.now||function(){return(new Date).getTime()};var L={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},P=v.invert(L),W=function(n){var r=function(r){return n[r]},t="(?:"+v.keys(n).join("|")+")",e=RegExp(t),u=RegExp(t,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,r):n}};v.escape=W(L),v.unescape=W(P),v.result=function(n,r,t){v.isArray(r)||(r=[r]);var e=r.length;if(!e)return v.isFunction(t)?t.call(n):t;for(var u=0;u<e;u++){var i=null==n?void 0:n[r[u]];void 0===i&&(i=t,u=e),n=v.isFunction(i)?i.call(n):i}return n};var C=0;v.uniqueId=function(n){var r=++C+"";return n?n+r:r},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,$=function(n){return"\\"+U[n]};v.template=function(n,r,t){!r&&t&&(r=t),r=v.defaults({},r,v.templateSettings);var e=RegExp([(r.escape||J).source,(r.interpolate||J).source,(r.evaluate||J).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(r,t,e,o,a){return i+=n.slice(u,a).replace(V,$),u=a+r.length,t?i+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),r}),i+="';\n",r.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";var o;try{o=new Function(r.variable||"obj","_",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,v)};return a.source="function("+(r.variable||"obj")+"){\n"+i+"}",a},v.chain=function(n){var r=v(n);return r._chain=!0,r};var G=function(n,r){return n._chain?v(r).chain():r};v.mixin=function(n){return v.each(v.functions(n),function(r){var t=v[r]=n[r];v.prototype[r]=function(){var n=[this._wrapped];return i.apply(n,arguments),G(this,t.apply(v,n))}}),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var r=t[n];v.prototype[n]=function(){var t=this._wrapped;return r.apply(t,arguments),"shift"!==n&&"splice"!==n||0!==t.length||delete t[0],G(this,t)}}),v.each(["concat","join","slice"],function(n){var r=t[n];v.prototype[n]=function(){return G(this,r.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}();

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],179:[function(require,module,exports){
!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t){return t}function r(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function i(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=W.length;e<r;++e){var i=W[e]+n;if(i in t)return i}}function o(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function u(){this._=Object.create(null)}function a(t){return(t+="")===F||t[0]===J?J+t:t}function s(t){return(t+="")[0]===J?t.slice(1):t}function c(t){return a(t)in this._}function l(t){return(t=a(t))in this._&&delete this._[t]}function f(){var t=[];for(var n in this._)t.push(s(n));return t}function h(){var t=0;for(var n in this._)++t;return t}function p(){for(var t in this._)return!1;return!0}function v(){}function d(){}function _(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new u;return n.on=function(n,i){var o,u=r.get(n);return arguments.length<2?u&&u.on:(u&&(u.on=null,e=e.slice(0,o=e.indexOf(u)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function g(){U.event.preventDefault()}function y(){for(var t,n=U.event;t=n.sourceEvent;)n=t;return n}function m(t){for(var n=new d,e=0,r=arguments.length;++e<r;)n[arguments[e]]=_(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=U.event;i.target=t,U.event=i,n[i.type].apply(e,r)}finally{U.event=o}}},n}function w(t){return nt(t,ot),t}function x(t){return"function"==typeof t?t:function(){return et(t,this)}}function b(t){return"function"==typeof t?t:function(){return rt(t,this)}}function N(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=U.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?a:u:t.local?o:i}function A(t){return t.trim().replace(/\s+/g," ")}function S(t){return new RegExp("(?:^|\\s+)"+U.requote(t)+"(?:\\s+|$)","g")}function E(t){return(t+"").trim().split(/^|\s+/)}function z(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=E(t).map(T);var i=t.length;return"function"==typeof n?r:e}function T(t){var n=S(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",A(i+" "+t))):e.setAttribute("class",A(i.replace(n," ")))}}function C(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function L(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function P(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e===ut&&n.documentElement.namespaceURI===ut?n.createElement(t):n.createElementNS(e,t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=U.ns.qualify(t)).local?e:n}function O(){var t=this.parentNode;t&&t.removeChild(this)}function q(){this._=Object.create(null)}function M(t){return{__data__:t}}function D(t){return function(){return it(this,t)}}function $(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function k(t){return arguments.length||(t=$),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],u=0,a=o.length;u<a;u++)(i=o[u])&&n(i,u,e);return t}function R(t){return nt(t,st),t}function X(t){var n,e;return function(r,i,o){var u,a=t[o].update,s=a.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(u=a[n])&&++n<s;);return u}}function j(t,n,e){function r(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function i(){var i=s(n,Z(arguments));r.call(this),this.addEventListener(t,this[u]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+U.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var u="__on"+t,a=t.indexOf("."),s=H;a>0&&(t=t.slice(0,a));var c=ct.get(t);return c&&(t=c,s=Y),a?n?i:r:n?v:o}function H(t,n){return function(e){var r=U.event;U.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{U.event=r}}}function Y(t,n){var e=H(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function B(e){var r=".dragsuppress-"+ ++ft,o="click"+r,u=U.select(n(e)).on("touchmove"+r,g).on("dragstart"+r,g).on("selectstart"+r,g);if(null==lt&&(lt=!("onselectstart"in e)&&i(e.style,"userSelect")),lt){var a=t(e).style,s=a[lt];a[lt]="none"}return function(t){if(u.on(r,null),lt&&(a[lt]=s),t){var n=function(){u.on(o,null)};u.on(o,function(){g(),n()},!0),setTimeout(n,0)}}}function G(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ht<0){var o=n(t);if(o.scrollX||o.scrollY){r=U.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=r[0][0].getScreenCTM();ht=!(u.f||u.e),r.remove()}}return ht?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function I(){return U.event.changedTouches[0].identifier}var U={version:"3.5.17"},K=this.document;U.rebind=function(t,n){for(var e,i=1,o=arguments.length;++i<o;)t[e=arguments[i]]=r(t,n,n[e]);return t};var W=["webkit","ms","moz","Moz","o","O"];U.map=function(t,n){var e=new u;if(t instanceof u)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var F="__proto__",J="\0";o(u,{has:c,get:function(t){return this._[a(t)]},set:function(t,n){return this._[a(t)]=n},remove:l,keys:f,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:s(n),value:this._[n]});return t},size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n),this._[n])}});var Q=[].slice,Z=function(t){return Q.call(t)};U.dispatch=function(){for(var t=new d,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=_(t);return t},d.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},U.event=null,U.requote=function(t){return t.replace(tt,"\\$&")};var tt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nt={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},et=function(t,n){return n.querySelector(t)},rt=function(t,n){return n.querySelectorAll(t)},it=function(t,n){var e=t.matches||t[i(t,"matchesSelector")];return(it=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(et=function(t,n){return Sizzle(t,n)[0]||null},rt=Sizzle,it=Sizzle.matchesSelector),U.selection=function(){return U.select(K.documentElement)};var ot=U.selection.prototype=[];ot.select=function(t){var n,e,r,i,o=[];t=x(t);for(var u=-1,a=this.length;++u<a;){o.push(n=[]),n.parentNode=(r=this[u]).parentNode;for(var s=-1,c=r.length;++s<c;)(i=r[s])?(n.push(e=t.call(i,i.__data__,s,u)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return w(o)},ot.selectAll=function(t){var n,e,r=[];t=b(t);for(var i=-1,o=this.length;++i<o;)for(var u=this[i],a=-1,s=u.length;++a<s;)(e=u[a])&&(r.push(n=Z(t.call(e,e.__data__,a,i))),n.parentNode=e);return w(r)};var ut="http://www.w3.org/1999/xhtml",at={svg:"http://www.w3.org/2000/svg",xhtml:ut,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};U.ns={prefix:at,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),at.hasOwnProperty(e)?{space:at[e],local:t}:t}},ot.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=U.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(N(n,t[n]));return this}return this.each(N(t,n))},ot.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=E(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!S(t[i]).test(n))return!1;return!0}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))},ot.style=function(t,e,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e="");for(r in t)this.each(C(r,t[r],e));return this}if(i<2){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(C(t,e,r))},ot.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(L(n,t[n]));return this}return this.each(L(t,n))},ot.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ot.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ot.append=function(t){return t=P(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ot.insert=function(t,n){return t=P(t),n=x(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},ot.remove=function(){return this.each(O)},U.set=function(t){var n=new q;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},o(q,{has:c,add:function(t){return this._[a(t+="")]=!0,t},remove:l,values:f,size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n))}}),ot.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),v=new Array(f),d=new Array(a);if(n){var _,g=new u,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(g.has(_=n.call(i,i.__data__,r))?d[r]=i:g.set(_,i),y[r]=_);for(r=-1;++r<f;)(i=g.get(_=n.call(e,o=e[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):v[r]=M(o),g.set(_,!0);for(r=-1;++r<a;)r in y&&!0!==g.get(y[r])&&(d[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):v[r]=M(o);for(;r<f;++r)v[r]=M(e[r]);for(;r<a;++r)d[r]=t[r]}v.update=p,v.parentNode=p.parentNode=d.parentNode=t.parentNode,s.push(v),c.push(p),l.push(d)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=R([]),c=w([]),l=w([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return c.enter=function(){return s},c.exit=function(){return l},c},ot.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ot.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=D(t));for(var o=0,u=this.length;o<u;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var a=0,s=e.length;a<s;a++)(r=e[a])&&t.call(r,r.__data__,a,o)&&n.push(r)}return w(i)},ot.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},U.ascending=$,ot.sort=function(t){t=k.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},ot.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},ot.call=function(t){var n=Z(arguments);return t.apply(n[0]=this,n),this},ot.empty=function(){return!this.node()},ot.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},ot.size=function(){var t=0;return V(this,function(){++t}),t};var st=[];U.selection.enter=R,U.selection.enter.prototype=st,st.append=ot.append,st.empty=ot.empty,st.node=ot.node,st.call=ot.call,st.size=ot.size,st.select=function(t){for(var n,e,r,i,o,u=[],a=-1,s=this.length;++a<s;){r=(i=this[a]).update,u.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c,a)),e.__data__=o.__data__):n.push(null)}return w(u)},st.insert=function(t,n){return arguments.length<2&&(n=X(this)),ot.insert.call(this,t,n)},U.select=function(n){var e;return"string"==typeof n?(e=[et(n,K)],e.parentNode=K.documentElement):(e=[n],e.parentNode=t(n)),w([e])},U.selectAll=function(t){var n;return"string"==typeof t?(n=Z(rt(t,K)),n.parentNode=K.documentElement):(n=Z(t),n.parentNode=null),w([n])},ot.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(j(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(j(t,n,e))};var ct=U.map({mouseenter:"mouseover",mouseleave:"mouseout"});K&&ct.forEach(function(t){"on"+t in K&&ct.remove(t)});var lt,ft=0;U.mouse=function(t){return G(t,y())};var ht=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;U.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=y().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},U.behavior={},U.behavior.drag=function(){function t(){this.on("mousedown.drag",u).on("touchstart.drag",a)}function r(t,n,e,r,u){return function(){function a(){var t,e,r=n(h,d);r&&(t=r[0]-m[0],e=r[1]-m[1],v|=t|e,m=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function s(){n(h,d)&&(g.on(r+_,null).on(u+_,null),y(v),p({type:"dragend"}))}var c,l=this,f=U.event.target.correspondingElement||U.event.target,h=l.parentNode,p=i.of(l,arguments),v=0,d=t(),_=".drag"+(null==d?"":"-"+d),g=U.select(e(f)).on(r+_,a).on(u+_,s),y=B(f),m=n(h,d);o?(c=o.apply(l,arguments),c=[c.x-m[0],c.y-m[1]]):c=[0,0],p({type:"dragstart"})}}var i=m(t,"drag","dragstart","dragend"),o=null,u=r(v,U.mouse,n,"mousemove","mouseup"),a=r(I,U.touch,e,"touchmove","touchend");return t.origin=function(n){return arguments.length?(o=n,t):o},U.rebind(t,i,"on")},"function"==typeof define&&define.amd?(this.d3=U,define(U)):"object"==typeof module&&module.exports?module.exports=U:this.d3=U}();

},{}],180:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),AbstractFile=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBytes",value:function(e,t){throw new TypeError("Method getBytes is not implemented")}},{key:"getAll",value:function(){throw new TypeError("Method getAll is not implemented")}},{key:"getAllString",value:function(){throw new TypeError("Method getAllString is not implemented")}},{key:"getSize",value:function(){throw new TypeError("Method getSize is not implemented")}}]),e}();module.exports=AbstractFile;

},{}],181:[function(require,module,exports){
"use strict";function strToStrand(r){return r&&"+"==r?"+":r&&"-"==r?"-":"."}function ga4ghStrandToStrand(r){return r&&"POS_STRAND"==r?"+":r&&"NEG_STRAND"==r?"-":"."}function makeCigarString(r){return r.map(function(r){var t=r.op;return r.length+t}).join("")}Object.defineProperty(exports,"__esModule",{value:!0}),module.exports={strToStrand:strToStrand,ga4ghStrandToStrand:ga4ghStrandToStrand,makeCigarString:makeCigarString};

},{}],182:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("./utils"),ContigInterval=function(){function t(n,e,r){_classCallCheck(this,t),this.contig=n,this.interval=new _Interval2.default(e,r)}return _createClass(t,[{key:"start",value:function(){return this.interval.start}},{key:"stop",value:function(){return this.interval.stop}},{key:"length",value:function(){return this.interval.length()}},{key:"intersects",value:function(t){return this.chrOnContig(t.contig)&&this.interval.intersects(t.interval)}},{key:"containsInterval",value:function(t){return this.chrOnContig(t.contig)&&this.interval.containsInterval(t.interval)}},{key:"isAdjacentTo",value:function(t){return this.chrOnContig(t.contig)&&(this.start()==1+t.stop()||this.stop()+1==t.start())}},{key:"isCoveredBy",value:function(t){var n=this,e=t.filter(function(t){return n.chrOnContig(t.contig)}).map(function(t){return t.interval});return this.interval.isCoveredBy(e)}},{key:"containsLocus",value:function(t,n){return this.chrOnContig(t)&&this.interval.contains(n)}},{key:"chrOnContig",value:function(t){return this.contig===t||this.contig==="chr"+t||"chr"+this.contig===t}},{key:"clone",value:function(){return new t(this.contig,this.interval.start,this.interval.stop)}},{key:"complementIntervals",value:function(n){var e=this;return this.interval.complementIntervals((0,_utils.flatMap)(n,function(t){return e.chrOnContig(t.contig)?[t.interval]:[]})).map(function(n){return new t(e.contig,n.start,n.stop)})}},{key:"toString",value:function(){return this.contig+":"+this.start()+"-"+this.stop()}},{key:"toGenomeRange",value:function(){if(!("string"==typeof this.contig||this.contig instanceof String))throw"Cannot convert numeric ContigInterval to GenomeRange";return{contig:this.contig,start:this.start(),stop:this.stop()}}},{key:"round",value:function(n,e){var r=this.interval.round(n,e);return new t(this.contig,r.start,r.stop)}}],[{key:"compare",value:function(t,n){return t.contig.toString()>n.contig.toString()?-1:t.contig.toString()<n.contig.toString()?1:t.start()-n.start()}},{key:"coalesce",value:function(n){n.sort(t.compare);var e=[];return n.forEach(function(t){if(0===e.length)return void e.push(t);var n=e[e.length-1];t.intersects(n)||t.isAdjacentTo(n)?(n=e[e.length-1]=n.clone(),n.interval.stop=Math.max(t.interval.stop,n.interval.stop)):e.push(t)}),e}},{key:"fromGenomeRange",value:function(n){return new t(n.contig.toString(),n.start,n.stop)}}]),t}();module.exports=ContigInterval;

},{"./Interval":185,"./utils":226}],183:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var i=e,o=t,a=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,n=a,r=!0,s=l=void 0}},_ShimDependencies=require("./ShimDependencies"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),_utils2=_interopRequireDefault(_utils),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),Controls=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={defaultHalfInterval:2}}return _inherits(t,e),_createClass(t,[{key:"makeRange",value:function(){return{contig:this.refs.contig.value,start:Number(this.refs.start.value),stop:Number(this.refs.stop.value)}}},{key:"completeRange",value:function(e){var t=this;if(e=e||{},e.start&&void 0===e.stop&&(e.stop=e.start+20,e.start-=20),e.contig){var n;!function(){var r=e.contig;(n=_underscore2.default.find(t.props.contigList,function(e){return _utils2.default.isChrMatch(r,e)}))&&(e.contig=n)}()}return _underscore2.default.extend(_underscore2.default.clone(this.props.range),e)}},{key:"handleContigChange",value:function(e){this.props.onChange(this.completeRange({contig:this.refs.contig.value}))}},{key:"handleFormSubmit",value:function(e){e.preventDefault();var t=this.completeRange(_utils2.default.parseRange(this.refs.position.value));this.props.onChange(t),this.updateSlider(new _Interval2.default(t.start,t.stop))}},{key:"handleSliderOnInput",value:function(){this.zoomAbs(-this.refs.slider.valueAsNumber)}},{key:"updateRangeUI",value:function(){var e=this.props.range;if(e&&(this.refs.position.value=_utils2.default.formatInterval(new _Interval2.default(e.start,e.stop)),this.props.contigList)){var t=this.props.contigList.indexOf(e.contig);this.refs.contig.selectedIndex=t}}},{key:"zoomIn",value:function(e){e.preventDefault(),this.zoomByFactor(.5)}},{key:"zoomOut",value:function(e){e.preventDefault(),this.zoomByFactor(2)}},{key:"zoomAbs",value:function(e){var t=this.props.range;if(t){var n=_utils2.default.absScaleRange(new _Interval2.default(t.start,t.stop),e,this.state.defaultHalfInterval);this.props.onChange({contig:t.contig,start:n.start,stop:n.stop})}}},{key:"zoomByFactor",value:function(e){var t=this.props.range;if(t){var n=_utils2.default.scaleRange(new _Interval2.default(t.start,t.stop),e);this.props.onChange({contig:t.contig,start:n.start,stop:n.stop}),this.updateSlider(n)}}},{key:"updateSlider",value:function(e){var t=e.stop-e.start;this.refs.slider.valueAsNumber=Math.ceil(1-Math.log2(t))}},{key:"render",value:function(){var e=this.props.contigList?this.props.contigList.map(function(e,t){return _ShimDependencies.React.createElement("option",{key:t},e)}):null;return _ShimDependencies.React.createElement("form",{className:"controls",onSubmit:this.handleFormSubmit.bind(this)},_ShimDependencies.React.createElement("select",{ref:"contig",onChange:this.handleContigChange.bind(this)},e)," ",_ShimDependencies.React.createElement("input",{ref:"position",type:"text"})," ",_ShimDependencies.React.createElement("button",{className:"btn-submit",onClick:this.handleFormSubmit.bind(this)},"Go")," ",_ShimDependencies.React.createElement("div",{className:"zoom-controls"},_ShimDependencies.React.createElement("button",{className:"btn-zoom-out",onClick:this.zoomOut.bind(this)})," ",_ShimDependencies.React.createElement("button",{className:"btn-zoom-in",onClick:this.zoomIn.bind(this)}),_ShimDependencies.React.createElement("input",{className:"zoom-slider",ref:"slider",type:"range",min:"-15",max:"0",onInput:this.handleSliderOnInput.bind(this),class:"slider"})))}},{key:"componentDidUpdate",value:function(e){_underscore2.default.isEqual(e.range,this.props.range)||this.updateRangeUI()}},{key:"componentDidMount",value:function(){this.updateRangeUI()}}]),t}(_ShimDependencies.React.Component);module.exports=Controls;

},{"./Interval":185,"./ShimDependencies":192,"./utils":226,"underscore":178}],184:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_Alignment=require("./Alignment"),_vizPileuputils=require("./viz/pileuputils"),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataSamRead=require("./data/SamRead"),_dataSamRead2=_interopRequireDefault(_dataSamRead),OP_MAP={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},GA4GHAlignment=function(){function e(t){_classCallCheck(this,e),this.alignment=t,this.pos=parseInt(t.alignment.position.position),this.ref=t.alignment.position.referenceName,this.name=t.fragmentName,this.cigarOps=t.alignment.cigar.map(function(e){var t=e.operation,n=e.operationLength;return{op:OP_MAP[t],length:parseInt(n)}}),this._interval=new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}return _createClass(e,[{key:"getKey",value:function(){return e.keyFromGA4GHResponse(this.alignment)}},{key:"getStrand",value:function(){return"NEG_STRAND"==this.alignment.alignment.position.strand?"-":"+"}},{key:"getQualityScores",value:function(){return this.alignment.alignedQuality}},{key:"getSequence",value:function(){return this.alignment.alignedSequence}},{key:"getInterval",value:function(){return this._interval}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"getReferenceLength",value:function(){return _dataSamRead2.default.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this.alignment.nextMatePosition;return e&&{ref:e.referenceName,pos:parseInt(e.position),strand:"NEG_STRAND"==e.strand?"-":"+"}}},{key:"getInferredInsertSize",value:function(){var e=this.getMateProperties();if(e&&e.ref==this.ref){var t=this._interval.start(),n=this._interval.stop(),i=e.pos,r=i+this.getSequence().length;return Math.max(n,r)-Math.min(t,i)}return 0}},{key:"debugString",value:function(){return"Name: "+this.name+"\n    Position: "+this.pos.toString()+"\n    CIGAR: "+(0,_Alignment.makeCigarString)(this.cigarOps)+"\n    Sequence: "+this.alignment.alignedSequence+"\n    Quality:  "+this.alignment.alignedQuality+" "}},{key:"getCoverage",value:function(e){return{range:this.getInterval(),opInfo:(0,_vizPileuputils.getOpInfo)(this,e)}}}],[{key:"keyFromGA4GHResponse",value:function(e){return e.fragmentName+":"+e.readNumber}}]),e}();module.exports=GA4GHAlignment;

},{"./Alignment":181,"./ContigInterval":182,"./data/SamRead":195,"./viz/pileuputils":244}],185:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),Interval=function(){function t(n,r){_classCallCheck(this,t),this.start=n,this.stop=r}return _createClass(t,[{key:"length",value:function(){return Math.max(0,this.stop-this.start+1)}},{key:"intersect",value:function(n){return new t(Math.max(this.start,n.start),Math.min(this.stop,n.stop))}},{key:"intersects",value:function(t){return this.start<=t.stop&&t.start<=this.stop}},{key:"contains",value:function(t){return t>=this.start&&t<=this.stop}},{key:"containsInterval",value:function(t){return this.contains(t.start)&&this.contains(t.stop)}},{key:"round",value:function(n,r){var e=r?0:1,s=function(t){return t-t%n};return new t(Math.max(e,s(this.start)),s(this.stop+n-1))}},{key:"clone",value:function(){return new t(this.start,this.stop)}},{key:"isCoveredBy",value:function(t){for(var n=this.clone(),r=0;r<t.length;r++){var e=t[r];if(r&&e.start<t[r-1].start)throw"isCoveredBy must be called with sorted ranges";if(e.start>n.start)return!1;if(n.start=Math.max(n.start,e.stop+1),n.length()<=0)return!0}return!1}},{key:"subtract",value:function(n){return this.intersects(n)?this.containsInterval(n)?[new t(this.start,n.start-1),new t(n.stop+1,this.stop)].filter(function(t){return t.length()>0}):n.containsInterval(this)?[]:n.start<this.start?[new t(n.stop+1,this.stop)]:[new t(this.start,n.start-1)]:[this]}},{key:"complementIntervals",value:function(t){var n=[this];return t.forEach(function(t){var r=[];n.forEach(function(n){r=r.concat(n.subtract(t))}),n=r}),n}},{key:"toString",value:function(){return"["+this.start+", "+this.stop+"]"}}],[{key:"intersectAll",value:function(t){if(!t.length)throw new Error("Tried to intersect zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.max(r,n.start),n.stop=Math.min(e,n.stop)}),n}},{key:"boundingInterval",value:function(t){if(!t.length)throw new Error("Tried to bound zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.min(r,n.start),n.stop=Math.max(e,n.stop)}),n}}]),t}();module.exports=Interval;

},{}],186:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,o);if(void 0!==l){if("value"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(u)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=o,r=u,n=!0,l=f=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),LocalStringFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.fileLength=e.length,this.buffer=new ArrayBuffer(e.length),this.content=e;for(var r=new Uint8Array(this.buffer),n=0;n<this.fileLength;n++)r[n]=e.charCodeAt(n)}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+")");var r=e+t-1;-1!=this.fileLength&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return _q2.default.when(n)}},{key:"getAll",value:function(){var e=this.getFromCache(0,this.fileLength-1);return _q2.default.when(e)}},{key:"getAllString",value:function(){return _q2.default.when(this.content)}},{key:"getSize",value:function(){return _q2.default.when(this.fileLength)}},{key:"getFromCache",value:function(e,t){return this.buffer.slice(e,t+1)}}]),t}(_AbstractFile3.default);module.exports=LocalStringFile;

},{"./AbstractFile":180,"q":48}],187:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var c=e,i=t,a=n;r=!1,null===c&&(c=Function.prototype);var o=Object.getOwnPropertyDescriptor(c,i);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(a)}var l=Object.getPrototypeOf(c);if(null===l)return;e=l,t=i,n=a,r=!0,o=l=void 0}},_ShimDependencies=require("./ShimDependencies"),Menu=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"clickHandler",value:function(e,t){t.preventDefault();var n=this.props.items[e];"string"!=typeof n&&this.props.onSelect(n.key)}},{key:"render",value:function(){var e=this,t=function(t){return e.clickHandler.bind(e,t)},n=[];return this.props.header&&n.push(_ShimDependencies.React.createElement("div",{key:"header",className:"menu-header"},this.props.header)),n=n.concat(this.props.items.map(function(e,n){if("string"==typeof e)return _ShimDependencies.React.createElement("div",{key:n,className:"menu-separator"});var r="check"+(e.checked?" checked":"");return _ShimDependencies.React.createElement("div",{key:n,className:"menu-item",onClick:t(n)},_ShimDependencies.React.createElement("span",{className:r}),_ShimDependencies.React.createElement("span",{className:"menu-item-label"},e.label))})),_ShimDependencies.React.createElement("div",{className:"menu"},n)}}]),t}(_ShimDependencies.React.Component);module.exports=Menu;

},{"./ShimDependencies":192}],188:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=u,n=!0,s=l=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),RemoteFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e,this.fileLength=-1,this.chunks=[],this.numNetworkRequests=0}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+") from "+this.url);var r=e+t-1;-1!=this.fileLength&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return n?_q2.default.when(n):this.getFromNetwork(e,r)}},{key:"getAll",value:function(){var e=this;if(-1!=this.fileLength){var t=this.getFromCache(0,this.fileLength-1);if(t)return _q2.default.when(t)}var r=new XMLHttpRequest;return r.open("GET",this.url),r.responseType="arraybuffer",this.promiseXHR(r).then(function(t){var r=_slicedToArray(t,1),n=r[0];return e.fileLength=n.byteLength,e.chunks=[{start:0,stop:e.fileLength-1,buffer:n}],n})}},{key:"getAllString",value:function(){var e=new XMLHttpRequest;return e.open("GET",this.url),this.promiseXHR(e).then(function(e){return _slicedToArray(e,1)[0]})}},{key:"getSize",value:function(){if(-1!=this.fileLength)return _q2.default.when(this.fileLength);var e=new XMLHttpRequest;return e.open("HEAD",this.url),this.promiseXHR(e).then(function(){var t=e.getResponseHeader("Content-Length");if(null!==t)return Number(t);throw"Remote resource has unknown length"})}},{key:"getFromCache",value:function(e,t){for(var r=0;r<this.chunks.length;r++){var n=this.chunks[r];if(n.start<=e&&n.stop>=t)return n.buffer.slice(e-n.start,t-n.start+1)}return null}},{key:"getFromNetwork",value:function(e,t){var r=this,n=t-e+1;if(n>5e7)throw"Monster request: Won't fetch "+n+" bytes from "+this.url;var i=new XMLHttpRequest;return i.open("GET",this.url),i.responseType="arraybuffer",i.setRequestHeader("Range","bytes="+e+"-"+t),this.promiseXHR(i).then(function(t){var n=_slicedToArray(t,1),o=n[0],u={start:e,stop:e+o.byteLength-1,buffer:o};r.chunks.push(u);var s=r._getLengthFromContentRange(i);return null!==s&&void 0!==s&&(-1!=r.fileLength&&r.fileLength!=s?console.warn("Size of remote file "+r.url+" changed from "+r.fileLength+" to "+s):r.fileLength=s),o})}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}},{key:"_getLengthFromContentRange",value:function(e){if(!/Content-Range/i.exec(e.getAllResponseHeaders()))return null;var t=e.getResponseHeader("Content-Range"),r=/\/(\d+)$/.exec(t);return r?Number(r[1]):(console.warn("Received improper Content-Range value for "+this.url+": "+t),null)}},{key:"clearCache",value:function(){this.chunks=[]}}]),t}(_AbstractFile3.default);module.exports=RemoteFile;

},{"./AbstractFile":180,"q":48}],189:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),MONSTER_REQUEST=5e6,RemoteRequest=function(){function e(t){_classCallCheck(this,e),this.cache=require("memory-cache"),this.url=t,this.numNetworkRequests=0}return _createClass(e,[{key:"get",value:function(e,t,r){var n=r-t;if(n<=0)return _q2.default.reject("Requested <0 interval ("+n+") from "+this.url);var s=new _ContigInterval2.default(e,t,r),u=this.cache.get(s);return u?_q2.default.when(u):this.getFromNetwork(e,t,r)}},{key:"getFromNetwork",value:function(e,t,r){var n=this,s=r-t;if(s>5e6)throw"Monster request: Won't fetch "+s+" sized ranges from "+this.url;var u=new XMLHttpRequest,i=this.getEndpointFromContig(e,t,r);return u.open("GET",i),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),this.promiseXHR(u).then(function(s){var u=s[0],i=new _ContigInterval2.default(e,t,r);return n.cache.put(i,u),u})}},{key:"getEndpointFromContig",value:function(e,t,r){return this.url+"/"+e+"?start="+t+"&end="+r}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}}]),e}();module.exports={RemoteRequest:RemoteRequest,MONSTER_REQUEST:MONSTER_REQUEST};

},{"./ContigInterval":182,"memory-cache":34,"q":48}],190:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function(e,t,n){for(var i=!0;i;){var a=e,r=t,s=n;i=!1,null===a&&(a=Function.prototype);var o=Object.getOwnPropertyDescriptor(a,r);if(void 0!==o){if("value"in o)return o.value;var c=o.get;if(void 0===c)return;return c.call(s)}var l=Object.getPrototypeOf(a);if(null===l)return;e=l,t=r,n=s,i=!0,o=l=void 0}},_ShimDependencies=require("./ShimDependencies"),_Controls=require("./Controls"),_Controls2=_interopRequireDefault(_Controls),_Menu=require("./Menu"),_Menu2=_interopRequireDefault(_Menu),_VisualizationWrapper=require("./VisualizationWrapper"),_VisualizationWrapper2=_interopRequireDefault(_VisualizationWrapper),Root=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={contigList:this.props.referenceSource.contigList(),range:null,updateSize:!1,settingsMenuKey:null},this.trackReactElements=[]}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.props.referenceSource.on("contigs",function(){e.setState({contigList:e.props.referenceSource.contigList()})}),this.state.range||this.handleRangeChange(this.props.initialRange),this.setState({contigList:this.props.referenceSource.contigList()})}},{key:"handleRangeChange",value:function(e){var t=this;e.start<0&&(e.start=0),this.props.referenceSource.normalizeRange(e).then(function(e){t.setState({range:e}),t.props.tracks.forEach(function(t){t.source.rangeChanged(e)})}).done()}},{key:"toggleSettingsMenu",value:function(e,t){this.state.settingsMenuKey==e?this.setState({settingsMenuKey:null}):this.setState({settingsMenuKey:e})}},{key:"handleSelectOption",value:function(e,t){this.setState({settingsMenuKey:null});var n=this.props.tracks[Number(e)].visualization,i=n.options,a=n.component.handleSelectOption(t,i);n.options=a,a!=i&&this.forceUpdate()}},{key:"makeDivForTrack",value:function(e,t){var n=this,i=parseInt(e),a=_ShimDependencies.React.createElement(_VisualizationWrapper2.default,{visualization:t.visualization,range:this.state.range,onRangeChange:this.handleRangeChange.bind(this),source:t.source,options:t.track.options,referenceSource:this.props.referenceSource,ref:function(e){n.trackReactElements[i]=e}}),r=t.track.name||"(track name)",s=null,o=null;if(t.visualization.component.getOptionsMenu&&(s=_ShimDependencies.React.createElement("span",{ref:"gear-"+e,className:"gear",onClick:this.toggleSettingsMenu.bind(this,e)},"")),this.state.settingsMenuKey==e){var c=this.refs["gear-"+e],l=c.offsetLeft,u=c.offsetWidth,p=c.offsetTop,h={position:"absolute",left:l+u+"px",top:p+"px"},f=t.visualization.component.getOptionsMenu(t.visualization.options);o=_ShimDependencies.React.createElement("div",{className:"menu-container",style:h},_ShimDependencies.React.createElement(_Menu2.default,{header:r,items:f,onSelect:this.handleSelectOption.bind(this,e)}))}var m=["track",t.visualization.component.displayName||"",t.track.cssClass||""].join(" ");return _ShimDependencies.React.createElement("div",{key:e,className:m},_ShimDependencies.React.createElement("div",{className:"track-label"},_ShimDependencies.React.createElement("span",null,r),_ShimDependencies.React.createElement("br",null),s,o),_ShimDependencies.React.createElement("div",{className:"track-content"},a))}},{key:"render",value:function(){var e=this,t=this.props.tracks.map(function(t,n){return e.makeDivForTrack(""+n,t)});return _ShimDependencies.React.createElement("div",{className:"pileup-root"},this.props.controlsOff?null:_ShimDependencies.React.createElement("div",{className:"track controls"},_ShimDependencies.React.createElement("div",{className:"track-label"},""),_ShimDependencies.React.createElement("div",{className:"track-content"},_ShimDependencies.React.createElement(_Controls2.default,{contigList:this.state.contigList,range:this.state.range,onChange:this.handleRangeChange.bind(this)}))),t)}},{key:"componentDidUpdate",value:function(e,t){if(this.state.updateSize){for(var n=0;n<this.props.tracks.length;n++)this.trackReactElements[n].setState({updateSize:this.state.updateSize});this.state.updateSize=!1}}}]),t}(_ShimDependencies.React.Component);Root.displayName="Root",module.exports=Root;

},{"./Controls":183,"./Menu":187,"./ShimDependencies":192,"./VisualizationWrapper":193}],191:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),CHUNK_SIZE=1e3,SequenceStore=function(){function t(){_classCallCheck(this,t),this.contigMap={}}return _createClass(t,[{key:"setRange",value:function(t,e){if(0!==t.length()){if(t.length()!=e.length)throw"setRange length mismatch";var n=this._getSequences(t.contig);n||(n=this.contigMap[t.contig]={});var r=!0,u=!1,a=void 0;try{for(var i,o=this._chunkForInterval(t.interval)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value,s=l.chunkStart+l.offset-t.start();this._setChunk(n,l,e.slice(s,s+l.length))}}catch(t){u=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(u)throw a}}}}},{key:"getAsString",value:function(t){var e=this._getSequences(t.contig);if(!e)return".".repeat(t.length());var n=this._chunkForInterval(t.interval),r="",u=!0,a=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(u=(o=l.next()).done);u=!0){var s=o.value,c=e[s.chunkStart];c?0===s.offset&&s.length==c.length?r+=c:r+=c.slice(s.offset,s.offset+s.length):r+=".".repeat(s.length)}}catch(t){a=!0,i=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw i}}return r}},{key:"getAsObjects",value:function(t){return _underscore2.default.object(_underscore2.default.map(this.getAsString(t),function(e,n){return[t.contig+":"+(t.start()+n),"."==e?null:e]}))}},{key:"_getChunk",value:function(t,e){return t[e]||".".repeat(CHUNK_SIZE)}},{key:"_chunkForInterval",value:function(t){var e=t.start%CHUNK_SIZE,n=t.start-e,r=[{chunkStart:n,offset:e,length:Math.min(CHUNK_SIZE-e,t.length())}];for(n+=CHUNK_SIZE;n<=t.stop;n+=CHUNK_SIZE)r.push({chunkStart:n,offset:0,length:Math.min(CHUNK_SIZE,t.stop-n+1)});return r}},{key:"_setChunk",value:function(t,e,n){if(0===e.offset&&n.length==CHUNK_SIZE)return void(t[e.chunkStart]=n);var r=this._getChunk(t,e.chunkStart);t[e.chunkStart]=r.slice(0,e.offset)+n+r.slice(e.offset+n.length)}},{key:"_getSequences",value:function(t){return this.contigMap[t]||this.contigMap[(0,_utils.altContigName)(t)]||null}}]),t}();module.exports=SequenceStore;

},{"./utils":226,"underscore":178}],192:[function(require,module,exports){
(function (global){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var React=window&&window.React||global&&global.React||require("react");exports.React=React;var ReactDOM=window&&window.ReactDOM||global&&global.ReactDOM||require("react-dom");exports.ReactDOM=ReactDOM;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"react":176,"react-dom":49}],193:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_get=function(e,t,i){for(var n=!0;n;){var r=e,a=t,o=i;n=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=a,i=o,n=!0,s=u=void 0}},_ShimDependencies=require("./ShimDependencies"),_vizD3utils=require("./viz/d3utils"),_vizD3utils2=_interopRequireDefault(_vizD3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_libMinid3=require("../lib/minid3"),_libMinid32=_interopRequireDefault(_libMinid3),VisualizationWrapper=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.hasDragBeenInitialized=!1,this.state={updateSize:!1,width:0,height:0}}return _inherits(t,e),_createClass(t,[{key:"updateSize",value:function(){var e=_ShimDependencies.ReactDOM.findDOMNode(this);if(e&&e instanceof Element){var t=e.parentNode;t&&t instanceof HTMLElement&&this.setState({updateSize:!1,width:t.offsetWidth,height:t.offsetHeight})}}},{key:"componentDidMount",value:function(){var e=this;this.onResizeListener=function(){return e.updateSize()},window.addEventListener("resize",this.onResizeListener),this.updateSize(),this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentDidUpdate",value:function(){this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResizeListener)}},{key:"getScale",value:function(){return this.props.range?_vizD3utils2.default.getTrackScale(this.props.range,this.state.width):function(e){return e}}},{key:"addDragInterface",value:function(){function e(){s()}var t=this;this.hasDragBeenInitialized=!0;var i,n,r=_ShimDependencies.ReactDOM.findDOMNode(this),a=0,o=function(){_libMinid32.default.event.sourceEvent.stopPropagation(),a=0,i=_underscore2.default.clone(t.props.range),n=t.getScale()},s=function(){if(n&&i){var e=n.invert(-a),r=Math.round(e),o=n(e)-n(r),s={contig:i.contig,start:r,stop:r+(i.stop-i.start),offsetPx:o};t.props.onRangeChange(s)}},c=function(){a+=_libMinid32.default.event.dx,s()},u=_libMinid32.default.behavior.drag().on("dragstart",o).on("drag",c).on("dragend",e);_libMinid32.default.select(r).call(u).on("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(){_libMinid32.default.event.defaultPrevented&&_libMinid32.default.event.stopPropagation()}},{key:"componentWillUpdate",value:function(e,t){t.updateSize&&this.updateSize()}},{key:"render",value:function(){var e=this.props.range,t=this.props.visualization.component;if(!e)return null!=t.displayName?_ShimDependencies.React.createElement(EmptyTrack,{className:t.displayName}):_ShimDependencies.React.createElement(EmptyTrack,{className:"EmptyTrack"});var i=_underscore2.default.extend(_underscore2.default.clone(this.props.visualization.options),this.props.options),n=_ShimDependencies.React.createElement(t,{range:e,source:this.props.source,referenceSource:this.props.referenceSource,width:this.state.width,height:this.state.height,options:i});return _ShimDependencies.React.createElement("div",{className:"drag-wrapper"},n)}}]),t}(_ShimDependencies.React.Component);VisualizationWrapper.displayName="VisualizationWrapper";var EmptyTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.className+" empty";return _ShimDependencies.React.createElement("div",{className:e})}}]),t}(_ShimDependencies.React.Component);module.exports=VisualizationWrapper;

},{"../lib/minid3":179,"./ShimDependencies":192,"./viz/d3utils":243,"underscore":178}],194:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function parseHeader(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("Header")}function parseCirTree(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("CirTree")}function generateContigMap(e,t){return generateContigMapNodes(e.chromosomeTree.nodes,e.chromosomeTree.keySize,t)}function generateContigMapNodes(e,t,r){return e.isLeaf?generateContigMapFromLeafNode(e.contents):generateContigMapFromNonLeafNode(e.contents,t,r)}function generateContigMapFromLeafNode(e){if(!e)throw"Invalid chromosome tree";return _q2.default.resolve(_underscore2.default.object(e.map(function(e){var t=e.id;return[e.key.replace(/\0.*/,""),t]})))}function generateContigMapFromNonLeafNode(e,t,r){return _q2.default.all(e.map(function(e){var n=(e.key,e.offset);return r.getBytes(n,65536).then(function(e){return parseNodeLeaf(e,t)}).then(function(e){return generateContigMapNodes(e,t,r)})})).then(function(e){return _underscore2.default.reduce(e,function(e,t){return _underscore2.default.extend(e,t)},{})})}function parseNodeLeaf(e,t){var r=_underscore2.default.extend({},_formatsBbi2.default.TYPE_SET);return r.BPlusTreeNode.contents[1][2].key[1]=t,r.BPlusTreeNode.contents[1][3].key[1]=t,new _jbinary2.default(e,r).read("BPlusTreeNode")}function reverseContigMap(e){var t=[];return _underscore2.default.each(e,function(e,r){t[e]=r}),t}function extractFeaturesFromBlock(e,t,r,n){var a=r.offset-t.start,i=a+r.size,o=e.slice(a+(n?2:0),i),u=n?_pakoLibInflate2.default.inflateRaw(new Uint8Array(o)):o;return new _jbinary2.default(u,_formatsBbi2.default.TYPE_SET).read("BedBlock")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_formatsBbi=require("./formats/bbi"),_formatsBbi2=_interopRequireDefault(_formatsBbi),ImmediateBigBed=function(){function e(t,r,n,a){_classCallCheck(this,e),this.remoteFile=t,this.header=r,this.cirTree=n,this.contigMap=a,this.chrIdToContig=reverseContigMap(a)}return _createClass(e,[{key:"getContigId",value:function(e){if(e in this.contigMap)return this.contigMap[e];var t="chr"+e;if(t in this.contigMap)return this.contigMap[t];throw"Invalid contig "+e}},{key:"getChrIdInterval",value:function(e){return new _ContigInterval2.default(this.getContigId(e.contig),e.start(),e.stop())}},{key:"getContigInterval",value:function(e){return new _ContigInterval2.default(this.chrIdToContig[e.contig],e.start(),e.stop())}},{key:"attachContigToBedRows",value:function(e){var t=this;return e.map(function(e){return{contig:t.chrIdToContig[e.chrId],start:e.start,stop:e.stop,rest:e.rest}})}},{key:"findOverlappingBlocks",value:function(e){var t=[],r=[[e.contig,e.start()],[e.contig,e.stop()]];return function e(n){if(n.contents)n.contents.forEach(e);else{var a=[[n.startChromIx,n.startBase],[n.endChromIx,n.endBase]];_utils2.default.tupleRangeOverlaps(a,r)&&t.push(n)}}(this.cirTree.blocks),t}},{key:"fetchFeaturesByBlock",value:function(e){var t=this.findOverlappingBlocks(e);if(0===t.length)return _q2.default.when([]);var r=_Interval2.default.boundingInterval(t.map(function(e){return new _Interval2.default(+e.offset,e.offset+e.size)})),n=this.header.uncompressBufSize>0;return this.remoteFile.getBytes(r.start,r.length()).then(function(e){return t.map(function(t){var a=extractFeaturesFromBlock(e,r,t,n);if(t.startChromIx!=t.endChromIx)throw"Can't handle blocks which span chromosomes!";return{range:new _ContigInterval2.default(t.startChromIx,t.startBase,t.endBase),rows:a}})})}},{key:"fetchFeatures",value:function(e){var t=this;return this.fetchFeaturesByBlock(e).then(function(r){var n=_underscore2.default.flatten(r.map(function(e){return e.rows}));return n=n.filter(function(t){var r=new _ContigInterval2.default(t.chrId,t.start,t.stop-1);return e.intersects(r)}),t.attachContigToBedRows(n)})}},{key:"getFeaturesInRange",value:function(e){return this.fetchFeatures(this.getChrIdInterval(e))}},{key:"getFeatureBlocksOverlapping",value:function(e){var t=this,r=this.getChrIdInterval(e);return this.fetchFeaturesByBlock(r).then(function(e){return e.map(function(e){return{range:t.getContigInterval(e.range),rows:t.attachContigToBedRows(e.rows)}})})}}]),e}(),BigBed=function(){function e(t){var r=this;_classCallCheck(this,e),this.remoteFile=new _RemoteFile2.default(t),this.header=this.remoteFile.getBytes(0,65536).then(parseHeader),this.contigMap=this.header.then(function(e){return generateContigMap(e,r.remoteFile)}),this.cirTree=this.header.then(function(e){var t=e.unzoomedIndexOffset,n=e.zoomHeaders[0],a=n?n.dataOffset-t:4096;return r.remoteFile.getBytes(t,a).then(parseCirTree)}),this.immediate=_q2.default.all([this.header,this.cirTree,this.contigMap]).then(function(e){var t=_slicedToArray(e,3),n=t[0],a=t[1],i=t[2],o=i;return new ImmediateBigBed(r.remoteFile,n,a,o)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,t,r){var n=new _ContigInterval2.default(e,t,r);return this.immediate.then(function(e){return e.getFeaturesInRange(n)})}},{key:"getFeatureBlocksOverlapping",value:function(e){return this.immediate.then(function(t){return t.getFeatureBlocksOverlapping(e)})}}]),e}();module.exports=BigBed;

},{"../ContigInterval":182,"../Interval":185,"../RemoteFile":188,"../utils":226,"./formats/bbi":203,"jbinary":32,"pako/lib/inflate":35,"q":48,"underscore":178}],195:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function strandFlagToString(e){return e?"-":"+"}function makeAsciiPhred(e){return 0===e.length?"":_underscore2.default.every(e,function(e){return 255==e})?"*":e.map(function(e){return String.fromCharCode(33+e)}).join("")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_Alignment=require("../Alignment"),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_vizPileuputils=require("../viz/pileuputils"),CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],SamRead=function(){function e(t,r,n){_classCallCheck(this,e),this.buffer=t,this.offset=r;var i=this._getJDataView();this.refID=i.getInt32(0),this.ref=n,this.pos=i.getInt32(4),this.l_seq=i.getInt32(16),this.cigarOps=this._getCigarOps(),this.name=this._getName()}return _createClass(e,[{key:"toString",value:function(){var e=this.pos+this.l_seq;return this.ref+":"+(1+this.pos)+"-"+e}},{key:"_getJDataView",value:function(){var e=this.buffer;return new _jdataview2.default(e,0,e.byteLength,!0)}},{key:"getKey",value:function(){return this.offset.toString()}},{key:"_getName",value:function(){var e=this._getJDataView(),t=e.getUint8(8);return e.seek(32),e.getString(t-1)}},{key:"getFlag",value:function(){return this._getJDataView().getUint16(14)}},{key:"getInferredInsertSize",value:function(){return this._getJDataView().getUint16(28)}},{key:"getStrand",value:function(){return strandFlagToString(this.getFlag()&_formatsBamTypes2.default.Flags.READ_STRAND)}},{key:"getFull",value:function(){if(this._full)return this._full;var e=new _jbinary2.default(this.buffer,_formatsBamTypes2.default.TYPE_SET),t=e.read(_formatsBamTypes2.default.ThickAlignment,0);return this._full=t,t}},{key:"getInterval",value:function(){return this._interval?this._interval:new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"_getCigarOps",value:function(){for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=32+t,i=new Array(r),a=0;a<r;a++){var u=e.getUint32(n+4*a);i[a]={op:CIGAR_OPS[15&u],length:u>>4}}return i}},{key:"getQualityScores",value:function(){var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r+Math.ceil(n/2);return e.getBytes(n,i,!0,!0)}},{key:"getCigarString",value:function(){return(0,_Alignment.makeCigarString)(this.cigarOps)}},{key:"getQualPhred",value:function(){return makeAsciiPhred(this.getQualityScores())}},{key:"getSequence",value:function(){if(this._seq)return this._seq;for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r,a=new Array(n),u=Math.ceil(n/2),s=0;s<u;s++){var l=e.getUint8(i+s);a[2*s]=SEQUENCE_VALUES[l>>4],2*s+1<n&&(a[2*s+1]=SEQUENCE_VALUES[15&l])}var g=a.join("");return this._seq=g,g}},{key:"getReferenceLength",value:function(){return e.referenceLengthFromOps(this.cigarOps)}},{key:"getCoverage",value:function(e){return{range:this.getInterval(),opInfo:(0,_vizPileuputils.getOpInfo)(this,e)}}},{key:"getMateProperties",value:function(){var e=this._getJDataView(),t=e.getUint16(14);if(!(t&_formatsBamTypes2.default.Flags.READ_PAIRED))return null;var r=e.getInt32(20),n=e.getInt32(24),i=strandFlagToString(t&_formatsBamTypes2.default.Flags.MATE_STRAND);return{ref:r==this.refID?this.ref:null,pos:n,strand:i}}},{key:"debugString",value:function(){var e=this.getFull();return"Name: "+this.name+"\nFLAG: "+this.getFlag()+"\nPosition: "+this.getInterval().toString()+"\nCIGAR: "+this.getCigarString()+"\nSequence: "+e.seq+"\nQuality:  "+this.getQualPhred()+"\nTags: "+JSON.stringify(e.auxiliary,null,"  ")+"\n    "}}],[{key:"referenceLengthFromOps",value:function(e){var t=0;return e.forEach(function(e){var r=e.op,n=e.length;switch(r){case"M":case"D":case"N":case"=":case"X":t+=n}}),t}}]),e}();module.exports=SamRead;

},{"../Alignment":181,"../ContigInterval":182,"../viz/pileuputils":244,"./formats/bamTypes":202,"jbinary":32,"jdataview":33,"underscore":178}],196:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function parseSequenceRecord(e,r){var t=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),n=t.read("SequenceRecord"),o=t.tell()+8*n.maskBlockCount+4;return{numBases:n.dnaSize,unknownBlockStarts:n.nBlockStarts,unknownBlockLengths:n.nBlockSizes,numMaskBlocks:n.maskBlockCount,maskBlockStarts:[],maskBlockLengths:[],dnaOffsetFromHeader:o,offset:r}}function parseHeader(e){var r=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),t=r.read("Header");return{sequenceCount:t.sequenceCount,sequences:t.sequences}}function unpackDNA(e,r,t){var n=[];n.length=4*e.byteLength;for(var o=-r,a=0;a<e.byteLength;a++)for(var u=e.getUint8(a),i=6;i>=0;i-=2){var s=BASE_PAIRS[u>>i&3];r>=0&&(n[o]=s),o++}return n.length=t,n}function markUnknownDNA(e,r,t){for(var n=r+e.length-1,o=0;o<t.unknownBlockStarts.length;o++){var a=t.unknownBlockStarts[o],u=t.unknownBlockLengths[o],i=a+u-1,s=Math.max(a,r),c=Math.min(i,n);if(!(c<s))for(var f=s;f<=c;f++)e[f-r]="N"}return e}function IncompleteChunkError(e){this.name="IncompleteChunkError",this.message=e||""}function parseWithException(e){try{return e()}catch(e){throw"RangeError"==e.name||"INDEX_SIZE_ERR"==e.name?(console.log("Error name: "+e.name),new IncompleteChunkError(e)):e}}function retryRemoteGet(e,r,t,n,o){return e.getBytes(r,t).then(o).catch(function(a){if("IncompleteChunkError"==a.name){if(t>n)throw"Couldn't parse the header from the first "+t+" bytes of the file. Corrupted 2bit file?";return retryRemoteGet(e,r,2*t,n,o)}throw a})}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_formatsTwoBitTypes=require("./formats/twoBitTypes"),_formatsTwoBitTypes2=_interopRequireDefault(_formatsTwoBitTypes),BASE_PAIRS=["T","C","A","G"],FIRST_HEADER_CHUNKSIZE=16384,FIRST_SEQUENCE_CHUNKSIZE=4095,MAX_CHUNKSIZE=1048576;IncompleteChunkError.prototype=Object.create(Error.prototype,{constructor:{value:IncompleteChunkError,writable:!0,configurable:!0}});var TwoBit=function(){function e(r){_classCallCheck(this,e),this.remoteFile=r;var t=_q2.default.defer();this.header=t.promise,retryRemoteGet(this.remoteFile,0,FIRST_HEADER_CHUNKSIZE,MAX_CHUNKSIZE,function(e){var r=parseWithException(function(){return parseHeader(e)});t.resolve(r)}).done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,r,t){var n=this;if(r>t)throw"Requested a 2bit range with start > stop ("+r+", "+t+")";return this._getSequenceHeader(e).then(function(e){var o=e.offset+e.dnaOffsetFromHeader,a=Math.floor(o+r/4),u=Math.ceil((t-r+1)/4)+1;return n.remoteFile.getBytes(a,u).then(function(n){return markUnknownDNA(unpackDNA(new DataView(n),r%4,t-r+1),r,e).join("")})}).then(function(e){return e})}},{key:"getContigList",value:function(){return this.header.then(function(e){return e.sequences.map(function(e){return e.name})})}},{key:"_getSequenceHeader",value:function(e){var r=this;return this.header.then(function(t){var n=_underscore2.default.findWhere(t.sequences,{name:e})||_underscore2.default.findWhere(t.sequences,{name:"chr"+e});if(null===n||void 0===n)throw"Invalid contig: "+e;var o=n;return retryRemoteGet(r.remoteFile,o.offset,FIRST_SEQUENCE_CHUNKSIZE,MAX_CHUNKSIZE,function(e){return parseWithException(function(){return parseSequenceRecord(e,o.offset)})})}).then(function(e){return e})}}]),e}();module.exports=TwoBit;

},{"./formats/twoBitTypes":205,"jbinary":32,"q":48,"underscore":178}],197:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var f=0;f<e.length;f++){var s=e[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,f,s){return f&&t(e.prototype,f),s&&t(e,s),e}}(),VirtualOffset=function(){function t(e,f){_classCallCheck(this,t),this.coffset=e,this.uoffset=f}return _createClass(t,[{key:"toString",value:function(){return this.coffset+":"+this.uoffset}},{key:"isLessThan",value:function(t){return this.coffset<t.coffset||this.coffset==t.coffset&&this.uoffset<t.uoffset}},{key:"isLessThanOrEqual",value:function(t){return this.coffset<=t.coffset||this.coffset==t.coffset&&this.uoffset<=t.uoffset}},{key:"isEqual",value:function(t){return this.coffset==t.coffset&&this.uoffset==t.uoffset}},{key:"compareTo",value:function(t){return this.coffset-t.coffset||this.uoffset-t.uoffset}},{key:"clone",value:function(){return new t(this.coffset,this.uoffset)}}],[{key:"fromBlob",value:function(e,f){f=f||0;var s=e[f]+256*e[f+1];return new t(e[f+2]+256*e[f+3]+65536*e[f+4]+16777216*e[f+5]+4294967296*e[f+6]+1099511627776*e[f+7],s)}}]),t}();module.exports=VirtualOffset;

},{}],198:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function computeIndexChunks(e){var n=new _jdataview2.default(e,0,e.byteLength,!0),t=1/0,r=[];n.getInt32();for(var i=n.getInt32(),u=0;u<i;u++){r.push(n.tell());for(var a=n.getInt32(),s=0;s<a;s++){n.getUint32();var o=n.getInt32();n.skip(16*o)}var h=n.getInt32();if(h){var l=_VirtualOffset2.default.fromBlob(n.getBytes(8),0),f=l.coffset+(l.uoffset?65536:0);t=f?Math.min(f,t):65536,n.skip(8*(h-1))}}return r.push(n.tell()),{chunks:_underscore2.default.zip(_underscore2.default.initial(r),_underscore2.default.rest(r)),minBlockIndex:t}}function readChunks(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("ChunksArray")}function readIntervals(e){for(var n=new Array(Math.floor(e.length/8)),t=0;t<e.length-7;t+=8)n[t>>3]=_VirtualOffset2.default.fromBlob(e,t);return n}function doChunksOverlap(e,n){return e.chunk_beg.isLessThanOrEqual(n.chunk_end)&&n.chunk_beg.isLessThanOrEqual(e.chunk_end)}function areChunksAdjacent(e,n){return e.chunk_beg.isEqual(n.chunk_end)||e.chunk_end.isEqual(n.chunk_beg)}function optimizeChunkList(e,n){e.sort(function(e,n){var t=e.chunk_beg.compareTo(n.chunk_beg);return 0===t&&(t=e.chunk_end.compareTo(n.chunk_end)),t});var t=[];return e.forEach(function(e){if(!e.chunk_end.isLessThan(n)){if(0===t.length)return void t.push(e);var r=t[t.length-1];doChunksOverlap(r,e)||areChunksAdjacent(r,e)?r.chunk_end.isLessThan(e.chunk_end)&&(r.chunk_end=e.chunk_end):t.push(e)}}),t}function reg2bins(e,n){var t,r=[];for(--n,r.push(0),t=1+(e>>26);t<=1+(n>>26);++t)r.push(t);for(t=9+(e>>23);t<=9+(n>>23);++t)r.push(t);for(t=73+(e>>20);t<=73+(n>>20);++t)r.push(t);for(t=585+(e>>17);t<=585+(n>>17);++t)r.push(t);for(t=4681+(e>>14);t<=4681+(n>>14);++t)r.push(t);return r}var _slicedToArray=function(){function e(e,n){var t=[],r=!0,i=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,u=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw u}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),ImmediateBaiFile=function(){function e(n,t,r){if(_classCallCheck(this,e),this.buffer=n,this.remoteFile=t,n)this.indexChunks=computeIndexChunks(n);else{if(!r)throw"Without index chunks, the entire BAI buffer must be loaded";this.indexChunks=r}this.indexCache=new Array(this.indexChunks.chunks.length),this.intervalsCache=new Array(this.indexChunks.chunks.length)}return _createClass(e,[{key:"getChunksForInterval",value:function(e){var n=this;if(e.contig<0||e.contig>this.indexChunks.chunks.length)return _q2.default.reject("Invalid contig "+e.contig);var t=reg2bins(e.start(),e.stop()+1);return this.indexForContig(e.contig).then(function(r){var i=_underscore2.default.chain(r.bins).filter(function(e){return t.indexOf(e.bin)>=0}).map(function(e){return readChunks(e.chunks)}).flatten().value();return i=optimizeChunkList(i,n.getIntervals(r.intervals,e.contig)[Math.max(0,Math.floor(e.start()/16384))])})}},{key:"indexForContig",value:function(e){var n=this.indexCache[e];if(n)return n;var t=_slicedToArray(this.indexChunks.chunks[e],2),r=t[0],i=t[1];return this.indexCache[e]=this.getSlice(r,i).then(function(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("BaiIndex")}),this.indexCache[e]}},{key:"getSlice",value:function(e,n){return this.buffer?_q2.default.when(this.buffer.slice(e,n)):this.remoteFile.getBytes(e,n-e+1)}},{key:"getIntervals",value:function(e,n){var t=this.intervalsCache[n];return t||(t=readIntervals(e),this.intervalsCache[n]=t,t)}}]),e}(),BaiFile=function(){function e(n,t){_classCallCheck(this,e),this.remoteFile=n,this.immediate=t?_q2.default.when(new ImmediateBaiFile(null,n,t)):n.getAll().then(function(e){return new ImmediateBaiFile(e,n,t)}),this.immediate.done()}return _createClass(e,[{key:"getChunksForInterval",value:function(e){return this.immediate.then(function(n){return n.getChunksForInterval(e)})}},{key:"getHeaderSize",value:function(){return this.immediate.then(function(e){return e.indexChunks.minBlockIndex})}}]),e}();module.exports=BaiFile;

},{"./VirtualOffset":197,"./formats/bamTypes":202,"jbinary":32,"jdataview":33,"q":48,"underscore":178}],199:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isAlignmentInRange(e,t,n){var r=new _ContigInterval2.default(e.refID,e.pos,e.pos+e.l_seq-1);return n?t.containsInterval(r):r.intersects(t)}function readAlignment(e,t,n,r){var a=e.getInt32(t);if((t+=4)+a>e.byteLength)return null;var i=e.buffer.slice(t,t+a);return{read:new _SamRead2.default(i,n.clone(),r),readLength:4+a}}function readAlignmentsToEnd(e,t,n,r,a,i,u){var f=new _jdataview2.default(e,0,e.byteLength,!0),l=!1,o=0;a=a.clone();var s=0;try{for(;o<e.byteLength;){var c=readAlignment(f,o,a,t);if(!c)break;var d=c.read,h=c.readLength;o+=h,isAlignmentInRange(d,n,r)&&u.push(d),a.uoffset+=h;var _=i[s].buffer.byteLength;a.uoffset>=_&&(a.uoffset-=_,a.coffset+=i[s].compressedLength,s++);var g=new _ContigInterval2.default(d.refID,d.pos,d.pos+1);if(g.contig>n.contig||g.contig==n.contig&&g.start()>n.stop()){l=!0;break}}}catch(e){if(!(e instanceof RangeError))throw e}return{shouldAbort:l,nextOffset:a}}function fetchAlignments(e,t,n,r,a){function i(a){if(0===a.length)return void l.resolve(f);var o=a[0],s=o.chunk_beg.coffset,c=o.chunk_end.coffset,d=Math.min(kMaxFetch,c+65536-s);e.getBytes(s,d).then(function(d){u++,l.notify({numRequests:u});var h={filename:e.url,initialOffset:s},_=_utils2.default.inflateConcatenatedGzip(d,c-s,h),g=_[_.length-1],v=s+g.offset-1,m=null;_.length>1&&v<c&&(m={chunk_beg:new _VirtualOffset2.default(v+1,0),chunk_end:o.chunk_end});var y=_.map(function(e){return e.buffer});y[0]=y[0].slice(o.chunk_beg.uoffset);var p=_utils2.default.concatArrayBuffers(y);if(p.byteLength>0){var b=readAlignmentsToEnd(p,t,n,r,o.chunk_beg,_,f),q=b.shouldAbort,w=b.nextOffset;if(q)return void l.resolve(f);m&&(m.chunk_beg=w)}else m=null;i((null!==m?[m]:[]).concat(_underscore2.default.rest(a)))})}var u=0,f=[],l=_q2.default.defer();return i(a),l.promise}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var u,f=e[Symbol.iterator]();!(r=(u=f.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&f.return&&f.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_bai=require("./bai"),_bai2=_interopRequireDefault(_bai),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_SamRead=require("./SamRead"),_SamRead2=_interopRequireDefault(_SamRead),kMaxFetch=131072,Bam=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.remoteFile=t,this.index=n?new _bai2.default(n,r):null,this.hasIndexChunks=!!r;var i=this.index?this.index.getHeaderSize():_q2.default.when(131070);this.header=i.then(function(e){var t=_q2.default.defer();return _q2.default.when().then(function(){t.notify({status:"Fetching BAM header"})}),_utils2.default.pipePromise(t,a.remoteFile.getBytes(0,e).then(function(e){var t=_utils2.default.inflateGzip(e);return new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET).read("BamHeader")})),t.promise}),this.header.done()}return _createClass(e,[{key:"readAll",value:function(){return this.remoteFile.getAll().then(function(e){var t=_utils2.default.inflateGzip(e),n=new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET),r=n.read("BamFile"),a=new _VirtualOffset2.default(0,0),i=function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength-1)};return r.alignments=r.alignments.map(function(e){var t=new _SamRead2.default(i(e.contents),a,"");return-1!=t.refID&&(t.ref=r.header.references[t.refID].name),t}),r})}},{key:"readAtOffset",value:function(e){var t=this.remoteFile.getBytes(e.coffset,kMaxFetch).then(function(t){var n=_utils2.default.inflateGzip(t);return readAlignment(new _jdataview2.default(n,0,n.byteLength,!0),e.uoffset,e,"").read});return _q2.default.all([t,this.header]).then(function(e){var t=_slicedToArray(e,2),n=t[0],r=t[1];return n.ref=r.references[n.refID].name,n})}},{key:"getContigIndex",value:function(e){return this.header.then(function(t){for(var n=0;n<t.references.length;n++){var r=t.references[n].name;if(r==e||r=="chr"+e||"chr"+r==e)return{idx:n,name:r}}throw"Invalid contig name: "+e})}},{key:"getFeaturesInRange",value:function(e,t){var n=this,r=t||!1;if(!this.index)throw"Range searches are only supported on BAMs with BAI indices.";var a=this.index;return this.getContigIndex(e.contig).then(function(t){var i=t.idx,u=t.name,f=_q2.default.defer();_q2.default.when().then(function(){f.notify({status:"Fetching BAM index"})});var l=new _ContigInterval2.default(i,e.start(),e.stop()),o=a.getChunksForInterval(l).then(function(e){return fetchAlignments(n.remoteFile,u,l,r,e)}).then(function(e){return e});return _utils2.default.pipePromise(f,o),f.promise})}}]),e}();module.exports=Bam;

},{"../ContigInterval":182,"../utils":226,"./SamRead":195,"./VirtualOffset":197,"./bai":198,"./formats/bamTypes":202,"jbinary":32,"jdataview":33,"q":48,"underscore":178}],200:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function splitCodingExons(t,e){return _underscore2.default.flatten(t.map(function(t){if(t.containsInterval(e))return[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)].filter(function(t){return t.start<=t.stop});var n=e.contains(t.start);return n==e.contains(t.stop)?[new CodingInterval(t.start,t.stop,n)]:n?[new CodingInterval(t.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)]:[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,t.stop,!0)]}))}var _get=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=i,n=a,r=!0,s=u=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval2=require("../Interval"),_Interval3=_interopRequireDefault(_Interval2),CodingInterval=function(t){function e(t,n,r){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.isCoding=r}return _inherits(e,t),e}(_Interval3.default);module.exports={splitCodingExons:splitCodingExons,CodingInterval:CodingInterval};

},{"../Interval":185,"underscore":178}],201:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),Feature=function(){function e(t){_classCallCheck(this,e),this.id=t.id,this.featureType=t.featureType,this.position=t.position,this.score=t.score}return _createClass(e,[{key:"getKey",value:function(){return this.id}},{key:"getInterval",value:function(){return this.position}},{key:"getCoverage",value:function(e){return{range:this.getInterval(),opInfo:null}}},{key:"intersects",value:function(e){return e.intersects(this.position)}}],[{key:"fromGA4GH",value:function(t){var n=new _ContigInterval2.default(t.referenceName,parseInt(t.start),parseInt(t.end));return new e({id:t.id,featureType:t.featureType,position:n,score:1e3})}}]),e}();module.exports=Feature;

},{"../ContigInterval":182}],202:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_VirtualOffset=require("../VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_helpers=require("./helpers"),SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],ThinAlignment={refID:"int32",pos:"int32",l_read_name:"uint8",MAPQ:"uint8",bin:"uint16",n_cigar_op:"uint16",FLAG:"uint16",l_seq:"int32",next_refID:"int32",next_pos:"int32",tlen:"int32"},Flags={READ_PAIRED:1,PROPER_PAIR:2,READ_UNMAPPED:4,MATE_UNMAPPED:8,READ_STRAND:16,MATE_STRAND:32,FIRST_OF_PAIR:64,SECOND_OF_PAIR:128,NOT_PRIMARY_ALIGNMENT:256,READ_FAILS_VENDOR_QUALITY_CHECK:512,DUPLICATE_READ:1024,SUPPLEMENTARY_ALIGNMENT:2048},ThickAlignment=_underscore2.default.extend(_underscore2.default.clone(ThinAlignment),{read_name:[_helpers.nullString,"l_read_name"],cigar:["array","CigarOp","n_cigar_op"],seq:["FourBitSequence","l_seq"],qual:["array","uint8","l_seq"],auxiliary:["array",{tag:["string",2],val_type:"char",value:["if",function(e){return"B"==e.val_type},{val_type:"char",num_values:"int32",values:["array","AuxiliaryValue","num_values"]},"AuxiliaryValue"]}]}),TYPE_SET={"jBinary.littleEndian":!0,BamHeader:{_magic:["const",["string",4],"BAM",!0],l_text:"int32",text:["string","l_text"],n_ref:"int32",references:["array",{l_name:"int32",name:[_helpers.nullString,"l_name"],l_ref:"int32"},"n_ref"]},BamAlignment:{block_size:"int32",contents:["blob","block_size"]},AuxiliaryValue:["if",function(e){return"A"==e.val_type},"char",["if",function(e){return"c"==e.val_type},"int8",["if",function(e){return"C"==e.val_type},"uint8",["if",function(e){return"s"==e.val_type},"int16",["if",function(e){return"S"==e.val_type},"uint16",["if",function(e){return"i"==e.val_type},"int32",["if",function(e){return"I"==e.val_type},"uint32",["if",function(e){return"f"==e.val_type},"float32",["if",function(e){return"Z"==e.val_type},"string0",["skip",0]]]]]]]]]],CigarOp:_jbinary2.default.Template({baseType:"uint32",read:function(e){var n=this.baseRead();return{length:n>>4,op:CIGAR_OPS[15&n]}}}),FourBitSequence:_jbinary2.default.Template({setParams:function(e){this.lengthField=e;var n=function(n){return Math.floor((+n[e]+1)/2)};this.baseType=["array","uint8",n]},read:function(e){var n=+e[this.lengthField];return this.baseRead().map(function(e,t){return SEQUENCE_VALUES[e>>4]+(2*t+1<n?SEQUENCE_VALUES[15&e]:"")}).join("")}}),BamFile:{header:"BamHeader",alignments:["array","BamAlignment"]},VirtualOffset:_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead();return new _VirtualOffset2.default(65536*e.hi+(e.lo>>>16),65535&e.lo)}}),ChunksArray:["array",{chunk_beg:"VirtualOffset",chunk_end:"VirtualOffset"}],IntervalsArray:["array","VirtualOffset"],BaiIndex:{n_bin:"int32",bins:["array",{bin:"uint32",n_chunk:"int32",chunks:["blob",function(e){return 16*e.n_chunk}]},"n_bin"],n_intv:"int32",intervals:["blob",function(e){return 8*e.n_intv}]},BaiFile:{magic:["const",["string",4],"BAI"],n_ref:"int32",indices:["array","BaiIndex","n_ref"],n_no_coor:_helpers.uint64native}};module.exports={TYPE_SET:TYPE_SET,ThinAlignment:ThinAlignment,ThickAlignment:ThickAlignment,Flags:Flags};

},{"../VirtualOffset":197,"./helpers":204,"jbinary":32,"underscore":178}],203:[function(require,module,exports){
"use strict";var _helpers=require("./helpers"),TYPE_SET={"jBinary.littleEndian":!0,Header:{_magic:["const","uint32",2273964779,!0],version:"uint16",zoomLevels:"uint16",chromosomeTreeOffset:"uint64",unzoomedDataOffset:"uint64",unzoomedIndexOffset:"uint64",fieldCount:"uint16",definedFieldCount:"uint16",autoSqlOffset:"uint64",totalSummaryOffset:"uint64",uncompressBufSize:"uint32",extensionOffset:"uint64",zoomHeaders:["array","ZoomHeader","zoomLevels"],totalSummary:(0,_helpers.typeAtOffset)("TotalSummary","totalSummaryOffset"),chromosomeTree:(0,_helpers.typeAtOffset)("BPlusTree","chromosomeTreeOffset")},TotalSummary:{basesCovered:"uint64",minVal:"float64",maxVal:"float64",sumData:"float64",sumSquared:"float64"},ZoomHeader:{reductionLevel:"uint32",_reserved:"uint32",dataOffset:"uint64",indexOffset:"uint64"},BPlusTree:{magic:["const","uint32",2026540177,!0],blockSize:"uint32",keySize:"uint32",valSize:"uint32",itemCount:"uint64",_reserved2:["skip",4],_reserved3:["skip",4],nodes:"BPlusTreeNode"},BPlusTreeNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf",{key:["string","keySize"],id:"uint32",size:"uint32"},{key:["string","keySize"],offset:"uint64"}],"count"]},CirTree:{_magic:["const","uint32",610839776,!0],blockSize:"uint32",itemCount:"uint64",startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",fileSize:"uint64",itemsPerSlot:"uint32",_reserved:["skip",4],blocks:"CirNode"},CirNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf","LeafData","NonLeafData"],"count"]},LeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64",size:"uint64"},NonLeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64"},BedEntry:{chrId:"uint32",start:"uint32",stop:"uint32",rest:"string0"},BedBlock:["array","BedEntry"]};module.exports={TYPE_SET:TYPE_SET};

},{"./helpers":204}],204:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function typeAtOffset(e,t){return _jbinary2.default.Template({baseType:e,read:function(e){return 0==+e[t]?null:this.binary.read(this.baseType,+e[t])}})}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),sizedBlock=_jbinary2.default.Type({params:["itemType","lengthField"],resolve:function(e){this.itemType=e(this.itemType)},read:function(e){var t=this.binary.tell(),i=+e[this.lengthField];return this.binary.skip(i),this.binary.slice(t,t+i).read(this.itemType)}}),nullString=_jbinary2.default.Template({setParams:function(e){this.baseType=["binary",e]},read:function(){return this.baseRead().read("string0")}}),uint64native=_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead(),t=+e;if(t<0||1+t==t)throw new RangeError("Number out of precise floating point range: "+e);return+e}}),LazyArray=function(){function e(t,i,r){_classCallCheck(this,e),this.bytesPerItem=i,this.jb=t,this.itemType=r,this.length=this.jb.view.byteLength/this.bytesPerItem}return _createClass(e,[{key:"get",value:function(e){return this.jb.seek(e*this.bytesPerItem),this.jb.read(this.itemType)}},{key:"getAll",value:function(){return this.jb.seek(0),this.jb.read(["array",this.itemType,this.length])}}]),e}(),lazyArray=_jbinary2.default.Type({params:["itemType","bytesPerItem","numItems"],read:function(){var e=this.toValue(this.numItems),t=this.toValue(this.bytesPerItem);if(void 0===e||void 0===t)throw"bytesPerItem and numItems must be set for lazyArray";var i=this.binary.tell(),r=e*t,n=this.binary.slice(i,i+r);return this.binary.skip(r),new LazyArray(n,t,this.itemType)}});module.exports={typeAtOffset:typeAtOffset,sizedBlock:sizedBlock,nullString:nullString,uint64native:uint64native,lazyArray:lazyArray};

},{"jbinary":32}],205:[function(require,module,exports){
"use strict";var TYPE_SET={"jBinary.littleEndian":!0,Header:{magic:["const","uint32",440477507,!0],version:["const","uint32",0,!0],sequenceCount:"uint32",reserved:"uint32",sequences:["array","SequenceHeader","sequenceCount"]},SequenceHeader:{nameSize:"uint8",name:["string","nameSize"],offset:"uint32"},SequenceRecord:{dnaSize:"uint32",nBlockCount:"uint32",nBlockStarts:["array","uint32","nBlockCount"],nBlockSizes:["array","uint32","nBlockCount"],maskBlockCount:"uint32"}};module.exports={TYPE_SET:TYPE_SET};

},{}],206:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=function(){function e(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var u,o=e[Symbol.iterator]();!(r=(u=o.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(e){a=!0,i=e}finally{try{!r&&o.return&&o.return()}finally{if(a)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_Alignment=require("../Alignment"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),Gene=function(){function e(t){_classCallCheck(this,e),this.position=t.position,this.id=t.id,this.score=t.score,this.strand=t.strand,this.codingRegion=t.codingRegion,this.exons=t.exons,this.geneId=t.geneId,this.name=t.name}return _createClass(e,[{key:"getKey",value:function(){return this.id}},{key:"getInterval",value:function(){return this.position}},{key:"intersects",value:function(e){return e.intersects(this.position)}}],[{key:"fromGA4GH",value:function(t){var n=new _ContigInterval2.default(t.referenceName,parseInt(t.start),parseInt(t.end)),r=(0,_Alignment.ga4ghStrandToStrand)(t.strand),a=t.id&&""!=t.id?t.id:t.geneSymbol&&""!=t.geneSymbol?t.geneSymbol:t.name,i=t.attributes.attr.blockStarts,u=t.attributes.attr.blockSizes,o=[];if(i&&u&&i.values&&u.values){var s=_underscore2.default.map(i.values[0].stringValue.split(","),function(e){return parseInt(e)}),l=_underscore2.default.map(u.values[0].stringValue.split(","),function(e){return parseInt(e)});o=_underscore2.default.zip(s,l).map(function(e){var t=_slicedToArray(e,2),r=t[0],a=t[1];return new _Interval2.default(n.start()+r,n.start()+r+a)})}var c=t.attributes.attr.thickStart,d=t.attributes.attr.thickEnd,f=null;return f=c.values&&d.values?new _Interval2.default(parseInt(c.values[0].stringValue),parseInt(d.values[0].stringValue)):new _Interval2.default(n.start(),n.end()),new e({position:n,id:a,score:1e3,strand:r,codingRegion:f,exons:o,geneId:t.geneSymbol,name:t.name})}}]),e}();module.exports=Gene;

},{"../Alignment":181,"../ContigInterval":182,"../Interval":185,"underscore":178}],207:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),GenericFeature=function e(t,i,n){_classCallCheck(this,e),this.id=n.id,this.position=n.position,this.gFeature=n};module.exports=GenericFeature;

},{"../ContigInterval":182}],208:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),Variant=function(){function t(e){_classCallCheck(this,t),this.contig=e.contig,this.position=parseInt(e.position),this.ref=e.ref,this.alt=e.alt,this.id=e.id,this.majorFrequency=e.majorFrequency,this.minorFrequency=e.minorFrequency,this.vcfLine=e.vcfLine}return _createClass(t,[{key:"intersects",value:function(t){return t.intersects(new _ContigInterval2.default(this.contig,this.position,this.position+1))}}],[{key:"fromGA4GH",value:function(e){return new t({contig:e.referenceName,position:parseInt(e.start),id:e.id,ref:e.referenceBases,alt:e.alternateBases,majorFrequency:0,minorFrequency:0,vcfLine:""})}}]),t}(),Call=function t(e,n,i,r){_classCallCheck(this,t),this.callSetName=e,this.genotype=n,this.callSetId=i,this.phaseset=r},VariantContext=function(){function t(e,n){_classCallCheck(this,t),this.variant=e,this.calls=n}return _createClass(t,[{key:"intersects",value:function(t){var e=new _ContigInterval2.default(this.variant.contig,this.variant.position,this.variant.position+1);return t.intersects(e)}}]),t}();module.exports={Call:Call,Variant:Variant,VariantContext:VariantContext};

},{"../ContigInterval":182}],209:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function extractSamples(t){return _underscore2.default.filter(t,function(t){return t.startsWith("#CHROM")})[0].split("\t").splice(9)}function extractLocusLine(t){var e=t.indexOf("\t"),n=t.indexOf("\t",e+1);return{contig:t.slice(0,e),position:Number(t.slice(e+1,n)),line:t}}function extractVariantContext(t,e){var n=e.split("\t"),r=null,i=null,a=[];if(n.length>=7){for(var o=n[7].split(";"),s=0;s<o.length;s++){var u=o[s];if(u.startsWith("AF=")){r=0,i=1;for(var c=u.substr(3).split(","),l=0;l<c.length;l++){var f=parseFloat(c[l]);r=Math.max(r,f),i=Math.min(i,f)}}}if(n.length>9){var h=0;for(s=9;s<n.length;s++){var p=n[s].split(":")[0].split("/").map(function(t){return parseInt(t)});if(2==p.length&&(1==parseInt(p[0])||1==parseInt(p[1]))){var g=new _variant.Call(t[h],p,t[h],"True");a=a.concat(g)}h++}}}var v=n[0],m=Number(n[1]);return new _variant.VariantContext(new _variant.Variant({contig:v,position:m,id:n[2],ref:n[3],alt:n[4],majorFrequency:r,minorFrequency:i,vcfLine:e}),a)}function compareLocusLine(t,e){return t.contig<e.contig?-1:t.contig>e.contig?1:t.position-e.position}function lowestIndex(t,e,n){for(var r=0,i=t.length;r<i;){var a=Math.floor((r+i)/2);n(t[a],e)<0?r=a+1:i=a}return r}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_variant=require("./variant"),ImmediateVcfFile=function(){function t(e,n){_classCallCheck(this,t),this.samples=e,this.lines=n,this.contigMap=this.extractContigs()}return _createClass(t,[{key:"extractContigs",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var n=this.lines[e];""!=n.contig&&t.push(n.contig)}var r={};return t.forEach(function(t){"chr"==t.slice(0,3)?r[t.slice(4)]=t:r["chr"+t]=t,r[t]=t}),r}},{key:"getFeaturesInRange",value:function(t){var e=this,n=this.lines,r=this.contigMap[t.contig];if(!r)return[];for(var i={contig:r,position:t.start(),line:""},a={contig:r,position:t.stop(),line:""},o=lowestIndex(n,i,compareLocusLine),s=[],u=o;u<n.length&&!(compareLocusLine(n[u],a)>0);u++)s.push(n[u]);return s.map(function(t){return extractVariantContext(e.samples,t.line)})}}]),t}(),VcfFile=function(){function t(e){_classCallCheck(this,t),this.remoteFile=e,this.immediate=this.remoteFile.getAllString().then(function(t){var e=t.split("\n"),n=e.filter(function(t){return t.length&&"#"!=t[0]}).map(extractLocusLine);return[extractSamples(e.filter(function(t){return t.length&&"#"==t[0]})),n]}).then(function(t){var e=t[0],n=t[1];return n.sort(compareLocusLine),new ImmediateVcfFile(e,n)}),this.immediate.done()}return _createClass(t,[{key:"getCallNames",value:function(){return this.immediate.then(function(t){return t.samples})}},{key:"getFeaturesInRange",value:function(t){return this.immediate.then(function(e){return e.getFeaturesInRange(t)})}}]),t}();module.exports={VcfFile:VcfFile};

},{"../ContigInterval":182,"./variant":208,"underscore":178}],210:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function n(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);i.trigger("newdata",n),i.trigger("networkdone")}function r(e){return e?_underscore2.default.filter(u,function(n){return n.intersects(e)}):[]}var t=JSON.parse(e),u=[];_underscore2.default.isEmpty(t)||(u=_underscore2.default.values(t.alignments).map(function(e){return new _GA4GHAlignment2.default(e)}));var i={rangeChanged:n,getFeaturesInRange:r,on:function(){},once:function(){},off:function(){},trigger:function(e,n){}};return _underscore2.default.extend(i,_backbone.Events),i}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment);module.exports={create:create};

},{"../ContigInterval":182,"../GA4GHAlignment":184,"backbone":1,"underscore":178}],211:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function r(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop);a.trigger("newdata",r),a.trigger("networkdone")}function t(e){return e?_underscore2.default.filter(u,function(r){return r.intersects(e)}):[]}var n=JSON.parse(e),u=[];_underscore2.default.isEmpty(n)||(u=_underscore2.default.values(n.features).map(function(e){return _dataFeature2.default.fromGA4GH(e)}));var a={rangeChanged:r,getFeaturesInRange:t,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(a,_backbone.Events),a}var _dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval);module.exports={create:create};

},{"../ContigInterval":182,"../data/feature":201,"backbone":1,"underscore":178}],212:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function r(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop);c.trigger("newdata",r),c.trigger("networkdone")}function n(e){if(!e)return[];var r=_underscore2.default.filter(i,function(r){return r.intersects(e)});return _underscore2.default.map(r,function(e){return e.variant})}function t(e){return e?_underscore2.default.filter(i,function(r){return r.intersects(e)}):[]}function a(){return _q2.default.resolve(o)}var u=JSON.parse(e),i=[],o=[];_underscore2.default.isEmpty(u)||(i=_underscore2.default.values(u.variants).map(function(e){return new _dataVariant.VariantContext(_dataVariant.Variant.fromGA4GH(e),e.calls)}),o=_underscore2.default.map(i[0].calls,function(e){return e.callSetName}));var c={rangeChanged:r,getVariantsInRange:n,getGenotypesInRange:t,getCallNames:a,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(c,_backbone.Events),c}var _dataVariant=require("../data/variant"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval);module.exports={create:create};

},{"../ContigInterval":182,"../data/variant":208,"backbone":1,"q":48,"underscore":178}],213:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findReference(e){return _underscore2.default.find(e,function(e){return!!e.track.isReference})}function create(e,r){var t="string"==typeof e?document.getElementById(e):e;if(!t)throw new Error("Attempted to create pileup with non-existent element "+e.toString());var a=r.tracks.map(function(e){var r=e.data?e.data:e.viz.component.defaultSource;if(!r){var t=null!=e.viz.component.displayName?e.viz.component.displayName:"track";throw new Error("Track '"+t+"' doesn't have a default data source; you must specify one when initializing it.")}return{visualization:e.viz,source:r,track:e}}),o=findReference(a);if(!o)throw new Error("You must include at least one track with type=reference");var n=_ShimDependencies.ReactDOM.render(_ShimDependencies.React.createElement(_Root2.default,{referenceSource:o.source,tracks:a,controlsOff:r.controlsOff,initialRange:r.range}),t),u=null,i=document.body;if(!i)throw new Error("Failed to match: document.body");if(!i.contains(t)){u=new MutationObserver(function(e){e.forEach(function(e){if("childList"===e.type){for(var r=!1,a=0;a<e.addedNodes.length;a++)(e.addedNodes[a]===t||e.addedNodes[a].contains(t))&&(r=!0);if(r){if(!n)throw"ReactElement was not initialized properly";n.setState({updateSize:!0})}}})});var c={attributes:!0,childList:!0,characterData:!0,subtree:!0};u.observe(document,c)}return{setRange:function(e){if(null===n)throw"Cannot call setRange on a destroyed pileup";n.handleRangeChange(e)},getRange:function(){if(null===n)throw"Cannot call getRange on a destroyed pileup";if(null!=n.state.range)return _underscore2.default.clone(n.state.range);throw"Cannot call setRange on non-existent range"},destroy:function(){if(!a)throw"Cannot call destroy() twice on the same pileup";a.forEach(function(e){e.source.off()}),_ShimDependencies.ReactDOM.unmountComponentAtNode(t),n=null,o=null,a=null,null!==u&&void 0!==u&&u.disconnect()}}}function makeVizObject(e){return function(r){return r=_underscore2.default.extend({},e.defaultOptions,r),{component:e,options:r}}}var _types=require("./types"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ShimDependencies=require("./ShimDependencies"),_sourcesTwoBitDataSource=require("./sources/TwoBitDataSource"),_sourcesTwoBitDataSource2=_interopRequireDefault(_sourcesTwoBitDataSource),_sourcesBigBedDataSource=require("./sources/BigBedDataSource"),_sourcesBigBedDataSource2=_interopRequireDefault(_sourcesBigBedDataSource),_sourcesVcfDataSource=require("./sources/VcfDataSource"),_sourcesVcfDataSource2=_interopRequireDefault(_sourcesVcfDataSource),_sourcesBamDataSource=require("./sources/BamDataSource"),_sourcesBamDataSource2=_interopRequireDefault(_sourcesBamDataSource),_sourcesEmptySource=require("./sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_jsonGA4GHAlignmentJson=require("./json/GA4GHAlignmentJson"),_jsonGA4GHAlignmentJson2=_interopRequireDefault(_jsonGA4GHAlignmentJson),_jsonGA4GHVariantJson=require("./json/GA4GHVariantJson"),_jsonGA4GHVariantJson2=_interopRequireDefault(_jsonGA4GHVariantJson),_jsonGA4GHFeatureJson=require("./json/GA4GHFeatureJson"),_jsonGA4GHFeatureJson2=_interopRequireDefault(_jsonGA4GHFeatureJson),_sourcesGA4GHAlignmentSource=require("./sources/GA4GHAlignmentSource"),_sourcesGA4GHAlignmentSource2=_interopRequireDefault(_sourcesGA4GHAlignmentSource),_sourcesGA4GHVariantSource=require("./sources/GA4GHVariantSource"),_sourcesGA4GHVariantSource2=_interopRequireDefault(_sourcesGA4GHVariantSource),_sourcesGA4GHFeatureSource=require("./sources/GA4GHFeatureSource"),_sourcesGA4GHFeatureSource2=_interopRequireDefault(_sourcesGA4GHFeatureSource),_sourcesGA4GHGeneSource=require("./sources/GA4GHGeneSource"),_sourcesGA4GHGeneSource2=_interopRequireDefault(_sourcesGA4GHGeneSource),_vizCoverageTrack=require("./viz/CoverageTrack"),_vizCoverageTrack2=_interopRequireDefault(_vizCoverageTrack),_vizGenomeTrack=require("./viz/GenomeTrack"),_vizGenomeTrack2=_interopRequireDefault(_vizGenomeTrack),_vizGeneTrack=require("./viz/GeneTrack"),_vizGeneTrack2=_interopRequireDefault(_vizGeneTrack),_vizFeatureTrack=require("./viz/FeatureTrack"),_vizFeatureTrack2=_interopRequireDefault(_vizFeatureTrack),_vizLocationTrack=require("./viz/LocationTrack"),_vizLocationTrack2=_interopRequireDefault(_vizLocationTrack),_vizPileupTrack=require("./viz/PileupTrack"),_vizPileupTrack2=_interopRequireDefault(_vizPileupTrack),_vizScaleTrack=require("./viz/ScaleTrack"),_vizScaleTrack2=_interopRequireDefault(_vizScaleTrack),_vizVariantTrack=require("./viz/VariantTrack"),_vizVariantTrack2=_interopRequireDefault(_vizVariantTrack),_vizGenotypeTrack=require("./viz/GenotypeTrack"),_vizGenotypeTrack2=_interopRequireDefault(_vizGenotypeTrack),_Root=require("./Root"),_Root2=_interopRequireDefault(_Root),pileup={create:create,formats:{bam:_sourcesBamDataSource2.default.create,alignmentJson:_jsonGA4GHAlignmentJson2.default.create,variantJson:_jsonGA4GHVariantJson2.default.create,featureJson:_jsonGA4GHFeatureJson2.default.create,vcf:_sourcesVcfDataSource2.default.create,twoBit:_sourcesTwoBitDataSource2.default.create,bigBed:_sourcesBigBedDataSource2.default.create,GAReadAlignment:_sourcesGA4GHAlignmentSource2.default.create,GAVariant:_sourcesGA4GHVariantSource2.default.create,GAFeature:_sourcesGA4GHFeatureSource2.default.create,GAGene:_sourcesGA4GHGeneSource2.default.create,empty:_sourcesEmptySource2.default.create},viz:{coverage:makeVizObject(_vizCoverageTrack2.default),genome:makeVizObject(_vizGenomeTrack2.default),genes:makeVizObject(_vizGeneTrack2.default),features:makeVizObject(_vizFeatureTrack2.default),location:makeVizObject(_vizLocationTrack2.default),scale:makeVizObject(_vizScaleTrack2.default),variants:makeVizObject(_vizVariantTrack2.default),genotypes:makeVizObject(_vizGenotypeTrack2.default),pileup:makeVizObject(_vizPileupTrack2.default)},enum:{variants:{allelFrequencyStrategy:_types.AllelFrequencyStrategy}},version:"0.6.11"};module.exports=pileup,"undefined"!=typeof window&&(window.pileup=pileup);

},{"./Root":190,"./ShimDependencies":192,"./json/GA4GHAlignmentJson":210,"./json/GA4GHFeatureJson":211,"./json/GA4GHVariantJson":212,"./sources/BamDataSource":215,"./sources/BigBedDataSource":216,"./sources/EmptySource":217,"./sources/GA4GHAlignmentSource":218,"./sources/GA4GHFeatureSource":219,"./sources/GA4GHGeneSource":220,"./sources/GA4GHVariantSource":221,"./sources/TwoBitDataSource":222,"./sources/VcfDataSource":223,"./types":225,"./viz/CoverageTrack":229,"./viz/FeatureTrack":231,"./viz/GeneTrack":232,"./viz/GenomeTrack":234,"./viz/GenotypeTrack":235,"./viz/LocationTrack":236,"./viz/PileupTrack":238,"./viz/ScaleTrack":239,"./viz/VariantTrack":241,"underscore":178}],214:[function(require,module,exports){
"use strict";function linear(){var n=!1,t=[0,1],r=[0,1],i=function(i){return n&&(i=Math.max(Math.min(i,t[1]),t[0])),(i-t[0])/(t[1]-t[0])*(r[1]-r[0])+r[0]};return i.clamp=function(t){return void 0===t?n:(n=t,this)},i.domain=function(n){return void 0===n?t:(t=n,this)},i.range=function(n){return void 0===n?r:(r=n,this)},i.invert=function(i){if(n)throw"Can't invert a clamped linear scale.";return(i-r[0])/(r[1]-r[0])*(t[1]-t[0])+t[0]},i.nice=function(){var n=t,r=Math.abs(n[1]-n[0]),i=Math.pow(10,Math.floor(Math.log(r/10)/Math.LN10)),o=10/r*i;o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2);var a,e={floor:function(n){return Math.floor(n/i)*i},ceil:function(n){return Math.ceil(n/i)*i}},u=0,c=1,l=t[u],f=t[c];return f<l&&(a=u,u=c,c=a,a=l,l=f,f=a),t[u]=e.floor(l),t[c]=e.ceil(f),this},i}module.exports={linear:linear};

},{}],215:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function createFromBamFile(e){function t(e){var t=e.getKey();i[t]||(i[t]=e)}function r(e){e.references.forEach(function(e){var t=e.name;u[t]=t,u["chr"+t]=t,"chr"==t.slice(0,3)&&(u[t.slice(3)]=t)})}function n(n){var a=_underscore2.default.isEmpty(u)?e.header.then(r):_q2.default.when();return _q2.default.when().then(function(){a.isPending()&&!e.hasIndexChunks&&f.trigger("networkprogress",{status:"Fetching BAM index -- use index chunks to speed this up"})}).done(),a.then(function(){var r=u[n.contig],a=new _ContigInterval2.default(r,n.start,n.stop);if(a.isCoveredBy(o))return _q2.default.when();a=a.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var i=a.complementIntervals(o);return o.push(a),o=_ContigInterval2.default.coalesce(o),_q2.default.all(i.map(function(r){return e.getFeaturesInRange(r).progress(function(e){f.trigger("networkprogress",e)}).then(function(e){e.forEach(function(e){return t(e)}),f.trigger("networkdone"),f.trigger("newdata",r)})}))})}function a(e){if(!e)return[];if(_underscore2.default.isEmpty(u))return[];var t=new _ContigInterval2.default(u[e.contig],e.start(),e.stop());return _underscore2.default.filter(i,function(e){return e.intersects(t)})}var i={},u={},o=[],f={rangeChanged:function(e){n(e).done()},getFeaturesInRange:a,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track data: "+JSON.stringify(e));var r=e.indexUrl;if(!r)throw new Error("Missing indexURL from track data: "+JSON.stringify(e));return createFromBamFile(e.indexChunks?new _dataBam2.default(new _RemoteFile2.default(t),new _RemoteFile2.default(r),e.indexChunks):new _dataBam2.default(new _RemoteFile2.default(t),new _RemoteFile2.default(r)))}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataBam=require("../data/bam"),_dataBam2=_interopRequireDefault(_dataBam),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),BASE_PAIRS_PER_FETCH=100,ZERO_BASED=!1;module.exports={create:create,createFromBamFile:createFromBamFile};

},{"../ContigInterval":182,"../RemoteFile":188,"../data/bam":199,"backbone":1,"q":48,"underscore":178}],216:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parseBedFeature(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop),t=e.rest.split("\t"),n=t[0]?t[0]:r.toString(),a=t[1]?parseInt(t[1]):1e3,i=(0,_Alignment.strToStrand)(t[2]),o=t[3]&&t[4]?new _Interval2.default(Number(t[3]),Number(t[4])):new _Interval2.default(e.start,e.stop),u=t[9]?t[9]:n,l=t[10]?t[10]:"",d=[];if(t[7]&&t[8]){var c=t[7].replace(/,*$/,"").split(",").map(Number),f=t[8].replace(/,*$/,"").split(",").map(Number);d=_underscore2.default.zip(f,c).map(function(r){var t=_slicedToArray(r,2),n=t[0],a=t[1];return new _Interval2.default(e.start+n,e.start+n+a)})}return new _dataGene2.default({position:r,id:n,score:a,strand:i,codingRegion:o,geneId:u,name:l,exons:d})}function createFromBigBedFile(e){function r(e){a[e.id]||(a[e.id]=e)}function t(e){if(!e)return[];var r=[];return _underscore2.default.each(a,function(t){e.intersects(t.position)&&r.push(t)}),r}function n(t){var n=new _ContigInterval2.default(t.contig,t.start,t.stop);return n.isCoveredBy(i)?_q2.default.when():(i.push(n),i=_ContigInterval2.default.coalesce(i),e.getFeatureBlocksOverlapping(n).then(function(e){e.forEach(function(e){i.push(e.range),i=_ContigInterval2.default.coalesce(i),e.rows.map(parseBedFeature).forEach(function(e){return r(e)})}),o.trigger("newdata",n),o.trigger("networkdone")}))}var a={},i=[],o={rangeChanged:function(e){n(e).done()},getFeaturesInRange:t,on:function(){},once:function(){},off:function(){},trigger:function(e,r){}};return _underscore2.default.extend(o,_backbone.Events),o}function create(e){var r=e.url;if(!r)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromBigBedFile(new _dataBigBed2.default(r))}var _slicedToArray=function(){function e(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_Alignment=require("../Alignment"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_dataBigBed=require("../data/BigBed"),_dataBigBed2=_interopRequireDefault(_dataBigBed),_dataGene=require("../data/gene"),_dataGene2=_interopRequireDefault(_dataGene);module.exports={create:create,createFromBigBedFile:createFromBigBedFile};

},{"../Alignment":181,"../ContigInterval":182,"../Interval":185,"../data/BigBed":194,"../data/gene":206,"backbone":1,"q":48,"underscore":178}],217:[function(require,module,exports){
"use strict";var create=function(){return{rangeChanged:function(){},on:function(){},off:function(){},trigger:function(){}}};module.exports={create:create};

},{}],218:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function n(e){void 0!==e.alignments&&e.alignments.forEach(function(e){var n=_GA4GHAlignment2.default.keyFromGA4GHResponse(e);if(!(n in s))try{var t=new _GA4GHAlignment2.default(e);s[n]=t}catch(e){}})}function t(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(u)){n=n.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var t=n.complementIntervals(u);u.push(n),u=_ContigInterval2.default.coalesce(u),t.forEach(function(e){o(e,null,1)})}}function r(e){c.trigger("networkfailure",e),c.trigger("networkdone"),console.warn(e)}function o(t,i,s){var u=new XMLHttpRequest;u.open("POST",a),u.responseType="json",u.setRequestHeader("Content-Type","application/json"),u.addEventListener("load",function(e){var i=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH endpoint: "+JSON.stringify(i)):(n(i),c.trigger("newdata",t),i.nextPageToken?o(t,i.nextPageToken,s+1):c.trigger("networkdone"))}),u.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),c.trigger("networkprogress",{numRequests:s});var d=t.contig;void 0!==e.forcedReferenceId&&(d=e.forcedReferenceId),u.send(JSON.stringify({pageToken:i,pageSize:ALIGNMENTS_PER_REQUEST,readGroupIds:[e.readGroupId],referenceId:d,start:t.start(),end:t.stop()}))}function i(e){return e?(e=new _ContigInterval2.default(e.contig,e.start(),e.stop()),_underscore2.default.filter(s,function(n){return n.intersects(e)})):[]}var a=e.endpoint+"/reads/search",s={},u=[],c={rangeChanged:t,getFeaturesInRange:i,on:function(){},once:function(){},off:function(){},trigger:function(e,n){}};return _underscore2.default.extend(c,_backbone.Events),c}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment),ALIGNMENTS_PER_REQUEST=200,ZERO_BASED=!1,BASE_PAIRS_PER_FETCH=100;module.exports={create:create};

},{"../ContigInterval":182,"../GA4GHAlignment":184,"backbone":1,"underscore":178}],219:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.features&&e.features.forEach(function(e){var t=new _ContigInterval2.default(e.referenceName,e.start,e.end),r=e.id+t.toString();if(!(r in i)){var n=_dataFeature2.default.fromGA4GH(e);i[r]=n}})}function r(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(s)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var r=t.complementIntervals(s);s.push(t),s=_ContigInterval2.default.coalesce(s),r.forEach(function(e){a(e,null,1)})}}function n(e){f.trigger("networkfailure",e),f.trigger("networkdone"),console.warn(e)}function a(r,o,i){var s=new XMLHttpRequest;s.open("POST",u),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(e){var o=this.response;this.status>=400?n(this.status+" "+this.statusText+" "+JSON.stringify(o)):o.errorCode?n("Error from GA4GH Feature endpoint: "+JSON.stringify(o)):(t(o),f.trigger("newdata",r),o.nextPageToken?a(r,o.nextPageToken,i+1):f.trigger("networkdone"))}),s.addEventListener("error",function(e){n("Request failed with status: "+this.status)}),f.trigger("networkprogress",{numRequests:i}),s.send(JSON.stringify({featureSetId:e.featureSetId,pageToken:o,pageSize:FEATURES_PER_REQUEST,referenceName:r.contig,start:r.start(),end:r.stop()}))}function o(e){return e?_underscore2.default.filter(i,function(t){return t.intersects(e)}):[]}var u=e.endpoint+"/features/search",i={},s=[],f={rangeChanged:r,getFeaturesInRange:o,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}Object.defineProperty(exports,"__esModule",{value:!0});var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),BASE_PAIRS_PER_FETCH=100,FEATURES_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create};

},{"../ContigInterval":182,"../data/feature":201,"backbone":1,"underscore":178}],220:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.features&&e.features.forEach(function(e){var t=new _ContigInterval2.default(e.referenceName,e.start,e.end),n=e.id+t.toString();if(!(n in u)){var r=_dataGene2.default.fromGA4GH(e);u[n]=r}})}function n(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(s)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var n=t.complementIntervals(s);s.push(t),s=_ContigInterval2.default.coalesce(s),n.forEach(function(e){a(e,null,1)})}}function r(e){f.trigger("networkfailure",e),f.trigger("networkdone"),console.warn(e)}function a(n,o,u){var s=new XMLHttpRequest;s.open("POST",i),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(e){var o=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(o)):o.errorCode?r("Error from GA4GH Feature endpoint: "+JSON.stringify(o)):(t(o),f.trigger("newdata",n),o.nextPageToken?a(n,o.nextPageToken,u+1):f.trigger("networkdone"))}),s.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),f.trigger("networkprogress",{numRequests:u}),s.send(JSON.stringify({featureSetId:e.featureSetId,pageToken:o,pageSize:GENES_PER_REQUEST,referenceName:n.contig,start:n.start(),end:n.stop()}))}function o(e){return e?_underscore2.default.filter(u,function(t){return t.intersects(e)}):[]}var i=e.endpoint+"/features/search",u={},s=[],f={rangeChanged:n,getFeaturesInRange:o,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(f,_backbone.Events),f}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataGene=require("../data/gene"),_dataGene2=_interopRequireDefault(_dataGene),BASE_PAIRS_PER_FETCH=100,GENES_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create};

},{"../ContigInterval":182,"../data/gene":206,"backbone":1,"underscore":178}],221:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){function t(e){void 0!==e.variants&&e.variants.forEach(function(e){var t=e.id;if(!(t in c)){var n=new _dataVariant.VariantContext(_dataVariant.Variant.fromGA4GH(e),e.calls);c[t]=n}})}function n(e){var t=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!t.isCoveredBy(f)){t=t.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var n=t.complementIntervals(f);f.push(t),f=_ContigInterval2.default.coalesce(f),n.forEach(function(e){a(e,null,1)})}}function r(e){d.trigger("networkfailure",e),d.trigger("networkdone"),console.warn(e)}function a(n,i,o){var s=new XMLHttpRequest;s.open("POST",u),s.responseType="json",s.setRequestHeader("Content-Type","application/json"),s.addEventListener("load",function(e){var i=this.response;this.status>=400?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH Variant endpoint: "+JSON.stringify(i)):(t(i),d.trigger("newdata",n),i.nextPageToken?a(n,i.nextPageToken,o+1):d.trigger("networkdone"))}),s.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),d.trigger("networkprogress",{numRequests:o}),s.send(JSON.stringify({variantSetId:e.variantSetId,pageToken:i,pageSize:VARIANTS_PER_REQUEST,referenceName:n.contig,callSetIds:e.callSetIds,start:n.start(),end:n.stop()}))}function i(e){if(!e)return[];var t=_underscore2.default.filter(c,function(t){return t.intersects(e)});return _underscore2.default.map(t,function(e){return e.variant})}function o(e){return e?_underscore2.default.filter(c,function(t){return t.intersects(e)}):[]}function s(){return e.callSetNames?_q2.default.resolve(e.callSetNames):_q2.default.resolve(e.callSetIds)}var u=e.endpoint+"/variants/search",c={},f=[],d={rangeChanged:n,getVariantsInRange:i,getGenotypesInRange:o,getCallNames:s,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(d,_backbone.Events),d}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataVariant=require("../data/variant"),BASE_PAIRS_PER_FETCH=100,VARIANTS_PER_REQUEST=400,ZERO_BASED=!1;module.exports={create:create};

},{"../ContigInterval":182,"../data/variant":208,"backbone":1,"q":48,"underscore":178}],222:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromTwoBitFile(new _dataTwoBit2.default(new _RemoteFile2.default(t)))}function testBasePairsToFetch(e){if(!e)return BASE_PAIRS_PER_FETCH;BASE_PAIRS_PER_FETCH=e}Object.defineProperty(exports,"__esModule",{value:!0});var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataTwoBit=require("../data/TwoBit"),_dataTwoBit2=_interopRequireDefault(_dataTwoBit),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_SequenceStore=require("../SequenceStore"),_SequenceStore2=_interopRequireDefault(_SequenceStore),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),BASE_PAIRS_PER_FETCH=1e4,MAX_BASE_PAIRS_TO_FETCH=1e5,ZERO_BASED=!0,createFromTwoBitFile=function(e){function t(t){if(t.length()>MAX_BASE_PAIRS_TO_FETCH)return l.trigger("newdatarefused",t),_q2.default.when();_.push(t),_=_ContigInterval2.default.coalesce(_),e.getFeaturesInRange(t.contig,t.start(),t.stop()).then(function(e){e&&(e.length<t.length()&&(t=new _ContigInterval2.default(t.contig,t.start(),t.start()+e.length-1)),a.setRange(t,e))}).then(function(){l.trigger("newdata",t)}).done()}function n(e){if(u.indexOf(e.contig)>=0)return e;var t=_utils2.default.altContigName(e.contig);return u.indexOf(t)>=0?{contig:t,start:e.start,stop:e.stop}:e}function r(e){return c.then(function(){return n(e)})}function i(e){return a.getAsObjects(_ContigInterval2.default.fromGenomeRange(e))}function o(e){return e?a.getAsString(_ContigInterval2.default.fromGenomeRange(e)):""}var u=[],a=new _SequenceStore2.default,_=[],c=e.getContigList().then(function(e){return u=e,l.trigger("contigs",u),e});c.done();var l={rangeChanged:function(e){r(e).then(function(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(_)){n=n.round(BASE_PAIRS_PER_FETCH,ZERO_BASED);var r=n.complementIntervals(_),i=!0,o=!1,u=void 0;try{for(var a,c=r[Symbol.iterator]();!(i=(a=c.next()).done);i=!0){t(a.value)}}catch(e){o=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(o)throw u}}}}).done()},getRange:i,getRangeAsString:o,contigList:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return u}),normalizeRange:r,on:function(){},once:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(l,_backbone.Events),l};module.exports={create:create,createFromTwoBitFile:createFromTwoBitFile,testBasePairsToFetch:testBasePairsToFetch};

},{"../ContigInterval":182,"../RemoteFile":188,"../SequenceStore":191,"../data/TwoBit":196,"../utils":226,"backbone":1,"q":48,"underscore":178}],223:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function variantContextKey(e){return e.variant.contig+":"+e.variant.position}function createFromVcfFile(e){function t(e){var t=variantContextKey(e);o[t]||(o[t]=e)}function n(n){var r=new _ContigInterval2.default(n.contig,n.start,n.stop);return r.isCoveredBy(u)?_q2.default.when():(r=r.round(BASE_PAIRS_PER_FETCH,ZERO_BASED),u.push(r),u=_ContigInterval2.default.coalesce(u),e.getFeaturesInRange(r).then(function(e){e.forEach(function(e){return t(e)}),c.trigger("newdata",r)}))}function r(e){if(!e)return[];var t=_underscore2.default.filter(o,function(t){return e.containsLocus(t.variant.contig,t.variant.position)});return _underscore2.default.map(t,function(e){return e.variant})}function i(e){return _underscore2.default.filter(o,function(t){return e.containsLocus(t.variant.contig,t.variant.position)})}function a(){return e.getCallNames().then(function(e){return e})}var o={},u=[],c={rangeChanged:function(e){n(e).done()},getVariantsInRange:r,getGenotypesInRange:i,getCallNames:a,on:function(){},off:function(){},trigger:function(e,t){}};return _underscore2.default.extend(c,_backbone2.default),c}function create(e){var t=e.url,n=e.content;if(t)return createFromVcfFile(new _dataVcf.VcfFile(new _RemoteFile2.default(t)));if(n)return createFromVcfFile(new _dataVcf.VcfFile(new _LocalStringFile2.default(n)));throw new Error("Missing URL or content from track: "+JSON.stringify(e))}Object.defineProperty(exports,"__esModule",{value:!0});var _backbone=require("backbone"),_backbone2=_interopRequireDefault(_backbone),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_LocalStringFile=require("../LocalStringFile"),_LocalStringFile2=_interopRequireDefault(_LocalStringFile),_dataVariant=require("../data/variant"),_dataVcf=require("../data/vcf"),BASE_PAIRS_PER_FETCH=100,ZERO_BASED=!1;module.exports={create:create,createFromVcfFile:createFromVcfFile};

},{"../ContigInterval":182,"../LocalStringFile":186,"../RemoteFile":188,"../data/variant":208,"../data/vcf":209,"backbone":1,"q":48,"underscore":178}],224:[function(require,module,exports){
"use strict";function _interopRequireDefault(_){return _&&_.__esModule?_:{default:_}}function TEXT_STYLE(_,E){return _==_vizDisplayMode2.default.LOOSE?E+"px 'Helvetica Neue', Helvetica, Arial, sans-serif":_==_vizDisplayMode2.default.TIGHT?"bold "+E+"px 'Helvetica Neue', Helvetica, Arial, sans-serif":E+"px"}var _vizDisplayMode=require("./viz/DisplayMode"),_vizDisplayMode2=_interopRequireDefault(_vizDisplayMode);module.exports={TEXT_STYLE:TEXT_STYLE,BASE_COLORS:{A:"#188712",G:"#C45C16",C:"#0600F9",T:"#F70016",U:"#F70016",N:"black"},GENE_ARROW_SIZE:4,GENE_COLOR:"blue",GENE_COMPLEMENT_COLOR:"white",GENE_FONT:"'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_FONT_SIZE:16,GENE_TEXT_PADDING:5,ALIGNMENT_COLOR:"#c8c8c8",ALIGNMENT_MINUS_STRAND_COLOR:"rgb(176, 176, 236)",ALIGNMENT_PLUS_STRAND_COLOR:"rgb(236, 176, 176)",DELETE_COLOR:"black",INSERT_COLOR:"rgb(97, 0, 216)",READ_SPACING:2,READ_HEIGHT:13,COVERAGE_FONT_STYLE:"bold 9px 'Helvetica Neue', Helvetica, Arial, sans-serif",COVERAGE_FONT_COLOR:"black",COVERAGE_TICK_LENGTH:5,COVERAGE_TEXT_PADDING:3,COVERAGE_TEXT_Y_OFFSET:3,COVERAGE_BIN_COLOR:"#a0a0a0",COVERAGE_MIN_BAR_WIDTH_FOR_GAP:8,SCALE_LINE_PADDING:40,SCALE_FONT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",SCALE_TEXT_Y_OFFSET:5,SCALE_FONT_COLOR:"black",SCALE_ARROW_SIZE:4,LOC_TEXT_PADDING:5,LOC_TICK_LENGTH:10,LOC_TEXT_Y_OFFSET:5,LOC_FONT_STYLE:"13px 'Helvetica Neue', Helvetica, Arial, sans-serif",LOC_FONT_COLOR:"black",VARIANT_STROKE:"blue",VARIANT_FILL:"#ddd",VARIANT_HEIGHT:14,GENOTYPE_SPACING:1,GENOTYPE_HEIGHT:10,GENOTYPE_FILL_HET:"#0015ff",GENOTYPE_FILL_HOM:"#00f1f9",BACKGROUND_FILL:"#f2f2f2"};

},{"./viz/DisplayMode":230}],225:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _ShimDependencies=require("./ShimDependencies"),AllelFrequencyStrategy={Minor:{name:"Minor"},Major:{name:"Major"}};exports.AllelFrequencyStrategy=AllelFrequencyStrategy;

},{"./ShimDependencies":192}],226:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function tupleLessOrEqual(e,t){if(e.length!=t.length)throw new Error("Comparing non-equal length tuples");for(var r=0;r<e.length;r++){if(e[r]>t[r])return!1;if(e[r]<t[r])return!0}return!0}function tupleRangeOverlaps(e,t){return tupleLessOrEqual(e[0],t[1])&&tupleLessOrEqual(t[0],e[1])&&tupleLessOrEqual(e[0],e[1])&&tupleLessOrEqual(t[0],t[1])}function concatArrayBuffers(e){var t=e.map(function(e){return e.byteLength}).reduce(function(e,t){return e+t},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(new Uint8Array(e),n),n+=e.byteLength}),r.buffer}function _inflateOne(e,t){var r=new _pakoLibInflate2.default.Inflate;return r.push(e.slice(t)),{err:r.err,msg:r.msg,buffer:r.result?r.result.buffer:null,total_in:r.strm.total_in}}function cachedInflateOne(e,t,r){if(!r)return _inflateOne(e,t);var n=r.filename+":"+(r.initialOffset+t),a=inflationCache[n];return a&&t+a.total_in>e.byteLength?_inflateOne(e,t):(a||(a=_inflateOne(e,t)),!a.err&&a.buffer&&(inflationCache[n]=a),a)}function inflateConcatenatedGzip(e,t,r){var n=0,a=[];void 0===t&&(t=e.byteLength);do{var i=cachedInflateOne(e,n,r);if(i.err)throw"Gzip error: "+i.msg;i.buffer&&a.push({offset:n,compressedLength:i.total_in,buffer:i.buffer}),n+=i.total_in}while(n<=t&&n<e.byteLength);return a}function inflateGzip(e){return concatArrayBuffers(inflateConcatenatedGzip(e).map(function(e){return e.buffer}))}function altContigName(e){return"chr"==e.slice(0,3)?e.slice(3):"chr"+e}function isChrMatch(e,t){return e==t||"chr"+e==t||e=="chr"+t}function pipePromise(e,t){t.then(e.resolve,e.reject,e.notify)}function scaleRange(e,t){var r=e.stop-e.start,n=Math.floor((e.start+e.stop)/2),a=2*Math.round(t*r/2),i=n-a/2,u=n+a/2;return i<0&&(u-=i,i=0),new _Interval2.default(i,u)}function absScaleRange(e,t,r){var n=Math.floor((e.start+e.stop)/2),a=Math.pow(r,t),i=n-a,u=n+a;return i<0&&(u-=i,i=0),new _Interval2.default(i,u)}function parseRange(e){var t=/^([^ :]+):([0-9,]+)-([0-9,]+)$/.exec(e);return t?{contig:t[1],start:parseNumberWithCommas(t[2]),stop:parseNumberWithCommas(t[3])}:(t=/^([^ :]+):([0-9,]+)$/.exec(e))?{contig:t[1],start:parseNumberWithCommas(t[2])}:(t=/^([0-9,]+)-([0-9,]+)$/.exec(e))?{start:parseNumberWithCommas(t[1]),stop:parseNumberWithCommas(t[2])}:(t=/^([^ :]+):$/.exec(e)||/^([^0-9][^ :]+)$/.exec(e))?{contig:t[1]}:(t=/^([0-9,]+)$/.exec(e),t?{start:parseNumberWithCommas(t[1])}:null)}function formatInterval(e){return numberWithCommas(e.start)+"-"+numberWithCommas(e.stop)}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function parseNumberWithCommas(e){return parseInt(e.replace(/,/g,""),10)}function flatMap(e,t){return _underscore2.default.flatten(e.map(t),!0)}function computePercentile(e,t){if(0===e.length)return 0;e.sort(function(e,t){return e-t});var r=(e.length-1)*t/100,n=Math.floor(r),a=Math.ceil(r);return n==a?e[n]:e[n]*(r-n)+e[a]*(a-r)}function stringToLiteral(e){var t={NaN:NaN,null:null,undefined:void 0,Infinity:1/0,"-Infinity":-1/0};return e in t?t[e]:e}var _pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),inflationCache={};module.exports={tupleLessOrEqual:tupleLessOrEqual,tupleRangeOverlaps:tupleRangeOverlaps,concatArrayBuffers:concatArrayBuffers,inflateConcatenatedGzip:inflateConcatenatedGzip,inflateGzip:inflateGzip,altContigName:altContigName,pipePromise:pipePromise,scaleRange:scaleRange,absScaleRange:absScaleRange,parseRange:parseRange,formatInterval:formatInterval,isChrMatch:isChrMatch,flatMap:flatMap,computePercentile:computePercentile,stringToLiteral:stringToLiteral};

},{"./Interval":185,"pako/lib/inflate":35,"underscore":178}],227:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_dataGenericFeatureJs=require("../data/genericFeature.js"),_dataGenericFeatureJs2=_interopRequireDefault(_dataGenericFeatureJs),AbstractCache=function(){function e(r){_classCallCheck(this,e),this.groups={},this.refToPileup={},this.referenceSource=r}return _createClass(e,[{key:"pileupForRef",value:function(e){if(e in this.refToPileup)return this.refToPileup[e];var r=_utils2.default.altContigName(e);return r in this.refToPileup?this.refToPileup[r]:[]}},{key:"pileupHeightForRef",value:function(e){var r=this.pileupForRef(e);return r?r.length:0}},{key:"getGroupsOverlapping",value:function(e){return _underscore2.default.filter(this.groups,function(r){return r.span.intersects(e)})}},{key:"anyGroupsOverlapping",value:function(e){for(var r in this.groups){if(this.groups[r].span.intersects(e))return!0}return!1}}]),e}();module.exports=AbstractCache;

},{"../ContigInterval":182,"../Interval":185,"../data/genericFeature.js":207,"../utils":226,"underscore":178}],228:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),CoverageCache=function(){function e(t){_classCallCheck(this,e),this.items={},this.refToCounts={},this.refToMaxCoverage={},this.referenceSource=t}return _createClass(e,[{key:"addItem",value:function(e){var t=e.getKey();if(!(t in this.items)){this.items[t]=e;var r=e.getCoverage(this.referenceSource);this.addToCoverage(r)}}},{key:"updateMismatches",value:function(e){var t=this._canonicalRef(e.contig);this.refToCounts[t]={},this.refToMaxCoverage[t]=0;for(var r in this.items){var a=this.items[r];if(a.getInterval().chrOnContig(e.contig)){var o=a.getCoverage(this.referenceSource);this.addToCoverage(o)}}}},{key:"addToCoverage",value:function(e){var t=this._canonicalRef(e.range.contig);t in this.refToCounts||(this.refToCounts[t]={},this.refToMaxCoverage[t]=0);for(var r=this.refToCounts[t],a=this.refToMaxCoverage[t],o=e.range,i=o.start(),n=o.stop(),s=i;s<=n;s++){var u=r[s];u||(r[s]=u={count:0}),u.count+=1,u.count>a&&(a=u.count)}if(e.opInfo){var f=!0,c=!1,l=void 0;try{for(var h,v=e.opInfo.mismatches[Symbol.iterator]();!(f=(h=v.next()).done);f=!0){var C,g=h.value,d=r[g.pos];d.mismatches?C=d.mismatches:(C=d.mismatches={},d.ref=this.referenceSource.getRangeAsString({contig:t,start:g.pos,stop:g.pos}));var u=C[g.basePair]||0;C[g.basePair]=1+u}}catch(e){c=!0,l=e}finally{try{!f&&v.return&&v.return()}finally{if(c)throw l}}}this.refToMaxCoverage[t]=a}},{key:"maxCoverageForRef",value:function(e){return this.refToMaxCoverage[e]||this.refToMaxCoverage[_utils2.default.altContigName(e)]||0}},{key:"binsForRef",value:function(e){return this.refToCounts[e]||this.refToCounts[_utils2.default.altContigName(e)]||{}}},{key:"_canonicalRef",value:function(e){if(this.refToCounts[e])return e;var t=_utils2.default.altContigName(e);return this.refToCounts[t]?t:e}}]),e}();module.exports=CoverageCache;

},{"../data/feature":201,"../utils":226}],229:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderBars(e,t,a,r,n,i){if(!_underscore2.default.isEmpty(n)){for(var o=t(1)-t(0),s=o>_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP,l=s?1:0,u=function(e,r){return{barX1:Math.round(t(1+e)),barX2:Math.round(t(2+e))-l,barY:Math.round(a(r))}},c={},h=a(0),f=r.start(),d=r.stop(),_=null,p=f;p<d;p++){var v=n[p];if(v){if(!_){var g=u(p,v.count),C=g.barX1;e.fillStyle=_style2.default.COVERAGE_BIN_COLOR,e.beginPath(),e.moveTo(C,h)}e.pushObject(v);var y=u(p,v.count),O=y.barX1,R=y.barX2,T=y.barY;e.lineTo(O,T),e.lineTo(R,T),s&&(e.lineTo(R,h),e.lineTo(R+1,h)),SHOW_MISMATCHES&&!_underscore2.default.isEmpty(v.mismatches)&&(c[p]=v),_=p,e.popObject()}}if(_){var b=u(_,0),R=b.barX2;e.lineTo(R,h),e.closePath(),e.fill()}_underscore2.default.each(c,function(t,r){if(t.mismatches){var n=_underscore2.default.clone(t.mismatches);r=Number(r);var o=_underscore2.default.reduce(n,function(e,t){return e+t});_underscore2.default.max(n)>MISMATCH_THRESHOLD&&o>i.vafColorThreshold*t.count&&o<t.count&&t.ref&&(n[t.ref]=t.count-o);var s=u(r,t.count),l=s.barX1,c=s.barX2;e.pushObject(t);var h=0;_underscore2.default.chain(n).map(function(e,t){return{count:e,base:t}}).filter(function(e){return e.count>MISMATCH_THRESHOLD}).sortBy(function(e){return-e.count}).each(function(t){var n=t.count,i=t.base,o={position:1+r,count:n,base:i};e.pushObject(o),e.fillStyle=_style2.default.BASE_COLORS[i];var s=a(h);e.fillRect(l,s,Math.max(1,c-l),a(h+n)-s),h+=n,e.popObject()}),e.popObject()}})}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,a=o,r=!0,s=u=void 0}},_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_ShimDependencies=require("../ShimDependencies"),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_CoverageCache=require("./CoverageCache"),_CoverageCache2=_interopRequireDefault(_CoverageCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),SHOW_MISMATCHES=!0,MISMATCH_THRESHOLD=1,CoverageTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.height=Math.max(1,a),this.options=r}return _inherits(t,e),_createClass(t,[{key:"heightForRef",value:function(e){return this.height}},{key:"update",value:function(e,t){this.height=Math.max(1,e),this.options=t}},{key:"yScaleForRef",value:function(e,t,a){var r=this.cache.maxCoverageForRef(e);return _scale2.default.linear().domain([r,0]).range([t,this.height-a]).nice()}},{key:"render",value:function(e,t,a){var r=this.cache.binsForRef(a.contig);renderBars(e,t,this.yScaleForRef(a.contig,10,10),new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),r,this.options)}}]),t}(_TiledCanvas3.default),CoverageTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _ShimDependencies.React.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _CoverageCache2.default(this.props.referenceSource),this.tiles=new CoverageTiledCanvas(this.cache,this.props.height,this.props.options),this.props.source.on("newdata",function(t){var a=e.cache.maxCoverageForRef(t.contig);e.props.source.getFeaturesInRange(t).forEach(function(t){return e.cache.addItem(t)}),a!=e.cache.maxCoverageForRef(t.contig)?e.tiles.invalidateAll():e.tiles.invalidateRange(t),e.visualizeCoverage()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.visualizeCoverage()})}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.props.height==e.height&&this.props.options==e.options||(this.tiles.update(this.props.height,this.props.options),this.tiles.invalidateAll()),this.visualizeCoverage())}},{key:"getContext",value:function(){return this.refs.canvas.getContext("2d")}},{key:"renderTicks",value:function(e,t){var a=t.domain()[0];[0,Math.round(a/2),a].forEach(function(a){e.pushObject({value:a,type:"tick"});var r=Math.round(t(a));e.strokeStyle=_style2.default.COVERAGE_FONT_COLOR,_canvasUtils2.default.drawLine(e,0,r,_style2.default.COVERAGE_TICK_LENGTH,r),e.popObject();var n=a+"X";e.pushObject({value:a,label:n,type:"label"}),e.font=_style2.default.COVERAGE_FONT_STYLE;var i=_style2.default.COVERAGE_TICK_LENGTH+_style2.default.COVERAGE_TEXT_PADDING,o=r+_style2.default.COVERAGE_TEXT_Y_OFFSET;e.strokeStyle="white",e.lineWidth=2,e.strokeText(n,i,o),e.lineWidth=1,e.fillStyle=_style2.default.COVERAGE_FONT_COLOR,e.fillText(n,i,o),e.popObject()})}},{key:"visualizeCoverage",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.height,r=_ContigInterval2.default.fromGenomeRange(this.props.range);if(0!==t){_d3utils2.default.sizeCanvas(e,t,a);var n=_dataCanvas2.default.getDataContext(this.getContext());n.save(),n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height);var i=this.tiles.yScaleForRef(r.contig,10,10);this.tiles.renderToScreen(n,r,this.getScale()),this.renderTicks(n,i),n.restore()}}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=_ContigInterval2.default.fromGenomeRange(this.props.range),n=this.getScale(),i=this.cache.binsForRef(r.contig),o=Math.floor(n.invert(a))-1,s=i[o],l=window.alert||console.log;if(s){var u=s.mismatches?_underscore2.default.reduce(s.mismatches,function(e,t){return e+t}):0,c=s.ref||this.props.referenceSource.getRangeAsString({contig:r.contig,start:o,stop:o}),h=_underscore2.default.extend({position:r.contig+":"+(1+o),"read depth":s.count},s.mismatches);h[c]=s.count-u,l(JSON.stringify(h,null,"  "))}}}]),t}(_ShimDependencies.React.Component);CoverageTrack.displayName="coverage",CoverageTrack.defaultOptions={vafColorThreshold:.2},module.exports=CoverageTrack;

},{"../ContigInterval":182,"../ShimDependencies":192,"../data/feature":201,"../scale":214,"../style":224,"./CoverageCache":228,"./TiledCanvas":240,"./canvas-utils":242,"./d3utils":243,"data-canvas":4,"shallow-equals":177,"underscore":178}],230:[function(require,module,exports){
"use strict";var DisplayMode={LOOSE:1,TIGHT:2,BLOCKS:3,HIDDEN:4,getDisplayMode:function(e){return e>=25?DisplayMode.LOOSE:e>=10?DisplayMode.TIGHT:e>=1?DisplayMode.BLOCKS:DisplayMode.HIDDEN},isText:function(e){return e==DisplayMode.LOOSE||e==DisplayMode.TIGHT}};module.exports=DisplayMode;

},{}],231:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderFeatures(e,t,a,i){e.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,e.textAlign="center",i.forEach(function(i){var n=i.items[0].gFeature;if(i.span.intersects(a)){e.pushObject(n),e.lineWidth=1;var r=Math.max(n.score/1e3,.2);e.fillStyle="rgba(0, 0, 0, "+r+")";var s=Math.round(t(i.span.start())),o=Math.ceil(t(i.span.stop())-t(i.span.start())),u=(0,_pileuputils.yForRow)(i.row);e.fillRect(s-.5,u,o,_style2.default.READ_HEIGHT),e.popObject()}})}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var n=e,r=t,s=a;i=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,r);if(void 0!==o){if("value"in o)return o.value;var u=o.get;if(void 0===u)return;return u.call(s)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=r,a=s,i=!0,o=l=void 0}},_dataFeature=require("../data/feature"),_dataFeature2=_interopRequireDefault(_dataFeature),_dataGenericFeature=require("../data/genericFeature"),_dataGenericFeature2=_interopRequireDefault(_dataGenericFeature),_GenericFeatureCache=require("./GenericFeatureCache"),_ShimDependencies=require("../ShimDependencies"),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_RemoteRequest=require("../RemoteRequest"),_RemoteRequest2=_interopRequireDefault(_RemoteRequest),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_pileuputils=require("./pileuputils"),FeatureTiledCanvas=function(e){function t(e,a,i){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.cache=a,this.options=i}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return this.cache.pileupHeightForRef(e)*(_style2.default.READ_HEIGHT+_style2.default.READ_SPACING)}},{key:"render",value:function(e,t,a,i,n){var r=this,s=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1);this.source.getFeaturesInRange(s,n).forEach(function(e){return r.cache.addFeature(new _dataGenericFeature2.default(e.id,e.position,e))}),renderFeatures(e,t,s,this.cache.getGroupsOverlapping(s))}}]),t}(_TiledCanvas3.default),FeatureTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null;return this.state.networkStatus&&(t=_ShimDependencies.React.createElement("div",{ref:"status",className:"network-status-small"},_ShimDependencies.React.createElement("div",{className:"network-status-message-small"},"Loading features"))),this.props.range.stop-this.props.range.start>_RemoteRequest2.default.MONSTER_REQUEST?_ShimDependencies.React.createElement("div",null,_ShimDependencies.React.createElement("div",{className:"center"},"Zoom in to see features"),_ShimDependencies.React.createElement("canvas",{onClick:this.handleClick.bind(this)})):_ShimDependencies.React.createElement("div",null,t,_ShimDependencies.React.createElement("div",{ref:"container",style:e},_ShimDependencies.React.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _GenericFeatureCache.GenericFeatureCache(this.props.referenceSource),this.tiles=new FeatureTiledCanvas(this.props.source,this.cache,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.range,i=new _ContigInterval2.default(a.contig,a.start,a.stop);if(0!==t&&void 0!==e){var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height);var r=_d3utils2.default.findParent(e,"features"),s=(0,_pileuputils.yForRow)(this.cache.pileupHeightForRef(this.props.range.contig));s=_d3utils2.default.heightForCanvas(e,s),r&&(r.style.height=s+"px"),_d3utils2.default.sizeCanvas(e,t,s),this.tiles.renderToScreen(n,i,this.getScale())}}},{key:"handleClick",value:function(e){var t=window.devicePixelRatio,a=e.nativeEvent,i=a.offsetX,n=a.offsetY/t,r=_canvasUtils2.default.getContext(this.refs.canvas),s=new _dataCanvas2.default.ClickTrackingContext(r,i,n),o=this.props.range,u=new _ContigInterval2.default(o.contig,o.start-1,o.stop+1);renderFeatures(s,this.getScale(),u,this.cache.getGroupsOverlapping(u));var l=_underscore2.default.find(s.hits[0],function(e){return e});if(l)if("function"==typeof this.props.options.onFeatureClicked)this.props.options.onFeatureClicked(l);else{var c=window.alert||console.log,p=_underscore2.default.extend({id:l.id,range:l.position.contig+":"+l.position.start()+"-"+l.position.stop(),score:l.score});c(JSON.stringify(p,null,"  "))}}}]),t}(_ShimDependencies.React.Component);FeatureTrack.displayName="features",module.exports=FeatureTrack;

},{"../ContigInterval":182,"../RemoteRequest":189,"../ShimDependencies":192,"../data/feature":201,"../data/genericFeature":207,"../style":224,"./GenericFeatureCache":233,"./TiledCanvas":240,"./canvas-utils":242,"./d3utils":243,"./pileuputils":244,"data-canvas":4,"shallow-equals":177,"underscore":178}],232:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function drawArrow(e,t,a,r,n){var i=t(1+a.start),o=t(1+a.stop);if(!(o-i<=2*_style2.default.GENE_ARROW_SIZE)){var s=(i+o)/2;e.beginPath(),"-"==n?(e.moveTo(s+_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(s,r),e.lineTo(s+_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)):(e.moveTo(s-_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(s,r),e.lineTo(s-_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)),e.stroke()}}function drawGeneName(e,t,a,r,n){var i=r.position,o=.5*(t(1+i.start())+t(1+i.stop())),s=_underscore2.default.isEmpty(_utils2.default.stringToLiteral(r.name))?r.id:r.name,u=e.measureText(s).width,l=new _Interval2.default(o-.5*u,o+.5*u);if(!_underscore2.default.any(n,function(e){return l.intersects(e)})){n.push(l);var c=a+_style2.default.GENE_FONT_SIZE+_style2.default.GENE_TEXT_PADDING;e.fillText(s,o,c)}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=i,a=o,r=!0,s=l=void 0}},_dataGene=require("../data/gene"),_dataGene2=_interopRequireDefault(_dataGene),_dataGenericFeature=require("../data/genericFeature"),_dataGenericFeature2=_interopRequireDefault(_dataGenericFeature),_GenericFeatureCache=require("./GenericFeatureCache"),_ShimDependencies=require("../ShimDependencies"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_dataBedtools=require("../data/bedtools"),_dataBedtools2=_interopRequireDefault(_dataBedtools),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),GeneTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _ShimDependencies.React.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _GenericFeatureCache.GenericFeatureCache(this.props.referenceSource),this.props.source.on("newdata",function(t){e.props.source.getFeaturesInRange(t).forEach(function(t){return e.cache.addFeature(new _dataGenericFeature2.default(t.id,t.position,t))}),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_ShimDependencies.ReactDOM.findDOMNode(this),t=this.props,a=t.width,r=t.height,n=this.props.range,i=new _ContigInterval2.default(n.contig,n.start,n.stop);if(0!==a){var o=this.getScale(),s=_scale2.default.linear().domain([o.invert(0),o.invert(a)]).range([0,a]).clamp(!0);if(e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,r);var u=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));u.reset(),u.clearRect(0,0,u.canvas.width,u.canvas.height);var l=Math.round(r/4),c=[];u.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,u.textAlign="center";_underscore2.default.flatten(_underscore2.default.map(this.cache.getGroupsOverlapping(i),function(e){return e.items})).forEach(function(e){var t=e.gFeature;if(t.position.intersects(i)){u.pushObject(t),u.lineWidth=1,u.strokeStyle=_style2.default.GENE_COLOR,u.fillStyle=_style2.default.GENE_COLOR,_canvasUtils2.default.drawLine(u,s(1+t.position.start()),l+.5,s(1+t.position.stop()),l+.5);_dataBedtools2.default.splitCodingExons(t.exons,t.codingRegion).forEach(function(e){u.fillRect(o(1+e.start),l-3*(e.isCoding?2:1),o(e.stop+2)-o(1+e.start),6*(e.isCoding?2:1))});t.position.interval.complementIntervals(t.exons).forEach(function(e){drawArrow(u,s,e,l+.5,t.strand)}),u.strokeStyle=_style2.default.GENE_COMPLEMENT_COLOR,u.lineWidth=2,t.exons.forEach(function(e){drawArrow(u,s,e,l+.5,t.strand)}),drawGeneName(u,s,l,t,c),u.popObject()}})}}}}]),t}(_ShimDependencies.React.Component);GeneTrack.displayName="genes",module.exports=GeneTrack;

},{"../ContigInterval":182,"../Interval":185,"../ShimDependencies":192,"../data/bedtools":200,"../data/gene":206,"../data/genericFeature":207,"../scale":214,"../style":224,"../utils":226,"./GenericFeatureCache":233,"./canvas-utils":242,"./d3utils":243,"data-canvas":4,"shallow-equals":177,"underscore":178}],233:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_get=function(e,t,r){for(var i=!0;i;){var n=e,o=t,u=r;i=!1,null===n&&(n=Function.prototype);var a=Object.getOwnPropertyDescriptor(n,o);if(void 0!==a){if("value"in a)return a.value;var c=a.get;if(void 0===c)return;return c.call(u)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=o,r=u,i=!0,a=s=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataGenericFeatureJs=require("../data/genericFeature.js"),_dataGenericFeatureJs2=_interopRequireDefault(_dataGenericFeatureJs),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_AbstractCache2=require("./AbstractCache"),_AbstractCache3=_interopRequireDefault(_AbstractCache2),GenericFeatureCache=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"groupKey",value:function(e){return e.id||e.position.toString()}},{key:"addFeature",value:function(e){var t=this.groupKey(e);t in this.groups||(this.groups[t]={key:t,span:e.position,row:-1,insert:null,items:[]});var r=this.groups[t];if(!_underscore2.default.find(r.items,function(t){return t.gFeature==e.gFeature})){r.items.push(e),e.position.contig in this.refToPileup||(this.refToPileup[e.position.contig]=[]);var i=this.refToPileup[e.position.contig];r.row=(0,_pileuputils.addToPileup)(r.span.interval,i)}}}]),t}(_AbstractCache3.default);module.exports={GenericFeatureCache:GenericFeatureCache};

},{"../Interval":185,"../data/genericFeature.js":207,"./AbstractCache":227,"./pileuputils":244,"underscore":178}],234:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenome(e,t,a,i,n){var r=t(1)-t(0),l=_DisplayMode2.default.getDisplayMode(r),s=_DisplayMode2.default.isText(l),o=a/window.devicePixelRatio;if(l!=_DisplayMode2.default.HIDDEN){e.textAlign="center",e.font=_style2.default.TEXT_STYLE(l,o);for(var u=null,c=i.start(),p=i.stop(),f=c;f<=p;f++){var h=n[f-c];"."!=h&&(e.save(),e.pushObject({pos:f,letter:h}),e.fillStyle=_style2.default.BASE_COLORS[h],s?e.fillText(h,t(1.5+f),o):r>=_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP?e.fillRect(t(1+f)+.5,0,r-1.5,o):u===h?e.fillRect(t(1+f)-1.5,0,r+1.5,o):e.fillRect(t(1+f)-.5,0,r+1.5,o),e.popObject(),e.restore(),u=h)}}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var n=e,r=t,l=a;i=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(l)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=r,a=l,i=!0,s=u=void 0}},_ShimDependencies=require("../ShimDependencies"),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),GenomeTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.height=Math.max(1,a)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(e,t,a){var i={contig:a.contig,start:Math.max(0,a.start()-1),stop:a.stop()+1},n=this.source.getRangeAsString(i);renderGenome(e,t,this.height,_ContigInterval2.default.fromGenomeRange(i),n)}},{key:"heightForRef",value:function(e){return this.height}},{key:"updateHeight",value:function(e){this.height=e}}]),t}(_TiledCanvas3.default),GenomeTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _ShimDependencies.React.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenomeTiledCanvas(this.props.source,this.props.height),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.props.height!=e.height&&(this.tiles.updateHeight(this.props.height),this.tiles.invalidateAll()),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=_ShimDependencies.ReactDOM.findDOMNode(this),t=this.props,a=t.width,i=t.height,n=t.range;if(0!==a&&e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,a,i);var r=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));r.reset(),r.clearRect(0,0,r.canvas.width,r.canvas.height),this.tiles.renderToScreen(r,_ContigInterval2.default.fromGenomeRange(n),this.getScale())}}}]),t}(_ShimDependencies.React.Component);GenomeTrack.displayName="reference",module.exports=GenomeTrack;

},{"../ContigInterval":182,"../ShimDependencies":192,"../style":224,"./DisplayMode":230,"./TiledCanvas":240,"./canvas-utils":242,"./d3utils":243,"data-canvas":4,"shallow-equals":177}],235:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenotypes(e,t,a,n,i){n.forEach(function(a){var n=a.variant;e.pushObject(n);var s=Math.round(t(n.position)),l=Math.max(1,Math.round(t(n.position+1)-t(n.position)));a.calls.forEach(function(t){var a=yForRow(i.indexOf(t.callSetName));e.fillStyle=1==t.genotype.reduce(function(e,t){return e+t},0)?_style2.default.GENOTYPE_FILL_HET:_style2.default.GENOTYPE_FILL_HOM,e.strokeStyle=e.fillStyle,e.fillRect(s-.2,a,l,_style2.default.GENOTYPE_HEIGHT),e.strokeRect(s-.2,a,l,_style2.default.GENOTYPE_HEIGHT)}),e.popObject()})}function yForRow(e){return e*(_style2.default.GENOTYPE_HEIGHT+_style2.default.GENOTYPE_SPACING)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var i=e,s=t,l=a;n=!1,null===i&&(i=Function.prototype);var r=Object.getOwnPropertyDescriptor(i,s);if(void 0!==r){if("value"in r)return r.value;var o=r.get;if(void 0===o)return;return o.call(l)}var u=Object.getPrototypeOf(i);if(null===u)return;e=u,t=s,a=l,n=!0,r=u=void 0}},_ShimDependencies=require("../ShimDependencies"),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MONSTER_REQUEST=1e4,LABEL_WIDTH=100,GenotypeTiledCanvas=function(e){function t(e,a,n){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.options=n,this.callSetNames=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return yForRow(this.callSetNames.length)}},{key:"render",value:function(e,t,a,n){var i=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1);renderGenotypes(e,t,i,this.source.getGenotypesInRange(i),this.callSetNames)}}]),t}(_TiledCanvas3.default),GenotypeTrack=function(e){function t(e){var a=this;_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.callSetNames=[],this.state={networkStatus:null},e.source.getCallNames().then(function(e){a.callSetNames=e,a.tiles.callSetNames=e,a.tiles.invalidateAll(),a.updateVisualization()})}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t={float:"left",overflow:"hidden","width:":LABEL_WIDTH+"px"},a={overflow:"hidden"},n=null;return this.state.networkStatus&&(n=_ShimDependencies.React.createElement("div",{ref:"status",className:"network-status-small"},_ShimDependencies.React.createElement("div",{className:"network-status-message-small"},"Loading Genotypes"))),this.props.range.stop-this.props.range.start>=MONSTER_REQUEST?_ShimDependencies.React.createElement("div",null,_ShimDependencies.React.createElement("div",{className:"center"},"Zoom in to see genotypes"),_ShimDependencies.React.createElement("canvas",{onClick:this.handleClick.bind(this)})):_ShimDependencies.React.createElement("div",null,n,_ShimDependencies.React.createElement("div",{ref:"container",style:e},_ShimDependencies.React.createElement("div",{className:"genotypeLabels",style:t},_ShimDependencies.React.createElement("canvas",{ref:"labelCanvas"})),_ShimDependencies.React.createElement("div",{className:"genotypeRows",style:a},_ShimDependencies.React.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)}))))}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenotypeTiledCanvas(this.props.source,this.callSetNames,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width-LABEL_WIDTH)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"drawLines",value:function(e){var t=this,a=this.props.width;null!==this.callSetNames&&(e.font="9px Arial",this.callSetNames.forEach(function(n){e.pushObject(n);var i=yForRow(t.callSetNames.indexOf(n));e.fillStyle=_style2.default.BACKGROUND_FILL,e.fillRect(0,i,a,_style2.default.GENOTYPE_HEIGHT),e.popObject()}))}},{key:"drawLabels",value:function(){var e=this,t=this.refs.labelCanvas;if(0!==this.props.width&&void 0!==t){var a=yForRow(this.callSetNames.length);if(t.clientHeight!=a){var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(t));_d3utils2.default.sizeCanvas(t,LABEL_WIDTH,a),null!==this.callSetNames&&(n.font="9px Arial",this.callSetNames.forEach(function(t){n.pushObject(t);var a=yForRow(e.callSetNames.indexOf(t));n.fillStyle="black",n.fillText(t,0,a+_style2.default.GENOTYPE_HEIGHT),n.popObject()}))}}}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width;if(0!==t&&void 0!==e){var a=yForRow(this.callSetNames.length);_d3utils2.default.sizeCanvas(e,t-LABEL_WIDTH,a);var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));this.drawLabels(),this.renderScene(n)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),n=this.getScale();e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.drawLines(e),this.tiles.renderToScreen(e,a,n),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,n=this.props.range,i=new _ContigInterval2.default(n.contig,n.start-1,n.stop+1),s=this.getScale(),l=Math.floor(s.invert(a))-2,r=l+2,o=this.props.source.getGenotypesInRange(i),u=_underscore2.default.find(o,function(e){return _utils2.default.tupleRangeOverlaps([[e.variant.position],[e.variant.position+1]],[[l],[r]])}),c=window.alert||console.log;if(u){var p="variant: "+JSON.stringify(u.variant),d=u.calls.map(function(e){return e.callSetName});c(p+"\n"+("samples with variant: "+JSON.stringify(d)))}}}]),t}(_ShimDependencies.React.Component);GenotypeTrack.displayName="genotypes",module.exports=GenotypeTrack;

},{"../ContigInterval":182,"../ShimDependencies":192,"../style":224,"../utils":226,"./TiledCanvas":240,"./canvas-utils":242,"./d3utils":243,"data-canvas":4,"shallow-equals":177,"underscore":178}],236:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var r=e,i=t,o=a;n=!1,null===r&&(r=Function.prototype);var u=Object.getOwnPropertyDescriptor(r,i);if(void 0!==u){if("value"in u)return u.value;var l=u.get;if(void 0===l)return;return l.call(o)}var s=Object.getPrototypeOf(r);if(null===s)return;e=s,t=i,a=o,n=!0,u=s=void 0}},_ShimDependencies=require("../ShimDependencies"),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),LocationTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _ShimDependencies.React.createElement("canvas",null)}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_ShimDependencies.ReactDOM.findDOMNode(this),t=this.props,a=t.range,n=t.width,r=t.height,i=this.getScale();if(e&&e instanceof Element){e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,n,r);var o=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));o.save(),o.reset(),o.clearRect(0,0,o.canvas.width,o.canvas.height);var u=Math.floor((a.stop+a.start)/2),l=Math.round(i(u+1)),s=Math.round(i(u));_canvasUtils2.default.drawLine(o,s-.5,0,s-.5,r),_canvasUtils2.default.drawLine(o,l-.5,0,l-.5,r);var c=r/2;o.fillStyle=_style2.default.LOC_FONT_COLOR,o.font=_style2.default.LOC_FONT_STYLE,o.fillText(u.toLocaleString()+" bp",l+_style2.default.LOC_TICK_LENGTH+_style2.default.LOC_TEXT_PADDING,c+_style2.default.LOC_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(o,l-.5,c-.5,l+_style2.default.LOC_TICK_LENGTH-.5,c-.5),o.restore()}}}]),t}(_ShimDependencies.React.Component);LocationTrack.displayName="location",LocationTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=LocationTrack;

},{"../ShimDependencies":192,"../sources/EmptySource":217,"../style":224,"./canvas-utils":242,"./d3utils":243,"data-canvas":4}],237:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function spanAndInsert(e){for(var t=!0;t;){var r=e;if(t=!1,1==r.length)return{insert:null,span:r[0]};if(2!=r.length)throw"Called spanAndInsert with "+r.length+" \notin [1, 2]";if(r[0].chrOnContig(r[1].contig)){var n=r[0].interval,i=r[1].interval,u=n.start<i.start?new _Interval2.default(n.stop,i.start):new _Interval2.default(i.stop,n.start),a=_Interval2.default.boundingInterval([n,i]);return{insert:u,span:new _ContigInterval2.default(r[0].contig,a.start,a.stop)}}e=[r[0]],t=!0}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,u=t,a=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,u);if(void 0!==s){if("value"in s)return s.value;var o=s.get;if(void 0===o)return;return o.call(a)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=u,r=a,n=!0,s=l=void 0}},_AbstractCache2=require("./AbstractCache"),_AbstractCache3=_interopRequireDefault(_AbstractCache2),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MIN_OUTLIER_PERCENTILE=.5,MAX_OUTLIER_PERCENTILE=99.5,MAX_INSERT_SIZE=3e4,MIN_READS_FOR_OUTLIERS=500,PileupCache=function(e){function t(e,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.viewAsPairs=r,this._insertStats=null}return _inherits(t,e),_createClass(t,[{key:"groupKey",value:function(e){return this.viewAsPairs?e.name+":"+e.ref:e.getKey()}},{key:"addAlignment",value:function(e){this._insertStats=null;var t=this.groupKey(e),r=e.getInterval();t in this.groups||(this.groups[t]={key:t,row:-1,insert:null,span:r,items:[]});var n=this.groups[t];if(!_underscore2.default.find(n.items,function(t){return t.read==e})){var i=(0,_pileuputils.getOpInfo)(e,this.referenceSource),u={read:e,strand:e.getStrand(),refLength:r.length(),ops:i.ops,mismatches:i.mismatches};n.items.push(u);var a=null;if(1==n.items.length){if(this.viewAsPairs){var s=e.getMateProperties(),o=[r];s&&s.ref&&s.ref==e.ref&&(a=new _ContigInterval2.default(s.ref,s.pos,s.pos+r.length()),o.push(a)),n=_underscore2.default.extend(n,spanAndInsert(o))}else n.span=r;e.ref in this.refToPileup||(this.refToPileup[e.ref]=[]);var l=this.refToPileup[e.ref];n.row=(0,_pileuputils.addToPileup)(n.span.interval,l)}else if(2==n.items.length){a=n.items[0].read.getInterval();var f=spanAndInsert([r,a]),c=f.span,p=f.insert;n.insert=p,p&&(n.span=c)}}}},{key:"updateMismatches",value:function(e){for(var t in this.groups){var r=this.groups[t].items,n=!0,i=!1,u=void 0;try{for(var a,s=r[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value,l=o.read;if(l.getInterval().intersects(e)){var f=(0,_pileuputils.getOpInfo)(l,this.referenceSource);o.mismatches=f.mismatches}}}catch(e){i=!0,u=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw u}}}}},{key:"sortReadsAt",value:function(e,t){var r=this.pileupForRef(e),n=_underscore2.default.filter(this.groups,function(r){return _underscore2.default.any(r.items,function(r){return r.read.getInterval().containsLocus(e,t)})}),i=_underscore2.default.mapObject(_underscore2.default.groupBy(n,function(e){return e.row}),function(e){return _underscore2.default.min(e,function(e){return e.span.start()}).span.start()}),u=_underscore2.default.sortBy(_underscore2.default.range(0,r.length),function(e){return i[e]||1/0}),a=[];u.forEach(function(e,t){a[e]=t});var s=_underscore2.default.range(0,r.length).map(function(e){return r[a[e]]}),o=e in this.refToPileup?e:_utils2.default.altContigName(e);this.refToPileup[o]=s,_underscore2.default.each(this.groups,function(t){t.span.chrOnContig(e)&&(t.row=a[t.row])})}},{key:"getInsertStats",value:function(){if(this._insertStats)return this._insertStats;var e=_underscore2.default.map(this.groups,function(e){return e.items[0].read.getInferredInsertSize()}).filter(function(e){return e<MAX_INSERT_SIZE}),t=e.length>=MIN_READS_FOR_OUTLIERS?{minOutlierSize:_utils2.default.computePercentile(e,MIN_OUTLIER_PERCENTILE),maxOutlierSize:_utils2.default.computePercentile(e,MAX_OUTLIER_PERCENTILE)}:{minOutlierSize:0,maxOutlierSize:1/0};return this._insertStats=t,t}}]),t}(_AbstractCache3.default);module.exports=PileupCache;

},{"../ContigInterval":182,"../Interval":185,"../utils":226,"./AbstractCache":227,"./pileuputils":244,"underscore":178}],238:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function isRendered(e){return e.op==_pileuputils.CigarOp.MATCH||e.op==_pileuputils.CigarOp.DELETE||e.op==_pileuputils.CigarOp.INSERT}function renderPileup(e,t,i,a,s,n){function r(i,a,s,n){var r=t(i+1),l=t(i+a+1),o=s+_style2.default.READ_HEIGHT,u=Math.min(READ_STRAND_ARROW_WIDTH,(l-r)/6);e.beginPath(),"R"==n?(e.moveTo(r,s),e.lineTo(l-u,s),e.lineTo(l,(s+o)/2),e.lineTo(l-u,o),e.lineTo(r,o)):(e.moveTo(l,s),e.lineTo(r+u,s),e.lineTo(r,(s+o)/2),e.lineTo(r+u,o),e.lineTo(l,o)),e.fill()}function l(i,a,s){switch(i.op){case _pileuputils.CigarOp.MATCH:if(i.arrow)r(i.pos,i.length,a,i.arrow);else{var n=t(i.pos+1);e.fillRect(n,a,t(i.pos+i.length+1)-n,_style2.default.READ_HEIGHT)}break;case _pileuputils.CigarOp.DELETE:var l=t(i.pos+1),o=t(i.pos+1+i.length),u=a+_style2.default.READ_HEIGHT/2-.5;e.save(),e.fillStyle=_style2.default.DELETE_COLOR,e.fillRect(l,u,o-l,1),e.restore();break;case _pileuputils.CigarOp.INSERT:e.save(),e.fillStyle=_style2.default.INSERT_COLOR;var c=t(i.pos+1)-2,p=a-1,d=a+_style2.default.READ_HEIGHT+2;e.fillRect(c,p,1,d-p),e.restore()}}function o(t,i){e.pushObject(t),e.save(),s&&(e.fillStyle="+"==t.strand?_style2.default.ALIGNMENT_PLUS_STRAND_COLOR:_style2.default.ALIGNMENT_MINUS_STRAND_COLOR),t.ops.forEach(function(e){isRendered(e)&&l(e,i,t)}),t.mismatches.forEach(function(e){return c(e,i)}),e.restore(),e.popObject()}function u(i){if(e.save(),a&&i.insert){var s=i.span.length();s<a.minOutlierSize?e.fillStyle="blue":s>a.maxOutlierSize?e.fillStyle="red":e.fillStyle=_style2.default.ALIGNMENT_COLOR}else e.fillStyle=_style2.default.ALIGNMENT_COLOR;var n=(0,_pileuputils.yForRow)(i.row);if(e.pushObject(i),i.insert){var r=i.insert,l=t(r.start+1),u=t(r.stop+1);e.fillRect(l,n+_style2.default.READ_HEIGHT/2-.5,u-l,1)}i.items.forEach(function(e){return o(e,n)}),e.popObject(),e.restore()}function c(a,s){i.interval.contains(a.pos)&&(e.pushObject(a),e.save(),e.fillStyle=_style2.default.BASE_COLORS[a.basePair],e.globalAlpha=opacityForQuality(a.quality),e.textAlign="center",h?e.fillText(a.basePair,t(1.5+a.pos),s+_style2.default.READ_HEIGHT-2):e.fillRect(t(1+a.pos),s,p-1,_style2.default.READ_HEIGHT),e.restore(),e.popObject())}var p=t(1)-t(0),d=_DisplayMode2.default.getDisplayMode(p),h=_DisplayMode2.default.isText(d);e.font=_style2.default.TEXT_STYLE(_DisplayMode2.default.TIGHT,_style2.default.READ_HEIGHT-1),n.forEach(function(e){return u(e)})}function opacityForQuality(e){var t=Q_SCALE(e);return t=Math.round(10*t+.5)/10,Math.min(1,t)}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),_get=function(e,t,i){for(var a=!0;a;){var s=e,n=t,r=i;a=!1,null===s&&(s=Function.prototype);var l=Object.getOwnPropertyDescriptor(s,n);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(r)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=n,i=r,a=!0,l=u=void 0}},_ShimDependencies=require("../ShimDependencies"),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_pileuputils=require("./pileuputils"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_PileupCache=require("./PileupCache"),_PileupCache2=_interopRequireDefault(_PileupCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),READ_STRAND_ARROW_WIDTH=5,SUPPORTS_DASHES="undefined"!=typeof CanvasRenderingContext2D&&!!CanvasRenderingContext2D.prototype.setLineDash,PileupTiledCanvas=function(e){function t(e,i){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.options=i}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return this.cache.pileupHeightForRef(e)*(_style2.default.READ_HEIGHT+_style2.default.READ_SPACING)}},{key:"render",value:function(e,t,i){var a=new _ContigInterval2.default(i.contig,i.start()-1,i.stop()+1),s=this.cache.getGroupsOverlapping(a);renderPileup(e,t,a,this.options.colorByInsert?this.cache.getInsertStats():null,this.options.colorByStrand,s)}}]),t}(_TiledCanvas3.default),MIN_Q=5,MAX_Q=20,Q_SCALE=_scale2.default.linear().domain([MIN_Q,MAX_Q]).range([.1,.9]).clamp(!0),PileupTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null,i=this.state.networkStatus;if(i){var a=this.formatStatus(i);t=_ShimDependencies.React.createElement("div",{ref:"status",className:"network-status"},_ShimDependencies.React.createElement("div",{className:"network-status-message"},"Loading alignments (",a,")"))}return _ShimDependencies.React.createElement("div",null,t,_ShimDependencies.React.createElement("div",{ref:"container",style:e},_ShimDependencies.React.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"formatStatus",value:function(e){if(e.numRequests){var t=e.numRequests>1?"s":"";return"issued "+e.numRequests+" request"+t}if(e.status)return e.status;throw"invalid"}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.props.source.on("newdata",function(t){e.updateReads(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){var i=!1;this.props.options!=e.options&&(this.handleOptionsChange(e.options),i=!0),(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)&&!i||this.updateVisualization()}},{key:"handleOptionsChange",value:function(e){this.tiles.invalidateAll(),e.viewAsPairs!=this.props.options.viewAsPairs?(this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.updateReads(_ContigInterval2.default.fromGenomeRange(this.props.range))):e.colorByInsert!=this.props.options.colorByInsert?(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization()):e.hideAlignments!=this.props.options.hideAlignments&&(this.tiles.update(this.props.options),this.updateVisualization()),e.sort!=this.props.options.sort&&this.handleSort()}},{key:"updateReads",value:function(e){var t=this,i=this.cache.anyGroupsOverlapping(e);this.props.source.getFeaturesInRange(e).forEach(function(e){return t.cache.addAlignment(e)}),!i&&this.cache.anyGroupsOverlapping(e)&&this.handleSort()}},{key:"updateVisualization",value:function(){var e=this.refs.canvas;if(0!==this.props.width){var t=_canvasUtils2.default.getContext(e),i=_dataCanvas2.default.getDataContext(t);this.renderScene(i)}}},{key:"renderScene",value:function(e){var t=this.props.range,i=new _ContigInterval2.default(t.contig,t.start,t.stop),a=this.getScale(),s=this.refs.canvas,n=this.props.width;e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height);var r=_d3utils2.default.findParent(s,"pileup");if(this.props.options.hideAlignments)return _d3utils2.default.sizeCanvas(s,n,60),void(r&&(r.style.minHeight="60px"));r&&(r.style.minHeight="");var l=(0,_pileuputils.yForRow)(this.cache.pileupHeightForRef(this.props.range.contig));_d3utils2.default.sizeCanvas(s,n,l),this.tiles.renderToScreen(e,i,a),this.renderCenterLine(e,i,a);var o=_d3utils2.default.findParent(this.refs.canvas,"track-content");o&&(o.scrollLeft=0)}},{key:"renderCenterLine",value:function(e,t,i){var a=Math.floor((t.stop()+t.start())/2),s=Math.ceil(i(a+1)),n=Math.floor(i(a)),r=e.canvas.height;if(e.save(),e.lineWidth=1,SUPPORTS_DASHES&&e.setLineDash([5,5]),s-n<3){var l=Math.round((n+s)/2);_canvasUtils2.default.drawLine(e,l-.5,0,l-.5,r)}else _canvasUtils2.default.drawLine(e,n-.5,0,n-.5,r),_canvasUtils2.default.drawLine(e,s-.5,0,s-.5,r);e.restore()}},{key:"handleSort",value:function(){var e=this.props.range,t=e.start,i=e.stop,a=(t+i)/2;this.cache.sortReadsAt(this.props.range.contig,a),this.tiles.invalidateAll(),this.updateVisualization()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,i=t.offsetX,a=t.offsetY,s=_canvasUtils2.default.getContext(this.refs.canvas),n=new _dataCanvas2.default.ClickTrackingContext(s,i,a),r=this.props.range,l=new _ContigInterval2.default(r.contig,r.start,r.stop);renderPileup(n,this.getScale(),l,null,!1,this.cache.getGroupsOverlapping(l));var o=_underscore2.default.find(n.hits[0],function(e){return e.read}),u=window.alert||console.log;o&&u(o.read.debugString())}}]),t}(_ShimDependencies.React.Component);PileupTrack.displayName="pileup",PileupTrack.defaultOptions={viewAsPairs:!1,colorByInsert:!0,colorByStrand:!1,hideAlignments:!1},PileupTrack.getOptionsMenu=function(e){return[{key:"view-pairs",label:"View as pairs",checked:e.viewAsPairs},"-",{key:"color-insert",label:"Color by insert size",checked:e.colorByInsert},{key:"color-strand",label:"Color by strand",checked:e.colorByStrand},{key:"hide-alignments",label:"Hide alignments",checked:e.hideAlignments},"-",{key:"sort",label:"Sort alignments"}]};var messageId=1;PileupTrack.handleSelectOption=function(e,t){var i=_underscore2.default.clone(t);return"view-pairs"==e?(i.viewAsPairs=!i.viewAsPairs,i):"color-insert"==e?(i.colorByInsert=!i.colorByInsert,i.colorByInsert&&(i.colorByStrand=!1),i):"color-strand"==e?(i.colorByStrand=!i.colorByStrand,i.colorByStrand&&(i.colorByInsert=!1),i):"hide-alignments"==e?(i.hideAlignments=!i.hideAlignments,i):"sort"==e?(i.sort=messageId++,i):t},module.exports=PileupTrack;

},{"../ContigInterval":182,"../ShimDependencies":192,"../scale":214,"../style":224,"./DisplayMode":230,"./PileupCache":237,"./TiledCanvas":240,"./canvas-utils":242,"./d3utils":243,"./pileuputils":244,"data-canvas":4,"shallow-equals":177,"underscore":178}],239:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,l=t,i=a;r=!1,null===n&&(n=Function.prototype);var u=Object.getOwnPropertyDescriptor(n,l);if(void 0!==u){if("value"in u)return u.value;var o=u.get;if(void 0===o)return;return o.call(i)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=l,a=i,r=!0,u=s=void 0}},_ShimDependencies=require("../ShimDependencies"),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),ScaleTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _ShimDependencies.React.createElement("canvas",{ref:"canvas"})}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"getDOMNode",value:function(){return _ShimDependencies.ReactDOM.findDOMNode(this)}},{key:"updateVisualization",value:function(){var e=this.getDOMNode(),t=this.props,a=t.range,r=t.width,n=t.height;_d3utils2.default.sizeCanvas(e,r,n);var l=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));l.save(),l.reset(),l.clearRect(0,0,l.canvas.width,l.canvas.height);var i=a.stop-a.start+1,u=Math.round(r/2),o=Math.round(n/2),s=_d3utils2.default.formatRange(i),c=s.prefix,_=s.unit;l.lineWidth=1,l.fillStyle=_style2.default.SCALE_FONT_COLOR,l.font=_style2.default.SCALE_FONT_STYLE,l.textAlign="center",l.fillText(c+" "+_,u,o+_style2.default.SCALE_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(l,.5,o-.5,u-_style2.default.SCALE_LINE_PADDING-.5,o-.5),l.beginPath(),l.moveTo(.5+_style2.default.SCALE_ARROW_SIZE,o-_style2.default.SCALE_ARROW_SIZE-.5),l.lineTo(.5,o-.5),l.lineTo(.5+_style2.default.SCALE_ARROW_SIZE,o+_style2.default.SCALE_ARROW_SIZE-.5),l.closePath(),l.fill(),l.stroke(),_canvasUtils2.default.drawLine(l,u+_style2.default.SCALE_LINE_PADDING-.5,o-.5,r-.5,o-.5),l.beginPath(),l.moveTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o-_style2.default.SCALE_ARROW_SIZE-.5),l.lineTo(r-.5,o-.5),l.lineTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o+_style2.default.SCALE_ARROW_SIZE-.5),l.closePath(),l.fill(),l.stroke(),l.restore()}}]),t}(_ShimDependencies.React.Component);ScaleTrack.displayName="scale",ScaleTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=ScaleTrack;

},{"../ShimDependencies":192,"../sources/EmptySource":217,"../style":224,"./canvas-utils":242,"./d3utils":243,"data-canvas":4}],240:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),EPSILON=1e-6,MIN_PX_PER_BUFFER=500,DEBUG_RENDER_TILE_EDGES=!1,TiledCanvas=function(){function e(){_classCallCheck(this,e),this.tileCache=[]}return _createClass(e,[{key:"renderTile",value:function(e){var t=e.range,r=this.heightForRef(t.contig),n=Math.round(e.pixelsPerBase*t.length());e.buffer=document.createElement("canvas"),_d3utils2.default.sizeCanvas(e.buffer,n,r);var a=_scale2.default.linear().domain([t.start(),t.stop()+1]).range([0,n]),i=_canvasUtils2.default.getContext(e.buffer),u=_dataCanvas2.default.getDataContext(i);this.render(u,a,t)}},{key:"makeNewTiles",value:function(t,r,n){var a=this,i=e.getNewTileRanges(t,n.interval,r),u=i.map(function(e){return{pixelsPerBase:r,range:new _ContigInterval2.default(n.contig,e.start,e.stop),buffer:document.createElement("canvas")}});return u.forEach(function(e){return a.renderTile(e)}),this.tileCache=this.tileCache.concat(u),this.tileCache.sort(function(e,t){return _ContigInterval2.default.compare(e.range,t.range)}),u}},{key:"renderToScreen",value:function(e,t,r){var n=r(1)-r(0),a=this.tileCache.filter(function(e){return Math.abs(e.pixelsPerBase-n)<EPSILON&&t.chrOnContig(e.range.contig)}),i=this.heightForRef(t.contig),u=a.map(function(e){return e.range.interval});t.interval.isCoveredBy(u)||(a=a.concat(this.makeNewTiles(u,n,t))),a.filter(function(e){return t.intersects(e.range)}).forEach(function(t){var n=Math.round(r(t.range.start())),a=Math.round(r(t.range.stop()+1)),u=a-n;0!==t.buffer.height&&(e.drawImage(t.buffer,0,0,t.buffer.width,t.buffer.height,n,0,u,t.buffer.height),DEBUG_RENDER_TILE_EDGES&&(e.save(),e.strokeStyle="black",_canvasUtils2.default.drawLine(e,n-.5,0,n-.5,i),_canvasUtils2.default.drawLine(e,a-.5,0,a-.5,i),e.restore()))})}},{key:"invalidateAll",value:function(){this.tileCache=[]}},{key:"invalidateRange",value:function(e){this.tileCache=this.tileCache.filter(function(t){return!t.range.intersects(e)})}},{key:"heightForRef",value:function(e){throw"Not implemented"}},{key:"render",value:function(e,t,r){throw"Not implemented"}}],[{key:"getNewTileRanges",value:function(e,t,r){var n=Math.ceil(MIN_PX_PER_BUFFER/r),a=Math.floor(t.start/n)*n,i=_underscore2.default.range(a,t.stop,n).map(function(e){return new _Interval2.default(e,e+n-1)}).filter(function(t){return!t.isCoveredBy(e)});return _utils2.default.flatMap(i,function(t){return t.complementIntervals(e)}).filter(function(e){return e.intersects(t)})}}]),e}();module.exports=TiledCanvas;

},{"../ContigInterval":182,"../Interval":185,"../scale":214,"../utils":226,"./canvas-utils":242,"./d3utils":243,"data-canvas":4,"underscore":178}],241:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_get=function(e,t,n){for(var a=!0;a;){var r=e,i=t,o=n;a=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,i);if(void 0!==l){if("value"in l)return l.value;var s=l.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=i,n=o,a=!0,l=u=void 0}},_types=require("../types"),_ShimDependencies=require("../ShimDependencies"),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),VariantTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _ShimDependencies.React.createElement("canvas",{onClick:this.handleClick.bind(this)})}},{key:"componentDidMount",value:function(){var e=this;this.updateVisualization(),this.props.source.on("newdata",function(){e.updateVisualization()})}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_ShimDependencies.ReactDOM.findDOMNode(this),t=this.props,n=t.width,a=t.height;if(0!==n){if(!(e&&e instanceof Element))throw new TypeError("canvas is not an Element");e instanceof HTMLCanvasElement&&_d3utils2.default.sizeCanvas(e,n,a);var r=_canvasUtils2.default.getContext(e),i=_dataCanvas2.default.getDataContext(r);this.renderScene(i)}}},{key:"renderScene",value:function(e){var t=this,n=this.props.range,a=new _ContigInterval2.default(n.contig,n.start,n.stop),r=this.props.source.getVariantsInRange(a),i=this.getScale(),o=this.props.height,l=o-_style2.default.VARIANT_HEIGHT-1;e.clearRect(0,0,e.canvas.width,e.canvas.height),e.reset(),e.save(),e.fillStyle=_style2.default.VARIANT_FILL,e.strokeStyle=_style2.default.VARIANT_STROKE,r.forEach(function(n){var a=1;if(t.props.options.variantHeightByFrequency){var r=null;void 0===t.props.options.allelFrequencyStrategy?r=n.majorFrequency:t.props.options.allelFrequencyStrategy===_types.AllelFrequencyStrategy.Major?r=n.majorFrequency:t.props.options.allelFrequencyStrategy===_types.AllelFrequencyStrategy.Minor?r=n.minorFrequency:console.log("Unknown AllelFrequencyStrategy: ",t.props.options.allelFrequencyStrategy),null!==r&&void 0!==r&&(a=r)}var o=_style2.default.VARIANT_HEIGHT*a,s=l-.5+_style2.default.VARIANT_HEIGHT-o,u=Math.round(i(n.position))-.5,c=Math.max(1,Math.round(i(n.position+1)-i(n.position)));e.pushObject(n),e.fillRect(u,s,c,o),e.strokeRect(u,s,c,o),e.popObject()}),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,n=t.offsetX,a=t.offsetY,r=_ShimDependencies.ReactDOM.findDOMNode(this);if(null!=r){if(!(r&&r instanceof Element))throw new TypeError("canvas is not an Element");var i=_canvasUtils2.default.getContext(r),o=new _dataCanvas2.default.ClickTrackingContext(i,n,a);this.renderScene(o);var l=o.hit;if(l&&l.length>0){for(var s=[],u=0;u<l.length;u++)s.push({id:l[u].id,vcfLine:l[u].vcfLine,ref:l[u].ref,alt:l[u].alt});"function"==typeof this.props.options.onVariantClicked?this.props.options.onVariantClicked(s):console.log("Variants clicked: ",s)}}}}]),t}(_ShimDependencies.React.Component);VariantTrack.displayName="variants",module.exports=VariantTrack;

},{"../ContigInterval":182,"../ShimDependencies":192,"../style":224,"../types":225,"./canvas-utils":242,"./d3utils":243,"data-canvas":4,"shallow-equals":177}],242:[function(require,module,exports){
"use strict";function getContext(t){return t.getContext("2d")}function drawLine(t,e,n,o,i){t.beginPath(),t.moveTo(e,n),t.lineTo(o,i),t.stroke()}module.exports={getContext:getContext,drawLine:drawLine};

},{}],243:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTrackScale(e,a){return e?_scale2.default.linear().domain([e.start,e.stop+1]).range([0,a]):_scale2.default.linear()}function formatPrefix(e){var a=0;e&&(e<0&&(e*=-1),a=1+Math.floor(1e-12+Math.log(e)/Math.LN10),a=Math.max(0,Math.min(24,3*Math.floor((a-1)/3))));var t=Math.pow(10,a);return{symbol:formatPrefixes[a/3],scale:function(e){return e/t}}}function formatRange(e){var a=e/1e3,t=formatPrefix(Math.max(1,a)),n=t.symbol+"bp";return{prefix:Math.round(t.scale(e)).toLocaleString(),unit:n}}function heightForCanvas(e,a){return a*window.devicePixelRatio}function sizeCanvas(e,a,t){var n=window.devicePixelRatio;e.width=a*n,e.height=t*n,e.style.width=a+"px",e.style.height=t+"px";var r=e.getContext("2d");null!==r&&r instanceof CanvasRenderingContext2D&&r.scale(n,n)}function findParent(e,a){var t=e;do{if(t.classList.contains(a))return t;t=t.parentElement}while(t);return null}Object.defineProperty(exports,"__esModule",{value:!0});var _scale=require("../scale"),_scale2=_interopRequireDefault(_scale),formatPrefixes=["","k","M","G","T","P","E","Z","Y"];module.exports={heightForCanvas:heightForCanvas,formatRange:formatRange,getTrackScale:getTrackScale,sizeCanvas:sizeCanvas,findParent:findParent};

},{"../scale":214}],244:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function yForRow(e){return e*((arguments.length<=1||void 0===arguments[1]?_style2.default.READ_HEIGHT:arguments[1])+(arguments.length<=2||void 0===arguments[2]?_style2.default.READ_SPACING:arguments[2]))}function pileup(e){for(var t=new Array(e.length),r=[],n=0;n<e.length;n++){for(var a=e[n],i=r.length,o=0;o<r.length;o++)if(!a.intersects(r[o])){i=o;break}t[n]=i,r[i]=a}return t}function addToPileup(e,t){for(var r=-1,n=0;n<t.length;n++){for(var a=t[n],i=!0,o=0;o<a.length;o++)if(a[o].intersects(e)){i=!1;break}if(i){r=n;break}}return-1==r&&(r=t.length,t[r]=[]),t[r].push(e),r}function findMismatches(e,t,r,n){for(var a=[],i=0;i<t.length;i++){var o=r+i,g=e.charAt(i),l=t.charAt(i);g!=l&&"."!=g&&a.push({pos:o,basePair:l,quality:n[i]})}return a}function getArrowIndex(e){var t,r,n=e.cigarOps;if("-"==e.getStrand()){for(t=0;t<n.length;t++)if(r=n[t],"S"!=r.op)return"M"==r.op?t:-1}else for(t=n.length-1;t>=0;t--)if(r=n[t],"S"!=r.op)return"M"==r.op?t:-1;return-1}function getOpInfo(e,t){for(var r=e.cigarOps,n=e.getInterval(),a=n.start(),i=e.getSequence(),o=e.getQualityScores(),g=0,l=a,s=getArrowIndex(e),p=[],u=[],c=0;c<r.length;c++){var f=r[c];if("M"==f.op){var C=t.getRangeAsString({contig:n.contig,start:l,stop:l+f.length-1}),h=i.slice(g,g+f.length);u=u.concat(findMismatches(C,h,l,o))}switch(p.push({op:f.op,length:f.length,pos:l,arrow:null}),f.op){case CigarOp.MATCH:case CigarOp.DELETE:case CigarOp.SKIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:l+=f.length}switch(f.op){case CigarOp.MATCH:case CigarOp.INSERT:case CigarOp.SOFTCLIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:g+=f.length}}return s>=0&&(p[s].arrow="-"==e.getStrand()?"L":"R"),{ops:p,mismatches:u}}Object.defineProperty(exports,"__esModule",{value:!0});var _style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),CigarOp={MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",SOFTCLIP:"S",HARDCLIP:"H",PADDING:"P",SEQMATCH:"=",SEQMISMATCH:"X"};module.exports={yForRow:yForRow,pileup:pileup,addToPileup:addToPileup,getOpInfo:getOpInfo,CigarOp:CigarOp};

},{"../ContigInterval":182,"../style":224}]},{},[213])(213)
});

//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFja2JvbmUvYmFja2JvbmUuanMiLCJub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2RhdGEtY2FudmFzL3NyYy9kYXRhLWNhbnZhcy5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9FdmVudExpc3RlbmVyLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NhbWVsaXplLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NhbWVsaXplU3R5bGVOYW1lLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2NvbnRhaW5zTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9jcmVhdGVBcnJheUZyb21NaXhlZC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9jcmVhdGVOb2Rlc0Zyb21NYXJrdXAuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9lbXB0eU9iamVjdC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9mb2N1c05vZGUuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9nZXRNYXJrdXBXcmFwLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2dldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2h5cGhlbmF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9oeXBoZW5hdGVTdHlsZU5hbWUuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvaW52YXJpYW50LmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2lzTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9pc1RleHROb2RlLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL2tleU1pcnJvci5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9rZXlPZi5qcyIsIm5vZGVfbW9kdWxlcy9mYmpzL2xpYi9tYXBPYmplY3QuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvbWVtb2l6ZVN0cmluZ09ubHkuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvc2hhbGxvd0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL2ZianMvbGliL3RvQXJyYXkuanMiLCJub2RlX21vZHVsZXMvZmJqcy9saWIvd2FybmluZy5qcyIsIm5vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2lzYXJyYXkvaW5kZXguanMiLCJub2RlX21vZHVsZXMvamJpbmFyeS9kaXN0L2Jyb3dzZXIvamJpbmFyeS5qcyIsIm5vZGVfbW9kdWxlcy9qZGF0YXZpZXcvZGlzdC9ub2RlL2pkYXRhdmlldy5qcyIsIm5vZGVfbW9kdWxlcy9tZW1vcnktY2FjaGUvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvaW5mbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi91dGlscy9jb21tb24uanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvdXRpbHMvc3RyaW5ncy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2FkbGVyMzIuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9jb25zdGFudHMuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9jcmMzMi5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2d6aGVhZGVyLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvaW5mZmFzdC5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2luZmxhdGUuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9pbmZ0cmVlcy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL21lc3NhZ2VzLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvenN0cmVhbS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcS9xLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0LWRvbS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQXV0b0ZvY3VzVXRpbHMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0JlZm9yZUlucHV0RXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NTU1Byb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9DU1NQcm9wZXJ0eU9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NhbGxiYWNrUXVldWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NoYW5nZUV2ZW50UGx1Z2luLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9DbGllbnRSZWFjdFJvb3RJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRE9NQ2hpbGRyZW5PcGVyYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01Qcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRE9NUHJvcGVydHlPcGVyYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9EYW5nZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0RlZmF1bHRFdmVudFBsdWdpbk9yZGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FbnRlckxlYXZlRXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0V2ZW50Q29uc3RhbnRzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpbkh1Yi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRQbHVnaW5SZWdpc3RyeS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRQbHVnaW5VdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRQcm9wYWdhdG9ycy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9IVE1MRE9NUHJvcGVydHlDb25maWcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0xpbmtlZFZhbHVlVXRpbHMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL09iamVjdC5hc3NpZ24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1Bvb2xlZENsYXNzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDaGlsZFJlY29uY2lsZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q2hpbGRyZW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q2xhc3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDb21wb3NpdGVDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q3VycmVudE93bmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01CdXR0b24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NQ29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUZhY3Rvcmllcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01GZWF0dXJlRmxhZ3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NSURPcGVyYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUlucHV0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTU9wdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01TZWxlY3QuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NU2VsZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVNlcnZlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01UZXh0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVRleHRhcmVhLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERlZmF1bHRJbmplY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFbGVtZW50VmFsaWRhdG9yLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEVtcHR5Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RXJyb3JVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFdmVudEVtaXR0ZXJNaXhpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFdmVudExpc3RlbmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEluamVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJbnB1dFNlbGVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJbnN0YW5jZUhhbmRsZXMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0SW5zdGFuY2VNYXAuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0SXNvbW9ycGhpYy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RNYXJrdXBDaGVja3N1bS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RNb3VudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RNdWx0aUNoaWxkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3ROYXRpdmVDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE93bmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFBlcmYuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlTG9jYXRpb25zLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFByb3BUeXBlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RSZWNvbmNpbGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlZi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RSb290SW5kZXguanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJSZW5kZXJpbmcuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0VXBkYXRlUXVldWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0VXBkYXRlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RWZXJzaW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TVkdET01Qcm9wZXJ0eUNvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU2VsZWN0RXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NlcnZlclJlYWN0Um9vdEluZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TaW1wbGVFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljQ2xpcGJvYXJkRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0RyYWdFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0ZvY3VzRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0lucHV0RXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY0tleWJvYXJkRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY01vdXNlRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY1RvdWNoRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY1VJRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1N5bnRoZXRpY1doZWVsRXZlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1RyYW5zYWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9WaWV3cG9ydE1ldHJpY3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2FjY3VtdWxhdGVJbnRvLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9hZGxlcjMyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9jYW5EZWZpbmVQcm9wZXJ0eS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZGFuZ2Vyb3VzU3R5bGVWYWx1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZGVwcmVjYXRlZC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9maW5kRE9NTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZmxhdHRlbkNoaWxkcmVuLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9mb3JFYWNoQWNjdW11bGF0ZWQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50Q2hhckNvZGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50S2V5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXRFdmVudE1vZGlmaWVyU3RhdGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50VGFyZ2V0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXRJdGVyYXRvckZuLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9nZXRUZXh0Q29udGVudEFjY2Vzc29yLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9pc0V2ZW50U3VwcG9ydGVkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9pc1RleHRJbnB1dEVsZW1lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL29ubHlDaGlsZC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9zZXRJbm5lckhUTUwuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3NldFRleHRDb250ZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvdHJhdmVyc2VBbGxDaGlsZHJlbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvdmFsaWRhdGVET01OZXN0aW5nLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzIiwibm9kZV9tb2R1bGVzL3NoYWxsb3ctZXF1YWxzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qcyIsInNyYy9saWIvbWluaWQzLmpzIiwic3JjL21haW4vQWJzdHJhY3RGaWxlLmpzIiwic3JjL21haW4vQWxpZ25tZW50LmpzIiwic3JjL21haW4vQ29udGlnSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Db250cm9scy5qcyIsInNyYy9tYWluL0dBNEdIQWxpZ25tZW50LmpzIiwic3JjL21haW4vSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Mb2NhbFN0cmluZ0ZpbGUuanMiLCJzcmMvbWFpbi9NZW51LmpzIiwic3JjL21haW4vUmVtb3RlRmlsZS5qcyIsInNyYy9tYWluL1JlbW90ZVJlcXVlc3QuanMiLCJzcmMvbWFpbi9Sb290LmpzIiwic3JjL21haW4vU2VxdWVuY2VTdG9yZS5qcyIsInNyYy9tYWluL1NoaW1EZXBlbmRlbmNpZXMuanMiLCJzcmMvbWFpbi9WaXN1YWxpemF0aW9uV3JhcHBlci5qcyIsInNyYy9tYWluL2RhdGEvQmlnQmVkLmpzIiwic3JjL21haW4vZGF0YS9TYW1SZWFkLmpzIiwic3JjL21haW4vZGF0YS9Ud29CaXQuanMiLCJzcmMvbWFpbi9kYXRhL1ZpcnR1YWxPZmZzZXQuanMiLCJzcmMvbWFpbi9kYXRhL2JhaS5qcyIsInNyYy9tYWluL2RhdGEvYmFtLmpzIiwic3JjL21haW4vZGF0YS9iZWR0b29scy5qcyIsInNyYy9tYWluL2RhdGEvZmVhdHVyZS5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9iYW1UeXBlcy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9iYmkuanMiLCJzcmMvbWFpbi9kYXRhL2Zvcm1hdHMvaGVscGVycy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy90d29CaXRUeXBlcy5qcyIsInNyYy9tYWluL2RhdGEvZ2VuZS5qcyIsInNyYy9tYWluL2RhdGEvZ2VuZXJpY0ZlYXR1cmUuanMiLCJzcmMvbWFpbi9kYXRhL3ZhcmlhbnQuanMiLCJzcmMvbWFpbi9kYXRhL3ZjZi5qcyIsInNyYy9tYWluL2pzb24vR0E0R0hBbGlnbm1lbnRKc29uLmpzIiwic3JjL21haW4vanNvbi9HQTRHSEZlYXR1cmVKc29uLmpzIiwic3JjL21haW4vanNvbi9HQTRHSFZhcmlhbnRKc29uLmpzIiwic3JjL21haW4vcGlsZXVwLmpzIiwic3JjL21haW4vc2NhbGUuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0JhbURhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0JpZ0JlZERhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0VtcHR5U291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9HQTRHSEFsaWdubWVudFNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvR0E0R0hGZWF0dXJlU291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9HQTRHSEdlbmVTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0dBNEdIVmFyaWFudFNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvVmNmRGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3N0eWxlLmpzIiwic3JjL21haW4vdHlwZXMuanMiLCJzcmMvbWFpbi91dGlscy5qcyIsInNyYy9tYWluL3Zpei9BYnN0cmFjdENhY2hlLmpzIiwic3JjL21haW4vdml6L0NvdmVyYWdlQ2FjaGUuanMiLCJzcmMvbWFpbi92aXovQ292ZXJhZ2VUcmFjay5qcyIsInNyYy9tYWluL3Zpei9EaXNwbGF5TW9kZS5qcyIsInNyYy9tYWluL3Zpei9GZWF0dXJlVHJhY2suanMiLCJzcmMvbWFpbi92aXovR2VuZVRyYWNrLmpzIiwic3JjL21haW4vdml6L0dlbmVyaWNGZWF0dXJlQ2FjaGUuanMiLCJzcmMvbWFpbi92aXovR2Vub21lVHJhY2suanMiLCJzcmMvbWFpbi92aXovR2Vub3R5cGVUcmFjay5qcyIsInNyYy9tYWluL3Zpei9Mb2NhdGlvblRyYWNrLmpzIiwic3JjL21haW4vdml6L1BpbGV1cENhY2hlLmpzIiwic3JjL21haW4vdml6L1BpbGV1cFRyYWNrLmpzIiwic3JjL21haW4vdml6L1NjYWxlVHJhY2suanMiLCJzcmMvbWFpbi92aXovVGlsZWRDYW52YXMuanMiLCJzcmMvbWFpbi92aXovVmFyaWFudFRyYWNrLmpzIiwic3JjL21haW4vdml6L2NhbnZhcy11dGlscy5qcyIsInNyYy9tYWluL3Zp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LEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBRSxFQUFFLFNBQVMsSUFBSSxFQUFFLFFBQVMsR0FBRSxHQUFHLE1BQU8sWUFBVyxHQUFJLEdBQUUsVUFBVSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUcsSUFBRyxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxVQUFVLENBQUMsR0FBSSxHQUFFLElBQUssT0FBTyxJQUFJLEdBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxHQUFHLFNBQVMsRUFBRSxHQUFHLE1BQU8sR0FBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxPQUFHLEdBQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxNQUFNLEtBQUssSUFBSSxRQUFTLEdBQUUsRUFBRSxHQUFHLE1BQU8sR0FBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFJLEdBQUUsTUFBRSxPQUFPLEdBQU8sRUFBRSxFQUFFLDRCQUF3QixLQUFTLEVBQUUsS0FBSyxJQUFJLEtBQUssS0FBSyxFQUFFLEtBQUssS0FBSyxLQUFLLEdBQUcsS0FBSyxZQUFZLEtBQUssR0FBRyxHQUFFLElBQUssR0FBSSxHQUFFLEVBQUUsSUFBSSxRQUFTLEdBQUUsR0FBRyxNQUFPLEdBQUUsRUFBRSxVQUFVLEdBQUcsUUFBUyxHQUFFLEdBQUcsTUFBTyxHQUFFLEVBQUUsVUFBVSxHQUFHLGVBQWUsV0FBVyxHQUFJLElBQUcsRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLGdCQUFnQixNQUFNLEtBQUssVUFBVyxPQUFPLEdBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxPQUFPLFFBQVEsRUFBRSxZQUFZLEVBQUUsT0FBTyxTQUFTLE1BQU0sS0FBSyxHQUFJLEdBQUUsRUFBRSxRQUFTLFNBQVMsSUFBRyxRQUFTLElBQUksV0FBVyxRQUFTLEdBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFFLEtBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLFdBQVcsS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxHQUFHLEdBQUcsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEdBQUcsR0FBRyxJQUFLLE9BQU0sR0FBRyxFQUFFLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsUUFBUSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUksT0FBTSxFQUFFLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsUUFBUSxHQUFHLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsT0FBTyxHQUFHLEdBQUcsTUFBTyxHQUFFLFFBQVMsR0FBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBRSxLQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsWUFBWSxFQUFFLElBQUksR0FBRyxFQUFHLEtBQUksR0FBRyxFQUFFLEtBQU0sSUFBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsWUFBWSxFQUFFLElBQUksR0FBRyxFQUFHLEtBQUksR0FBRyxFQUFFLEtBQU0sSUFBRyxPQUFPLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFHLEdBQUUsQ0FBQyxHQUEyQixLQUF4QixFQUFFLElBQUksRUFBRSxXQUFXLE1BQVcsTUFBTyxFQUFFLEdBQUUsRUFBRSxTQUFTLEVBQUUsSUFBSSxHQUFHLEVBQUcsS0FBSSxHQUFHLEVBQUUsS0FBTSxJQUFHLE9BQU8sY0FBYyxHQUFHLElBQUksR0FBRyxHQUFHLElBQUksRUFBRyxHQUFFLENBQUMsR0FBMkIsS0FBeEIsRUFBRSxJQUFJLEVBQUUsV0FBVyxNQUFXLE1BQU8sRUFBRSxHQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksR0FBRyxFQUFHLEtBQUksR0FBRyxFQUFFLEtBQU0sSUFBRyxPQUFPLGNBQWMsRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFPLEdBQUUsR0FBSSxHQUFFLG1FQUFtRSxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsSUFBSSxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRyxHQUFFLE9BQU8sRUFBRSxLQUFLLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSyxLQUFNLElBQUksR0FBRSxFQUFFLFNBQVMsU0FBUyxHQUFHLEtBQUssS0FBSyxHQUFHLEVBQUUsT0FBTyxNQUFPLEtBQUksRUFBRSxTQUFTLEdBQUcsR0FBSSxHQUFFLFlBQWEsT0FBTyxHQUFFLFVBQVUsRUFBRSxHQUFJLElBQUksSUFBSSxHQUFFLEVBQUUsVUFBVSxFQUFFLEVBQUUsVUFBVyxHQUFFLFFBQVEsU0FBUyxHQUFHLE1BQU8sR0FBRSxLQUFLLEtBQUssSUFBSSxFQUFFLE9BQU8sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLEdBQUUsWUFBWSxFQUFFLFdBQU8sS0FBUyxFQUFFLEVBQUUsS0FBSyxLQUFLLFFBQVEsRUFBRyxJQUFJLEdBQUUsT0FBTyxjQUFlLElBQUcsRUFBRSxJQUFJLEtBQUssUUFBUSxNQUFNLEdBQUcsTUFBRSxPQUFZLEdBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxHQUFHLElBQUksRUFBRSxHQUFHLEVBQUUsT0FBUSxJQUFJLEdBQUUsZ0JBQWdCLEVBQUUsQ0FBKzJTLElBQTcyUyxFQUFFLFdBQVcsU0FBUyxFQUFFLEVBQUUsR0FBRyxHQUFHLEVBQUUsZUFBZSxLQUFLLFVBQVUsTUFBTyxHQUFFLEtBQUssU0FBVSxJQUFJLEdBQUUsRUFBRSxLQUFLLEtBQUssRUFBRyxPQUFPLEdBQUUsRUFBRSxLQUFLLFVBQVUsTUFBTSxHQUFHLEdBQUcsR0FBRyxFQUFFLFdBQVcsU0FBUyxHQUFHLGFBQWMsSUFBRyxJQUFJLFlBQVksRUFBRSxDQUFFLEtBQUksU0FBUyxNQUFPLE1BQUssU0FBUyxFQUFHLEtBQUksU0FBUyxNQUFPLE1BQUssV0FBVyxTQUFTLEdBQUcsTUFBTyxLQUFLLElBQUksS0FBSSxXQUFXLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxLQUFLLFNBQVMsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxLQUFLLFNBQVMsRUFBRyxJQUFHLEVBQUUsS0FBSyxLQUFLLEdBQUcsTUFBTyxNQUFLLEVBQUUsVUFBVSxTQUFTLEVBQUUsR0FBRyxLQUFLLFNBQVMsUUFBUSxFQUFHLElBQUksR0FBRSxFQUFFLEtBQUssS0FBTSxPQUFPLE1BQUssU0FBUyxRQUFRLEdBQUcsRUFBRSxXQUFXLFFBQVEsU0FBUyxFQUFFLEdBQUcsUUFBUyxHQUFFLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFHLEtBQUksSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxNQUFNLEdBQUksR0FBRSxFQUFFLElBQUssT0FBTyxHQUFFLFNBQVMsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsWUFBWSxTQUFTLEdBQUcsRUFBRSxNQUFNLEtBQUssS0FBSyxFQUFFLGFBQWEsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFJLEdBQUUsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFHLEtBQUksS0FBSyxHQUFHLEVBQUUsT0FBTyxFQUFFLFVBQVUsU0FBUyxHQUFHLEVBQUUsS0FBSyxLQUFLLEtBQUssR0FBRyxHQUFHLGVBQWUsU0FBUyxHQUFHLE1BQU8sR0FBRSxNQUFNLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxRQUFRLFNBQVMsRUFBRSxHQUFHLE9BQVcsSUFBSixHQUFRLGdCQUFpQixHQUFFLEtBQUssT0FBTyxXQUFXLEdBQUcsR0FBRyxFQUFFLEtBQUssS0FBSyxPQUFPLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxXQUFXLFVBQVUsV0FBVyxLQUFLLFdBQVcsS0FBSyxZQUFZLFlBQVksT0FBTyxLQUFLLGtCQUFrQixTQUFTLFdBQVcsTUFBTyxNQUFLLE9BQU8sS0FBSyxLQUFLLFdBQVcsVUFBVSxTQUFTLEdBQUcsTUFBTyxNQUFLLE9BQU8sTUFBTSxLQUFLLFNBQVMsTUFBTSxFQUFFLEVBQUUsV0FBVyxLQUFLLEVBQUUsVUFBVSxTQUFTLE1BQU0sRUFBRSxVQUFVLFlBQVksRUFBRSxTQUFTLEVBQUUsRUFBRSxHQUFHLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEtBQUssRUFBRSxLQUFNLE9BQU8sR0FBRSxHQUFHLEVBQUUsRUFBRSxRQUFRLElBQUksR0FBRyxFQUFFLGNBQWMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLE1BQU8sR0FBRSxPQUFPLElBQUcsR0FBSSxHQUFHLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxHQUFHLEVBQUUsS0FBSyxRQUFRLE9BQUcsS0FBUyxFQUFFLENBQUMsR0FBSSxHQUFFLEtBQUssS0FBSyxNQUFPLE1BQUssS0FBSyxLQUFLLEVBQUcsSUFBSSxHQUFFLEVBQUUsS0FBSyxLQUFNLE9BQU8sTUFBSyxLQUFLLEtBQUssR0FBRyxFQUFFLE1BQU8sTUFBSyxLQUFLLEtBQUssSUFBSSxFQUFFLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxRQUFRLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxNQUFPLE1BQUssS0FBSyxLQUFLLE9BQU8sS0FBSyxRQUFRLEdBQUcsSUFBSSxFQUFFLE1BQU0sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLElBQUksR0FBRSxLQUFLLEtBQUssTUFBTSxFQUFFLEVBQUUsR0FBRyxLQUFLLFVBQVUsRUFBRSxTQUFTLFNBQVMsRUFBRSxHQUFHLGFBQWMsSUFBRyxJQUFJLFNBQVMsS0FBSyxJQUFLLE1BQUssU0FBUyxLQUFNLElBQUksZ0JBQWUsaUJBQWlCLEVBQUcsT0FBTyxNQUFLLFNBQVMsS0FBSyxRQUFRLEdBQUcsRUFBRyxLQUFJLFNBQVMsTUFBTyxNQUFLLFNBQVMsRUFBRSxVQUFVLEdBQUksS0FBSSxTQUFTLEdBQUcsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFJLEdBQUUsSUFBSyxPQUFPLEdBQUUsUUFBUSxNQUFNLFNBQVMsR0FBRyxNQUFPLEdBQUUsUUFBUSxLQUFLLE1BQU8sR0FBRSxFQUFFLE9BQU8sS0FBSyxXQUFXLEVBQUUsU0FBUyxHQUFHLE1BQU8sTUFBSyxRQUFRLEVBQUUsR0FBRyxFQUFFLE1BQU0sTUFBSyxHQUFJLEtBQUssV0FBVyxFQUFFLFNBQVMsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLFFBQVEsTUFBSyxLQUFNLEVBQUUsUUFBUSxTQUFTLEVBQUUsR0FBRyxHQUFJLEdBQUUsS0FBSyxTQUFTLEVBQUUsRUFBRyxPQUFPLEtBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLGdCQUFpQixHQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFJLEVBQUUsTUFBTSxHQUFHLEtBQUssTUFBTSxJQUFJLFNBQVMsT0FBTyxJQUFJLEdBQUcsRUFBRSxRQUFRLFNBQVMsRUFBRSxFQUFFLEdBQUcsT0FBRyxLQUFTLEVBQUUsQ0FBQyxFQUFFLEtBQUssUUFBUSxFQUFHLElBQUksR0FBRSxLQUFLLE9BQU8sV0FBVyxNQUFPLEdBQUUsS0FBSyxLQUFLLEVBQUUsZUFBZSxNQUFNLEtBQUssU0FBUyxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRyxZQUFPLEtBQVMsRUFBRSxLQUFLLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxRQUFRLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsTUFBTyxHQUFFLEtBQUssTUFBTSxFQUFFLFFBQVEsV0FBVyxNQUFPLE1BQUssS0FBSyxjQUFjLElBQUksRUFBRSxNQUFNLFNBQVMsRUFBRSxFQUFFLEdBQUcsTUFBTyxNQUFLLFFBQVEsRUFBRSxFQUFFLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxLQUFLLE1BQU8sT0FBTyxHQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssT0FBTyxLQUFLLEVBQUUsU0FBUyxTQUFTLEdBQUcsTUFBTyxNQUFLLE1BQU0sY0FBYyxFQUFFLElBQUksU0FBUyxFQUFFLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxFQUFFLEVBQUcsR0FBRSxFQUFFLGVBQWUsRUFBRSxHQUFHLFNBQVMsTUFBTSxHQUFHLFFBQVEsZ0JBQWdCLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxNQUFNLEtBQUssY0FBVSxHQUFPLEtBQUssZUFBZSxNQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssUUFBUSxLQUFLLFVBQVUsRUFBRSxLQUFLLGtCQUFrQixRQUFRLFNBQVMsU0FBUyxTQUFTLE9BQU8sUUFBUSxRQUFRLFFBQVEsVUFBVSxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQU8sRUFBRSxNQUFNLE1BQVEsRUFBRSxRQUFRLE9BQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxHQUFHLFFBQVEsV0FBVyxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxRQUFRLEtBQUssT0FBUSxJQUFHLEtBQUssV0FBVyxFQUFFLE1BQU0sTUFBTyxNQUFLLEtBQUssU0FBUyxNQUFFLElBQU8sR0FBRyxFQUFJLElBQUksRUFBRSxRQUFHLEtBQVMsRUFBRSxDQUFDLEVBQUUsR0FBSSxPQUFNLEVBQUcsS0FBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsS0FBSyxlQUFlLENBQUMsR0FBSSxHQUFFLEtBQUssS0FBSyxVQUFXLEtBQUksS0FBSyxLQUFLLE9BQU8sT0FBTyxHQUFHLEVBQUUsS0FBSyxLQUFLLFlBQVksTUFBTyxJQUFHLE1BQU0sU0FBUyxHQUFHLEdBQUcsS0FBSyxXQUFXLEVBQUUsTUFBTSxNQUFPLE1BQUssS0FBSyxXQUFXLEVBQUcsS0FBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxLQUFLLFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxHQUFHLFFBQVEsU0FBUyxXQUFXLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxPQUFPLE9BQU8sRUFBRSxLQUFLLE9BQU8sS0FBSyxLQUFLLFFBQVEsS0FBSyxRQUFnQyxPQUFPLElBQUksR0FBaEMsS0FBSyxLQUFLLE1BQU0sRUFBRSxHQUFrQixLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxPQUFPLE1BQU0sT0FBTyxFQUFFLEtBQUssT0FBTyxPQUFPLEVBQUUsU0FBUyxHQUFHLFFBQVEsV0FBVyxLQUFLLFdBQVcsTUFBTyxNQUFLLEtBQUssWUFBWSxLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLGNBQWMsRUFBRSxLQUFLLFlBQVksRUFBRSxLQUFLLEdBQUcsUUFBUSxVQUFVLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxTQUFTLEtBQUssUUFBUSxLQUFLLFVBQVUsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLFdBQVcsR0FBRSxNQUFPLEVBQVMsTUFBRSxHQUFHLFFBQVEsV0FBVyxRQUFRLFVBQVUsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLFVBQVcsSUFBRyxLQUFLLFFBQVEsSUFBSSxLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxPQUFPLFVBQVUsTUFBTyxNQUFLLE9BQU8sRUFBRyxNQUFNLElBQUksV0FBVSxxQkFBcUIsRUFBRSxRQUFRLEtBQUssTUFBTSxNQUFNLE1BQU8sSUFBRyxNQUFNLFNBQVMsR0FBRyxLQUFLLFVBQVUsS0FBSyxZQUFRLEtBQVMsRUFBRSxLQUFLLE1BQU0sTUFBTSxFQUFRLEtBQUUsR0FBRyxRQUFRLFdBQVcsV0FBVyxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQUssY0FBZSxLQUFJLEdBQUksS0FBSyxHQUFFLEtBQUssWUFBWSxFQUFFLElBQUksR0FBRyxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssVUFBVyxPQUFPLEtBQUssTUFBSyxRQUFRLEtBQUssUUFBUSxHQUFHLEdBQUcsTUFBTSxTQUFTLEdBQUcsS0FBSyxVQUFVLElBQUssTUFBSyxZQUFZLEtBQUssWUFBWSxHQUFHLE1BQU0sRUFBRSxPQUFPLEdBQUcsVUFBVSxXQUFXLEtBQUssTUFBTSxXQUFXLFFBQVEsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEtBQUssTUFBTSxFQUFFLEVBQUUsT0FBTyxFQUFFLEdBQUksT0FBTSxHQUFHLEVBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxFQUFFLEdBQUksTUFBSyxNQUFNLEdBQUcsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLE9BQU8sS0FBSyxFQUFFLEdBQUksT0FBTyxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxLQUFLLEVBQUUsT0FBTyxHQUFHLE1BQU0sU0FBUyxHQUFHLEdBQUksR0FBRSxLQUFLLEtBQU0sTUFBSyxPQUFPLFVBQVUsRUFBRSxXQUFXLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksS0FBSyxNQUFNLEVBQUUsR0FBRyxRQUFRLEVBQU0sR0FBRSxHQUFHLFFBQVEsWUFBWSxXQUFXLGFBQWEsWUFBWSxXQUFXLGFBQWEsWUFBWSxXQUFXLE1BQU8sTUFBSyxRQUFRLEtBQUssV0FBVyxLQUFLLFNBQVMsS0FBSyxhQUFhLEVBQUUsT0FBTyxFQUFFLE1BQU0sR0FBRyxVQUFVLFNBQVMsRUFBRSxFQUFFLEdBQUcsS0FBSyxVQUFVLEtBQUssRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEdBQUcsT0FBTyxlQUFlLFFBQVEsWUFBWSxVQUFVLFlBQVksV0FBVyxPQUFPLFNBQVMsS0FBSyxPQUFPLEtBQUssT0FBTyxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsU0FBUyxHQUFHLE1BQU8sS0FBSSxVQUFVLE9BQU8sU0FBVSxHQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEtBQUssRUFBRSxXQUFXLEVBQUUsR0FBRyxZQUFXLEVBQUcsTUFBTSxJQUFJLE1BQU8sT0FBTyxHQUFFLEtBQUssU0FBUSxFQUFHLEVBQUUsR0FBRyxPQUFPLEVBQUUsS0FBSyxZQUFZLFNBQVMsS0FBSyxPQUFPLFNBQVMsVUFBVSxVQUFVLEtBQUssYUFBYSxNQUFNLFNBQVMsR0FBRyxFQUFFLGFBQWEsRUFBRSxLQUFLLFFBQVEsS0FBSyxPQUFPLE1BQU0sS0FBSyxVQUFVLEtBQUssS0FBSyxVQUFVLEVBQUUsV0FBVyxFQUFFLE9BQU8sR0FBRyxRQUFRLFlBQVksU0FBUyxRQUFRLFNBQVMsR0FBRyxHQUFJLEtBQUssS0FBSSxHQUFJLEtBQUssTUFBSyxVQUFVLEVBQUUsR0FBRyxFQUFFLEtBQUssVUFBVSxHQUFHLFVBQVUsS0FBSyxVQUFVLEdBQUcsRUFBRSxLQUFLLFVBQVUsR0FBSSxNQUFLLFVBQVUsR0FBRyxLQUFLLFdBQVcsR0FBSSxHQUFFLEtBQUssRUFBRSxLQUFLLFVBQVUsRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLFNBQVUsT0FBTyxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEtBQUssR0FBRSxLQUFLLE9BQU8sV0FBVyxHQUFJLEdBQUUsRUFBRSxFQUFFLEdBQUcsVUFBVSxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxLQUFLLEVBQUUsUUFBSSxLQUFTLElBQUksRUFBRSxHQUFHLElBQUksR0FBRyxLQUFLLFFBQVEsR0FBRyxNQUFNLFNBQVMsR0FBRyxHQUFJLEdBQUUsS0FBSyxFQUFFLEtBQUssU0FBVSxNQUFLLE9BQU8sVUFBVSxFQUFFLFdBQVcsSUFBSSxHQUFJLEtBQUssR0FBRSxLQUFLLE9BQU8sV0FBVyxFQUFFLEVBQUUsR0FBRyxVQUFVLEVBQUUsR0FBRyxFQUFFLEdBQUcsS0FBSyxFQUFFLEdBQUcsS0FBSyxNQUFNLEVBQUUsR0FBRyxFQUFFLEtBQUssR0FBRyxLQUFLLFdBQVcsRUFBRSxLQUFLLEdBQUcsUUFBUSxVQUFVLEtBQUssV0FBVyxLQUFLLEtBQUssS0FBSyxLQUFLLFFBQVEsS0FBSyxVQUFVLE1BQU0sV0FBVyxLQUFLLFVBQVUsRUFBRSxPQUFPLEdBQUcsUUFBUSxTQUFTLFlBQVksS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLFVBQVUsS0FBSyxRQUFRLEtBQUssWUFB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T0FDekMsR0FBYSxFQUFXLE9BQU8sZUFBZSxFQUFLLEVBQU0sRUFBUSxJQVduRSxPQVJBLEVBQU8sTUFDTCxHQUFJLEVBQUcsR0FDUCxPQUFRLEVBQUcsT0FDWCxJQUFLLEVBQ0wsTUFBTyxPQUlELEVBQUcsSUFDVCxJQUFLLFNBQVEsTUFDYixJQUFLLFNBQVEsT0FDYixJQUFLLFNBQVEsS0FDYixJQUFLLFNBQVEsU0FDYixJQUFLLFNBQVEsWUFDWCxHQUFVLEVBQUcsT0FJakIsT0FBUSxFQUFHLElBQ1QsSUFBSyxTQUFRLE1BQ2IsSUFBSyxTQUFRLE9BQ2IsSUFBSyxTQUFRLFNBQ2IsSUFBSyxTQUFRLFNBQ2IsSUFBSyxTQUFRLFlBQ1gsR0FBVSxFQUFHLFFBU25CLE1BSkksSUFBYyxJQUNoQixFQUFPLEdBQVksTUFBNEIsS0FBcEIsRUFBSyxZQUFxQixJQUFNLE1BSTNELElBQUssRUFDTCxXQUFBLDZFQW5OYywyRUFDUyw4RUF3SHZCLFNBQ0YsTUFBTyxJQUNQLE9BQVEsSUFDUixPQUFRLElBQ1IsS0FBTSxJQUNOLFNBQVUsSUFDVixTQUFVLElBQ1YsUUFBUyxJQUNULFNBQVUsSUFDVixZQUFhLElBcUZmLFFBQU8sU0FDTCxRQUFBLFFBQ0EsT0FBQSxPQUNBLFlBQUEsWUFDQSxVQUFBLFVBQ0EsUUFBQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyAgICAgQmFja2JvbmUuanMgMS4xLjJcblxuLy8gICAgIChjKSAyMDEwLTIwMTQgSmVyZW15IEFzaGtlbmFzLCBEb2N1bWVudENsb3VkIGFuZCBJbnZlc3RpZ2F0aXZlIFJlcG9ydGVycyAmIEVkaXRvcnNcbi8vICAgICBCYWNrYm9uZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cbi8vICAgICBGb3IgYWxsIGRldGFpbHMgYW5kIGRvY3VtZW50YXRpb246XG4vLyAgICAgaHR0cDovL2JhY2tib25lanMub3JnXG5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG5cbiAgLy8gU2V0IHVwIEJhY2tib25lIGFwcHJvcHJpYXRlbHkgZm9yIHRoZSBlbnZpcm9ubWVudC4gU3RhcnQgd2l0aCBBTUQuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoWyd1bmRlcnNjb3JlJywgJ2pxdWVyeScsICdleHBvcnRzJ10sIGZ1bmN0aW9uKF8sICQsIGV4cG9ydHMpIHtcbiAgICAgIC8vIEV4cG9ydCBnbG9iYWwgZXZlbiBpbiBBTUQgY2FzZSBpbiBjYXNlIHRoaXMgc2NyaXB0IGlzIGxvYWRlZCB3aXRoXG4gICAgICAvLyBvdGhlcnMgdGhhdCBtYXkgc3RpbGwgZXhwZWN0IGEgZ2xvYmFsIEJhY2tib25lLlxuICAgICAgcm9vdC5CYWNrYm9uZSA9IGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXywgJCk7XG4gICAgfSk7XG5cbiAgLy8gTmV4dCBmb3IgTm9kZS5qcyBvciBDb21tb25KUy4galF1ZXJ5IG1heSBub3QgYmUgbmVlZGVkIGFzIGEgbW9kdWxlLlxuICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBfID0gcmVxdWlyZSgndW5kZXJzY29yZScpO1xuICAgIGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgXyk7XG5cbiAgLy8gRmluYWxseSwgYXMgYSBicm93c2VyIGdsb2JhbC5cbiAgfSBlbHNlIHtcbiAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCB7fSwgcm9vdC5fLCAocm9vdC5qUXVlcnkgfHwgcm9vdC5aZXB0byB8fCByb290LmVuZGVyIHx8IHJvb3QuJCkpO1xuICB9XG5cbn0odGhpcywgZnVuY3Rpb24ocm9vdCwgQmFja2JvbmUsIF8sICQpIHtcblxuICAvLyBJbml0aWFsIFNldHVwXG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYEJhY2tib25lYCB2YXJpYWJsZSwgc28gdGhhdCBpdCBjYW4gYmVcbiAgLy8gcmVzdG9yZWQgbGF0ZXIgb24sIGlmIGBub0NvbmZsaWN0YCBpcyB1c2VkLlxuICB2YXIgcHJldmlvdXNCYWNrYm9uZSA9IHJvb3QuQmFja2JvbmU7XG5cbiAgLy8gQ3JlYXRlIGxvY2FsIHJlZmVyZW5jZXMgdG8gYXJyYXkgbWV0aG9kcyB3ZSdsbCB3YW50IHRvIHVzZSBsYXRlci5cbiAgdmFyIGFycmF5ID0gW107XG4gIHZhciBwdXNoID0gYXJyYXkucHVzaDtcbiAgdmFyIHNsaWNlID0gYXJyYXkuc2xpY2U7XG4gIHZhciBzcGxpY2UgPSBhcnJheS5zcGxpY2U7XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uIG9mIHRoZSBsaWJyYXJ5LiBLZWVwIGluIHN5bmMgd2l0aCBgcGFja2FnZS5qc29uYC5cbiAgQmFja2JvbmUuVkVSU0lPTiA9ICcxLjEuMic7XG5cbiAgLy8gRm9yIEJhY2tib25lJ3MgcHVycG9zZXMsIGpRdWVyeSwgWmVwdG8sIEVuZGVyLCBvciBNeSBMaWJyYXJ5IChraWRkaW5nKSBvd25zXG4gIC8vIHRoZSBgJGAgdmFyaWFibGUuXG4gIEJhY2tib25lLiQgPSAkO1xuXG4gIC8vIFJ1bnMgQmFja2JvbmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYEJhY2tib25lYCB2YXJpYWJsZVxuICAvLyB0byBpdHMgcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhpcyBCYWNrYm9uZSBvYmplY3QuXG4gIEJhY2tib25lLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290LkJhY2tib25lID0gcHJldmlvdXNCYWNrYm9uZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBUdXJuIG9uIGBlbXVsYXRlSFRUUGAgdG8gc3VwcG9ydCBsZWdhY3kgSFRUUCBzZXJ2ZXJzLiBTZXR0aW5nIHRoaXMgb3B0aW9uXG4gIC8vIHdpbGwgZmFrZSBgXCJQQVRDSFwiYCwgYFwiUFVUXCJgIGFuZCBgXCJERUxFVEVcImAgcmVxdWVzdHMgdmlhIHRoZSBgX21ldGhvZGAgcGFyYW1ldGVyIGFuZFxuICAvLyBzZXQgYSBgWC1IdHRwLU1ldGhvZC1PdmVycmlkZWAgaGVhZGVyLlxuICBCYWNrYm9uZS5lbXVsYXRlSFRUUCA9IGZhbHNlO1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVKU09OYCB0byBzdXBwb3J0IGxlZ2FjeSBzZXJ2ZXJzIHRoYXQgY2FuJ3QgZGVhbCB3aXRoIGRpcmVjdFxuICAvLyBgYXBwbGljYXRpb24vanNvbmAgcmVxdWVzdHMgLi4uIHdpbGwgZW5jb2RlIHRoZSBib2R5IGFzXG4gIC8vIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgIGluc3RlYWQgYW5kIHdpbGwgc2VuZCB0aGUgbW9kZWwgaW4gYVxuICAvLyBmb3JtIHBhcmFtIG5hbWVkIGBtb2RlbGAuXG4gIEJhY2tib25lLmVtdWxhdGVKU09OID0gZmFsc2U7XG5cbiAgLy8gQmFja2JvbmUuRXZlbnRzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEEgbW9kdWxlIHRoYXQgY2FuIGJlIG1peGVkIGluIHRvICphbnkgb2JqZWN0KiBpbiBvcmRlciB0byBwcm92aWRlIGl0IHdpdGhcbiAgLy8gY3VzdG9tIGV2ZW50cy4gWW91IG1heSBiaW5kIHdpdGggYG9uYCBvciByZW1vdmUgd2l0aCBgb2ZmYCBjYWxsYmFja1xuICAvLyBmdW5jdGlvbnMgdG8gYW4gZXZlbnQ7IGB0cmlnZ2VyYC1pbmcgYW4gZXZlbnQgZmlyZXMgYWxsIGNhbGxiYWNrcyBpblxuICAvLyBzdWNjZXNzaW9uLlxuICAvL1xuICAvLyAgICAgdmFyIG9iamVjdCA9IHt9O1xuICAvLyAgICAgXy5leHRlbmQob2JqZWN0LCBCYWNrYm9uZS5FdmVudHMpO1xuICAvLyAgICAgb2JqZWN0Lm9uKCdleHBhbmQnLCBmdW5jdGlvbigpeyBhbGVydCgnZXhwYW5kZWQnKTsgfSk7XG4gIC8vICAgICBvYmplY3QudHJpZ2dlcignZXhwYW5kJyk7XG4gIC8vXG4gIHZhciBFdmVudHMgPSBCYWNrYm9uZS5FdmVudHMgPSB7XG5cbiAgICAvLyBCaW5kIGFuIGV2ZW50IHRvIGEgYGNhbGxiYWNrYCBmdW5jdGlvbi4gUGFzc2luZyBgXCJhbGxcImAgd2lsbCBiaW5kXG4gICAgLy8gdGhlIGNhbGxiYWNrIHRvIGFsbCBldmVudHMgZmlyZWQuXG4gICAgb246IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICBpZiAoIWV2ZW50c0FwaSh0aGlzLCAnb24nLCBuYW1lLCBbY2FsbGJhY2ssIGNvbnRleHRdKSB8fCAhY2FsbGJhY2spIHJldHVybiB0aGlzO1xuICAgICAgdGhpcy5fZXZlbnRzIHx8ICh0aGlzLl9ldmVudHMgPSB7fSk7XG4gICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdIHx8ICh0aGlzLl9ldmVudHNbbmFtZV0gPSBbXSk7XG4gICAgICBldmVudHMucHVzaCh7Y2FsbGJhY2s6IGNhbGxiYWNrLCBjb250ZXh0OiBjb250ZXh0LCBjdHg6IGNvbnRleHQgfHwgdGhpc30pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEJpbmQgYW4gZXZlbnQgdG8gb25seSBiZSB0cmlnZ2VyZWQgYSBzaW5nbGUgdGltZS4gQWZ0ZXIgdGhlIGZpcnN0IHRpbWVcbiAgICAvLyB0aGUgY2FsbGJhY2sgaXMgaW52b2tlZCwgaXQgd2lsbCBiZSByZW1vdmVkLlxuICAgIG9uY2U6IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICBpZiAoIWV2ZW50c0FwaSh0aGlzLCAnb25jZScsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pIHx8ICFjYWxsYmFjaykgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB2YXIgb25jZSA9IF8ub25jZShmdW5jdGlvbigpIHtcbiAgICAgICAgc2VsZi5vZmYobmFtZSwgb25jZSk7XG4gICAgICAgIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9KTtcbiAgICAgIG9uY2UuX2NhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICByZXR1cm4gdGhpcy5vbihuYW1lLCBvbmNlLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIG9uZSBvciBtYW55IGNhbGxiYWNrcy4gSWYgYGNvbnRleHRgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gICAgLy8gY2FsbGJhY2tzIHdpdGggdGhhdCBmdW5jdGlvbi4gSWYgYGNhbGxiYWNrYCBpcyBudWxsLCByZW1vdmVzIGFsbFxuICAgIC8vIGNhbGxiYWNrcyBmb3IgdGhlIGV2ZW50LiBJZiBgbmFtZWAgaXMgbnVsbCwgcmVtb3ZlcyBhbGwgYm91bmRcbiAgICAvLyBjYWxsYmFja3MgZm9yIGFsbCBldmVudHMuXG4gICAgb2ZmOiBmdW5jdGlvbihuYW1lLCBjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgdmFyIHJldGFpbiwgZXYsIGV2ZW50cywgbmFtZXMsIGksIGwsIGosIGs7XG4gICAgICBpZiAoIXRoaXMuX2V2ZW50cyB8fCAhZXZlbnRzQXBpKHRoaXMsICdvZmYnLCBuYW1lLCBbY2FsbGJhY2ssIGNvbnRleHRdKSkgcmV0dXJuIHRoaXM7XG4gICAgICBpZiAoIW5hbWUgJiYgIWNhbGxiYWNrICYmICFjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX2V2ZW50cyA9IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgICBuYW1lcyA9IG5hbWUgPyBbbmFtZV0gOiBfLmtleXModGhpcy5fZXZlbnRzKTtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBuYW1lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbmFtZSA9IG5hbWVzW2ldO1xuICAgICAgICBpZiAoZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdKSB7XG4gICAgICAgICAgdGhpcy5fZXZlbnRzW25hbWVdID0gcmV0YWluID0gW107XG4gICAgICAgICAgaWYgKGNhbGxiYWNrIHx8IGNvbnRleHQpIHtcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGsgPSBldmVudHMubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgICAgIGV2ID0gZXZlbnRzW2pdO1xuICAgICAgICAgICAgICBpZiAoKGNhbGxiYWNrICYmIGNhbGxiYWNrICE9PSBldi5jYWxsYmFjayAmJiBjYWxsYmFjayAhPT0gZXYuY2FsbGJhY2suX2NhbGxiYWNrKSB8fFxuICAgICAgICAgICAgICAgICAgKGNvbnRleHQgJiYgY29udGV4dCAhPT0gZXYuY29udGV4dCkpIHtcbiAgICAgICAgICAgICAgICByZXRhaW4ucHVzaChldik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCFyZXRhaW4ubGVuZ3RoKSBkZWxldGUgdGhpcy5fZXZlbnRzW25hbWVdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBUcmlnZ2VyIG9uZSBvciBtYW55IGV2ZW50cywgZmlyaW5nIGFsbCBib3VuZCBjYWxsYmFja3MuIENhbGxiYWNrcyBhcmVcbiAgICAvLyBwYXNzZWQgdGhlIHNhbWUgYXJndW1lbnRzIGFzIGB0cmlnZ2VyYCBpcywgYXBhcnQgZnJvbSB0aGUgZXZlbnQgbmFtZVxuICAgIC8vICh1bmxlc3MgeW91J3JlIGxpc3RlbmluZyBvbiBgXCJhbGxcImAsIHdoaWNoIHdpbGwgY2F1c2UgeW91ciBjYWxsYmFjayB0b1xuICAgIC8vIHJlY2VpdmUgdGhlIHRydWUgbmFtZSBvZiB0aGUgZXZlbnQgYXMgdGhlIGZpcnN0IGFyZ3VtZW50KS5cbiAgICB0cmlnZ2VyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgICBpZiAoIXRoaXMuX2V2ZW50cykgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICd0cmlnZ2VyJywgbmFtZSwgYXJncykpIHJldHVybiB0aGlzO1xuICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuX2V2ZW50c1tuYW1lXTtcbiAgICAgIHZhciBhbGxFdmVudHMgPSB0aGlzLl9ldmVudHMuYWxsO1xuICAgICAgaWYgKGV2ZW50cykgdHJpZ2dlckV2ZW50cyhldmVudHMsIGFyZ3MpO1xuICAgICAgaWYgKGFsbEV2ZW50cykgdHJpZ2dlckV2ZW50cyhhbGxFdmVudHMsIGFyZ3VtZW50cyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gVGVsbCB0aGlzIG9iamVjdCB0byBzdG9wIGxpc3RlbmluZyB0byBlaXRoZXIgc3BlY2lmaWMgZXZlbnRzIC4uLiBvclxuICAgIC8vIHRvIGV2ZXJ5IG9iamVjdCBpdCdzIGN1cnJlbnRseSBsaXN0ZW5pbmcgdG8uXG4gICAgc3RvcExpc3RlbmluZzogZnVuY3Rpb24ob2JqLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgdmFyIGxpc3RlbmluZ1RvID0gdGhpcy5fbGlzdGVuaW5nVG87XG4gICAgICBpZiAoIWxpc3RlbmluZ1RvKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciByZW1vdmUgPSAhbmFtZSAmJiAhY2FsbGJhY2s7XG4gICAgICBpZiAoIWNhbGxiYWNrICYmIHR5cGVvZiBuYW1lID09PSAnb2JqZWN0JykgY2FsbGJhY2sgPSB0aGlzO1xuICAgICAgaWYgKG9iaikgKGxpc3RlbmluZ1RvID0ge30pW29iai5fbGlzdGVuSWRdID0gb2JqO1xuICAgICAgZm9yICh2YXIgaWQgaW4gbGlzdGVuaW5nVG8pIHtcbiAgICAgICAgb2JqID0gbGlzdGVuaW5nVG9baWRdO1xuICAgICAgICBvYmoub2ZmKG5hbWUsIGNhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgaWYgKHJlbW92ZSB8fCBfLmlzRW1wdHkob2JqLl9ldmVudHMpKSBkZWxldGUgdGhpcy5fbGlzdGVuaW5nVG9baWRdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gIH07XG5cbiAgLy8gUmVndWxhciBleHByZXNzaW9uIHVzZWQgdG8gc3BsaXQgZXZlbnQgc3RyaW5ncy5cbiAgdmFyIGV2ZW50U3BsaXR0ZXIgPSAvXFxzKy87XG5cbiAgLy8gSW1wbGVtZW50IGZhbmN5IGZlYXR1cmVzIG9mIHRoZSBFdmVudHMgQVBJIHN1Y2ggYXMgbXVsdGlwbGUgZXZlbnRcbiAgLy8gbmFtZXMgYFwiY2hhbmdlIGJsdXJcImAgYW5kIGpRdWVyeS1zdHlsZSBldmVudCBtYXBzIGB7Y2hhbmdlOiBhY3Rpb259YFxuICAvLyBpbiB0ZXJtcyBvZiB0aGUgZXhpc3RpbmcgQVBJLlxuICB2YXIgZXZlbnRzQXBpID0gZnVuY3Rpb24ob2JqLCBhY3Rpb24sIG5hbWUsIHJlc3QpIHtcbiAgICBpZiAoIW5hbWUpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gSGFuZGxlIGV2ZW50IG1hcHMuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnb2JqZWN0Jykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgb2JqW2FjdGlvbl0uYXBwbHkob2JqLCBba2V5LCBuYW1lW2tleV1dLmNvbmNhdChyZXN0KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIHNwYWNlIHNlcGFyYXRlZCBldmVudCBuYW1lcy5cbiAgICBpZiAoZXZlbnRTcGxpdHRlci50ZXN0KG5hbWUpKSB7XG4gICAgICB2YXIgbmFtZXMgPSBuYW1lLnNwbGl0KGV2ZW50U3BsaXR0ZXIpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuYW1lcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgb2JqW2FjdGlvbl0uYXBwbHkob2JqLCBbbmFtZXNbaV1dLmNvbmNhdChyZXN0KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gQSBkaWZmaWN1bHQtdG8tYmVsaWV2ZSwgYnV0IG9wdGltaXplZCBpbnRlcm5hbCBkaXNwYXRjaCBmdW5jdGlvbiBmb3JcbiAgLy8gdHJpZ2dlcmluZyBldmVudHMuIFRyaWVzIHRvIGtlZXAgdGhlIHVzdWFsIGNhc2VzIHNwZWVkeSAobW9zdCBpbnRlcm5hbFxuICAvLyBCYWNrYm9uZSBldmVudHMgaGF2ZSAzIGFyZ3VtZW50cykuXG4gIHZhciB0cmlnZ2VyRXZlbnRzID0gZnVuY3Rpb24oZXZlbnRzLCBhcmdzKSB7XG4gICAgdmFyIGV2LCBpID0gLTEsIGwgPSBldmVudHMubGVuZ3RoLCBhMSA9IGFyZ3NbMF0sIGEyID0gYXJnc1sxXSwgYTMgPSBhcmdzWzJdO1xuICAgIHN3aXRjaCAoYXJncy5sZW5ndGgpIHtcbiAgICAgIGNhc2UgMDogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgpOyByZXR1cm47XG4gICAgICBjYXNlIDE6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmNhbGwoZXYuY3R4LCBhMSk7IHJldHVybjtcbiAgICAgIGNhc2UgMjogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMik7IHJldHVybjtcbiAgICAgIGNhc2UgMzogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExLCBhMiwgYTMpOyByZXR1cm47XG4gICAgICBkZWZhdWx0OiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5hcHBseShldi5jdHgsIGFyZ3MpOyByZXR1cm47XG4gICAgfVxuICB9O1xuXG4gIHZhciBsaXN0ZW5NZXRob2RzID0ge2xpc3RlblRvOiAnb24nLCBsaXN0ZW5Ub09uY2U6ICdvbmNlJ307XG5cbiAgLy8gSW52ZXJzaW9uLW9mLWNvbnRyb2wgdmVyc2lvbnMgb2YgYG9uYCBhbmQgYG9uY2VgLiBUZWxsICp0aGlzKiBvYmplY3QgdG9cbiAgLy8gbGlzdGVuIHRvIGFuIGV2ZW50IGluIGFub3RoZXIgb2JqZWN0IC4uLiBrZWVwaW5nIHRyYWNrIG9mIHdoYXQgaXQnc1xuICAvLyBsaXN0ZW5pbmcgdG8uXG4gIF8uZWFjaChsaXN0ZW5NZXRob2RzLCBmdW5jdGlvbihpbXBsZW1lbnRhdGlvbiwgbWV0aG9kKSB7XG4gICAgRXZlbnRzW21ldGhvZF0gPSBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbyB8fCAodGhpcy5fbGlzdGVuaW5nVG8gPSB7fSk7XG4gICAgICB2YXIgaWQgPSBvYmouX2xpc3RlbklkIHx8IChvYmouX2xpc3RlbklkID0gXy51bmlxdWVJZCgnbCcpKTtcbiAgICAgIGxpc3RlbmluZ1RvW2lkXSA9IG9iajtcbiAgICAgIGlmICghY2FsbGJhY2sgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSBjYWxsYmFjayA9IHRoaXM7XG4gICAgICBvYmpbaW1wbGVtZW50YXRpb25dKG5hbWUsIGNhbGxiYWNrLCB0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEFsaWFzZXMgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICBFdmVudHMuYmluZCAgID0gRXZlbnRzLm9uO1xuICBFdmVudHMudW5iaW5kID0gRXZlbnRzLm9mZjtcblxuICAvLyBBbGxvdyB0aGUgYEJhY2tib25lYCBvYmplY3QgdG8gc2VydmUgYXMgYSBnbG9iYWwgZXZlbnQgYnVzLCBmb3IgZm9sa3Mgd2hvXG4gIC8vIHdhbnQgZ2xvYmFsIFwicHVic3ViXCIgaW4gYSBjb252ZW5pZW50IHBsYWNlLlxuICBfLmV4dGVuZChCYWNrYm9uZSwgRXZlbnRzKTtcblxuICAvLyBCYWNrYm9uZS5Nb2RlbFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEJhY2tib25lICoqTW9kZWxzKiogYXJlIHRoZSBiYXNpYyBkYXRhIG9iamVjdCBpbiB0aGUgZnJhbWV3b3JrIC0tXG4gIC8vIGZyZXF1ZW50bHkgcmVwcmVzZW50aW5nIGEgcm93IGluIGEgdGFibGUgaW4gYSBkYXRhYmFzZSBvbiB5b3VyIHNlcnZlci5cbiAgLy8gQSBkaXNjcmV0ZSBjaHVuayBvZiBkYXRhIGFuZCBhIGJ1bmNoIG9mIHVzZWZ1bCwgcmVsYXRlZCBtZXRob2RzIGZvclxuICAvLyBwZXJmb3JtaW5nIGNvbXB1dGF0aW9ucyBhbmQgdHJhbnNmb3JtYXRpb25zIG9uIHRoYXQgZGF0YS5cblxuICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCB0aGUgc3BlY2lmaWVkIGF0dHJpYnV0ZXMuIEEgY2xpZW50IGlkIChgY2lkYClcbiAgLy8gaXMgYXV0b21hdGljYWxseSBnZW5lcmF0ZWQgYW5kIGFzc2lnbmVkIGZvciB5b3UuXG4gIHZhciBNb2RlbCA9IEJhY2tib25lLk1vZGVsID0gZnVuY3Rpb24oYXR0cmlidXRlcywgb3B0aW9ucykge1xuICAgIHZhciBhdHRycyA9IGF0dHJpYnV0ZXMgfHwge307XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQoJ2MnKTtcbiAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICBpZiAob3B0aW9ucy5jb2xsZWN0aW9uKSB0aGlzLmNvbGxlY3Rpb24gPSBvcHRpb25zLmNvbGxlY3Rpb247XG4gICAgaWYgKG9wdGlvbnMucGFyc2UpIGF0dHJzID0gdGhpcy5wYXJzZShhdHRycywgb3B0aW9ucykgfHwge307XG4gICAgYXR0cnMgPSBfLmRlZmF1bHRzKHt9LCBhdHRycywgXy5yZXN1bHQodGhpcywgJ2RlZmF1bHRzJykpO1xuICAgIHRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKTtcbiAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBBdHRhY2ggYWxsIGluaGVyaXRhYmxlIG1ldGhvZHMgdG8gdGhlIE1vZGVsIHByb3RvdHlwZS5cbiAgXy5leHRlbmQoTW9kZWwucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEEgaGFzaCBvZiBhdHRyaWJ1dGVzIHdob3NlIGN1cnJlbnQgYW5kIHByZXZpb3VzIHZhbHVlIGRpZmZlci5cbiAgICBjaGFuZ2VkOiBudWxsLFxuXG4gICAgLy8gVGhlIHZhbHVlIHJldHVybmVkIGR1cmluZyB0aGUgbGFzdCBmYWlsZWQgdmFsaWRhdGlvbi5cbiAgICB2YWxpZGF0aW9uRXJyb3I6IG51bGwsXG5cbiAgICAvLyBUaGUgZGVmYXVsdCBuYW1lIGZvciB0aGUgSlNPTiBgaWRgIGF0dHJpYnV0ZSBpcyBgXCJpZFwiYC4gTW9uZ29EQiBhbmRcbiAgICAvLyBDb3VjaERCIHVzZXJzIG1heSB3YW50IHRvIHNldCB0aGlzIHRvIGBcIl9pZFwiYC5cbiAgICBpZEF0dHJpYnV0ZTogJ2lkJyxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG1vZGVsJ3MgYGF0dHJpYnV0ZXNgIG9iamVjdC5cbiAgICB0b0pTT046IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0IC0tIGJ1dCBvdmVycmlkZSB0aGlzIGlmIHlvdSBuZWVkXG4gICAgLy8gY3VzdG9tIHN5bmNpbmcgc2VtYW50aWNzIGZvciAqdGhpcyogcGFydGljdWxhciBtb2RlbC5cbiAgICBzeW5jOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBCYWNrYm9uZS5zeW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuICAgIGdldDogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1thdHRyXTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBIVE1MLWVzY2FwZWQgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuICAgIGVzY2FwZTogZnVuY3Rpb24oYXR0cikge1xuICAgICAgcmV0dXJuIF8uZXNjYXBlKHRoaXMuZ2V0KGF0dHIpKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGF0dHJpYnV0ZSBjb250YWlucyBhIHZhbHVlIHRoYXQgaXMgbm90IG51bGxcbiAgICAvLyBvciB1bmRlZmluZWQuXG4gICAgaGFzOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5nZXQoYXR0cikgIT0gbnVsbDtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGEgaGFzaCBvZiBtb2RlbCBhdHRyaWJ1dGVzIG9uIHRoZSBvYmplY3QsIGZpcmluZyBgXCJjaGFuZ2VcImAuIFRoaXMgaXNcbiAgICAvLyB0aGUgY29yZSBwcmltaXRpdmUgb3BlcmF0aW9uIG9mIGEgbW9kZWwsIHVwZGF0aW5nIHRoZSBkYXRhIGFuZCBub3RpZnlpbmdcbiAgICAvLyBhbnlvbmUgd2hvIG5lZWRzIHRvIGtub3cgYWJvdXQgdGhlIGNoYW5nZSBpbiBzdGF0ZS4gVGhlIGhlYXJ0IG9mIHRoZSBiZWFzdC5cbiAgICBzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0ciwgYXR0cnMsIHVuc2V0LCBjaGFuZ2VzLCBzaWxlbnQsIGNoYW5naW5nLCBwcmV2LCBjdXJyZW50O1xuICAgICAgaWYgKGtleSA9PSBudWxsKSByZXR1cm4gdGhpcztcblxuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuXG4gICAgICAvLyBSdW4gdmFsaWRhdGlvbi5cbiAgICAgIGlmICghdGhpcy5fdmFsaWRhdGUoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG5cbiAgICAgIC8vIEV4dHJhY3QgYXR0cmlidXRlcyBhbmQgb3B0aW9ucy5cbiAgICAgIHVuc2V0ICAgICAgICAgICA9IG9wdGlvbnMudW5zZXQ7XG4gICAgICBzaWxlbnQgICAgICAgICAgPSBvcHRpb25zLnNpbGVudDtcbiAgICAgIGNoYW5nZXMgICAgICAgICA9IFtdO1xuICAgICAgY2hhbmdpbmcgICAgICAgID0gdGhpcy5fY2hhbmdpbmc7XG4gICAgICB0aGlzLl9jaGFuZ2luZyAgPSB0cnVlO1xuXG4gICAgICBpZiAoIWNoYW5naW5nKSB7XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyA9IF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VkID0ge307XG4gICAgICB9XG4gICAgICBjdXJyZW50ID0gdGhpcy5hdHRyaWJ1dGVzLCBwcmV2ID0gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzO1xuXG4gICAgICAvLyBDaGVjayBmb3IgY2hhbmdlcyBvZiBgaWRgLlxuICAgICAgaWYgKHRoaXMuaWRBdHRyaWJ1dGUgaW4gYXR0cnMpIHRoaXMuaWQgPSBhdHRyc1t0aGlzLmlkQXR0cmlidXRlXTtcblxuICAgICAgLy8gRm9yIGVhY2ggYHNldGAgYXR0cmlidXRlLCB1cGRhdGUgb3IgZGVsZXRlIHRoZSBjdXJyZW50IHZhbHVlLlxuICAgICAgZm9yIChhdHRyIGluIGF0dHJzKSB7XG4gICAgICAgIHZhbCA9IGF0dHJzW2F0dHJdO1xuICAgICAgICBpZiAoIV8uaXNFcXVhbChjdXJyZW50W2F0dHJdLCB2YWwpKSBjaGFuZ2VzLnB1c2goYXR0cik7XG4gICAgICAgIGlmICghXy5pc0VxdWFsKHByZXZbYXR0cl0sIHZhbCkpIHtcbiAgICAgICAgICB0aGlzLmNoYW5nZWRbYXR0cl0gPSB2YWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuY2hhbmdlZFthdHRyXTtcbiAgICAgICAgfVxuICAgICAgICB1bnNldCA/IGRlbGV0ZSBjdXJyZW50W2F0dHJdIDogY3VycmVudFthdHRyXSA9IHZhbDtcbiAgICAgIH1cblxuICAgICAgLy8gVHJpZ2dlciBhbGwgcmVsZXZhbnQgYXR0cmlidXRlIGNoYW5nZXMuXG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICBpZiAoY2hhbmdlcy5sZW5ndGgpIHRoaXMuX3BlbmRpbmcgPSBvcHRpb25zO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoYW5nZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2U6JyArIGNoYW5nZXNbaV0sIHRoaXMsIGN1cnJlbnRbY2hhbmdlc1tpXV0sIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFlvdSBtaWdodCBiZSB3b25kZXJpbmcgd2h5IHRoZXJlJ3MgYSBgd2hpbGVgIGxvb3AgaGVyZS4gQ2hhbmdlcyBjYW5cbiAgICAgIC8vIGJlIHJlY3Vyc2l2ZWx5IG5lc3RlZCB3aXRoaW4gYFwiY2hhbmdlXCJgIGV2ZW50cy5cbiAgICAgIGlmIChjaGFuZ2luZykgcmV0dXJuIHRoaXM7XG4gICAgICBpZiAoIXNpbGVudCkge1xuICAgICAgICB3aGlsZSAodGhpcy5fcGVuZGluZykge1xuICAgICAgICAgIG9wdGlvbnMgPSB0aGlzLl9wZW5kaW5nO1xuICAgICAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9wZW5kaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9jaGFuZ2luZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSB0aGUgbW9kZWwsIGZpcmluZyBgXCJjaGFuZ2VcImAuIGB1bnNldGAgaXMgYSBub29wXG4gICAgLy8gaWYgdGhlIGF0dHJpYnV0ZSBkb2Vzbid0IGV4aXN0LlxuICAgIHVuc2V0OiBmdW5jdGlvbihhdHRyLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZXQoYXR0ciwgdm9pZCAwLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBDbGVhciBhbGwgYXR0cmlidXRlcyBvbiB0aGUgbW9kZWwsIGZpcmluZyBgXCJjaGFuZ2VcImAuXG4gICAgY2xlYXI6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRycyA9IHt9O1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuYXR0cmlidXRlcykgYXR0cnNba2V5XSA9IHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRycywgXy5leHRlbmQoe30sIG9wdGlvbnMsIHt1bnNldDogdHJ1ZX0pKTtcbiAgICB9LFxuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBtb2RlbCBoYXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdCBgXCJjaGFuZ2VcImAgZXZlbnQuXG4gICAgLy8gSWYgeW91IHNwZWNpZnkgYW4gYXR0cmlidXRlIG5hbWUsIGRldGVybWluZSBpZiB0aGF0IGF0dHJpYnV0ZSBoYXMgY2hhbmdlZC5cbiAgICBoYXNDaGFuZ2VkOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICBpZiAoYXR0ciA9PSBudWxsKSByZXR1cm4gIV8uaXNFbXB0eSh0aGlzLmNoYW5nZWQpO1xuICAgICAgcmV0dXJuIF8uaGFzKHRoaXMuY2hhbmdlZCwgYXR0cik7XG4gICAgfSxcblxuICAgIC8vIFJldHVybiBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgdGhlIGF0dHJpYnV0ZXMgdGhhdCBoYXZlIGNoYW5nZWQsIG9yXG4gICAgLy8gZmFsc2UgaWYgdGhlcmUgYXJlIG5vIGNoYW5nZWQgYXR0cmlidXRlcy4gVXNlZnVsIGZvciBkZXRlcm1pbmluZyB3aGF0XG4gICAgLy8gcGFydHMgb2YgYSB2aWV3IG5lZWQgdG8gYmUgdXBkYXRlZCBhbmQvb3Igd2hhdCBhdHRyaWJ1dGVzIG5lZWQgdG8gYmVcbiAgICAvLyBwZXJzaXN0ZWQgdG8gdGhlIHNlcnZlci4gVW5zZXQgYXR0cmlidXRlcyB3aWxsIGJlIHNldCB0byB1bmRlZmluZWQuXG4gICAgLy8gWW91IGNhbiBhbHNvIHBhc3MgYW4gYXR0cmlidXRlcyBvYmplY3QgdG8gZGlmZiBhZ2FpbnN0IHRoZSBtb2RlbCxcbiAgICAvLyBkZXRlcm1pbmluZyBpZiB0aGVyZSAqd291bGQgYmUqIGEgY2hhbmdlLlxuICAgIGNoYW5nZWRBdHRyaWJ1dGVzOiBmdW5jdGlvbihkaWZmKSB7XG4gICAgICBpZiAoIWRpZmYpIHJldHVybiB0aGlzLmhhc0NoYW5nZWQoKSA/IF8uY2xvbmUodGhpcy5jaGFuZ2VkKSA6IGZhbHNlO1xuICAgICAgdmFyIHZhbCwgY2hhbmdlZCA9IGZhbHNlO1xuICAgICAgdmFyIG9sZCA9IHRoaXMuX2NoYW5naW5nID8gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzIDogdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgZm9yICh2YXIgYXR0ciBpbiBkaWZmKSB7XG4gICAgICAgIGlmIChfLmlzRXF1YWwob2xkW2F0dHJdLCAodmFsID0gZGlmZlthdHRyXSkpKSBjb250aW51ZTtcbiAgICAgICAgKGNoYW5nZWQgfHwgKGNoYW5nZWQgPSB7fSkpW2F0dHJdID0gdmFsO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoYW5nZWQ7XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgcHJldmlvdXMgdmFsdWUgb2YgYW4gYXR0cmlidXRlLCByZWNvcmRlZCBhdCB0aGUgdGltZSB0aGUgbGFzdFxuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudCB3YXMgZmlyZWQuXG4gICAgcHJldmlvdXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwgfHwgIXRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcykgcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYWxsIG9mIHRoZSBhdHRyaWJ1dGVzIG9mIHRoZSBtb2RlbCBhdCB0aGUgdGltZSBvZiB0aGUgcHJldmlvdXNcbiAgICAvLyBgXCJjaGFuZ2VcImAgZXZlbnQuXG4gICAgcHJldmlvdXNBdHRyaWJ1dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBfLmNsb25lKHRoaXMuX3ByZXZpb3VzQXR0cmlidXRlcyk7XG4gICAgfSxcblxuICAgIC8vIEZldGNoIHRoZSBtb2RlbCBmcm9tIHRoZSBzZXJ2ZXIuIElmIHRoZSBzZXJ2ZXIncyByZXByZXNlbnRhdGlvbiBvZiB0aGVcbiAgICAvLyBtb2RlbCBkaWZmZXJzIGZyb20gaXRzIGN1cnJlbnQgYXR0cmlidXRlcywgdGhleSB3aWxsIGJlIG92ZXJyaWRkZW4sXG4gICAgLy8gdHJpZ2dlcmluZyBhIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICBmZXRjaDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSA9PT0gdm9pZCAwKSBvcHRpb25zLnBhcnNlID0gdHJ1ZTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgaWYgKCFtb2RlbC5zZXQobW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucyksIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIFNldCBhIGhhc2ggb2YgbW9kZWwgYXR0cmlidXRlcywgYW5kIHN5bmMgdGhlIG1vZGVsIHRvIHRoZSBzZXJ2ZXIuXG4gICAgLy8gSWYgdGhlIHNlcnZlciByZXR1cm5zIGFuIGF0dHJpYnV0ZXMgaGFzaCB0aGF0IGRpZmZlcnMsIHRoZSBtb2RlbCdzXG4gICAgLy8gc3RhdGUgd2lsbCBiZSBgc2V0YCBhZ2Fpbi5cbiAgICBzYXZlOiBmdW5jdGlvbihrZXksIHZhbCwgb3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJzLCBtZXRob2QsIHhociwgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcblxuICAgICAgLy8gSGFuZGxlIGJvdGggYFwia2V5XCIsIHZhbHVlYCBhbmQgYHtrZXk6IHZhbHVlfWAgLXN0eWxlIGFyZ3VtZW50cy5cbiAgICAgIGlmIChrZXkgPT0gbnVsbCB8fCB0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICBhdHRycyA9IGtleTtcbiAgICAgICAgb3B0aW9ucyA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChhdHRycyA9IHt9KVtrZXldID0gdmFsO1xuICAgICAgfVxuXG4gICAgICBvcHRpb25zID0gXy5leHRlbmQoe3ZhbGlkYXRlOiB0cnVlfSwgb3B0aW9ucyk7XG5cbiAgICAgIC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIGFuZCBhdHRyaWJ1dGVzIGV4aXN0LCBzYXZlIGFjdHMgYXNcbiAgICAgIC8vIGBzZXQoYXR0cikuc2F2ZShudWxsLCBvcHRzKWAgd2l0aCB2YWxpZGF0aW9uLiBPdGhlcndpc2UsIGNoZWNrIGlmXG4gICAgICAvLyB0aGUgbW9kZWwgd2lsbCBiZSB2YWxpZCB3aGVuIHRoZSBhdHRyaWJ1dGVzLCBpZiBhbnksIGFyZSBzZXQuXG4gICAgICBpZiAoYXR0cnMgJiYgIW9wdGlvbnMud2FpdCkge1xuICAgICAgICBpZiAoIXRoaXMuc2V0KGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0IHRlbXBvcmFyeSBhdHRyaWJ1dGVzIGlmIGB7d2FpdDogdHJ1ZX1gLlxuICAgICAgaWYgKGF0dHJzICYmIG9wdGlvbnMud2FpdCkge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBfLmV4dGVuZCh7fSwgYXR0cmlidXRlcywgYXR0cnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBBZnRlciBhIHN1Y2Nlc3NmdWwgc2VydmVyLXNpZGUgc2F2ZSwgdGhlIGNsaWVudCBpcyAob3B0aW9uYWxseSlcbiAgICAgIC8vIHVwZGF0ZWQgd2l0aCB0aGUgc2VydmVyLXNpZGUgc3RhdGUuXG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSA9PT0gdm9pZCAwKSBvcHRpb25zLnBhcnNlID0gdHJ1ZTtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgLy8gRW5zdXJlIGF0dHJpYnV0ZXMgYXJlIHJlc3RvcmVkIGR1cmluZyBzeW5jaHJvbm91cyBzYXZlcy5cbiAgICAgICAgbW9kZWwuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBzZXJ2ZXJBdHRycyA9IG1vZGVsLnBhcnNlKHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBpZiAob3B0aW9ucy53YWl0KSBzZXJ2ZXJBdHRycyA9IF8uZXh0ZW5kKGF0dHJzIHx8IHt9LCBzZXJ2ZXJBdHRycyk7XG4gICAgICAgIGlmIChfLmlzT2JqZWN0KHNlcnZlckF0dHJzKSAmJiAhbW9kZWwuc2V0KHNlcnZlckF0dHJzLCBvcHRpb25zKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuICAgICAgd3JhcEVycm9yKHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICBtZXRob2QgPSB0aGlzLmlzTmV3KCkgPyAnY3JlYXRlJyA6IChvcHRpb25zLnBhdGNoID8gJ3BhdGNoJyA6ICd1cGRhdGUnKTtcbiAgICAgIGlmIChtZXRob2QgPT09ICdwYXRjaCcpIG9wdGlvbnMuYXR0cnMgPSBhdHRycztcbiAgICAgIHhociA9IHRoaXMuc3luYyhtZXRob2QsIHRoaXMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBSZXN0b3JlIGF0dHJpYnV0ZXMuXG4gICAgICBpZiAoYXR0cnMgJiYgb3B0aW9ucy53YWl0KSB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuXG4gICAgICByZXR1cm4geGhyO1xuICAgIH0sXG5cbiAgICAvLyBEZXN0cm95IHRoaXMgbW9kZWwgb24gdGhlIHNlcnZlciBpZiBpdCB3YXMgYWxyZWFkeSBwZXJzaXN0ZWQuXG4gICAgLy8gT3B0aW1pc3RpY2FsbHkgcmVtb3ZlcyB0aGUgbW9kZWwgZnJvbSBpdHMgY29sbGVjdGlvbiwgaWYgaXQgaGFzIG9uZS5cbiAgICAvLyBJZiBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCB3YWl0cyBmb3IgdGhlIHNlcnZlciB0byByZXNwb25kIGJlZm9yZSByZW1vdmFsLlxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuXG4gICAgICB2YXIgZGVzdHJveSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdkZXN0cm95JywgbW9kZWwsIG1vZGVsLmNvbGxlY3Rpb24sIG9wdGlvbnMpO1xuICAgICAgfTtcblxuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICBpZiAob3B0aW9ucy53YWl0IHx8IG1vZGVsLmlzTmV3KCkpIGRlc3Ryb3koKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBpZiAoIW1vZGVsLmlzTmV3KCkpIG1vZGVsLnRyaWdnZXIoJ3N5bmMnLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICBpZiAodGhpcy5pc05ldygpKSB7XG4gICAgICAgIG9wdGlvbnMuc3VjY2VzcygpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIHZhciB4aHIgPSB0aGlzLnN5bmMoJ2RlbGV0ZScsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgaWYgKCFvcHRpb25zLndhaXQpIGRlc3Ryb3koKTtcbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlZmF1bHQgVVJMIGZvciB0aGUgbW9kZWwncyByZXByZXNlbnRhdGlvbiBvbiB0aGUgc2VydmVyIC0tIGlmIHlvdSdyZVxuICAgIC8vIHVzaW5nIEJhY2tib25lJ3MgcmVzdGZ1bCBtZXRob2RzLCBvdmVycmlkZSB0aGlzIHRvIGNoYW5nZSB0aGUgZW5kcG9pbnRcbiAgICAvLyB0aGF0IHdpbGwgYmUgY2FsbGVkLlxuICAgIHVybDogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYmFzZSA9XG4gICAgICAgIF8ucmVzdWx0KHRoaXMsICd1cmxSb290JykgfHxcbiAgICAgICAgXy5yZXN1bHQodGhpcy5jb2xsZWN0aW9uLCAndXJsJykgfHxcbiAgICAgICAgdXJsRXJyb3IoKTtcbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHJldHVybiBiYXNlO1xuICAgICAgcmV0dXJuIGJhc2UucmVwbGFjZSgvKFteXFwvXSkkLywgJyQxLycpICsgZW5jb2RlVVJJQ29tcG9uZW50KHRoaXMuaWQpO1xuICAgIH0sXG5cbiAgICAvLyAqKnBhcnNlKiogY29udmVydHMgYSByZXNwb25zZSBpbnRvIHRoZSBoYXNoIG9mIGF0dHJpYnV0ZXMgdG8gYmUgYHNldGAgb25cbiAgICAvLyB0aGUgbW9kZWwuIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIGlzIGp1c3QgdG8gcGFzcyB0aGUgcmVzcG9uc2UgYWxvbmcuXG4gICAgcGFyc2U6IGZ1bmN0aW9uKHJlc3AsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgbW9kZWwgd2l0aCBpZGVudGljYWwgYXR0cmlidXRlcyB0byB0aGlzIG9uZS5cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gQSBtb2RlbCBpcyBuZXcgaWYgaXQgaGFzIG5ldmVyIGJlZW4gc2F2ZWQgdG8gdGhlIHNlcnZlciwgYW5kIGxhY2tzIGFuIGlkLlxuICAgIGlzTmV3OiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAhdGhpcy5oYXModGhpcy5pZEF0dHJpYnV0ZSk7XG4gICAgfSxcblxuICAgIC8vIENoZWNrIGlmIHRoZSBtb2RlbCBpcyBjdXJyZW50bHkgaW4gYSB2YWxpZCBzdGF0ZS5cbiAgICBpc1ZhbGlkOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGUoe30sIF8uZXh0ZW5kKG9wdGlvbnMgfHwge30sIHsgdmFsaWRhdGU6IHRydWUgfSkpO1xuICAgIH0sXG5cbiAgICAvLyBSdW4gdmFsaWRhdGlvbiBhZ2FpbnN0IHRoZSBuZXh0IGNvbXBsZXRlIHNldCBvZiBtb2RlbCBhdHRyaWJ1dGVzLFxuICAgIC8vIHJldHVybmluZyBgdHJ1ZWAgaWYgYWxsIGlzIHdlbGwuIE90aGVyd2lzZSwgZmlyZSBhbiBgXCJpbnZhbGlkXCJgIGV2ZW50LlxuICAgIF92YWxpZGF0ZTogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghb3B0aW9ucy52YWxpZGF0ZSB8fCAhdGhpcy52YWxpZGF0ZSkgcmV0dXJuIHRydWU7XG4gICAgICBhdHRycyA9IF8uZXh0ZW5kKHt9LCB0aGlzLmF0dHJpYnV0ZXMsIGF0dHJzKTtcbiAgICAgIHZhciBlcnJvciA9IHRoaXMudmFsaWRhdGlvbkVycm9yID0gdGhpcy52YWxpZGF0ZShhdHRycywgb3B0aW9ucykgfHwgbnVsbDtcbiAgICAgIGlmICghZXJyb3IpIHJldHVybiB0cnVlO1xuICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgZXJyb3IsIF8uZXh0ZW5kKG9wdGlvbnMsIHt2YWxpZGF0aW9uRXJyb3I6IGVycm9yfSkpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgTW9kZWwuXG4gIHZhciBtb2RlbE1ldGhvZHMgPSBbJ2tleXMnLCAndmFsdWVzJywgJ3BhaXJzJywgJ2ludmVydCcsICdwaWNrJywgJ29taXQnXTtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBNb2RlbCNhdHRyaWJ1dGVzYC5cbiAgXy5lYWNoKG1vZGVsTWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgTW9kZWwucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgYXJncy51bnNoaWZ0KHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLkNvbGxlY3Rpb25cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIElmIG1vZGVscyB0ZW5kIHRvIHJlcHJlc2VudCBhIHNpbmdsZSByb3cgb2YgZGF0YSwgYSBCYWNrYm9uZSBDb2xsZWN0aW9uIGlzXG4gIC8vIG1vcmUgYW5hbGFnb3VzIHRvIGEgdGFibGUgZnVsbCBvZiBkYXRhIC4uLiBvciBhIHNtYWxsIHNsaWNlIG9yIHBhZ2Ugb2YgdGhhdFxuICAvLyB0YWJsZSwgb3IgYSBjb2xsZWN0aW9uIG9mIHJvd3MgdGhhdCBiZWxvbmcgdG9nZXRoZXIgZm9yIGEgcGFydGljdWxhciByZWFzb25cbiAgLy8gLS0gYWxsIG9mIHRoZSBtZXNzYWdlcyBpbiB0aGlzIHBhcnRpY3VsYXIgZm9sZGVyLCBhbGwgb2YgdGhlIGRvY3VtZW50c1xuICAvLyBiZWxvbmdpbmcgdG8gdGhpcyBwYXJ0aWN1bGFyIGF1dGhvciwgYW5kIHNvIG9uLiBDb2xsZWN0aW9ucyBtYWludGFpblxuICAvLyBpbmRleGVzIG9mIHRoZWlyIG1vZGVscywgYm90aCBpbiBvcmRlciwgYW5kIGZvciBsb29rdXAgYnkgYGlkYC5cblxuICAvLyBDcmVhdGUgYSBuZXcgKipDb2xsZWN0aW9uKiosIHBlcmhhcHMgdG8gY29udGFpbiBhIHNwZWNpZmljIHR5cGUgb2YgYG1vZGVsYC5cbiAgLy8gSWYgYSBgY29tcGFyYXRvcmAgaXMgc3BlY2lmaWVkLCB0aGUgQ29sbGVjdGlvbiB3aWxsIG1haW50YWluXG4gIC8vIGl0cyBtb2RlbHMgaW4gc29ydCBvcmRlciwgYXMgdGhleSdyZSBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAgdmFyIENvbGxlY3Rpb24gPSBCYWNrYm9uZS5Db2xsZWN0aW9uID0gZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICBpZiAob3B0aW9ucy5tb2RlbCkgdGhpcy5tb2RlbCA9IG9wdGlvbnMubW9kZWw7XG4gICAgaWYgKG9wdGlvbnMuY29tcGFyYXRvciAhPT0gdm9pZCAwKSB0aGlzLmNvbXBhcmF0b3IgPSBvcHRpb25zLmNvbXBhcmF0b3I7XG4gICAgdGhpcy5fcmVzZXQoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAobW9kZWxzKSB0aGlzLnJlc2V0KG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcbiAgfTtcblxuICAvLyBEZWZhdWx0IG9wdGlvbnMgZm9yIGBDb2xsZWN0aW9uI3NldGAuXG4gIHZhciBzZXRPcHRpb25zID0ge2FkZDogdHJ1ZSwgcmVtb3ZlOiB0cnVlLCBtZXJnZTogdHJ1ZX07XG4gIHZhciBhZGRPcHRpb25zID0ge2FkZDogdHJ1ZSwgcmVtb3ZlOiBmYWxzZX07XG5cbiAgLy8gRGVmaW5lIHRoZSBDb2xsZWN0aW9uJ3MgaW5oZXJpdGFibGUgbWV0aG9kcy5cbiAgXy5leHRlbmQoQ29sbGVjdGlvbi5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgbW9kZWwgZm9yIGEgY29sbGVjdGlvbiBpcyBqdXN0IGEgKipCYWNrYm9uZS5Nb2RlbCoqLlxuICAgIC8vIFRoaXMgc2hvdWxkIGJlIG92ZXJyaWRkZW4gaW4gbW9zdCBjYXNlcy5cbiAgICBtb2RlbDogTW9kZWwsXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyBUaGUgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhIENvbGxlY3Rpb24gaXMgYW4gYXJyYXkgb2YgdGhlXG4gICAgLy8gbW9kZWxzJyBhdHRyaWJ1dGVzLlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKG1vZGVsKXsgcmV0dXJuIG1vZGVsLnRvSlNPTihvcHRpb25zKTsgfSk7XG4gICAgfSxcblxuICAgIC8vIFByb3h5IGBCYWNrYm9uZS5zeW5jYCBieSBkZWZhdWx0LlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwsIG9yIGxpc3Qgb2YgbW9kZWxzIHRvIHRoZSBzZXQuXG4gICAgYWRkOiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChtb2RlbHMsIF8uZXh0ZW5kKHttZXJnZTogZmFsc2V9LCBvcHRpb25zLCBhZGRPcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsLCBvciBhIGxpc3Qgb2YgbW9kZWxzIGZyb20gdGhlIHNldC5cbiAgICByZW1vdmU6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgdmFyIHNpbmd1bGFyID0gIV8uaXNBcnJheShtb2RlbHMpO1xuICAgICAgbW9kZWxzID0gc2luZ3VsYXIgPyBbbW9kZWxzXSA6IF8uY2xvbmUobW9kZWxzKTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICB2YXIgaSwgbCwgaW5kZXgsIG1vZGVsO1xuICAgICAgZm9yIChpID0gMCwgbCA9IG1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgbW9kZWwgPSBtb2RlbHNbaV0gPSB0aGlzLmdldChtb2RlbHNbaV0pO1xuICAgICAgICBpZiAoIW1vZGVsKSBjb250aW51ZTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2J5SWRbbW9kZWwuaWRdO1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5jaWRdO1xuICAgICAgICBpbmRleCA9IHRoaXMuaW5kZXhPZihtb2RlbCk7XG4gICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRoaXMubGVuZ3RoLS07XG4gICAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgICBvcHRpb25zLmluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgbW9kZWwudHJpZ2dlcigncmVtb3ZlJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3JlbW92ZVJlZmVyZW5jZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2luZ3VsYXIgPyBtb2RlbHNbMF0gOiBtb2RlbHM7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSBhIGNvbGxlY3Rpb24gYnkgYHNldGAtaW5nIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCBhZGRpbmcgbmV3IG9uZXMsXG4gICAgLy8gcmVtb3ZpbmcgbW9kZWxzIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LCBhbmQgbWVyZ2luZyBtb2RlbHMgdGhhdFxuICAgIC8vIGFscmVhZHkgZXhpc3QgaW4gdGhlIGNvbGxlY3Rpb24sIGFzIG5lY2Vzc2FyeS4gU2ltaWxhciB0byAqKk1vZGVsI3NldCoqLFxuICAgIC8vIHRoZSBjb3JlIG9wZXJhdGlvbiBmb3IgdXBkYXRpbmcgdGhlIGRhdGEgY29udGFpbmVkIGJ5IHRoZSBjb2xsZWN0aW9uLlxuICAgIHNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gXy5kZWZhdWx0cyh7fSwgb3B0aW9ucywgc2V0T3B0aW9ucyk7XG4gICAgICBpZiAob3B0aW9ucy5wYXJzZSkgbW9kZWxzID0gdGhpcy5wYXJzZShtb2RlbHMsIG9wdGlvbnMpO1xuICAgICAgdmFyIHNpbmd1bGFyID0gIV8uaXNBcnJheShtb2RlbHMpO1xuICAgICAgbW9kZWxzID0gc2luZ3VsYXIgPyAobW9kZWxzID8gW21vZGVsc10gOiBbXSkgOiBfLmNsb25lKG1vZGVscyk7XG4gICAgICB2YXIgaSwgbCwgaWQsIG1vZGVsLCBhdHRycywgZXhpc3RpbmcsIHNvcnQ7XG4gICAgICB2YXIgYXQgPSBvcHRpb25zLmF0O1xuICAgICAgdmFyIHRhcmdldE1vZGVsID0gdGhpcy5tb2RlbDtcbiAgICAgIHZhciBzb3J0YWJsZSA9IHRoaXMuY29tcGFyYXRvciAmJiAoYXQgPT0gbnVsbCkgJiYgb3B0aW9ucy5zb3J0ICE9PSBmYWxzZTtcbiAgICAgIHZhciBzb3J0QXR0ciA9IF8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSA/IHRoaXMuY29tcGFyYXRvciA6IG51bGw7XG4gICAgICB2YXIgdG9BZGQgPSBbXSwgdG9SZW1vdmUgPSBbXSwgbW9kZWxNYXAgPSB7fTtcbiAgICAgIHZhciBhZGQgPSBvcHRpb25zLmFkZCwgbWVyZ2UgPSBvcHRpb25zLm1lcmdlLCByZW1vdmUgPSBvcHRpb25zLnJlbW92ZTtcbiAgICAgIHZhciBvcmRlciA9ICFzb3J0YWJsZSAmJiBhZGQgJiYgcmVtb3ZlID8gW10gOiBmYWxzZTtcblxuICAgICAgLy8gVHVybiBiYXJlIG9iamVjdHMgaW50byBtb2RlbCByZWZlcmVuY2VzLCBhbmQgcHJldmVudCBpbnZhbGlkIG1vZGVsc1xuICAgICAgLy8gZnJvbSBiZWluZyBhZGRlZC5cbiAgICAgIGZvciAoaSA9IDAsIGwgPSBtb2RlbHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGF0dHJzID0gbW9kZWxzW2ldIHx8IHt9O1xuICAgICAgICBpZiAoYXR0cnMgaW5zdGFuY2VvZiBNb2RlbCkge1xuICAgICAgICAgIGlkID0gbW9kZWwgPSBhdHRycztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZCA9IGF0dHJzW3RhcmdldE1vZGVsLnByb3RvdHlwZS5pZEF0dHJpYnV0ZSB8fCAnaWQnXTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIGEgZHVwbGljYXRlIGlzIGZvdW5kLCBwcmV2ZW50IGl0IGZyb20gYmVpbmcgYWRkZWQgYW5kXG4gICAgICAgIC8vIG9wdGlvbmFsbHkgbWVyZ2UgaXQgaW50byB0aGUgZXhpc3RpbmcgbW9kZWwuXG4gICAgICAgIGlmIChleGlzdGluZyA9IHRoaXMuZ2V0KGlkKSkge1xuICAgICAgICAgIGlmIChyZW1vdmUpIG1vZGVsTWFwW2V4aXN0aW5nLmNpZF0gPSB0cnVlO1xuICAgICAgICAgIGlmIChtZXJnZSkge1xuICAgICAgICAgICAgYXR0cnMgPSBhdHRycyA9PT0gbW9kZWwgPyBtb2RlbC5hdHRyaWJ1dGVzIDogYXR0cnM7XG4gICAgICAgICAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSBleGlzdGluZy5wYXJzZShhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgICBleGlzdGluZy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuICAgICAgICAgICAgaWYgKHNvcnRhYmxlICYmICFzb3J0ICYmIGV4aXN0aW5nLmhhc0NoYW5nZWQoc29ydEF0dHIpKSBzb3J0ID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbW9kZWxzW2ldID0gZXhpc3Rpbmc7XG5cbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhIG5ldywgdmFsaWQgbW9kZWwsIHB1c2ggaXQgdG8gdGhlIGB0b0FkZGAgbGlzdC5cbiAgICAgICAgfSBlbHNlIGlmIChhZGQpIHtcbiAgICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuX3ByZXBhcmVNb2RlbChhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgaWYgKCFtb2RlbCkgY29udGludWU7XG4gICAgICAgICAgdG9BZGQucHVzaChtb2RlbCk7XG4gICAgICAgICAgdGhpcy5fYWRkUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERvIG5vdCBhZGQgbXVsdGlwbGUgbW9kZWxzIHdpdGggdGhlIHNhbWUgYGlkYC5cbiAgICAgICAgbW9kZWwgPSBleGlzdGluZyB8fCBtb2RlbDtcbiAgICAgICAgaWYgKG9yZGVyICYmIChtb2RlbC5pc05ldygpIHx8ICFtb2RlbE1hcFttb2RlbC5pZF0pKSBvcmRlci5wdXNoKG1vZGVsKTtcbiAgICAgICAgbW9kZWxNYXBbbW9kZWwuaWRdID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIG5vbmV4aXN0ZW50IG1vZGVscyBpZiBhcHByb3ByaWF0ZS5cbiAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgKytpKSB7XG4gICAgICAgICAgaWYgKCFtb2RlbE1hcFsobW9kZWwgPSB0aGlzLm1vZGVsc1tpXSkuY2lkXSkgdG9SZW1vdmUucHVzaChtb2RlbCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRvUmVtb3ZlLmxlbmd0aCkgdGhpcy5yZW1vdmUodG9SZW1vdmUsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZWUgaWYgc29ydGluZyBpcyBuZWVkZWQsIHVwZGF0ZSBgbGVuZ3RoYCBhbmQgc3BsaWNlIGluIG5ldyBtb2RlbHMuXG4gICAgICBpZiAodG9BZGQubGVuZ3RoIHx8IChvcmRlciAmJiBvcmRlci5sZW5ndGgpKSB7XG4gICAgICAgIGlmIChzb3J0YWJsZSkgc29ydCA9IHRydWU7XG4gICAgICAgIHRoaXMubGVuZ3RoICs9IHRvQWRkLmxlbmd0aDtcbiAgICAgICAgaWYgKGF0ICE9IG51bGwpIHtcbiAgICAgICAgICBmb3IgKGkgPSAwLCBsID0gdG9BZGQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5zcGxpY2UoYXQgKyBpLCAwLCB0b0FkZFtpXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChvcmRlcikgdGhpcy5tb2RlbHMubGVuZ3RoID0gMDtcbiAgICAgICAgICB2YXIgb3JkZXJlZE1vZGVscyA9IG9yZGVyIHx8IHRvQWRkO1xuICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSBvcmRlcmVkTW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5tb2RlbHMucHVzaChvcmRlcmVkTW9kZWxzW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gU2lsZW50bHkgc29ydCB0aGUgY29sbGVjdGlvbiBpZiBhcHByb3ByaWF0ZS5cbiAgICAgIGlmIChzb3J0KSB0aGlzLnNvcnQoe3NpbGVudDogdHJ1ZX0pO1xuXG4gICAgICAvLyBVbmxlc3Mgc2lsZW5jZWQsIGl0J3MgdGltZSB0byBmaXJlIGFsbCBhcHByb3ByaWF0ZSBhZGQvc29ydCBldmVudHMuXG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGwgPSB0b0FkZC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAobW9kZWwgPSB0b0FkZFtpXSkudHJpZ2dlcignYWRkJywgbW9kZWwsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzb3J0IHx8IChvcmRlciAmJiBvcmRlci5sZW5ndGgpKSB0aGlzLnRyaWdnZXIoJ3NvcnQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmV0dXJuIHRoZSBhZGRlZCAob3IgbWVyZ2VkKSBtb2RlbCAob3IgbW9kZWxzKS5cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gV2hlbiB5b3UgaGF2ZSBtb3JlIGl0ZW1zIHRoYW4geW91IHdhbnQgdG8gYWRkIG9yIHJlbW92ZSBpbmRpdmlkdWFsbHksXG4gICAgLy8geW91IGNhbiByZXNldCB0aGUgZW50aXJlIHNldCB3aXRoIGEgbmV3IGxpc3Qgb2YgbW9kZWxzLCB3aXRob3V0IGZpcmluZ1xuICAgIC8vIGFueSBncmFudWxhciBgYWRkYCBvciBgcmVtb3ZlYCBldmVudHMuIEZpcmVzIGByZXNldGAgd2hlbiBmaW5pc2hlZC5cbiAgICAvLyBVc2VmdWwgZm9yIGJ1bGsgb3BlcmF0aW9ucyBhbmQgb3B0aW1pemF0aW9ucy5cbiAgICByZXNldDogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLm1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKHRoaXMubW9kZWxzW2ldLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIG9wdGlvbnMucHJldmlvdXNNb2RlbHMgPSB0aGlzLm1vZGVscztcbiAgICAgIHRoaXMuX3Jlc2V0KCk7XG4gICAgICBtb2RlbHMgPSB0aGlzLmFkZChtb2RlbHMsIF8uZXh0ZW5kKHtzaWxlbnQ6IHRydWV9LCBvcHRpb25zKSk7XG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3Jlc2V0JywgdGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHB1c2g6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogdGhpcy5sZW5ndGh9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGVuZCBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBwb3A6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHZhciBtb2RlbCA9IHRoaXMuYXQodGhpcy5sZW5ndGggLSAxKTtcbiAgICAgIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgbW9kZWwgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICB1bnNoaWZ0OiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuYWRkKG1vZGVsLCBfLmV4dGVuZCh7YXQ6IDB9LCBvcHRpb25zKSk7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSBhIG1vZGVsIGZyb20gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29sbGVjdGlvbi5cbiAgICBzaGlmdDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCgwKTtcbiAgICAgIHRoaXMucmVtb3ZlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbDtcbiAgICB9LFxuXG4gICAgLy8gU2xpY2Ugb3V0IGEgc3ViLWFycmF5IG9mIG1vZGVscyBmcm9tIHRoZSBjb2xsZWN0aW9uLlxuICAgIHNsaWNlOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBzbGljZS5hcHBseSh0aGlzLm1vZGVscywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IGEgbW9kZWwgZnJvbSB0aGUgc2V0IGJ5IGlkLlxuICAgIGdldDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICBpZiAob2JqID09IG51bGwpIHJldHVybiB2b2lkIDA7XG4gICAgICByZXR1cm4gdGhpcy5fYnlJZFtvYmpdIHx8IHRoaXMuX2J5SWRbb2JqLmlkXSB8fCB0aGlzLl9ieUlkW29iai5jaWRdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIG1vZGVsIGF0IHRoZSBnaXZlbiBpbmRleC5cbiAgICBhdDogZnVuY3Rpb24oaW5kZXgpIHtcbiAgICAgIHJldHVybiB0aGlzLm1vZGVsc1tpbmRleF07XG4gICAgfSxcblxuICAgIC8vIFJldHVybiBtb2RlbHMgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlcyBvZlxuICAgIC8vIGBmaWx0ZXJgLlxuICAgIHdoZXJlOiBmdW5jdGlvbihhdHRycywgZmlyc3QpIHtcbiAgICAgIGlmIChfLmlzRW1wdHkoYXR0cnMpKSByZXR1cm4gZmlyc3QgPyB2b2lkIDAgOiBbXTtcbiAgICAgIHJldHVybiB0aGlzW2ZpcnN0ID8gJ2ZpbmQnIDogJ2ZpbHRlciddKGZ1bmN0aW9uKG1vZGVsKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBhdHRycykge1xuICAgICAgICAgIGlmIChhdHRyc1trZXldICE9PSBtb2RlbC5nZXQoa2V5KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vIFJldHVybiB0aGUgZmlyc3QgbW9kZWwgd2l0aCBtYXRjaGluZyBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIHNpbXBsZSBjYXNlc1xuICAgIC8vIG9mIGBmaW5kYC5cbiAgICBmaW5kV2hlcmU6IGZ1bmN0aW9uKGF0dHJzKSB7XG4gICAgICByZXR1cm4gdGhpcy53aGVyZShhdHRycywgdHJ1ZSk7XG4gICAgfSxcblxuICAgIC8vIEZvcmNlIHRoZSBjb2xsZWN0aW9uIHRvIHJlLXNvcnQgaXRzZWxmLiBZb3UgZG9uJ3QgbmVlZCB0byBjYWxsIHRoaXMgdW5kZXJcbiAgICAvLyBub3JtYWwgY2lyY3Vtc3RhbmNlcywgYXMgdGhlIHNldCB3aWxsIG1haW50YWluIHNvcnQgb3JkZXIgYXMgZWFjaCBpdGVtXG4gICAgLy8gaXMgYWRkZWQuXG4gICAgc29ydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKCF0aGlzLmNvbXBhcmF0b3IpIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHNvcnQgYSBzZXQgd2l0aG91dCBhIGNvbXBhcmF0b3InKTtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cbiAgICAgIC8vIFJ1biBzb3J0IGJhc2VkIG9uIHR5cGUgb2YgYGNvbXBhcmF0b3JgLlxuICAgICAgaWYgKF8uaXNTdHJpbmcodGhpcy5jb21wYXJhdG9yKSB8fCB0aGlzLmNvbXBhcmF0b3IubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHRoaXMubW9kZWxzID0gdGhpcy5zb3J0QnkodGhpcy5jb21wYXJhdG9yLCB0aGlzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW9kZWxzLnNvcnQoXy5iaW5kKHRoaXMuY29tcGFyYXRvciwgdGhpcykpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIW9wdGlvbnMuc2lsZW50KSB0aGlzLnRyaWdnZXIoJ3NvcnQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBQbHVjayBhbiBhdHRyaWJ1dGUgZnJvbSBlYWNoIG1vZGVsIGluIHRoZSBjb2xsZWN0aW9uLlxuICAgIHBsdWNrOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gXy5pbnZva2UodGhpcy5tb2RlbHMsICdnZXQnLCBhdHRyKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIGRlZmF1bHQgc2V0IG9mIG1vZGVscyBmb3IgdGhpcyBjb2xsZWN0aW9uLCByZXNldHRpbmcgdGhlXG4gICAgLy8gY29sbGVjdGlvbiB3aGVuIHRoZXkgYXJyaXZlLiBJZiBgcmVzZXQ6IHRydWVgIGlzIHBhc3NlZCwgdGhlIHJlc3BvbnNlXG4gICAgLy8gZGF0YSB3aWxsIGJlIHBhc3NlZCB0aHJvdWdoIHRoZSBgcmVzZXRgIG1ldGhvZCBpbnN0ZWFkIG9mIGBzZXRgLlxuICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBvcHRpb25zLnJlc2V0ID8gJ3Jlc2V0JyA6ICdzZXQnO1xuICAgICAgICBjb2xsZWN0aW9uW21ldGhvZF0ocmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKGNvbGxlY3Rpb24sIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBjb2xsZWN0aW9uLnRyaWdnZXIoJ3N5bmMnLCBjb2xsZWN0aW9uLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcy5zeW5jKCdyZWFkJywgdGhpcywgb3B0aW9ucyk7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBhIG1vZGVsIGluIHRoaXMgY29sbGVjdGlvbi4gQWRkIHRoZSBtb2RlbCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIGltbWVkaWF0ZWx5LCB1bmxlc3MgYHdhaXQ6IHRydWVgIGlzIHBhc3NlZCwgaW4gd2hpY2ggY2FzZSB3ZVxuICAgIC8vIHdhaXQgZm9yIHRoZSBzZXJ2ZXIgdG8gYWdyZWUuXG4gICAgY3JlYXRlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICBpZiAoIShtb2RlbCA9IHRoaXMuX3ByZXBhcmVNb2RlbChtb2RlbCwgb3B0aW9ucykpKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMud2FpdCkgdGhpcy5hZGQobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihtb2RlbCwgcmVzcCkge1xuICAgICAgICBpZiAob3B0aW9ucy53YWl0KSBjb2xsZWN0aW9uLmFkZChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICBtb2RlbC5zYXZlKG51bGwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyAqKnBhcnNlKiogY29udmVydHMgYSByZXNwb25zZSBpbnRvIGEgbGlzdCBvZiBtb2RlbHMgdG8gYmUgYWRkZWQgdG8gdGhlXG4gICAgLy8gY29sbGVjdGlvbi4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMganVzdCB0byBwYXNzIGl0IHRocm91Z2guXG4gICAgcGFyc2U6IGZ1bmN0aW9uKHJlc3AsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiByZXNwO1xuICAgIH0sXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgY29sbGVjdGlvbiB3aXRoIGFuIGlkZW50aWNhbCBsaXN0IG9mIG1vZGVscyBhcyB0aGlzIG9uZS5cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5tb2RlbHMpO1xuICAgIH0sXG5cbiAgICAvLyBQcml2YXRlIG1ldGhvZCB0byByZXNldCBhbGwgaW50ZXJuYWwgc3RhdGUuIENhbGxlZCB3aGVuIHRoZSBjb2xsZWN0aW9uXG4gICAgLy8gaXMgZmlyc3QgaW5pdGlhbGl6ZWQgb3IgcmVzZXQuXG4gICAgX3Jlc2V0OiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMubGVuZ3RoID0gMDtcbiAgICAgIHRoaXMubW9kZWxzID0gW107XG4gICAgICB0aGlzLl9ieUlkICA9IHt9O1xuICAgIH0sXG5cbiAgICAvLyBQcmVwYXJlIGEgaGFzaCBvZiBhdHRyaWJ1dGVzIChvciBvdGhlciBtb2RlbCkgdG8gYmUgYWRkZWQgdG8gdGhpc1xuICAgIC8vIGNvbGxlY3Rpb24uXG4gICAgX3ByZXBhcmVNb2RlbDogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgIGlmIChhdHRycyBpbnN0YW5jZW9mIE1vZGVsKSByZXR1cm4gYXR0cnM7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIG9wdGlvbnMuY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgbW9kZWwgPSBuZXcgdGhpcy5tb2RlbChhdHRycywgb3B0aW9ucyk7XG4gICAgICBpZiAoIW1vZGVsLnZhbGlkYXRpb25FcnJvcikgcmV0dXJuIG1vZGVsO1xuICAgICAgdGhpcy50cmlnZ2VyKCdpbnZhbGlkJywgdGhpcywgbW9kZWwudmFsaWRhdGlvbkVycm9yLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIGNyZWF0ZSBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG4gICAgX2FkZFJlZmVyZW5jZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHRoaXMuX2J5SWRbbW9kZWwuY2lkXSA9IG1vZGVsO1xuICAgICAgaWYgKG1vZGVsLmlkICE9IG51bGwpIHRoaXMuX2J5SWRbbW9kZWwuaWRdID0gbW9kZWw7XG4gICAgICBpZiAoIW1vZGVsLmNvbGxlY3Rpb24pIG1vZGVsLmNvbGxlY3Rpb24gPSB0aGlzO1xuICAgICAgbW9kZWwub24oJ2FsbCcsIHRoaXMuX29uTW9kZWxFdmVudCwgdGhpcyk7XG4gICAgfSxcblxuICAgIC8vIEludGVybmFsIG1ldGhvZCB0byBzZXZlciBhIG1vZGVsJ3MgdGllcyB0byBhIGNvbGxlY3Rpb24uXG4gICAgX3JlbW92ZVJlZmVyZW5jZTogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIGlmICh0aGlzID09PSBtb2RlbC5jb2xsZWN0aW9uKSBkZWxldGUgbW9kZWwuY29sbGVjdGlvbjtcbiAgICAgIG1vZGVsLm9mZignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIGNhbGxlZCBldmVyeSB0aW1lIGEgbW9kZWwgaW4gdGhlIHNldCBmaXJlcyBhbiBldmVudC5cbiAgICAvLyBTZXRzIG5lZWQgdG8gdXBkYXRlIHRoZWlyIGluZGV4ZXMgd2hlbiBtb2RlbHMgY2hhbmdlIGlkcy4gQWxsIG90aGVyXG4gICAgLy8gZXZlbnRzIHNpbXBseSBwcm94eSB0aHJvdWdoLiBcImFkZFwiIGFuZCBcInJlbW92ZVwiIGV2ZW50cyB0aGF0IG9yaWdpbmF0ZVxuICAgIC8vIGluIG90aGVyIGNvbGxlY3Rpb25zIGFyZSBpZ25vcmVkLlxuICAgIF9vbk1vZGVsRXZlbnQ6IGZ1bmN0aW9uKGV2ZW50LCBtb2RlbCwgY29sbGVjdGlvbiwgb3B0aW9ucykge1xuICAgICAgaWYgKChldmVudCA9PT0gJ2FkZCcgfHwgZXZlbnQgPT09ICdyZW1vdmUnKSAmJiBjb2xsZWN0aW9uICE9PSB0aGlzKSByZXR1cm47XG4gICAgICBpZiAoZXZlbnQgPT09ICdkZXN0cm95JykgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKG1vZGVsICYmIGV2ZW50ID09PSAnY2hhbmdlOicgKyBtb2RlbC5pZEF0dHJpYnV0ZSkge1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5wcmV2aW91cyhtb2RlbC5pZEF0dHJpYnV0ZSldO1xuICAgICAgICBpZiAobW9kZWwuaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFttb2RlbC5pZF0gPSBtb2RlbDtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB3ZSB3YW50IHRvIGltcGxlbWVudCBvbiB0aGUgQ29sbGVjdGlvbi5cbiAgLy8gOTAlIG9mIHRoZSBjb3JlIHVzZWZ1bG5lc3Mgb2YgQmFja2JvbmUgQ29sbGVjdGlvbnMgaXMgYWN0dWFsbHkgaW1wbGVtZW50ZWRcbiAgLy8gcmlnaHQgaGVyZTpcbiAgdmFyIG1ldGhvZHMgPSBbJ2ZvckVhY2gnLCAnZWFjaCcsICdtYXAnLCAnY29sbGVjdCcsICdyZWR1Y2UnLCAnZm9sZGwnLFxuICAgICdpbmplY3QnLCAncmVkdWNlUmlnaHQnLCAnZm9sZHInLCAnZmluZCcsICdkZXRlY3QnLCAnZmlsdGVyJywgJ3NlbGVjdCcsXG4gICAgJ3JlamVjdCcsICdldmVyeScsICdhbGwnLCAnc29tZScsICdhbnknLCAnaW5jbHVkZScsICdjb250YWlucycsICdpbnZva2UnLFxuICAgICdtYXgnLCAnbWluJywgJ3RvQXJyYXknLCAnc2l6ZScsICdmaXJzdCcsICdoZWFkJywgJ3Rha2UnLCAnaW5pdGlhbCcsICdyZXN0JyxcbiAgICAndGFpbCcsICdkcm9wJywgJ2xhc3QnLCAnd2l0aG91dCcsICdkaWZmZXJlbmNlJywgJ2luZGV4T2YnLCAnc2h1ZmZsZScsXG4gICAgJ2xhc3RJbmRleE9mJywgJ2lzRW1wdHknLCAnY2hhaW4nLCAnc2FtcGxlJ107XG5cbiAgLy8gTWl4IGluIGVhY2ggVW5kZXJzY29yZSBtZXRob2QgYXMgYSBwcm94eSB0byBgQ29sbGVjdGlvbiNtb2RlbHNgLlxuICBfLmVhY2gobWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICBhcmdzLnVuc2hpZnQodGhpcy5tb2RlbHMpO1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXS5hcHBseShfLCBhcmdzKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBVbmRlcnNjb3JlIG1ldGhvZHMgdGhhdCB0YWtlIGEgcHJvcGVydHkgbmFtZSBhcyBhbiBhcmd1bWVudC5cbiAgdmFyIGF0dHJpYnV0ZU1ldGhvZHMgPSBbJ2dyb3VwQnknLCAnY291bnRCeScsICdzb3J0QnknLCAnaW5kZXhCeSddO1xuXG4gIC8vIFVzZSBhdHRyaWJ1dGVzIGluc3RlYWQgb2YgcHJvcGVydGllcy5cbiAgXy5lYWNoKGF0dHJpYnV0ZU1ldGhvZHMsIGZ1bmN0aW9uKG1ldGhvZCkge1xuICAgIENvbGxlY3Rpb24ucHJvdG90eXBlW21ldGhvZF0gPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgICAgdmFyIGl0ZXJhdG9yID0gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlIDogZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgcmV0dXJuIG1vZGVsLmdldCh2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIF9bbWV0aG9kXSh0aGlzLm1vZGVscywgaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLlZpZXdcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEJhY2tib25lIFZpZXdzIGFyZSBhbG1vc3QgbW9yZSBjb252ZW50aW9uIHRoYW4gdGhleSBhcmUgYWN0dWFsIGNvZGUuIEEgVmlld1xuICAvLyBpcyBzaW1wbHkgYSBKYXZhU2NyaXB0IG9iamVjdCB0aGF0IHJlcHJlc2VudHMgYSBsb2dpY2FsIGNodW5rIG9mIFVJIGluIHRoZVxuICAvLyBET00uIFRoaXMgbWlnaHQgYmUgYSBzaW5nbGUgaXRlbSwgYW4gZW50aXJlIGxpc3QsIGEgc2lkZWJhciBvciBwYW5lbCwgb3JcbiAgLy8gZXZlbiB0aGUgc3Vycm91bmRpbmcgZnJhbWUgd2hpY2ggd3JhcHMgeW91ciB3aG9sZSBhcHAuIERlZmluaW5nIGEgY2h1bmsgb2ZcbiAgLy8gVUkgYXMgYSAqKlZpZXcqKiBhbGxvd3MgeW91IHRvIGRlZmluZSB5b3VyIERPTSBldmVudHMgZGVjbGFyYXRpdmVseSwgd2l0aG91dFxuICAvLyBoYXZpbmcgdG8gd29ycnkgYWJvdXQgcmVuZGVyIG9yZGVyIC4uLiBhbmQgbWFrZXMgaXQgZWFzeSBmb3IgdGhlIHZpZXcgdG9cbiAgLy8gcmVhY3QgdG8gc3BlY2lmaWMgY2hhbmdlcyBpbiB0aGUgc3RhdGUgb2YgeW91ciBtb2RlbHMuXG5cbiAgLy8gQ3JlYXRpbmcgYSBCYWNrYm9uZS5WaWV3IGNyZWF0ZXMgaXRzIGluaXRpYWwgZWxlbWVudCBvdXRzaWRlIG9mIHRoZSBET00sXG4gIC8vIGlmIGFuIGV4aXN0aW5nIGVsZW1lbnQgaXMgbm90IHByb3ZpZGVkLi4uXG4gIHZhciBWaWV3ID0gQmFja2JvbmUuVmlldyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICB0aGlzLmNpZCA9IF8udW5pcXVlSWQoJ3ZpZXcnKTtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIF8uZXh0ZW5kKHRoaXMsIF8ucGljayhvcHRpb25zLCB2aWV3T3B0aW9ucykpO1xuICAgIHRoaXMuX2Vuc3VyZUVsZW1lbnQoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0aGlzLmRlbGVnYXRlRXZlbnRzKCk7XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IHRvIHNwbGl0IGtleXMgZm9yIGBkZWxlZ2F0ZWAuXG4gIHZhciBkZWxlZ2F0ZUV2ZW50U3BsaXR0ZXIgPSAvXihcXFMrKVxccyooLiopJC87XG5cbiAgLy8gTGlzdCBvZiB2aWV3IG9wdGlvbnMgdG8gYmUgbWVyZ2VkIGFzIHByb3BlcnRpZXMuXG4gIHZhciB2aWV3T3B0aW9ucyA9IFsnbW9kZWwnLCAnY29sbGVjdGlvbicsICdlbCcsICdpZCcsICdhdHRyaWJ1dGVzJywgJ2NsYXNzTmFtZScsICd0YWdOYW1lJywgJ2V2ZW50cyddO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5WaWV3KiogcHJvcGVydGllcyBhbmQgbWV0aG9kcy5cbiAgXy5leHRlbmQoVmlldy5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gVGhlIGRlZmF1bHQgYHRhZ05hbWVgIG9mIGEgVmlldydzIGVsZW1lbnQgaXMgYFwiZGl2XCJgLlxuICAgIHRhZ05hbWU6ICdkaXYnLFxuXG4gICAgLy8galF1ZXJ5IGRlbGVnYXRlIGZvciBlbGVtZW50IGxvb2t1cCwgc2NvcGVkIHRvIERPTSBlbGVtZW50cyB3aXRoaW4gdGhlXG4gICAgLy8gY3VycmVudCB2aWV3LiBUaGlzIHNob3VsZCBiZSBwcmVmZXJyZWQgdG8gZ2xvYmFsIGxvb2t1cHMgd2hlcmUgcG9zc2libGUuXG4gICAgJDogZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiB0aGlzLiRlbC5maW5kKHNlbGVjdG9yKTtcbiAgICB9LFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gKipyZW5kZXIqKiBpcyB0aGUgY29yZSBmdW5jdGlvbiB0aGF0IHlvdXIgdmlldyBzaG91bGQgb3ZlcnJpZGUsIGluIG9yZGVyXG4gICAgLy8gdG8gcG9wdWxhdGUgaXRzIGVsZW1lbnQgKGB0aGlzLmVsYCksIHdpdGggdGhlIGFwcHJvcHJpYXRlIEhUTUwuIFRoZVxuICAgIC8vIGNvbnZlbnRpb24gaXMgZm9yICoqcmVuZGVyKiogdG8gYWx3YXlzIHJldHVybiBgdGhpc2AuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgdGhpcyB2aWV3IGJ5IHRha2luZyB0aGUgZWxlbWVudCBvdXQgb2YgdGhlIERPTSwgYW5kIHJlbW92aW5nIGFueVxuICAgIC8vIGFwcGxpY2FibGUgQmFja2JvbmUuRXZlbnRzIGxpc3RlbmVycy5cbiAgICByZW1vdmU6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy4kZWwucmVtb3ZlKCk7XG4gICAgICB0aGlzLnN0b3BMaXN0ZW5pbmcoKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBDaGFuZ2UgdGhlIHZpZXcncyBlbGVtZW50IChgdGhpcy5lbGAgcHJvcGVydHkpLCBpbmNsdWRpbmcgZXZlbnRcbiAgICAvLyByZS1kZWxlZ2F0aW9uLlxuICAgIHNldEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQsIGRlbGVnYXRlKSB7XG4gICAgICBpZiAodGhpcy4kZWwpIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgdGhpcy4kZWwgPSBlbGVtZW50IGluc3RhbmNlb2YgQmFja2JvbmUuJCA/IGVsZW1lbnQgOiBCYWNrYm9uZS4kKGVsZW1lbnQpO1xuICAgICAgdGhpcy5lbCA9IHRoaXMuJGVsWzBdO1xuICAgICAgaWYgKGRlbGVnYXRlICE9PSBmYWxzZSkgdGhpcy5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFNldCBjYWxsYmFja3MsIHdoZXJlIGB0aGlzLmV2ZW50c2AgaXMgYSBoYXNoIG9mXG4gICAgLy9cbiAgICAvLyAqe1wiZXZlbnQgc2VsZWN0b3JcIjogXCJjYWxsYmFja1wifSpcbiAgICAvL1xuICAgIC8vICAgICB7XG4gICAgLy8gICAgICAgJ21vdXNlZG93biAudGl0bGUnOiAgJ2VkaXQnLFxuICAgIC8vICAgICAgICdjbGljayAuYnV0dG9uJzogICAgICdzYXZlJyxcbiAgICAvLyAgICAgICAnY2xpY2sgLm9wZW4nOiAgICAgICBmdW5jdGlvbihlKSB7IC4uLiB9XG4gICAgLy8gICAgIH1cbiAgICAvL1xuICAgIC8vIHBhaXJzLiBDYWxsYmFja3Mgd2lsbCBiZSBib3VuZCB0byB0aGUgdmlldywgd2l0aCBgdGhpc2Agc2V0IHByb3Blcmx5LlxuICAgIC8vIFVzZXMgZXZlbnQgZGVsZWdhdGlvbiBmb3IgZWZmaWNpZW5jeS5cbiAgICAvLyBPbWl0dGluZyB0aGUgc2VsZWN0b3IgYmluZHMgdGhlIGV2ZW50IHRvIGB0aGlzLmVsYC5cbiAgICAvLyBUaGlzIG9ubHkgd29ya3MgZm9yIGRlbGVnYXRlLWFibGUgZXZlbnRzOiBub3QgYGZvY3VzYCwgYGJsdXJgLCBhbmRcbiAgICAvLyBub3QgYGNoYW5nZWAsIGBzdWJtaXRgLCBhbmQgYHJlc2V0YCBpbiBJbnRlcm5ldCBFeHBsb3Jlci5cbiAgICBkZWxlZ2F0ZUV2ZW50czogZnVuY3Rpb24oZXZlbnRzKSB7XG4gICAgICBpZiAoIShldmVudHMgfHwgKGV2ZW50cyA9IF8ucmVzdWx0KHRoaXMsICdldmVudHMnKSkpKSByZXR1cm4gdGhpcztcbiAgICAgIHRoaXMudW5kZWxlZ2F0ZUV2ZW50cygpO1xuICAgICAgZm9yICh2YXIga2V5IGluIGV2ZW50cykge1xuICAgICAgICB2YXIgbWV0aG9kID0gZXZlbnRzW2tleV07XG4gICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKG1ldGhvZCkpIG1ldGhvZCA9IHRoaXNbZXZlbnRzW2tleV1dO1xuICAgICAgICBpZiAoIW1ldGhvZCkgY29udGludWU7XG5cbiAgICAgICAgdmFyIG1hdGNoID0ga2V5Lm1hdGNoKGRlbGVnYXRlRXZlbnRTcGxpdHRlcik7XG4gICAgICAgIHZhciBldmVudE5hbWUgPSBtYXRjaFsxXSwgc2VsZWN0b3IgPSBtYXRjaFsyXTtcbiAgICAgICAgbWV0aG9kID0gXy5iaW5kKG1ldGhvZCwgdGhpcyk7XG4gICAgICAgIGV2ZW50TmFtZSArPSAnLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkO1xuICAgICAgICBpZiAoc2VsZWN0b3IgPT09ICcnKSB7XG4gICAgICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lLCBtZXRob2QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuJGVsLm9uKGV2ZW50TmFtZSwgc2VsZWN0b3IsIG1ldGhvZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBDbGVhcnMgYWxsIGNhbGxiYWNrcyBwcmV2aW91c2x5IGJvdW5kIHRvIHRoZSB2aWV3IHdpdGggYGRlbGVnYXRlRXZlbnRzYC5cbiAgICAvLyBZb3UgdXN1YWxseSBkb24ndCBuZWVkIHRvIHVzZSB0aGlzLCBidXQgbWF5IHdpc2ggdG8gaWYgeW91IGhhdmUgbXVsdGlwbGVcbiAgICAvLyBCYWNrYm9uZSB2aWV3cyBhdHRhY2hlZCB0byB0aGUgc2FtZSBET00gZWxlbWVudC5cbiAgICB1bmRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbigpIHtcbiAgICAgIHRoaXMuJGVsLm9mZignLmRlbGVnYXRlRXZlbnRzJyArIHRoaXMuY2lkKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBFbnN1cmUgdGhhdCB0aGUgVmlldyBoYXMgYSBET00gZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICAvLyBJZiBgdGhpcy5lbGAgaXMgYSBzdHJpbmcsIHBhc3MgaXQgdGhyb3VnaCBgJCgpYCwgdGFrZSB0aGUgZmlyc3RcbiAgICAvLyBtYXRjaGluZyBlbGVtZW50LCBhbmQgcmUtYXNzaWduIGl0IHRvIGBlbGAuIE90aGVyd2lzZSwgY3JlYXRlXG4gICAgLy8gYW4gZWxlbWVudCBmcm9tIHRoZSBgaWRgLCBgY2xhc3NOYW1lYCBhbmQgYHRhZ05hbWVgIHByb3BlcnRpZXMuXG4gICAgX2Vuc3VyZUVsZW1lbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLmVsKSB7XG4gICAgICAgIHZhciBhdHRycyA9IF8uZXh0ZW5kKHt9LCBfLnJlc3VsdCh0aGlzLCAnYXR0cmlidXRlcycpKTtcbiAgICAgICAgaWYgKHRoaXMuaWQpIGF0dHJzLmlkID0gXy5yZXN1bHQodGhpcywgJ2lkJyk7XG4gICAgICAgIGlmICh0aGlzLmNsYXNzTmFtZSkgYXR0cnNbJ2NsYXNzJ10gPSBfLnJlc3VsdCh0aGlzLCAnY2xhc3NOYW1lJyk7XG4gICAgICAgIHZhciAkZWwgPSBCYWNrYm9uZS4kKCc8JyArIF8ucmVzdWx0KHRoaXMsICd0YWdOYW1lJykgKyAnPicpLmF0dHIoYXR0cnMpO1xuICAgICAgICB0aGlzLnNldEVsZW1lbnQoJGVsLCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldEVsZW1lbnQoXy5yZXN1bHQodGhpcywgJ2VsJyksIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuc3luY1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBmdW5jdGlvbiB0byBjaGFuZ2UgdGhlIG1hbm5lciBpbiB3aGljaCBCYWNrYm9uZSBwZXJzaXN0c1xuICAvLyBtb2RlbHMgdG8gdGhlIHNlcnZlci4gWW91IHdpbGwgYmUgcGFzc2VkIHRoZSB0eXBlIG9mIHJlcXVlc3QsIGFuZCB0aGVcbiAgLy8gbW9kZWwgaW4gcXVlc3Rpb24uIEJ5IGRlZmF1bHQsIG1ha2VzIGEgUkVTVGZ1bCBBamF4IHJlcXVlc3RcbiAgLy8gdG8gdGhlIG1vZGVsJ3MgYHVybCgpYC4gU29tZSBwb3NzaWJsZSBjdXN0b21pemF0aW9ucyBjb3VsZCBiZTpcbiAgLy9cbiAgLy8gKiBVc2UgYHNldFRpbWVvdXRgIHRvIGJhdGNoIHJhcGlkLWZpcmUgdXBkYXRlcyBpbnRvIGEgc2luZ2xlIHJlcXVlc3QuXG4gIC8vICogU2VuZCB1cCB0aGUgbW9kZWxzIGFzIFhNTCBpbnN0ZWFkIG9mIEpTT04uXG4gIC8vICogUGVyc2lzdCBtb2RlbHMgdmlhIFdlYlNvY2tldHMgaW5zdGVhZCBvZiBBamF4LlxuICAvL1xuICAvLyBUdXJuIG9uIGBCYWNrYm9uZS5lbXVsYXRlSFRUUGAgaW4gb3JkZXIgdG8gc2VuZCBgUFVUYCBhbmQgYERFTEVURWAgcmVxdWVzdHNcbiAgLy8gYXMgYFBPU1RgLCB3aXRoIGEgYF9tZXRob2RgIHBhcmFtZXRlciBjb250YWluaW5nIHRoZSB0cnVlIEhUVFAgbWV0aG9kLFxuICAvLyBhcyB3ZWxsIGFzIGFsbCByZXF1ZXN0cyB3aXRoIHRoZSBib2R5IGFzIGBhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRgXG4gIC8vIGluc3RlYWQgb2YgYGFwcGxpY2F0aW9uL2pzb25gIHdpdGggdGhlIG1vZGVsIGluIGEgcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgLy8gVXNlZnVsIHdoZW4gaW50ZXJmYWNpbmcgd2l0aCBzZXJ2ZXItc2lkZSBsYW5ndWFnZXMgbGlrZSAqKlBIUCoqIHRoYXQgbWFrZVxuICAvLyBpdCBkaWZmaWN1bHQgdG8gcmVhZCB0aGUgYm9keSBvZiBgUFVUYCByZXF1ZXN0cy5cbiAgQmFja2JvbmUuc3luYyA9IGZ1bmN0aW9uKG1ldGhvZCwgbW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IG1ldGhvZE1hcFttZXRob2RdO1xuXG4gICAgLy8gRGVmYXVsdCBvcHRpb25zLCB1bmxlc3Mgc3BlY2lmaWVkLlxuICAgIF8uZGVmYXVsdHMob3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KSwge1xuICAgICAgZW11bGF0ZUhUVFA6IEJhY2tib25lLmVtdWxhdGVIVFRQLFxuICAgICAgZW11bGF0ZUpTT046IEJhY2tib25lLmVtdWxhdGVKU09OXG4gICAgfSk7XG5cbiAgICAvLyBEZWZhdWx0IEpTT04tcmVxdWVzdCBvcHRpb25zLlxuICAgIHZhciBwYXJhbXMgPSB7dHlwZTogdHlwZSwgZGF0YVR5cGU6ICdqc29uJ307XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIGEgVVJMLlxuICAgIGlmICghb3B0aW9ucy51cmwpIHtcbiAgICAgIHBhcmFtcy51cmwgPSBfLnJlc3VsdChtb2RlbCwgJ3VybCcpIHx8IHVybEVycm9yKCk7XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIHRoYXQgd2UgaGF2ZSB0aGUgYXBwcm9wcmlhdGUgcmVxdWVzdCBkYXRhLlxuICAgIGlmIChvcHRpb25zLmRhdGEgPT0gbnVsbCAmJiBtb2RlbCAmJiAobWV0aG9kID09PSAnY3JlYXRlJyB8fCBtZXRob2QgPT09ICd1cGRhdGUnIHx8IG1ldGhvZCA9PT0gJ3BhdGNoJykpIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgIHBhcmFtcy5kYXRhID0gSlNPTi5zdHJpbmdpZnkob3B0aW9ucy5hdHRycyB8fCBtb2RlbC50b0pTT04ob3B0aW9ucykpO1xuICAgIH1cblxuICAgIC8vIEZvciBvbGRlciBzZXJ2ZXJzLCBlbXVsYXRlIEpTT04gYnkgZW5jb2RpbmcgdGhlIHJlcXVlc3QgaW50byBhbiBIVE1MLWZvcm0uXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHtcbiAgICAgIHBhcmFtcy5jb250ZW50VHlwZSA9ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnO1xuICAgICAgcGFyYW1zLmRhdGEgPSBwYXJhbXMuZGF0YSA/IHttb2RlbDogcGFyYW1zLmRhdGF9IDoge307XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSFRUUCBieSBtaW1pY2tpbmcgdGhlIEhUVFAgbWV0aG9kIHdpdGggYF9tZXRob2RgXG4gICAgLy8gQW5kIGFuIGBYLUhUVFAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gICAgaWYgKG9wdGlvbnMuZW11bGF0ZUhUVFAgJiYgKHR5cGUgPT09ICdQVVQnIHx8IHR5cGUgPT09ICdERUxFVEUnIHx8IHR5cGUgPT09ICdQQVRDSCcpKSB7XG4gICAgICBwYXJhbXMudHlwZSA9ICdQT1NUJztcbiAgICAgIGlmIChvcHRpb25zLmVtdWxhdGVKU09OKSBwYXJhbXMuZGF0YS5fbWV0aG9kID0gdHlwZTtcbiAgICAgIHZhciBiZWZvcmVTZW5kID0gb3B0aW9ucy5iZWZvcmVTZW5kO1xuICAgICAgb3B0aW9ucy5iZWZvcmVTZW5kID0gZnVuY3Rpb24oeGhyKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdYLUhUVFAtTWV0aG9kLU92ZXJyaWRlJywgdHlwZSk7XG4gICAgICAgIGlmIChiZWZvcmVTZW5kKSByZXR1cm4gYmVmb3JlU2VuZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBwcm9jZXNzIGRhdGEgb24gYSBub24tR0VUIHJlcXVlc3QuXG4gICAgaWYgKHBhcmFtcy50eXBlICE9PSAnR0VUJyAmJiAhb3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLnByb2Nlc3NEYXRhID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgc2VuZGluZyBhIGBQQVRDSGAgcmVxdWVzdCwgYW5kIHdlJ3JlIGluIGFuIG9sZCBJbnRlcm5ldCBFeHBsb3JlclxuICAgIC8vIHRoYXQgc3RpbGwgaGFzIEFjdGl2ZVggZW5hYmxlZCBieSBkZWZhdWx0LCBvdmVycmlkZSBqUXVlcnkgdG8gdXNlIHRoYXRcbiAgICAvLyBmb3IgWEhSIGluc3RlYWQuIFJlbW92ZSB0aGlzIGxpbmUgd2hlbiBqUXVlcnkgc3VwcG9ydHMgYFBBVENIYCBvbiBJRTguXG4gICAgaWYgKHBhcmFtcy50eXBlID09PSAnUEFUQ0gnICYmIG5vWGhyUGF0Y2gpIHtcbiAgICAgIHBhcmFtcy54aHIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBY3RpdmVYT2JqZWN0KFwiTWljcm9zb2Z0LlhNTEhUVFBcIik7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIE1ha2UgdGhlIHJlcXVlc3QsIGFsbG93aW5nIHRoZSB1c2VyIHRvIG92ZXJyaWRlIGFueSBBamF4IG9wdGlvbnMuXG4gICAgdmFyIHhociA9IG9wdGlvbnMueGhyID0gQmFja2JvbmUuYWpheChfLmV4dGVuZChwYXJhbXMsIG9wdGlvbnMpKTtcbiAgICBtb2RlbC50cmlnZ2VyKCdyZXF1ZXN0JywgbW9kZWwsIHhociwgb3B0aW9ucyk7XG4gICAgcmV0dXJuIHhocjtcbiAgfTtcblxuICB2YXIgbm9YaHJQYXRjaCA9XG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgISF3aW5kb3cuQWN0aXZlWE9iamVjdCAmJlxuICAgICAgISh3aW5kb3cuWE1MSHR0cFJlcXVlc3QgJiYgKG5ldyBYTUxIdHRwUmVxdWVzdCkuZGlzcGF0Y2hFdmVudCk7XG5cbiAgLy8gTWFwIGZyb20gQ1JVRCB0byBIVFRQIGZvciBvdXIgZGVmYXVsdCBgQmFja2JvbmUuc3luY2AgaW1wbGVtZW50YXRpb24uXG4gIHZhciBtZXRob2RNYXAgPSB7XG4gICAgJ2NyZWF0ZSc6ICdQT1NUJyxcbiAgICAndXBkYXRlJzogJ1BVVCcsXG4gICAgJ3BhdGNoJzogICdQQVRDSCcsXG4gICAgJ2RlbGV0ZSc6ICdERUxFVEUnLFxuICAgICdyZWFkJzogICAnR0VUJ1xuICB9O1xuXG4gIC8vIFNldCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBvZiBgQmFja2JvbmUuYWpheGAgdG8gcHJveHkgdGhyb3VnaCB0byBgJGAuXG4gIC8vIE92ZXJyaWRlIHRoaXMgaWYgeW91J2QgbGlrZSB0byB1c2UgYSBkaWZmZXJlbnQgbGlicmFyeS5cbiAgQmFja2JvbmUuYWpheCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCYWNrYm9uZS4kLmFqYXguYXBwbHkoQmFja2JvbmUuJCwgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBCYWNrYm9uZS5Sb3V0ZXJcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUm91dGVycyBtYXAgZmF1eC1VUkxzIHRvIGFjdGlvbnMsIGFuZCBmaXJlIGV2ZW50cyB3aGVuIHJvdXRlcyBhcmVcbiAgLy8gbWF0Y2hlZC4gQ3JlYXRpbmcgYSBuZXcgb25lIHNldHMgaXRzIGByb3V0ZXNgIGhhc2gsIGlmIG5vdCBzZXQgc3RhdGljYWxseS5cbiAgdmFyIFJvdXRlciA9IEJhY2tib25lLlJvdXRlciA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLnJvdXRlcykgdGhpcy5yb3V0ZXMgPSBvcHRpb25zLnJvdXRlcztcbiAgICB0aGlzLl9iaW5kUm91dGVzKCk7XG4gICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ3VsYXIgZXhwcmVzc2lvbnMgZm9yIG1hdGNoaW5nIG5hbWVkIHBhcmFtIHBhcnRzIGFuZCBzcGxhdHRlZFxuICAvLyBwYXJ0cyBvZiByb3V0ZSBzdHJpbmdzLlxuICB2YXIgb3B0aW9uYWxQYXJhbSA9IC9cXCgoLio/KVxcKS9nO1xuICB2YXIgbmFtZWRQYXJhbSAgICA9IC8oXFwoXFw/KT86XFx3Ky9nO1xuICB2YXIgc3BsYXRQYXJhbSAgICA9IC9cXCpcXHcrL2c7XG4gIHZhciBlc2NhcGVSZWdFeHAgID0gL1tcXC17fVxcW1xcXSs/LixcXFxcXFxeJHwjXFxzXS9nO1xuXG4gIC8vIFNldCB1cCBhbGwgaW5oZXJpdGFibGUgKipCYWNrYm9uZS5Sb3V0ZXIqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChSb3V0ZXIucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIE1hbnVhbGx5IGJpbmQgYSBzaW5nbGUgbmFtZWQgcm91dGUgdG8gYSBjYWxsYmFjay4gRm9yIGV4YW1wbGU6XG4gICAgLy9cbiAgICAvLyAgICAgdGhpcy5yb3V0ZSgnc2VhcmNoLzpxdWVyeS9wOm51bScsICdzZWFyY2gnLCBmdW5jdGlvbihxdWVyeSwgbnVtKSB7XG4gICAgLy8gICAgICAgLi4uXG4gICAgLy8gICAgIH0pO1xuICAgIC8vXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBuYW1lLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCFfLmlzUmVnRXhwKHJvdXRlKSkgcm91dGUgPSB0aGlzLl9yb3V0ZVRvUmVnRXhwKHJvdXRlKTtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24obmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBuYW1lO1xuICAgICAgICBuYW1lID0gJyc7XG4gICAgICB9XG4gICAgICBpZiAoIWNhbGxiYWNrKSBjYWxsYmFjayA9IHRoaXNbbmFtZV07XG4gICAgICB2YXIgcm91dGVyID0gdGhpcztcbiAgICAgIEJhY2tib25lLmhpc3Rvcnkucm91dGUocm91dGUsIGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICAgIHZhciBhcmdzID0gcm91dGVyLl9leHRyYWN0UGFyYW1ldGVycyhyb3V0ZSwgZnJhZ21lbnQpO1xuICAgICAgICByb3V0ZXIuZXhlY3V0ZShjYWxsYmFjaywgYXJncyk7XG4gICAgICAgIHJvdXRlci50cmlnZ2VyLmFwcGx5KHJvdXRlciwgWydyb3V0ZTonICsgbmFtZV0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgcm91dGVyLnRyaWdnZXIoJ3JvdXRlJywgbmFtZSwgYXJncyk7XG4gICAgICAgIEJhY2tib25lLmhpc3RvcnkudHJpZ2dlcigncm91dGUnLCByb3V0ZXIsIG5hbWUsIGFyZ3MpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gRXhlY3V0ZSBhIHJvdXRlIGhhbmRsZXIgd2l0aCB0aGUgcHJvdmlkZWQgcGFyYW1ldGVycy4gIFRoaXMgaXMgYW5cbiAgICAvLyBleGNlbGxlbnQgcGxhY2UgdG8gZG8gcHJlLXJvdXRlIHNldHVwIG9yIHBvc3Qtcm91dGUgY2xlYW51cC5cbiAgICBleGVjdXRlOiBmdW5jdGlvbihjYWxsYmFjaywgYXJncykge1xuICAgICAgaWYgKGNhbGxiYWNrKSBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9LFxuXG4gICAgLy8gU2ltcGxlIHByb3h5IHRvIGBCYWNrYm9uZS5oaXN0b3J5YCB0byBzYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoZnJhZ21lbnQsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEJpbmQgYWxsIGRlZmluZWQgcm91dGVzIHRvIGBCYWNrYm9uZS5oaXN0b3J5YC4gV2UgaGF2ZSB0byByZXZlcnNlIHRoZVxuICAgIC8vIG9yZGVyIG9mIHRoZSByb3V0ZXMgaGVyZSB0byBzdXBwb3J0IGJlaGF2aW9yIHdoZXJlIHRoZSBtb3N0IGdlbmVyYWxcbiAgICAvLyByb3V0ZXMgY2FuIGJlIGRlZmluZWQgYXQgdGhlIGJvdHRvbSBvZiB0aGUgcm91dGUgbWFwLlxuICAgIF9iaW5kUm91dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICghdGhpcy5yb3V0ZXMpIHJldHVybjtcbiAgICAgIHRoaXMucm91dGVzID0gXy5yZXN1bHQodGhpcywgJ3JvdXRlcycpO1xuICAgICAgdmFyIHJvdXRlLCByb3V0ZXMgPSBfLmtleXModGhpcy5yb3V0ZXMpO1xuICAgICAgd2hpbGUgKChyb3V0ZSA9IHJvdXRlcy5wb3AoKSkgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnJvdXRlKHJvdXRlLCB0aGlzLnJvdXRlc1tyb3V0ZV0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBDb252ZXJ0IGEgcm91dGUgc3RyaW5nIGludG8gYSByZWd1bGFyIGV4cHJlc3Npb24sIHN1aXRhYmxlIGZvciBtYXRjaGluZ1xuICAgIC8vIGFnYWluc3QgdGhlIGN1cnJlbnQgbG9jYXRpb24gaGFzaC5cbiAgICBfcm91dGVUb1JlZ0V4cDogZnVuY3Rpb24ocm91dGUpIHtcbiAgICAgIHJvdXRlID0gcm91dGUucmVwbGFjZShlc2NhcGVSZWdFeHAsICdcXFxcJCYnKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG9wdGlvbmFsUGFyYW0sICcoPzokMSk/JylcbiAgICAgICAgICAgICAgICAgICAucmVwbGFjZShuYW1lZFBhcmFtLCBmdW5jdGlvbihtYXRjaCwgb3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25hbCA/IG1hdGNoIDogJyhbXi8/XSspJztcbiAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKHNwbGF0UGFyYW0sICcoW14/XSo/KScpO1xuICAgICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14nICsgcm91dGUgKyAnKD86XFxcXD8oW1xcXFxzXFxcXFNdKikpPyQnKTtcbiAgICB9LFxuXG4gICAgLy8gR2l2ZW4gYSByb3V0ZSwgYW5kIGEgVVJMIGZyYWdtZW50IHRoYXQgaXQgbWF0Y2hlcywgcmV0dXJuIHRoZSBhcnJheSBvZlxuICAgIC8vIGV4dHJhY3RlZCBkZWNvZGVkIHBhcmFtZXRlcnMuIEVtcHR5IG9yIHVubWF0Y2hlZCBwYXJhbWV0ZXJzIHdpbGwgYmVcbiAgICAvLyB0cmVhdGVkIGFzIGBudWxsYCB0byBub3JtYWxpemUgY3Jvc3MtYnJvd3NlciBiZWhhdmlvci5cbiAgICBfZXh0cmFjdFBhcmFtZXRlcnM6IGZ1bmN0aW9uKHJvdXRlLCBmcmFnbWVudCkge1xuICAgICAgdmFyIHBhcmFtcyA9IHJvdXRlLmV4ZWMoZnJhZ21lbnQpLnNsaWNlKDEpO1xuICAgICAgcmV0dXJuIF8ubWFwKHBhcmFtcywgZnVuY3Rpb24ocGFyYW0sIGkpIHtcbiAgICAgICAgLy8gRG9uJ3QgZGVjb2RlIHRoZSBzZWFyY2ggcGFyYW1zLlxuICAgICAgICBpZiAoaSA9PT0gcGFyYW1zLmxlbmd0aCAtIDEpIHJldHVybiBwYXJhbSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gcGFyYW0gPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW0pIDogbnVsbDtcbiAgICAgIH0pO1xuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5IaXN0b3J5XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBIYW5kbGVzIGNyb3NzLWJyb3dzZXIgaGlzdG9yeSBtYW5hZ2VtZW50LCBiYXNlZCBvbiBlaXRoZXJcbiAgLy8gW3B1c2hTdGF0ZV0oaHR0cDovL2RpdmVpbnRvaHRtbDUuaW5mby9oaXN0b3J5Lmh0bWwpIGFuZCByZWFsIFVSTHMsIG9yXG4gIC8vIFtvbmhhc2hjaGFuZ2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvRE9NL3dpbmRvdy5vbmhhc2hjaGFuZ2UpXG4gIC8vIGFuZCBVUkwgZnJhZ21lbnRzLiBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBuZWl0aGVyIChvbGQgSUUsIG5hdGNoKSxcbiAgLy8gZmFsbHMgYmFjayB0byBwb2xsaW5nLlxuICB2YXIgSGlzdG9yeSA9IEJhY2tib25lLkhpc3RvcnkgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhhbmRsZXJzID0gW107XG4gICAgXy5iaW5kQWxsKHRoaXMsICdjaGVja1VybCcpO1xuXG4gICAgLy8gRW5zdXJlIHRoYXQgYEhpc3RvcnlgIGNhbiBiZSB1c2VkIG91dHNpZGUgb2YgdGhlIGJyb3dzZXIuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgdGhpcy5oaXN0b3J5ID0gd2luZG93Lmhpc3Rvcnk7XG4gICAgfVxuICB9O1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGEgbGVhZGluZyBoYXNoL3NsYXNoIGFuZCB0cmFpbGluZyBzcGFjZS5cbiAgdmFyIHJvdXRlU3RyaXBwZXIgPSAvXlsjXFwvXXxcXHMrJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3Igc3RyaXBwaW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMuXG4gIHZhciByb290U3RyaXBwZXIgPSAvXlxcLyt8XFwvKyQvZztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIGRldGVjdGluZyBNU0lFLlxuICB2YXIgaXNFeHBsb3JlciA9IC9tc2llIFtcXHcuXSsvO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3IgcmVtb3ZpbmcgYSB0cmFpbGluZyBzbGFzaC5cbiAgdmFyIHRyYWlsaW5nU2xhc2ggPSAvXFwvJC87XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgdXJscyBvZiBoYXNoLlxuICB2YXIgcGF0aFN0cmlwcGVyID0gLyMuKiQvO1xuXG4gIC8vIEhhcyB0aGUgaGlzdG9yeSBoYW5kbGluZyBhbHJlYWR5IGJlZW4gc3RhcnRlZD9cbiAgSGlzdG9yeS5zdGFydGVkID0gZmFsc2U7XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLkhpc3RvcnkqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChIaXN0b3J5LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBpbnRlcnZhbCB0byBwb2xsIGZvciBoYXNoIGNoYW5nZXMsIGlmIG5lY2Vzc2FyeSwgaXNcbiAgICAvLyB0d2VudHkgdGltZXMgYSBzZWNvbmQuXG4gICAgaW50ZXJ2YWw6IDUwLFxuXG4gICAgLy8gQXJlIHdlIGF0IHRoZSBhcHAgcm9vdD9cbiAgICBhdFJvb3Q6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMubG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZSgvW15cXC9dJC8sICckJi8nKSA9PT0gdGhpcy5yb290O1xuICAgIH0sXG5cbiAgICAvLyBHZXRzIHRoZSB0cnVlIGhhc2ggdmFsdWUuIENhbm5vdCB1c2UgbG9jYXRpb24uaGFzaCBkaXJlY3RseSBkdWUgdG8gYnVnXG4gICAgLy8gaW4gRmlyZWZveCB3aGVyZSBsb2NhdGlvbi5oYXNoIHdpbGwgYWx3YXlzIGJlIGRlY29kZWQuXG4gICAgZ2V0SGFzaDogZnVuY3Rpb24od2luZG93KSB7XG4gICAgICB2YXIgbWF0Y2ggPSAod2luZG93IHx8IHRoaXMpLmxvY2F0aW9uLmhyZWYubWF0Y2goLyMoLiopJC8pO1xuICAgICAgcmV0dXJuIG1hdGNoID8gbWF0Y2hbMV0gOiAnJztcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBjcm9zcy1icm93c2VyIG5vcm1hbGl6ZWQgVVJMIGZyYWdtZW50LCBlaXRoZXIgZnJvbSB0aGUgVVJMLFxuICAgIC8vIHRoZSBoYXNoLCBvciB0aGUgb3ZlcnJpZGUuXG4gICAgZ2V0RnJhZ21lbnQ6IGZ1bmN0aW9uKGZyYWdtZW50LCBmb3JjZVB1c2hTdGF0ZSkge1xuICAgICAgaWYgKGZyYWdtZW50ID09IG51bGwpIHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSB8fCAhdGhpcy5fd2FudHNIYXNoQ2hhbmdlIHx8IGZvcmNlUHVzaFN0YXRlKSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSBkZWNvZGVVUkkodGhpcy5sb2NhdGlvbi5wYXRobmFtZSArIHRoaXMubG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICB2YXIgcm9vdCA9IHRoaXMucm9vdC5yZXBsYWNlKHRyYWlsaW5nU2xhc2gsICcnKTtcbiAgICAgICAgICBpZiAoIWZyYWdtZW50LmluZGV4T2Yocm9vdCkpIGZyYWdtZW50ID0gZnJhZ21lbnQuc2xpY2Uocm9vdC5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZyYWdtZW50ID0gdGhpcy5nZXRIYXNoKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBmcmFnbWVudC5yZXBsYWNlKHJvdXRlU3RyaXBwZXIsICcnKTtcbiAgICB9LFxuXG4gICAgLy8gU3RhcnQgdGhlIGhhc2ggY2hhbmdlIGhhbmRsaW5nLCByZXR1cm5pbmcgYHRydWVgIGlmIHRoZSBjdXJyZW50IFVSTCBtYXRjaGVzXG4gICAgLy8gYW4gZXhpc3Rpbmcgcm91dGUsIGFuZCBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICBzdGFydDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgaWYgKEhpc3Rvcnkuc3RhcnRlZCkgdGhyb3cgbmV3IEVycm9yKFwiQmFja2JvbmUuaGlzdG9yeSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWRcIik7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSB0cnVlO1xuXG4gICAgICAvLyBGaWd1cmUgb3V0IHRoZSBpbml0aWFsIGNvbmZpZ3VyYXRpb24uIERvIHdlIG5lZWQgYW4gaWZyYW1lP1xuICAgICAgLy8gSXMgcHVzaFN0YXRlIGRlc2lyZWQgLi4uIGlzIGl0IGF2YWlsYWJsZT9cbiAgICAgIHRoaXMub3B0aW9ucyAgICAgICAgICA9IF8uZXh0ZW5kKHtyb290OiAnLyd9LCB0aGlzLm9wdGlvbnMsIG9wdGlvbnMpO1xuICAgICAgdGhpcy5yb290ICAgICAgICAgICAgID0gdGhpcy5vcHRpb25zLnJvb3Q7XG4gICAgICB0aGlzLl93YW50c0hhc2hDaGFuZ2UgPSB0aGlzLm9wdGlvbnMuaGFzaENoYW5nZSAhPT0gZmFsc2U7XG4gICAgICB0aGlzLl93YW50c1B1c2hTdGF0ZSAgPSAhIXRoaXMub3B0aW9ucy5wdXNoU3RhdGU7XG4gICAgICB0aGlzLl9oYXNQdXNoU3RhdGUgICAgPSAhISh0aGlzLm9wdGlvbnMucHVzaFN0YXRlICYmIHRoaXMuaGlzdG9yeSAmJiB0aGlzLmhpc3RvcnkucHVzaFN0YXRlKTtcbiAgICAgIHZhciBmcmFnbWVudCAgICAgICAgICA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcbiAgICAgIHZhciBkb2NNb2RlICAgICAgICAgICA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcbiAgICAgIHZhciBvbGRJRSAgICAgICAgICAgICA9IChpc0V4cGxvcmVyLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKSAmJiAoIWRvY01vZGUgfHwgZG9jTW9kZSA8PSA3KSk7XG5cbiAgICAgIC8vIE5vcm1hbGl6ZSByb290IHRvIGFsd2F5cyBpbmNsdWRlIGEgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2guXG4gICAgICB0aGlzLnJvb3QgPSAoJy8nICsgdGhpcy5yb290ICsgJy8nKS5yZXBsYWNlKHJvb3RTdHJpcHBlciwgJy8nKTtcblxuICAgICAgaWYgKG9sZElFICYmIHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB2YXIgZnJhbWUgPSBCYWNrYm9uZS4kKCc8aWZyYW1lIHNyYz1cImphdmFzY3JpcHQ6MFwiIHRhYmluZGV4PVwiLTFcIj4nKTtcbiAgICAgICAgdGhpcy5pZnJhbWUgPSBmcmFtZS5oaWRlKCkuYXBwZW5kVG8oJ2JvZHknKVswXS5jb250ZW50V2luZG93O1xuICAgICAgICB0aGlzLm5hdmlnYXRlKGZyYWdtZW50KTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVwZW5kaW5nIG9uIHdoZXRoZXIgd2UncmUgdXNpbmcgcHVzaFN0YXRlIG9yIGhhc2hlcywgYW5kIHdoZXRoZXJcbiAgICAgIC8vICdvbmhhc2hjaGFuZ2UnIGlzIHN1cHBvcnRlZCwgZGV0ZXJtaW5lIGhvdyB3ZSBjaGVjayB0aGUgVVJMIHN0YXRlLlxuICAgICAgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSkge1xuICAgICAgICBCYWNrYm9uZS4kKHdpbmRvdykub24oJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiAoJ29uaGFzaGNoYW5nZScgaW4gd2luZG93KSAmJiAhb2xkSUUpIHtcbiAgICAgICAgQmFja2JvbmUuJCh3aW5kb3cpLm9uKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB0aGlzLl9jaGVja1VybEludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5jaGVja1VybCwgdGhpcy5pbnRlcnZhbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIERldGVybWluZSBpZiB3ZSBuZWVkIHRvIGNoYW5nZSB0aGUgYmFzZSB1cmwsIGZvciBhIHB1c2hTdGF0ZSBsaW5rXG4gICAgICAvLyBvcGVuZWQgYnkgYSBub24tcHVzaFN0YXRlIGJyb3dzZXIuXG4gICAgICB0aGlzLmZyYWdtZW50ID0gZnJhZ21lbnQ7XG4gICAgICB2YXIgbG9jID0gdGhpcy5sb2NhdGlvbjtcblxuICAgICAgLy8gVHJhbnNpdGlvbiBmcm9tIGhhc2hDaGFuZ2UgdG8gcHVzaFN0YXRlIG9yIHZpY2UgdmVyc2EgaWYgYm90aCBhcmVcbiAgICAgIC8vIHJlcXVlc3RlZC5cbiAgICAgIGlmICh0aGlzLl93YW50c0hhc2hDaGFuZ2UgJiYgdGhpcy5fd2FudHNQdXNoU3RhdGUpIHtcblxuICAgICAgICAvLyBJZiB3ZSd2ZSBzdGFydGVkIG9mZiB3aXRoIGEgcm91dGUgZnJvbSBhIGBwdXNoU3RhdGVgLWVuYWJsZWRcbiAgICAgICAgLy8gYnJvd3NlciwgYnV0IHdlJ3JlIGN1cnJlbnRseSBpbiBhIGJyb3dzZXIgdGhhdCBkb2Vzbid0IHN1cHBvcnQgaXQuLi5cbiAgICAgICAgaWYgKCF0aGlzLl9oYXNQdXNoU3RhdGUgJiYgIXRoaXMuYXRSb290KCkpIHtcbiAgICAgICAgICB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChudWxsLCB0cnVlKTtcbiAgICAgICAgICB0aGlzLmxvY2F0aW9uLnJlcGxhY2UodGhpcy5yb290ICsgJyMnICsgdGhpcy5mcmFnbWVudCk7XG4gICAgICAgICAgLy8gUmV0dXJuIGltbWVkaWF0ZWx5IGFzIGJyb3dzZXIgd2lsbCBkbyByZWRpcmVjdCB0byBuZXcgdXJsXG4gICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgLy8gT3IgaWYgd2UndmUgc3RhcnRlZCBvdXQgd2l0aCBhIGhhc2gtYmFzZWQgcm91dGUsIGJ1dCB3ZSdyZSBjdXJyZW50bHlcbiAgICAgICAgLy8gaW4gYSBicm93c2VyIHdoZXJlIGl0IGNvdWxkIGJlIGBwdXNoU3RhdGVgLWJhc2VkIGluc3RlYWQuLi5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUgJiYgdGhpcy5hdFJvb3QoKSAmJiBsb2MuaGFzaCkge1xuICAgICAgICAgIHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEhhc2goKS5yZXBsYWNlKHJvdXRlU3RyaXBwZXIsICcnKTtcbiAgICAgICAgICB0aGlzLmhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCBkb2N1bWVudC50aXRsZSwgdGhpcy5yb290ICsgdGhpcy5mcmFnbWVudCk7XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMub3B0aW9ucy5zaWxlbnQpIHJldHVybiB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gRGlzYWJsZSBCYWNrYm9uZS5oaXN0b3J5LCBwZXJoYXBzIHRlbXBvcmFyaWx5LiBOb3QgdXNlZnVsIGluIGEgcmVhbCBhcHAsXG4gICAgLy8gYnV0IHBvc3NpYmx5IHVzZWZ1bCBmb3IgdW5pdCB0ZXN0aW5nIFJvdXRlcnMuXG4gICAgc3RvcDogZnVuY3Rpb24oKSB7XG4gICAgICBCYWNrYm9uZS4kKHdpbmRvdykub2ZmKCdwb3BzdGF0ZScsIHRoaXMuY2hlY2tVcmwpLm9mZignaGFzaGNoYW5nZScsIHRoaXMuY2hlY2tVcmwpO1xuICAgICAgaWYgKHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwpIGNsZWFySW50ZXJ2YWwodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCk7XG4gICAgICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gQWRkIGEgcm91dGUgdG8gYmUgdGVzdGVkIHdoZW4gdGhlIGZyYWdtZW50IGNoYW5nZXMuIFJvdXRlcyBhZGRlZCBsYXRlclxuICAgIC8vIG1heSBvdmVycmlkZSBwcmV2aW91cyByb3V0ZXMuXG4gICAgcm91dGU6IGZ1bmN0aW9uKHJvdXRlLCBjYWxsYmFjaykge1xuICAgICAgdGhpcy5oYW5kbGVycy51bnNoaWZ0KHtyb3V0ZTogcm91dGUsIGNhbGxiYWNrOiBjYWxsYmFja30pO1xuICAgIH0sXG5cbiAgICAvLyBDaGVja3MgdGhlIGN1cnJlbnQgVVJMIHRvIHNlZSBpZiBpdCBoYXMgY2hhbmdlZCwgYW5kIGlmIGl0IGhhcyxcbiAgICAvLyBjYWxscyBgbG9hZFVybGAsIG5vcm1hbGl6aW5nIGFjcm9zcyB0aGUgaGlkZGVuIGlmcmFtZS5cbiAgICBjaGVja1VybDogZnVuY3Rpb24oZSkge1xuICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KCk7XG4gICAgICBpZiAoY3VycmVudCA9PT0gdGhpcy5mcmFnbWVudCAmJiB0aGlzLmlmcmFtZSkge1xuICAgICAgICBjdXJyZW50ID0gdGhpcy5nZXRGcmFnbWVudCh0aGlzLmdldEhhc2godGhpcy5pZnJhbWUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50KSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAodGhpcy5pZnJhbWUpIHRoaXMubmF2aWdhdGUoY3VycmVudCk7XG4gICAgICB0aGlzLmxvYWRVcmwoKTtcbiAgICB9LFxuXG4gICAgLy8gQXR0ZW1wdCB0byBsb2FkIHRoZSBjdXJyZW50IFVSTCBmcmFnbWVudC4gSWYgYSByb3V0ZSBzdWNjZWVkcyB3aXRoIGFcbiAgICAvLyBtYXRjaCwgcmV0dXJucyBgdHJ1ZWAuIElmIG5vIGRlZmluZWQgcm91dGVzIG1hdGNoZXMgdGhlIGZyYWdtZW50LFxuICAgIC8vIHJldHVybnMgYGZhbHNlYC5cbiAgICBsb2FkVXJsOiBmdW5jdGlvbihmcmFnbWVudCkge1xuICAgICAgZnJhZ21lbnQgPSB0aGlzLmZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChmcmFnbWVudCk7XG4gICAgICByZXR1cm4gXy5hbnkodGhpcy5oYW5kbGVycywgZnVuY3Rpb24oaGFuZGxlcikge1xuICAgICAgICBpZiAoaGFuZGxlci5yb3V0ZS50ZXN0KGZyYWdtZW50KSkge1xuICAgICAgICAgIGhhbmRsZXIuY2FsbGJhY2soZnJhZ21lbnQpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gU2F2ZSBhIGZyYWdtZW50IGludG8gdGhlIGhhc2ggaGlzdG9yeSwgb3IgcmVwbGFjZSB0aGUgVVJMIHN0YXRlIGlmIHRoZVxuICAgIC8vICdyZXBsYWNlJyBvcHRpb24gaXMgcGFzc2VkLiBZb3UgYXJlIHJlc3BvbnNpYmxlIGZvciBwcm9wZXJseSBVUkwtZW5jb2RpbmdcbiAgICAvLyB0aGUgZnJhZ21lbnQgaW4gYWR2YW5jZS5cbiAgICAvL1xuICAgIC8vIFRoZSBvcHRpb25zIG9iamVjdCBjYW4gY29udGFpbiBgdHJpZ2dlcjogdHJ1ZWAgaWYgeW91IHdpc2ggdG8gaGF2ZSB0aGVcbiAgICAvLyByb3V0ZSBjYWxsYmFjayBiZSBmaXJlZCAobm90IHVzdWFsbHkgZGVzaXJhYmxlKSwgb3IgYHJlcGxhY2U6IHRydWVgLCBpZlxuICAgIC8vIHlvdSB3aXNoIHRvIG1vZGlmeSB0aGUgY3VycmVudCBVUkwgd2l0aG91dCBhZGRpbmcgYW4gZW50cnkgdG8gdGhlIGhpc3RvcnkuXG4gICAgbmF2aWdhdGU6IGZ1bmN0aW9uKGZyYWdtZW50LCBvcHRpb25zKSB7XG4gICAgICBpZiAoIUhpc3Rvcnkuc3RhcnRlZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgaWYgKCFvcHRpb25zIHx8IG9wdGlvbnMgPT09IHRydWUpIG9wdGlvbnMgPSB7dHJpZ2dlcjogISFvcHRpb25zfTtcblxuICAgICAgdmFyIHVybCA9IHRoaXMucm9vdCArIChmcmFnbWVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoZnJhZ21lbnQgfHwgJycpKTtcblxuICAgICAgLy8gU3RyaXAgdGhlIGhhc2ggZm9yIG1hdGNoaW5nLlxuICAgICAgZnJhZ21lbnQgPSBmcmFnbWVudC5yZXBsYWNlKHBhdGhTdHJpcHBlciwgJycpO1xuXG4gICAgICBpZiAodGhpcy5mcmFnbWVudCA9PT0gZnJhZ21lbnQpIHJldHVybjtcbiAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudDtcblxuICAgICAgLy8gRG9uJ3QgaW5jbHVkZSBhIHRyYWlsaW5nIHNsYXNoIG9uIHRoZSByb290LlxuICAgICAgaWYgKGZyYWdtZW50ID09PSAnJyAmJiB1cmwgIT09ICcvJykgdXJsID0gdXJsLnNsaWNlKDAsIC0xKTtcblxuICAgICAgLy8gSWYgcHVzaFN0YXRlIGlzIGF2YWlsYWJsZSwgd2UgdXNlIGl0IHRvIHNldCB0aGUgZnJhZ21lbnQgYXMgYSByZWFsIFVSTC5cbiAgICAgIGlmICh0aGlzLl9oYXNQdXNoU3RhdGUpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5W29wdGlvbnMucmVwbGFjZSA/ICdyZXBsYWNlU3RhdGUnIDogJ3B1c2hTdGF0ZSddKHt9LCBkb2N1bWVudC50aXRsZSwgdXJsKTtcblxuICAgICAgLy8gSWYgaGFzaCBjaGFuZ2VzIGhhdmVuJ3QgYmVlbiBleHBsaWNpdGx5IGRpc2FibGVkLCB1cGRhdGUgdGhlIGhhc2hcbiAgICAgIC8vIGZyYWdtZW50IHRvIHN0b3JlIGhpc3RvcnkuXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSkge1xuICAgICAgICB0aGlzLl91cGRhdGVIYXNoKHRoaXMubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuICAgICAgICBpZiAodGhpcy5pZnJhbWUgJiYgKGZyYWdtZW50ICE9PSB0aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpKSkge1xuICAgICAgICAgIC8vIE9wZW5pbmcgYW5kIGNsb3NpbmcgdGhlIGlmcmFtZSB0cmlja3MgSUU3IGFuZCBlYXJsaWVyIHRvIHB1c2ggYVxuICAgICAgICAgIC8vIGhpc3RvcnkgZW50cnkgb24gaGFzaC10YWcgY2hhbmdlLiAgV2hlbiByZXBsYWNlIGlzIHRydWUsIHdlIGRvbid0XG4gICAgICAgICAgLy8gd2FudCB0aGlzLlxuICAgICAgICAgIGlmKCFvcHRpb25zLnJlcGxhY2UpIHRoaXMuaWZyYW1lLmRvY3VtZW50Lm9wZW4oKS5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUhhc2godGhpcy5pZnJhbWUubG9jYXRpb24sIGZyYWdtZW50LCBvcHRpb25zLnJlcGxhY2UpO1xuICAgICAgICB9XG5cbiAgICAgIC8vIElmIHlvdSd2ZSB0b2xkIHVzIHRoYXQgeW91IGV4cGxpY2l0bHkgZG9uJ3Qgd2FudCBmYWxsYmFjayBoYXNoY2hhbmdlLVxuICAgICAgLy8gYmFzZWQgaGlzdG9yeSwgdGhlbiBgbmF2aWdhdGVgIGJlY29tZXMgYSBwYWdlIHJlZnJlc2guXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5hc3NpZ24odXJsKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRpb25zLnRyaWdnZXIpIHJldHVybiB0aGlzLmxvYWRVcmwoZnJhZ21lbnQpO1xuICAgIH0sXG5cbiAgICAvLyBVcGRhdGUgdGhlIGhhc2ggbG9jYXRpb24sIGVpdGhlciByZXBsYWNpbmcgdGhlIGN1cnJlbnQgZW50cnksIG9yIGFkZGluZ1xuICAgIC8vIGEgbmV3IG9uZSB0byB0aGUgYnJvd3NlciBoaXN0b3J5LlxuICAgIF91cGRhdGVIYXNoOiBmdW5jdGlvbihsb2NhdGlvbiwgZnJhZ21lbnQsIHJlcGxhY2UpIHtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIHZhciBocmVmID0gbG9jYXRpb24uaHJlZi5yZXBsYWNlKC8oamF2YXNjcmlwdDp8IykuKiQvLCAnJyk7XG4gICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoaHJlZiArICcjJyArIGZyYWdtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFNvbWUgYnJvd3NlcnMgcmVxdWlyZSB0aGF0IGBoYXNoYCBjb250YWlucyBhIGxlYWRpbmcgIy5cbiAgICAgICAgbG9jYXRpb24uaGFzaCA9ICcjJyArIGZyYWdtZW50O1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICAvLyBDcmVhdGUgdGhlIGRlZmF1bHQgQmFja2JvbmUuaGlzdG9yeS5cbiAgQmFja2JvbmUuaGlzdG9yeSA9IG5ldyBIaXN0b3J5O1xuXG4gIC8vIEhlbHBlcnNcbiAgLy8gLS0tLS0tLVxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb3JyZWN0bHkgc2V0IHVwIHRoZSBwcm90b3R5cGUgY2hhaW4sIGZvciBzdWJjbGFzc2VzLlxuICAvLyBTaW1pbGFyIHRvIGBnb29nLmluaGVyaXRzYCwgYnV0IHVzZXMgYSBoYXNoIG9mIHByb3RvdHlwZSBwcm9wZXJ0aWVzIGFuZFxuICAvLyBjbGFzcyBwcm9wZXJ0aWVzIHRvIGJlIGV4dGVuZGVkLlxuICB2YXIgZXh0ZW5kID0gZnVuY3Rpb24ocHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHtcbiAgICB2YXIgcGFyZW50ID0gdGhpcztcbiAgICB2YXIgY2hpbGQ7XG5cbiAgICAvLyBUaGUgY29uc3RydWN0b3IgZnVuY3Rpb24gZm9yIHRoZSBuZXcgc3ViY2xhc3MgaXMgZWl0aGVyIGRlZmluZWQgYnkgeW91XG4gICAgLy8gKHRoZSBcImNvbnN0cnVjdG9yXCIgcHJvcGVydHkgaW4geW91ciBgZXh0ZW5kYCBkZWZpbml0aW9uKSwgb3IgZGVmYXVsdGVkXG4gICAgLy8gYnkgdXMgdG8gc2ltcGx5IGNhbGwgdGhlIHBhcmVudCdzIGNvbnN0cnVjdG9yLlxuICAgIGlmIChwcm90b1Byb3BzICYmIF8uaGFzKHByb3RvUHJvcHMsICdjb25zdHJ1Y3RvcicpKSB7XG4gICAgICBjaGlsZCA9IHByb3RvUHJvcHMuY29uc3RydWN0b3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNoaWxkID0gZnVuY3Rpb24oKXsgcmV0dXJuIHBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9O1xuICAgIH1cblxuICAgIC8vIEFkZCBzdGF0aWMgcHJvcGVydGllcyB0byB0aGUgY29uc3RydWN0b3IgZnVuY3Rpb24sIGlmIHN1cHBsaWVkLlxuICAgIF8uZXh0ZW5kKGNoaWxkLCBwYXJlbnQsIHN0YXRpY1Byb3BzKTtcblxuICAgIC8vIFNldCB0aGUgcHJvdG90eXBlIGNoYWluIHRvIGluaGVyaXQgZnJvbSBgcGFyZW50YCwgd2l0aG91dCBjYWxsaW5nXG4gICAgLy8gYHBhcmVudGAncyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICB2YXIgU3Vycm9nYXRlID0gZnVuY3Rpb24oKXsgdGhpcy5jb25zdHJ1Y3RvciA9IGNoaWxkOyB9O1xuICAgIFN1cnJvZ2F0ZS5wcm90b3R5cGUgPSBwYXJlbnQucHJvdG90eXBlO1xuICAgIGNoaWxkLnByb3RvdHlwZSA9IG5ldyBTdXJyb2dhdGU7XG5cbiAgICAvLyBBZGQgcHJvdG90eXBlIHByb3BlcnRpZXMgKGluc3RhbmNlIHByb3BlcnRpZXMpIHRvIHRoZSBzdWJjbGFzcyxcbiAgICAvLyBpZiBzdXBwbGllZC5cbiAgICBpZiAocHJvdG9Qcm9wcykgXy5leHRlbmQoY2hpbGQucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcblxuICAgIC8vIFNldCBhIGNvbnZlbmllbmNlIHByb3BlcnR5IGluIGNhc2UgdGhlIHBhcmVudCdzIHByb3RvdHlwZSBpcyBuZWVkZWRcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC5fX3N1cGVyX18gPSBwYXJlbnQucHJvdG90eXBlO1xuXG4gICAgcmV0dXJuIGNoaWxkO1xuICB9O1xuXG4gIC8vIFNldCB1cCBpbmhlcml0YW5jZSBmb3IgdGhlIG1vZGVsLCBjb2xsZWN0aW9uLCByb3V0ZXIsIHZpZXcgYW5kIGhpc3RvcnkuXG4gIE1vZGVsLmV4dGVuZCA9IENvbGxlY3Rpb24uZXh0ZW5kID0gUm91dGVyLmV4dGVuZCA9IFZpZXcuZXh0ZW5kID0gSGlzdG9yeS5leHRlbmQgPSBleHRlbmQ7XG5cbiAgLy8gVGhyb3cgYW4gZXJyb3Igd2hlbiBhIFVSTCBpcyBuZWVkZWQsIGFuZCBub25lIGlzIHN1cHBsaWVkLlxuICB2YXIgdXJsRXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgXCJ1cmxcIiBwcm9wZXJ0eSBvciBmdW5jdGlvbiBtdXN0IGJlIHNwZWNpZmllZCcpO1xuICB9O1xuXG4gIC8vIFdyYXAgYW4gb3B0aW9uYWwgZXJyb3IgY2FsbGJhY2sgd2l0aCBhIGZhbGxiYWNrIGVycm9yIGV2ZW50LlxuICB2YXIgd3JhcEVycm9yID0gZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICB2YXIgZXJyb3IgPSBvcHRpb25zLmVycm9yO1xuICAgIG9wdGlvbnMuZXJyb3IgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICBpZiAoZXJyb3IpIGVycm9yKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIG1vZGVsLnRyaWdnZXIoJ2Vycm9yJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIEJhY2tib25lO1xuXG59KSk7XG4iLCJ2YXIgbG9va3VwID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXG47KGZ1bmN0aW9uIChleHBvcnRzKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuICB2YXIgQXJyID0gKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJylcbiAgICA/IFVpbnQ4QXJyYXlcbiAgICA6IEFycmF5XG5cblx0dmFyIFBMVVMgICA9ICcrJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSCAgPSAnLycuY2hhckNvZGVBdCgwKVxuXHR2YXIgTlVNQkVSID0gJzAnLmNoYXJDb2RlQXQoMClcblx0dmFyIExPV0VSICA9ICdhJy5jaGFyQ29kZUF0KDApXG5cdHZhciBVUFBFUiAgPSAnQScuY2hhckNvZGVBdCgwKVxuXHR2YXIgUExVU19VUkxfU0FGRSA9ICctJy5jaGFyQ29kZUF0KDApXG5cdHZhciBTTEFTSF9VUkxfU0FGRSA9ICdfJy5jaGFyQ29kZUF0KDApXG5cblx0ZnVuY3Rpb24gZGVjb2RlIChlbHQpIHtcblx0XHR2YXIgY29kZSA9IGVsdC5jaGFyQ29kZUF0KDApXG5cdFx0aWYgKGNvZGUgPT09IFBMVVMgfHxcblx0XHQgICAgY29kZSA9PT0gUExVU19VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MiAvLyAnKydcblx0XHRpZiAoY29kZSA9PT0gU0xBU0ggfHxcblx0XHQgICAgY29kZSA9PT0gU0xBU0hfVVJMX1NBRkUpXG5cdFx0XHRyZXR1cm4gNjMgLy8gJy8nXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIpXG5cdFx0XHRyZXR1cm4gLTEgLy9ubyBtYXRjaFxuXHRcdGlmIChjb2RlIDwgTlVNQkVSICsgMTApXG5cdFx0XHRyZXR1cm4gY29kZSAtIE5VTUJFUiArIDI2ICsgMjZcblx0XHRpZiAoY29kZSA8IFVQUEVSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIFVQUEVSXG5cdFx0aWYgKGNvZGUgPCBMT1dFUiArIDI2KVxuXHRcdFx0cmV0dXJuIGNvZGUgLSBMT1dFUiArIDI2XG5cdH1cblxuXHRmdW5jdGlvbiBiNjRUb0J5dGVBcnJheSAoYjY0KSB7XG5cdFx0dmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnJcblxuXHRcdGlmIChiNjQubGVuZ3RoICUgNCA+IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpXG5cdFx0fVxuXG5cdFx0Ly8gdGhlIG51bWJlciBvZiBlcXVhbCBzaWducyAocGxhY2UgaG9sZGVycylcblx0XHQvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG5cdFx0Ly8gcmVwcmVzZW50IG9uZSBieXRlXG5cdFx0Ly8gaWYgdGhlcmUgaXMgb25seSBvbmUsIHRoZW4gdGhlIHRocmVlIGNoYXJhY3RlcnMgYmVmb3JlIGl0IHJlcHJlc2VudCAyIGJ5dGVzXG5cdFx0Ly8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuXHRcdHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cdFx0cGxhY2VIb2xkZXJzID0gJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDIpID8gMiA6ICc9JyA9PT0gYjY0LmNoYXJBdChsZW4gLSAxKSA/IDEgOiAwXG5cblx0XHQvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcblx0XHRhcnIgPSBuZXcgQXJyKGI2NC5sZW5ndGggKiAzIC8gNCAtIHBsYWNlSG9sZGVycylcblxuXHRcdC8vIGlmIHRoZXJlIGFyZSBwbGFjZWhvbGRlcnMsIG9ubHkgZ2V0IHVwIHRvIHRoZSBsYXN0IGNvbXBsZXRlIDQgY2hhcnNcblx0XHRsID0gcGxhY2VIb2xkZXJzID4gMCA/IGI2NC5sZW5ndGggLSA0IDogYjY0Lmxlbmd0aFxuXG5cdFx0dmFyIEwgPSAwXG5cblx0XHRmdW5jdGlvbiBwdXNoICh2KSB7XG5cdFx0XHRhcnJbTCsrXSA9IHZcblx0XHR9XG5cblx0XHRmb3IgKGkgPSAwLCBqID0gMDsgaSA8IGw7IGkgKz0gNCwgaiArPSAzKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDE4KSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDEyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMikpIDw8IDYpIHwgZGVjb2RlKGI2NC5jaGFyQXQoaSArIDMpKVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwMDApID4+IDE2KVxuXHRcdFx0cHVzaCgodG1wICYgMHhGRjAwKSA+PiA4KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH1cblxuXHRcdGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA+PiA0KVxuXHRcdFx0cHVzaCh0bXAgJiAweEZGKVxuXHRcdH0gZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG5cdFx0XHR0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDEwKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDQpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPj4gMilcblx0XHRcdHB1c2goKHRtcCA+PiA4KSAmIDB4RkYpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFyclxuXHR9XG5cblx0ZnVuY3Rpb24gdWludDhUb0Jhc2U2NCAodWludDgpIHtcblx0XHR2YXIgaSxcblx0XHRcdGV4dHJhQnl0ZXMgPSB1aW50OC5sZW5ndGggJSAzLCAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuXHRcdFx0b3V0cHV0ID0gXCJcIixcblx0XHRcdHRlbXAsIGxlbmd0aFxuXG5cdFx0ZnVuY3Rpb24gZW5jb2RlIChudW0pIHtcblx0XHRcdHJldHVybiBsb29rdXAuY2hhckF0KG51bSlcblx0XHR9XG5cblx0XHRmdW5jdGlvbiB0cmlwbGV0VG9CYXNlNjQgKG51bSkge1xuXHRcdFx0cmV0dXJuIGVuY29kZShudW0gPj4gMTggJiAweDNGKSArIGVuY29kZShudW0gPj4gMTIgJiAweDNGKSArIGVuY29kZShudW0gPj4gNiAmIDB4M0YpICsgZW5jb2RlKG51bSAmIDB4M0YpXG5cdFx0fVxuXG5cdFx0Ly8gZ28gdGhyb3VnaCB0aGUgYXJyYXkgZXZlcnkgdGhyZWUgYnl0ZXMsIHdlJ2xsIGRlYWwgd2l0aCB0cmFpbGluZyBzdHVmZiBsYXRlclxuXHRcdGZvciAoaSA9IDAsIGxlbmd0aCA9IHVpbnQ4Lmxlbmd0aCAtIGV4dHJhQnl0ZXM7IGkgPCBsZW5ndGg7IGkgKz0gMykge1xuXHRcdFx0dGVtcCA9ICh1aW50OFtpXSA8PCAxNikgKyAodWludDhbaSArIDFdIDw8IDgpICsgKHVpbnQ4W2kgKyAyXSlcblx0XHRcdG91dHB1dCArPSB0cmlwbGV0VG9CYXNlNjQodGVtcClcblx0XHR9XG5cblx0XHQvLyBwYWQgdGhlIGVuZCB3aXRoIHplcm9zLCBidXQgbWFrZSBzdXJlIHRvIG5vdCBmb3JnZXQgdGhlIGV4dHJhIGJ5dGVzXG5cdFx0c3dpdGNoIChleHRyYUJ5dGVzKSB7XG5cdFx0XHRjYXNlIDE6XG5cdFx0XHRcdHRlbXAgPSB1aW50OFt1aW50OC5sZW5ndGggLSAxXVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKHRlbXAgPj4gMilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPT0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRjYXNlIDI6XG5cdFx0XHRcdHRlbXAgPSAodWludDhbdWludDgubGVuZ3RoIC0gMl0gPDwgOCkgKyAodWludDhbdWludDgubGVuZ3RoIC0gMV0pXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAxMClcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA+PiA0KSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUoKHRlbXAgPDwgMikgJiAweDNGKVxuXHRcdFx0XHRvdXRwdXQgKz0gJz0nXG5cdFx0XHRcdGJyZWFrXG5cdFx0fVxuXG5cdFx0cmV0dXJuIG91dHB1dFxuXHR9XG5cblx0ZXhwb3J0cy50b0J5dGVBcnJheSA9IGI2NFRvQnl0ZUFycmF5XG5cdGV4cG9ydHMuZnJvbUJ5dGVBcnJheSA9IHVpbnQ4VG9CYXNlNjRcbn0odHlwZW9mIGV4cG9ydHMgPT09ICd1bmRlZmluZWQnID8gKHRoaXMuYmFzZTY0anMgPSB7fSkgOiBleHBvcnRzKSlcbiIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxudmFyIHJvb3RQYXJlbnQgPSB7fVxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIFNhZmFyaSA1LTcgbGFja3Mgc3VwcG9ydCBmb3IgY2hhbmdpbmcgdGhlIGBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yYCBwcm9wZXJ0eVxuICogICAgIG9uIG9iamVjdHMuXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICBmdW5jdGlvbiBCYXIgKCkge31cbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfVxuICAgIGFyci5jb25zdHJ1Y3RvciA9IEJhclxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIGFyci5jb25zdHJ1Y3RvciA9PT0gQmFyICYmIC8vIGNvbnN0cnVjdG9yIGNhbiBiZSBzZXRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuLyoqXG4gKiBDbGFzczogQnVmZmVyXG4gKiA9PT09PT09PT09PT09XG4gKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBhcmUgYXVnbWVudGVkXG4gKiB3aXRoIGZ1bmN0aW9uIHByb3BlcnRpZXMgZm9yIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBBUEkgZnVuY3Rpb25zLiBXZSB1c2VcbiAqIGBVaW50OEFycmF5YCBzbyB0aGF0IHNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0IHJldHVybnNcbiAqIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIEJ5IGF1Z21lbnRpbmcgdGhlIGluc3RhbmNlcywgd2UgY2FuIGF2b2lkIG1vZGlmeWluZyB0aGUgYFVpbnQ4QXJyYXlgXG4gKiBwcm90b3R5cGUuXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSlcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcpXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpcy5sZW5ndGggPSAwXG4gICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWRcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZnJvbU51bWJlcih0aGlzLCBhcmcpXG4gIH1cblxuICAvLyBTbGlnaHRseSBsZXNzIGNvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGlzLCBhcmcsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogJ3V0ZjgnKVxuICB9XG5cbiAgLy8gVW51c3VhbC5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhpcywgYXJnKVxufVxuXG5mdW5jdGlvbiBmcm9tTnVtYmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChsZW5ndGgpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIC8vIEFzc3VtcHRpb246IGJ5dGVMZW5ndGgoKSByZXR1cm4gdmFsdWUgaXMgYWx3YXlzIDwga01heExlbmd0aC5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cbiAgdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmplY3QpKSByZXR1cm4gZnJvbUJ1ZmZlcih0aGF0LCBvYmplY3QpXG5cbiAgaWYgKGlzQXJyYXkob2JqZWN0KSkgcmV0dXJuIGZyb21BcnJheSh0aGF0LCBvYmplY3QpXG5cbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAob2JqZWN0LmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gZnJvbVR5cGVkQXJyYXkodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgfVxuXG4gIGlmIChvYmplY3QubGVuZ3RoKSByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmplY3QpXG5cbiAgcmV0dXJuIGZyb21Kc29uT2JqZWN0KHRoYXQsIG9iamVjdClcbn1cblxuZnVuY3Rpb24gZnJvbUJ1ZmZlciAodGhhdCwgYnVmZmVyKSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGJ1ZmZlci5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBidWZmZXIuY29weSh0aGF0LCAwLCAwLCBsZW5ndGgpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIER1cGxpY2F0ZSBvZiBmcm9tQXJyYXkoKSB0byBrZWVwIGZyb21BcnJheSgpIG1vbm9tb3JwaGljLlxuZnVuY3Rpb24gZnJvbVR5cGVkQXJyYXkgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIC8vIFRydW5jYXRpbmcgdGhlIGVsZW1lbnRzIGlzIHByb2JhYmx5IG5vdCB3aGF0IHBlb3BsZSBleHBlY3QgZnJvbSB0eXBlZFxuICAvLyBhcnJheXMgd2l0aCBCWVRFU19QRVJfRUxFTUVOVCA+IDEgYnV0IGl0J3MgY29tcGF0aWJsZSB3aXRoIHRoZSBiZWhhdmlvclxuICAvLyBvZiB0aGUgb2xkIEJ1ZmZlciBjb25zdHJ1Y3Rvci5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXkpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgYXJyYXkuYnl0ZUxlbmd0aFxuICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbVR5cGVkQXJyYXkodGhhdCwgbmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vLyBEZXNlcmlhbGl6ZSB7IHR5cGU6ICdCdWZmZXInLCBkYXRhOiBbMSwyLDMsLi4uXSB9IGludG8gYSBCdWZmZXIgb2JqZWN0LlxuLy8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy5cbmZ1bmN0aW9uIGZyb21Kc29uT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgdmFyIGFycmF5XG4gIHZhciBsZW5ndGggPSAwXG5cbiAgaWYgKG9iamVjdC50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iamVjdC5kYXRhKSkge1xuICAgIGFycmF5ID0gb2JqZWN0LmRhdGFcbiAgICBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIH1cbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbn0gZWxzZSB7XG4gIC8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlXG4gIEJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG4gIEJ1ZmZlci5wcm90b3R5cGUucGFyZW50ID0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGFsbG9jYXRlICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShsZW5ndGgpKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICAgIHRoYXQuX2lzQnVmZmVyID0gdHJ1ZVxuICB9XG5cbiAgdmFyIGZyb21Qb29sID0gbGVuZ3RoICE9PSAwICYmIGxlbmd0aCA8PSBCdWZmZXIucG9vbFNpemUgPj4+IDFcbiAgaWYgKGZyb21Qb29sKSB0aGF0LnBhcmVudCA9IHJvb3RQYXJlbnRcblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKHN1YmplY3QsIGVuY29kaW5nKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSkgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuICBkZWxldGUgYnVmLnBhcmVudFxuICByZXR1cm4gYnVmXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICB2YXIgaSA9IDBcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrXG5cbiAgICArK2lcbiAgfVxuXG4gIGlmIChpICE9PSBsZW4pIHtcbiAgICB4ID0gYVtpXVxuICAgIHkgPSBiW2ldXG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3Jhdyc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xpc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzLicpXG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXVxuICAgIGl0ZW0uY29weShidWYsIHBvcylcbiAgICBwb3MgKz0gaXRlbS5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgLy8gRGVwcmVjYXRlZFxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgIGNhc2UgJ3Jhd3MnOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIHN0YXJ0ID0gc3RhcnQgfCAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCB8IDBcblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJydcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIDBcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCkge1xuICBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIGJ5dGVPZmZzZXQgPj49IDBcblxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMVxuICBpZiAoYnl0ZU9mZnNldCA+PSB0aGlzLmxlbmd0aCkgcmV0dXJuIC0xXG5cbiAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBNYXRoLm1heCh0aGlzLmxlbmd0aCArIGJ5dGVPZmZzZXQsIDApXG5cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHJldHVybiAtMSAvLyBzcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZyBhbHdheXMgZmFpbHNcbiAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCBbIHZhbCBdLCBieXRlT2Zmc2V0KVxuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCkge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKHZhciBpID0gMDsgYnl0ZU9mZnNldCArIGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcnJbYnl0ZU9mZnNldCArIGldID09PSB2YWxbZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXhdKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsLmxlbmd0aCkgcmV0dXJuIGJ5dGVPZmZzZXQgKyBmb3VuZEluZGV4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG4vLyBgZ2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAob2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy5yZWFkVUludDgob2Zmc2V0KVxufVxuXG4vLyBgc2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAodiwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy53cml0ZVVJbnQ4KHYsIG9mZnNldClcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdmFyIHN3YXAgPSBlbmNvZGluZ1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgb2Zmc2V0ID0gbGVuZ3RoIHwgMFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXNcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldFN0YXJ0KVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gIGlmICghdmFsdWUpIHZhbHVlID0gMFxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQpIGVuZCA9IHRoaXMubGVuZ3RoXG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKVxuXG4gIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCBvdXQgb2YgYm91bmRzJylcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSB2YWx1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5QnVmZmVyYCB3aXRoIHRoZSAqY29waWVkKiBtZW1vcnkgb2YgdGhlIGJ1ZmZlciBpbnN0YW5jZS5cbiAqIEFkZGVkIGluIE5vZGUgMC4xMi4gT25seSBhdmFpbGFibGUgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IEFycmF5QnVmZmVyLlxuICovXG5CdWZmZXIucHJvdG90eXBlLnRvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiB0b0FycmF5QnVmZmVyICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiBfYXVnbWVudCAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgc2V0IG1ldGhvZCBiZWZvcmUgb3ZlcndyaXRpbmdcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBhcnIuZ2V0ID0gQlAuZ2V0XG4gIGFyci5zZXQgPSBCUC5zZXRcblxuICBhcnIud3JpdGUgPSBCUC53cml0ZVxuICBhcnIudG9TdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9Mb2NhbGVTdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9KU09OID0gQlAudG9KU09OXG4gIGFyci5lcXVhbHMgPSBCUC5lcXVhbHNcbiAgYXJyLmNvbXBhcmUgPSBCUC5jb21wYXJlXG4gIGFyci5pbmRleE9mID0gQlAuaW5kZXhPZlxuICBhcnIuY29weSA9IEJQLmNvcHlcbiAgYXJyLnNsaWNlID0gQlAuc2xpY2VcbiAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG4gIGFyci5yZWFkVUludEJFID0gQlAucmVhZFVJbnRCRVxuICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG4gIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcbiAgYXJyLnJlYWRVSW50MTZCRSA9IEJQLnJlYWRVSW50MTZCRVxuICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG4gIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcbiAgYXJyLnJlYWRJbnRMRSA9IEJQLnJlYWRJbnRMRVxuICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG4gIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG4gIGFyci5yZWFkSW50MTZMRSA9IEJQLnJlYWRJbnQxNkxFXG4gIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG4gIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG4gIGFyci5yZWFkSW50MzJCRSA9IEJQLnJlYWRJbnQzMkJFXG4gIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG4gIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG4gIGFyci5yZWFkRG91YmxlTEUgPSBCUC5yZWFkRG91YmxlTEVcbiAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcbiAgYXJyLndyaXRlVUludExFID0gQlAud3JpdGVVSW50TEVcbiAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcbiAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG4gIGFyci53cml0ZVVJbnQxNkJFID0gQlAud3JpdGVVSW50MTZCRVxuICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcbiAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG4gIGFyci53cml0ZUludExFID0gQlAud3JpdGVJbnRMRVxuICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcbiAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuICBhcnIud3JpdGVJbnQxNkxFID0gQlAud3JpdGVJbnQxNkxFXG4gIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcbiAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuICBhcnIud3JpdGVJbnQzMkJFID0gQlAud3JpdGVJbnQzMkJFXG4gIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcbiAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuICBhcnIud3JpdGVEb3VibGVMRSA9IEJQLndyaXRlRG91YmxlTEVcbiAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG4gIGFyci5maWxsID0gQlAuZmlsbFxuICBhcnIuaW5zcGVjdCA9IEJQLmluc3BlY3RcbiAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cbiAgcmV0dXJuIGFyclxufVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cbiIsIi8qKlxuICogV3JhcHBlcnMgYXJvdW5kIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCB0byBmYWNpbGl0YXRlIHRlc3RpbmcgYW5kIGNsaWNrLXRyYWNraW5nLlxuICpcbiAqIFRoaXMgYWRkcyB0aGUgY29uY2VwdCBvZiBhIFwiZGF0YSBzdGFja1wiIHRvIHRoZSBjYW52YXMuIFdoZW4gc2hhcGVzIGFyZVxuICogZHJhd24sIHRoZXkgcmVwcmVzZW50IHRoZSBvYmplY3RzIGN1cnJlbnRseSBvbiB0aGUgc3RhY2suIFRoaXMgc3RhY2sgY2FuIGJlXG4gKiBtYW5pcHVsYXRlZCB1c2luZyBjb250ZXh0LnB1c2hPYmplY3QoKSBhbmQgY29udGV4dC5wb3BPYmplY3QoKS5cbiAqXG4gKiBTZWUgdGVzdCBmaWxlIGZvciBzYW1wbGUgdXNhZ2UuXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuXG4ndXNlIHN0cmljdCc7XG5cbi8vIFR1cm4gb2JqIGludG8gYSBwcm94eSBmb3IgdGFyZ2V0LiBUaGlzIGZvcndhcmRzIGJvdGggZnVuY3Rpb24gY2FsbHMgYW5kXG4vLyBwcm9wZXJ0eSBzZXR0ZXJzL2dldHRlcnMuXG5mdW5jdGlvbiBmb3J3YXJkKG9iaiwgdGFyZ2V0LCBvbmx5QWNjZXNzb3JzKSB7XG4gIG9ubHlBY2Nlc3NvcnMgPSBvbmx5QWNjZXNzb3JzIHx8IGZhbHNlO1xuICBmb3IgKHZhciBrIGluIHRhcmdldCkge1xuICAgIChmdW5jdGlvbihrKSB7XG4gICAgICBpZiAodHlwZW9mKHRhcmdldFtrXSkgPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBpZiAoIW9ubHlBY2Nlc3NvcnMpIHtcbiAgICAgICAgICBvYmpba10gPSAgdGFyZ2V0W2tdLmJpbmQodGFyZ2V0KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgaywge1xuICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0YXJnZXRba107IH0sXG4gICAgICAgICAgc2V0OiBmdW5jdGlvbih4KSB7IHRhcmdldFtrXSA9IHg7IH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSkoayk7XG4gIH1cbn1cblxuLy8gVGhlIG1vc3QgYmFzaWMgZGF0YS1hd2FyZSBjYW52YXMuIFRoaXMgdGhyb3dzIGF3YXkgYWxsIGRhdGEgaW5mb3JtYXRpb24uXG4vLyBVc2UgdGhpcyBmb3IgYmFzaWMgZHJhd2luZ1xuZnVuY3Rpb24gRGF0YUNvbnRleHQoY3R4KSB7XG4gIGZvcndhcmQodGhpcywgY3R4KTtcbiAgdGhpcy5wdXNoT2JqZWN0ID0gdGhpcy5wb3BPYmplY3QgPSB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKSB7fTtcbn1cblxudmFyIHN0dWJHZXREYXRhQ29udGV4dCA9IG51bGw7XG5cbi8qKlxuICogR2V0IGEgRGF0YUNvbnRleHQgZm9yIHRoZSBidWlsdC1pbiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuXG4gKlxuICogVGhpcyBjYWNoZXMgRGF0YUNvbnRleHRzIGFuZCBmYWNpbGl0YXRlcyBzdHViYmluZyBpbiB0ZXN0cy5cbiAqXG4gKiBBcyBhIGNvbnZlbmllbmNlLCB5b3UgbWF5IHBhc3MgaW4gYSBDYW52YXMgZWxlbWVudCBpbnN0ZWFkIG9mIGFcbiAqIENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC4gZGF0YS1jYW52YXMgd2lsbCBjYWxsIGdldENvbnRleHQoJzJkJykgZm9yIHlvdS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0YUNvbnRleHQoY3R4T3JDYW52YXMpIHtcbiAgaWYgKGN0eE9yQ2FudmFzIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICByZXR1cm4gZ2V0RGF0YUNvbnRleHQoY3R4T3JDYW52YXMuZ2V0Q29udGV4dCgnMmQnKSk7XG4gIH1cblxuICB2YXIgY3R4ID0gY3R4T3JDYW52YXM7XG4gIGlmIChzdHViR2V0RGF0YUNvbnRleHQpIHtcbiAgICByZXR1cm4gc3R1YkdldERhdGFDb250ZXh0KGN0eCk7XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZXREYXRhQ29udGV4dC5jYWNoZS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHBhaXIgPSBnZXREYXRhQ29udGV4dC5jYWNoZVtpXTtcbiAgICAgIGlmIChwYWlyWzBdID09IGN0eCkgcmV0dXJuIHBhaXJbMV07XG4gICAgfVxuICAgIHZhciBkdHggPSBuZXcgRGF0YUNvbnRleHQoY3R4KTtcbiAgICBnZXREYXRhQ29udGV4dC5jYWNoZS5wdXNoKFtjdHgsIGR0eF0pO1xuICAgIHJldHVybiBkdHg7XG4gIH1cbn1cbmdldERhdGFDb250ZXh0LmNhY2hlID0gW107ICAvLyAoQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBEYXRhQ29udGV4dCkgcGFpcnNcblxuXG4vKipcbiAqIEEgY29udGV4dCB3aGljaCByZWNvcmRzIHdoYXQgaXQgZG9lcyAoZm9yIHRlc3RpbmcpLlxuICpcbiAqIFRoaXMgcHJveGllcyBhbGwgY2FsbHMgdG8gdGhlIHVuZGVybHlpbmcgY2FudmFzLCBzbyB0aGV5IGRvIHByb2R1Y2UgdmlzaWJsZVxuICogZHJhd2luZy4gVXNlIGBkcmF3bk9iamVjdHNXaXRoYCBvciBgY2FsbHNgIHRvIHRlc3Qgd2hhdCB3YXMgZHJhd24uXG4gKi9cbmZ1bmN0aW9uIFJlY29yZGluZ0NvbnRleHQoY3R4KSB7XG4gIGZvcndhcmQodGhpcywgY3R4LCB0cnVlIC8qIG9ubHkgZm93YXJkIGFjY2Vzc29ycyAqLyk7XG5cbiAgdmFyIGNhbGxzID0gW107XG4gIHRoaXMuY2FsbHMgPSBjYWxscztcblxuICBmb3IgKHZhciBrIGluIGN0eCkge1xuICAgIChmdW5jdGlvbihrKSB7XG4gICAgICBpZiAodHlwZW9mKGN0eFtrXSkgIT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xuICAgICAgdGhpc1trXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUT0RPOiByZWNvcmQgY3VycmVudCBkcmF3aW5nIHN0eWxlXG4gICAgICAgIHZhciBhcmdzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgY2FsbHMucHVzaChba10uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgcmV0dXJuIGN0eFtrXS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH0pLmJpbmQodGhpcykoayk7XG4gIH1cblxuICB0aGlzLnB1c2hPYmplY3QgPSBmdW5jdGlvbihvKSB7XG4gICAgY2FsbHMucHVzaChbJ3B1c2hPYmplY3QnLCBvXSk7XG4gIH07XG4gIFxuICB0aGlzLnBvcE9iamVjdCA9IGZ1bmN0aW9uKCkge1xuICAgIGNhbGxzLnB1c2goWydwb3BPYmplY3QnXSk7XG4gIH07XG5cbiAgdGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY2FsbHMgPSBjYWxscyA9IFtdO1xuICB9O1xuXG4gIHZhciByZWNvcmRpbmdEcmF3SW1hZ2UgPSB0aGlzLmRyYXdJbWFnZTsgIC8vIHBsYWluIHJlY29yZGluZyBkcmF3SW1hZ2UoKVxuICB0aGlzLmRyYXdJbWFnZSA9IGZ1bmN0aW9uKGltYWdlKSB7XG4gICAgLy8gSWYgdGhlIGRyYXduIGltYWdlIGhhcyByZWNvcmRlZCBjYWxscywgdGhlbiB0aGV5IG5lZWQgdG8gYmUgdHJhbnNmZXJyZWQgb3Zlci5cbiAgICB2YXIgcmVjb3JkZXIgPSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yQ2FudmFzKGltYWdlKTtcbiAgICBpZiAoIXJlY29yZGVyKSB7XG4gICAgICByZWNvcmRpbmdEcmF3SW1hZ2UuYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZHJhd0ltYWdlLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICAgIGNhbGxzID0gY2FsbHMuY29uY2F0KHRyYW5zZm9ybWVkQ2FsbHMocmVjb3JkZXIuY2FsbHMsIGFyZ3VtZW50cykpO1xuICAgICAgdGhpcy5jYWxscyA9IGNhbGxzO1xuICAgIH1cbiAgfVxufVxuXG4vLyBUcmFuc2Zvcm0gdGhlIGNhbGxzIHRvIGEgbmV3IGNvb3JkaW5hdGUgc3lzdGVtLlxuLy8gVGhlIGFyZ3VtZW50cyBhcmUgdGhvc2UgdG8gZHJhd0ltYWdlKCkuXG5mdW5jdGlvbiB0cmFuc2Zvcm1lZENhbGxzKGNhbGxzLCBhcmdzKSB7XG4gIHZhciBpbWFnZSA9IGFyZ3NbMF0sXG4gICAgICBzeCA9IDAsXG4gICAgICBzeSA9IDAsXG4gICAgICBzV2lkdGggPSBpbWFnZS53aWR0aCxcbiAgICAgIHNIZWlnaHQgPSBpbWFnZS5oZWlnaHQsXG4gICAgICBkeCxcbiAgICAgIGR5LFxuICAgICAgZFdpZHRoID0gaW1hZ2Uud2lkdGgsXG4gICAgICBkSGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuXG4gIGlmIChhcmdzLmxlbmd0aCA9PSAzKSB7XG4gICAgLy8gdm9pZCBjdHguZHJhd0ltYWdlKGltYWdlLCBkeCwgZHkpO1xuICAgIGR4ID0gYXJnc1sxXTtcbiAgICBkeSA9IGFyZ3NbMl07XG4gIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT0gNSkge1xuICAgIC8vIHZvaWQgY3R4LmRyYXdJbWFnZShpbWFnZSwgZHgsIGR5LCBkV2lkdGgsIGRIZWlnaHQpO1xuICAgIGR4ID0gYXJnc1sxXTtcbiAgICBkeSA9IGFyZ3NbMl07XG4gICAgZFdpZHRoID0gYXJnc1szXTtcbiAgICBkSGVpZ2h0ID0gYXJnc1s0XTtcbiAgfSBlbHNlIGlmIChhcmdzLmxlbmd0aCA9PSA5KSB7XG4gICAgLy8gdm9pZCBjdHguZHJhd0ltYWdlKGltYWdlLCBzeCwgc3ksIHNXaWR0aCwgc0hlaWdodCwgZHgsIGR5LCBkV2lkdGgsIGRIZWlnaHQpO1xuICAgIHN4ID0gYXJnc1sxXTtcbiAgICBzeSA9IGFyZ3NbMl07XG4gICAgc1dpZHRoID0gYXJnc1szXTtcbiAgICBzSGVpZ2h0ID0gYXJnc1s0XTtcbiAgICBkeCA9IGFyZ3NbNV07XG4gICAgZHkgPSBhcmdzWzZdO1xuICAgIGRXaWR0aCA9IGFyZ3NbN107XG4gICAgZEhlaWdodCA9IGFyZ3NbOF07XG4gIH1cbiAgLy8gT3RoZXIgYXJpdGllcyB3aWxsIG1ha2UgdGhlIGJyb3dzZXIgdGhyb3cgYW4gZXJyb3Igb24gY3R4LmRyYXdJbWFnZS5hcHBseVxuXG4gIHZhciB4U2NhbGluZyA9IGdldFNjYWxlRmFjdG9yKHN4LCBzeCArIHNXaWR0aCwgZHgsIGR4ICsgZFdpZHRoKSxcbiAgICAgIHhTY2FsZSAgID0gbWFrZVNjYWxlKCBzeCwgc3ggKyBzV2lkdGgsIGR4LCBkeCArIGRXaWR0aCksXG4gICAgICB5U2NhbGluZyA9IGdldFNjYWxlRmFjdG9yKHN5LCBzeSArIHNIZWlnaHQsIGR5LCBkeSArIGRIZWlnaHQpLFxuICAgICAgeVNjYWxlICAgPSBtYWtlU2NhbGUoIHN5LCBzeSArIHNIZWlnaHQsIGR5LCBkeSArIGRIZWlnaHQpO1xuXG4gIC8vIFRoZXNlIGNhbGxzIGFyZSBtb3JlIGNvbXBsZXg6XG4gIC8vIGFyY1xuICAvLyBhcmNUb1xuICAvLyBlbGxpcHNlXG5cbiAgLy8gVE9ETzogY2xpcCBjYWxscyBvdXRzaWRlIG9mIHRoZSBzb3VyY2UgcmVjdGFuZ2xlLlxuICB2YXIgdHJhbnNmb3JtQ2FsbCA9IGZ1bmN0aW9uKG9yaWdpbmFsQ2FsbCkge1xuICAgIHZhciBjYWxsID0gb3JpZ2luYWxDYWxsLnNsaWNlKCksICAvLyBtYWtlIGEgY29weVxuICAgICAgICB0eXBlID0gY2FsbFswXTtcbiAgICBpZiAodHlwZSBpbiBDQUxMU19YWSkge1xuICAgICAgdmFyIHh5cyA9IENBTExTX1hZW3R5cGVdO1xuICAgICAgaWYgKHR5cGVvZih4eXMpID09ICdudW1iZXInKSB4eXMgPSBbeHlzXTtcbiAgICAgIHh5cy5mb3JFYWNoKGZ1bmN0aW9uKHBvcykge1xuICAgICAgICBjYWxsWzEgKyBwb3NdID0geFNjYWxlKGNhbGxbMSArIHBvc10pO1xuICAgICAgICBjYWxsWzIgKyBwb3NdID0geVNjYWxlKGNhbGxbMiArIHBvc10pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0eXBlIGluIENBTExTX1dIKSB7XG4gICAgICB2YXIgd2hzID0gQ0FMTFNfV0hbdHlwZV07XG4gICAgICBpZiAodHlwZW9mKHdocykgPT0gJ251bWJlcicpIHdocyA9IFt3aHNdO1xuICAgICAgd2hzLmZvckVhY2goZnVuY3Rpb24ocG9zKSB7XG4gICAgICAgIGNhbGxbMSArIHBvc10gKj0geFNjYWxpbmc7XG4gICAgICAgIGNhbGxbMiArIHBvc10gKj0geVNjYWxpbmc7XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGNhbGw7XG4gIH07XG5cbiAgcmV0dXJuIGNhbGxzLm1hcCh0cmFuc2Zvcm1DYWxsKTtcbn1cblxuLy8gSGVscGVycyBmb3IgdHJhbnNmb3JtZWRDYWxsc1xuXG4vLyBNYXAgKHgxLCB4MikgLS0+ICh5MSwgeTIpXG5mdW5jdGlvbiBnZXRTY2FsZUZhY3Rvcih4MSwgeDIsIHkxLCB5Mikge1xuICByZXR1cm4gKHkyIC0geTEpIC8gKHgyIC0geDEpO1xufTtcbmZ1bmN0aW9uIG1ha2VTY2FsZSh4MSwgeDIsIHkxLCB5Mikge1xuICB2YXIgc2NhbGUgPSBnZXRTY2FsZUZhY3Rvcih4MSwgeDIsIHkxLCB5Mik7XG4gIHJldHVybiBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIHkxICsgc2NhbGUgKiAoeCAtIHgxKTtcbiAgfTtcbn07XG5cbi8vIFRoZXNlIGNhbGxzIGFsbCBoYXZlICh4LCB5KSBhcyBhcmdzIGF0IHRoZSBzcGVjaWZpZWQgcG9zaXRpb25zLlxudmFyIENBTExTX1hZID0ge1xuICBjbGVhclJlY3Q6IDAsXG4gIGZpbGxSZWN0OiAwLFxuICBzdHJva2VSZWN0OiAwLFxuICBmaWxsVGV4dDogMSxcbiAgc3Ryb2tlVGV4dDogMSxcbiAgbW92ZVRvOiAwLFxuICBsaW5lVG86IDAsXG4gIGJlemllckN1cnZlVG86IFswLCAyLCA0XSxcbiAgcXVhZHJhdGljQ3VydmVUbzogWzAsIDJdLFxuICByZWN0OiAwXG59O1xuLy8gVGhlc2UgY2FsbHMgaGF2ZSAod2lkdGgsIGhlaWdodCkgYXMgYXJncyBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9ucy5cbnZhciBDQUxMU19XSCA9IHtcbiAgY2xlYXJSZWN0OiAyLFxuICBmaWxsUmVjdDogMixcbiAgc3Ryb2tlUmVjdDogMixcbiAgLy8gZmlsbFRleHQgaGFzIGFuIG9wdGlvbmFsIGBtYXhfd2lkdGhgIHBhcmFtXG4gIHJlY3Q6IDIsXG59O1xuXG4vKipcbiAqIEdldCBhIGxpc3Qgb2Ygb2JqZWN0cyB3aGljaCBoYXZlIGJlZW4gcHVzaGVkIHRvIHRoZSBkYXRhIGNhbnZhcyB0aGF0IG1hdGNoXG4gKiB0aGUgcGFydGljdWxhciBwcmVkaWNhdGUuXG4gKiBJZiBubyBwcmVkaWNhdGUgaXMgc3BlY2lmaWVkLCBhbGwgb2JqZWN0cyBhcmUgcmV0dXJuZWQuXG4gKi9cblJlY29yZGluZ0NvbnRleHQucHJvdG90eXBlLmRyYXduT2JqZWN0c1dpdGggPSBmdW5jdGlvbihwcmVkaWNhdGUpIHtcbiAgaWYgKCFwcmVkaWNhdGUpIHByZWRpY2F0ZSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgcmV0dXJuIHRoaXMuY2FsbHNPZigncHVzaE9iamVjdCcpXG4gICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbih4KSB7IHJldHVybiBwcmVkaWNhdGUoeFsxXSkgfSlcbiAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKHgpIHsgcmV0dXJuIHhbMV07IH0pO1xufTtcbi8vIFRoaXMgdmVyc2lvbiByZWFkcyBiZXR0ZXIgaWYgdGhlcmUncyBubyBwcmVkaWNhdGUuXG5SZWNvcmRpbmdDb250ZXh0LnByb3RvdHlwZS5kcmF3bk9iamVjdHMgPSBSZWNvcmRpbmdDb250ZXh0LnByb3RvdHlwZS5kcmF3bk9iamVjdHNXaXRoO1xuXG4vKipcbiAqIEZpbmQgY2FsbHMgb2YgYSBwYXJ0aWN1bGFyIHR5cGUsIGUuZy4gYGZpbGxUZXh0YCBvciBgcHVzaE9iamVjdGAuXG4gKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgY2FsbHMgYW5kIHRoZWlyIHBhcmFtZXRlcnMsIGUuZy5cbiAqIFsgWydmaWxsVGV4dCcsICdIZWxsbyEnLCAyMCwgMTBdIF1cbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5wcm90b3R5cGUuY2FsbHNPZiA9IGZ1bmN0aW9uKHR5cGUpIHtcbiAgcmV0dXJuIHRoaXMuY2FsbHMuZmlsdGVyKGZ1bmN0aW9uKGNhbGwpIHsgcmV0dXJuIGNhbGxbMF0gPT0gdHlwZSB9KTtcbn07XG5cbi8qKlxuICogU3RhdGljIG1ldGhvZCB0byBiZWdpbiBzd2FwcGluZyBpbiBSZWNvcmRpbmdDb250ZXh0IGluIHBsYWNlIG9mIERhdGFDb250ZXh0LlxuICogRG9uJ3QgZm9yZ2V0IHRvIGNhbGwgUmVjb3JkaW5nQ29udGV4dC5yZXNldCgpIGFmdGVyIHRoZSB0ZXN0IGNvbXBsZXRlcyFcbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRBbGwgPSBmdW5jdGlvbigpIHtcbiAgaWYgKHN0dWJHZXREYXRhQ29udGV4dCAhPSBudWxsKSB7XG4gICAgdGhyb3cgJ1lvdSBmb3Jnb3QgdG8gY2FsbCBSZWNvcmRpbmdDb250ZXh0LnJlc2V0KCknO1xuICB9XG4gIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzID0gW107XG4gIHN0dWJHZXREYXRhQ29udGV4dCA9IGZ1bmN0aW9uKGN0eCkge1xuICAgIHZhciByZWNvcmRlciA9IFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JDYW52YXMoY3R4LmNhbnZhcyk7XG4gICAgaWYgKHJlY29yZGVyKSByZXR1cm4gcmVjb3JkZXI7XG5cbiAgICByZWNvcmRlciA9IG5ldyBSZWNvcmRpbmdDb250ZXh0KGN0eCk7XG4gICAgUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMucHVzaChbY3R4LmNhbnZhcywgcmVjb3JkZXJdKTtcbiAgICByZXR1cm4gcmVjb3JkZXI7XG4gIH07XG59O1xuXG4vKipcbiAqIFJldmVydCB0aGUgc3R1YmJpbmcgcGVyZm9ybWVkIGJ5IFJlY29yZGluZ0NvbnRleHQucmVjb3JkQWxsLlxuICovXG5SZWNvcmRpbmdDb250ZXh0LnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gIGlmICghc3R1YkdldERhdGFDb250ZXh0KSB7XG4gICAgdGhyb3cgJ0NhbGxlZCBSZWNvcmRpbmdDb250ZXh0LnJlc2V0KCkgYmVmb3JlIFJlY29yZGluZ0NvbnRleHQucmVjb3JkQWxsKCknO1xuICB9XG4gIHN0dWJHZXREYXRhQ29udGV4dCA9IG51bGw7XG4gIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzID0gbnVsbDtcbn07XG5cbi8vIEdldCB0aGUgcmVjb3JkaW5nIGNvbnRleHQgZm9yIGEgY2FudmFzLlxuUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvckNhbnZhcyA9IGZ1bmN0aW9uKGNhbnZhcykge1xuICB2YXIgcmVjb3JkZXJzID0gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnM7XG4gIGlmIChyZWNvcmRlcnMgPT0gbnVsbCkge1xuICAgIHRocm93ICdZb3UgbXVzdCBjYWxsIFJlY29yZGluZ0NvbnRleHQucmVjb3JkQWxsKCkgYmVmb3JlIHVzaW5nIG90aGVyIFJlY29yZGluZ0NvbnRleHQgc3RhdGljIG1ldGhvZHMnO1xuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmVjb3JkZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHIgPSByZWNvcmRlcnNbaV07XG4gICAgaWYgKHJbMF0gPT0gY2FudmFzKSByZXR1cm4gclsxXTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbi8qKlxuICogR2V0IHRoZSByZWNvcmRpbmcgY29udGV4dCBmb3IgYSBjYW52YXMgaW5zaWRlIG9mIGRpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKS5cbiAqXG4gKiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHlvdSBoYXZlIGEgdGVzdCBkaXYgYW5kIHNldmVyYWwgY2FudmFzZXMuXG4gKi9cblJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JTZWxlY3RvciA9IGZ1bmN0aW9uKGRpdiwgc2VsZWN0b3IpIHtcbiAgdmFyIGNhbnZhcyA9IGRpdi5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yICsgJyBjYW52YXMnKSB8fCBkaXYucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIGlmICghY2FudmFzKSB7XG4gICAgdGhyb3cgJ1VuYWJsZSB0byBmaW5kIGEgY2FudmFzIG1hdGNoaW5nICcgKyBzZWxlY3RvcjtcbiAgfSBlbHNlIGlmICghKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSkge1xuICAgIHRocm93ICdTZWxlY3RvciAnICsgc2VsZWN0b3IgKyAnIG5laXRoZXIgbWF0Y2hlcyBub3IgY29udGFpbnMgYSBjYW52YXMnO1xuICB9XG4gIHJldHVybiBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yQ2FudmFzKGNhbnZhcyk7XG59O1xuXG4vLyBSZXNvbHZlcyBhcmd1bWVudHMgZm9yIFJlY29yZGluZ0NvbnRleHQgaGVscGVycy5cbi8vIFlvdSBjYW4gZWl0aGVyIHNwZWNpZnkgYSBkaXYgJiBzZWxlY3RvciB0byBmaW5kIHRoZSBjYW52YXMsIG9yIG9taXQgdGhpcyBpZlxuLy8gdGhlcmUncyBvbmx5IG9uZSBjYW52YXMgYmVpbmcgcmVjb3JkZWQuXG5mdW5jdGlvbiBmaW5kUmVjb3JkZXIoZGl2LCBzZWxlY3Rvcikge1xuICBpZiAoIWRpdikge1xuICAgIGlmICghUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMpIHtcbiAgICAgIHRocm93ICdZb3UgbXVzdCBjYWxsIFJlY29yZGluZ0NvbnRleHQucmVjb3JkQWxsKCkgYmVmb3JlIHVzaW5nIG90aGVyIFJlY29yZGluZ0NvbnRleHQgc3RhdGljIG1ldGhvZHMnO1xuICAgIH0gZWxzZSBpZiAoUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMubGVuZ3RoID09IDApIHtcbiAgICAgIHRocm93ICdDYWxsZWQgYSBSZWNvcmRpbmdDb250ZXh0IG1ldGhvZCwgYnV0IG5vIGNhbnZhc2VzIGFyZSBiZWluZyByZWNvcmRlZC4nO1xuICAgIH0gZWxzZSBpZiAoUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnMubGVuZ3RoID4gMSkge1xuICAgICAgdGhyb3cgJ0NhbGxlZCBhIFJlY29yZGluZ0NvbnRleHQgbWV0aG9kIHdoaWxlIG11bHRpcGxlIGNhbnZhc2VzIHdlcmUgYmVpbmcgcmVjb3JkZWQuIFNwZWNpZnkgb25lIHVzaW5nIGEgZGl2IGFuZCBzZWxlY3Rvci4nO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlcnNbMF1bMV07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yU2VsZWN0b3IoZGl2LCBzZWxlY3Rvcik7XG4gIH1cbn1cblxuLy8gRmluZCBvYmplY3RzIHB1c2hlZCBvbnRvIGEgcGFydGljdWxhciByZWNvcmRlZCBjYW52YXMuXG5SZWNvcmRpbmdDb250ZXh0LmRyYXduT2JqZWN0c1dpdGggPSBmdW5jdGlvbihkaXYsIHNlbGVjdG9yLCBwcmVkaWNhdGUpIHtcbiAgLy8gQ2hlY2sgZm9yIHRoZSB6ZXJvLWFyZ3VtZW50IG9yIG9uZS1hcmd1bWVudCB2ZXJzaW9uLlxuICBpZiAodHlwZW9mKGRpdikgPT0gJ2Z1bmN0aW9uJyB8fCBhcmd1bWVudHMubGVuZ3RoID09IDApIHtcbiAgICBwcmVkaWNhdGUgPSBkaXY7XG4gICAgZGl2ID0gbnVsbDtcbiAgfVxuICB2YXIgcmVjb3JkZXIgPSBmaW5kUmVjb3JkZXIoZGl2LCBzZWxlY3Rvcik7XG4gIHByZWRpY2F0ZSA9IHByZWRpY2F0ZSB8fCBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07XG4gIHJldHVybiByZWNvcmRlciA/IHJlY29yZGVyLmRyYXduT2JqZWN0c1dpdGgocHJlZGljYXRlKSA6IFtdO1xufTtcblxuLy8gVGhpcyB2ZXJzaW9uIHJlYWRzIGJldHRlciBpZiB0aGVyZSdzIG5vIHByZWRpY2F0ZS5cblJlY29yZGluZ0NvbnRleHQuZHJhd25PYmplY3RzID0gUmVjb3JkaW5nQ29udGV4dC5kcmF3bk9iamVjdHNXaXRoO1xuXG4vLyBGaW5kIGNhbGxzIG9mIHBhcnRpY3VsYXIgZHJhd2luZyBmdW5jdGlvbnMgKGUuZy4gZmlsbFRleHQpXG5SZWNvcmRpbmdDb250ZXh0LmNhbGxzT2YgPSBmdW5jdGlvbiAoZGl2LCBzZWxlY3RvciwgdHlwZSkge1xuICAvLyBDaGVjayBmb3IgdGhlIG9uZS1hcmd1bWVudCB2ZXJzaW9uLlxuICBpZiAodHlwZW9mKGRpdikgPT0gJ3N0cmluZycpIHtcbiAgICB0eXBlID0gZGl2O1xuICAgIGRpdiA9IG51bGw7XG4gIH1cbiAgdmFyIHJlY29yZGVyID0gZmluZFJlY29yZGVyKGRpdiwgc2VsZWN0b3IpO1xuICByZXR1cm4gcmVjb3JkZXIgPyByZWNvcmRlci5jYWxsc09mKHR5cGUpIDogW107XG59O1xuXG5cbi8qKlxuICogQSBjb250ZXh0IHdoaWNoIGRldGVybWluZXMgdGhlIGRhdGEgYXQgYSBwYXJ0aWN1bGFyIGxvY2F0aW9uLlxuICpcbiAqIFdoZW4gZHJhd2luZyBtZXRob2RzIGFyZSBjYWxsZWQgb24gdGhpcyBjbGFzcywgbm90aGluZyBpcyByZW5kZXJlZC4gSW5zdGVhZCxcbiAqIGVhY2ggc2hhcGUgaXMgY2hlY2tlZCB0byBzZWUgaWYgaXQgaW5jbHVkZXMgdGhlIHBvaW50IG9mIGludGVyZXN0LiBJZiBpdFxuICogZG9lcywgdGhlIGN1cnJlbnQgZGF0YSBzdGFjayBpcyBzYXZlZCBhcyBhIFwiaGl0XCIuXG4gKlxuICogVGhlIGBoaXRzYCBwcm9wZXJ0eSByZWNvcmRzIGFsbCBzdWNoIGhpdHMuXG4gKiBUaGUgYGhpdGAgcHJvcGVydHkgcmVjb3JkcyBvbmx5IHRoZSBsYXN0ICh0b3ApIGhpdC5cbiAqL1xuZnVuY3Rpb24gQ2xpY2tUcmFja2luZ0NvbnRleHQoY3R4LCBweCwgcHkpIHtcbiAgZm9yd2FyZCh0aGlzLCBjdHgpO1xuXG4gIHZhciBzdGFjayA9IFtdO1xuICB0aGlzLmhpdHMgPSBbXTtcbiAgdGhpcy5oaXQgPSBudWxsO1xuICBcbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBmdW5jdGlvbiByZWNvcmRIaXQoKSB7XG4gICAgdGhhdC5oaXRzLnVuc2hpZnQoQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoc3RhY2spKTtcbiAgICB0aGF0LmhpdCA9IHRoYXQuaGl0c1swXTtcbiAgfVxuXG4gIHRoaXMucHVzaE9iamVjdCA9IGZ1bmN0aW9uKG8pIHtcbiAgICBzdGFjay51bnNoaWZ0KG8pO1xuICB9O1xuICBcbiAgdGhpcy5wb3BPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICBzdGFjay5zaGlmdCgpO1xuICB9O1xuXG4gIHRoaXMucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmhpdHMgPSBbXTtcbiAgICB0aGlzLmhpdCA9IG51bGw7XG4gIH07XG5cbiAgLy8gVGhlc2UgYXJlIChtb3N0IG9mKSB0aGUgY2FudmFzIG1ldGhvZHMgd2hpY2ggZHJhdyBzb21ldGhpbmcuXG4gIC8vIFRPRE86IHdvdWxkIGl0IG1ha2Ugc2Vuc2UgdG8gcHVyZ2UgZXhpc3RpbmcgaGl0cyBjb3ZlcmVkIGJ5IHRoaXM/XG4gIHRoaXMuY2xlYXJSZWN0ID0gZnVuY3Rpb24oeCwgeSwgdywgaCkgeyB9O1xuXG4gIHRoaXMuZmlsbFJlY3QgPSBmdW5jdGlvbih4LCB5LCB3LCBoKSB7XG4gICAgaWYgKHB4ID49IHggJiYgcHggPD0geCArIHcgJiYgcHkgPj0geSAmJiBweSA8PSB5ICsgaCkgcmVjb3JkSGl0KCk7XG4gIH07XG5cbiAgdGhpcy5zdHJva2VSZWN0ID0gZnVuY3Rpb24oeCwgeSwgdywgaCkge1xuICAgIC8vIC4uLlxuICB9O1xuXG4gIHRoaXMuZmlsbCA9IGZ1bmN0aW9uKGZpbGxSdWxlKSB7XG4gICAgLy8gVE9ETzogaW1wbGVtZW50IGZpbGxSdWxlXG4gICAgaWYgKGN0eC5pc1BvaW50SW5QYXRoKHB4LCBweSkpIHJlY29yZEhpdCgpO1xuICB9O1xuXG4gIHRoaXMuc3Ryb2tlID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKGN0eC5pc1BvaW50SW5TdHJva2UocHgsIHB5KSkgcmVjb3JkSGl0KCk7XG4gIH07XG5cbiAgdGhpcy5maWxsVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHgsIHksIG1heFdpZHRoKSB7XG4gICAgLy8gLi4uXG4gIH07XG5cbiAgdGhpcy5zdHJva2VUZXh0ID0gZnVuY3Rpb24odGV4dCwgeCwgeSwgbWF4V2lkdGgpIHtcbiAgICAvLyAuLi5cbiAgfTtcbn1cblxudmFyIGV4cG9ydHMgPSB7XG4gIERhdGFDb250ZXh0OiBEYXRhQ29udGV4dCxcbiAgUmVjb3JkaW5nQ29udGV4dDogUmVjb3JkaW5nQ29udGV4dCxcbiAgQ2xpY2tUcmFja2luZ0NvbnRleHQ6IENsaWNrVHJhY2tpbmdDb250ZXh0LFxuICBnZXREYXRhQ29udGV4dDogZ2V0RGF0YUNvbnRleHRcbn07XG5cbmlmICh0eXBlb2YobW9kdWxlKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzO1xufSBlbHNlIHtcbiAgd2luZG93LmRhdGFDYW52YXMgPSBleHBvcnRzO1xufVxuXG59KSgpO1xuIiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudExpc3RlbmVyXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCcuL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBVcHN0cmVhbSB2ZXJzaW9uIG9mIGV2ZW50IGxpc3RlbmVyLiBEb2VzIG5vdCB0YWtlIGludG8gYWNjb3VudCBzcGVjaWZpY1xuICogbmF0dXJlIG9mIHBsYXRmb3JtLlxuICovXG52YXIgRXZlbnRMaXN0ZW5lciA9IHtcbiAgLyoqXG4gICAqIExpc3RlbiB0byBET00gZXZlbnRzIGR1cmluZyB0aGUgYnViYmxlIHBoYXNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0YXJnZXQgRE9NIGVsZW1lbnQgdG8gcmVnaXN0ZXIgbGlzdGVuZXIgb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgRXZlbnQgdHlwZSwgZS5nLiAnY2xpY2snIG9yICdtb3VzZW92ZXInLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvbi5cbiAgICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCBhIGByZW1vdmVgIG1ldGhvZC5cbiAgICovXG4gIGxpc3RlbjogZnVuY3Rpb24gKHRhcmdldCwgZXZlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgIGlmICh0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodGFyZ2V0LmF0dGFjaEV2ZW50KSB7XG4gICAgICB0YXJnZXQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50VHlwZSwgY2FsbGJhY2spO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LmRldGFjaEV2ZW50KCdvbicgKyBldmVudFR5cGUsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIExpc3RlbiB0byBET00gZXZlbnRzIGR1cmluZyB0aGUgY2FwdHVyZSBwaGFzZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdGFyZ2V0IERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGxpc3RlbmVyIG9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIEV2ZW50IHR5cGUsIGUuZy4gJ2NsaWNrJyBvciAnbW91c2VvdmVyJy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggYSBgcmVtb3ZlYCBtZXRob2QuXG4gICAqL1xuICBjYXB0dXJlOiBmdW5jdGlvbiAodGFyZ2V0LCBldmVudFR5cGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRhcmdldC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBdHRlbXB0ZWQgdG8gbGlzdGVuIHRvIGV2ZW50cyBkdXJpbmcgdGhlIGNhcHR1cmUgcGhhc2Ugb24gYSAnICsgJ2Jyb3dzZXIgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBjYXB0dXJlIHBoYXNlLiBZb3VyIGFwcGxpY2F0aW9uICcgKyAnd2lsbCBub3QgcmVjZWl2ZSBzb21lIGV2ZW50cy4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZW1wdHlGdW5jdGlvblxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgcmVnaXN0ZXJEZWZhdWx0OiBmdW5jdGlvbiAoKSB7fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudExpc3RlbmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFeGVjdXRpb25FbnZpcm9ubWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhblVzZURPTSA9ICEhKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5cbi8qKlxuICogU2ltcGxlLCBsaWdodHdlaWdodCBtb2R1bGUgYXNzaXN0aW5nIHdpdGggdGhlIGRldGVjdGlvbiBhbmQgY29udGV4dCBvZlxuICogV29ya2VyLiBIZWxwcyBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYW5kIGFsbG93cyBjb2RlIHRvIHJlYXNvbiBhYm91dFxuICogd2hldGhlciBvciBub3QgdGhleSBhcmUgaW4gYSBXb3JrZXIsIGV2ZW4gaWYgdGhleSBuZXZlciBpbmNsdWRlIHRoZSBtYWluXG4gKiBgUmVhY3RXb3JrZXJgIGRlcGVuZGVuY3kuXG4gKi9cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHtcblxuICBjYW5Vc2VET006IGNhblVzZURPTSxcblxuICBjYW5Vc2VXb3JrZXJzOiB0eXBlb2YgV29ya2VyICE9PSAndW5kZWZpbmVkJyxcblxuICBjYW5Vc2VFdmVudExpc3RlbmVyczogY2FuVXNlRE9NICYmICEhKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IHdpbmRvdy5hdHRhY2hFdmVudCksXG5cbiAgY2FuVXNlVmlld3BvcnQ6IGNhblVzZURPTSAmJiAhIXdpbmRvdy5zY3JlZW4sXG5cbiAgaXNJbldvcmtlcjogIWNhblVzZURPTSAvLyBGb3Igbm93LCB0aGlzIGlzIHRydWUgLSBtaWdodCBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS5cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY2FtZWxpemVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaHlwaGVuUGF0dGVybiA9IC8tKC4pL2c7XG5cbi8qKlxuICogQ2FtZWxjYXNlcyBhIGh5cGhlbmF0ZWQgc3RyaW5nLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gY2FtZWxpemUoJ2JhY2tncm91bmQtY29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZENvbG9yXCJcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNhbWVsaXplKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoX2h5cGhlblBhdHRlcm4sIGZ1bmN0aW9uIChfLCBjaGFyYWN0ZXIpIHtcbiAgICByZXR1cm4gY2hhcmFjdGVyLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbWVsaXplOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjYW1lbGl6ZVN0eWxlTmFtZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYW1lbGl6ZSA9IHJlcXVpcmUoJy4vY2FtZWxpemUnKTtcblxudmFyIG1zUGF0dGVybiA9IC9eLW1zLS87XG5cbi8qKlxuICogQ2FtZWxjYXNlcyBhIGh5cGhlbmF0ZWQgQ1NTIHByb3BlcnR5IG5hbWUsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBjYW1lbGl6ZVN0eWxlTmFtZSgnYmFja2dyb3VuZC1jb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kQ29sb3JcIlxuICogICA+IGNhbWVsaXplU3R5bGVOYW1lKCctbW96LXRyYW5zaXRpb24nKVxuICogICA8IFwiTW96VHJhbnNpdGlvblwiXG4gKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJy1tcy10cmFuc2l0aW9uJylcbiAqICAgPCBcIm1zVHJhbnNpdGlvblwiXG4gKlxuICogQXMgQW5kaSBTbWl0aCBzdWdnZXN0c1xuICogKGh0dHA6Ly93d3cuYW5kaXNtaXRoLmNvbS9ibG9nLzIwMTIvMDIvbW9kZXJuaXpyLXByZWZpeGVkLyksIGFuIGAtbXNgIHByZWZpeFxuICogaXMgY29udmVydGVkIHRvIGxvd2VyY2FzZSBgbXNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gY2FtZWxpemVTdHlsZU5hbWUoc3RyaW5nKSB7XG4gIHJldHVybiBjYW1lbGl6ZShzdHJpbmcucmVwbGFjZShtc1BhdHRlcm4sICdtcy0nKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2FtZWxpemVTdHlsZU5hbWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNvbnRhaW5zTm9kZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc1RleHROb2RlID0gcmVxdWlyZSgnLi9pc1RleHROb2RlJyk7XG5cbi8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAqL1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIGdpdmVuIERPTSBub2RlIGNvbnRhaW5zIG9yIGlzIGFub3RoZXIgRE9NIG5vZGUuXG4gKlxuICogQHBhcmFtIHs/RE9NTm9kZX0gb3V0ZXJOb2RlIE91dGVyIERPTSBub2RlLlxuICogQHBhcmFtIHs/RE9NTm9kZX0gaW5uZXJOb2RlIElubmVyIERPTSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb3V0ZXJOb2RlYCBjb250YWlucyBvciBpcyBgaW5uZXJOb2RlYC5cbiAqL1xuZnVuY3Rpb24gY29udGFpbnNOb2RlKF94LCBfeDIpIHtcbiAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cbiAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG4gICAgdmFyIG91dGVyTm9kZSA9IF94LFxuICAgICAgICBpbm5lck5vZGUgPSBfeDI7XG4gICAgX2FnYWluID0gZmFsc2U7XG5cbiAgICBpZiAoIW91dGVyTm9kZSB8fCAhaW5uZXJOb2RlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChvdXRlck5vZGUgPT09IGlubmVyTm9kZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChpc1RleHROb2RlKG91dGVyTm9kZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGlzVGV4dE5vZGUoaW5uZXJOb2RlKSkge1xuICAgICAgX3ggPSBvdXRlck5vZGU7XG4gICAgICBfeDIgPSBpbm5lck5vZGUucGFyZW50Tm9kZTtcbiAgICAgIF9hZ2FpbiA9IHRydWU7XG4gICAgICBjb250aW51ZSBfZnVuY3Rpb247XG4gICAgfSBlbHNlIGlmIChvdXRlck5vZGUuY29udGFpbnMpIHtcbiAgICAgIHJldHVybiBvdXRlck5vZGUuY29udGFpbnMoaW5uZXJOb2RlKTtcbiAgICB9IGVsc2UgaWYgKG91dGVyTm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikge1xuICAgICAgcmV0dXJuICEhKG91dGVyTm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihpbm5lck5vZGUpICYgMTYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29udGFpbnNOb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjcmVhdGVBcnJheUZyb21NaXhlZFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB0b0FycmF5ID0gcmVxdWlyZSgnLi90b0FycmF5Jyk7XG5cbi8qKlxuICogUGVyZm9ybSBhIGhldXJpc3RpYyB0ZXN0IHRvIGRldGVybWluZSBpZiBhbiBvYmplY3QgaXMgXCJhcnJheS1saWtlXCIuXG4gKlxuICogICBBIG1vbmsgYXNrZWQgSm9zaHUsIGEgWmVuIG1hc3RlciwgXCJIYXMgYSBkb2cgQnVkZGhhIG5hdHVyZT9cIlxuICogICBKb3NodSByZXBsaWVkOiBcIk11LlwiXG4gKlxuICogVGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIGlmIGl0cyBhcmd1bWVudCBoYXMgXCJhcnJheSBuYXR1cmVcIjogaXQgcmV0dXJuc1xuICogdHJ1ZSBpZiB0aGUgYXJndW1lbnQgaXMgYW4gYWN0dWFsIGFycmF5LCBhbiBgYXJndW1lbnRzJyBvYmplY3QsIG9yIGFuXG4gKiBIVE1MQ29sbGVjdGlvbiAoZS5nLiBub2RlLmNoaWxkTm9kZXMgb3Igbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgpKS5cbiAqXG4gKiBJdCB3aWxsIHJldHVybiBmYWxzZSBmb3Igb3RoZXIgYXJyYXktbGlrZSBvYmplY3RzIGxpa2UgRmlsZWxpc3QuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGhhc0FycmF5TmF0dXJlKG9iaikge1xuICByZXR1cm4oXG4gICAgLy8gbm90IG51bGwvZmFsc2VcbiAgICAhIW9iaiAmJiAoXG4gICAgLy8gYXJyYXlzIGFyZSBvYmplY3RzLCBOb2RlTGlzdHMgYXJlIGZ1bmN0aW9ucyBpbiBTYWZhcmlcbiAgICB0eXBlb2Ygb2JqID09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJykgJiZcbiAgICAvLyBxdWFja3MgbGlrZSBhbiBhcnJheVxuICAgICdsZW5ndGgnIGluIG9iaiAmJlxuICAgIC8vIG5vdCB3aW5kb3dcbiAgICAhKCdzZXRJbnRlcnZhbCcgaW4gb2JqKSAmJlxuICAgIC8vIG5vIERPTSBub2RlIHNob3VsZCBiZSBjb25zaWRlcmVkIGFuIGFycmF5LWxpa2VcbiAgICAvLyBhICdzZWxlY3QnIGVsZW1lbnQgaGFzICdsZW5ndGgnIGFuZCAnaXRlbScgcHJvcGVydGllcyBvbiBJRThcbiAgICB0eXBlb2Ygb2JqLm5vZGVUeXBlICE9ICdudW1iZXInICYmIChcbiAgICAvLyBhIHJlYWwgYXJyYXlcbiAgICBBcnJheS5pc0FycmF5KG9iaikgfHxcbiAgICAvLyBhcmd1bWVudHNcbiAgICAnY2FsbGVlJyBpbiBvYmogfHxcbiAgICAvLyBIVE1MQ29sbGVjdGlvbi9Ob2RlTGlzdFxuICAgICdpdGVtJyBpbiBvYmopXG4gICk7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgdGhlIGFyZ3VtZW50IGlzIGFuIGFycmF5IGJ5IHdyYXBwaW5nIGl0IGluIGFuIGFycmF5IGlmIGl0IGlzIG5vdC5cbiAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoZSBhcmd1bWVudCBpZiBpdCBpcyBhbHJlYWR5IGFuIGFycmF5LlxuICpcbiAqIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCBpZGlvbWF0aWNhbGx5OlxuICpcbiAqICAgdmFyIGNyZWF0ZUFycmF5RnJvbU1peGVkID0gcmVxdWlyZSgnY3JlYXRlQXJyYXlGcm9tTWl4ZWQnKTtcbiAqXG4gKiAgIGZ1bmN0aW9uIHRha2VzT25lT3JNb3JlVGhpbmdzKHRoaW5ncykge1xuICogICAgIHRoaW5ncyA9IGNyZWF0ZUFycmF5RnJvbU1peGVkKHRoaW5ncyk7XG4gKiAgICAgLi4uXG4gKiAgIH1cbiAqXG4gKiBUaGlzIGFsbG93cyB5b3UgdG8gdHJlYXQgYHRoaW5ncycgYXMgYW4gYXJyYXksIGJ1dCBhY2NlcHQgc2NhbGFycyBpbiB0aGUgQVBJLlxuICpcbiAqIElmIHlvdSBuZWVkIHRvIGNvbnZlcnQgYW4gYXJyYXktbGlrZSBvYmplY3QsIGxpa2UgYGFyZ3VtZW50c2AsIGludG8gYW4gYXJyYXlcbiAqIHVzZSB0b0FycmF5IGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge2FycmF5fVxuICovXG5mdW5jdGlvbiBjcmVhdGVBcnJheUZyb21NaXhlZChvYmopIHtcbiAgaWYgKCFoYXNBcnJheU5hdHVyZShvYmopKSB7XG4gICAgcmV0dXJuIFtvYmpdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmouc2xpY2UoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdG9BcnJheShvYmopO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4vKmVzbGludC1kaXNhYmxlIGZiLXd3dy91bnNhZmUtaHRtbCovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY3JlYXRlQXJyYXlGcm9tTWl4ZWQgPSByZXF1aXJlKCcuL2NyZWF0ZUFycmF5RnJvbU1peGVkJyk7XG52YXIgZ2V0TWFya3VwV3JhcCA9IHJlcXVpcmUoJy4vZ2V0TWFya3VwV3JhcCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogRHVtbXkgY29udGFpbmVyIHVzZWQgdG8gcmVuZGVyIGFsbCBtYXJrdXAuXG4gKi9cbnZhciBkdW1teU5vZGUgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSA6IG51bGw7XG5cbi8qKlxuICogUGF0dGVybiB1c2VkIGJ5IGBnZXROb2RlTmFtZWAuXG4gKi9cbnZhciBub2RlTmFtZVBhdHRlcm4gPSAvXlxccyo8KFxcdyspLztcblxuLyoqXG4gKiBFeHRyYWN0cyB0aGUgYG5vZGVOYW1lYCBvZiB0aGUgZmlyc3QgZWxlbWVudCBpbiBhIHN0cmluZyBvZiBtYXJrdXAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuICogQHJldHVybiB7P3N0cmluZ30gTm9kZSBuYW1lIG9mIHRoZSBzdXBwbGllZCBtYXJrdXAuXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVOYW1lKG1hcmt1cCkge1xuICB2YXIgbm9kZU5hbWVNYXRjaCA9IG1hcmt1cC5tYXRjaChub2RlTmFtZVBhdHRlcm4pO1xuICByZXR1cm4gbm9kZU5hbWVNYXRjaCAmJiBub2RlTmFtZU1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBub2RlcyByZW5kZXJlZCBmcm9tIHRoZSBzdXBwbGllZCBtYXJrdXAuIFRoZVxuICogb3B0aW9uYWxseSBzdXBwbGllZCBgaGFuZGxlU2NyaXB0YCBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb25jZSBmb3IgZWFjaFxuICogPHNjcmlwdD4gZWxlbWVudCB0aGF0IGlzIHJlbmRlcmVkLiBJZiBubyBgaGFuZGxlU2NyaXB0YCBmdW5jdGlvbiBpcyBzdXBwbGllZCxcbiAqIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgYW55IDxzY3JpcHQ+IGVsZW1lbnRzIGFyZSByZW5kZXJlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIEEgc3RyaW5nIG9mIHZhbGlkIEhUTUwgbWFya3VwLlxuICogQHBhcmFtIHs/ZnVuY3Rpb259IGhhbmRsZVNjcmlwdCBJbnZva2VkIG9uY2UgZm9yIGVhY2ggcmVuZGVyZWQgPHNjcmlwdD4uXG4gKiBAcmV0dXJuIHthcnJheTxET01FbGVtZW50fERPTVRleHROb2RlPn0gQW4gYXJyYXkgb2YgcmVuZGVyZWQgbm9kZXMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXAsIGhhbmRsZVNjcmlwdCkge1xuICB2YXIgbm9kZSA9IGR1bW15Tm9kZTtcbiAgISEhZHVtbXlOb2RlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZU5vZGVzRnJvbU1hcmt1cCBkdW1teSBub3QgaW5pdGlhbGl6ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciBub2RlTmFtZSA9IGdldE5vZGVOYW1lKG1hcmt1cCk7XG5cbiAgdmFyIHdyYXAgPSBub2RlTmFtZSAmJiBnZXRNYXJrdXBXcmFwKG5vZGVOYW1lKTtcbiAgaWYgKHdyYXApIHtcbiAgICBub2RlLmlubmVySFRNTCA9IHdyYXBbMV0gKyBtYXJrdXAgKyB3cmFwWzJdO1xuXG4gICAgdmFyIHdyYXBEZXB0aCA9IHdyYXBbMF07XG4gICAgd2hpbGUgKHdyYXBEZXB0aC0tKSB7XG4gICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG5vZGUuaW5uZXJIVE1MID0gbWFya3VwO1xuICB9XG5cbiAgdmFyIHNjcmlwdHMgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgaWYgKHNjcmlwdHMubGVuZ3RoKSB7XG4gICAgIWhhbmRsZVNjcmlwdCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVOb2Rlc0Zyb21NYXJrdXAoLi4uKTogVW5leHBlY3RlZCA8c2NyaXB0PiBlbGVtZW50IHJlbmRlcmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBjcmVhdGVBcnJheUZyb21NaXhlZChzY3JpcHRzKS5mb3JFYWNoKGhhbmRsZVNjcmlwdCk7XG4gIH1cblxuICB2YXIgbm9kZXMgPSBjcmVhdGVBcnJheUZyb21NaXhlZChub2RlLmNoaWxkTm9kZXMpO1xuICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlTm9kZXNGcm9tTWFya3VwOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBlbXB0eUZ1bmN0aW9uXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIG1ha2VFbXB0eUZ1bmN0aW9uKGFyZykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhcmc7XG4gIH07XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBhY2NlcHRzIGFuZCBkaXNjYXJkcyBpbnB1dHM7IGl0IGhhcyBubyBzaWRlIGVmZmVjdHMuIFRoaXMgaXNcbiAqIHByaW1hcmlseSB1c2VmdWwgaWRpb21hdGljYWxseSBmb3Igb3ZlcnJpZGFibGUgZnVuY3Rpb24gZW5kcG9pbnRzIHdoaWNoXG4gKiBhbHdheXMgbmVlZCB0byBiZSBjYWxsYWJsZSwgc2luY2UgSlMgbGFja3MgYSBudWxsLWNhbGwgaWRpb20gYWxhIENvY29hLlxuICovXG5mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uKCkge31cblxuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJucyA9IG1ha2VFbXB0eUZ1bmN0aW9uO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlID0gbWFrZUVtcHR5RnVuY3Rpb24oZmFsc2UpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWUgPSBtYWtlRW1wdHlGdW5jdGlvbih0cnVlKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNOdWxsID0gbWFrZUVtcHR5RnVuY3Rpb24obnVsbCk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXM7XG59O1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50ID0gZnVuY3Rpb24gKGFyZykge1xuICByZXR1cm4gYXJnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBlbXB0eUZ1bmN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBlbXB0eU9iamVjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5T2JqZWN0ID0ge307XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIE9iamVjdC5mcmVlemUoZW1wdHlPYmplY3QpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVtcHR5T2JqZWN0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBmb2N1c05vZGVcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlIGlucHV0L3RleHRhcmVhIHRvIGZvY3VzXG4gKi9cbmZ1bmN0aW9uIGZvY3VzTm9kZShub2RlKSB7XG4gIC8vIElFOCBjYW4gdGhyb3cgXCJDYW4ndCBtb3ZlIGZvY3VzIHRvIHRoZSBjb250cm9sIGJlY2F1c2UgaXQgaXMgaW52aXNpYmxlLFxuICAvLyBub3QgZW5hYmxlZCwgb3Igb2YgYSB0eXBlIHRoYXQgZG9lcyBub3QgYWNjZXB0IHRoZSBmb2N1cy5cIiBmb3IgYWxsIGtpbmRzIG9mXG4gIC8vIHJlYXNvbnMgdGhhdCBhcmUgdG9vIGV4cGVuc2l2ZSBhbmQgZnJhZ2lsZSB0byB0ZXN0LlxuICB0cnkge1xuICAgIG5vZGUuZm9jdXMoKTtcbiAgfSBjYXRjaCAoZSkge31cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmb2N1c05vZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEFjdGl2ZUVsZW1lbnRcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgZmItd3d3L3R5cGVvZi11bmRlZmluZWQgKi9cblxuLyoqXG4gKiBTYW1lIGFzIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYnV0IHdyYXBzIGluIGEgdHJ5LWNhdGNoIGJsb2NrLiBJbiBJRSBpdCBpc1xuICogbm90IHNhZmUgdG8gY2FsbCBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGlmIHRoZXJlIGlzIG5vdGhpbmcgZm9jdXNlZC5cbiAqXG4gKiBUaGUgYWN0aXZlRWxlbWVudCB3aWxsIGJlIG51bGwgb25seSBpZiB0aGUgZG9jdW1lbnQgb3IgZG9jdW1lbnQgYm9keSBpcyBub3RcbiAqIHlldCBkZWZpbmVkLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGdldEFjdGl2ZUVsZW1lbnQoKSAvKj9ET01FbGVtZW50Ki97XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRBY3RpdmVFbGVtZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRNYXJrdXBXcmFwXG4gKi9cblxuLyplc2xpbnQtZGlzYWJsZSBmYi13d3cvdW5zYWZlLWh0bWwgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIER1bW15IGNvbnRhaW5lciB1c2VkIHRvIGRldGVjdCB3aGljaCB3cmFwcyBhcmUgbmVjZXNzYXJ5LlxuICovXG52YXIgZHVtbXlOb2RlID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgOiBudWxsO1xuXG4vKipcbiAqIFNvbWUgYnJvd3NlcnMgY2Fubm90IHVzZSBgaW5uZXJIVE1MYCB0byByZW5kZXIgY2VydGFpbiBlbGVtZW50cyBzdGFuZGFsb25lLFxuICogc28gd2Ugd3JhcCB0aGVtLCByZW5kZXIgdGhlIHdyYXBwZWQgbm9kZXMsIHRoZW4gZXh0cmFjdCB0aGUgZGVzaXJlZCBub2RlLlxuICpcbiAqIEluIElFOCwgY2VydGFpbiBlbGVtZW50cyBjYW5ub3QgcmVuZGVyIGFsb25lLCBzbyB3cmFwIGFsbCBlbGVtZW50cyAoJyonKS5cbiAqL1xuXG52YXIgc2hvdWxkV3JhcCA9IHt9O1xuXG52YXIgc2VsZWN0V3JhcCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cInRydWVcIj4nLCAnPC9zZWxlY3Q+J107XG52YXIgdGFibGVXcmFwID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG52YXIgdHJXcmFwID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbnZhciBzdmdXcmFwID0gWzEsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj4nLCAnPC9zdmc+J107XG5cbnZhciBtYXJrdXBXcmFwID0ge1xuICAnKic6IFsxLCAnPzxkaXY+JywgJzwvZGl2PiddLFxuXG4gICdhcmVhJzogWzEsICc8bWFwPicsICc8L21hcD4nXSxcbiAgJ2NvbCc6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxuICAnbGVnZW5kJzogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gICdwYXJhbSc6IFsxLCAnPG9iamVjdD4nLCAnPC9vYmplY3Q+J10sXG4gICd0cic6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuXG4gICdvcHRncm91cCc6IHNlbGVjdFdyYXAsXG4gICdvcHRpb24nOiBzZWxlY3RXcmFwLFxuXG4gICdjYXB0aW9uJzogdGFibGVXcmFwLFxuICAnY29sZ3JvdXAnOiB0YWJsZVdyYXAsXG4gICd0Ym9keSc6IHRhYmxlV3JhcCxcbiAgJ3Rmb290JzogdGFibGVXcmFwLFxuICAndGhlYWQnOiB0YWJsZVdyYXAsXG5cbiAgJ3RkJzogdHJXcmFwLFxuICAndGgnOiB0cldyYXBcbn07XG5cbi8vIEluaXRpYWxpemUgdGhlIFNWRyBlbGVtZW50cyBzaW5jZSB3ZSBrbm93IHRoZXknbGwgYWx3YXlzIG5lZWQgdG8gYmUgd3JhcHBlZFxuLy8gY29uc2lzdGVudGx5LiBJZiB0aGV5IGFyZSBjcmVhdGVkIGluc2lkZSBhIDxkaXY+IHRoZXkgd2lsbCBiZSBpbml0aWFsaXplZCBpblxuLy8gdGhlIHdyb25nIG5hbWVzcGFjZSAoYW5kIHdpbGwgbm90IGRpc3BsYXkpLlxudmFyIHN2Z0VsZW1lbnRzID0gWydjaXJjbGUnLCAnY2xpcFBhdGgnLCAnZGVmcycsICdlbGxpcHNlJywgJ2cnLCAnaW1hZ2UnLCAnbGluZScsICdsaW5lYXJHcmFkaWVudCcsICdtYXNrJywgJ3BhdGgnLCAncGF0dGVybicsICdwb2x5Z29uJywgJ3BvbHlsaW5lJywgJ3JhZGlhbEdyYWRpZW50JywgJ3JlY3QnLCAnc3RvcCcsICd0ZXh0JywgJ3RzcGFuJ107XG5zdmdFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlTmFtZSkge1xuICBtYXJrdXBXcmFwW25vZGVOYW1lXSA9IHN2Z1dyYXA7XG4gIHNob3VsZFdyYXBbbm9kZU5hbWVdID0gdHJ1ZTtcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIG1hcmt1cCB3cmFwIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBzdXBwbGllZCBgbm9kZU5hbWVgLlxuICpcbiAqIE5PVEU6IFRoaXMgbGF6aWx5IGRldGVjdHMgd2hpY2ggd3JhcHMgYXJlIG5lY2Vzc2FyeSBmb3IgdGhlIGN1cnJlbnQgYnJvd3Nlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbm9kZU5hbWUgTG93ZXJjYXNlIGBub2RlTmFtZWAuXG4gKiBAcmV0dXJuIHs/YXJyYXl9IE1hcmt1cCB3cmFwIGNvbmZpZ3VyYXRpb24sIGlmIGFwcGxpY2FibGUuXG4gKi9cbmZ1bmN0aW9uIGdldE1hcmt1cFdyYXAobm9kZU5hbWUpIHtcbiAgISEhZHVtbXlOb2RlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ01hcmt1cCB3cmFwcGluZyBub2RlIG5vdCBpbml0aWFsaXplZCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKCFtYXJrdXBXcmFwLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuICAgIG5vZGVOYW1lID0gJyonO1xuICB9XG4gIGlmICghc2hvdWxkV3JhcC5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICBpZiAobm9kZU5hbWUgPT09ICcqJykge1xuICAgICAgZHVtbXlOb2RlLmlubmVySFRNTCA9ICc8bGluayAvPic7XG4gICAgfSBlbHNlIHtcbiAgICAgIGR1bW15Tm9kZS5pbm5lckhUTUwgPSAnPCcgKyBub2RlTmFtZSArICc+PC8nICsgbm9kZU5hbWUgKyAnPic7XG4gICAgfVxuICAgIHNob3VsZFdyYXBbbm9kZU5hbWVdID0gIWR1bW15Tm9kZS5maXJzdENoaWxkO1xuICB9XG4gIHJldHVybiBzaG91bGRXcmFwW25vZGVOYW1lXSA/IG1hcmt1cFdyYXBbbm9kZU5hbWVdIDogbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRNYXJrdXBXcmFwOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvblxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogR2V0cyB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBzdXBwbGllZCBlbGVtZW50IG9yIHdpbmRvdy5cbiAqXG4gKiBUaGUgcmV0dXJuIHZhbHVlcyBhcmUgdW5ib3VuZGVkLCB1bmxpa2UgYGdldFNjcm9sbFBvc2l0aW9uYC4gVGhpcyBtZWFucyB0aGV5XG4gKiBtYXkgYmUgbmVnYXRpdmUgb3IgZXhjZWVkIHRoZSBlbGVtZW50IGJvdW5kYXJpZXMgKHdoaWNoIGlzIHBvc3NpYmxlIHVzaW5nXG4gKiBpbmVydGlhbCBzY3JvbGxpbmcpLlxuICpcbiAqIEBwYXJhbSB7RE9NV2luZG93fERPTUVsZW1lbnR9IHNjcm9sbGFibGVcbiAqIEByZXR1cm4ge29iamVjdH0gTWFwIHdpdGggYHhgIGFuZCBgeWAga2V5cy5cbiAqL1xuZnVuY3Rpb24gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24oc2Nyb2xsYWJsZSkge1xuICBpZiAoc2Nyb2xsYWJsZSA9PT0gd2luZG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICAgIHk6IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHg6IHNjcm9sbGFibGUuc2Nyb2xsTGVmdCxcbiAgICB5OiBzY3JvbGxhYmxlLnNjcm9sbFRvcFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBoeXBoZW5hdGVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3VwcGVyY2FzZVBhdHRlcm4gPSAvKFtBLVpdKS9nO1xuXG4vKipcbiAqIEh5cGhlbmF0ZXMgYSBjYW1lbGNhc2VkIHN0cmluZywgZm9yIGV4YW1wbGU6XG4gKlxuICogICA+IGh5cGhlbmF0ZSgnYmFja2dyb3VuZENvbG9yJylcbiAqICAgPCBcImJhY2tncm91bmQtY29sb3JcIlxuICpcbiAqIEZvciBDU1Mgc3R5bGUgbmFtZXMsIHVzZSBgaHlwaGVuYXRlU3R5bGVOYW1lYCBpbnN0ZWFkIHdoaWNoIHdvcmtzIHByb3Blcmx5XG4gKiB3aXRoIGFsbCB2ZW5kb3IgcHJlZml4ZXMsIGluY2x1ZGluZyBgbXNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gaHlwaGVuYXRlKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoX3VwcGVyY2FzZVBhdHRlcm4sICctJDEnKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGh5cGhlbmF0ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaHlwaGVuYXRlU3R5bGVOYW1lXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGh5cGhlbmF0ZSA9IHJlcXVpcmUoJy4vaHlwaGVuYXRlJyk7XG5cbnZhciBtc1BhdHRlcm4gPSAvXm1zLS87XG5cbi8qKlxuICogSHlwaGVuYXRlcyBhIGNhbWVsY2FzZWQgQ1NTIHByb3BlcnR5IG5hbWUsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ2JhY2tncm91bmRDb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kLWNvbG9yXCJcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ01velRyYW5zaXRpb24nKVxuICogICA8IFwiLW1vei10cmFuc2l0aW9uXCJcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ21zVHJhbnNpdGlvbicpXG4gKiAgIDwgXCItbXMtdHJhbnNpdGlvblwiXG4gKlxuICogQXMgTW9kZXJuaXpyIHN1Z2dlc3RzIChodHRwOi8vbW9kZXJuaXpyLmNvbS9kb2NzLyNwcmVmaXhlZCksIGFuIGBtc2AgcHJlZml4XG4gKiBpcyBjb252ZXJ0ZWQgdG8gYC1tcy1gLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gaHlwaGVuYXRlU3R5bGVOYW1lKHN0cmluZykge1xuICByZXR1cm4gaHlwaGVuYXRlKHN0cmluZykucmVwbGFjZShtc1BhdHRlcm4sICctbXMtJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaHlwaGVuYXRlU3R5bGVOYW1lOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnZhcmlhbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgKyAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICB9KSk7XG4gICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNOb2RlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbi8qKlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBvYmplY3QgaXMgYSBET00gbm9kZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBpc05vZGUob2JqZWN0KSB7XG4gIHJldHVybiAhIShvYmplY3QgJiYgKHR5cGVvZiBOb2RlID09PSAnZnVuY3Rpb24nID8gb2JqZWN0IGluc3RhbmNlb2YgTm9kZSA6IHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmplY3Qubm9kZVR5cGUgPT09ICdudW1iZXInICYmIHR5cGVvZiBvYmplY3Qubm9kZU5hbWUgPT09ICdzdHJpbmcnKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNOb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpc1RleHROb2RlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzTm9kZSA9IHJlcXVpcmUoJy4vaXNOb2RlJyk7XG5cbi8qKlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBvYmplY3QgaXMgYSBET00gdGV4dCBub2RlLlxuICovXG5mdW5jdGlvbiBpc1RleHROb2RlKG9iamVjdCkge1xuICByZXR1cm4gaXNOb2RlKG9iamVjdCkgJiYgb2JqZWN0Lm5vZGVUeXBlID09IDM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUZXh0Tm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUga2V5TWlycm9yXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhbiBlbnVtZXJhdGlvbiB3aXRoIGtleXMgZXF1YWwgdG8gdGhlaXIgdmFsdWUuXG4gKlxuICogRm9yIGV4YW1wbGU6XG4gKlxuICogICB2YXIgQ09MT1JTID0ga2V5TWlycm9yKHtibHVlOiBudWxsLCByZWQ6IG51bGx9KTtcbiAqICAgdmFyIG15Q29sb3IgPSBDT0xPUlMuYmx1ZTtcbiAqICAgdmFyIGlzQ29sb3JWYWxpZCA9ICEhQ09MT1JTW215Q29sb3JdO1xuICpcbiAqIFRoZSBsYXN0IGxpbmUgY291bGQgbm90IGJlIHBlcmZvcm1lZCBpZiB0aGUgdmFsdWVzIG9mIHRoZSBnZW5lcmF0ZWQgZW51bSB3ZXJlXG4gKiBub3QgZXF1YWwgdG8gdGhlaXIga2V5cy5cbiAqXG4gKiAgIElucHV0OiAge2tleTE6IHZhbDEsIGtleTI6IHZhbDJ9XG4gKiAgIE91dHB1dDoge2tleTE6IGtleTEsIGtleTI6IGtleTJ9XG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9ialxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG52YXIga2V5TWlycm9yID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIgcmV0ID0ge307XG4gIHZhciBrZXk7XG4gICEob2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmICFBcnJheS5pc0FycmF5KG9iaikpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2tleU1pcnJvciguLi4pOiBBcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGZvciAoa2V5IGluIG9iaikge1xuICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICByZXRba2V5XSA9IGtleTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlNaXJyb3I7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGtleU9mXG4gKi9cblxuLyoqXG4gKiBBbGxvd3MgZXh0cmFjdGlvbiBvZiBhIG1pbmlmaWVkIGtleS4gTGV0J3MgdGhlIGJ1aWxkIHN5c3RlbSBtaW5pZnkga2V5c1xuICogd2l0aG91dCBsb3NpbmcgdGhlIGFiaWxpdHkgdG8gZHluYW1pY2FsbHkgdXNlIGtleSBzdHJpbmdzIGFzIHZhbHVlc1xuICogdGhlbXNlbHZlcy4gUGFzcyBpbiBhbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBrZXkvdmFsIHBhaXIgYW5kIGl0IHdpbGwgcmV0dXJuXG4gKiB5b3UgdGhlIHN0cmluZyBrZXkgb2YgdGhhdCBzaW5nbGUgcmVjb3JkLiBTdXBwb3NlIHlvdSB3YW50IHRvIGdyYWIgdGhlXG4gKiB2YWx1ZSBmb3IgYSBrZXkgJ2NsYXNzTmFtZScgaW5zaWRlIG9mIGFuIG9iamVjdC4gS2V5L3ZhbCBtaW5pZmljYXRpb24gbWF5XG4gKiBoYXZlIGFsaWFzZWQgdGhhdCBrZXkgdG8gYmUgJ3hhMTInLiBrZXlPZih7Y2xhc3NOYW1lOiBudWxsfSkgd2lsbCByZXR1cm5cbiAqICd4YTEyJyBpbiB0aGF0IGNhc2UuIFJlc29sdmUga2V5cyB5b3Ugd2FudCB0byB1c2Ugb25jZSBhdCBzdGFydHVwIHRpbWUsIHRoZW5cbiAqIHJldXNlIHRob3NlIHJlc29sdXRpb25zLlxuICovXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGtleU9mID0gZnVuY3Rpb24gKG9uZUtleU9iaikge1xuICB2YXIga2V5O1xuICBmb3IgKGtleSBpbiBvbmVLZXlPYmopIHtcbiAgICBpZiAoIW9uZUtleU9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5T2Y7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIG1hcE9iamVjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcHJvdmlkZWQgYGNhbGxiYWNrYCBvbmNlIGZvciBlYWNoIGVudW1lcmFibGUgb3duIHByb3BlcnR5IGluIHRoZVxuICogb2JqZWN0IGFuZCBjb25zdHJ1Y3RzIGEgbmV3IG9iamVjdCBmcm9tIHRoZSByZXN1bHRzLiBUaGUgYGNhbGxiYWNrYCBpc1xuICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAqXG4gKiAgLSB0aGUgcHJvcGVydHkgdmFsdWVcbiAqICAtIHRoZSBwcm9wZXJ0eSBuYW1lXG4gKiAgLSB0aGUgb2JqZWN0IGJlaW5nIHRyYXZlcnNlZFxuICpcbiAqIFByb3BlcnRpZXMgdGhhdCBhcmUgYWRkZWQgYWZ0ZXIgdGhlIGNhbGwgdG8gYG1hcE9iamVjdGAgd2lsbCBub3QgYmUgdmlzaXRlZFxuICogYnkgYGNhbGxiYWNrYC4gSWYgdGhlIHZhbHVlcyBvZiBleGlzdGluZyBwcm9wZXJ0aWVzIGFyZSBjaGFuZ2VkLCB0aGUgdmFsdWVcbiAqIHBhc3NlZCB0byBgY2FsbGJhY2tgIHdpbGwgYmUgdGhlIHZhbHVlIGF0IHRoZSB0aW1lIGBtYXBPYmplY3RgIHZpc2l0cyB0aGVtLlxuICogUHJvcGVydGllcyB0aGF0IGFyZSBkZWxldGVkIGJlZm9yZSBiZWluZyB2aXNpdGVkIGFyZSBub3QgdmlzaXRlZC5cbiAqXG4gKiBAZ3JlcCBmdW5jdGlvbiBvYmplY3RNYXAoKVxuICogQGdyZXAgZnVuY3Rpb24gb2JqTWFwKClcbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gbWFwT2JqZWN0KG9iamVjdCwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgaWYgKCFvYmplY3QpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgcmVzdWx0ID0ge307XG4gIGZvciAodmFyIG5hbWUgaW4gb2JqZWN0KSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBuYW1lKSkge1xuICAgICAgcmVzdWx0W25hbWVdID0gY2FsbGJhY2suY2FsbChjb250ZXh0LCBvYmplY3RbbmFtZV0sIG5hbWUsIG9iamVjdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwT2JqZWN0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBtZW1vaXplU3RyaW5nT25seVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVtb2l6ZXMgdGhlIHJldHVybiB2YWx1ZSBvZiBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBvbmUgc3RyaW5nIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gbWVtb2l6ZVN0cmluZ09ubHkoY2FsbGJhY2spIHtcbiAgdmFyIGNhY2hlID0ge307XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgaWYgKCFjYWNoZS5oYXNPd25Qcm9wZXJ0eShzdHJpbmcpKSB7XG4gICAgICBjYWNoZVtzdHJpbmddID0gY2FsbGJhY2suY2FsbCh0aGlzLCBzdHJpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVbc3RyaW5nXTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtZW1vaXplU3RyaW5nT25seTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2hhbGxvd0VxdWFsXG4gKiBAdHlwZWNoZWNrc1xuICogXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFBlcmZvcm1zIGVxdWFsaXR5IGJ5IGl0ZXJhdGluZyB0aHJvdWdoIGtleXMgb24gYW4gb2JqZWN0IGFuZCByZXR1cm5pbmcgZmFsc2VcbiAqIHdoZW4gYW55IGtleSBoYXMgdmFsdWVzIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgZXF1YWwgYmV0d2VlbiB0aGUgYXJndW1lbnRzLlxuICogUmV0dXJucyB0cnVlIHdoZW4gdGhlIHZhbHVlcyBvZiBhbGwga2V5cyBhcmUgc3RyaWN0bHkgZXF1YWwuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCKSB7XG4gIGlmIChvYmpBID09PSBvYmpCKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAodHlwZW9mIG9iakEgIT09ICdvYmplY3QnIHx8IG9iakEgPT09IG51bGwgfHwgdHlwZW9mIG9iakIgIT09ICdvYmplY3QnIHx8IG9iakIgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcbiAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMob2JqQik7XG5cbiAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gVGVzdCBmb3IgQSdzIGtleXMgZGlmZmVyZW50IGZyb20gQi5cbiAgdmFyIGJIYXNPd25Qcm9wZXJ0eSA9IGhhc093blByb3BlcnR5LmJpbmQob2JqQik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIWJIYXNPd25Qcm9wZXJ0eShrZXlzQVtpXSkgfHwgb2JqQVtrZXlzQVtpXV0gIT09IG9iakJba2V5c0FbaV1dKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hhbGxvd0VxdWFsOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSB0b0FycmF5XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQ29udmVydCBhcnJheS1saWtlIG9iamVjdHMgdG8gYXJyYXlzLlxuICpcbiAqIFRoaXMgQVBJIGFzc3VtZXMgdGhlIGNhbGxlciBrbm93cyB0aGUgY29udGVudHMgb2YgdGhlIGRhdGEgdHlwZS4gRm9yIGxlc3NcbiAqIHdlbGwgZGVmaW5lZCBpbnB1dHMgdXNlIGNyZWF0ZUFycmF5RnJvbU1peGVkLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufGZpbGVsaXN0fSBvYmpcbiAqIEByZXR1cm4ge2FycmF5fVxuICovXG5mdW5jdGlvbiB0b0FycmF5KG9iaikge1xuICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aDtcblxuICAvLyBTb21lIGJyb3dzZSBidWlsdGluIG9iamVjdHMgY2FuIHJlcG9ydCB0eXBlb2YgJ2Z1bmN0aW9uJyAoZS5nLiBOb2RlTGlzdCBpblxuICAvLyBvbGQgdmVyc2lvbnMgb2YgU2FmYXJpKS5cbiAgISghQXJyYXkuaXNBcnJheShvYmopICYmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogQXJyYXktbGlrZSBvYmplY3QgZXhwZWN0ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgISh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogT2JqZWN0IG5lZWRzIGEgbGVuZ3RoIHByb3BlcnR5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICEobGVuZ3RoID09PSAwIHx8IGxlbmd0aCAtIDEgaW4gb2JqKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0b0FycmF5OiBPYmplY3Qgc2hvdWxkIGhhdmUga2V5cyBmb3IgaW5kaWNlcycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAvLyBPbGQgSUUgZG9lc24ndCBnaXZlIGNvbGxlY3Rpb25zIGFjY2VzcyB0byBoYXNPd25Qcm9wZXJ0eS4gQXNzdW1lIGlucHV0c1xuICAvLyB3aXRob3V0IG1ldGhvZCB3aWxsIHRocm93IGR1cmluZyB0aGUgc2xpY2UgY2FsbCBhbmQgc2tpcCBzdHJhaWdodCB0byB0aGVcbiAgLy8gZmFsbGJhY2suXG4gIGlmIChvYmouaGFzT3duUHJvcGVydHkpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSUUgPCA5IGRvZXMgbm90IHN1cHBvcnQgQXJyYXkjc2xpY2Ugb24gY29sbGVjdGlvbnMgb2JqZWN0c1xuICAgIH1cbiAgfVxuXG4gIC8vIEZhbGwgYmFjayB0byBjb3B5aW5nIGtleSBieSBrZXkuIFRoaXMgYXNzdW1lcyBhbGwga2V5cyBoYXZlIGEgdmFsdWUsXG4gIC8vIHNvIHdpbGwgbm90IHByZXNlcnZlIHNwYXJzZWx5IHBvcHVsYXRlZCBpbnB1dHMuXG4gIHZhciByZXQgPSBBcnJheShsZW5ndGgpO1xuICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgbGVuZ3RoOyBpaSsrKSB7XG4gICAgcmV0W2lpXSA9IG9ialtpaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0FycmF5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSB3YXJuaW5nXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJy4vZW1wdHlGdW5jdGlvbicpO1xuXG4vKipcbiAqIFNpbWlsYXIgdG8gaW52YXJpYW50IGJ1dCBvbmx5IGxvZ3MgYSB3YXJuaW5nIGlmIHRoZSBjb25kaXRpb24gaXMgbm90IG1ldC5cbiAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9nIGlzc3VlcyBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMgaW4gY3JpdGljYWxcbiAqIHBhdGhzLiBSZW1vdmluZyB0aGUgbG9nZ2luZyBjb2RlIGZvciBwcm9kdWN0aW9uIGVudmlyb25tZW50cyB3aWxsIGtlZXAgdGhlXG4gKiBzYW1lIGxvZ2ljIGFuZCBmb2xsb3cgdGhlIHNhbWUgY29kZSBwYXRocy5cbiAqL1xuXG52YXIgd2FybmluZyA9IGVtcHR5RnVuY3Rpb247XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHdhcm5pbmcgPSBmdW5jdGlvbiAoY29uZGl0aW9uLCBmb3JtYXQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDJdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgd2FybmluZyhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyAnICsgJ21lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0LmluZGV4T2YoJ0ZhaWxlZCBDb21wb3NpdGUgcHJvcFR5cGU6ICcpID09PSAwKSB7XG4gICAgICByZXR1cm47IC8vIElnbm9yZSBDb21wb3NpdGVDb21wb25lbnQgcHJvcHR5cGUgY2hlY2suXG4gICAgfVxuXG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICsgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS1cbiAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4gICAgICAgIC8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICB9IGNhdGNoICh4KSB7fVxuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3YXJuaW5nOyIsImV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gKGUgKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cbiIsInZhciB0b1N0cmluZyA9IHt9LnRvU3RyaW5nO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuIiwiIWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9YShiLHJlcXVpcmUoXCJqZGF0YXZpZXdcIikpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wiamRhdGF2aWV3XCJdLGZ1bmN0aW9uKGMpe3JldHVybiBhKGIsYyl9KTpiLmpCaW5hcnk9YShiLGIuakRhdGFWaWV3KX0oZnVuY3Rpb24oYSxiKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBjKGEsYil7cmV0dXJuIGImJmEgaW5zdGFuY2VvZiBifWZ1bmN0aW9uIGQoYSl7Zm9yKHZhciBiPTEsYz1hcmd1bWVudHMubGVuZ3RoO2M+YjsrK2Ipe3ZhciBkPWFyZ3VtZW50c1tiXTtmb3IodmFyIGUgaW4gZCl2b2lkIDAhPT1kW2VdJiYoYVtlXT1kW2VdKX1yZXR1cm4gYX1mdW5jdGlvbiBlKGEpe3JldHVybiBhcmd1bWVudHNbMF09bShhKSxkLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBmKGEsYixkKXtyZXR1cm4gYyhkLEZ1bmN0aW9uKT9kLmNhbGwoYSxiLmNvbnRleHRzWzBdKTpkfWZ1bmN0aW9uIGcoYSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGI9YXJndW1lbnRzLGQ9Yi5sZW5ndGgtMSxlPWEubGVuZ3RoLTEsZj1iW2RdO2lmKGIubGVuZ3RoPWUrMSwhYyhmLEZ1bmN0aW9uKSl7dmFyIGc9dGhpcztyZXR1cm4gbmV3IGwoZnVuY3Rpb24oYyxkKXtiW2VdPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE/ZChhKTpjKGIpfSxhLmFwcGx5KGcsYil9KX1iW2RdPXZvaWQgMCxiW2VdPWYsYS5hcHBseSh0aGlzLGIpfX1mdW5jdGlvbiBoKGEsZCl7cmV0dXJuIGMoYSxoKT9hLmFzKGQpOihjKGEsYil8fChhPW5ldyBiKGEsdm9pZCAwLHZvaWQgMCxkP2RbXCJqQmluYXJ5LmxpdHRsZUVuZGlhblwiXTp2b2lkIDApKSxjKHRoaXMsaCk/KHRoaXMudmlldz1hLHRoaXMudmlldy5zZWVrKDApLHRoaXMuY29udGV4dHM9W10sdGhpcy5hcyhkLCEwKSk6bmV3IGgoYSxkKSl9ZnVuY3Rpb24gaShhKXtyZXR1cm4gZShpLnByb3RvdHlwZSxhKX1mdW5jdGlvbiBqKGEpe3JldHVybiBlKGoucHJvdG90eXBlLGEse2NyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKCl7dmFyIGI9KGEuY3JlYXRlUHJvcGVydHl8fGoucHJvdG90eXBlLmNyZWF0ZVByb3BlcnR5KS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGIuZ2V0QmFzZVR5cGUmJihiLmJhc2VUeXBlPWIuYmluYXJ5LmdldFR5cGUoYi5nZXRCYXNlVHlwZShiLmJpbmFyeS5jb250ZXh0c1swXSkpKSxifX0pfXZhciBrPWEuZG9jdW1lbnQ7XCJhdG9iXCJpbiBhJiZcImJ0b2FcImluIGF8fCFmdW5jdGlvbigpe2Z1bmN0aW9uIGIoYSl7dmFyIGIsYyxlLGYsZyxoO2ZvcihlPWEubGVuZ3RoLGM9MCxiPVwiXCI7ZT5jOyl7aWYoZj0yNTUmYS5jaGFyQ29kZUF0KGMrKyksYz09ZSl7Yis9ZC5jaGFyQXQoZj4+MiksYis9ZC5jaGFyQXQoKDMmZik8PDQpLGIrPVwiPT1cIjticmVha31pZihnPWEuY2hhckNvZGVBdChjKyspLGM9PWUpe2IrPWQuY2hhckF0KGY+PjIpLGIrPWQuY2hhckF0KCgzJmYpPDw0fCgyNDAmZyk+PjQpLGIrPWQuY2hhckF0KCgxNSZnKTw8MiksYis9XCI9XCI7YnJlYWt9aD1hLmNoYXJDb2RlQXQoYysrKSxiKz1kLmNoYXJBdChmPj4yKSxiKz1kLmNoYXJBdCgoMyZmKTw8NHwoMjQwJmcpPj40KSxiKz1kLmNoYXJBdCgoMTUmZyk8PDJ8KDE5MiZoKT4+NiksYis9ZC5jaGFyQXQoNjMmaCl9cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXt2YXIgYixjLGQsZixnLGgsaTtmb3IoaD1hLmxlbmd0aCxnPTAsaT1cIlwiO2g+Zzspe2RvIGI9ZVsyNTUmYS5jaGFyQ29kZUF0KGcrKyldO3doaWxlKGg+ZyYmLTE9PWIpO2lmKC0xPT1iKWJyZWFrO2RvIGM9ZVsyNTUmYS5jaGFyQ29kZUF0KGcrKyldO3doaWxlKGg+ZyYmLTE9PWMpO2lmKC0xPT1jKWJyZWFrO2krPVN0cmluZy5mcm9tQ2hhckNvZGUoYjw8MnwoNDgmYyk+PjQpO2Rve2lmKGQ9MjU1JmEuY2hhckNvZGVBdChnKyspLDYxPT1kKXJldHVybiBpO2Q9ZVtkXX13aGlsZShoPmcmJi0xPT1kKTtpZigtMT09ZClicmVhaztpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgxNSZjKTw8NHwoNjAmZCk+PjIpO2Rve2lmKGY9MjU1JmEuY2hhckNvZGVBdChnKyspLDYxPT1mKXJldHVybiBpO2Y9ZVtmXX13aGlsZShoPmcmJi0xPT1mKTtpZigtMT09ZilicmVhaztpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKCgzJmQpPDw2fGYpfXJldHVybiBpfXZhciBkPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrL1wiLGU9Wy0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLC0xLDYyLC0xLC0xLC0xLDYzLDUyLDUzLDU0LDU1LDU2LDU3LDU4LDU5LDYwLDYxLC0xLC0xLC0xLC0xLC0xLC0xLC0xLDAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsLTEsLTEsLTEsLTEsLTEsLTEsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTEsLTEsLTEsLTEsLTEsLTFdO2EuYnRvYXx8KGEuYnRvYT1iKSxhLmF0b2J8fChhLmF0b2I9Yyl9KCk7dmFyIGw9YS5Qcm9taXNlfHxmdW5jdGlvbihhKXt0aGlzLnRoZW49YX0sbT1PYmplY3QuY3JlYXRlO218fChtPWZ1bmN0aW9uKGEpe3ZhciBiPWZ1bmN0aW9uKCl7fTtyZXR1cm4gYi5wcm90b3R5cGU9YSxuZXcgYn0pO3ZhciBuPWgucHJvdG90eXBlLG89bi50eXBlU2V0PXt9O24udG9WYWx1ZT1mdW5jdGlvbihhKXtyZXR1cm4gZih0aGlzLHRoaXMsYSl9LG4uX25hbWVkPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYS5kaXNwbGF5TmFtZT1iK1wiIEAgXCIrKHZvaWQgMCE9PWM/Yzp0aGlzLnZpZXcudGVsbCgpKSxhfTt2YXIgcD1PYmplY3QuZGVmaW5lUHJvcGVydHk7aWYocCl0cnl7cCh7fSxcInhcIix7fSl9Y2F0Y2gocSl7cD12b2lkIDB9ZWxzZSBwPWZ1bmN0aW9uKGEsYixjLGQpe2QmJihhW2JdPWMudmFsdWUpfTt2YXIgcj1cImpCaW5hcnkuQ2FjaGVcIixzPTA7bi5fZ2V0Q2FjaGVkPWZ1bmN0aW9uKGEsYixjKXtpZihhLmhhc093blByb3BlcnR5KHRoaXMuY2FjaGVLZXkpKXJldHVybiBhW3RoaXMuY2FjaGVLZXldO3ZhciBkPWIuY2FsbCh0aGlzLGEpO3JldHVybiBwKGEsdGhpcy5jYWNoZUtleSx7dmFsdWU6ZH0sYyksZH0sbi5nZXRDb250ZXh0PWZ1bmN0aW9uKGEpe3N3aXRjaCh0eXBlb2YgYSl7Y2FzZVwidW5kZWZpbmVkXCI6YT0wO2Nhc2VcIm51bWJlclwiOnJldHVybiB0aGlzLmNvbnRleHRzW2FdO2Nhc2VcInN0cmluZ1wiOnJldHVybiB0aGlzLmdldENvbnRleHQoZnVuY3Rpb24oYil7cmV0dXJuIGEgaW4gYn0pO2Nhc2VcImZ1bmN0aW9uXCI6Zm9yKHZhciBiPTAsYz10aGlzLmNvbnRleHRzLmxlbmd0aDtjPmI7YisrKXt2YXIgZD10aGlzLmNvbnRleHRzW2JdO2lmKGEuY2FsbCh0aGlzLGQpKXJldHVybiBkfX19LG4uaW5Db250ZXh0PWZ1bmN0aW9uKGEsYil7dGhpcy5jb250ZXh0cy51bnNoaWZ0KGEpO3ZhciBjPWIuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5jb250ZXh0cy5zaGlmdCgpLGN9LGkucHJvdG90eXBlPXtpbmhlcml0OmZ1bmN0aW9uKGEsYil7ZnVuY3Rpb24gYyhhLGIpe3ZhciBjPWZbYV07YyYmKGR8fChkPWUoZikpLGIuY2FsbChkLGMpLGRbYV09bnVsbCl9dmFyIGQsZj10aGlzO3JldHVybiBjKFwicGFyYW1zXCIsZnVuY3Rpb24oYil7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXRoaXNbYltjXV09YVtjXX0pLGMoXCJzZXRQYXJhbXNcIixmdW5jdGlvbihiKXtiLmFwcGx5KHRoaXMsYSl9KSxjKFwidHlwZVBhcmFtc1wiLGZ1bmN0aW9uKGEpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKyl7dmFyIGU9YVtjXSxmPXRoaXNbZV07ZiYmKHRoaXNbZV09YihmKSl9fSksYyhcInJlc29sdmVcIixmdW5jdGlvbihhKXthLmNhbGwodGhpcyxiKX0pLGR8fGZ9LGNyZWF0ZVByb3BlcnR5OmZ1bmN0aW9uKGEpe3JldHVybiBlKHRoaXMse2JpbmFyeTphLHZpZXc6YS52aWV3fSl9LHRvVmFsdWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYiE9PSExJiZcInN0cmluZ1wiPT10eXBlb2YgYT90aGlzLmJpbmFyeS5nZXRDb250ZXh0KGEpW2FdOmYodGhpcyx0aGlzLmJpbmFyeSxhKX19LGguVHlwZT1pLGoucHJvdG90eXBlPWUoaS5wcm90b3R5cGUse3NldFBhcmFtczpmdW5jdGlvbigpe3RoaXMuYmFzZVR5cGUmJih0aGlzLnR5cGVQYXJhbXM9W1wiYmFzZVR5cGVcIl0uY29uY2F0KHRoaXMudHlwZVBhcmFtc3x8W10pKX0sYmFzZVJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iaW5hcnkucmVhZCh0aGlzLmJhc2VUeXBlKX0sYmFzZVdyaXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmJpbmFyeS53cml0ZSh0aGlzLmJhc2VUeXBlLGEpfX0pLGQoai5wcm90b3R5cGUse3JlYWQ6ai5wcm90b3R5cGUuYmFzZVJlYWQsd3JpdGU6ai5wcm90b3R5cGUuYmFzZVdyaXRlfSksaC5UZW1wbGF0ZT1qLG4uYXM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iP3RoaXM6ZSh0aGlzKTtyZXR1cm4gYT1hfHxvLGMudHlwZVNldD1hPT09b3x8by5pc1Byb3RvdHlwZU9mKGEpP2E6ZShvLGEpLGMuY2FjaGVLZXk9cixjLmNhY2hlS2V5PWMuX2dldENhY2hlZChhLGZ1bmN0aW9uKCl7cmV0dXJuIHIrXCIuXCIrICsrc30sITApLGN9LG4uc2Vlaz1mdW5jdGlvbihhLGIpe2lmKGE9dGhpcy50b1ZhbHVlKGEpLHZvaWQgMCE9PWIpe3ZhciBjPXRoaXMudmlldy50ZWxsKCk7dGhpcy52aWV3LnNlZWsoYSk7dmFyIGQ9Yi5jYWxsKHRoaXMpO3JldHVybiB0aGlzLnZpZXcuc2VlayhjKSxkfXJldHVybiB0aGlzLnZpZXcuc2VlayhhKX0sbi50ZWxsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy50ZWxsKCl9LG4uc2tpcD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnNlZWsodGhpcy50ZWxsKCkrdGhpcy50b1ZhbHVlKGEpLGIpfSxuLnNsaWNlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbmV3IGgodGhpcy52aWV3LnNsaWNlKGEsYixjKSx0aGlzLnR5cGVTZXQpfSxuLl9nZXRUeXBlPWZ1bmN0aW9uKGEsYil7c3dpdGNoKHR5cGVvZiBhKXtjYXNlXCJzdHJpbmdcIjppZighKGEgaW4gdGhpcy50eXBlU2V0KSl0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJVbmtub3duIHR5cGU6IFwiK2EpO3JldHVybiB0aGlzLl9nZXRUeXBlKHRoaXMudHlwZVNldFthXSxiKTtjYXNlXCJudW1iZXJcIjpyZXR1cm4gdGhpcy5fZ2V0VHlwZShvLmJpdGZpZWxkLFthXSk7Y2FzZVwib2JqZWN0XCI6aWYoYyhhLGkpKXt2YXIgZD10aGlzO3JldHVybiBhLmluaGVyaXQoYnx8W10sZnVuY3Rpb24oYSl7cmV0dXJuIGQuZ2V0VHlwZShhKX0pfXJldHVybiBjKGEsQXJyYXkpP3RoaXMuX2dldENhY2hlZChhLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFR5cGUoYVswXSxhLnNsaWNlKDEpKX0sITApOnRoaXMuX2dldENhY2hlZChhLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldFR5cGUoby5vYmplY3QsW2FdKX0sITEpfX0sbi5nZXRUeXBlPWZ1bmN0aW9uKGEsYil7dmFyIGQ9dGhpcy5fZ2V0VHlwZShhLGIpO3JldHVybiBkJiYhYyhhLGkpJiYoZC5uYW1lPVwib2JqZWN0XCI9PXR5cGVvZiBhP2MoYSxBcnJheSk/YVswXStcIihcIithLnNsaWNlKDEpLmpvaW4oXCIsIFwiKStcIilcIjpcIm9iamVjdFwiOlN0cmluZyhhKSksZH0sbi5fYWN0aW9uPWZ1bmN0aW9uKGEsYixjKXtpZih2b2lkIDAhPT1hKXthPXRoaXMuZ2V0VHlwZShhKTt2YXIgZD10aGlzLl9uYW1lZChmdW5jdGlvbigpe3JldHVybiBjLmNhbGwodGhpcyxhLmNyZWF0ZVByb3BlcnR5KHRoaXMpLHRoaXMuY29udGV4dHNbMF0pfSxcIltcIithLm5hbWUrXCJdXCIsYik7cmV0dXJuIHZvaWQgMCE9PWI/dGhpcy5zZWVrKGIsZCk6ZC5jYWxsKHRoaXMpfX0sbi5yZWFkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuX2FjdGlvbihhLGIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5yZWFkKGIpfSl9LG4ucmVhZEFsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWQoXCJqQmluYXJ5LmFsbFwiLDApfSxuLndyaXRlPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5fYWN0aW9uKGEsYyxmdW5jdGlvbihhLGMpe3ZhciBkPXRoaXMudGVsbCgpO3JldHVybiBhLndyaXRlKGIsYyksdGhpcy50ZWxsKCktZH0pfSxuLndyaXRlQWxsPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLndyaXRlKFwiakJpbmFyeS5hbGxcIixhLDApfSxmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl7dmFyIGY9YltjXTtvW2YudG9Mb3dlckNhc2UoKV09ZShhLHtkYXRhVHlwZTpmfSl9fShpKHtwYXJhbXM6W1wibGl0dGxlRW5kaWFuXCJdLHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3W1wiZ2V0XCIrdGhpcy5kYXRhVHlwZV0odm9pZCAwLHRoaXMubGl0dGxlRW5kaWFuKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy52aWV3W1wid3JpdGVcIit0aGlzLmRhdGFUeXBlXShhLHRoaXMubGl0dGxlRW5kaWFuKX19KSxbXCJVaW50OFwiLFwiVWludDE2XCIsXCJVaW50MzJcIixcIlVpbnQ2NFwiLFwiSW50OFwiLFwiSW50MTZcIixcIkludDMyXCIsXCJJbnQ2NFwiLFwiRmxvYXQzMlwiLFwiRmxvYXQ2NFwiLFwiQ2hhclwiXSksZChvLHtcImJ5dGVcIjpvLnVpbnQ4LFwiZmxvYXRcIjpvLmZsb2F0MzIsXCJkb3VibGVcIjpvLmZsb2F0NjR9KSxvLmFycmF5PWooe3BhcmFtczpbXCJiYXNlVHlwZVwiLFwibGVuZ3RoXCJdLHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnRvVmFsdWUodGhpcy5sZW5ndGgpO2lmKHRoaXMuYmFzZVR5cGU9PT1vLnVpbnQ4KXJldHVybiB0aGlzLnZpZXcuZ2V0Qnl0ZXMoYSx2b2lkIDAsITAsITApO3ZhciBiO2lmKHZvaWQgMCE9PWEpe2I9bmV3IEFycmF5KGEpO2Zvcih2YXIgYz0wO2E+YztjKyspYltjXT10aGlzLmJhc2VSZWFkKCl9ZWxzZXt2YXIgZD10aGlzLnZpZXcuYnl0ZUxlbmd0aDtmb3IoYj1bXTt0aGlzLmJpbmFyeS50ZWxsKCk8ZDspYi5wdXNoKHRoaXMuYmFzZVJlYWQoKSl9cmV0dXJuIGJ9LHdyaXRlOmZ1bmN0aW9uKGEpe2lmKHRoaXMuYmFzZVR5cGU9PT1vLnVpbnQ4KXJldHVybiB0aGlzLnZpZXcud3JpdGVCeXRlcyhhKTtmb3IodmFyIGI9MCxjPWEubGVuZ3RoO2M+YjtiKyspdGhpcy5iYXNlV3JpdGUoYVtiXSl9fSksby5iaW5hcnk9aih7cGFyYW1zOltcImxlbmd0aFwiLFwidHlwZVNldFwiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iaW5hcnkudGVsbCgpLGI9dGhpcy5iaW5hcnkuc2tpcCh0aGlzLnRvVmFsdWUodGhpcy5sZW5ndGgpKSxjPXRoaXMudmlldy5zbGljZShhLGIpO3JldHVybiBuZXcgaChjLHRoaXMudHlwZVNldCl9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMuYmluYXJ5LndyaXRlKFwiYmxvYlwiLGEucmVhZChcImJsb2JcIiwwKSl9fSksby5iaXRmaWVsZD1pKHtwYXJhbXM6W1wiYml0U2l6ZVwiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRVbnNpZ25lZCh0aGlzLmJpdFNpemUpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLnZpZXcud3JpdGVVbnNpZ25lZChhLHRoaXMuYml0U2l6ZSl9fSksby5ibG9iPWkoe3BhcmFtczpbXCJsZW5ndGhcIl0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0Qnl0ZXModGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSl9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlldy53cml0ZUJ5dGVzKGEsITApfX0pLG9bXCJjb25zdFwiXT1qKHtwYXJhbXM6W1wiYmFzZVR5cGVcIixcInZhbHVlXCIsXCJzdHJpY3RcIl0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYmFzZVJlYWQoKTtpZih0aGlzLnN0cmljdCYmYSE9PXRoaXMudmFsdWUpe2lmKGModGhpcy5zdHJpY3QsRnVuY3Rpb24pKXJldHVybiB0aGlzLnN0cmljdChhKTt0aHJvdyBuZXcgVHlwZUVycm9yKFwiVW5leHBlY3RlZCB2YWx1ZSAoXCIrYStcIiAhPT0gXCIrdGhpcy52YWx1ZStcIikuXCIpfXJldHVybiBhfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLmJhc2VXcml0ZSh0aGlzLnN0cmljdHx8dm9pZCAwPT09YT90aGlzLnZhbHVlOmEpfX0pLG9bXCJlbnVtXCJdPWooe3BhcmFtczpbXCJiYXNlVHlwZVwiLFwibWF0Y2hlc1wiXSxzZXRQYXJhbXM6ZnVuY3Rpb24oYSxiKXt0aGlzLmJhY2tNYXRjaGVzPXt9O2Zvcih2YXIgYyBpbiBiKXRoaXMuYmFja01hdGNoZXNbYltjXV09Y30scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYmFzZVJlYWQoKTtyZXR1cm4gYSBpbiB0aGlzLm1hdGNoZXM/dGhpcy5tYXRjaGVzW2FdOmF9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMuYmFzZVdyaXRlKGEgaW4gdGhpcy5iYWNrTWF0Y2hlcz90aGlzLmJhY2tNYXRjaGVzW2FdOmEpfX0pLG8uZXh0ZW5kPWkoe3NldFBhcmFtczpmdW5jdGlvbigpe3RoaXMucGFydHM9YXJndW1lbnRzfSxyZXNvbHZlOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj10aGlzLnBhcnRzLGM9Yi5sZW5ndGgsZD1uZXcgQXJyYXkoYyksZT0wO2M+ZTtlKyspZFtlXT1hKGJbZV0pO3RoaXMucGFydHM9ZH0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMucGFydHMsYj10aGlzLmJpbmFyeS5yZWFkKGFbMF0pO3JldHVybiB0aGlzLmJpbmFyeS5pbkNvbnRleHQoYixmdW5jdGlvbigpe2Zvcih2YXIgYz0xLGU9YS5sZW5ndGg7ZT5jO2MrKylkKGIsdGhpcy5yZWFkKGFbY10pKX0pLGJ9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMucGFydHM7dGhpcy5iaW5hcnkuaW5Db250ZXh0KGEsZnVuY3Rpb24oKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspdGhpcy53cml0ZShiW2NdLGEpfSl9fSksb1tcImlmXCJdPWooe3BhcmFtczpbXCJjb25kaXRpb25cIixcInRydWVUeXBlXCIsXCJmYWxzZVR5cGVcIl0sdHlwZVBhcmFtczpbXCJ0cnVlVHlwZVwiLFwiZmFsc2VUeXBlXCJdLGdldEJhc2VUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudG9WYWx1ZSh0aGlzLmNvbmRpdGlvbik/dGhpcy50cnVlVHlwZTp0aGlzLmZhbHNlVHlwZX19KSxvLmlmX25vdD1vLmlmTm90PWooe3NldFBhcmFtczpmdW5jdGlvbihhLGIsYyl7dGhpcy5iYXNlVHlwZT1bXCJpZlwiLGEsYyxiXX19KSxvLmxhenk9aih7bWFya2VyOlwiakJpbmFyeS5MYXp5XCIscGFyYW1zOltcImlubmVyVHlwZVwiLFwibGVuZ3RoXCJdLGdldEJhc2VUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuW1wiYmluYXJ5XCIsdGhpcy5sZW5ndGgsdGhpcy5iaW5hcnkudHlwZVNldF19LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT1mdW5jdGlvbihiKXtyZXR1cm4gMD09PWFyZ3VtZW50cy5sZW5ndGg/XCJ2YWx1ZVwiaW4gYT9hLnZhbHVlOmEudmFsdWU9YS5iaW5hcnkucmVhZChhLmlubmVyVHlwZSk6ZChhLHt3YXNDaGFuZ2VkOiEwLHZhbHVlOmJ9KS52YWx1ZX07cmV0dXJuIGFbdGhpcy5tYXJrZXJdPSEwLGQoYSx7YmluYXJ5OmQodGhpcy5iYXNlUmVhZCgpLHtjb250ZXh0czp0aGlzLmJpbmFyeS5jb250ZXh0cy5zbGljZSgpfSksaW5uZXJUeXBlOnRoaXMuaW5uZXJUeXBlfSl9LHdyaXRlOmZ1bmN0aW9uKGEpe2Eud2FzQ2hhbmdlZHx8IWFbdGhpcy5tYXJrZXJdP3RoaXMuYmluYXJ5LndyaXRlKHRoaXMuaW5uZXJUeXBlLGEoKSk6dGhpcy5iYXNlV3JpdGUoYS5iaW5hcnkpfX0pLG8ub2JqZWN0PWkoe3BhcmFtczpbXCJzdHJ1Y3R1cmVcIixcInByb3RvXCJdLHJlc29sdmU6ZnVuY3Rpb24oYSl7dmFyIGI9e307Zm9yKHZhciBkIGluIHRoaXMuc3RydWN0dXJlKWJbZF09Yyh0aGlzLnN0cnVjdHVyZVtkXSxGdW5jdGlvbik/dGhpcy5zdHJ1Y3R1cmVbZF06YSh0aGlzLnN0cnVjdHVyZVtkXSk7dGhpcy5zdHJ1Y3R1cmU9Yn0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj10aGlzLnN0cnVjdHVyZSxkPXRoaXMucHJvdG8/ZSh0aGlzLnByb3RvKTp7fTtyZXR1cm4gdGhpcy5iaW5hcnkuaW5Db250ZXh0KGQsZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gYil0aGlzLl9uYW1lZChmdW5jdGlvbigpe3ZhciBmPWMoYltlXSxGdW5jdGlvbik/YltlXS5jYWxsKGEsZCk6dGhpcy5yZWFkKGJbZV0pO3ZvaWQgMCE9PWYmJihkW2VdPWYpfSxlKS5jYWxsKHRoaXMpfSksZH0sd3JpdGU6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxkPXRoaXMuc3RydWN0dXJlO3RoaXMuYmluYXJ5LmluQ29udGV4dChhLGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGQpdGhpcy5fbmFtZWQoZnVuY3Rpb24oKXtjKGRbZV0sRnVuY3Rpb24pP2FbZV09ZFtlXS5jYWxsKGIsYSk6dGhpcy53cml0ZShkW2VdLGFbZV0pfSxlKS5jYWxsKHRoaXMpfSl9fSksby5za2lwPWkoe3BhcmFtczpbXCJsZW5ndGhcIl0scmVhZDpmdW5jdGlvbigpe3RoaXMudmlldy5za2lwKHRoaXMudG9WYWx1ZSh0aGlzLmxlbmd0aCkpfSx3cml0ZTpmdW5jdGlvbigpe3RoaXMucmVhZCgpfX0pLG8uc3RyaW5nPWooe3BhcmFtczpbXCJsZW5ndGhcIixcImVuY29kaW5nXCJdLHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldFN0cmluZyh0aGlzLnRvVmFsdWUodGhpcy5sZW5ndGgpLHZvaWQgMCx0aGlzLmVuY29kaW5nKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy52aWV3LndyaXRlU3RyaW5nKGEsdGhpcy5lbmNvZGluZyl9fSksby5zdHJpbmcwPWkoe3BhcmFtczpbXCJsZW5ndGhcIixcImVuY29kaW5nXCJdLHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnZpZXcsYj10aGlzLmxlbmd0aDtpZih2b2lkIDA9PT1iKXt2YXIgYyxkPWEudGVsbCgpLGU9MDtmb3IoYj1hLmJ5dGVMZW5ndGgtZDtiPmUmJihjPWEuZ2V0VWludDgoKSk7KWUrKzt2YXIgZj1hLmdldFN0cmluZyhlLGQsdGhpcy5lbmNvZGluZyk7cmV0dXJuIGI+ZSYmYS5za2lwKDEpLGZ9cmV0dXJuIGEuZ2V0U3RyaW5nKGIsdm9pZCAwLHRoaXMuZW5jb2RpbmcpLnJlcGxhY2UoL1xcMC4qJC8sXCJcIil9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMudmlldyxjPXZvaWQgMD09PXRoaXMubGVuZ3RoPzE6dGhpcy5sZW5ndGgtYS5sZW5ndGg7Yi53cml0ZVN0cmluZyhhLHZvaWQgMCx0aGlzLmVuY29kaW5nKSxjPjAmJihiLndyaXRlVWludDgoMCksYi5za2lwKGMtMSkpfX0pO2gubG9hZERhdGE9ZyhmdW5jdGlvbihiLGQpe3ZhciBlO2lmKGMoYixhLkJsb2IpKXt2YXIgZjtpZihcIkZpbGVSZWFkZXJcImluIGEpZj1uZXcgRmlsZVJlYWRlcixmLm9ubG9hZD1mLm9uZXJyb3I9ZnVuY3Rpb24oKXtkKHRoaXMuZXJyb3IsdGhpcy5yZXN1bHQpfSxmLnJlYWRBc0FycmF5QnVmZmVyKGIpO2Vsc2V7Zj1uZXcgRmlsZVJlYWRlclN5bmM7dmFyIGcsaDt0cnl7aD1mLnJlYWRBc0FycmF5QnVmZmVyKGIpfWNhdGNoKGkpe2c9aX1maW5hbGx5e2QoZyxoKX19fWVsc2V7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGIpZChuZXcgVHlwZUVycm9yKFwiVW5zdXBwb3J0ZWQgc291cmNlIHR5cGUuXCIpKTtlbHNlIGlmKGU9Yi5tYXRjaCgvXmRhdGE6KC4rPykoO2Jhc2U2NCk/LCguKikkLykpdHJ5e3ZhciBqPWVbMl0saz1lWzNdO2QobnVsbCwoaj9hdG9iOmRlY29kZVVSSUNvbXBvbmVudCkoaykpfWNhdGNoKGkpe2QoaSl9ZWxzZSBpZihcIlhNTEh0dHBSZXF1ZXN0XCJpbiBhKXt2YXIgbD1uZXcgWE1MSHR0cFJlcXVlc3Q7bC5vcGVuKFwiR0VUXCIsYiwhMCksXCJyZXNwb25zZVR5cGVcImluIGw/bC5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiOlwib3ZlcnJpZGVNaW1lVHlwZVwiaW4gbD9sLm92ZXJyaWRlTWltZVR5cGUoXCJ0ZXh0L3BsYWluOyBjaGFyc2V0PXgtdXNlci1kZWZpbmVkXCIpOmwuc2V0UmVxdWVzdEhlYWRlcihcIkFjY2VwdC1DaGFyc2V0XCIsXCJ4LXVzZXItZGVmaW5lZFwiKSxcIm9ubG9hZFwiaW4gbHx8KGwub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7ND09PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5vbmxvYWQoKX0pO3ZhciBtPWZ1bmN0aW9uKGEpe2QobmV3IEVycm9yKGEpKX07bC5vbmxvYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PXRoaXMuc3RhdHVzJiYyMDAhPT10aGlzLnN0YXR1cz9tKFwiSFRUUCBFcnJvciAjXCIrdGhpcy5zdGF0dXMrXCI6IFwiK3RoaXMuc3RhdHVzVGV4dCk6KFwicmVzcG9uc2VcImluIHRoaXN8fCh0aGlzLnJlc3BvbnNlPW5ldyBWQkFycmF5KHRoaXMucmVzcG9uc2VCb2R5KS50b0FycmF5KCkpLHZvaWQgZChudWxsLHRoaXMucmVzcG9uc2UpKX0sbC5vbmVycm9yPWZ1bmN0aW9uKCl7bShcIk5ldHdvcmsgZXJyb3IuXCIpfSxsLnNlbmQobnVsbCl9ZWxzZSBkKG5ldyBUeXBlRXJyb3IoXCJVbnN1cHBvcnRlZCBzb3VyY2UgdHlwZS5cIikpfX0pLGgubG9hZD1nKGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1oLmxvYWREYXRhKGEpO2gubG9hZC5nZXRUeXBlU2V0KGEsYixmdW5jdGlvbihhKXtkLnRoZW4oZnVuY3Rpb24oYil7YyhudWxsLG5ldyBoKGIsYSkpfSxjKX0pfSksaC5sb2FkLmdldFR5cGVTZXQ9ZnVuY3Rpb24oYSxiLGMpe2MoYil9LG4uX3RvVVJJPVwiVVJMXCJpbiBhJiZcImNyZWF0ZU9iamVjdFVSTFwiaW4gVVJMP2Z1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VlaygwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRCeXRlcygpfSk7cmV0dXJuIFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2JdLHt0eXBlOmF9KSl9OmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuc2VlaygwLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRTdHJpbmcodm9pZCAwLHZvaWQgMCxcImJpbmFyeVwiKX0pO3JldHVyblwiZGF0YTpcIithK1wiO2Jhc2U2NCxcIitidG9hKGIpfSxuLl9taW1lVHlwZT1mdW5jdGlvbihhKXtyZXR1cm4gYXx8dGhpcy50eXBlU2V0W1wiakJpbmFyeS5taW1lVHlwZVwiXXx8XCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0sbi50b1VSST1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5fdG9VUkkodGhpcy5fbWltZVR5cGUoYSkpfTtpZihrKXt2YXIgdD1oLmRvd25sb2FkZXI9ay5jcmVhdGVFbGVtZW50KFwiYVwiKTt0LnN0eWxlLmRpc3BsYXk9XCJub25lXCJ9cmV0dXJuIG4uc2F2ZUFzPWcoZnVuY3Rpb24oYSxiLGMpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhKXtcIm1zU2F2ZUJsb2JcImluIG5hdmlnYXRvcj9uYXZpZ2F0b3IubXNTYXZlQmxvYihuZXcgQmxvYihbdGhpcy5yZWFkKFwiYmxvYlwiLDApXSx7dHlwZTp0aGlzLl9taW1lVHlwZShiKX0pLGEpOms/KHQucGFyZW50Tm9kZXx8ay5ib2R5LmFwcGVuZENoaWxkKHQpLHQuaHJlZj10aGlzLnRvVVJJKGIpLHQuZG93bmxvYWQ9YSx0LmNsaWNrKCksdC5ocmVmPXQuZG93bmxvYWQ9XCJcIik6YyhuZXcgVHlwZUVycm9yKFwiU2F2aW5nIGZyb20gV2ViIFdvcmtlciBpcyBub3Qgc3VwcG9ydGVkLlwiKSksYygpfWVsc2UgYyhuZXcgVHlwZUVycm9yKFwiVW5zdXBwb3J0ZWQgc3RvcmFnZSB0eXBlLlwiKSl9KSxofSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1qYmluYXJ5LmpzLm1hcCIsIiFmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgdmFyIGdsb2JhbCA9IHRoaXM7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KGdsb2JhbCk7XG59KGZ1bmN0aW9uKGdsb2JhbCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIGlzKG9iaiwgQ3Rvcikge1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiAhPSB0eXBlb2Ygb2JqIHx8IG51bGwgPT09IG9iaiA/ICExIDogb2JqLmNvbnN0cnVjdG9yID09PSBDdG9yIHx8IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSBcIltvYmplY3QgXCIgKyBDdG9yLm5hbWUgKyBcIl1cIjtcbiAgICB9XG4gICAgZnVuY3Rpb24gYXJyYXlGcm9tKGFycmF5TGlrZSwgZm9yY2VDb3B5KSB7XG4gICAgICAgIHJldHVybiAhZm9yY2VDb3B5ICYmIGlzKGFycmF5TGlrZSwgQXJyYXkpID8gYXJyYXlMaWtlIDogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJyYXlMaWtlKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gZGVmaW5lZCh2YWx1ZSwgZGVmYXVsdFZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHZhbHVlID8gdmFsdWUgOiBkZWZhdWx0VmFsdWU7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGpEYXRhVmlldyhidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICBpZiAoakRhdGFWaWV3LmlzKGJ1ZmZlcikpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBidWZmZXIuc2xpY2UoYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5fbGl0dGxlRW5kaWFuID0gZGVmaW5lZChsaXR0bGVFbmRpYW4sIHJlc3VsdC5fbGl0dGxlRW5kaWFuKSwgcmVzdWx0O1xuICAgICAgICB9XG4gICAgICAgIGlmICghakRhdGFWaWV3LmlzKHRoaXMpKSByZXR1cm4gbmV3IGpEYXRhVmlldyhidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlciA9IGJ1ZmZlciA9IGpEYXRhVmlldy53cmFwQnVmZmVyKGJ1ZmZlciksIHRoaXMuX2lzQXJyYXlCdWZmZXIgPSBjb21wYXRpYmlsaXR5LkFycmF5QnVmZmVyICYmIGlzKGJ1ZmZlciwgQXJyYXlCdWZmZXIpLCBcbiAgICAgICAgdGhpcy5faXNQaXhlbERhdGEgPSAhMSwgdGhpcy5faXNEYXRhVmlldyA9IGNvbXBhdGliaWxpdHkuRGF0YVZpZXcgJiYgdGhpcy5faXNBcnJheUJ1ZmZlciwgXG4gICAgICAgIHRoaXMuX2lzTm9kZUJ1ZmZlciA9ICEwICYmIGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlciAmJiBpcyhidWZmZXIsIEJ1ZmZlciksICF0aGlzLl9pc05vZGVCdWZmZXIgJiYgIXRoaXMuX2lzQXJyYXlCdWZmZXIgJiYgIWlzKGJ1ZmZlciwgQXJyYXkpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiakRhdGFWaWV3IGJ1ZmZlciBoYXMgYW4gaW5jb21wYXRpYmxlIHR5cGVcIik7XG4gICAgICAgIHRoaXMuX2xpdHRsZUVuZGlhbiA9ICEhbGl0dGxlRW5kaWFuO1xuICAgICAgICB2YXIgYnVmZmVyTGVuZ3RoID0gXCJieXRlTGVuZ3RoXCIgaW4gYnVmZmVyID8gYnVmZmVyLmJ5dGVMZW5ndGggOiBidWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCAwKSwgdGhpcy5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA9IGRlZmluZWQoYnl0ZUxlbmd0aCwgYnVmZmVyTGVuZ3RoIC0gYnl0ZU9mZnNldCksIFxuICAgICAgICB0aGlzLl9vZmZzZXQgPSB0aGlzLl9iaXRPZmZzZXQgPSAwLCB0aGlzLl9pc0RhdGFWaWV3ID8gdGhpcy5fdmlldyA9IG5ldyBEYXRhVmlldyhidWZmZXIsIGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpIDogdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgYnl0ZUxlbmd0aCwgYnVmZmVyTGVuZ3RoKSwgXG4gICAgICAgIHRoaXMuX2VuZ2luZUFjdGlvbiA9IHRoaXMuX2lzRGF0YVZpZXcgPyB0aGlzLl9kYXRhVmlld0FjdGlvbiA6IHRoaXMuX2lzTm9kZUJ1ZmZlciA/IHRoaXMuX25vZGVCdWZmZXJBY3Rpb24gOiB0aGlzLl9pc0FycmF5QnVmZmVyID8gdGhpcy5fYXJyYXlCdWZmZXJBY3Rpb24gOiB0aGlzLl9hcnJheUFjdGlvbjtcbiAgICB9XG4gICAgZnVuY3Rpb24gZ2V0Q2hhckNvZGVzKHN0cmluZykge1xuICAgICAgICBpZiAoY29tcGF0aWJpbGl0eS5Ob2RlQnVmZmVyKSByZXR1cm4gbmV3IEJ1ZmZlcihzdHJpbmcsIFwiYmluYXJ5XCIpO1xuICAgICAgICBmb3IgKHZhciBUeXBlID0gY29tcGF0aWJpbGl0eS5BcnJheUJ1ZmZlciA/IFVpbnQ4QXJyYXkgOiBBcnJheSwgY29kZXMgPSBuZXcgVHlwZShzdHJpbmcubGVuZ3RoKSwgaSA9IDAsIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7IGxlbmd0aCA+IGk7IGkrKykgY29kZXNbaV0gPSAyNTUgJiBzdHJpbmcuY2hhckNvZGVBdChpKTtcbiAgICAgICAgcmV0dXJuIGNvZGVzO1xuICAgIH1cbiAgICBmdW5jdGlvbiBwb3cyKG4pIHtcbiAgICAgICAgcmV0dXJuIG4gPj0gMCAmJiAzMSA+IG4gPyAxIDw8IG4gOiBwb3cyW25dIHx8IChwb3cyW25dID0gTWF0aC5wb3coMiwgbikpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBVaW50NjQobG8sIGhpKSB7XG4gICAgICAgIHRoaXMubG8gPSBsbywgdGhpcy5oaSA9IGhpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBJbnQ2NCgpIHtcbiAgICAgICAgVWludDY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICAgIHZhciBjb21wYXRpYmlsaXR5ID0ge1xuICAgICAgICBOb2RlQnVmZmVyOiAhMCAmJiBcIkJ1ZmZlclwiIGluIGdsb2JhbCxcbiAgICAgICAgRGF0YVZpZXc6IFwiRGF0YVZpZXdcIiBpbiBnbG9iYWwsXG4gICAgICAgIEFycmF5QnVmZmVyOiBcIkFycmF5QnVmZmVyXCIgaW4gZ2xvYmFsLFxuICAgICAgICBQaXhlbERhdGE6ICExXG4gICAgfSwgVGV4dEVuY29kZXIgPSBnbG9iYWwuVGV4dEVuY29kZXIsIFRleHREZWNvZGVyID0gZ2xvYmFsLlRleHREZWNvZGVyO1xuICAgIGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlciAmJiAhZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBidWZmZXIud3JpdGVGbG9hdExFKDEvMCwgMCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlciA9ICExO1xuICAgICAgICB9XG4gICAgfShuZXcgQnVmZmVyKDQpKTtcbiAgICB2YXIgZGF0YVR5cGVzID0ge1xuICAgICAgICBJbnQ4OiAxLFxuICAgICAgICBJbnQxNjogMixcbiAgICAgICAgSW50MzI6IDQsXG4gICAgICAgIFVpbnQ4OiAxLFxuICAgICAgICBVaW50MTY6IDIsXG4gICAgICAgIFVpbnQzMjogNCxcbiAgICAgICAgRmxvYXQzMjogNCxcbiAgICAgICAgRmxvYXQ2NDogOFxuICAgIH07XG4gICAgakRhdGFWaWV3LndyYXBCdWZmZXIgPSBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgYnVmZmVyKSB7XG4gICAgICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICAgICAgaWYgKGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlcikgYnVmZmVyID0gbmV3IEJ1ZmZlcihidWZmZXIpLCBidWZmZXIuZmlsbCgwKTsgZWxzZSBpZiAoY29tcGF0aWJpbGl0eS5BcnJheUJ1ZmZlcikgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKS5idWZmZXI7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IG5ldyBBcnJheShidWZmZXIpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSBidWZmZXJbaV0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcblxuICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIGJ1ZmZlciA9IGdldENoYXJDb2RlcyhidWZmZXIpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBcImxlbmd0aFwiIGluIGJ1ZmZlciAmJiAhKGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlciAmJiBpcyhidWZmZXIsIEJ1ZmZlcikgfHwgY29tcGF0aWJpbGl0eS5BcnJheUJ1ZmZlciAmJiBpcyhidWZmZXIsIEFycmF5QnVmZmVyKSkgJiYgKGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlciA/IGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKSA6IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgPyBpcyhidWZmZXIsIEFycmF5QnVmZmVyKSB8fCAoYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKS5idWZmZXIsIFxuICAgICAgICAgICAgaXMoYnVmZmVyLCBBcnJheUJ1ZmZlcikgfHwgKGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGFycmF5RnJvbShidWZmZXIsICEwKSkuYnVmZmVyKSkgOiBidWZmZXIgPSBhcnJheUZyb20oYnVmZmVyKSksIFxuICAgICAgICAgICAgYnVmZmVyO1xuICAgICAgICB9XG4gICAgfSwgakRhdGFWaWV3LmlzID0gZnVuY3Rpb24odmlldykge1xuICAgICAgICByZXR1cm4gdmlldyAmJiB2aWV3LmpEYXRhVmlldztcbiAgICB9LCBqRGF0YVZpZXcuZnJvbSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IGpEYXRhVmlldyhhcmd1bWVudHMpO1xuICAgIH0sIGpEYXRhVmlldy5VaW50NjQgPSBVaW50NjQsIFVpbnQ2NC5wcm90b3R5cGUgPSB7XG4gICAgICAgIHZhbHVlT2Y6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG8gKyBwb3cyKDMyKSAqIHRoaXMuaGk7XG4gICAgICAgIH0sXG4gICAgICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiBOdW1iZXIucHJvdG90eXBlLnRvU3RyaW5nLmFwcGx5KHRoaXMudmFsdWVPZigpLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgfSwgVWludDY0LmZyb21OdW1iZXIgPSBmdW5jdGlvbihudW1iZXIpIHtcbiAgICAgICAgdmFyIGhpID0gTWF0aC5mbG9vcihudW1iZXIgLyBwb3cyKDMyKSksIGxvID0gbnVtYmVyIC0gaGkgKiBwb3cyKDMyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBVaW50NjQobG8sIGhpKTtcbiAgICB9LCBqRGF0YVZpZXcuSW50NjQgPSBJbnQ2NCwgSW50NjQucHJvdG90eXBlID0gXCJjcmVhdGVcIiBpbiBPYmplY3QgPyBPYmplY3QuY3JlYXRlKFVpbnQ2NC5wcm90b3R5cGUpIDogbmV3IFVpbnQ2NCgpLCBcbiAgICBJbnQ2NC5wcm90b3R5cGUudmFsdWVPZiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaSA8IHBvdzIoMzEpID8gVWludDY0LnByb3RvdHlwZS52YWx1ZU9mLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiAtKHBvdzIoMzIpIC0gdGhpcy5sbyArIHBvdzIoMzIpICogKHBvdzIoMzIpIC0gMSAtIHRoaXMuaGkpKTtcbiAgICB9LCBJbnQ2NC5mcm9tTnVtYmVyID0gZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgIHZhciBsbywgaGk7XG4gICAgICAgIGlmIChudW1iZXIgPj0gMCkge1xuICAgICAgICAgICAgdmFyIHVuc2lnbmVkID0gVWludDY0LmZyb21OdW1iZXIobnVtYmVyKTtcbiAgICAgICAgICAgIGxvID0gdW5zaWduZWQubG8sIGhpID0gdW5zaWduZWQuaGk7XG4gICAgICAgIH0gZWxzZSBoaSA9IE1hdGguZmxvb3IobnVtYmVyIC8gcG93MigzMikpLCBsbyA9IG51bWJlciAtIGhpICogcG93MigzMiksIGhpICs9IHBvdzIoMzIpO1xuICAgICAgICByZXR1cm4gbmV3IEludDY0KGxvLCBoaSk7XG4gICAgfTtcbiAgICB2YXIgcHJvdG8gPSBqRGF0YVZpZXcucHJvdG90eXBlID0ge1xuICAgICAgICBjb21wYXRpYmlsaXR5OiBjb21wYXRpYmlsaXR5LFxuICAgICAgICBqRGF0YVZpZXc6ICEwLFxuICAgICAgICBfY2hlY2tCb3VuZHM6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgsIG1heExlbmd0aCkge1xuICAgICAgICAgICAgaWYgKFwibnVtYmVyXCIgIT0gdHlwZW9mIGJ5dGVPZmZzZXQpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPZmZzZXQgaXMgbm90IGEgbnVtYmVyLlwiKTtcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiICE9IHR5cGVvZiBieXRlTGVuZ3RoKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU2l6ZSBpcyBub3QgYSBudW1iZXIuXCIpO1xuICAgICAgICAgICAgaWYgKDAgPiBieXRlTGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcihcIkxlbmd0aCBpcyBuZWdhdGl2ZS5cIik7XG4gICAgICAgICAgICBpZiAoMCA+IGJ5dGVPZmZzZXQgfHwgYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGggPiBkZWZpbmVkKG1heExlbmd0aCwgdGhpcy5ieXRlTGVuZ3RoKSkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJPZmZzZXRzIGFyZSBvdXQgb2YgYm91bmRzLlwiKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2FjdGlvbjogZnVuY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZW5naW5lQWN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpLCBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBfZGF0YVZpZXdBY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyBkYXRhVHlwZXNbdHlwZV0sIGlzUmVhZEFjdGlvbiA/IHRoaXMuX3ZpZXdbXCJnZXRcIiArIHR5cGVdKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikgOiB0aGlzLl92aWV3W1wic2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2FycmF5QnVmZmVyQWN0aW9uOiBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB0eXBlZEFycmF5LCBzaXplID0gZGF0YVR5cGVzW3R5cGVdLCBUeXBlZEFycmF5ID0gZ2xvYmFsW3R5cGUgKyBcIkFycmF5XCJdO1xuICAgICAgICAgICAgaWYgKGxpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCAxID09PSBzaXplIHx8ICh0aGlzLmJ5dGVPZmZzZXQgKyBieXRlT2Zmc2V0KSAlIHNpemUgPT09IDAgJiYgbGl0dGxlRW5kaWFuKSByZXR1cm4gdHlwZWRBcnJheSA9IG5ldyBUeXBlZEFycmF5KHRoaXMuYnVmZmVyLCB0aGlzLmJ5dGVPZmZzZXQgKyBieXRlT2Zmc2V0LCAxKSwgXG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgc2l6ZSwgaXNSZWFkQWN0aW9uID8gdHlwZWRBcnJheVswXSA6IHR5cGVkQXJyYXlbMF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGlzUmVhZEFjdGlvbiA/IHRoaXMuZ2V0Qnl0ZXMoc2l6ZSwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCAhMCkgOiBzaXplKTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlZEFycmF5ID0gbmV3IFR5cGVkQXJyYXkoYnl0ZXMuYnVmZmVyLCAwLCAxKSwgaXNSZWFkQWN0aW9uID8gdHlwZWRBcnJheVswXSA6ICh0eXBlZEFycmF5WzBdID0gdmFsdWUsIFxuICAgICAgICAgICAgdm9pZCB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBieXRlcywgbGl0dGxlRW5kaWFuKSk7XG4gICAgICAgIH0sXG4gICAgICAgIF9hcnJheUFjdGlvbjogZnVuY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gaXNSZWFkQWN0aW9uID8gdGhpc1tcIl9nZXRcIiArIHR5cGVdKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikgOiB0aGlzW1wiX3NldFwiICsgdHlwZV0oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRCeXRlczogZnVuY3Rpb24obGVuZ3RoLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIGxpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpLCBcbiAgICAgICAgICAgIGxlbmd0aCA9IGRlZmluZWQobGVuZ3RoLCB0aGlzLmJ5dGVMZW5ndGggLSBieXRlT2Zmc2V0KSwgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgbGVuZ3RoKSwgXG4gICAgICAgICAgICBieXRlT2Zmc2V0ICs9IHRoaXMuYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCAtIHRoaXMuYnl0ZU9mZnNldCArIGxlbmd0aDtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9pc0FycmF5QnVmZmVyID8gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIsIGJ5dGVPZmZzZXQsIGxlbmd0aCkgOiAodGhpcy5idWZmZXIuc2xpY2UgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlKS5jYWxsKHRoaXMuYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlT2Zmc2V0ICsgbGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiBsaXR0bGVFbmRpYW4gfHwgMSA+PSBsZW5ndGggPyByZXN1bHQgOiBhcnJheUZyb20ocmVzdWx0KS5yZXZlcnNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEJ5dGVzOiBmdW5jdGlvbihsZW5ndGgsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdG9BcnJheSkge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRoaXMuX2dldEJ5dGVzKGxlbmd0aCwgYnl0ZU9mZnNldCwgZGVmaW5lZChsaXR0bGVFbmRpYW4sICEwKSk7XG4gICAgICAgICAgICByZXR1cm4gdG9BcnJheSA/IGFycmF5RnJvbShyZXN1bHQpIDogcmVzdWx0O1xuICAgICAgICB9LFxuICAgICAgICBfc2V0Qnl0ZXM6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGJ5dGVzLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBsZW5ndGggPSBieXRlcy5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoMCAhPT0gbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpLCBcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCBsZW5ndGgpLCAhbGl0dGxlRW5kaWFuICYmIGxlbmd0aCA+IDEgJiYgKGJ5dGVzID0gYXJyYXlGcm9tKGJ5dGVzLCAhMCkucmV2ZXJzZSgpKSwgXG4gICAgICAgICAgICAgICAgYnl0ZU9mZnNldCArPSB0aGlzLmJ5dGVPZmZzZXQsIHRoaXMuX2lzQXJyYXlCdWZmZXIpIG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLCBieXRlT2Zmc2V0LCBsZW5ndGgpLnNldChieXRlcyk7IGVsc2UgaWYgKHRoaXMuX2lzTm9kZUJ1ZmZlcikgbmV3IEJ1ZmZlcihieXRlcykuY29weSh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCk7IGVsc2UgZm9yICh2YXIgaSA9IDA7IGxlbmd0aCA+IGk7IGkrKykgdGhpcy5idWZmZXJbYnl0ZU9mZnNldCArIGldID0gYnl0ZXNbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCAtIHRoaXMuYnl0ZU9mZnNldCArIGxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc2V0Qnl0ZXM6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGJ5dGVzLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIGJ5dGVzLCBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgITApKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0U3RyaW5nOiBmdW5jdGlvbihieXRlTGVuZ3RoLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2lzTm9kZUJ1ZmZlcikgcmV0dXJuIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCksIGJ5dGVMZW5ndGggPSBkZWZpbmVkKGJ5dGVMZW5ndGgsIHRoaXMuYnl0ZUxlbmd0aCAtIGJ5dGVPZmZzZXQpLCBcbiAgICAgICAgICAgIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgpLCB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgYnl0ZUxlbmd0aCwgXG4gICAgICAgICAgICB0aGlzLmJ1ZmZlci50b1N0cmluZyhlbmNvZGluZyB8fCBcImJpbmFyeVwiLCB0aGlzLmJ5dGVPZmZzZXQgKyBieXRlT2Zmc2V0LCB0aGlzLmJ5dGVPZmZzZXQgKyB0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5fZ2V0Qnl0ZXMoYnl0ZUxlbmd0aCwgYnl0ZU9mZnNldCwgITApO1xuICAgICAgICAgICAgaWYgKGVuY29kaW5nID0gXCJ1dGY4XCIgPT09IGVuY29kaW5nID8gXCJ1dGYtOFwiIDogZW5jb2RpbmcgfHwgXCJiaW5hcnlcIiwgVGV4dERlY29kZXIgJiYgXCJiaW5hcnlcIiAhPT0gZW5jb2RpbmcpIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmcpLmRlY29kZSh0aGlzLl9pc0FycmF5QnVmZmVyID8gYnl0ZXMgOiBuZXcgVWludDhBcnJheShieXRlcykpO1xuICAgICAgICAgICAgdmFyIHN0cmluZyA9IFwiXCI7XG4gICAgICAgICAgICBieXRlTGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGJ5dGVMZW5ndGggPiBpOyBpKyspIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldKTtcbiAgICAgICAgICAgIHJldHVybiBcInV0Zi04XCIgPT09IGVuY29kaW5nICYmIChzdHJpbmcgPSBkZWNvZGVVUklDb21wb25lbnQoZXNjYXBlKHN0cmluZykpKSwgc3RyaW5nO1xuICAgICAgICB9LFxuICAgICAgICBzZXRTdHJpbmc6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHN1YlN0cmluZywgZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc05vZGVCdWZmZXIpIHJldHVybiBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpLCB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCBzdWJTdHJpbmcubGVuZ3RoKSwgXG4gICAgICAgICAgICB2b2lkICh0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgdGhpcy5idWZmZXIud3JpdGUoc3ViU3RyaW5nLCB0aGlzLmJ5dGVPZmZzZXQgKyBieXRlT2Zmc2V0LCBlbmNvZGluZyB8fCBcImJpbmFyeVwiKSk7XG4gICAgICAgICAgICBlbmNvZGluZyA9IFwidXRmOFwiID09PSBlbmNvZGluZyA/IFwidXRmLThcIiA6IGVuY29kaW5nIHx8IFwiYmluYXJ5XCI7XG4gICAgICAgICAgICB2YXIgYnl0ZXM7XG4gICAgICAgICAgICBUZXh0RW5jb2RlciAmJiBcImJpbmFyeVwiICE9PSBlbmNvZGluZyA/IGJ5dGVzID0gbmV3IFRleHRFbmNvZGVyKGVuY29kaW5nKS5lbmNvZGUoc3ViU3RyaW5nKSA6IChcInV0Zi04XCIgPT09IGVuY29kaW5nICYmIChzdWJTdHJpbmcgPSB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoc3ViU3RyaW5nKSkpLCBcbiAgICAgICAgICAgIGJ5dGVzID0gZ2V0Q2hhckNvZGVzKHN1YlN0cmluZykpLCB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBieXRlcywgITApO1xuICAgICAgICB9LFxuICAgICAgICBnZXRDaGFyOiBmdW5jdGlvbihieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTdHJpbmcoMSwgYnl0ZU9mZnNldCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldENoYXI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGNoYXJhY3Rlcikge1xuICAgICAgICAgICAgdGhpcy5zZXRTdHJpbmcoYnl0ZU9mZnNldCwgY2hhcmFjdGVyKTtcbiAgICAgICAgfSxcbiAgICAgICAgdGVsbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBzZWVrOiBmdW5jdGlvbihieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgMCksIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIHNraXA6IGZ1bmN0aW9uKGJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlZWsodGhpcy5fb2Zmc2V0ICsgYnl0ZUxlbmd0aCk7XG4gICAgICAgIH0sXG4gICAgICAgIHNsaWNlOiBmdW5jdGlvbihzdGFydCwgZW5kLCBmb3JjZUNvcHkpIHtcbiAgICAgICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZU9mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMCA+IG9mZnNldCA/IG9mZnNldCArIGJ5dGVMZW5ndGggOiBvZmZzZXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhcnQgPSBub3JtYWxpemVPZmZzZXQoc3RhcnQsIHRoaXMuYnl0ZUxlbmd0aCksIGVuZCA9IG5vcm1hbGl6ZU9mZnNldChkZWZpbmVkKGVuZCwgdGhpcy5ieXRlTGVuZ3RoKSwgdGhpcy5ieXRlTGVuZ3RoKSwgXG4gICAgICAgICAgICBmb3JjZUNvcHkgPyBuZXcgakRhdGFWaWV3KHRoaXMuZ2V0Qnl0ZXMoZW5kIC0gc3RhcnQsIHN0YXJ0LCAhMCwgITApLCB2b2lkIDAsIHZvaWQgMCwgdGhpcy5fbGl0dGxlRW5kaWFuKSA6IG5ldyBqRGF0YVZpZXcodGhpcy5idWZmZXIsIHRoaXMuYnl0ZU9mZnNldCArIHN0YXJ0LCBlbmQgLSBzdGFydCwgdGhpcy5fbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWxpZ25CeTogZnVuY3Rpb24oYnl0ZUNvdW50KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYml0T2Zmc2V0ID0gMCwgMSAhPT0gZGVmaW5lZChieXRlQ291bnQsIDEpID8gdGhpcy5za2lwKGJ5dGVDb3VudCAtICh0aGlzLl9vZmZzZXQgJSBieXRlQ291bnQgfHwgYnl0ZUNvdW50KSkgOiB0aGlzLl9vZmZzZXQ7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRGbG9hdDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5fZ2V0Qnl0ZXMoOCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSwgc2lnbiA9IDEgLSAyICogKGJbN10gPj4gNyksIGV4cG9uZW50ID0gKChiWzddIDw8IDEgJiAyNTUpIDw8IDMgfCBiWzZdID4+IDQpIC0gMTAyMywgbWFudGlzc2EgPSAoMTUgJiBiWzZdKSAqIHBvdzIoNDgpICsgYls1XSAqIHBvdzIoNDApICsgYls0XSAqIHBvdzIoMzIpICsgYlszXSAqIHBvdzIoMjQpICsgYlsyXSAqIHBvdzIoMTYpICsgYlsxXSAqIHBvdzIoOCkgKyBiWzBdO1xuICAgICAgICAgICAgcmV0dXJuIDEwMjQgPT09IGV4cG9uZW50ID8gMCAhPT0gbWFudGlzc2EgPyAwLzAgOiAxLzAgKiBzaWduIDogLTEwMjMgPT09IGV4cG9uZW50ID8gc2lnbiAqIG1hbnRpc3NhICogcG93MigtMTA3NCkgOiBzaWduICogKDEgKyBtYW50aXNzYSAqIHBvdzIoLTUyKSkgKiBwb3cyKGV4cG9uZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEZsb2F0MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLl9nZXRCeXRlcyg0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pLCBzaWduID0gMSAtIDIgKiAoYlszXSA+PiA3KSwgZXhwb25lbnQgPSAoYlszXSA8PCAxICYgMjU1IHwgYlsyXSA+PiA3KSAtIDEyNywgbWFudGlzc2EgPSAoMTI3ICYgYlsyXSkgPDwgMTYgfCBiWzFdIDw8IDggfCBiWzBdO1xuICAgICAgICAgICAgcmV0dXJuIDEyOCA9PT0gZXhwb25lbnQgPyAwICE9PSBtYW50aXNzYSA/IDAvMCA6IDEvMCAqIHNpZ24gOiAtMTI3ID09PSBleHBvbmVudCA/IHNpZ24gKiBtYW50aXNzYSAqIHBvdzIoLTE0OSkgOiBzaWduICogKDEgKyBtYW50aXNzYSAqIHBvdzIoLTIzKSkgKiBwb3cyKGV4cG9uZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldDY0OiBmdW5jdGlvbihUeXBlLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIGxpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpO1xuICAgICAgICAgICAgZm9yICh2YXIgcGFydHMgPSBsaXR0bGVFbmRpYW4gPyBbIDAsIDQgXSA6IFsgNCwgMCBdLCBpID0gMDsgMiA+IGk7IGkrKykgcGFydHNbaV0gPSB0aGlzLmdldFVpbnQzMihieXRlT2Zmc2V0ICsgcGFydHNbaV0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIDgsIG5ldyBUeXBlKHBhcnRzWzBdLCBwYXJ0c1sxXSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldEludDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXQ2NChJbnQ2NCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0VWludDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXQ2NChVaW50NjQsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRJbnQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDQsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICByZXR1cm4gYlszXSA8PCAyNCB8IGJbMl0gPDwgMTYgfCBiWzFdIDw8IDggfCBiWzBdO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0VWludDMyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRJbnQzMihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pID4+PiAwO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0SW50MTY6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFVpbnQxNihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIDw8IDE2ID4+IDE2O1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0VWludDE2OiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5fZ2V0Qnl0ZXMoMiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgICAgIHJldHVybiBiWzFdIDw8IDggfCBiWzBdO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0SW50ODogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldFVpbnQ4KGJ5dGVPZmZzZXQpIDw8IDI0ID4+IDI0O1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0VWludDg6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRCeXRlcygxLCBieXRlT2Zmc2V0KVswXTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEJpdFJhbmdlRGF0YTogZnVuY3Rpb24oYml0TGVuZ3RoLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgc3RhcnRCaXQgPSAoZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpIDw8IDMpICsgdGhpcy5fYml0T2Zmc2V0LCBlbmRCaXQgPSBzdGFydEJpdCArIGJpdExlbmd0aCwgc3RhcnQgPSBzdGFydEJpdCA+Pj4gMywgZW5kID0gZW5kQml0ICsgNyA+Pj4gMywgYiA9IHRoaXMuX2dldEJ5dGVzKGVuZCAtIHN0YXJ0LCBzdGFydCwgITApLCB3aWRlVmFsdWUgPSAwO1xuICAgICAgICAgICAgKHRoaXMuX2JpdE9mZnNldCA9IDcgJiBlbmRCaXQpICYmICh0aGlzLl9iaXRPZmZzZXQgLT0gOCk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gYi5sZW5ndGg7IGxlbmd0aCA+IGk7IGkrKykgd2lkZVZhbHVlID0gd2lkZVZhbHVlIDw8IDggfCBiW2ldO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnQsXG4gICAgICAgICAgICAgICAgYnl0ZXM6IGIsXG4gICAgICAgICAgICAgICAgd2lkZVZhbHVlOiB3aWRlVmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGdldFNpZ25lZDogZnVuY3Rpb24oYml0TGVuZ3RoLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgc2hpZnQgPSAzMiAtIGJpdExlbmd0aDtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFVuc2lnbmVkKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkgPDwgc2hpZnQgPj4gc2hpZnQ7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFVuc2lnbmVkOiBmdW5jdGlvbihiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX2dldEJpdFJhbmdlRGF0YShiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpLndpZGVWYWx1ZSA+Pj4gLXRoaXMuX2JpdE9mZnNldDtcbiAgICAgICAgICAgIHJldHVybiAzMiA+IGJpdExlbmd0aCA/IHZhbHVlICYgfigtMSA8PCBiaXRMZW5ndGgpIDogdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRCaW5hcnlGbG9hdDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIG1hbnRTaXplLCBleHBTaXplLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBleHBvbmVudCwgbWFudGlzc2EsIHNpZ25CaXQgPSAwID4gdmFsdWUgPyAxIDogMCwgZU1heCA9IH4oLTEgPDwgZXhwU2l6ZSAtIDEpLCBlTWluID0gMSAtIGVNYXg7XG4gICAgICAgICAgICAwID4gdmFsdWUgJiYgKHZhbHVlID0gLXZhbHVlKSwgMCA9PT0gdmFsdWUgPyAoZXhwb25lbnQgPSAwLCBtYW50aXNzYSA9IDApIDogaXNOYU4odmFsdWUpID8gKGV4cG9uZW50ID0gMiAqIGVNYXggKyAxLCBcbiAgICAgICAgICAgIG1hbnRpc3NhID0gMSkgOiAxLzAgPT09IHZhbHVlID8gKGV4cG9uZW50ID0gMiAqIGVNYXggKyAxLCBtYW50aXNzYSA9IDApIDogKGV4cG9uZW50ID0gTWF0aC5mbG9vcihNYXRoLmxvZyh2YWx1ZSkgLyBNYXRoLkxOMiksIFxuICAgICAgICAgICAgZXhwb25lbnQgPj0gZU1pbiAmJiBlTWF4ID49IGV4cG9uZW50ID8gKG1hbnRpc3NhID0gTWF0aC5mbG9vcigodmFsdWUgKiBwb3cyKC1leHBvbmVudCkgLSAxKSAqIHBvdzIobWFudFNpemUpKSwgXG4gICAgICAgICAgICBleHBvbmVudCArPSBlTWF4KSA6IChtYW50aXNzYSA9IE1hdGguZmxvb3IodmFsdWUgLyBwb3cyKGVNaW4gLSBtYW50U2l6ZSkpLCBleHBvbmVudCA9IDApKTtcbiAgICAgICAgICAgIGZvciAodmFyIGIgPSBbXTsgbWFudFNpemUgPj0gODsgKSBiLnB1c2gobWFudGlzc2EgJSAyNTYpLCBtYW50aXNzYSA9IE1hdGguZmxvb3IobWFudGlzc2EgLyAyNTYpLCBcbiAgICAgICAgICAgIG1hbnRTaXplIC09IDg7XG4gICAgICAgICAgICBmb3IgKGV4cG9uZW50ID0gZXhwb25lbnQgPDwgbWFudFNpemUgfCBtYW50aXNzYSwgZXhwU2l6ZSArPSBtYW50U2l6ZTsgZXhwU2l6ZSA+PSA4OyApIGIucHVzaCgyNTUgJiBleHBvbmVudCksIFxuICAgICAgICAgICAgZXhwb25lbnQgPj4+PSA4LCBleHBTaXplIC09IDg7XG4gICAgICAgICAgICBiLnB1c2goc2lnbkJpdCA8PCBleHBTaXplIHwgZXhwb25lbnQpLCB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBiLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0RmxvYXQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0QmluYXJ5RmxvYXQoYnl0ZU9mZnNldCwgdmFsdWUsIDIzLCA4LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0RmxvYXQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0QmluYXJ5RmxvYXQoYnl0ZU9mZnNldCwgdmFsdWUsIDUyLCAxMSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldDY0OiBmdW5jdGlvbihUeXBlLCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICBcIm9iamVjdFwiICE9IHR5cGVvZiB2YWx1ZSAmJiAodmFsdWUgPSBUeXBlLmZyb21OdW1iZXIodmFsdWUpKSwgbGl0dGxlRW5kaWFuID0gZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIFxuICAgICAgICAgICAgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHZhciBwYXJ0cyA9IGxpdHRsZUVuZGlhbiA/IHtcbiAgICAgICAgICAgICAgICBsbzogMCxcbiAgICAgICAgICAgICAgICBoaTogNFxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBsbzogNCxcbiAgICAgICAgICAgICAgICBoaTogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAodmFyIHBhcnROYW1lIGluIHBhcnRzKSB0aGlzLnNldFVpbnQzMihieXRlT2Zmc2V0ICsgcGFydHNbcGFydE5hbWVdLCB2YWx1ZVtwYXJ0TmFtZV0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgODtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0SW50NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldDY0KEludDY0LCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VWludDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXQ2NChVaW50NjQsIGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0VWludDMyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBbIDI1NSAmIHZhbHVlLCB2YWx1ZSA+Pj4gOCAmIDI1NSwgdmFsdWUgPj4+IDE2ICYgMjU1LCB2YWx1ZSA+Pj4gMjQgXSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldFVpbnQxNjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgWyAyNTUgJiB2YWx1ZSwgdmFsdWUgPj4+IDggJiAyNTUgXSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldFVpbnQ4OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgWyAyNTUgJiB2YWx1ZSBdKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0VW5zaWduZWQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBiaXRMZW5ndGgpIHtcbiAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5fZ2V0Qml0UmFuZ2VEYXRhKGJpdExlbmd0aCwgYnl0ZU9mZnNldCksIHdpZGVWYWx1ZSA9IGRhdGEud2lkZVZhbHVlLCBiID0gZGF0YS5ieXRlcztcbiAgICAgICAgICAgIHdpZGVWYWx1ZSAmPSB+KH4oLTEgPDwgYml0TGVuZ3RoKSA8PCAtdGhpcy5fYml0T2Zmc2V0KSwgd2lkZVZhbHVlIHw9ICgzMiA+IGJpdExlbmd0aCA/IHZhbHVlICYgfigtMSA8PCBiaXRMZW5ndGgpIDogdmFsdWUpIDw8IC10aGlzLl9iaXRPZmZzZXQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYi5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgYltpXSA9IDI1NSAmIHdpZGVWYWx1ZSwgd2lkZVZhbHVlID4+Pj0gODtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGRhdGEuc3RhcnQsIGIsICEwKTtcbiAgICAgICAgfVxuICAgIH0sIG5vZGVOYW1pbmcgPSB7XG4gICAgICAgIEludDg6IFwiSW50OFwiLFxuICAgICAgICBJbnQxNjogXCJJbnQxNlwiLFxuICAgICAgICBJbnQzMjogXCJJbnQzMlwiLFxuICAgICAgICBVaW50ODogXCJVSW50OFwiLFxuICAgICAgICBVaW50MTY6IFwiVUludDE2XCIsXG4gICAgICAgIFVpbnQzMjogXCJVSW50MzJcIixcbiAgICAgICAgRmxvYXQzMjogXCJGbG9hdFwiLFxuICAgICAgICBGbG9hdDY0OiBcIkRvdWJsZVwiXG4gICAgfTtcbiAgICBwcm90by5fbm9kZUJ1ZmZlckFjdGlvbiA9IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgZGF0YVR5cGVzW3R5cGVdO1xuICAgICAgICB2YXIgbm9kZU5hbWUgPSBub2RlTmFtaW5nW3R5cGVdICsgKFwiSW50OFwiID09PSB0eXBlIHx8IFwiVWludDhcIiA9PT0gdHlwZSA/IFwiXCIgOiBsaXR0bGVFbmRpYW4gPyBcIkxFXCIgOiBcIkJFXCIpO1xuICAgICAgICByZXR1cm4gYnl0ZU9mZnNldCArPSB0aGlzLmJ5dGVPZmZzZXQsIGlzUmVhZEFjdGlvbiA/IHRoaXMuYnVmZmVyW1wicmVhZFwiICsgbm9kZU5hbWVdKGJ5dGVPZmZzZXQpIDogdGhpcy5idWZmZXJbXCJ3cml0ZVwiICsgbm9kZU5hbWVdKHZhbHVlLCBieXRlT2Zmc2V0KTtcbiAgICB9O1xuICAgIGZvciAodmFyIHR5cGUgaW4gZGF0YVR5cGVzKSAhZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBwcm90b1tcImdldFwiICsgdHlwZV0gPSBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hY3Rpb24odHlwZSwgITAsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sIHByb3RvW1wic2V0XCIgKyB0eXBlXSA9IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbih0eXBlLCAhMSwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSk7XG4gICAgICAgIH07XG4gICAgfSh0eXBlKTtcbiAgICBwcm90by5fc2V0SW50MzIgPSBwcm90by5fc2V0VWludDMyLCBwcm90by5fc2V0SW50MTYgPSBwcm90by5fc2V0VWludDE2LCBwcm90by5fc2V0SW50OCA9IHByb3RvLl9zZXRVaW50OCwgXG4gICAgcHJvdG8uc2V0U2lnbmVkID0gcHJvdG8uc2V0VW5zaWduZWQ7XG4gICAgZm9yICh2YXIgbWV0aG9kIGluIHByb3RvKSBcInNldFwiID09PSBtZXRob2Quc2xpY2UoMCwgMykgJiYgIWZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgcHJvdG9bXCJ3cml0ZVwiICsgdHlwZV0gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIEFycmF5LnByb3RvdHlwZS51bnNoaWZ0LmNhbGwoYXJndW1lbnRzLCB2b2lkIDApLCB0aGlzW1wic2V0XCIgKyB0eXBlXS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9O1xuICAgIH0obWV0aG9kLnNsaWNlKDMpKTtcbiAgICByZXR1cm4gakRhdGFWaWV3O1xufSk7IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xudmFyIGRlYnVnID0gZmFsc2U7XG52YXIgaGl0Q291bnQgPSAwO1xudmFyIG1pc3NDb3VudCA9IDA7XG52YXIgc2l6ZSA9IDA7XG5cbmV4cG9ydHMucHV0ID0gZnVuY3Rpb24oa2V5LCB2YWx1ZSwgdGltZSwgdGltZW91dENhbGxiYWNrKSB7XG4gIGlmIChkZWJ1Zykge1xuICAgIGNvbnNvbGUubG9nKCdjYWNoaW5nOiAlcyA9ICVqIChAJXMpJywga2V5LCB2YWx1ZSwgdGltZSk7XG4gIH1cblxuICBpZiAodHlwZW9mIHRpbWUgIT09ICd1bmRlZmluZWQnICYmICh0eXBlb2YgdGltZSAhPT0gJ251bWJlcicgfHwgaXNOYU4odGltZSkgfHwgdGltZSA8PSAwKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FjaGUgdGltZW91dCBtdXN0IGJlIGEgcG9zaXRpdmUgbnVtYmVyJyk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHRpbWVvdXRDYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRpbWVvdXRDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignQ2FjaGUgdGltZW91dCBjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuXG4gIHZhciBvbGRSZWNvcmQgPSBjYWNoZVtrZXldO1xuICBpZiAob2xkUmVjb3JkKSB7XG4gICAgY2xlYXJUaW1lb3V0KG9sZFJlY29yZC50aW1lb3V0KTtcbiAgfSBlbHNlIHtcbiAgICBzaXplKys7XG4gIH1cblxuICB2YXIgcmVjb3JkID0ge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBleHBpcmU6IHRpbWUgKyBEYXRlLm5vdygpXG4gIH07XG5cbiAgaWYgKCFpc05hTihyZWNvcmQuZXhwaXJlKSkge1xuICAgIHJlY29yZC50aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgIF9kZWwoa2V5KTtcbiAgICAgIGlmICh0aW1lb3V0Q2FsbGJhY2spIHtcbiAgICAgICAgdGltZW91dENhbGxiYWNrKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0sIHRpbWUpO1xuICB9XG5cbiAgY2FjaGVba2V5XSA9IHJlY29yZDtcblxuICByZXR1cm4gdmFsdWU7XG59O1xuXG5leHBvcnRzLmRlbCA9IGZ1bmN0aW9uKGtleSkge1xuICB2YXIgY2FuRGVsZXRlID0gdHJ1ZTtcblxuICB2YXIgb2xkUmVjb3JkID0gY2FjaGVba2V5XTtcbiAgaWYgKG9sZFJlY29yZCkge1xuICAgIGNsZWFyVGltZW91dChvbGRSZWNvcmQudGltZW91dCk7XG4gICAgaWYgKCFpc05hTihvbGRSZWNvcmQuZXhwaXJlKSAmJiBvbGRSZWNvcmQuZXhwaXJlIDwgRGF0ZS5ub3coKSkge1xuICAgICAgY2FuRGVsZXRlID0gZmFsc2U7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGNhbkRlbGV0ZSA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGNhbkRlbGV0ZSkge1xuICAgIF9kZWwoa2V5KTtcbiAgfVxuXG4gIHJldHVybiBjYW5EZWxldGU7XG59O1xuXG5mdW5jdGlvbiBfZGVsKGtleSl7XG4gIHNpemUtLTtcbiAgZGVsZXRlIGNhY2hlW2tleV07XG59XG5cbmV4cG9ydHMuY2xlYXIgPSBmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIga2V5IGluIGNhY2hlKSB7XG4gICAgY2xlYXJUaW1lb3V0KGNhY2hlW2tleV0udGltZW91dCk7XG4gIH1cbiAgc2l6ZSA9IDA7XG4gIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgaWYgKGRlYnVnKSB7XG4gICAgaGl0Q291bnQgPSAwO1xuICAgIG1pc3NDb3VudCA9IDA7XG4gIH1cbn07XG5cbmV4cG9ydHMuZ2V0ID0gZnVuY3Rpb24oa2V5KSB7XG4gIHZhciBkYXRhID0gY2FjaGVba2V5XTtcbiAgaWYgKHR5cGVvZiBkYXRhICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICBpZiAoaXNOYU4oZGF0YS5leHBpcmUpIHx8IGRhdGEuZXhwaXJlID49IERhdGUubm93KCkpIHtcbiAgICAgIGlmIChkZWJ1ZykgaGl0Q291bnQrKztcbiAgICAgIHJldHVybiBkYXRhLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBmcmVlIHNvbWUgc3BhY2VcbiAgICAgIGlmIChkZWJ1ZykgbWlzc0NvdW50Kys7XG4gICAgICBzaXplLS07XG4gICAgICBkZWxldGUgY2FjaGVba2V5XTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoZGVidWcpIHtcbiAgICBtaXNzQ291bnQrKztcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbmV4cG9ydHMuc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gc2l6ZTtcbn07XG5cbmV4cG9ydHMubWVtc2l6ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc2l6ZSA9IDAsXG4gICAga2V5O1xuICBmb3IgKGtleSBpbiBjYWNoZSkge1xuICAgIHNpemUrKztcbiAgfVxuICByZXR1cm4gc2l6ZTtcbn07XG5cbmV4cG9ydHMuZGVidWcgPSBmdW5jdGlvbihib29sKSB7XG4gIGRlYnVnID0gYm9vbDtcbn07XG5cbmV4cG9ydHMuaGl0cyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gaGl0Q291bnQ7XG59O1xuXG5leHBvcnRzLm1pc3NlcyA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gbWlzc0NvdW50O1xufTtcblxuZXhwb3J0cy5rZXlzID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiBPYmplY3Qua2V5cyhjYWNoZSk7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB6bGliX2luZmxhdGUgPSByZXF1aXJlKCcuL3psaWIvaW5mbGF0ZScpO1xudmFyIHV0aWxzICAgICAgICA9IHJlcXVpcmUoJy4vdXRpbHMvY29tbW9uJyk7XG52YXIgc3RyaW5ncyAgICAgID0gcmVxdWlyZSgnLi91dGlscy9zdHJpbmdzJyk7XG52YXIgYyAgICAgICAgICAgID0gcmVxdWlyZSgnLi96bGliL2NvbnN0YW50cycpO1xudmFyIG1zZyAgICAgICAgICA9IHJlcXVpcmUoJy4vemxpYi9tZXNzYWdlcycpO1xudmFyIFpTdHJlYW0gICAgICA9IHJlcXVpcmUoJy4vemxpYi96c3RyZWFtJyk7XG52YXIgR1poZWFkZXIgICAgID0gcmVxdWlyZSgnLi96bGliL2d6aGVhZGVyJyk7XG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKlxuICogY2xhc3MgSW5mbGF0ZVxuICpcbiAqIEdlbmVyaWMgSlMtc3R5bGUgd3JhcHBlciBmb3IgemxpYiBjYWxscy4gSWYgeW91IGRvbid0IG5lZWRcbiAqIHN0cmVhbWluZyBiZWhhdmlvdXIgLSB1c2UgbW9yZSBzaW1wbGUgZnVuY3Rpb25zOiBbW2luZmxhdGVdXVxuICogYW5kIFtbaW5mbGF0ZVJhd11dLlxuICoqL1xuXG4vKiBpbnRlcm5hbFxuICogaW5mbGF0ZS5jaHVua3MgLT4gQXJyYXlcbiAqXG4gKiBDaHVua3Mgb2Ygb3V0cHV0IGRhdGEsIGlmIFtbSW5mbGF0ZSNvbkRhdGFdXSBub3Qgb3ZlcnJpZGVuLlxuICoqL1xuXG4vKipcbiAqIEluZmxhdGUucmVzdWx0IC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKlxuICogVW5jb21wcmVzc2VkIHJlc3VsdCwgZ2VuZXJhdGVkIGJ5IGRlZmF1bHQgW1tJbmZsYXRlI29uRGF0YV1dXG4gKiBhbmQgW1tJbmZsYXRlI29uRW5kXV0gaGFuZGxlcnMuIEZpbGxlZCBhZnRlciB5b3UgcHVzaCBsYXN0IGNodW5rXG4gKiAoY2FsbCBbW0luZmxhdGUjcHVzaF1dIHdpdGggYFpfRklOSVNIYCAvIGB0cnVlYCBwYXJhbSkgb3IgaWYgeW91XG4gKiBwdXNoIGEgY2h1bmsgd2l0aCBleHBsaWNpdCBmbHVzaCAoY2FsbCBbW0luZmxhdGUjcHVzaF1dIHdpdGhcbiAqIGBaX1NZTkNfRkxVU0hgIHBhcmFtKS5cbiAqKi9cblxuLyoqXG4gKiBJbmZsYXRlLmVyciAtPiBOdW1iZXJcbiAqXG4gKiBFcnJvciBjb2RlIGFmdGVyIGluZmxhdGUgZmluaXNoZWQuIDAgKFpfT0spIG9uIHN1Y2Nlc3MuXG4gKiBTaG91bGQgYmUgY2hlY2tlZCBpZiBicm9rZW4gZGF0YSBwb3NzaWJsZS5cbiAqKi9cblxuLyoqXG4gKiBJbmZsYXRlLm1zZyAtPiBTdHJpbmdcbiAqXG4gKiBFcnJvciBtZXNzYWdlLCBpZiBbW0luZmxhdGUuZXJyXV0gIT0gMFxuICoqL1xuXG5cbi8qKlxuICogbmV3IEluZmxhdGUob3B0aW9ucylcbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogQ3JlYXRlcyBuZXcgaW5mbGF0b3IgaW5zdGFuY2Ugd2l0aCBzcGVjaWZpZWQgcGFyYW1zLiBUaHJvd3MgZXhjZXB0aW9uXG4gKiBvbiBiYWQgcGFyYW1zLiBTdXBwb3J0ZWQgb3B0aW9uczpcbiAqXG4gKiAtIGB3aW5kb3dCaXRzYFxuICogLSBgZGljdGlvbmFyeWBcbiAqXG4gKiBbaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkXShodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWQpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGVzZS5cbiAqXG4gKiBBZGRpdGlvbmFsIG9wdGlvbnMsIGZvciBpbnRlcm5hbCBuZWVkczpcbiAqXG4gKiAtIGBjaHVua1NpemVgIC0gc2l6ZSBvZiBnZW5lcmF0ZWQgZGF0YSBjaHVua3MgKDE2SyBieSBkZWZhdWx0KVxuICogLSBgcmF3YCAoQm9vbGVhbikgLSBkbyByYXcgaW5mbGF0ZVxuICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkXG4gKiAgIGZyb20gdXRmOCB0byB1dGYxNiAoamF2YXNjcmlwdCkgc3RyaW5nLiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLFxuICogICBjaHVuayBsZW5ndGggY2FuIGRpZmZlciBmcm9tIGBjaHVua1NpemVgLCBkZXBlbmRpbmcgb24gY29udGVudC5cbiAqXG4gKiBCeSBkZWZhdWx0LCB3aGVuIG5vIG9wdGlvbnMgc2V0LCBhdXRvZGV0ZWN0IGRlZmxhdGUvZ3ppcCBkYXRhIGZvcm1hdCB2aWFcbiAqIHdyYXBwZXIgaGVhZGVyLlxuICpcbiAqICMjIyMjIEV4YW1wbGU6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIHBha28gPSByZXF1aXJlKCdwYWtvJylcbiAqICAgLCBjaHVuazEgPSBVaW50OEFycmF5KFsxLDIsMyw0LDUsNiw3LDgsOV0pXG4gKiAgICwgY2h1bmsyID0gVWludDhBcnJheShbMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTldKTtcbiAqXG4gKiB2YXIgaW5mbGF0ZSA9IG5ldyBwYWtvLkluZmxhdGUoeyBsZXZlbDogM30pO1xuICpcbiAqIGluZmxhdGUucHVzaChjaHVuazEsIGZhbHNlKTtcbiAqIGluZmxhdGUucHVzaChjaHVuazIsIHRydWUpOyAgLy8gdHJ1ZSAtPiBsYXN0IGNodW5rXG4gKlxuICogaWYgKGluZmxhdGUuZXJyKSB7IHRocm93IG5ldyBFcnJvcihpbmZsYXRlLmVycik7IH1cbiAqXG4gKiBjb25zb2xlLmxvZyhpbmZsYXRlLnJlc3VsdCk7XG4gKiBgYGBcbiAqKi9cbmZ1bmN0aW9uIEluZmxhdGUob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSW5mbGF0ZSkpIHJldHVybiBuZXcgSW5mbGF0ZShvcHRpb25zKTtcblxuICB0aGlzLm9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe1xuICAgIGNodW5rU2l6ZTogMTYzODQsXG4gICAgd2luZG93Qml0czogMCxcbiAgICB0bzogJydcbiAgfSwgb3B0aW9ucyB8fCB7fSk7XG5cbiAgdmFyIG9wdCA9IHRoaXMub3B0aW9ucztcblxuICAvLyBGb3JjZSB3aW5kb3cgc2l6ZSBmb3IgYHJhd2AgZGF0YSwgaWYgbm90IHNldCBkaXJlY3RseSxcbiAgLy8gYmVjYXVzZSB3ZSBoYXZlIG5vIGhlYWRlciBmb3IgYXV0b2RldGVjdC5cbiAgaWYgKG9wdC5yYXcgJiYgKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkge1xuICAgIG9wdC53aW5kb3dCaXRzID0gLW9wdC53aW5kb3dCaXRzO1xuICAgIGlmIChvcHQud2luZG93Qml0cyA9PT0gMCkgeyBvcHQud2luZG93Qml0cyA9IC0xNTsgfVxuICB9XG5cbiAgLy8gSWYgYHdpbmRvd0JpdHNgIG5vdCBkZWZpbmVkIChhbmQgbW9kZSBub3QgcmF3KSAtIHNldCBhdXRvZGV0ZWN0IGZsYWcgZm9yIGd6aXAvZGVmbGF0ZVxuICBpZiAoKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSAmJlxuICAgICAgIShvcHRpb25zICYmIG9wdGlvbnMud2luZG93Qml0cykpIHtcbiAgICBvcHQud2luZG93Qml0cyArPSAzMjtcbiAgfVxuXG4gIC8vIEd6aXAgaGVhZGVyIGhhcyBubyBpbmZvIGFib3V0IHdpbmRvd3Mgc2l6ZSwgd2UgY2FuIGRvIGF1dG9kZXRlY3Qgb25seVxuICAvLyBmb3IgZGVmbGF0ZS4gU28sIGlmIHdpbmRvdyBzaXplIG5vdCBzZXQsIGZvcmNlIGl0IHRvIG1heCB3aGVuIGd6aXAgcG9zc2libGVcbiAgaWYgKChvcHQud2luZG93Qml0cyA+IDE1KSAmJiAob3B0LndpbmRvd0JpdHMgPCA0OCkpIHtcbiAgICAvLyBiaXQgMyAoMTYpIC0+IGd6aXBwZWQgZGF0YVxuICAgIC8vIGJpdCA0ICgzMikgLT4gYXV0b2RldGVjdCBnemlwL2RlZmxhdGVcbiAgICBpZiAoKG9wdC53aW5kb3dCaXRzICYgMTUpID09PSAwKSB7XG4gICAgICBvcHQud2luZG93Qml0cyB8PSAxNTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spXG4gIHRoaXMubXNnICAgID0gJyc7ICAgICAvLyBlcnJvciBtZXNzYWdlXG4gIHRoaXMuZW5kZWQgID0gZmFsc2U7ICAvLyB1c2VkIHRvIGF2b2lkIG11bHRpcGxlIG9uRW5kKCkgY2FsbHNcbiAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGFcblxuICB0aGlzLnN0cm0gICA9IG5ldyBaU3RyZWFtKCk7XG4gIHRoaXMuc3RybS5hdmFpbF9vdXQgPSAwO1xuXG4gIHZhciBzdGF0dXMgID0gemxpYl9pbmZsYXRlLmluZmxhdGVJbml0MihcbiAgICB0aGlzLnN0cm0sXG4gICAgb3B0LndpbmRvd0JpdHNcbiAgKTtcblxuICBpZiAoc3RhdHVzICE9PSBjLlpfT0spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pO1xuICB9XG5cbiAgdGhpcy5oZWFkZXIgPSBuZXcgR1poZWFkZXIoKTtcblxuICB6bGliX2luZmxhdGUuaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sIHRoaXMuaGVhZGVyKTtcbn1cblxuLyoqXG4gKiBJbmZsYXRlI3B1c2goZGF0YVssIG1vZGVdKSAtPiBCb29sZWFuXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8QXJyYXlCdWZmZXJ8U3RyaW5nKTogaW5wdXQgZGF0YVxuICogLSBtb2RlIChOdW1iZXJ8Qm9vbGVhbik6IDAuLjYgZm9yIGNvcnJlc3BvbmRpbmcgWl9OT19GTFVTSC4uWl9UUkVFIG1vZGVzLlxuICogICBTZWUgY29uc3RhbnRzLiBTa2lwcGVkIG9yIGBmYWxzZWAgbWVhbnMgWl9OT19GTFVTSCwgYHRydWVgIG1lYW5zaCBaX0ZJTklTSC5cbiAqXG4gKiBTZW5kcyBpbnB1dCBkYXRhIHRvIGluZmxhdGUgcGlwZSwgZ2VuZXJhdGluZyBbW0luZmxhdGUjb25EYXRhXV0gY2FsbHMgd2l0aFxuICogbmV3IG91dHB1dCBjaHVua3MuIFJldHVybnMgYHRydWVgIG9uIHN1Y2Nlc3MuIFRoZSBsYXN0IGRhdGEgYmxvY2sgbXVzdCBoYXZlXG4gKiBtb2RlIFpfRklOSVNIIChvciBgdHJ1ZWApLiBUaGF0IHdpbGwgZmx1c2ggaW50ZXJuYWwgcGVuZGluZyBidWZmZXJzIGFuZCBjYWxsXG4gKiBbW0luZmxhdGUjb25FbmRdXS4gRm9yIGludGVyaW0gZXhwbGljaXQgZmx1c2hlcyAod2l0aG91dCBlbmRpbmcgdGhlIHN0cmVhbSkgeW91XG4gKiBjYW4gdXNlIG1vZGUgWl9TWU5DX0ZMVVNILCBrZWVwaW5nIHRoZSBkZWNvbXByZXNzaW9uIGNvbnRleHQuXG4gKlxuICogT24gZmFpbCBjYWxsIFtbSW5mbGF0ZSNvbkVuZF1dIHdpdGggZXJyb3IgY29kZSBhbmQgcmV0dXJuIGZhbHNlLlxuICpcbiAqIFdlIHN0cm9uZ2x5IHJlY29tbWVuZCB0byB1c2UgYFVpbnQ4QXJyYXlgIG9uIGlucHV0IGZvciBiZXN0IHNwZWVkIChvdXRwdXRcbiAqIGZvcm1hdCBpcyBkZXRlY3RlZCBhdXRvbWF0aWNhbGx5KS4gQWxzbywgZG9uJ3Qgc2tpcCBsYXN0IHBhcmFtIGFuZCBhbHdheXNcbiAqIHVzZSB0aGUgc2FtZSB0eXBlIGluIHlvdXIgY29kZSAoYm9vbGVhbiBvciBudW1iZXIpLiBUaGF0IHdpbGwgaW1wcm92ZSBKUyBzcGVlZC5cbiAqXG4gKiBGb3IgcmVndWxhciBgQXJyYXlgLXMgbWFrZSBzdXJlIGFsbCBlbGVtZW50cyBhcmUgWzAuLjI1NV0uXG4gKlxuICogIyMjIyMgRXhhbXBsZVxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHB1c2goY2h1bmssIGZhbHNlKTsgLy8gcHVzaCBvbmUgb2YgZGF0YSBjaHVua3NcbiAqIC4uLlxuICogcHVzaChjaHVuaywgdHJ1ZSk7ICAvLyBwdXNoIGxhc3QgY2h1bmtcbiAqIGBgYFxuICoqL1xuSW5mbGF0ZS5wcm90b3R5cGUucHVzaCA9IGZ1bmN0aW9uIChkYXRhLCBtb2RlKSB7XG4gIHZhciBzdHJtID0gdGhpcy5zdHJtO1xuICB2YXIgY2h1bmtTaXplID0gdGhpcy5vcHRpb25zLmNodW5rU2l6ZTtcbiAgdmFyIGRpY3Rpb25hcnkgPSB0aGlzLm9wdGlvbnMuZGljdGlvbmFyeTtcbiAgdmFyIHN0YXR1cywgX21vZGU7XG4gIHZhciBuZXh0X291dF91dGY4LCB0YWlsLCB1dGY4c3RyO1xuICB2YXIgZGljdDtcblxuICAvLyBGbGFnIHRvIHByb3Blcmx5IHByb2Nlc3MgWl9CVUZfRVJST1Igb24gdGVzdGluZyBpbmZsYXRlIGNhbGxcbiAgLy8gd2hlbiB3ZSBjaGVjayB0aGF0IGFsbCBvdXRwdXQgZGF0YSB3YXMgZmx1c2hlZC5cbiAgdmFyIGFsbG93QnVmRXJyb3IgPSBmYWxzZTtcblxuICBpZiAodGhpcy5lbmRlZCkgeyByZXR1cm4gZmFsc2U7IH1cbiAgX21vZGUgPSAobW9kZSA9PT0gfn5tb2RlKSA/IG1vZGUgOiAoKG1vZGUgPT09IHRydWUpID8gYy5aX0ZJTklTSCA6IGMuWl9OT19GTFVTSCk7XG5cbiAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZFxuICBpZiAodHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gT25seSBiaW5hcnkgc3RyaW5ncyBjYW4gYmUgZGVjb21wcmVzc2VkIG9uIHByYWN0aWNlXG4gICAgc3RybS5pbnB1dCA9IHN0cmluZ3MuYmluc3RyaW5nMmJ1ZihkYXRhKTtcbiAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKGRhdGEpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG4gICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICB9IGVsc2Uge1xuICAgIHN0cm0uaW5wdXQgPSBkYXRhO1xuICB9XG5cbiAgc3RybS5uZXh0X2luID0gMDtcbiAgc3RybS5hdmFpbF9pbiA9IHN0cm0uaW5wdXQubGVuZ3RoO1xuXG4gIGRvIHtcbiAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IHV0aWxzLkJ1ZjgoY2h1bmtTaXplKTtcbiAgICAgIHN0cm0ubmV4dF9vdXQgPSAwO1xuICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemU7XG4gICAgfVxuXG4gICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGUoc3RybSwgYy5aX05PX0ZMVVNIKTsgICAgLyogbm8gYmFkIHJldHVybiB2YWx1ZSAqL1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gYy5aX05FRURfRElDVCAmJiBkaWN0aW9uYXJ5KSB7XG4gICAgICAvLyBDb252ZXJ0IGRhdGEgaWYgbmVlZGVkXG4gICAgICBpZiAodHlwZW9mIGRpY3Rpb25hcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGRpY3QgPSBzdHJpbmdzLnN0cmluZzJidWYoZGljdGlvbmFyeSk7XG4gICAgICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwoZGljdGlvbmFyeSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHtcbiAgICAgICAgZGljdCA9IG5ldyBVaW50OEFycmF5KGRpY3Rpb25hcnkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGljdCA9IGRpY3Rpb25hcnk7XG4gICAgICB9XG5cbiAgICAgIHN0YXR1cyA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlU2V0RGljdGlvbmFyeSh0aGlzLnN0cm0sIGRpY3QpO1xuXG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gYy5aX0JVRl9FUlJPUiAmJiBhbGxvd0J1ZkVycm9yID09PSB0cnVlKSB7XG4gICAgICBzdGF0dXMgPSBjLlpfT0s7XG4gICAgICBhbGxvd0J1ZkVycm9yID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyAhPT0gYy5aX1NUUkVBTV9FTkQgJiYgc3RhdHVzICE9PSBjLlpfT0spIHtcbiAgICAgIHRoaXMub25FbmQoc3RhdHVzKTtcbiAgICAgIHRoaXMuZW5kZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzdHJtLm5leHRfb3V0KSB7XG4gICAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDAgfHwgc3RhdHVzID09PSBjLlpfU1RSRUFNX0VORCB8fCAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiAoX21vZGUgPT09IGMuWl9GSU5JU0ggfHwgX21vZGUgPT09IGMuWl9TWU5DX0ZMVVNIKSkpIHtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvID09PSAnc3RyaW5nJykge1xuXG4gICAgICAgICAgbmV4dF9vdXRfdXRmOCA9IHN0cmluZ3MudXRmOGJvcmRlcihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCk7XG5cbiAgICAgICAgICB0YWlsID0gc3RybS5uZXh0X291dCAtIG5leHRfb3V0X3V0Zjg7XG4gICAgICAgICAgdXRmOHN0ciA9IHN0cmluZ3MuYnVmMnN0cmluZyhzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCk7XG5cbiAgICAgICAgICAvLyBtb3ZlIHRhaWxcbiAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gdGFpbDtcbiAgICAgICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZSAtIHRhaWw7XG4gICAgICAgICAgaWYgKHRhaWwpIHsgdXRpbHMuYXJyYXlTZXQoc3RybS5vdXRwdXQsIHN0cm0ub3V0cHV0LCBuZXh0X291dF91dGY4LCB0YWlsLCAwKTsgfVxuXG4gICAgICAgICAgdGhpcy5vbkRhdGEodXRmOHN0cik7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9uRGF0YSh1dGlscy5zaHJpbmtCdWYoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdoZW4gbm8gbW9yZSBpbnB1dCBkYXRhLCB3ZSBzaG91bGQgY2hlY2sgdGhhdCBpbnRlcm5hbCBpbmZsYXRlIGJ1ZmZlcnNcbiAgICAvLyBhcmUgZmx1c2hlZC4gVGhlIG9ubHkgd2F5IHRvIGRvIGl0IHdoZW4gYXZhaWxfb3V0ID0gMCAtIHJ1biBvbmUgbW9yZVxuICAgIC8vIGluZmxhdGUgcGFzcy4gQnV0IGlmIG91dHB1dCBkYXRhIG5vdCBleGlzdHMsIGluZmxhdGUgcmV0dXJuIFpfQlVGX0VSUk9SLlxuICAgIC8vIEhlcmUgd2Ugc2V0IGZsYWcgdG8gcHJvY2VzcyB0aGlzIGVycm9yIHByb3Blcmx5LlxuICAgIC8vXG4gICAgLy8gTk9URS4gRGVmbGF0ZSBkb2VzIG5vdCByZXR1cm4gZXJyb3IgaW4gdGhpcyBjYXNlIGFuZCBkb2VzIG5vdCBuZWVkcyBzdWNoXG4gICAgLy8gbG9naWMuXG4gICAgaWYgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIGFsbG93QnVmRXJyb3IgPSB0cnVlO1xuICAgIH1cblxuICB9IHdoaWxlICgoc3RybS5hdmFpbF9pbiA+IDAgfHwgc3RybS5hdmFpbF9vdXQgPT09IDApICYmIHN0YXR1cyAhPT0gYy5aX1NUUkVBTV9FTkQpO1xuXG4gIGlmIChzdGF0dXMgPT09IGMuWl9TVFJFQU1fRU5EKSB7XG4gICAgX21vZGUgPSBjLlpfRklOSVNIO1xuICB9XG5cbiAgLy8gRmluYWxpemUgb24gdGhlIGxhc3QgY2h1bmsuXG4gIGlmIChfbW9kZSA9PT0gYy5aX0ZJTklTSCkge1xuICAgIHN0YXR1cyA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlRW5kKHRoaXMuc3RybSk7XG4gICAgdGhpcy5vbkVuZChzdGF0dXMpO1xuICAgIHRoaXMuZW5kZWQgPSB0cnVlO1xuICAgIHJldHVybiBzdGF0dXMgPT09IGMuWl9PSztcbiAgfVxuXG4gIC8vIGNhbGxiYWNrIGludGVyaW0gcmVzdWx0cyBpZiBaX1NZTkNfRkxVU0guXG4gIGlmIChfbW9kZSA9PT0gYy5aX1NZTkNfRkxVU0gpIHtcbiAgICB0aGlzLm9uRW5kKGMuWl9PSyk7XG4gICAgc3RybS5hdmFpbF9vdXQgPSAwO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5cbi8qKlxuICogSW5mbGF0ZSNvbkRhdGEoY2h1bmspIC0+IFZvaWRcbiAqIC0gY2h1bmsgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogb3VwdXQgZGF0YS4gVHlwZSBvZiBhcnJheSBkZXBlbmRzXG4gKiAgIG9uIGpzIGVuZ2luZSBzdXBwb3J0LiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLCBlYWNoIGNodW5rXG4gKiAgIHdpbGwgYmUgc3RyaW5nLlxuICpcbiAqIEJ5IGRlZmF1bHQsIHN0b3JlcyBkYXRhIGJsb2NrcyBpbiBgY2h1bmtzW11gIHByb3BlcnR5IGFuZCBnbHVlXG4gKiB0aG9zZSBpbiBgb25FbmRgLiBPdmVycmlkZSB0aGlzIGhhbmRsZXIsIGlmIHlvdSBuZWVkIGFub3RoZXIgYmVoYXZpb3VyLlxuICoqL1xuSW5mbGF0ZS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gIHRoaXMuY2h1bmtzLnB1c2goY2h1bmspO1xufTtcblxuXG4vKipcbiAqIEluZmxhdGUjb25FbmQoc3RhdHVzKSAtPiBWb2lkXG4gKiAtIHN0YXR1cyAoTnVtYmVyKTogaW5mbGF0ZSBzdGF0dXMuIDAgKFpfT0spIG9uIHN1Y2Nlc3MsXG4gKiAgIG90aGVyIGlmIG5vdC5cbiAqXG4gKiBDYWxsZWQgZWl0aGVyIGFmdGVyIHlvdSB0ZWxsIGluZmxhdGUgdGhhdCB0aGUgaW5wdXQgc3RyZWFtIGlzXG4gKiBjb21wbGV0ZSAoWl9GSU5JU0gpIG9yIHNob3VsZCBiZSBmbHVzaGVkIChaX1NZTkNfRkxVU0gpXG4gKiBvciBpZiBhbiBlcnJvciBoYXBwZW5lZC4gQnkgZGVmYXVsdCAtIGpvaW4gY29sbGVjdGVkIGNodW5rcyxcbiAqIGZyZWUgbWVtb3J5IGFuZCBmaWxsIGByZXN1bHRzYCAvIGBlcnJgIHByb3BlcnRpZXMuXG4gKiovXG5JbmZsYXRlLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgLy8gT24gc3VjY2VzcyAtIGpvaW5cbiAgaWYgKHN0YXR1cyA9PT0gYy5aX09LKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEdsdWUgJiBjb252ZXJ0IGhlcmUsIHVudGlsIHdlIHRlYWNoIHBha28gdG8gc2VuZFxuICAgICAgLy8gdXRmOCBhbGxpZ25lZCBzdHJpbmdzIHRvIG9uRGF0YVxuICAgICAgdGhpcy5yZXN1bHQgPSB0aGlzLmNodW5rcy5qb2luKCcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHQgPSB1dGlscy5mbGF0dGVuQ2h1bmtzKHRoaXMuY2h1bmtzKTtcbiAgICB9XG4gIH1cbiAgdGhpcy5jaHVua3MgPSBbXTtcbiAgdGhpcy5lcnIgPSBzdGF0dXM7XG4gIHRoaXMubXNnID0gdGhpcy5zdHJtLm1zZztcbn07XG5cblxuLyoqXG4gKiBpbmZsYXRlKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIERlY29tcHJlc3MgYGRhdGFgIHdpdGggaW5mbGF0ZS91bmd6aXAgYW5kIGBvcHRpb25zYC4gQXV0b2RldGVjdFxuICogZm9ybWF0IHZpYSB3cmFwcGVyIGhlYWRlciBieSBkZWZhdWx0LiBUaGF0J3Mgd2h5IHdlIGRvbid0IHByb3ZpZGVcbiAqIHNlcGFyYXRlIGB1bmd6aXBgIG1ldGhvZC5cbiAqXG4gKiBTdXBwb3J0ZWQgb3B0aW9ucyBhcmU6XG4gKlxuICogLSB3aW5kb3dCaXRzXG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24uXG4gKlxuICogU3VnYXIgKG9wdGlvbnMpOlxuICpcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gc2F5IHRoYXQgd2Ugd29yayB3aXRoIHJhdyBzdHJlYW0sIGlmIHlvdSBkb24ndCB3aXNoIHRvIHNwZWNpZnlcbiAqICAgbmVnYXRpdmUgd2luZG93Qml0cyBpbXBsaWNpdGx5LlxuICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkXG4gKiAgIGZyb20gdXRmOCB0byB1dGYxNiAoamF2YXNjcmlwdCkgc3RyaW5nLiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLFxuICogICBjaHVuayBsZW5ndGggY2FuIGRpZmZlciBmcm9tIGBjaHVua1NpemVgLCBkZXBlbmRpbmcgb24gY29udGVudC5cbiAqXG4gKlxuICogIyMjIyMgRXhhbXBsZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKVxuICogICAsIGlucHV0ID0gcGFrby5kZWZsYXRlKFsxLDIsMyw0LDUsNiw3LDgsOV0pXG4gKiAgICwgb3V0cHV0O1xuICpcbiAqIHRyeSB7XG4gKiAgIG91dHB1dCA9IHBha28uaW5mbGF0ZShpbnB1dCk7XG4gKiB9IGNhdGNoIChlcnIpXG4gKiAgIGNvbnNvbGUubG9nKGVycik7XG4gKiB9XG4gKiBgYGBcbiAqKi9cbmZ1bmN0aW9uIGluZmxhdGUoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdmFyIGluZmxhdG9yID0gbmV3IEluZmxhdGUob3B0aW9ucyk7XG5cbiAgaW5mbGF0b3IucHVzaChpbnB1dCwgdHJ1ZSk7XG5cbiAgLy8gVGhhdCB3aWxsIG5ldmVyIGhhcHBlbnMsIGlmIHlvdSBkb24ndCBjaGVhdCB3aXRoIG9wdGlvbnMgOilcbiAgaWYgKGluZmxhdG9yLmVycikgeyB0aHJvdyBpbmZsYXRvci5tc2c7IH1cblxuICByZXR1cm4gaW5mbGF0b3IucmVzdWx0O1xufVxuXG5cbi8qKlxuICogaW5mbGF0ZVJhdyhkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBUaGUgc2FtZSBhcyBbW2luZmxhdGVdXSwgYnV0IGNyZWF0ZXMgcmF3IGRhdGEsIHdpdGhvdXQgd3JhcHBlclxuICogKGhlYWRlciBhbmQgYWRsZXIzMiBjcmMpLlxuICoqL1xuZnVuY3Rpb24gaW5mbGF0ZVJhdyhpbnB1dCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgb3B0aW9ucy5yYXcgPSB0cnVlO1xuICByZXR1cm4gaW5mbGF0ZShpbnB1dCwgb3B0aW9ucyk7XG59XG5cblxuLyoqXG4gKiB1bmd6aXAoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogSnVzdCBzaG9ydGN1dCB0byBbW2luZmxhdGVdXSwgYmVjYXVzZSBpdCBhdXRvZGV0ZWN0cyBmb3JtYXRcbiAqIGJ5IGhlYWRlci5jb250ZW50LiBEb25lIGZvciBjb252ZW5pZW5jZS5cbiAqKi9cblxuXG5leHBvcnRzLkluZmxhdGUgPSBJbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlID0gaW5mbGF0ZTtcbmV4cG9ydHMuaW5mbGF0ZVJhdyA9IGluZmxhdGVSYXc7XG5leHBvcnRzLnVuZ3ppcCAgPSBpbmZsYXRlO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciBUWVBFRF9PSyA9ICAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKSAmJlxuICAgICAgICAgICAgICAgICh0eXBlb2YgVWludDE2QXJyYXkgIT09ICd1bmRlZmluZWQnKSAmJlxuICAgICAgICAgICAgICAgICh0eXBlb2YgSW50MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcpO1xuXG5cbmV4cG9ydHMuYXNzaWduID0gZnVuY3Rpb24gKG9iaiAvKmZyb20xLCBmcm9tMiwgZnJvbTMsIC4uLiovKSB7XG4gIHZhciBzb3VyY2VzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgd2hpbGUgKHNvdXJjZXMubGVuZ3RoKSB7XG4gICAgdmFyIHNvdXJjZSA9IHNvdXJjZXMuc2hpZnQoKTtcbiAgICBpZiAoIXNvdXJjZSkgeyBjb250aW51ZTsgfVxuXG4gICAgaWYgKHR5cGVvZiBzb3VyY2UgIT09ICdvYmplY3QnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHNvdXJjZSArICdtdXN0IGJlIG5vbi1vYmplY3QnKTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBwIGluIHNvdXJjZSkge1xuICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwKSkge1xuICAgICAgICBvYmpbcF0gPSBzb3VyY2VbcF07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn07XG5cblxuLy8gcmVkdWNlIGJ1ZmZlciBzaXplLCBhdm9pZGluZyBtZW0gY29weVxuZXhwb3J0cy5zaHJpbmtCdWYgPSBmdW5jdGlvbiAoYnVmLCBzaXplKSB7XG4gIGlmIChidWYubGVuZ3RoID09PSBzaXplKSB7IHJldHVybiBidWY7IH1cbiAgaWYgKGJ1Zi5zdWJhcnJheSkgeyByZXR1cm4gYnVmLnN1YmFycmF5KDAsIHNpemUpOyB9XG4gIGJ1Zi5sZW5ndGggPSBzaXplO1xuICByZXR1cm4gYnVmO1xufTtcblxuXG52YXIgZm5UeXBlZCA9IHtcbiAgYXJyYXlTZXQ6IGZ1bmN0aW9uIChkZXN0LCBzcmMsIHNyY19vZmZzLCBsZW4sIGRlc3Rfb2Zmcykge1xuICAgIGlmIChzcmMuc3ViYXJyYXkgJiYgZGVzdC5zdWJhcnJheSkge1xuICAgICAgZGVzdC5zZXQoc3JjLnN1YmFycmF5KHNyY19vZmZzLCBzcmNfb2ZmcyArIGxlbiksIGRlc3Rfb2Zmcyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIEZhbGxiYWNrIHRvIG9yZGluYXJ5IGFycmF5XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgZGVzdFtkZXN0X29mZnMgKyBpXSA9IHNyY1tzcmNfb2ZmcyArIGldO1xuICAgIH1cbiAgfSxcbiAgLy8gSm9pbiBhcnJheSBvZiBjaHVua3MgdG8gc2luZ2xlIGFycmF5LlxuICBmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbiAoY2h1bmtzKSB7XG4gICAgdmFyIGksIGwsIGxlbiwgcG9zLCBjaHVuaywgcmVzdWx0O1xuXG4gICAgLy8gY2FsY3VsYXRlIGRhdGEgbGVuZ3RoXG4gICAgbGVuID0gMDtcbiAgICBmb3IgKGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbGVuICs9IGNodW5rc1tpXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgLy8gam9pbiBjaHVua3NcbiAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheShsZW4pO1xuICAgIHBvcyA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGNodW5rID0gY2h1bmtzW2ldO1xuICAgICAgcmVzdWx0LnNldChjaHVuaywgcG9zKTtcbiAgICAgIHBvcyArPSBjaHVuay5sZW5ndGg7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTtcblxudmFyIGZuVW50eXBlZCA9IHtcbiAgYXJyYXlTZXQ6IGZ1bmN0aW9uIChkZXN0LCBzcmMsIHNyY19vZmZzLCBsZW4sIGRlc3Rfb2Zmcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGRlc3RbZGVzdF9vZmZzICsgaV0gPSBzcmNbc3JjX29mZnMgKyBpXTtcbiAgICB9XG4gIH0sXG4gIC8vIEpvaW4gYXJyYXkgb2YgY2h1bmtzIHRvIHNpbmdsZSBhcnJheS5cbiAgZmxhdHRlbkNodW5rczogZnVuY3Rpb24gKGNodW5rcykge1xuICAgIHJldHVybiBbXS5jb25jYXQuYXBwbHkoW10sIGNodW5rcyk7XG4gIH1cbn07XG5cblxuLy8gRW5hYmxlL0Rpc2FibGUgdHlwZWQgYXJyYXlzIHVzZSwgZm9yIHRlc3Rpbmdcbi8vXG5leHBvcnRzLnNldFR5cGVkID0gZnVuY3Rpb24gKG9uKSB7XG4gIGlmIChvbikge1xuICAgIGV4cG9ydHMuQnVmOCAgPSBVaW50OEFycmF5O1xuICAgIGV4cG9ydHMuQnVmMTYgPSBVaW50MTZBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjMyID0gSW50MzJBcnJheTtcbiAgICBleHBvcnRzLmFzc2lnbihleHBvcnRzLCBmblR5cGVkKTtcbiAgfSBlbHNlIHtcbiAgICBleHBvcnRzLkJ1ZjggID0gQXJyYXk7XG4gICAgZXhwb3J0cy5CdWYxNiA9IEFycmF5O1xuICAgIGV4cG9ydHMuQnVmMzIgPSBBcnJheTtcbiAgICBleHBvcnRzLmFzc2lnbihleHBvcnRzLCBmblVudHlwZWQpO1xuICB9XG59O1xuXG5leHBvcnRzLnNldFR5cGVkKFRZUEVEX09LKTtcbiIsIi8vIFN0cmluZyBlbmNvZGUvZGVjb2RlIGhlbHBlcnNcbid1c2Ugc3RyaWN0JztcblxuXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL2NvbW1vbicpO1xuXG5cbi8vIFF1aWNrIGNoZWNrIGlmIHdlIGNhbiB1c2UgZmFzdCBhcnJheSB0byBiaW4gc3RyaW5nIGNvbnZlcnNpb25cbi8vXG4vLyAtIGFwcGx5KEFycmF5KSBjYW4gZmFpbCBvbiBBbmRyb2lkIDIuMlxuLy8gLSBhcHBseShVaW50OEFycmF5KSBjYW4gZmFpbCBvbiBpT1MgNS4xIFNhZmFyeVxuLy9cbnZhciBTVFJfQVBQTFlfT0sgPSB0cnVlO1xudmFyIFNUUl9BUFBMWV9VSUFfT0sgPSB0cnVlO1xuXG50cnkgeyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIFsgMCBdKTsgfSBjYXRjaCAoX18pIHsgU1RSX0FQUExZX09LID0gZmFsc2U7IH1cbnRyeSB7IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoMSkpOyB9IGNhdGNoIChfXykgeyBTVFJfQVBQTFlfVUlBX09LID0gZmFsc2U7IH1cblxuXG4vLyBUYWJsZSB3aXRoIHV0ZjggbGVuZ3RocyAoY2FsY3VsYXRlZCBieSBmaXJzdCBieXRlIG9mIHNlcXVlbmNlKVxuLy8gTm90ZSwgdGhhdCA1ICYgNi1ieXRlIHZhbHVlcyBhbmQgc29tZSA0LWJ5dGUgdmFsdWVzIGNhbiBub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlMsXG4vLyBiZWNhdXNlIG1heCBwb3NzaWJsZSBjb2RlcG9pbnQgaXMgMHgxMGZmZmZcbnZhciBfdXRmOGxlbiA9IG5ldyB1dGlscy5CdWY4KDI1Nik7XG5mb3IgKHZhciBxID0gMDsgcSA8IDI1NjsgcSsrKSB7XG4gIF91dGY4bGVuW3FdID0gKHEgPj0gMjUyID8gNiA6IHEgPj0gMjQ4ID8gNSA6IHEgPj0gMjQwID8gNCA6IHEgPj0gMjI0ID8gMyA6IHEgPj0gMTkyID8gMiA6IDEpO1xufVxuX3V0ZjhsZW5bMjU0XSA9IF91dGY4bGVuWzI1NF0gPSAxOyAvLyBJbnZhbGlkIHNlcXVlbmNlIHN0YXJ0XG5cblxuLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXkgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKVxuZXhwb3J0cy5zdHJpbmcyYnVmID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgYnVmLCBjLCBjMiwgbV9wb3MsIGksIHN0cl9sZW4gPSBzdHIubGVuZ3RoLCBidWZfbGVuID0gMDtcblxuICAvLyBjb3VudCBiaW5hcnkgc2l6ZVxuICBmb3IgKG1fcG9zID0gMDsgbV9wb3MgPCBzdHJfbGVuOyBtX3BvcysrKSB7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTtcbiAgICBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiYgKG1fcG9zICsgMSA8IHN0cl9sZW4pKSB7XG4gICAgICBjMiA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zICsgMSk7XG4gICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XG4gICAgICAgIGMgPSAweDEwMDAwICsgKChjIC0gMHhkODAwKSA8PCAxMCkgKyAoYzIgLSAweGRjMDApO1xuICAgICAgICBtX3BvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBidWZfbGVuICs9IGMgPCAweDgwID8gMSA6IGMgPCAweDgwMCA/IDIgOiBjIDwgMHgxMDAwMCA/IDMgOiA0O1xuICB9XG5cbiAgLy8gYWxsb2NhdGUgYnVmZmVyXG4gIGJ1ZiA9IG5ldyB1dGlscy5CdWY4KGJ1Zl9sZW4pO1xuXG4gIC8vIGNvbnZlcnRcbiAgZm9yIChpID0gMCwgbV9wb3MgPSAwOyBpIDwgYnVmX2xlbjsgbV9wb3MrKykge1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7XG4gICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcyArIDEgPCBzdHJfbGVuKSkge1xuICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpO1xuICAgICAgaWYgKChjMiAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTtcbiAgICAgICAgbV9wb3MrKztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGMgPCAweDgwKSB7XG4gICAgICAvKiBvbmUgYnl0ZSAqL1xuICAgICAgYnVmW2krK10gPSBjO1xuICAgIH0gZWxzZSBpZiAoYyA8IDB4ODAwKSB7XG4gICAgICAvKiB0d28gYnl0ZXMgKi9cbiAgICAgIGJ1ZltpKytdID0gMHhDMCB8IChjID4+PiA2KTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7XG4gICAgfSBlbHNlIGlmIChjIDwgMHgxMDAwMCkge1xuICAgICAgLyogdGhyZWUgYnl0ZXMgKi9cbiAgICAgIGJ1ZltpKytdID0gMHhFMCB8IChjID4+PiAxMik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLyogZm91ciBieXRlcyAqL1xuICAgICAgYnVmW2krK10gPSAweGYwIHwgKGMgPj4+IDE4KTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiAxMiAmIDB4M2YpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDYgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1Zjtcbn07XG5cbi8vIEhlbHBlciAodXNlZCBpbiAyIHBsYWNlcylcbmZ1bmN0aW9uIGJ1ZjJiaW5zdHJpbmcoYnVmLCBsZW4pIHtcbiAgLy8gdXNlIGZhbGxiYWNrIGZvciBiaWcgYXJyYXlzIHRvIGF2b2lkIHN0YWNrIG92ZXJmbG93XG4gIGlmIChsZW4gPCA2NTUzNykge1xuICAgIGlmICgoYnVmLnN1YmFycmF5ICYmIFNUUl9BUFBMWV9VSUFfT0spIHx8ICghYnVmLnN1YmFycmF5ICYmIFNUUl9BUFBMWV9PSykpIHtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIHV0aWxzLnNocmlua0J1ZihidWYsIGxlbikpO1xuICAgIH1cbiAgfVxuXG4gIHZhciByZXN1bHQgPSAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vLyBDb252ZXJ0IGJ5dGUgYXJyYXkgdG8gYmluYXJ5IHN0cmluZ1xuZXhwb3J0cy5idWYyYmluc3RyaW5nID0gZnVuY3Rpb24gKGJ1Zikge1xuICByZXR1cm4gYnVmMmJpbnN0cmluZyhidWYsIGJ1Zi5sZW5ndGgpO1xufTtcblxuXG4vLyBDb252ZXJ0IGJpbmFyeSBzdHJpbmcgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKVxuZXhwb3J0cy5iaW5zdHJpbmcyYnVmID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgYnVmID0gbmV3IHV0aWxzLkJ1Zjgoc3RyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBidWZbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gYnVmO1xufTtcblxuXG4vLyBjb252ZXJ0IGFycmF5IHRvIHN0cmluZ1xuZXhwb3J0cy5idWYyc3RyaW5nID0gZnVuY3Rpb24gKGJ1ZiwgbWF4KSB7XG4gIHZhciBpLCBvdXQsIGMsIGNfbGVuO1xuICB2YXIgbGVuID0gbWF4IHx8IGJ1Zi5sZW5ndGg7XG5cbiAgLy8gUmVzZXJ2ZSBtYXggcG9zc2libGUgbGVuZ3RoICgyIHdvcmRzIHBlciBjaGFyKVxuICAvLyBOQjogYnkgdW5rbm93biByZWFzb25zLCBBcnJheSBpcyBzaWduaWZpY2FudGx5IGZhc3RlciBmb3JcbiAgLy8gICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgdGhhbiBVaW50MTZBcnJheS5cbiAgdmFyIHV0ZjE2YnVmID0gbmV3IEFycmF5KGxlbiAqIDIpO1xuXG4gIGZvciAob3V0ID0gMCwgaSA9IDA7IGkgPCBsZW47KSB7XG4gICAgYyA9IGJ1ZltpKytdO1xuICAgIC8vIHF1aWNrIHByb2Nlc3MgYXNjaWlcbiAgICBpZiAoYyA8IDB4ODApIHsgdXRmMTZidWZbb3V0KytdID0gYzsgY29udGludWU7IH1cblxuICAgIGNfbGVuID0gX3V0ZjhsZW5bY107XG4gICAgLy8gc2tpcCA1ICYgNiBieXRlIGNvZGVzXG4gICAgaWYgKGNfbGVuID4gNCkgeyB1dGYxNmJ1ZltvdXQrK10gPSAweGZmZmQ7IGkgKz0gY19sZW4gLSAxOyBjb250aW51ZTsgfVxuXG4gICAgLy8gYXBwbHkgbWFzayBvbiBmaXJzdCBieXRlXG4gICAgYyAmPSBjX2xlbiA9PT0gMiA/IDB4MWYgOiBjX2xlbiA9PT0gMyA/IDB4MGYgOiAweDA3O1xuICAgIC8vIGpvaW4gdGhlIHJlc3RcbiAgICB3aGlsZSAoY19sZW4gPiAxICYmIGkgPCBsZW4pIHtcbiAgICAgIGMgPSAoYyA8PCA2KSB8IChidWZbaSsrXSAmIDB4M2YpO1xuICAgICAgY19sZW4tLTtcbiAgICB9XG5cbiAgICAvLyB0ZXJtaW5hdGVkIGJ5IGVuZCBvZiBzdHJpbmc/XG4gICAgaWYgKGNfbGVuID4gMSkgeyB1dGYxNmJ1ZltvdXQrK10gPSAweGZmZmQ7IGNvbnRpbnVlOyB9XG5cbiAgICBpZiAoYyA8IDB4MTAwMDApIHtcbiAgICAgIHV0ZjE2YnVmW291dCsrXSA9IGM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGMgLT0gMHgxMDAwMDtcbiAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDB4ZDgwMCB8ICgoYyA+PiAxMCkgJiAweDNmZik7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSAweGRjMDAgfCAoYyAmIDB4M2ZmKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmMmJpbnN0cmluZyh1dGYxNmJ1Ziwgb3V0KTtcbn07XG5cblxuLy8gQ2FsY3VsYXRlIG1heCBwb3NzaWJsZSBwb3NpdGlvbiBpbiB1dGY4IGJ1ZmZlcixcbi8vIHRoYXQgd2lsbCBub3QgYnJlYWsgc2VxdWVuY2UuIElmIHRoYXQncyBub3QgcG9zc2libGVcbi8vIC0gKHZlcnkgc21hbGwgbGltaXRzKSByZXR1cm4gbWF4IHNpemUgYXMgaXMuXG4vL1xuLy8gYnVmW10gLSB1dGY4IGJ5dGVzIGFycmF5XG4vLyBtYXggICAtIGxlbmd0aCBsaW1pdCAobWFuZGF0b3J5KTtcbmV4cG9ydHMudXRmOGJvcmRlciA9IGZ1bmN0aW9uIChidWYsIG1heCkge1xuICB2YXIgcG9zO1xuXG4gIG1heCA9IG1heCB8fCBidWYubGVuZ3RoO1xuICBpZiAobWF4ID4gYnVmLmxlbmd0aCkgeyBtYXggPSBidWYubGVuZ3RoOyB9XG5cbiAgLy8gZ28gYmFjayBmcm9tIGxhc3QgcG9zaXRpb24sIHVudGlsIHN0YXJ0IG9mIHNlcXVlbmNlIGZvdW5kXG4gIHBvcyA9IG1heCAtIDE7XG4gIHdoaWxlIChwb3MgPj0gMCAmJiAoYnVmW3Bvc10gJiAweEMwKSA9PT0gMHg4MCkgeyBwb3MtLTsgfVxuXG4gIC8vIEZ1Y2t1cCAtIHZlcnkgc21hbGwgYW5kIGJyb2tlbiBzZXF1ZW5jZSxcbiAgLy8gcmV0dXJuIG1heCwgYmVjYXVzZSB3ZSBzaG91bGQgcmV0dXJuIHNvbWV0aGluZyBhbnl3YXkuXG4gIGlmIChwb3MgPCAwKSB7IHJldHVybiBtYXg7IH1cblxuICAvLyBJZiB3ZSBjYW1lIHRvIHN0YXJ0IG9mIGJ1ZmZlciAtIHRoYXQgbWVhbnMgdnVmZmVyIGlzIHRvbyBzbWFsbCxcbiAgLy8gcmV0dXJuIG1heCB0b28uXG4gIGlmIChwb3MgPT09IDApIHsgcmV0dXJuIG1heDsgfVxuXG4gIHJldHVybiAocG9zICsgX3V0ZjhsZW5bYnVmW3Bvc11dID4gbWF4KSA/IHBvcyA6IG1heDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbi8vIE5vdGU6IGFkbGVyMzIgdGFrZXMgMTIlIGZvciBsZXZlbCAwIGFuZCAyJSBmb3IgbGV2ZWwgNi5cbi8vIEl0IGRvZXNuJ3Qgd29ydGggdG8gbWFrZSBhZGRpdGlvbmFsIG9wdGltaXphdGlvbmEgYXMgaW4gb3JpZ2luYWwuXG4vLyBTbWFsbCBzaXplIGlzIHByZWZlcmFibGUuXG5cbmZ1bmN0aW9uIGFkbGVyMzIoYWRsZXIsIGJ1ZiwgbGVuLCBwb3MpIHtcbiAgdmFyIHMxID0gKGFkbGVyICYgMHhmZmZmKSB8MCxcbiAgICAgIHMyID0gKChhZGxlciA+Pj4gMTYpICYgMHhmZmZmKSB8MCxcbiAgICAgIG4gPSAwO1xuXG4gIHdoaWxlIChsZW4gIT09IDApIHtcbiAgICAvLyBTZXQgbGltaXQgfiB0d2ljZSBsZXNzIHRoYW4gNTU1MiwgdG8ga2VlcFxuICAgIC8vIHMyIGluIDMxLWJpdHMsIGJlY2F1c2Ugd2UgZm9yY2Ugc2lnbmVkIGludHMuXG4gICAgLy8gaW4gb3RoZXIgY2FzZSAlPSB3aWxsIGZhaWwuXG4gICAgbiA9IGxlbiA+IDIwMDAgPyAyMDAwIDogbGVuO1xuICAgIGxlbiAtPSBuO1xuXG4gICAgZG8ge1xuICAgICAgczEgPSAoczEgKyBidWZbcG9zKytdKSB8MDtcbiAgICAgIHMyID0gKHMyICsgczEpIHwwO1xuICAgIH0gd2hpbGUgKC0tbik7XG5cbiAgICBzMSAlPSA2NTUyMTtcbiAgICBzMiAlPSA2NTUyMTtcbiAgfVxuXG4gIHJldHVybiAoczEgfCAoczIgPDwgMTYpKSB8MDtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGFkbGVyMzI7XG4iLCIndXNlIHN0cmljdCc7XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG5cbiAgLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqL1xuICBaX05PX0ZMVVNIOiAgICAgICAgIDAsXG4gIFpfUEFSVElBTF9GTFVTSDogICAgMSxcbiAgWl9TWU5DX0ZMVVNIOiAgICAgICAyLFxuICBaX0ZVTExfRkxVU0g6ICAgICAgIDMsXG4gIFpfRklOSVNIOiAgICAgICAgICAgNCxcbiAgWl9CTE9DSzogICAgICAgICAgICA1LFxuICBaX1RSRUVTOiAgICAgICAgICAgIDYsXG5cbiAgLyogUmV0dXJuIGNvZGVzIGZvciB0aGUgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBmdW5jdGlvbnMuIE5lZ2F0aXZlIHZhbHVlc1xuICAqIGFyZSBlcnJvcnMsIHBvc2l0aXZlIHZhbHVlcyBhcmUgdXNlZCBmb3Igc3BlY2lhbCBidXQgbm9ybWFsIGV2ZW50cy5cbiAgKi9cbiAgWl9PSzogICAgICAgICAgICAgICAwLFxuICBaX1NUUkVBTV9FTkQ6ICAgICAgIDEsXG4gIFpfTkVFRF9ESUNUOiAgICAgICAgMixcbiAgWl9FUlJOTzogICAgICAgICAgIC0xLFxuICBaX1NUUkVBTV9FUlJPUjogICAgLTIsXG4gIFpfREFUQV9FUlJPUjogICAgICAtMyxcbiAgLy9aX01FTV9FUlJPUjogICAgIC00LFxuICBaX0JVRl9FUlJPUjogICAgICAgLTUsXG4gIC8vWl9WRVJTSU9OX0VSUk9SOiAtNixcblxuICAvKiBjb21wcmVzc2lvbiBsZXZlbHMgKi9cbiAgWl9OT19DT01QUkVTU0lPTjogICAgICAgICAwLFxuICBaX0JFU1RfU1BFRUQ6ICAgICAgICAgICAgIDEsXG4gIFpfQkVTVF9DT01QUkVTU0lPTjogICAgICAgOSxcbiAgWl9ERUZBVUxUX0NPTVBSRVNTSU9OOiAgIC0xLFxuXG5cbiAgWl9GSUxURVJFRDogICAgICAgICAgICAgICAxLFxuICBaX0hVRkZNQU5fT05MWTogICAgICAgICAgIDIsXG4gIFpfUkxFOiAgICAgICAgICAgICAgICAgICAgMyxcbiAgWl9GSVhFRDogICAgICAgICAgICAgICAgICA0LFxuICBaX0RFRkFVTFRfU1RSQVRFR1k6ICAgICAgIDAsXG5cbiAgLyogUG9zc2libGUgdmFsdWVzIG9mIHRoZSBkYXRhX3R5cGUgZmllbGQgKHRob3VnaCBzZWUgaW5mbGF0ZSgpKSAqL1xuICBaX0JJTkFSWTogICAgICAgICAgICAgICAgIDAsXG4gIFpfVEVYVDogICAgICAgICAgICAgICAgICAgMSxcbiAgLy9aX0FTQ0lJOiAgICAgICAgICAgICAgICAxLCAvLyA9IFpfVEVYVCAoZGVwcmVjYXRlZClcbiAgWl9VTktOT1dOOiAgICAgICAgICAgICAgICAyLFxuXG4gIC8qIFRoZSBkZWZsYXRlIGNvbXByZXNzaW9uIG1ldGhvZCAqL1xuICBaX0RFRkxBVEVEOiAgICAgICAgICAgICAgIDhcbiAgLy9aX05VTEw6ICAgICAgICAgICAgICAgICBudWxsIC8vIFVzZSAtMSBvciBudWxsIGlubGluZSwgZGVwZW5kaW5nIG9uIHZhciB0eXBlXG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBOb3RlOiB3ZSBjYW4ndCBnZXQgc2lnbmlmaWNhbnQgc3BlZWQgYm9vc3QgaGVyZS5cbi8vIFNvIHdyaXRlIGNvZGUgdG8gbWluaW1pemUgc2l6ZSAtIG5vIHByZWdlbmVyYXRlZCB0YWJsZXNcbi8vIGFuZCBhcnJheSB0b29scyBkZXBlbmRlbmNpZXMuXG5cblxuLy8gVXNlIG9yZGluYXJ5IGFycmF5LCBzaW5jZSB1bnR5cGVkIG1ha2VzIG5vIGJvb3N0IGhlcmVcbmZ1bmN0aW9uIG1ha2VUYWJsZSgpIHtcbiAgdmFyIGMsIHRhYmxlID0gW107XG5cbiAgZm9yICh2YXIgbiA9IDA7IG4gPCAyNTY7IG4rKykge1xuICAgIGMgPSBuO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgODsgaysrKSB7XG4gICAgICBjID0gKChjICYgMSkgPyAoMHhFREI4ODMyMCBeIChjID4+PiAxKSkgOiAoYyA+Pj4gMSkpO1xuICAgIH1cbiAgICB0YWJsZVtuXSA9IGM7XG4gIH1cblxuICByZXR1cm4gdGFibGU7XG59XG5cbi8vIENyZWF0ZSB0YWJsZSBvbiBsb2FkLiBKdXN0IDI1NSBzaWduZWQgbG9uZ3MuIE5vdCBhIHByb2JsZW0uXG52YXIgY3JjVGFibGUgPSBtYWtlVGFibGUoKTtcblxuXG5mdW5jdGlvbiBjcmMzMihjcmMsIGJ1ZiwgbGVuLCBwb3MpIHtcbiAgdmFyIHQgPSBjcmNUYWJsZSxcbiAgICAgIGVuZCA9IHBvcyArIGxlbjtcblxuICBjcmMgXj0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IHBvczsgaSA8IGVuZDsgaSsrKSB7XG4gICAgY3JjID0gKGNyYyA+Pj4gOCkgXiB0WyhjcmMgXiBidWZbaV0pICYgMHhGRl07XG4gIH1cblxuICByZXR1cm4gKGNyYyBeICgtMSkpOyAvLyA+Pj4gMDtcbn1cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNyYzMyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbmZ1bmN0aW9uIEdaaGVhZGVyKCkge1xuICAvKiB0cnVlIGlmIGNvbXByZXNzZWQgZGF0YSBiZWxpZXZlZCB0byBiZSB0ZXh0ICovXG4gIHRoaXMudGV4dCAgICAgICA9IDA7XG4gIC8qIG1vZGlmaWNhdGlvbiB0aW1lICovXG4gIHRoaXMudGltZSAgICAgICA9IDA7XG4gIC8qIGV4dHJhIGZsYWdzIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovXG4gIHRoaXMueGZsYWdzICAgICA9IDA7XG4gIC8qIG9wZXJhdGluZyBzeXN0ZW0gKi9cbiAgdGhpcy5vcyAgICAgICAgID0gMDtcbiAgLyogcG9pbnRlciB0byBleHRyYSBmaWVsZCBvciBaX05VTEwgaWYgbm9uZSAqL1xuICB0aGlzLmV4dHJhICAgICAgPSBudWxsO1xuICAvKiBleHRyYSBmaWVsZCBsZW5ndGggKHZhbGlkIGlmIGV4dHJhICE9IFpfTlVMTCkgKi9cbiAgdGhpcy5leHRyYV9sZW4gID0gMDsgLy8gQWN0dWFsbHksIHdlIGRvbid0IG5lZWQgaXQgaW4gSlMsXG4gICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBsZWF2ZSBmb3IgZmV3IGNvZGUgbW9kaWZpY2F0aW9uc1xuXG4gIC8vXG4gIC8vIFNldHVwIGxpbWl0cyBpcyBub3QgbmVjZXNzYXJ5IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnlcbiAgLy8gZm9yIGluZmxhdGUgdXNlIGNvbnN0YW50IGxpbWl0IGluIDY1NTM2IGJ5dGVzXG4gIC8vXG5cbiAgLyogc3BhY2UgYXQgZXh0cmEgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5leHRyYV9tYXggID0gMDtcbiAgLyogcG9pbnRlciB0byB6ZXJvLXRlcm1pbmF0ZWQgZmlsZSBuYW1lIG9yIFpfTlVMTCAqL1xuICB0aGlzLm5hbWUgICAgICAgPSAnJztcbiAgLyogc3BhY2UgYXQgbmFtZSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqL1xuICAvLyB0aGlzLm5hbWVfbWF4ICAgPSAwO1xuICAvKiBwb2ludGVyIHRvIHplcm8tdGVybWluYXRlZCBjb21tZW50IG9yIFpfTlVMTCAqL1xuICB0aGlzLmNvbW1lbnQgICAgPSAnJztcbiAgLyogc3BhY2UgYXQgY29tbWVudCAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqL1xuICAvLyB0aGlzLmNvbW1fbWF4ICAgPSAwO1xuICAvKiB0cnVlIGlmIHRoZXJlIHdhcyBvciB3aWxsIGJlIGEgaGVhZGVyIGNyYyAqL1xuICB0aGlzLmhjcmMgICAgICAgPSAwO1xuICAvKiB0cnVlIHdoZW4gZG9uZSByZWFkaW5nIGd6aXAgaGVhZGVyIChub3QgdXNlZCB3aGVuIHdyaXRpbmcgYSBnemlwIGZpbGUpICovXG4gIHRoaXMuZG9uZSAgICAgICA9IGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdaaGVhZGVyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBTZWUgc3RhdGUgZGVmcyBmcm9tIGluZmxhdGUuanNcbnZhciBCQUQgPSAzMDsgICAgICAgLyogZ290IGEgZGF0YSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyIFRZUEUgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovXG5cbi8qXG4gICBEZWNvZGUgbGl0ZXJhbCwgbGVuZ3RoLCBhbmQgZGlzdGFuY2UgY29kZXMgYW5kIHdyaXRlIG91dCB0aGUgcmVzdWx0aW5nXG4gICBsaXRlcmFsIGFuZCBtYXRjaCBieXRlcyB1bnRpbCBlaXRoZXIgbm90IGVub3VnaCBpbnB1dCBvciBvdXRwdXQgaXNcbiAgIGF2YWlsYWJsZSwgYW4gZW5kLW9mLWJsb2NrIGlzIGVuY291bnRlcmVkLCBvciBhIGRhdGEgZXJyb3IgaXMgZW5jb3VudGVyZWQuXG4gICBXaGVuIGxhcmdlIGVub3VnaCBpbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgYXJlIHN1cHBsaWVkIHRvIGluZmxhdGUoKSwgZm9yXG4gICBleGFtcGxlLCBhIDE2SyBpbnB1dCBidWZmZXIgYW5kIGEgNjRLIG91dHB1dCBidWZmZXIsIG1vcmUgdGhhbiA5NSUgb2YgdGhlXG4gICBpbmZsYXRlIGV4ZWN1dGlvbiB0aW1lIGlzIHNwZW50IGluIHRoaXMgcm91dGluZS5cblxuICAgRW50cnkgYXNzdW1wdGlvbnM6XG5cbiAgICAgICAgc3RhdGUubW9kZSA9PT0gTEVOXG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPj0gNlxuICAgICAgICBzdHJtLmF2YWlsX291dCA+PSAyNThcbiAgICAgICAgc3RhcnQgPj0gc3RybS5hdmFpbF9vdXRcbiAgICAgICAgc3RhdGUuYml0cyA8IDhcblxuICAgT24gcmV0dXJuLCBzdGF0ZS5tb2RlIGlzIG9uZSBvZjpcblxuICAgICAgICBMRU4gLS0gcmFuIG91dCBvZiBlbm91Z2ggb3V0cHV0IHNwYWNlIG9yIGVub3VnaCBhdmFpbGFibGUgaW5wdXRcbiAgICAgICAgVFlQRSAtLSByZWFjaGVkIGVuZCBvZiBibG9jayBjb2RlLCBpbmZsYXRlKCkgdG8gaW50ZXJwcmV0IG5leHQgYmxvY2tcbiAgICAgICAgQkFEIC0tIGVycm9yIGluIGJsb2NrIGRhdGFcblxuICAgTm90ZXM6XG5cbiAgICAtIFRoZSBtYXhpbXVtIGlucHV0IGJpdHMgdXNlZCBieSBhIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGlzIDE1IGJpdHMgZm9yIHRoZVxuICAgICAgbGVuZ3RoIGNvZGUsIDUgYml0cyBmb3IgdGhlIGxlbmd0aCBleHRyYSwgMTUgYml0cyBmb3IgdGhlIGRpc3RhbmNlIGNvZGUsXG4gICAgICBhbmQgMTMgYml0cyBmb3IgdGhlIGRpc3RhbmNlIGV4dHJhLiAgVGhpcyB0b3RhbHMgNDggYml0cywgb3Igc2l4IGJ5dGVzLlxuICAgICAgVGhlcmVmb3JlIGlmIHN0cm0uYXZhaWxfaW4gPj0gNiwgdGhlbiB0aGVyZSBpcyBlbm91Z2ggaW5wdXQgdG8gYXZvaWRcbiAgICAgIGNoZWNraW5nIGZvciBhdmFpbGFibGUgaW5wdXQgd2hpbGUgZGVjb2RpbmcuXG5cbiAgICAtIFRoZSBtYXhpbXVtIGJ5dGVzIHRoYXQgYSBzaW5nbGUgbGVuZ3RoL2Rpc3RhbmNlIHBhaXIgY2FuIG91dHB1dCBpcyAyNThcbiAgICAgIGJ5dGVzLCB3aGljaCBpcyB0aGUgbWF4aW11bSBsZW5ndGggdGhhdCBjYW4gYmUgY29kZWQuICBpbmZsYXRlX2Zhc3QoKVxuICAgICAgcmVxdWlyZXMgc3RybS5hdmFpbF9vdXQgPj0gMjU4IGZvciBlYWNoIGxvb3AgdG8gYXZvaWQgY2hlY2tpbmcgZm9yXG4gICAgICBvdXRwdXQgc3BhY2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5mbGF0ZV9mYXN0KHN0cm0sIHN0YXJ0KSB7XG4gIHZhciBzdGF0ZTtcbiAgdmFyIF9pbjsgICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uaW5wdXQgKi9cbiAgdmFyIGxhc3Q7ICAgICAgICAgICAgICAgICAgIC8qIGhhdmUgZW5vdWdoIGlucHV0IHdoaWxlIGluIDwgbGFzdCAqL1xuICB2YXIgX291dDsgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5vdXRwdXQgKi9cbiAgdmFyIGJlZzsgICAgICAgICAgICAgICAgICAgIC8qIGluZmxhdGUoKSdzIGluaXRpYWwgc3RybS5vdXRwdXQgKi9cbiAgdmFyIGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHdoaWxlIG91dCA8IGVuZCwgZW5vdWdoIHNwYWNlIGF2YWlsYWJsZSAqL1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgdmFyIGRtYXg7ICAgICAgICAgICAgICAgICAgIC8qIG1heGltdW0gZGlzdGFuY2UgZnJvbSB6bGliIGhlYWRlciAqL1xuLy8jZW5kaWZcbiAgdmFyIHdzaXplOyAgICAgICAgICAgICAgICAgIC8qIHdpbmRvdyBzaXplIG9yIHplcm8gaWYgbm90IHVzaW5nIHdpbmRvdyAqL1xuICB2YXIgd2hhdmU7ICAgICAgICAgICAgICAgICAgLyogdmFsaWQgYnl0ZXMgaW4gdGhlIHdpbmRvdyAqL1xuICB2YXIgd25leHQ7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHdyaXRlIGluZGV4ICovXG4gIC8vIFVzZSBgc193aW5kb3dgIGluc3RlYWQgYHdpbmRvd2AsIGF2b2lkIGNvbmZsaWN0IHdpdGggaW5zdHJ1bWVudGF0aW9uIHRvb2xzXG4gIHZhciBzX3dpbmRvdzsgICAgICAgICAgICAgICAvKiBhbGxvY2F0ZWQgc2xpZGluZyB3aW5kb3csIGlmIHdzaXplICE9IDAgKi9cbiAgdmFyIGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uaG9sZCAqL1xuICB2YXIgYml0czsgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5iaXRzICovXG4gIHZhciBsY29kZTsgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmxlbmNvZGUgKi9cbiAgdmFyIGRjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uZGlzdGNvZGUgKi9cbiAgdmFyIGxtYXNrOyAgICAgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGZpcnN0IGxldmVsIG9mIGxlbmd0aCBjb2RlcyAqL1xuICB2YXIgZG1hc2s7ICAgICAgICAgICAgICAgICAgLyogbWFzayBmb3IgZmlyc3QgbGV2ZWwgb2YgZGlzdGFuY2UgY29kZXMgKi9cbiAgdmFyIGhlcmU7ICAgICAgICAgICAgICAgICAgIC8qIHJldHJpZXZlZCB0YWJsZSBlbnRyeSAqL1xuICB2YXIgb3A7ICAgICAgICAgICAgICAgICAgICAgLyogY29kZSBiaXRzLCBvcGVyYXRpb24sIGV4dHJhIGJpdHMsIG9yICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgd2luZG93IHBvc2l0aW9uLCB3aW5kb3cgYnl0ZXMgdG8gY29weSAqL1xuICB2YXIgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggbGVuZ3RoLCB1bnVzZWQgYnl0ZXMgKi9cbiAgdmFyIGRpc3Q7ICAgICAgICAgICAgICAgICAgIC8qIG1hdGNoIGRpc3RhbmNlICovXG4gIHZhciBmcm9tOyAgICAgICAgICAgICAgICAgICAvKiB3aGVyZSB0byBjb3B5IG1hdGNoIGZyb20gKi9cbiAgdmFyIGZyb21fc291cmNlO1xuXG5cbiAgdmFyIGlucHV0LCBvdXRwdXQ7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnNcblxuICAvKiBjb3B5IHN0YXRlIHRvIGxvY2FsIHZhcmlhYmxlcyAqL1xuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIC8vaGVyZSA9IHN0YXRlLmhlcmU7XG4gIF9pbiA9IHN0cm0ubmV4dF9pbjtcbiAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICBsYXN0ID0gX2luICsgKHN0cm0uYXZhaWxfaW4gLSA1KTtcbiAgX291dCA9IHN0cm0ubmV4dF9vdXQ7XG4gIG91dHB1dCA9IHN0cm0ub3V0cHV0O1xuICBiZWcgPSBfb3V0IC0gKHN0YXJ0IC0gc3RybS5hdmFpbF9vdXQpO1xuICBlbmQgPSBfb3V0ICsgKHN0cm0uYXZhaWxfb3V0IC0gMjU3KTtcbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gIGRtYXggPSBzdGF0ZS5kbWF4O1xuLy8jZW5kaWZcbiAgd3NpemUgPSBzdGF0ZS53c2l6ZTtcbiAgd2hhdmUgPSBzdGF0ZS53aGF2ZTtcbiAgd25leHQgPSBzdGF0ZS53bmV4dDtcbiAgc193aW5kb3cgPSBzdGF0ZS53aW5kb3c7XG4gIGhvbGQgPSBzdGF0ZS5ob2xkO1xuICBiaXRzID0gc3RhdGUuYml0cztcbiAgbGNvZGUgPSBzdGF0ZS5sZW5jb2RlO1xuICBkY29kZSA9IHN0YXRlLmRpc3Rjb2RlO1xuICBsbWFzayA9ICgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMTtcbiAgZG1hc2sgPSAoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxO1xuXG5cbiAgLyogZGVjb2RlIGxpdGVyYWxzIGFuZCBsZW5ndGgvZGlzdGFuY2VzIHVudGlsIGVuZC1vZi1ibG9jayBvciBub3QgZW5vdWdoXG4gICAgIGlucHV0IGRhdGEgb3Igb3V0cHV0IHNwYWNlICovXG5cbiAgdG9wOlxuICBkbyB7XG4gICAgaWYgKGJpdHMgPCAxNSkge1xuICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgIGJpdHMgKz0gODtcbiAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICBiaXRzICs9IDg7XG4gICAgfVxuXG4gICAgaGVyZSA9IGxjb2RlW2hvbGQgJiBsbWFza107XG5cbiAgICBkb2xlbjpcbiAgICBmb3IgKDs7KSB7IC8vIEdvdG8gZW11bGF0aW9uXG4gICAgICBvcCA9IGhlcmUgPj4+IDI0LypoZXJlLmJpdHMqLztcbiAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgIGJpdHMgLT0gb3A7XG4gICAgICBvcCA9IChoZXJlID4+PiAxNikgJiAweGZmLypoZXJlLm9wKi87XG4gICAgICBpZiAob3AgPT09IDApIHsgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGxpdGVyYWwgKi9cbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIGhlcmUudmFsID49IDB4MjAgJiYgaGVyZS52YWwgPCAweDdmID9cbiAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsICclYydcXG5cIiA6XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcXG5cIiwgaGVyZS52YWwpKTtcbiAgICAgICAgb3V0cHV0W19vdXQrK10gPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAob3AgJiAxNikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBiYXNlICovXG4gICAgICAgIGxlbiA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87XG4gICAgICAgIG9wICY9IDE1OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovXG4gICAgICAgIGlmIChvcCkge1xuICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxlbiArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpO1xuICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICB9XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgbGVuZ3RoICV1XFxuXCIsIGxlbikpO1xuICAgICAgICBpZiAoYml0cyA8IDE1KSB7XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgaGVyZSA9IGRjb2RlW2hvbGQgJiBkbWFza107XG5cbiAgICAgICAgZG9kaXN0OlxuICAgICAgICBmb3IgKDs7KSB7IC8vIGdvdG8gZW11bGF0aW9uXG4gICAgICAgICAgb3AgPSBoZXJlID4+PiAyNC8qaGVyZS5iaXRzKi87XG4gICAgICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgICAgIGJpdHMgLT0gb3A7XG4gICAgICAgICAgb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZi8qaGVyZS5vcCovO1xuXG4gICAgICAgICAgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFzZSAqL1xuICAgICAgICAgICAgZGlzdCA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87XG4gICAgICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovXG4gICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXN0ICs9IGhvbGQgJiAoKDEgPDwgb3ApIC0gMSk7XG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICAgICAgICAgICAgaWYgKGRpc3QgPiBkbWF4KSB7XG4gICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgICAgICAgfVxuLy8jZW5kaWZcbiAgICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICAgIGJpdHMgLT0gb3A7XG4gICAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGRpc3RhbmNlICV1XFxuXCIsIGRpc3QpKTtcbiAgICAgICAgICAgIG9wID0gX291dCAtIGJlZzsgICAgICAgICAgICAgICAgLyogbWF4IGRpc3RhbmNlIGluIG91dHB1dCAqL1xuICAgICAgICAgICAgaWYgKGRpc3QgPiBvcCkgeyAgICAgICAgICAgICAgICAvKiBzZWUgaWYgY29weSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICBvcCA9IGRpc3QgLSBvcDsgICAgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYWNrIGluIHdpbmRvdyAqL1xuICAgICAgICAgICAgICBpZiAob3AgPiB3aGF2ZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zYW5lKSB7XG4gICAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgICAgICAgICAgIH1cblxuLy8gKCEpIFRoaXMgYmxvY2sgaXMgZGlzYWJsZWQgaW4gemxpYiBkZWZhaWx0cyxcbi8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHlcbi8vI2lmZGVmIElORkxBVEVfQUxMT1dfSU5WQUxJRF9ESVNUQU5DRV9UT09GQVJfQVJSUlxuLy8gICAgICAgICAgICAgICAgaWYgKGxlbiA8PSBvcCAtIHdoYXZlKSB7XG4vLyAgICAgICAgICAgICAgICAgIGRvIHtcbi8vICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7XG4vLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTtcbi8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wO1xuLy8gICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgbGVuIC09IG9wIC0gd2hhdmU7XG4vLyAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gMDtcbi8vICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3AgPiB3aGF2ZSk7XG4vLyAgICAgICAgICAgICAgICBpZiAob3AgPT09IDApIHtcbi8vICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0O1xuLy8gICAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbi8vICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1sZW4pO1xuLy8gICAgICAgICAgICAgICAgICBjb250aW51ZSB0b3A7XG4vLyAgICAgICAgICAgICAgICB9XG4vLyNlbmRpZlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGZyb20gPSAwOyAvLyB3aW5kb3cgaW5kZXhcbiAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBzX3dpbmRvdztcbiAgICAgICAgICAgICAgaWYgKHduZXh0ID09PSAwKSB7ICAgICAgICAgICAvKiB2ZXJ5IGNvbW1vbiBjYXNlICovXG4gICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSAtIG9wO1xuICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAod25leHQgPCBvcCkgeyAgICAgIC8qIHdyYXAgYXJvdW5kIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd3NpemUgKyB3bmV4dCAtIG9wO1xuICAgICAgICAgICAgICAgIG9wIC09IHduZXh0O1xuICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSBlbmQgb2Ygd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IDA7XG4gICAgICAgICAgICAgICAgICBpZiAod25leHQgPCBsZW4pIHsgIC8qIHNvbWUgZnJvbSBzdGFydCBvZiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgICAgb3AgPSB3bmV4dDtcbiAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgICAgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAvKiBjb250aWd1b3VzIGluIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd25leHQgLSBvcDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHdoaWxlIChsZW4gPiAyKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgbGVuIC09IDM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAgICAgLyogY29weSBkaXJlY3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgZG8geyAgICAgICAgICAgICAgICAgICAgICAgIC8qIG1pbmltdW0gbGVuZ3RoIGlzIHRocmVlICovXG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgbGVuIC09IDM7XG4gICAgICAgICAgICAgIH0gd2hpbGUgKGxlbiA+IDIpO1xuICAgICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoKG9wICYgNjQpID09PSAwKSB7ICAgICAgICAgIC8qIDJuZCBsZXZlbCBkaXN0YW5jZSBjb2RlICovXG4gICAgICAgICAgICBoZXJlID0gZGNvZGVbKGhlcmUgJiAweGZmZmYpLypoZXJlLnZhbCovICsgKGhvbGQgJiAoKDEgPDwgb3ApIC0gMSkpXTtcbiAgICAgICAgICAgIGNvbnRpbnVlIGRvZGlzdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhazsgLy8gbmVlZCB0byBlbXVsYXRlIGdvdG8gdmlhIFwiY29udGludWVcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsgICAgICAgICAgICAgIC8qIDJuZCBsZXZlbCBsZW5ndGggY29kZSAqL1xuICAgICAgICBoZXJlID0gbGNvZGVbKGhlcmUgJiAweGZmZmYpLypoZXJlLnZhbCovICsgKGhvbGQgJiAoKDEgPDwgb3ApIC0gMSkpXTtcbiAgICAgICAgY29udGludWUgZG9sZW47XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChvcCAmIDMyKSB7ICAgICAgICAgICAgICAgICAgICAgLyogZW5kLW9mLWJsb2NrICovXG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZW5kIG9mIGJsb2NrXFxuXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgIGJyZWFrIHRvcDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhayB0b3A7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrOyAvLyBuZWVkIHRvIGVtdWxhdGUgZ290byB2aWEgXCJjb250aW51ZVwiXG4gICAgfVxuICB9IHdoaWxlIChfaW4gPCBsYXN0ICYmIF9vdXQgPCBlbmQpO1xuXG4gIC8qIHJldHVybiB1bnVzZWQgYnl0ZXMgKG9uIGVudHJ5LCBiaXRzIDwgOCwgc28gaW4gd29uJ3QgZ28gdG9vIGZhciBiYWNrKSAqL1xuICBsZW4gPSBiaXRzID4+IDM7XG4gIF9pbiAtPSBsZW47XG4gIGJpdHMgLT0gbGVuIDw8IDM7XG4gIGhvbGQgJj0gKDEgPDwgYml0cykgLSAxO1xuXG4gIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmV0dXJuICovXG4gIHN0cm0ubmV4dF9pbiA9IF9pbjtcbiAgc3RybS5uZXh0X291dCA9IF9vdXQ7XG4gIHN0cm0uYXZhaWxfaW4gPSAoX2luIDwgbGFzdCA/IDUgKyAobGFzdCAtIF9pbikgOiA1IC0gKF9pbiAtIGxhc3QpKTtcbiAgc3RybS5hdmFpbF9vdXQgPSAoX291dCA8IGVuZCA/IDI1NyArIChlbmQgLSBfb3V0KSA6IDI1NyAtIChfb3V0IC0gZW5kKSk7XG4gIHN0YXRlLmhvbGQgPSBob2xkO1xuICBzdGF0ZS5iaXRzID0gYml0cztcbiAgcmV0dXJuO1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgdXRpbHMgICAgICAgICA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbW1vbicpO1xudmFyIGFkbGVyMzIgICAgICAgPSByZXF1aXJlKCcuL2FkbGVyMzInKTtcbnZhciBjcmMzMiAgICAgICAgID0gcmVxdWlyZSgnLi9jcmMzMicpO1xudmFyIGluZmxhdGVfZmFzdCAgPSByZXF1aXJlKCcuL2luZmZhc3QnKTtcbnZhciBpbmZsYXRlX3RhYmxlID0gcmVxdWlyZSgnLi9pbmZ0cmVlcycpO1xuXG52YXIgQ09ERVMgPSAwO1xudmFyIExFTlMgPSAxO1xudmFyIERJU1RTID0gMjtcblxuLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqL1xuLy92YXIgWl9OT19GTFVTSCAgICAgID0gMDtcbi8vdmFyIFpfUEFSVElBTF9GTFVTSCA9IDE7XG4vL3ZhciBaX1NZTkNfRkxVU0ggICAgPSAyO1xuLy92YXIgWl9GVUxMX0ZMVVNIICAgID0gMztcbnZhciBaX0ZJTklTSCAgICAgICAgPSA0O1xudmFyIFpfQkxPQ0sgICAgICAgICA9IDU7XG52YXIgWl9UUkVFUyAgICAgICAgID0gNjtcblxuXG4vKiBSZXR1cm4gY29kZXMgZm9yIHRoZSBjb21wcmVzc2lvbi9kZWNvbXByZXNzaW9uIGZ1bmN0aW9ucy4gTmVnYXRpdmUgdmFsdWVzXG4gKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuXG4gKi9cbnZhciBaX09LICAgICAgICAgICAgPSAwO1xudmFyIFpfU1RSRUFNX0VORCAgICA9IDE7XG52YXIgWl9ORUVEX0RJQ1QgICAgID0gMjtcbi8vdmFyIFpfRVJSTk8gICAgICAgICA9IC0xO1xudmFyIFpfU1RSRUFNX0VSUk9SICA9IC0yO1xudmFyIFpfREFUQV9FUlJPUiAgICA9IC0zO1xudmFyIFpfTUVNX0VSUk9SICAgICA9IC00O1xudmFyIFpfQlVGX0VSUk9SICAgICA9IC01O1xuLy92YXIgWl9WRVJTSU9OX0VSUk9SID0gLTY7XG5cbi8qIFRoZSBkZWZsYXRlIGNvbXByZXNzaW9uIG1ldGhvZCAqL1xudmFyIFpfREVGTEFURUQgID0gODtcblxuXG4vKiBTVEFURVMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG52YXIgICAgSEVBRCA9IDE7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1hZ2ljIGhlYWRlciAqL1xudmFyICAgIEZMQUdTID0gMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtZXRob2QgYW5kIGZsYWdzIChnemlwKSAqL1xudmFyICAgIFRJTUUgPSAzOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtb2RpZmljYXRpb24gdGltZSAoZ3ppcCkgKi9cbnZhciAgICBPUyA9IDQ7ICAgICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgZmxhZ3MgYW5kIG9wZXJhdGluZyBzeXN0ZW0gKGd6aXApICovXG52YXIgICAgRVhMRU4gPSA1OyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGxlbmd0aCAoZ3ppcCkgKi9cbnZhciAgICBFWFRSQSA9IDY7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgYnl0ZXMgKGd6aXApICovXG52YXIgICAgTkFNRSA9IDc7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGVuZCBvZiBmaWxlIG5hbWUgKGd6aXApICovXG52YXIgICAgQ09NTUVOVCA9IDg7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGVuZCBvZiBjb21tZW50IChnemlwKSAqL1xudmFyICAgIEhDUkMgPSA5OyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBoZWFkZXIgY3JjIChnemlwKSAqL1xudmFyICAgIERJQ1RJRCA9IDEwOyAgICAvKiBpOiB3YWl0aW5nIGZvciBkaWN0aW9uYXJ5IGNoZWNrIHZhbHVlICovXG52YXIgICAgRElDVCA9IDExOyAgICAgIC8qIHdhaXRpbmcgZm9yIGluZmxhdGVTZXREaWN0aW9uYXJ5KCkgY2FsbCAqL1xudmFyICAgICAgICBUWVBFID0gMTI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqL1xudmFyICAgICAgICBUWVBFRE8gPSAxMzsgICAgLyogaTogc2FtZSwgYnV0IHNraXAgY2hlY2sgdG8gZXhpdCBpbmZsYXRlIG9uIG5ldyBibG9jayAqL1xudmFyICAgICAgICBTVE9SRUQgPSAxNDsgICAgLyogaTogd2FpdGluZyBmb3Igc3RvcmVkIHNpemUgKGxlbmd0aCBhbmQgY29tcGxlbWVudCkgKi9cbnZhciAgICAgICAgQ09QWV8gPSAxNTsgICAgIC8qIGkvbzogc2FtZSBhcyBDT1BZIGJlbG93LCBidXQgb25seSBmaXJzdCB0aW1lIGluICovXG52YXIgICAgICAgIENPUFkgPSAxNjsgICAgICAvKiBpL286IHdhaXRpbmcgZm9yIGlucHV0IG9yIG91dHB1dCB0byBjb3B5IHN0b3JlZCBibG9jayAqL1xudmFyICAgICAgICBUQUJMRSA9IDE3OyAgICAgLyogaTogd2FpdGluZyBmb3IgZHluYW1pYyBibG9jayB0YWJsZSBsZW5ndGhzICovXG52YXIgICAgICAgIExFTkxFTlMgPSAxODsgICAvKiBpOiB3YWl0aW5nIGZvciBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbnZhciAgICAgICAgQ09ERUxFTlMgPSAxOTsgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aC9saXQgYW5kIGRpc3RhbmNlIGNvZGUgbGVuZ3RocyAqL1xudmFyICAgICAgICAgICAgTEVOXyA9IDIwOyAgICAgIC8qIGk6IHNhbWUgYXMgTEVOIGJlbG93LCBidXQgb25seSBmaXJzdCB0aW1lIGluICovXG52YXIgICAgICAgICAgICBMRU4gPSAyMTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoL2xpdC9lb2IgY29kZSAqL1xudmFyICAgICAgICAgICAgTEVORVhUID0gMjI7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aCBleHRyYSBiaXRzICovXG52YXIgICAgICAgICAgICBESVNUID0gMjM7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZGlzdGFuY2UgY29kZSAqL1xudmFyICAgICAgICAgICAgRElTVEVYVCA9IDI0OyAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGV4dHJhIGJpdHMgKi9cbnZhciAgICAgICAgICAgIE1BVENIID0gMjU7ICAgICAvKiBvOiB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2UgdG8gY29weSBzdHJpbmcgKi9cbnZhciAgICAgICAgICAgIExJVCA9IDI2OyAgICAgICAvKiBvOiB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2UgdG8gd3JpdGUgbGl0ZXJhbCAqL1xudmFyICAgIENIRUNLID0gMjc7ICAgICAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgY2hlY2sgdmFsdWUgKi9cbnZhciAgICBMRU5HVEggPSAyODsgICAgLyogaTogd2FpdGluZyBmb3IgMzItYml0IGxlbmd0aCAoZ3ppcCkgKi9cbnZhciAgICBET05FID0gMjk7ICAgICAgLyogZmluaXNoZWQgY2hlY2ssIGRvbmUgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBCQUQgPSAzMDsgICAgICAgLyogZ290IGEgZGF0YSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyICAgIE1FTSA9IDMxOyAgICAgICAvKiBnb3QgYW4gaW5mbGF0ZSgpIG1lbW9yeSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyICAgIFNZTkMgPSAzMjsgICAgICAvKiBsb29raW5nIGZvciBzeW5jaHJvbml6YXRpb24gYnl0ZXMgdG8gcmVzdGFydCBpbmZsYXRlKCkgKi9cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG5cbnZhciBFTk9VR0hfTEVOUyA9IDg1MjtcbnZhciBFTk9VR0hfRElTVFMgPSA1OTI7XG4vL3ZhciBFTk9VR0ggPSAgKEVOT1VHSF9MRU5TK0VOT1VHSF9ESVNUUyk7XG5cbnZhciBNQVhfV0JJVFMgPSAxNTtcbi8qIDMySyBMWjc3IHdpbmRvdyAqL1xudmFyIERFRl9XQklUUyA9IE1BWF9XQklUUztcblxuXG5mdW5jdGlvbiB6c3dhcDMyKHEpIHtcbiAgcmV0dXJuICAoKChxID4+PiAyNCkgJiAweGZmKSArXG4gICAgICAgICAgKChxID4+PiA4KSAmIDB4ZmYwMCkgK1xuICAgICAgICAgICgocSAmIDB4ZmYwMCkgPDwgOCkgK1xuICAgICAgICAgICgocSAmIDB4ZmYpIDw8IDI0KSk7XG59XG5cblxuZnVuY3Rpb24gSW5mbGF0ZVN0YXRlKCkge1xuICB0aGlzLm1vZGUgPSAwOyAgICAgICAgICAgICAvKiBjdXJyZW50IGluZmxhdGUgbW9kZSAqL1xuICB0aGlzLmxhc3QgPSBmYWxzZTsgICAgICAgICAgLyogdHJ1ZSBpZiBwcm9jZXNzaW5nIGxhc3QgYmxvY2sgKi9cbiAgdGhpcy53cmFwID0gMDsgICAgICAgICAgICAgIC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi9cbiAgdGhpcy5oYXZlZGljdCA9IGZhbHNlOyAgICAgIC8qIHRydWUgaWYgZGljdGlvbmFyeSBwcm92aWRlZCAqL1xuICB0aGlzLmZsYWdzID0gMDsgICAgICAgICAgICAgLyogZ3ppcCBoZWFkZXIgbWV0aG9kIGFuZCBmbGFncyAoMCBpZiB6bGliKSAqL1xuICB0aGlzLmRtYXggPSAwOyAgICAgICAgICAgICAgLyogemxpYiBoZWFkZXIgbWF4IGRpc3RhbmNlIChJTkZMQVRFX1NUUklDVCkgKi9cbiAgdGhpcy5jaGVjayA9IDA7ICAgICAgICAgICAgIC8qIHByb3RlY3RlZCBjb3B5IG9mIGNoZWNrIHZhbHVlICovXG4gIHRoaXMudG90YWwgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBvdXRwdXQgY291bnQgKi9cbiAgLy8gVE9ETzogbWF5IGJlIHt9XG4gIHRoaXMuaGVhZCA9IG51bGw7ICAgICAgICAgICAvKiB3aGVyZSB0byBzYXZlIGd6aXAgaGVhZGVyIGluZm9ybWF0aW9uICovXG5cbiAgLyogc2xpZGluZyB3aW5kb3cgKi9cbiAgdGhpcy53Yml0cyA9IDA7ICAgICAgICAgICAgIC8qIGxvZyBiYXNlIDIgb2YgcmVxdWVzdGVkIHdpbmRvdyBzaXplICovXG4gIHRoaXMud3NpemUgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi9cbiAgdGhpcy53aGF2ZSA9IDA7ICAgICAgICAgICAgIC8qIHZhbGlkIGJ5dGVzIGluIHRoZSB3aW5kb3cgKi9cbiAgdGhpcy53bmV4dCA9IDA7ICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqL1xuICB0aGlzLndpbmRvdyA9IG51bGw7ICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiBuZWVkZWQgKi9cblxuICAvKiBiaXQgYWNjdW11bGF0b3IgKi9cbiAgdGhpcy5ob2xkID0gMDsgICAgICAgICAgICAgIC8qIGlucHV0IGJpdCBhY2N1bXVsYXRvciAqL1xuICB0aGlzLmJpdHMgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGJpdHMgaW4gXCJpblwiICovXG5cbiAgLyogZm9yIHN0cmluZyBhbmQgc3RvcmVkIGJsb2NrIGNvcHlpbmcgKi9cbiAgdGhpcy5sZW5ndGggPSAwOyAgICAgICAgICAgIC8qIGxpdGVyYWwgb3IgbGVuZ3RoIG9mIGRhdGEgdG8gY29weSAqL1xuICB0aGlzLm9mZnNldCA9IDA7ICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayB0byBjb3B5IHN0cmluZyBmcm9tICovXG5cbiAgLyogZm9yIHRhYmxlIGFuZCBjb2RlIGRlY29kaW5nICovXG4gIHRoaXMuZXh0cmEgPSAwOyAgICAgICAgICAgICAvKiBleHRyYSBiaXRzIG5lZWRlZCAqL1xuXG4gIC8qIGZpeGVkIGFuZCBkeW5hbWljIGNvZGUgdGFibGVzICovXG4gIHRoaXMubGVuY29kZSA9IG51bGw7ICAgICAgICAgIC8qIHN0YXJ0aW5nIHRhYmxlIGZvciBsZW5ndGgvbGl0ZXJhbCBjb2RlcyAqL1xuICB0aGlzLmRpc3Rjb2RlID0gbnVsbDsgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKi9cbiAgdGhpcy5sZW5iaXRzID0gMDsgICAgICAgICAgIC8qIGluZGV4IGJpdHMgZm9yIGxlbmNvZGUgKi9cbiAgdGhpcy5kaXN0Yml0cyA9IDA7ICAgICAgICAgIC8qIGluZGV4IGJpdHMgZm9yIGRpc3Rjb2RlICovXG5cbiAgLyogZHluYW1pYyB0YWJsZSBidWlsZGluZyAqL1xuICB0aGlzLm5jb2RlID0gMDsgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLm5sZW4gPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5uZGlzdCA9IDA7ICAgICAgICAgICAgIC8qIG51bWJlciBvZiBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5oYXZlID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aHMgaW4gbGVuc1tdICovXG4gIHRoaXMubmV4dCA9IG51bGw7ICAgICAgICAgICAgICAvKiBuZXh0IGF2YWlsYWJsZSBzcGFjZSBpbiBjb2Rlc1tdICovXG5cbiAgdGhpcy5sZW5zID0gbmV3IHV0aWxzLkJ1ZjE2KDMyMCk7IC8qIHRlbXBvcmFyeSBzdG9yYWdlIGZvciBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy53b3JrID0gbmV3IHV0aWxzLkJ1ZjE2KDI4OCk7IC8qIHdvcmsgYXJlYSBmb3IgY29kZSB0YWJsZSBidWlsZGluZyAqL1xuXG4gIC8qXG4gICBiZWNhdXNlIHdlIGRvbid0IGhhdmUgcG9pbnRlcnMgaW4ganMsIHdlIHVzZSBsZW5jb2RlIGFuZCBkaXN0Y29kZSBkaXJlY3RseVxuICAgYXMgYnVmZmVycyBzbyB3ZSBkb24ndCBuZWVkIGNvZGVzXG4gICovXG4gIC8vdGhpcy5jb2RlcyA9IG5ldyB1dGlscy5CdWYzMihFTk9VR0gpOyAgICAgICAvKiBzcGFjZSBmb3IgY29kZSB0YWJsZXMgKi9cbiAgdGhpcy5sZW5keW4gPSBudWxsOyAgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKEpTIHNwZWNpZmljKSAqL1xuICB0aGlzLmRpc3RkeW4gPSBudWxsOyAgICAgICAgICAgICAvKiBkeW5hbWljIHRhYmxlIGZvciBkaXN0YW5jZSBjb2RlcyAoSlMgc3BlY2lmaWMpICovXG4gIHRoaXMuc2FuZSA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGlmIGZhbHNlLCBhbGxvdyBpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgKi9cbiAgdGhpcy5iYWNrID0gMDsgICAgICAgICAgICAgICAgICAgLyogYml0cyBiYWNrIG9mIGxhc3QgdW5wcm9jZXNzZWQgbGVuZ3RoL2xpdCAqL1xuICB0aGlzLndhcyA9IDA7ICAgICAgICAgICAgICAgICAgICAvKiBpbml0aWFsIGxlbmd0aCBvZiBtYXRjaCAqL1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pIHtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSBzdGF0ZS50b3RhbCA9IDA7XG4gIHN0cm0ubXNnID0gJyc7IC8qWl9OVUxMKi9cbiAgaWYgKHN0YXRlLndyYXApIHsgICAgICAgLyogdG8gc3VwcG9ydCBpbGwtY29uY2VpdmVkIEphdmEgdGVzdCBzdWl0ZSAqL1xuICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS53cmFwICYgMTtcbiAgfVxuICBzdGF0ZS5tb2RlID0gSEVBRDtcbiAgc3RhdGUubGFzdCA9IDA7XG4gIHN0YXRlLmhhdmVkaWN0ID0gMDtcbiAgc3RhdGUuZG1heCA9IDMyNzY4O1xuICBzdGF0ZS5oZWFkID0gbnVsbC8qWl9OVUxMKi87XG4gIHN0YXRlLmhvbGQgPSAwO1xuICBzdGF0ZS5iaXRzID0gMDtcbiAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7XG4gIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW4gPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIX0xFTlMpO1xuICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW4gPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIX0RJU1RTKTtcblxuICBzdGF0ZS5zYW5lID0gMTtcbiAgc3RhdGUuYmFjayA9IC0xO1xuICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6IHJlc2V0XFxuXCIpKTtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVSZXNldChzdHJtKSB7XG4gIHZhciBzdGF0ZTtcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RhdGUud3NpemUgPSAwO1xuICBzdGF0ZS53aGF2ZSA9IDA7XG4gIHN0YXRlLnduZXh0ID0gMDtcbiAgcmV0dXJuIGluZmxhdGVSZXNldEtlZXAoc3RybSk7XG5cbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVJlc2V0MihzdHJtLCB3aW5kb3dCaXRzKSB7XG4gIHZhciB3cmFwO1xuICB2YXIgc3RhdGU7XG5cbiAgLyogZ2V0IHRoZSBzdGF0ZSAqL1xuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICAvKiBleHRyYWN0IHdyYXAgcmVxdWVzdCBmcm9tIHdpbmRvd0JpdHMgcGFyYW1ldGVyICovXG4gIGlmICh3aW5kb3dCaXRzIDwgMCkge1xuICAgIHdyYXAgPSAwO1xuICAgIHdpbmRvd0JpdHMgPSAtd2luZG93Qml0cztcbiAgfVxuICBlbHNlIHtcbiAgICB3cmFwID0gKHdpbmRvd0JpdHMgPj4gNCkgKyAxO1xuICAgIGlmICh3aW5kb3dCaXRzIDwgNDgpIHtcbiAgICAgIHdpbmRvd0JpdHMgJj0gMTU7XG4gICAgfVxuICB9XG5cbiAgLyogc2V0IG51bWJlciBvZiB3aW5kb3cgYml0cywgZnJlZSB3aW5kb3cgaWYgZGlmZmVyZW50ICovXG4gIGlmICh3aW5kb3dCaXRzICYmICh3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUpKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIGlmIChzdGF0ZS53aW5kb3cgIT09IG51bGwgJiYgc3RhdGUud2JpdHMgIT09IHdpbmRvd0JpdHMpIHtcbiAgICBzdGF0ZS53aW5kb3cgPSBudWxsO1xuICB9XG5cbiAgLyogdXBkYXRlIHN0YXRlIGFuZCByZXNldCB0aGUgcmVzdCBvZiBpdCAqL1xuICBzdGF0ZS53cmFwID0gd3JhcDtcbiAgc3RhdGUud2JpdHMgPSB3aW5kb3dCaXRzO1xuICByZXR1cm4gaW5mbGF0ZVJlc2V0KHN0cm0pO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlSW5pdDIoc3RybSwgd2luZG93Qml0cykge1xuICB2YXIgcmV0O1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICAvL3N0cm0ubXNnID0gWl9OVUxMOyAgICAgICAgICAgICAgICAgLyogaW4gY2FzZSB3ZSByZXR1cm4gYW4gZXJyb3IgKi9cblxuICBzdGF0ZSA9IG5ldyBJbmZsYXRlU3RhdGUoKTtcblxuICAvL2lmIChzdGF0ZSA9PT0gWl9OVUxMKSByZXR1cm4gWl9NRU1fRVJST1I7XG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogYWxsb2NhdGVkXFxuXCIpKTtcbiAgc3RybS5zdGF0ZSA9IHN0YXRlO1xuICBzdGF0ZS53aW5kb3cgPSBudWxsLypaX05VTEwqLztcbiAgcmV0ID0gaW5mbGF0ZVJlc2V0MihzdHJtLCB3aW5kb3dCaXRzKTtcbiAgaWYgKHJldCAhPT0gWl9PSykge1xuICAgIHN0cm0uc3RhdGUgPSBudWxsLypaX05VTEwqLztcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlSW5pdChzdHJtKSB7XG4gIHJldHVybiBpbmZsYXRlSW5pdDIoc3RybSwgREVGX1dCSVRTKTtcbn1cblxuXG4vKlxuIFJldHVybiBzdGF0ZSB3aXRoIGxlbmd0aCBhbmQgZGlzdGFuY2UgZGVjb2RpbmcgdGFibGVzIGFuZCBpbmRleCBzaXplcyBzZXQgdG9cbiBmaXhlZCBjb2RlIGRlY29kaW5nLiAgTm9ybWFsbHkgdGhpcyByZXR1cm5zIGZpeGVkIHRhYmxlcyBmcm9tIGluZmZpeGVkLmguXG4gSWYgQlVJTERGSVhFRCBpcyBkZWZpbmVkLCB0aGVuIGluc3RlYWQgdGhpcyByb3V0aW5lIGJ1aWxkcyB0aGUgdGFibGVzIHRoZVxuIGZpcnN0IHRpbWUgaXQncyBjYWxsZWQsIGFuZCByZXR1cm5zIHRob3NlIHRhYmxlcyB0aGUgZmlyc3QgdGltZSBhbmRcbiB0aGVyZWFmdGVyLiAgVGhpcyByZWR1Y2VzIHRoZSBzaXplIG9mIHRoZSBjb2RlIGJ5IGFib3V0IDJLIGJ5dGVzLCBpblxuIGV4Y2hhbmdlIGZvciBhIGxpdHRsZSBleGVjdXRpb24gdGltZS4gIEhvd2V2ZXIsIEJVSUxERklYRUQgc2hvdWxkIG5vdCBiZVxuIHVzZWQgZm9yIHRocmVhZGVkIGFwcGxpY2F0aW9ucywgc2luY2UgdGhlIHJld3JpdGluZyBvZiB0aGUgdGFibGVzIGFuZCB2aXJnaW5cbiBtYXkgbm90IGJlIHRocmVhZC1zYWZlLlxuICovXG52YXIgdmlyZ2luID0gdHJ1ZTtcblxudmFyIGxlbmZpeCwgZGlzdGZpeDsgLy8gV2UgaGF2ZSBubyBwb2ludGVycyBpbiBKUywgc28ga2VlcCB0YWJsZXMgc2VwYXJhdGVcblxuZnVuY3Rpb24gZml4ZWR0YWJsZXMoc3RhdGUpIHtcbiAgLyogYnVpbGQgZml4ZWQgaHVmZm1hbiB0YWJsZXMgaWYgZmlyc3QgY2FsbCAobWF5IG5vdCBiZSB0aHJlYWQgc2FmZSkgKi9cbiAgaWYgKHZpcmdpbikge1xuICAgIHZhciBzeW07XG5cbiAgICBsZW5maXggPSBuZXcgdXRpbHMuQnVmMzIoNTEyKTtcbiAgICBkaXN0Zml4ID0gbmV3IHV0aWxzLkJ1ZjMyKDMyKTtcblxuICAgIC8qIGxpdGVyYWwvbGVuZ3RoIHRhYmxlICovXG4gICAgc3ltID0gMDtcbiAgICB3aGlsZSAoc3ltIDwgMTQ0KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gODsgfVxuICAgIHdoaWxlIChzeW0gPCAyNTYpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA5OyB9XG4gICAgd2hpbGUgKHN5bSA8IDI4MCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDc7IH1cbiAgICB3aGlsZSAoc3ltIDwgMjg4KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gODsgfVxuXG4gICAgaW5mbGF0ZV90YWJsZShMRU5TLCAgc3RhdGUubGVucywgMCwgMjg4LCBsZW5maXgsICAgMCwgc3RhdGUud29yaywgeyBiaXRzOiA5IH0pO1xuXG4gICAgLyogZGlzdGFuY2UgdGFibGUgKi9cbiAgICBzeW0gPSAwO1xuICAgIHdoaWxlIChzeW0gPCAzMikgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDU7IH1cblxuICAgIGluZmxhdGVfdGFibGUoRElTVFMsIHN0YXRlLmxlbnMsIDAsIDMyLCAgIGRpc3RmaXgsIDAsIHN0YXRlLndvcmssIHsgYml0czogNSB9KTtcblxuICAgIC8qIGRvIHRoaXMganVzdCBvbmNlICovXG4gICAgdmlyZ2luID0gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5sZW5jb2RlID0gbGVuZml4O1xuICBzdGF0ZS5sZW5iaXRzID0gOTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBkaXN0Zml4O1xuICBzdGF0ZS5kaXN0Yml0cyA9IDU7XG59XG5cblxuLypcbiBVcGRhdGUgdGhlIHdpbmRvdyB3aXRoIHRoZSBsYXN0IHdzaXplIChub3JtYWxseSAzMkspIGJ5dGVzIHdyaXR0ZW4gYmVmb3JlXG4gcmV0dXJuaW5nLiAgSWYgd2luZG93IGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0LiAgVGhpcyBpcyBvbmx5IGNhbGxlZFxuIHdoZW4gYSB3aW5kb3cgaXMgYWxyZWFkeSBpbiB1c2UsIG9yIHdoZW4gb3V0cHV0IGhhcyBiZWVuIHdyaXR0ZW4gZHVyaW5nIHRoaXNcbiBpbmZsYXRlIGNhbGwsIGJ1dCB0aGUgZW5kIG9mIHRoZSBkZWZsYXRlIHN0cmVhbSBoYXMgbm90IGJlZW4gcmVhY2hlZCB5ZXQuXG4gSXQgaXMgYWxzbyBjYWxsZWQgdG8gY3JlYXRlIGEgd2luZG93IGZvciBkaWN0aW9uYXJ5IGRhdGEgd2hlbiBhIGRpY3Rpb25hcnlcbiBpcyBsb2FkZWQuXG5cbiBQcm92aWRpbmcgb3V0cHV0IGJ1ZmZlcnMgbGFyZ2VyIHRoYW4gMzJLIHRvIGluZmxhdGUoKSBzaG91bGQgcHJvdmlkZSBhIHNwZWVkXG4gYWR2YW50YWdlLCBzaW5jZSBvbmx5IHRoZSBsYXN0IDMySyBvZiBvdXRwdXQgaXMgY29waWVkIHRvIHRoZSBzbGlkaW5nIHdpbmRvd1xuIHVwb24gcmV0dXJuIGZyb20gaW5mbGF0ZSgpLCBhbmQgc2luY2UgYWxsIGRpc3RhbmNlcyBhZnRlciB0aGUgZmlyc3QgMzJLIG9mXG4gb3V0cHV0IHdpbGwgZmFsbCBpbiB0aGUgb3V0cHV0IGRhdGEsIG1ha2luZyBtYXRjaCBjb3BpZXMgc2ltcGxlciBhbmQgZmFzdGVyLlxuIFRoZSBhZHZhbnRhZ2UgbWF5IGJlIGRlcGVuZGVudCBvbiB0aGUgc2l6ZSBvZiB0aGUgcHJvY2Vzc29yJ3MgZGF0YSBjYWNoZXMuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZXdpbmRvdyhzdHJtLCBzcmMsIGVuZCwgY29weSkge1xuICB2YXIgZGlzdDtcbiAgdmFyIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICAvKiBpZiBpdCBoYXNuJ3QgYmVlbiBkb25lIGFscmVhZHksIGFsbG9jYXRlIHNwYWNlIGZvciB0aGUgd2luZG93ICovXG4gIGlmIChzdGF0ZS53aW5kb3cgPT09IG51bGwpIHtcbiAgICBzdGF0ZS53c2l6ZSA9IDEgPDwgc3RhdGUud2JpdHM7XG4gICAgc3RhdGUud25leHQgPSAwO1xuICAgIHN0YXRlLndoYXZlID0gMDtcblxuICAgIHN0YXRlLndpbmRvdyA9IG5ldyB1dGlscy5CdWY4KHN0YXRlLndzaXplKTtcbiAgfVxuXG4gIC8qIGNvcHkgc3RhdGUtPndzaXplIG9yIGxlc3Mgb3V0cHV0IGJ5dGVzIGludG8gdGhlIGNpcmN1bGFyIHdpbmRvdyAqL1xuICBpZiAoY29weSA+PSBzdGF0ZS53c2l6ZSkge1xuICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBzdGF0ZS53c2l6ZSwgc3RhdGUud3NpemUsIDApO1xuICAgIHN0YXRlLnduZXh0ID0gMDtcbiAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplO1xuICB9XG4gIGVsc2Uge1xuICAgIGRpc3QgPSBzdGF0ZS53c2l6ZSAtIHN0YXRlLnduZXh0O1xuICAgIGlmIChkaXN0ID4gY29weSkge1xuICAgICAgZGlzdCA9IGNvcHk7XG4gICAgfVxuICAgIC8vem1lbWNweShzdGF0ZS0+d2luZG93ICsgc3RhdGUtPnduZXh0LCBlbmQgLSBjb3B5LCBkaXN0KTtcbiAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gY29weSwgZGlzdCwgc3RhdGUud25leHQpO1xuICAgIGNvcHkgLT0gZGlzdDtcbiAgICBpZiAoY29weSkge1xuICAgICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3csIGVuZCAtIGNvcHksIGNvcHkpO1xuICAgICAgdXRpbHMuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGNvcHksIDApO1xuICAgICAgc3RhdGUud25leHQgPSBjb3B5O1xuICAgICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdGF0ZS53bmV4dCArPSBkaXN0O1xuICAgICAgaWYgKHN0YXRlLnduZXh0ID09PSBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53bmV4dCA9IDA7IH1cbiAgICAgIGlmIChzdGF0ZS53aGF2ZSA8IHN0YXRlLndzaXplKSB7IHN0YXRlLndoYXZlICs9IGRpc3Q7IH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGUoc3RybSwgZmx1c2gpIHtcbiAgdmFyIHN0YXRlO1xuICB2YXIgaW5wdXQsIG91dHB1dDsgICAgICAgICAgLy8gaW5wdXQvb3V0cHV0IGJ1ZmZlcnNcbiAgdmFyIG5leHQ7ICAgICAgICAgICAgICAgICAgIC8qIG5leHQgaW5wdXQgSU5ERVggKi9cbiAgdmFyIHB1dDsgICAgICAgICAgICAgICAgICAgIC8qIG5leHQgb3V0cHV0IElOREVYICovXG4gIHZhciBoYXZlLCBsZWZ0OyAgICAgICAgICAgICAvKiBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqL1xuICB2YXIgaG9sZDsgICAgICAgICAgICAgICAgICAgLyogYml0IGJ1ZmZlciAqL1xuICB2YXIgYml0czsgICAgICAgICAgICAgICAgICAgLyogYml0cyBpbiBiaXQgYnVmZmVyICovXG4gIHZhciBfaW4sIF9vdXQ7ICAgICAgICAgICAgICAvKiBzYXZlIHN0YXJ0aW5nIGF2YWlsYWJsZSBpbnB1dCBhbmQgb3V0cHV0ICovXG4gIHZhciBjb3B5OyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2Ygc3RvcmVkIG9yIG1hdGNoIGJ5dGVzIHRvIGNvcHkgKi9cbiAgdmFyIGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggYnl0ZXMgZnJvbSAqL1xuICB2YXIgZnJvbV9zb3VyY2U7XG4gIHZhciBoZXJlID0gMDsgICAgICAgICAgICAgICAvKiBjdXJyZW50IGRlY29kaW5nIHRhYmxlIGVudHJ5ICovXG4gIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsOyAvLyBwYWtlZCBcImhlcmVcIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKVxuICAvL3ZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBwYXJlbnQgdGFibGUgZW50cnkgKi9cbiAgdmFyIGxhc3RfYml0cywgbGFzdF9vcCwgbGFzdF92YWw7IC8vIHBha2VkIFwibGFzdFwiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpXG4gIHZhciBsZW47ICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggdG8gY29weSBmb3IgcmVwZWF0cywgYml0cyB0byBkcm9wICovXG4gIHZhciByZXQ7ICAgICAgICAgICAgICAgICAgICAvKiByZXR1cm4gY29kZSAqL1xuICB2YXIgaGJ1ZiA9IG5ldyB1dGlscy5CdWY4KDQpOyAgICAvKiBidWZmZXIgZm9yIGd6aXAgaGVhZGVyIGNyYyBjYWxjdWxhdGlvbiAqL1xuICB2YXIgb3B0cztcblxuICB2YXIgbjsgLy8gdGVtcG9yYXJ5IHZhciBmb3IgTkVFRF9CSVRTXG5cbiAgdmFyIG9yZGVyID0gLyogcGVybXV0YXRpb24gb2YgY29kZSBsZW5ndGhzICovXG4gICAgWyAxNiwgMTcsIDE4LCAwLCA4LCA3LCA5LCA2LCAxMCwgNSwgMTEsIDQsIDEyLCAzLCAxMywgMiwgMTQsIDEsIDE1IF07XG5cblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgfHwgIXN0cm0ub3V0cHV0IHx8XG4gICAgICAoIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkpIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIGlmIChzdGF0ZS5tb2RlID09PSBUWVBFKSB7IHN0YXRlLm1vZGUgPSBUWVBFRE87IH0gICAgLyogc2tpcCBjaGVjayAqL1xuXG5cbiAgLy8tLS0gTE9BRCgpIC0tLVxuICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0O1xuICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gIGhhdmUgPSBzdHJtLmF2YWlsX2luO1xuICBob2xkID0gc3RhdGUuaG9sZDtcbiAgYml0cyA9IHN0YXRlLmJpdHM7XG4gIC8vLS0tXG5cbiAgX2luID0gaGF2ZTtcbiAgX291dCA9IGxlZnQ7XG4gIHJldCA9IFpfT0s7XG5cbiAgaW5mX2xlYXZlOiAvLyBnb3RvIGVtdWxhdGlvblxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChzdGF0ZS5tb2RlKSB7XG4gICAgY2FzZSBIRUFEOlxuICAgICAgaWYgKHN0YXRlLndyYXAgPT09IDApIHtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEVETztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLz09PSBORUVEQklUUygxNik7XG4gICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBpZiAoKHN0YXRlLndyYXAgJiAyKSAmJiBob2xkID09PSAweDhiMWYpIHsgIC8qIGd6aXAgaGVhZGVyICovXG4gICAgICAgIHN0YXRlLmNoZWNrID0gMC8qY3JjMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAvLz09PS8vXG5cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLm1vZGUgPSBGTEFHUztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5mbGFncyA9IDA7ICAgICAgICAgICAvKiBleHBlY3QgemxpYiBoZWFkZXIgKi9cbiAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IGZhbHNlO1xuICAgICAgfVxuICAgICAgaWYgKCEoc3RhdGUud3JhcCAmIDEpIHx8ICAgLyogY2hlY2sgaWYgemxpYiBoZWFkZXIgYWxsb3dlZCAqL1xuICAgICAgICAoKChob2xkICYgMHhmZikvKkJJVFMoOCkqLyA8PCA4KSArIChob2xkID4+IDgpKSAlIDMxKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2luY29ycmVjdCBoZWFkZXIgY2hlY2snO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmICgoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gIT09IFpfREVGTEFURUQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vLS0tIERST1BCSVRTKDQpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNDtcbiAgICAgIGJpdHMgLT0gNDtcbiAgICAgIC8vLS0tLy9cbiAgICAgIGxlbiA9IChob2xkICYgMHgwZikvKkJJVFMoNCkqLyArIDg7XG4gICAgICBpZiAoc3RhdGUud2JpdHMgPT09IDApIHtcbiAgICAgICAgc3RhdGUud2JpdHMgPSBsZW47XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChsZW4gPiBzdGF0ZS53Yml0cykge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIHdpbmRvdyBzaXplJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5kbWF4ID0gMSA8PCBsZW47XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgemxpYiBoZWFkZXIgb2tcXG5cIikpO1xuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMS8qYWRsZXIzMigwTCwgWl9OVUxMLCAwKSovO1xuICAgICAgc3RhdGUubW9kZSA9IGhvbGQgJiAweDIwMCA/IERJQ1RJRCA6IFRZUEU7XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgRkxBR1M6XG4gICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5mbGFncyA9IGhvbGQ7XG4gICAgICBpZiAoKHN0YXRlLmZsYWdzICYgMHhmZikgIT09IFpfREVGTEFURUQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4ZTAwMCkge1xuICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGhlYWRlciBmbGFncyBzZXQnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQudGV4dCA9ICgoaG9sZCA+PiA4KSAmIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gVElNRTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIFRJTUU6XG4gICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLnRpbWUgPSBob2xkO1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgIC8vPT09IENSQzQoc3RhdGUuY2hlY2ssIGhvbGQpXG4gICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgIGhidWZbMl0gPSAoaG9sZCA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgaGJ1ZlszXSA9IChob2xkID4+PiAyNCkgJiAweGZmO1xuICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCA0LCAwKTtcbiAgICAgICAgLy89PT1cbiAgICAgIH1cbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IE9TO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgT1M6XG4gICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLnhmbGFncyA9IChob2xkICYgMHhmZik7XG4gICAgICAgIHN0YXRlLmhlYWQub3MgPSAoaG9sZCA+PiA4KTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgIH1cbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IEVYTEVOO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRVhMRU46XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA0MDApIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgICB3aGlsZSAoYml0cyA8IDE2KSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmxlbmd0aCA9IGhvbGQ7XG4gICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC5leHRyYV9sZW4gPSBob2xkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgICAvLz09PS8vXG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICB9XG4gICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBudWxsLypaX05VTEwqLztcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBFWFRSQTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIEVYVFJBOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7XG4gICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGlmIChjb3B5ID4gaGF2ZSkgeyBjb3B5ID0gaGF2ZTsgfVxuICAgICAgICBpZiAoY29weSkge1xuICAgICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgICBsZW4gPSBzdGF0ZS5oZWFkLmV4dHJhX2xlbiAtIHN0YXRlLmxlbmd0aDtcbiAgICAgICAgICAgIGlmICghc3RhdGUuaGVhZC5leHRyYSkge1xuICAgICAgICAgICAgICAvLyBVc2UgdW50eXBlZCBhcnJheSBmb3IgbW9yZSBjb252ZW5pZW5kIHByb2Nlc3NpbmcgbGF0ZXJcbiAgICAgICAgICAgICAgc3RhdGUuaGVhZC5leHRyYSA9IG5ldyBBcnJheShzdGF0ZS5oZWFkLmV4dHJhX2xlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1dGlscy5hcnJheVNldChcbiAgICAgICAgICAgICAgc3RhdGUuaGVhZC5leHRyYSxcbiAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgIG5leHQsXG4gICAgICAgICAgICAgIC8vIGV4dHJhIGZpZWxkIGlzIGxpbWl0ZWQgdG8gNjU1MzYgYnl0ZXNcbiAgICAgICAgICAgICAgLy8gLSBubyBuZWVkIGZvciBhZGRpdGlvbmFsIHNpemUgY2hlY2tcbiAgICAgICAgICAgICAgY29weSxcbiAgICAgICAgICAgICAgLypsZW4gKyBjb3B5ID4gc3RhdGUuaGVhZC5leHRyYV9tYXggLSBsZW4gPyBzdGF0ZS5oZWFkLmV4dHJhX21heCA6IGNvcHksKi9cbiAgICAgICAgICAgICAgbGVuXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgLy96bWVtY3B5KHN0YXRlLmhlYWQuZXh0cmEgKyBsZW4sIG5leHQsXG4gICAgICAgICAgICAvLyAgICAgICAgbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4ID9cbiAgICAgICAgICAgIC8vICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX21heCAtIGxlbiA6IGNvcHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZSAtPSBjb3B5O1xuICAgICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUubGVuZ3RoKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgfVxuICAgICAgc3RhdGUubGVuZ3RoID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBOQU1FO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTkFNRTpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDgwMCkge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgY29weSA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAvLyBUT0RPOiAyIG9yIDEgYnl0ZXM/XG4gICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107XG4gICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4gJiZcbiAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5uYW1lX21heCovKSkge1xuICAgICAgICAgICAgc3RhdGUuaGVhZC5uYW1lICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG5cbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICBpZiAobGVuKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLm5hbWUgPSBudWxsO1xuICAgICAgfVxuICAgICAgc3RhdGUubGVuZ3RoID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBDT01NRU5UO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgQ09NTUVOVDpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MTAwMCkge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgY29weSA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBsZW4gPSBpbnB1dFtuZXh0ICsgY29weSsrXTtcbiAgICAgICAgICAvKiB1c2UgY29uc3RhbnQgbGltaXQgYmVjYXVzZSBpbiBqcyB3ZSBzaG91bGQgbm90IHByZWFsbG9jYXRlIG1lbW9yeSAqL1xuICAgICAgICAgIGlmIChzdGF0ZS5oZWFkICYmIGxlbiAmJlxuICAgICAgICAgICAgICAoc3RhdGUubGVuZ3RoIDwgNjU1MzYgLypzdGF0ZS5oZWFkLmNvbW1fbWF4Ki8pKSB7XG4gICAgICAgICAgICBzdGF0ZS5oZWFkLmNvbW1lbnQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAobGVuICYmIGNvcHkgPCBoYXZlKTtcbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpO1xuICAgICAgICB9XG4gICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICBpZiAobGVuKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmNvbW1lbnQgPSBudWxsO1xuICAgICAgfVxuICAgICAgc3RhdGUubW9kZSA9IEhDUkM7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBIQ1JDOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLmNoZWNrICYgMHhmZmZmKSkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2hlYWRlciBjcmMgbWlzbWF0Y2gnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmhjcmMgPSAoKHN0YXRlLmZsYWdzID4+IDkpICYgMSk7XG4gICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAwO1xuICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIERJQ1RJRDpcbiAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IHpzd2FwMzIoaG9sZCk7XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBESUNUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRElDVDpcbiAgICAgIGlmIChzdGF0ZS5oYXZlZGljdCA9PT0gMCkge1xuICAgICAgICAvLy0tLSBSRVNUT1JFKCkgLS0tXG4gICAgICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7XG4gICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDtcbiAgICAgICAgc3RybS5uZXh0X2luID0gbmV4dDtcbiAgICAgICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7XG4gICAgICAgIHN0YXRlLmhvbGQgPSBob2xkO1xuICAgICAgICBzdGF0ZS5iaXRzID0gYml0cztcbiAgICAgICAgLy8tLS1cbiAgICAgICAgcmV0dXJuIFpfTkVFRF9ESUNUO1xuICAgICAgfVxuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMS8qYWRsZXIzMigwTCwgWl9OVUxMLCAwKSovO1xuICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBUWVBFOlxuICAgICAgaWYgKGZsdXNoID09PSBaX0JMT0NLIHx8IGZsdXNoID09PSBaX1RSRUVTKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgVFlQRURPOlxuICAgICAgaWYgKHN0YXRlLmxhc3QpIHtcbiAgICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gYml0cyAmIDc7XG4gICAgICAgIGJpdHMgLT0gYml0cyAmIDc7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUubW9kZSA9IENIRUNLO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vPT09IE5FRURCSVRTKDMpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5sYXN0ID0gKGhvbGQgJiAweDAxKS8qQklUUygxKSovO1xuICAgICAgLy8tLS0gRFJPUEJJVFMoMSkgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSAxO1xuICAgICAgYml0cyAtPSAxO1xuICAgICAgLy8tLS0vL1xuXG4gICAgICBzd2l0Y2ggKChob2xkICYgMHgwMykvKkJJVFMoMikqLykge1xuICAgICAgY2FzZSAwOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogc3RvcmVkIGJsb2NrICovXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIHN0b3JlZCBibG9jayVzXFxuXCIsXG4gICAgICAgIC8vICAgICAgICBzdGF0ZS5sYXN0ID8gXCIgKGxhc3QpXCIgOiBcIlwiKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBTVE9SRUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAxOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogZml4ZWQgYmxvY2sgKi9cbiAgICAgICAgZml4ZWR0YWJsZXMoc3RhdGUpO1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBmaXhlZCBjb2RlcyBibG9jayVzXFxuXCIsXG4gICAgICAgIC8vICAgICAgICBzdGF0ZS5sYXN0ID8gXCIgKGxhc3QpXCIgOiBcIlwiKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBMRU5fOyAgICAgICAgICAgICAvKiBkZWNvZGUgY29kZXMgKi9cbiAgICAgICAgaWYgKGZsdXNoID09PSBaX1RSRUVTKSB7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy9cbiAgICAgICAgICBob2xkID4+Pj0gMjtcbiAgICAgICAgICBiaXRzIC09IDI7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMjogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGR5bmFtaWMgYmxvY2sgKi9cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgZHluYW1pYyBjb2RlcyBibG9jayVzXFxuXCIsXG4gICAgICAgIC8vICAgICAgICBzdGF0ZS5sYXN0ID8gXCIgKGxhc3QpXCIgOiBcIlwiKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUQUJMRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM6XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYmxvY2sgdHlwZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDI7XG4gICAgICBiaXRzIC09IDI7XG4gICAgICAvLy0tLS8vXG4gICAgICBicmVhaztcbiAgICBjYXNlIFNUT1JFRDpcbiAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy8gLyogZ28gdG8gYnl0ZSBib3VuZGFyeSAqL1xuICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3O1xuICAgICAgYml0cyAtPSBiaXRzICYgNztcbiAgICAgIC8vLS0tLy9cbiAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGhhdmUtLTtcbiAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgIGJpdHMgKz0gODtcbiAgICAgIH1cbiAgICAgIC8vPT09Ly9cbiAgICAgIGlmICgoaG9sZCAmIDB4ZmZmZikgIT09ICgoaG9sZCA+Pj4gMTYpIF4gMHhmZmZmKSkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIHN0b3JlZCBibG9jayBsZW5ndGhzJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5sZW5ndGggPSBob2xkICYgMHhmZmZmO1xuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBzdG9yZWQgbGVuZ3RoICV1XFxuXCIsXG4gICAgICAvLyAgICAgICAgc3RhdGUubGVuZ3RoKSk7XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBDT1BZXztcbiAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPUFlfOlxuICAgICAgc3RhdGUubW9kZSA9IENPUFk7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT1BZOlxuICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIGlmIChjb3B5KSB7XG4gICAgICAgIGlmIChjb3B5ID4gaGF2ZSkgeyBjb3B5ID0gaGF2ZTsgfVxuICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH1cbiAgICAgICAgaWYgKGNvcHkgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIC8vLS0tIHptZW1jcHkocHV0LCBuZXh0LCBjb3B5KTsgLS0tXG4gICAgICAgIHV0aWxzLmFycmF5U2V0KG91dHB1dCwgaW5wdXQsIG5leHQsIGNvcHksIHB1dCk7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgaGF2ZSAtPSBjb3B5O1xuICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgIGxlZnQgLT0gY29weTtcbiAgICAgICAgcHV0ICs9IGNvcHk7XG4gICAgICAgIHN0YXRlLmxlbmd0aCAtPSBjb3B5O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgc3RvcmVkIGVuZFxcblwiKSk7XG4gICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgVEFCTEU6XG4gICAgICAvLz09PSBORUVEQklUUygxNCk7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDE0KSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5ubGVuID0gKGhvbGQgJiAweDFmKS8qQklUUyg1KSovICsgMjU3O1xuICAgICAgLy8tLS0gRFJPUEJJVFMoNSkgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSA1O1xuICAgICAgYml0cyAtPSA1O1xuICAgICAgLy8tLS0vL1xuICAgICAgc3RhdGUubmRpc3QgPSAoaG9sZCAmIDB4MWYpLypCSVRTKDUpKi8gKyAxO1xuICAgICAgLy8tLS0gRFJPUEJJVFMoNSkgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSA1O1xuICAgICAgYml0cyAtPSA1O1xuICAgICAgLy8tLS0vL1xuICAgICAgc3RhdGUubmNvZGUgPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA0O1xuICAgICAgLy8tLS0gRFJPUEJJVFMoNCkgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSA0O1xuICAgICAgYml0cyAtPSA0O1xuICAgICAgLy8tLS0vL1xuLy8jaWZuZGVmIFBLWklQX0JVR19XT1JLQVJPVU5EXG4gICAgICBpZiAoc3RhdGUubmxlbiA+IDI4NiB8fCBzdGF0ZS5uZGlzdCA+IDMwKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3RvbyBtYW55IGxlbmd0aCBvciBkaXN0YW5jZSBzeW1ib2xzJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4vLyNlbmRpZlxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICB0YWJsZSBzaXplcyBva1xcblwiKSk7XG4gICAgICBzdGF0ZS5oYXZlID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBMRU5MRU5TO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVOTEVOUzpcbiAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmNvZGUpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMyk7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgMykge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gKGhvbGQgJiAweDA3KTsvL0JJVFMoMyk7XG4gICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSAzO1xuICAgICAgICBiaXRzIC09IDM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgIH1cbiAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgMTkpIHtcbiAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IDA7XG4gICAgICB9XG4gICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLlxuICAgICAgLy9zdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7XG4gICAgICAvL3N0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0O1xuICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlXG4gICAgICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluO1xuICAgICAgc3RhdGUubGVuYml0cyA9IDc7XG5cbiAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmxlbmJpdHMgfTtcbiAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoQ09ERVMsIHN0YXRlLmxlbnMsIDAsIDE5LCBzdGF0ZS5sZW5jb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgIHN0YXRlLmxlbmJpdHMgPSBvcHRzLmJpdHM7XG5cbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBjb2RlIGxlbmd0aHMgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIGNvZGUgbGVuZ3RocyBva1xcblwiKSk7XG4gICAgICBzdGF0ZS5oYXZlID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBDT0RFTEVOUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPREVMRU5TOlxuICAgICAgd2hpbGUgKHN0YXRlLmhhdmUgPCBzdGF0ZS5ubGVuICsgc3RhdGUubmRpc3QpIHtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUubGVuYml0cykgLSAxKV07LypCSVRTKHN0YXRlLmxlbmJpdHMpKi9cbiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlcmVfdmFsIDwgMTYpIHtcbiAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gaGVyZV92YWw7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKGhlcmVfdmFsID09PSAxNikge1xuICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgMik7XG4gICAgICAgICAgICBuID0gaGVyZV9iaXRzICsgMjtcbiAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgaWYgKHN0YXRlLmhhdmUgPT09IDApIHtcbiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGVuID0gc3RhdGUubGVuc1tzdGF0ZS5oYXZlIC0gMV07XG4gICAgICAgICAgICBjb3B5ID0gMyArIChob2xkICYgMHgwMyk7Ly9CSVRTKDIpO1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIGlmIChoZXJlX3ZhbCA9PT0gMTcpIHtcbiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDMpO1xuICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDM7XG4gICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICBjb3B5ID0gMyArIChob2xkICYgMHgwNyk7Ly9CSVRTKDMpO1xuICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSAzO1xuICAgICAgICAgICAgYml0cyAtPSAzO1xuICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDcpO1xuICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDc7XG4gICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICBjb3B5ID0gMTEgKyAoaG9sZCAmIDB4N2YpOy8vQklUUyg3KTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDcpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gNztcbiAgICAgICAgICAgIGJpdHMgLT0gNztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXRlLmhhdmUgKyBjb3B5ID4gc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7XG4gICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJpdCBsZW5ndGggcmVwZWF0JztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgd2hpbGUgKGNvcHktLSkge1xuICAgICAgICAgICAgc3RhdGUubGVuc1tzdGF0ZS5oYXZlKytdID0gbGVuO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKiBoYW5kbGUgZXJyb3IgYnJlYWtzIGluIHdoaWxlICovXG4gICAgICBpZiAoc3RhdGUubW9kZSA9PT0gQkFEKSB7IGJyZWFrOyB9XG5cbiAgICAgIC8qIGNoZWNrIGZvciBlbmQtb2YtYmxvY2sgY29kZSAoYmV0dGVyIGhhdmUgb25lKSAqL1xuICAgICAgaWYgKHN0YXRlLmxlbnNbMjU2XSA9PT0gMCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgLS0gbWlzc2luZyBlbmQtb2YtYmxvY2snO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgLyogYnVpbGQgY29kZSB0YWJsZXMgLS0gbm90ZTogZG8gbm90IGNoYW5nZSB0aGUgbGVuYml0cyBvciBkaXN0Yml0c1xuICAgICAgICAgdmFsdWVzIGhlcmUgKDkgYW5kIDYpIHdpdGhvdXQgcmVhZGluZyB0aGUgY29tbWVudHMgaW4gaW5mdHJlZXMuaFxuICAgICAgICAgY29uY2VybmluZyB0aGUgRU5PVUdIIGNvbnN0YW50cywgd2hpY2ggZGVwZW5kIG9uIHRob3NlIHZhbHVlcyAqL1xuICAgICAgc3RhdGUubGVuYml0cyA9IDk7XG5cbiAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmxlbmJpdHMgfTtcbiAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoTEVOUywgc3RhdGUubGVucywgMCwgc3RhdGUubmxlbiwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLlxuICAgICAgLy8gc3RhdGUubmV4dF9pbmRleCA9IG9wdHMudGFibGVfaW5kZXg7XG4gICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzO1xuICAgICAgLy8gc3RhdGUubGVuY29kZSA9IHN0YXRlLm5leHQ7XG5cbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLmRpc3RiaXRzID0gNjtcbiAgICAgIC8vc3RhdGUuZGlzdGNvZGUuY29weShzdGF0ZS5jb2Rlcyk7XG4gICAgICAvLyBTd2l0Y2ggdG8gdXNlIGR5bmFtaWMgdGFibGVcbiAgICAgIHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUuZGlzdGR5bjtcbiAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmRpc3RiaXRzIH07XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKERJU1RTLCBzdGF0ZS5sZW5zLCBzdGF0ZS5ubGVuLCBzdGF0ZS5uZGlzdCwgc3RhdGUuZGlzdGNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4O1xuICAgICAgc3RhdGUuZGlzdGJpdHMgPSBvcHRzLmJpdHM7XG4gICAgICAvLyBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLm5leHQ7XG5cbiAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZXMgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCAnaW5mbGF0ZTogICAgICAgY29kZXMgb2tcXG4nKSk7XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOXztcbiAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTl86XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVOOlxuICAgICAgaWYgKGhhdmUgPj0gNiAmJiBsZWZ0ID49IDI1OCkge1xuICAgICAgICAvLy0tLSBSRVNUT1JFKCkgLS0tXG4gICAgICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7XG4gICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDtcbiAgICAgICAgc3RybS5uZXh0X2luID0gbmV4dDtcbiAgICAgICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7XG4gICAgICAgIHN0YXRlLmhvbGQgPSBob2xkO1xuICAgICAgICBzdGF0ZS5iaXRzID0gYml0cztcbiAgICAgICAgLy8tLS1cbiAgICAgICAgaW5mbGF0ZV9mYXN0KHN0cm0sIF9vdXQpO1xuICAgICAgICAvLy0tLSBMT0FEKCkgLS0tXG4gICAgICAgIHB1dCA9IHN0cm0ubmV4dF9vdXQ7XG4gICAgICAgIG91dHB1dCA9IHN0cm0ub3V0cHV0O1xuICAgICAgICBsZWZ0ID0gc3RybS5hdmFpbF9vdXQ7XG4gICAgICAgIG5leHQgPSBzdHJtLm5leHRfaW47XG4gICAgICAgIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgICAgICAgaGF2ZSA9IHN0cm0uYXZhaWxfaW47XG4gICAgICAgIGhvbGQgPSBzdGF0ZS5ob2xkO1xuICAgICAgICBiaXRzID0gc3RhdGUuYml0cztcbiAgICAgICAgLy8tLS1cblxuICAgICAgICBpZiAoc3RhdGUubW9kZSA9PT0gVFlQRSkge1xuICAgICAgICAgIHN0YXRlLmJhY2sgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmJhY2sgPSAwO1xuICAgICAgZm9yICg7Oykge1xuICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMSldOyAgLypCSVRTKHN0YXRlLmxlbmJpdHMpKi9cbiAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgIGlmIChoZXJlX2JpdHMgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgIH1cbiAgICAgIGlmIChoZXJlX29wICYmIChoZXJlX29wICYgMHhmMCkgPT09IDApIHtcbiAgICAgICAgbGFzdF9iaXRzID0gaGVyZV9iaXRzO1xuICAgICAgICBsYXN0X29wID0gaGVyZV9vcDtcbiAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgobGFzdF9iaXRzICsgaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGxhc3QuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGxhc3RfYml0cztcbiAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBsYXN0X2JpdHM7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5iYWNrICs9IGhlcmVfYml0cztcbiAgICAgIHN0YXRlLmxlbmd0aCA9IGhlcmVfdmFsO1xuICAgICAgaWYgKGhlcmVfb3AgPT09IDApIHtcbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIGhlcmUudmFsID49IDB4MjAgJiYgaGVyZS52YWwgPCAweDdmID9cbiAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsICclYydcXG5cIiA6XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcXG5cIiwgaGVyZS52YWwpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExJVDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmIDMyKSB7XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZW5kIG9mIGJsb2NrXFxuXCIpKTtcbiAgICAgICAgc3RhdGUuYmFjayA9IC0xO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmIDY0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGggY29kZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZXh0cmEgPSBoZXJlX29wICYgMTU7XG4gICAgICBzdGF0ZS5tb2RlID0gTEVORVhUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVORVhUOlxuICAgICAgaWYgKHN0YXRlLmV4dHJhKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTtcbiAgICAgICAgbiA9IHN0YXRlLmV4dHJhO1xuICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubGVuZ3RoICs9IGhvbGQgJiAoKDEgPDwgc3RhdGUuZXh0cmEpIC0gMSkvKkJJVFMoc3RhdGUuZXh0cmEpKi87XG4gICAgICAgIC8vLS0tIERST1BCSVRTKHN0YXRlLmV4dHJhKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gc3RhdGUuZXh0cmE7XG4gICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBzdGF0ZS5leHRyYTtcbiAgICAgIH1cbiAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgbGVuZ3RoICV1XFxuXCIsIHN0YXRlLmxlbmd0aCkpO1xuICAgICAgc3RhdGUud2FzID0gc3RhdGUubGVuZ3RoO1xuICAgICAgc3RhdGUubW9kZSA9IERJU1Q7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBESVNUOlxuICAgICAgZm9yICg7Oykge1xuICAgICAgICBoZXJlID0gc3RhdGUuZGlzdGNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxKV07LypCSVRTKHN0YXRlLmRpc3RiaXRzKSovXG4gICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICBpZiAoKGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgIH1cbiAgICAgIGlmICgoaGVyZV9vcCAmIDB4ZjApID09PSAwKSB7XG4gICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0cztcbiAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7XG4gICAgICAgIGxhc3RfdmFsID0gaGVyZV92YWw7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUuZGlzdGNvZGVbbGFzdF92YWwgK1xuICAgICAgICAgICAgICAgICAgKChob2xkICYgKCgxIDw8IChsYXN0X2JpdHMgKyBsYXN0X29wKSkgLSAxKSkvKkJJVFMobGFzdC5iaXRzICsgbGFzdC5vcCkqLyA+PiBsYXN0X2JpdHMpXTtcbiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgICAvLy0tLSBQVUxMQllURSgpIC0tLS8vXG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgIH1cbiAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzO1xuICAgICAgICBiaXRzIC09IGxhc3RfYml0cztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0cztcbiAgICAgIH1cbiAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzO1xuICAgICAgaWYgKGhlcmVfb3AgJiA2NCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLm9mZnNldCA9IGhlcmVfdmFsO1xuICAgICAgc3RhdGUuZXh0cmEgPSAoaGVyZV9vcCkgJiAxNTtcbiAgICAgIHN0YXRlLm1vZGUgPSBESVNURVhUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRElTVEVYVDpcbiAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7XG4gICAgICAgIG4gPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLm9mZnNldCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpLypCSVRTKHN0YXRlLmV4dHJhKSovO1xuICAgICAgICAvLy0tLSBEUk9QQklUUyhzdGF0ZS5leHRyYSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhO1xuICAgICAgICBiaXRzIC09IHN0YXRlLmV4dHJhO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7XG4gICAgICB9XG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IHN0YXRlLmRtYXgpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGRpc3RhbmNlICV1XFxuXCIsIHN0YXRlLm9mZnNldCkpO1xuICAgICAgc3RhdGUubW9kZSA9IE1BVENIO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTUFUQ0g6XG4gICAgICBpZiAobGVmdCA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIGNvcHkgPSBfb3V0IC0gbGVmdDtcbiAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBjb3B5KSB7ICAgICAgICAgLyogY29weSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICBjb3B5ID0gc3RhdGUub2Zmc2V0IC0gY29weTtcbiAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS53aGF2ZSkge1xuICAgICAgICAgIGlmIChzdGF0ZS5zYW5lKSB7XG4gICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuLy8gKCEpIFRoaXMgYmxvY2sgaXMgZGlzYWJsZWQgaW4gemxpYiBkZWZhaWx0cyxcbi8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHlcbi8vI2lmZGVmIElORkxBVEVfQUxMT1dfSU5WQUxJRF9ESVNUQU5DRV9UT09GQVJfQVJSUlxuLy8gICAgICAgICAgVHJhY2UoKHN0ZGVyciwgXCJpbmZsYXRlLmMgdG9vIGZhclxcblwiKSk7XG4vLyAgICAgICAgICBjb3B5IC09IHN0YXRlLndoYXZlO1xuLy8gICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS5sZW5ndGgpIHsgY29weSA9IHN0YXRlLmxlbmd0aDsgfVxuLy8gICAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9XG4vLyAgICAgICAgICBsZWZ0IC09IGNvcHk7XG4vLyAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbi8vICAgICAgICAgIGRvIHtcbi8vICAgICAgICAgICAgb3V0cHV0W3B1dCsrXSA9IDA7XG4vLyAgICAgICAgICB9IHdoaWxlICgtLWNvcHkpO1xuLy8gICAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgeyBzdGF0ZS5tb2RlID0gTEVOOyB9XG4vLyAgICAgICAgICBicmVhaztcbi8vI2VuZGlmXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS53bmV4dCkge1xuICAgICAgICAgIGNvcHkgLT0gc3RhdGUud25leHQ7XG4gICAgICAgICAgZnJvbSA9IHN0YXRlLndzaXplIC0gY29weTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBmcm9tID0gc3RhdGUud25leHQgLSBjb3B5O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb3B5ID4gc3RhdGUubGVuZ3RoKSB7IGNvcHkgPSBzdGF0ZS5sZW5ndGg7IH1cbiAgICAgICAgZnJvbV9zb3VyY2UgPSBzdGF0ZS53aW5kb3c7XG4gICAgICB9XG4gICAgICBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBjb3B5IGZyb20gb3V0cHV0ICovXG4gICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICBmcm9tID0gcHV0IC0gc3RhdGUub2Zmc2V0O1xuICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgfVxuICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9XG4gICAgICBsZWZ0IC09IGNvcHk7XG4gICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgIGRvIHtcbiAgICAgICAgb3V0cHV0W3B1dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICB9IHdoaWxlICgtLWNvcHkpO1xuICAgICAgaWYgKHN0YXRlLmxlbmd0aCA9PT0gMCkgeyBzdGF0ZS5tb2RlID0gTEVOOyB9XG4gICAgICBicmVhaztcbiAgICBjYXNlIExJVDpcbiAgICAgIGlmIChsZWZ0ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgb3V0cHV0W3B1dCsrXSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIGxlZnQtLTtcbiAgICAgIHN0YXRlLm1vZGUgPSBMRU47XG4gICAgICBicmVhaztcbiAgICBjYXNlIENIRUNLOlxuICAgICAgaWYgKHN0YXRlLndyYXApIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIC8vIFVzZSAnfCcgaW5zZGVhZCBvZiAnKycgdG8gbWFrZSBzdXJlIHRoYXQgcmVzdWx0IGlzIHNpZ25lZFxuICAgICAgICAgIGhvbGQgfD0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIF9vdXQgLT0gbGVmdDtcbiAgICAgICAgc3RybS50b3RhbF9vdXQgKz0gX291dDtcbiAgICAgICAgc3RhdGUudG90YWwgKz0gX291dDtcbiAgICAgICAgaWYgKF9vdXQpIHtcbiAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPVxuICAgICAgICAgICAgICAvKlVQREFURShzdGF0ZS5jaGVjaywgcHV0IC0gX291dCwgX291dCk7Ki9cbiAgICAgICAgICAgICAgKHN0YXRlLmZsYWdzID8gY3JjMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgcHV0IC0gX291dCkgOiBhZGxlcjMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpKTtcblxuICAgICAgICB9XG4gICAgICAgIF9vdXQgPSBsZWZ0O1xuICAgICAgICAvLyBOQjogY3JjMzIgc3RvcmVkIGFzIHNpZ25lZCAzMi1iaXQgaW50LCB6c3dhcDMyIHJldHVybnMgc2lnbmVkIHRvb1xuICAgICAgICBpZiAoKHN0YXRlLmZsYWdzID8gaG9sZCA6IHpzd2FwMzIoaG9sZCkpICE9PSBzdGF0ZS5jaGVjaykge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2luY29ycmVjdCBkYXRhIGNoZWNrJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgY2hlY2sgbWF0Y2hlcyB0cmFpbGVyXFxuXCIpKTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBMRU5HVEg7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU5HVEg6XG4gICAgICBpZiAoc3RhdGUud3JhcCAmJiBzdGF0ZS5mbGFncykge1xuICAgICAgICAvLz09PSBORUVEQklUUygzMik7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS50b3RhbCAmIDB4ZmZmZmZmZmYpKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGxlbmd0aCBjaGVjayc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIGxlbmd0aCBtYXRjaGVzIHRyYWlsZXJcXG5cIikpO1xuICAgICAgfVxuICAgICAgc3RhdGUubW9kZSA9IERPTkU7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBET05FOlxuICAgICAgcmV0ID0gWl9TVFJFQU1fRU5EO1xuICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgIGNhc2UgQkFEOlxuICAgICAgcmV0ID0gWl9EQVRBX0VSUk9SO1xuICAgICAgYnJlYWsgaW5mX2xlYXZlO1xuICAgIGNhc2UgTUVNOlxuICAgICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAgIGNhc2UgU1lOQzpcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICAgIH1cbiAgfVxuXG4gIC8vIGluZl9sZWF2ZSA8LSBoZXJlIGlzIHJlYWwgcGxhY2UgZm9yIFwiZ290byBpbmZfbGVhdmVcIiwgZW11bGF0ZWQgdmlhIFwiYnJlYWsgaW5mX2xlYXZlXCJcblxuICAvKlxuICAgICBSZXR1cm4gZnJvbSBpbmZsYXRlKCksIHVwZGF0aW5nIHRoZSB0b3RhbCBjb3VudHMgYW5kIHRoZSBjaGVjayB2YWx1ZS5cbiAgICAgSWYgdGhlcmUgd2FzIG5vIHByb2dyZXNzIGR1cmluZyB0aGUgaW5mbGF0ZSgpIGNhbGwsIHJldHVybiBhIGJ1ZmZlclxuICAgICBlcnJvci4gIENhbGwgdXBkYXRld2luZG93KCkgdG8gY3JlYXRlIGFuZC9vciB1cGRhdGUgdGhlIHdpbmRvdyBzdGF0ZS5cbiAgICAgTm90ZTogYSBtZW1vcnkgZXJyb3IgZnJvbSBpbmZsYXRlKCkgaXMgbm9uLXJlY292ZXJhYmxlLlxuICAgKi9cblxuICAvLy0tLSBSRVNUT1JFKCkgLS0tXG4gIHN0cm0ubmV4dF9vdXQgPSBwdXQ7XG4gIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDtcbiAgc3RybS5uZXh0X2luID0gbmV4dDtcbiAgc3RybS5hdmFpbF9pbiA9IGhhdmU7XG4gIHN0YXRlLmhvbGQgPSBob2xkO1xuICBzdGF0ZS5iaXRzID0gYml0cztcbiAgLy8tLS1cblxuICBpZiAoc3RhdGUud3NpemUgfHwgKF9vdXQgIT09IHN0cm0uYXZhaWxfb3V0ICYmIHN0YXRlLm1vZGUgPCBCQUQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA8IENIRUNLIHx8IGZsdXNoICE9PSBaX0ZJTklTSCkpKSB7XG4gICAgaWYgKHVwZGF0ZXdpbmRvdyhzdHJtLCBzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCwgX291dCAtIHN0cm0uYXZhaWxfb3V0KSkge1xuICAgICAgc3RhdGUubW9kZSA9IE1FTTtcbiAgICAgIHJldHVybiBaX01FTV9FUlJPUjtcbiAgICB9XG4gIH1cbiAgX2luIC09IHN0cm0uYXZhaWxfaW47XG4gIF9vdXQgLT0gc3RybS5hdmFpbF9vdXQ7XG4gIHN0cm0udG90YWxfaW4gKz0gX2luO1xuICBzdHJtLnRvdGFsX291dCArPSBfb3V0O1xuICBzdGF0ZS50b3RhbCArPSBfb3V0O1xuICBpZiAoc3RhdGUud3JhcCAmJiBfb3V0KSB7XG4gICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gLypVUERBVEUoc3RhdGUuY2hlY2ssIHN0cm0ubmV4dF9vdXQgLSBfb3V0LCBfb3V0KTsqL1xuICAgICAgKHN0YXRlLmZsYWdzID8gY3JjMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBzdHJtLm5leHRfb3V0IC0gX291dCkpO1xuICB9XG4gIHN0cm0uZGF0YV90eXBlID0gc3RhdGUuYml0cyArIChzdGF0ZS5sYXN0ID8gNjQgOiAwKSArXG4gICAgICAgICAgICAgICAgICAgIChzdGF0ZS5tb2RlID09PSBUWVBFID8gMTI4IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA9PT0gTEVOXyB8fCBzdGF0ZS5tb2RlID09PSBDT1BZXyA/IDI1NiA6IDApO1xuICBpZiAoKChfaW4gPT09IDAgJiYgX291dCA9PT0gMCkgfHwgZmx1c2ggPT09IFpfRklOSVNIKSAmJiByZXQgPT09IFpfT0spIHtcbiAgICByZXQgPSBaX0JVRl9FUlJPUjtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlRW5kKHN0cm0pIHtcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgLyp8fCBzdHJtLT56ZnJlZSA9PSAoZnJlZV9mdW5jKTAqLykge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIHZhciBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIGlmIChzdGF0ZS53aW5kb3cpIHtcbiAgICBzdGF0ZS53aW5kb3cgPSBudWxsO1xuICB9XG4gIHN0cm0uc3RhdGUgPSBudWxsO1xuICByZXR1cm4gWl9PSztcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUdldEhlYWRlcihzdHJtLCBoZWFkKSB7XG4gIHZhciBzdGF0ZTtcblxuICAvKiBjaGVjayBzdGF0ZSAqL1xuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgaWYgKChzdGF0ZS53cmFwICYgMikgPT09IDApIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG5cbiAgLyogc2F2ZSBoZWFkZXIgc3RydWN0dXJlICovXG4gIHN0YXRlLmhlYWQgPSBoZWFkO1xuICBoZWFkLmRvbmUgPSBmYWxzZTtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVTZXREaWN0aW9uYXJ5KHN0cm0sIGRpY3Rpb25hcnkpIHtcbiAgdmFyIGRpY3RMZW5ndGggPSBkaWN0aW9uYXJ5Lmxlbmd0aDtcblxuICB2YXIgc3RhdGU7XG4gIHZhciBkaWN0aWQ7XG4gIHZhciByZXQ7XG5cbiAgLyogY2hlY2sgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIC8qID09IFpfTlVMTCAqLyB8fCAhc3RybS5zdGF0ZSAvKiA9PSBaX05VTEwgKi8pIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICBpZiAoc3RhdGUud3JhcCAhPT0gMCAmJiBzdGF0ZS5tb2RlICE9PSBESUNUKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgLyogY2hlY2sgZm9yIGNvcnJlY3QgZGljdGlvbmFyeSBpZGVudGlmaWVyICovXG4gIGlmIChzdGF0ZS5tb2RlID09PSBESUNUKSB7XG4gICAgZGljdGlkID0gMTsgLyogYWRsZXIzMigwLCBudWxsLCAwKSovXG4gICAgLyogZGljdGlkID0gYWRsZXIzMihkaWN0aWQsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqL1xuICAgIGRpY3RpZCA9IGFkbGVyMzIoZGljdGlkLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCAwKTtcbiAgICBpZiAoZGljdGlkICE9PSBzdGF0ZS5jaGVjaykge1xuICAgICAgcmV0dXJuIFpfREFUQV9FUlJPUjtcbiAgICB9XG4gIH1cbiAgLyogY29weSBkaWN0aW9uYXJ5IHRvIHdpbmRvdyB1c2luZyB1cGRhdGV3aW5kb3coKSwgd2hpY2ggd2lsbCBhbWVuZCB0aGVcbiAgIGV4aXN0aW5nIGRpY3Rpb25hcnkgaWYgYXBwcm9wcmlhdGUgKi9cbiAgcmV0ID0gdXBkYXRld2luZG93KHN0cm0sIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIGRpY3RMZW5ndGgpO1xuICBpZiAocmV0KSB7XG4gICAgc3RhdGUubW9kZSA9IE1FTTtcbiAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gIH1cbiAgc3RhdGUuaGF2ZWRpY3QgPSAxO1xuICAvLyBUcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIGRpY3Rpb25hcnkgc2V0XFxuXCIpKTtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmV4cG9ydHMuaW5mbGF0ZVJlc2V0ID0gaW5mbGF0ZVJlc2V0O1xuZXhwb3J0cy5pbmZsYXRlUmVzZXQyID0gaW5mbGF0ZVJlc2V0MjtcbmV4cG9ydHMuaW5mbGF0ZVJlc2V0S2VlcCA9IGluZmxhdGVSZXNldEtlZXA7XG5leHBvcnRzLmluZmxhdGVJbml0ID0gaW5mbGF0ZUluaXQ7XG5leHBvcnRzLmluZmxhdGVJbml0MiA9IGluZmxhdGVJbml0MjtcbmV4cG9ydHMuaW5mbGF0ZSA9IGluZmxhdGU7XG5leHBvcnRzLmluZmxhdGVFbmQgPSBpbmZsYXRlRW5kO1xuZXhwb3J0cy5pbmZsYXRlR2V0SGVhZGVyID0gaW5mbGF0ZUdldEhlYWRlcjtcbmV4cG9ydHMuaW5mbGF0ZVNldERpY3Rpb25hcnkgPSBpbmZsYXRlU2V0RGljdGlvbmFyeTtcbmV4cG9ydHMuaW5mbGF0ZUluZm8gPSAncGFrbyBpbmZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSc7XG5cbi8qIE5vdCBpbXBsZW1lbnRlZFxuZXhwb3J0cy5pbmZsYXRlQ29weSA9IGluZmxhdGVDb3B5O1xuZXhwb3J0cy5pbmZsYXRlR2V0RGljdGlvbmFyeSA9IGluZmxhdGVHZXREaWN0aW9uYXJ5O1xuZXhwb3J0cy5pbmZsYXRlTWFyayA9IGluZmxhdGVNYXJrO1xuZXhwb3J0cy5pbmZsYXRlUHJpbWUgPSBpbmZsYXRlUHJpbWU7XG5leHBvcnRzLmluZmxhdGVTeW5jID0gaW5mbGF0ZVN5bmM7XG5leHBvcnRzLmluZmxhdGVTeW5jUG9pbnQgPSBpbmZsYXRlU3luY1BvaW50O1xuZXhwb3J0cy5pbmZsYXRlVW5kZXJtaW5lID0gaW5mbGF0ZVVuZGVybWluZTtcbiovXG4iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMvY29tbW9uJyk7XG5cbnZhciBNQVhCSVRTID0gMTU7XG52YXIgRU5PVUdIX0xFTlMgPSA4NTI7XG52YXIgRU5PVUdIX0RJU1RTID0gNTkyO1xuLy92YXIgRU5PVUdIID0gKEVOT1VHSF9MRU5TK0VOT1VHSF9ESVNUUyk7XG5cbnZhciBDT0RFUyA9IDA7XG52YXIgTEVOUyA9IDE7XG52YXIgRElTVFMgPSAyO1xuXG52YXIgbGJhc2UgPSBbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBiYXNlICovXG4gIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTMsIDE1LCAxNywgMTksIDIzLCAyNywgMzEsXG4gIDM1LCA0MywgNTEsIDU5LCA2NywgODMsIDk5LCAxMTUsIDEzMSwgMTYzLCAxOTUsIDIyNywgMjU4LCAwLCAwXG5dO1xuXG52YXIgbGV4dCA9IFsgLyogTGVuZ3RoIGNvZGVzIDI1Ny4uMjg1IGV4dHJhICovXG4gIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTcsIDE3LCAxNywgMTcsIDE4LCAxOCwgMTgsIDE4LFxuICAxOSwgMTksIDE5LCAxOSwgMjAsIDIwLCAyMCwgMjAsIDIxLCAyMSwgMjEsIDIxLCAxNiwgNzIsIDc4XG5dO1xuXG52YXIgZGJhc2UgPSBbIC8qIERpc3RhbmNlIGNvZGVzIDAuLjI5IGJhc2UgKi9cbiAgMSwgMiwgMywgNCwgNSwgNywgOSwgMTMsIDE3LCAyNSwgMzMsIDQ5LCA2NSwgOTcsIDEyOSwgMTkzLFxuICAyNTcsIDM4NSwgNTEzLCA3NjksIDEwMjUsIDE1MzcsIDIwNDksIDMwNzMsIDQwOTcsIDYxNDUsXG4gIDgxOTMsIDEyMjg5LCAxNjM4NSwgMjQ1NzcsIDAsIDBcbl07XG5cbnZhciBkZXh0ID0gWyAvKiBEaXN0YW5jZSBjb2RlcyAwLi4yOSBleHRyYSAqL1xuICAxNiwgMTYsIDE2LCAxNiwgMTcsIDE3LCAxOCwgMTgsIDE5LCAxOSwgMjAsIDIwLCAyMSwgMjEsIDIyLCAyMixcbiAgMjMsIDIzLCAyNCwgMjQsIDI1LCAyNSwgMjYsIDI2LCAyNywgMjcsXG4gIDI4LCAyOCwgMjksIDI5LCA2NCwgNjRcbl07XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5mbGF0ZV90YWJsZSh0eXBlLCBsZW5zLCBsZW5zX2luZGV4LCBjb2RlcywgdGFibGUsIHRhYmxlX2luZGV4LCB3b3JrLCBvcHRzKVxue1xuICB2YXIgYml0cyA9IG9wdHMuYml0cztcbiAgICAgIC8vaGVyZSA9IG9wdHMuaGVyZTsgLyogdGFibGUgZW50cnkgZm9yIGR1cGxpY2F0aW9uICovXG5cbiAgdmFyIGxlbiA9IDA7ICAgICAgICAgICAgICAgLyogYSBjb2RlJ3MgbGVuZ3RoIGluIGJpdHMgKi9cbiAgdmFyIHN5bSA9IDA7ICAgICAgICAgICAgICAgLyogaW5kZXggb2YgY29kZSBzeW1ib2xzICovXG4gIHZhciBtaW4gPSAwLCBtYXggPSAwOyAgICAgICAgICAvKiBtaW5pbXVtIGFuZCBtYXhpbXVtIGNvZGUgbGVuZ3RocyAqL1xuICB2YXIgcm9vdCA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgaW5kZXggYml0cyBmb3Igcm9vdCB0YWJsZSAqL1xuICB2YXIgY3VyciA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgaW5kZXggYml0cyBmb3IgY3VycmVudCB0YWJsZSAqL1xuICB2YXIgZHJvcCA9IDA7ICAgICAgICAgICAgICAvKiBjb2RlIGJpdHMgdG8gZHJvcCBmb3Igc3ViLXRhYmxlICovXG4gIHZhciBsZWZ0ID0gMDsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHByZWZpeCBjb2RlcyBhdmFpbGFibGUgKi9cbiAgdmFyIHVzZWQgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBlbnRyaWVzIGluIHRhYmxlIHVzZWQgKi9cbiAgdmFyIGh1ZmYgPSAwOyAgICAgICAgICAgICAgLyogSHVmZm1hbiBjb2RlICovXG4gIHZhciBpbmNyOyAgICAgICAgICAgICAgLyogZm9yIGluY3JlbWVudGluZyBjb2RlLCBpbmRleCAqL1xuICB2YXIgZmlsbDsgICAgICAgICAgICAgIC8qIGluZGV4IGZvciByZXBsaWNhdGluZyBlbnRyaWVzICovXG4gIHZhciBsb3c7ICAgICAgICAgICAgICAgLyogbG93IGJpdHMgZm9yIGN1cnJlbnQgcm9vdCBlbnRyeSAqL1xuICB2YXIgbWFzazsgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGxvdyByb290IGJpdHMgKi9cbiAgdmFyIG5leHQ7ICAgICAgICAgICAgIC8qIG5leHQgYXZhaWxhYmxlIHNwYWNlIGluIHRhYmxlICovXG4gIHZhciBiYXNlID0gbnVsbDsgICAgIC8qIGJhc2UgdmFsdWUgdGFibGUgdG8gdXNlICovXG4gIHZhciBiYXNlX2luZGV4ID0gMDtcbi8vICB2YXIgc2hvZXh0cmE7ICAgIC8qIGV4dHJhIGJpdHMgdGFibGUgdG8gdXNlICovXG4gIHZhciBlbmQ7ICAgICAgICAgICAgICAgICAgICAvKiB1c2UgYmFzZSBhbmQgZXh0cmEgZm9yIHN5bWJvbCA+IGVuZCAqL1xuICB2YXIgY291bnQgPSBuZXcgdXRpbHMuQnVmMTYoTUFYQklUUyArIDEpOyAvL1tNQVhCSVRTKzFdOyAgICAvKiBudW1iZXIgb2YgY29kZXMgb2YgZWFjaCBsZW5ndGggKi9cbiAgdmFyIG9mZnMgPSBuZXcgdXRpbHMuQnVmMTYoTUFYQklUUyArIDEpOyAvL1tNQVhCSVRTKzFdOyAgICAgLyogb2Zmc2V0cyBpbiB0YWJsZSBmb3IgZWFjaCBsZW5ndGggKi9cbiAgdmFyIGV4dHJhID0gbnVsbDtcbiAgdmFyIGV4dHJhX2luZGV4ID0gMDtcblxuICB2YXIgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDtcblxuICAvKlxuICAgUHJvY2VzcyBhIHNldCBvZiBjb2RlIGxlbmd0aHMgdG8gY3JlYXRlIGEgY2Fub25pY2FsIEh1ZmZtYW4gY29kZS4gIFRoZVxuICAgY29kZSBsZW5ndGhzIGFyZSBsZW5zWzAuLmNvZGVzLTFdLiAgRWFjaCBsZW5ndGggY29ycmVzcG9uZHMgdG8gdGhlXG4gICBzeW1ib2xzIDAuLmNvZGVzLTEuICBUaGUgSHVmZm1hbiBjb2RlIGlzIGdlbmVyYXRlZCBieSBmaXJzdCBzb3J0aW5nIHRoZVxuICAgc3ltYm9scyBieSBsZW5ndGggZnJvbSBzaG9ydCB0byBsb25nLCBhbmQgcmV0YWluaW5nIHRoZSBzeW1ib2wgb3JkZXJcbiAgIGZvciBjb2RlcyB3aXRoIGVxdWFsIGxlbmd0aHMuICBUaGVuIHRoZSBjb2RlIHN0YXJ0cyB3aXRoIGFsbCB6ZXJvIGJpdHNcbiAgIGZvciB0aGUgZmlyc3QgY29kZSBvZiB0aGUgc2hvcnRlc3QgbGVuZ3RoLCBhbmQgdGhlIGNvZGVzIGFyZSBpbnRlZ2VyXG4gICBpbmNyZW1lbnRzIGZvciB0aGUgc2FtZSBsZW5ndGgsIGFuZCB6ZXJvcyBhcmUgYXBwZW5kZWQgYXMgdGhlIGxlbmd0aFxuICAgaW5jcmVhc2VzLiAgRm9yIHRoZSBkZWZsYXRlIGZvcm1hdCwgdGhlc2UgYml0cyBhcmUgc3RvcmVkIGJhY2t3YXJkc1xuICAgZnJvbSB0aGVpciBtb3JlIG5hdHVyYWwgaW50ZWdlciBpbmNyZW1lbnQgb3JkZXJpbmcsIGFuZCBzbyB3aGVuIHRoZVxuICAgZGVjb2RpbmcgdGFibGVzIGFyZSBidWlsdCBpbiB0aGUgbGFyZ2UgbG9vcCBiZWxvdywgdGhlIGludGVnZXIgY29kZXNcbiAgIGFyZSBpbmNyZW1lbnRlZCBiYWNrd2FyZHMuXG5cbiAgIFRoaXMgcm91dGluZSBhc3N1bWVzLCBidXQgZG9lcyBub3QgY2hlY2ssIHRoYXQgYWxsIG9mIHRoZSBlbnRyaWVzIGluXG4gICBsZW5zW10gYXJlIGluIHRoZSByYW5nZSAwLi5NQVhCSVRTLiAgVGhlIGNhbGxlciBtdXN0IGFzc3VyZSB0aGlzLlxuICAgMS4uTUFYQklUUyBpcyBpbnRlcnByZXRlZCBhcyB0aGF0IGNvZGUgbGVuZ3RoLiAgemVybyBtZWFucyB0aGF0IHRoYXRcbiAgIHN5bWJvbCBkb2VzIG5vdCBvY2N1ciBpbiB0aGlzIGNvZGUuXG5cbiAgIFRoZSBjb2RlcyBhcmUgc29ydGVkIGJ5IGNvbXB1dGluZyBhIGNvdW50IG9mIGNvZGVzIGZvciBlYWNoIGxlbmd0aCxcbiAgIGNyZWF0aW5nIGZyb20gdGhhdCBhIHRhYmxlIG9mIHN0YXJ0aW5nIGluZGljZXMgZm9yIGVhY2ggbGVuZ3RoIGluIHRoZVxuICAgc29ydGVkIHRhYmxlLCBhbmQgdGhlbiBlbnRlcmluZyB0aGUgc3ltYm9scyBpbiBvcmRlciBpbiB0aGUgc29ydGVkXG4gICB0YWJsZS4gIFRoZSBzb3J0ZWQgdGFibGUgaXMgd29ya1tdLCB3aXRoIHRoYXQgc3BhY2UgYmVpbmcgcHJvdmlkZWQgYnlcbiAgIHRoZSBjYWxsZXIuXG5cbiAgIFRoZSBsZW5ndGggY291bnRzIGFyZSB1c2VkIGZvciBvdGhlciBwdXJwb3NlcyBhcyB3ZWxsLCBpLmUuIGZpbmRpbmdcbiAgIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGxlbmd0aCBjb2RlcywgZGV0ZXJtaW5pbmcgaWYgdGhlcmUgYXJlIGFueVxuICAgY29kZXMgYXQgYWxsLCBjaGVja2luZyBmb3IgYSB2YWxpZCBzZXQgb2YgbGVuZ3RocywgYW5kIGxvb2tpbmcgYWhlYWRcbiAgIGF0IGxlbmd0aCBjb3VudHMgdG8gZGV0ZXJtaW5lIHN1Yi10YWJsZSBzaXplcyB3aGVuIGJ1aWxkaW5nIHRoZVxuICAgZGVjb2RpbmcgdGFibGVzLlxuICAgKi9cblxuICAvKiBhY2N1bXVsYXRlIGxlbmd0aHMgZm9yIGNvZGVzIChhc3N1bWVzIGxlbnNbXSBhbGwgaW4gMC4uTUFYQklUUykgKi9cbiAgZm9yIChsZW4gPSAwOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHtcbiAgICBjb3VudFtsZW5dID0gMDtcbiAgfVxuICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykge1xuICAgIGNvdW50W2xlbnNbbGVuc19pbmRleCArIHN5bV1dKys7XG4gIH1cblxuICAvKiBib3VuZCBjb2RlIGxlbmd0aHMsIGZvcmNlIHJvb3QgdG8gYmUgd2l0aGluIGNvZGUgbGVuZ3RocyAqL1xuICByb290ID0gYml0cztcbiAgZm9yIChtYXggPSBNQVhCSVRTOyBtYXggPj0gMTsgbWF4LS0pIHtcbiAgICBpZiAoY291bnRbbWF4XSAhPT0gMCkgeyBicmVhazsgfVxuICB9XG4gIGlmIChyb290ID4gbWF4KSB7XG4gICAgcm9vdCA9IG1heDtcbiAgfVxuICBpZiAobWF4ID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgLyogbm8gc3ltYm9scyB0byBjb2RlIGF0IGFsbCAqL1xuICAgIC8vdGFibGUub3Bbb3B0cy50YWJsZV9pbmRleF0gPSA2NDsgIC8vaGVyZS5vcCA9ICh2YXIgY2hhcik2NDsgICAgLyogaW52YWxpZCBjb2RlIG1hcmtlciAqL1xuICAgIC8vdGFibGUuYml0c1tvcHRzLnRhYmxlX2luZGV4XSA9IDE7ICAgLy9oZXJlLmJpdHMgPSAodmFyIGNoYXIpMTtcbiAgICAvL3RhYmxlLnZhbFtvcHRzLnRhYmxlX2luZGV4KytdID0gMDsgICAvL2hlcmUudmFsID0gKHZhciBzaG9ydCkwO1xuICAgIHRhYmxlW3RhYmxlX2luZGV4KytdID0gKDEgPDwgMjQpIHwgKDY0IDw8IDE2KSB8IDA7XG5cblxuICAgIC8vdGFibGUub3Bbb3B0cy50YWJsZV9pbmRleF0gPSA2NDtcbiAgICAvL3RhYmxlLmJpdHNbb3B0cy50YWJsZV9pbmRleF0gPSAxO1xuICAgIC8vdGFibGUudmFsW29wdHMudGFibGVfaW5kZXgrK10gPSAwO1xuICAgIHRhYmxlW3RhYmxlX2luZGV4KytdID0gKDEgPDwgMjQpIHwgKDY0IDw8IDE2KSB8IDA7XG5cbiAgICBvcHRzLmJpdHMgPSAxO1xuICAgIHJldHVybiAwOyAgICAgLyogbm8gc3ltYm9scywgYnV0IHdhaXQgZm9yIGRlY29kaW5nIHRvIHJlcG9ydCBlcnJvciAqL1xuICB9XG4gIGZvciAobWluID0gMTsgbWluIDwgbWF4OyBtaW4rKykge1xuICAgIGlmIChjb3VudFttaW5dICE9PSAwKSB7IGJyZWFrOyB9XG4gIH1cbiAgaWYgKHJvb3QgPCBtaW4pIHtcbiAgICByb290ID0gbWluO1xuICB9XG5cbiAgLyogY2hlY2sgZm9yIGFuIG92ZXItc3Vic2NyaWJlZCBvciBpbmNvbXBsZXRlIHNldCBvZiBsZW5ndGhzICovXG4gIGxlZnQgPSAxO1xuICBmb3IgKGxlbiA9IDE7IGxlbiA8PSBNQVhCSVRTOyBsZW4rKykge1xuICAgIGxlZnQgPDw9IDE7XG4gICAgbGVmdCAtPSBjb3VudFtsZW5dO1xuICAgIGlmIChsZWZ0IDwgMCkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gICAgICAgIC8qIG92ZXItc3Vic2NyaWJlZCAqL1xuICB9XG4gIGlmIChsZWZ0ID4gMCAmJiAodHlwZSA9PT0gQ09ERVMgfHwgbWF4ICE9PSAxKSkge1xuICAgIHJldHVybiAtMTsgICAgICAgICAgICAgICAgICAgICAgLyogaW5jb21wbGV0ZSBzZXQgKi9cbiAgfVxuXG4gIC8qIGdlbmVyYXRlIG9mZnNldHMgaW50byBzeW1ib2wgdGFibGUgZm9yIGVhY2ggbGVuZ3RoIGZvciBzb3J0aW5nICovXG4gIG9mZnNbMV0gPSAwO1xuICBmb3IgKGxlbiA9IDE7IGxlbiA8IE1BWEJJVFM7IGxlbisrKSB7XG4gICAgb2Zmc1tsZW4gKyAxXSA9IG9mZnNbbGVuXSArIGNvdW50W2xlbl07XG4gIH1cblxuICAvKiBzb3J0IHN5bWJvbHMgYnkgbGVuZ3RoLCBieSBzeW1ib2wgb3JkZXIgd2l0aGluIGVhY2ggbGVuZ3RoICovXG4gIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7XG4gICAgaWYgKGxlbnNbbGVuc19pbmRleCArIHN5bV0gIT09IDApIHtcbiAgICAgIHdvcmtbb2Zmc1tsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrXSA9IHN5bTtcbiAgICB9XG4gIH1cblxuICAvKlxuICAgQ3JlYXRlIGFuZCBmaWxsIGluIGRlY29kaW5nIHRhYmxlcy4gIEluIHRoaXMgbG9vcCwgdGhlIHRhYmxlIGJlaW5nXG4gICBmaWxsZWQgaXMgYXQgbmV4dCBhbmQgaGFzIGN1cnIgaW5kZXggYml0cy4gIFRoZSBjb2RlIGJlaW5nIHVzZWQgaXMgaHVmZlxuICAgd2l0aCBsZW5ndGggbGVuLiAgVGhhdCBjb2RlIGlzIGNvbnZlcnRlZCB0byBhbiBpbmRleCBieSBkcm9wcGluZyBkcm9wXG4gICBiaXRzIG9mZiBvZiB0aGUgYm90dG9tLiAgRm9yIGNvZGVzIHdoZXJlIGxlbiBpcyBsZXNzIHRoYW4gZHJvcCArIGN1cnIsXG4gICB0aG9zZSB0b3AgZHJvcCArIGN1cnIgLSBsZW4gYml0cyBhcmUgaW5jcmVtZW50ZWQgdGhyb3VnaCBhbGwgdmFsdWVzIHRvXG4gICBmaWxsIHRoZSB0YWJsZSB3aXRoIHJlcGxpY2F0ZWQgZW50cmllcy5cblxuICAgcm9vdCBpcyB0aGUgbnVtYmVyIG9mIGluZGV4IGJpdHMgZm9yIHRoZSByb290IHRhYmxlLiAgV2hlbiBsZW4gZXhjZWVkc1xuICAgcm9vdCwgc3ViLXRhYmxlcyBhcmUgY3JlYXRlZCBwb2ludGVkIHRvIGJ5IHRoZSByb290IGVudHJ5IHdpdGggYW4gaW5kZXhcbiAgIG9mIHRoZSBsb3cgcm9vdCBiaXRzIG9mIGh1ZmYuICBUaGlzIGlzIHNhdmVkIGluIGxvdyB0byBjaGVjayBmb3Igd2hlbiBhXG4gICBuZXcgc3ViLXRhYmxlIHNob3VsZCBiZSBzdGFydGVkLiAgZHJvcCBpcyB6ZXJvIHdoZW4gdGhlIHJvb3QgdGFibGUgaXNcbiAgIGJlaW5nIGZpbGxlZCwgYW5kIGRyb3AgaXMgcm9vdCB3aGVuIHN1Yi10YWJsZXMgYXJlIGJlaW5nIGZpbGxlZC5cblxuICAgV2hlbiBhIG5ldyBzdWItdGFibGUgaXMgbmVlZGVkLCBpdCBpcyBuZWNlc3NhcnkgdG8gbG9vayBhaGVhZCBpbiB0aGVcbiAgIGNvZGUgbGVuZ3RocyB0byBkZXRlcm1pbmUgd2hhdCBzaXplIHN1Yi10YWJsZSBpcyBuZWVkZWQuICBUaGUgbGVuZ3RoXG4gICBjb3VudHMgYXJlIHVzZWQgZm9yIHRoaXMsIGFuZCBzbyBjb3VudFtdIGlzIGRlY3JlbWVudGVkIGFzIGNvZGVzIGFyZVxuICAgZW50ZXJlZCBpbiB0aGUgdGFibGVzLlxuXG4gICB1c2VkIGtlZXBzIHRyYWNrIG9mIGhvdyBtYW55IHRhYmxlIGVudHJpZXMgaGF2ZSBiZWVuIGFsbG9jYXRlZCBmcm9tIHRoZVxuICAgcHJvdmlkZWQgKnRhYmxlIHNwYWNlLiAgSXQgaXMgY2hlY2tlZCBmb3IgTEVOUyBhbmQgRElTVCB0YWJsZXMgYWdhaW5zdFxuICAgdGhlIGNvbnN0YW50cyBFTk9VR0hfTEVOUyBhbmQgRU5PVUdIX0RJU1RTIHRvIGd1YXJkIGFnYWluc3QgY2hhbmdlcyBpblxuICAgdGhlIGluaXRpYWwgcm9vdCB0YWJsZSBzaXplIGNvbnN0YW50cy4gIFNlZSB0aGUgY29tbWVudHMgaW4gaW5mdHJlZXMuaFxuICAgZm9yIG1vcmUgaW5mb3JtYXRpb24uXG5cbiAgIHN5bSBpbmNyZW1lbnRzIHRocm91Z2ggYWxsIHN5bWJvbHMsIGFuZCB0aGUgbG9vcCB0ZXJtaW5hdGVzIHdoZW5cbiAgIGFsbCBjb2RlcyBvZiBsZW5ndGggbWF4LCBpLmUuIGFsbCBjb2RlcywgaGF2ZSBiZWVuIHByb2Nlc3NlZC4gIFRoaXNcbiAgIHJvdXRpbmUgcGVybWl0cyBpbmNvbXBsZXRlIGNvZGVzLCBzbyBhbm90aGVyIGxvb3AgYWZ0ZXIgdGhpcyBvbmUgZmlsbHNcbiAgIGluIHRoZSByZXN0IG9mIHRoZSBkZWNvZGluZyB0YWJsZXMgd2l0aCBpbnZhbGlkIGNvZGUgbWFya2Vycy5cbiAgICovXG5cbiAgLyogc2V0IHVwIGZvciBjb2RlIHR5cGUgKi9cbiAgLy8gcG9vciBtYW4gb3B0aW1pemF0aW9uIC0gdXNlIGlmLWVsc2UgaW5zdGVhZCBvZiBzd2l0Y2gsXG4gIC8vIHRvIGF2b2lkIGRlb3B0cyBpbiBvbGQgdjhcbiAgaWYgKHR5cGUgPT09IENPREVTKSB7XG4gICAgYmFzZSA9IGV4dHJhID0gd29yazsgICAgLyogZHVtbXkgdmFsdWUtLW5vdCB1c2VkICovXG4gICAgZW5kID0gMTk7XG5cbiAgfSBlbHNlIGlmICh0eXBlID09PSBMRU5TKSB7XG4gICAgYmFzZSA9IGxiYXNlO1xuICAgIGJhc2VfaW5kZXggLT0gMjU3O1xuICAgIGV4dHJhID0gbGV4dDtcbiAgICBleHRyYV9pbmRleCAtPSAyNTc7XG4gICAgZW5kID0gMjU2O1xuXG4gIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAvKiBESVNUUyAqL1xuICAgIGJhc2UgPSBkYmFzZTtcbiAgICBleHRyYSA9IGRleHQ7XG4gICAgZW5kID0gLTE7XG4gIH1cblxuICAvKiBpbml0aWFsaXplIG9wdHMgZm9yIGxvb3AgKi9cbiAgaHVmZiA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIHN0YXJ0aW5nIGNvZGUgKi9cbiAgc3ltID0gMDsgICAgICAgICAgICAgICAgICAgIC8qIHN0YXJ0aW5nIGNvZGUgc3ltYm9sICovXG4gIGxlbiA9IG1pbjsgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlIGxlbmd0aCAqL1xuICBuZXh0ID0gdGFibGVfaW5kZXg7ICAgICAgICAgICAgICAvKiBjdXJyZW50IHRhYmxlIHRvIGZpbGwgaW4gKi9cbiAgY3VyciA9IHJvb3Q7ICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgaW5kZXggYml0cyAqL1xuICBkcm9wID0gMDsgICAgICAgICAgICAgICAgICAgLyogY3VycmVudCBiaXRzIHRvIGRyb3AgZnJvbSBjb2RlIGZvciBpbmRleCAqL1xuICBsb3cgPSAtMTsgICAgICAgICAgICAgICAgICAgLyogdHJpZ2dlciBuZXcgc3ViLXRhYmxlIHdoZW4gbGVuID4gcm9vdCAqL1xuICB1c2VkID0gMSA8PCByb290OyAgICAgICAgICAvKiB1c2Ugcm9vdCB0YWJsZSBlbnRyaWVzICovXG4gIG1hc2sgPSB1c2VkIC0gMTsgICAgICAgICAgICAvKiBtYXNrIGZvciBjb21wYXJpbmcgbG93ICovXG5cbiAgLyogY2hlY2sgYXZhaWxhYmxlIHRhYmxlIHNwYWNlICovXG4gIGlmICgodHlwZSA9PT0gTEVOUyAmJiB1c2VkID4gRU5PVUdIX0xFTlMpIHx8XG4gICAgKHR5cGUgPT09IERJU1RTICYmIHVzZWQgPiBFTk9VR0hfRElTVFMpKSB7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICB2YXIgaSA9IDA7XG4gIC8qIHByb2Nlc3MgYWxsIGNvZGVzIGFuZCBtYWtlIHRhYmxlIGVudHJpZXMgKi9cbiAgZm9yICg7Oykge1xuICAgIGkrKztcbiAgICAvKiBjcmVhdGUgdGFibGUgZW50cnkgKi9cbiAgICBoZXJlX2JpdHMgPSBsZW4gLSBkcm9wO1xuICAgIGlmICh3b3JrW3N5bV0gPCBlbmQpIHtcbiAgICAgIGhlcmVfb3AgPSAwO1xuICAgICAgaGVyZV92YWwgPSB3b3JrW3N5bV07XG4gICAgfVxuICAgIGVsc2UgaWYgKHdvcmtbc3ltXSA+IGVuZCkge1xuICAgICAgaGVyZV9vcCA9IGV4dHJhW2V4dHJhX2luZGV4ICsgd29ya1tzeW1dXTtcbiAgICAgIGhlcmVfdmFsID0gYmFzZVtiYXNlX2luZGV4ICsgd29ya1tzeW1dXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBoZXJlX29wID0gMzIgKyA2NDsgICAgICAgICAvKiBlbmQgb2YgYmxvY2sgKi9cbiAgICAgIGhlcmVfdmFsID0gMDtcbiAgICB9XG5cbiAgICAvKiByZXBsaWNhdGUgZm9yIHRob3NlIGluZGljZXMgd2l0aCBsb3cgbGVuIGJpdHMgZXF1YWwgdG8gaHVmZiAqL1xuICAgIGluY3IgPSAxIDw8IChsZW4gLSBkcm9wKTtcbiAgICBmaWxsID0gMSA8PCBjdXJyO1xuICAgIG1pbiA9IGZpbGw7ICAgICAgICAgICAgICAgICAvKiBzYXZlIG9mZnNldCB0byBuZXh0IHRhYmxlICovXG4gICAgZG8ge1xuICAgICAgZmlsbCAtPSBpbmNyO1xuICAgICAgdGFibGVbbmV4dCArIChodWZmID4+IGRyb3ApICsgZmlsbF0gPSAoaGVyZV9iaXRzIDw8IDI0KSB8IChoZXJlX29wIDw8IDE2KSB8IGhlcmVfdmFsIHwwO1xuICAgIH0gd2hpbGUgKGZpbGwgIT09IDApO1xuXG4gICAgLyogYmFja3dhcmRzIGluY3JlbWVudCB0aGUgbGVuLWJpdCBjb2RlIGh1ZmYgKi9cbiAgICBpbmNyID0gMSA8PCAobGVuIC0gMSk7XG4gICAgd2hpbGUgKGh1ZmYgJiBpbmNyKSB7XG4gICAgICBpbmNyID4+PSAxO1xuICAgIH1cbiAgICBpZiAoaW5jciAhPT0gMCkge1xuICAgICAgaHVmZiAmPSBpbmNyIC0gMTtcbiAgICAgIGh1ZmYgKz0gaW5jcjtcbiAgICB9IGVsc2Uge1xuICAgICAgaHVmZiA9IDA7XG4gICAgfVxuXG4gICAgLyogZ28gdG8gbmV4dCBzeW1ib2wsIHVwZGF0ZSBjb3VudCwgbGVuICovXG4gICAgc3ltKys7XG4gICAgaWYgKC0tY291bnRbbGVuXSA9PT0gMCkge1xuICAgICAgaWYgKGxlbiA9PT0gbWF4KSB7IGJyZWFrOyB9XG4gICAgICBsZW4gPSBsZW5zW2xlbnNfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgIH1cblxuICAgIC8qIGNyZWF0ZSBuZXcgc3ViLXRhYmxlIGlmIG5lZWRlZCAqL1xuICAgIGlmIChsZW4gPiByb290ICYmIChodWZmICYgbWFzaykgIT09IGxvdykge1xuICAgICAgLyogaWYgZmlyc3QgdGltZSwgdHJhbnNpdGlvbiB0byBzdWItdGFibGVzICovXG4gICAgICBpZiAoZHJvcCA9PT0gMCkge1xuICAgICAgICBkcm9wID0gcm9vdDtcbiAgICAgIH1cblxuICAgICAgLyogaW5jcmVtZW50IHBhc3QgbGFzdCB0YWJsZSAqL1xuICAgICAgbmV4dCArPSBtaW47ICAgICAgICAgICAgLyogaGVyZSBtaW4gaXMgMSA8PCBjdXJyICovXG5cbiAgICAgIC8qIGRldGVybWluZSBsZW5ndGggb2YgbmV4dCB0YWJsZSAqL1xuICAgICAgY3VyciA9IGxlbiAtIGRyb3A7XG4gICAgICBsZWZ0ID0gMSA8PCBjdXJyO1xuICAgICAgd2hpbGUgKGN1cnIgKyBkcm9wIDwgbWF4KSB7XG4gICAgICAgIGxlZnQgLT0gY291bnRbY3VyciArIGRyb3BdO1xuICAgICAgICBpZiAobGVmdCA8PSAwKSB7IGJyZWFrOyB9XG4gICAgICAgIGN1cnIrKztcbiAgICAgICAgbGVmdCA8PD0gMTtcbiAgICAgIH1cblxuICAgICAgLyogY2hlY2sgZm9yIGVub3VnaCBzcGFjZSAqL1xuICAgICAgdXNlZCArPSAxIDw8IGN1cnI7XG4gICAgICBpZiAoKHR5cGUgPT09IExFTlMgJiYgdXNlZCA+IEVOT1VHSF9MRU5TKSB8fFxuICAgICAgICAodHlwZSA9PT0gRElTVFMgJiYgdXNlZCA+IEVOT1VHSF9ESVNUUykpIHtcbiAgICAgICAgcmV0dXJuIDE7XG4gICAgICB9XG5cbiAgICAgIC8qIHBvaW50IGVudHJ5IGluIHJvb3QgdGFibGUgdG8gc3ViLXRhYmxlICovXG4gICAgICBsb3cgPSBodWZmICYgbWFzaztcbiAgICAgIC8qdGFibGUub3BbbG93XSA9IGN1cnI7XG4gICAgICB0YWJsZS5iaXRzW2xvd10gPSByb290O1xuICAgICAgdGFibGUudmFsW2xvd10gPSBuZXh0IC0gb3B0cy50YWJsZV9pbmRleDsqL1xuICAgICAgdGFibGVbbG93XSA9IChyb290IDw8IDI0KSB8IChjdXJyIDw8IDE2KSB8IChuZXh0IC0gdGFibGVfaW5kZXgpIHwwO1xuICAgIH1cbiAgfVxuXG4gIC8qIGZpbGwgaW4gcmVtYWluaW5nIHRhYmxlIGVudHJ5IGlmIGNvZGUgaXMgaW5jb21wbGV0ZSAoZ3VhcmFudGVlZCB0byBoYXZlXG4gICBhdCBtb3N0IG9uZSByZW1haW5pbmcgZW50cnksIHNpbmNlIGlmIHRoZSBjb2RlIGlzIGluY29tcGxldGUsIHRoZVxuICAgbWF4aW11bSBjb2RlIGxlbmd0aCB0aGF0IHdhcyBhbGxvd2VkIHRvIGdldCB0aGlzIGZhciBpcyBvbmUgYml0KSAqL1xuICBpZiAoaHVmZiAhPT0gMCkge1xuICAgIC8vdGFibGUub3BbbmV4dCArIGh1ZmZdID0gNjQ7ICAgICAgICAgICAgLyogaW52YWxpZCBjb2RlIG1hcmtlciAqL1xuICAgIC8vdGFibGUuYml0c1tuZXh0ICsgaHVmZl0gPSBsZW4gLSBkcm9wO1xuICAgIC8vdGFibGUudmFsW25leHQgKyBodWZmXSA9IDA7XG4gICAgdGFibGVbbmV4dCArIGh1ZmZdID0gKChsZW4gLSBkcm9wKSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwwO1xuICB9XG5cbiAgLyogc2V0IHJldHVybiBwYXJhbWV0ZXJzICovXG4gIC8vb3B0cy50YWJsZV9pbmRleCArPSB1c2VkO1xuICBvcHRzLmJpdHMgPSByb290O1xuICByZXR1cm4gMDtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAyOiAgICAgICduZWVkIGRpY3Rpb25hcnknLCAgICAgLyogWl9ORUVEX0RJQ1QgICAgICAgMiAgKi9cbiAgMTogICAgICAnc3RyZWFtIGVuZCcsICAgICAgICAgIC8qIFpfU1RSRUFNX0VORCAgICAgIDEgICovXG4gIDA6ICAgICAgJycsICAgICAgICAgICAgICAgICAgICAvKiBaX09LICAgICAgICAgICAgICAwICAqL1xuICAnLTEnOiAgICdmaWxlIGVycm9yJywgICAgICAgICAgLyogWl9FUlJOTyAgICAgICAgICgtMSkgKi9cbiAgJy0yJzogICAnc3RyZWFtIGVycm9yJywgICAgICAgIC8qIFpfU1RSRUFNX0VSUk9SICAoLTIpICovXG4gICctMyc6ICAgJ2RhdGEgZXJyb3InLCAgICAgICAgICAvKiBaX0RBVEFfRVJST1IgICAgKC0zKSAqL1xuICAnLTQnOiAgICdpbnN1ZmZpY2llbnQgbWVtb3J5JywgLyogWl9NRU1fRVJST1IgICAgICgtNCkgKi9cbiAgJy01JzogICAnYnVmZmVyIGVycm9yJywgICAgICAgIC8qIFpfQlVGX0VSUk9SICAgICAoLTUpICovXG4gICctNic6ICAgJ2luY29tcGF0aWJsZSB2ZXJzaW9uJyAvKiBaX1ZFUlNJT05fRVJST1IgKC02KSAqL1xufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG5mdW5jdGlvbiBaU3RyZWFtKCkge1xuICAvKiBuZXh0IGlucHV0IGJ5dGUgKi9cbiAgdGhpcy5pbnB1dCA9IG51bGw7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnNcbiAgdGhpcy5uZXh0X2luID0gMDtcbiAgLyogbnVtYmVyIG9mIGJ5dGVzIGF2YWlsYWJsZSBhdCBpbnB1dCAqL1xuICB0aGlzLmF2YWlsX2luID0gMDtcbiAgLyogdG90YWwgbnVtYmVyIG9mIGlucHV0IGJ5dGVzIHJlYWQgc28gZmFyICovXG4gIHRoaXMudG90YWxfaW4gPSAwO1xuICAvKiBuZXh0IG91dHB1dCBieXRlIHNob3VsZCBiZSBwdXQgdGhlcmUgKi9cbiAgdGhpcy5vdXRwdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG4gIHRoaXMubmV4dF9vdXQgPSAwO1xuICAvKiByZW1haW5pbmcgZnJlZSBzcGFjZSBhdCBvdXRwdXQgKi9cbiAgdGhpcy5hdmFpbF9vdXQgPSAwO1xuICAvKiB0b3RhbCBudW1iZXIgb2YgYnl0ZXMgb3V0cHV0IHNvIGZhciAqL1xuICB0aGlzLnRvdGFsX291dCA9IDA7XG4gIC8qIGxhc3QgZXJyb3IgbWVzc2FnZSwgTlVMTCBpZiBubyBlcnJvciAqL1xuICB0aGlzLm1zZyA9ICcnLypaX05VTEwqLztcbiAgLyogbm90IHZpc2libGUgYnkgYXBwbGljYXRpb25zICovXG4gIHRoaXMuc3RhdGUgPSBudWxsO1xuICAvKiBiZXN0IGd1ZXNzIGFib3V0IHRoZSBkYXRhIHR5cGU6IGJpbmFyeSBvciB0ZXh0ICovXG4gIHRoaXMuZGF0YV90eXBlID0gMi8qWl9VTktOT1dOKi87XG4gIC8qIGFkbGVyMzIgdmFsdWUgb2YgdGhlIHVuY29tcHJlc3NlZCBkYXRhICovXG4gIHRoaXMuYWRsZXIgPSAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFpTdHJlYW07XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gdmltOnRzPTQ6c3RzPTQ6c3c9NDpcbi8qIVxuICpcbiAqIENvcHlyaWdodCAyMDA5LTIwMTcgS3JpcyBLb3dhbCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVFxuICogbGljZW5zZSBmb3VuZCBhdCBodHRwczovL2dpdGh1Yi5jb20va3Jpc2tvd2FsL3EvYmxvYi92MS9MSUNFTlNFXG4gKlxuICogV2l0aCBwYXJ0cyBieSBUeWxlciBDbG9zZVxuICogQ29weXJpZ2h0IDIwMDctMjAwOSBUeWxlciBDbG9zZSB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVCBYIGxpY2Vuc2UgZm91bmRcbiAqIGF0IGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UuaHRtbFxuICogRm9ya2VkIGF0IHJlZl9zZW5kLmpzIHZlcnNpb246IDIwMDktMDUtMTFcbiAqXG4gKiBXaXRoIHBhcnRzIGJ5IE1hcmsgTWlsbGVyXG4gKiBDb3B5cmlnaHQgKEMpIDIwMTEgR29vZ2xlIEluYy5cbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqXG4gKi9cblxuKGZ1bmN0aW9uIChkZWZpbml0aW9uKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAvLyBUaGlzIGZpbGUgd2lsbCBmdW5jdGlvbiBwcm9wZXJseSBhcyBhIDxzY3JpcHQ+IHRhZywgb3IgYSBtb2R1bGVcbiAgICAvLyB1c2luZyBDb21tb25KUyBhbmQgTm9kZUpTIG9yIFJlcXVpcmVKUyBtb2R1bGUgZm9ybWF0cy4gIEluXG4gICAgLy8gQ29tbW9uL05vZGUvUmVxdWlyZUpTLCB0aGUgbW9kdWxlIGV4cG9ydHMgdGhlIFEgQVBJIGFuZCB3aGVuXG4gICAgLy8gZXhlY3V0ZWQgYXMgYSBzaW1wbGUgPHNjcmlwdD4sIGl0IGNyZWF0ZXMgYSBRIGdsb2JhbCBpbnN0ZWFkLlxuXG4gICAgLy8gTW9udGFnZSBSZXF1aXJlXG4gICAgaWYgKHR5cGVvZiBib290c3RyYXAgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBib290c3RyYXAoXCJwcm9taXNlXCIsIGRlZmluaXRpb24pO1xuXG4gICAgLy8gQ29tbW9uSlNcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBkZWZpbml0aW9uKCk7XG5cbiAgICAvLyBSZXF1aXJlSlNcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShkZWZpbml0aW9uKTtcblxuICAgIC8vIFNFUyAoU2VjdXJlIEVjbWFTY3JpcHQpXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VzICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICghc2VzLm9rKCkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNlcy5tYWtlUSA9IGRlZmluaXRpb247XG4gICAgICAgIH1cblxuICAgIC8vIDxzY3JpcHQ+XG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiIHx8IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIC8vIFByZWZlciB3aW5kb3cgb3ZlciBzZWxmIGZvciBhZGQtb24gc2NyaXB0cy4gVXNlIHNlbGYgZm9yXG4gICAgICAgIC8vIG5vbi13aW5kb3dlZCBjb250ZXh0cy5cbiAgICAgICAgdmFyIGdsb2JhbCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiBzZWxmO1xuXG4gICAgICAgIC8vIEdldCB0aGUgYHdpbmRvd2Agb2JqZWN0LCBzYXZlIHRoZSBwcmV2aW91cyBRIGdsb2JhbFxuICAgICAgICAvLyBhbmQgaW5pdGlhbGl6ZSBRIGFzIGEgZ2xvYmFsLlxuICAgICAgICB2YXIgcHJldmlvdXNRID0gZ2xvYmFsLlE7XG4gICAgICAgIGdsb2JhbC5RID0gZGVmaW5pdGlvbigpO1xuXG4gICAgICAgIC8vIEFkZCBhIG5vQ29uZmxpY3QgZnVuY3Rpb24gc28gUSBjYW4gYmUgcmVtb3ZlZCBmcm9tIHRoZVxuICAgICAgICAvLyBnbG9iYWwgbmFtZXNwYWNlLlxuICAgICAgICBnbG9iYWwuUS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZ2xvYmFsLlEgPSBwcmV2aW91c1E7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoaXMgZW52aXJvbm1lbnQgd2FzIG5vdCBhbnRpY2lwYXRlZCBieSBRLiBQbGVhc2UgZmlsZSBhIGJ1Zy5cIik7XG4gICAgfVxuXG59KShmdW5jdGlvbiAoKSB7XG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGhhc1N0YWNrcyA9IGZhbHNlO1xudHJ5IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbn0gY2F0Y2ggKGUpIHtcbiAgICBoYXNTdGFja3MgPSAhIWUuc3RhY2s7XG59XG5cbi8vIEFsbCBjb2RlIGFmdGVyIHRoaXMgcG9pbnQgd2lsbCBiZSBmaWx0ZXJlZCBmcm9tIHN0YWNrIHRyYWNlcyByZXBvcnRlZFxuLy8gYnkgUS5cbnZhciBxU3RhcnRpbmdMaW5lID0gY2FwdHVyZUxpbmUoKTtcbnZhciBxRmlsZU5hbWU7XG5cbi8vIHNoaW1zXG5cbi8vIHVzZWQgZm9yIGZhbGxiYWNrIGluIFwiYWxsUmVzb2x2ZWRcIlxudmFyIG5vb3AgPSBmdW5jdGlvbiAoKSB7fTtcblxuLy8gVXNlIHRoZSBmYXN0ZXN0IHBvc3NpYmxlIG1lYW5zIHRvIGV4ZWN1dGUgYSB0YXNrIGluIGEgZnV0dXJlIHR1cm5cbi8vIG9mIHRoZSBldmVudCBsb29wLlxudmFyIG5leHRUaWNrID0oZnVuY3Rpb24gKCkge1xuICAgIC8vIGxpbmtlZCBsaXN0IG9mIHRhc2tzIChzaW5nbGUsIHdpdGggaGVhZCBub2RlKVxuICAgIHZhciBoZWFkID0ge3Rhc2s6IHZvaWQgMCwgbmV4dDogbnVsbH07XG4gICAgdmFyIHRhaWwgPSBoZWFkO1xuICAgIHZhciBmbHVzaGluZyA9IGZhbHNlO1xuICAgIHZhciByZXF1ZXN0VGljayA9IHZvaWQgMDtcbiAgICB2YXIgaXNOb2RlSlMgPSBmYWxzZTtcbiAgICAvLyBxdWV1ZSBmb3IgbGF0ZSB0YXNrcywgdXNlZCBieSB1bmhhbmRsZWQgcmVqZWN0aW9uIHRyYWNraW5nXG4gICAgdmFyIGxhdGVyUXVldWUgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgICAgICAvKiBqc2hpbnQgbG9vcGZ1bmM6IHRydWUgKi9cbiAgICAgICAgdmFyIHRhc2ssIGRvbWFpbjtcblxuICAgICAgICB3aGlsZSAoaGVhZC5uZXh0KSB7XG4gICAgICAgICAgICBoZWFkID0gaGVhZC5uZXh0O1xuICAgICAgICAgICAgdGFzayA9IGhlYWQudGFzaztcbiAgICAgICAgICAgIGhlYWQudGFzayA9IHZvaWQgMDtcbiAgICAgICAgICAgIGRvbWFpbiA9IGhlYWQuZG9tYWluO1xuXG4gICAgICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgaGVhZC5kb21haW4gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgZG9tYWluLmVudGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBydW5TaW5nbGUodGFzaywgZG9tYWluKTtcblxuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChsYXRlclF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgdGFzayA9IGxhdGVyUXVldWUucG9wKCk7XG4gICAgICAgICAgICBydW5TaW5nbGUodGFzayk7XG4gICAgICAgIH1cbiAgICAgICAgZmx1c2hpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgLy8gcnVucyBhIHNpbmdsZSBmdW5jdGlvbiBpbiB0aGUgYXN5bmMgcXVldWVcbiAgICBmdW5jdGlvbiBydW5TaW5nbGUodGFzaywgZG9tYWluKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0YXNrKCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGlzTm9kZUpTKSB7XG4gICAgICAgICAgICAgICAgLy8gSW4gbm9kZSwgdW5jYXVnaHQgZXhjZXB0aW9ucyBhcmUgY29uc2lkZXJlZCBmYXRhbCBlcnJvcnMuXG4gICAgICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlbSBzeW5jaHJvbm91c2x5IHRvIGludGVycnVwdCBmbHVzaGluZyFcblxuICAgICAgICAgICAgICAgIC8vIEVuc3VyZSBjb250aW51YXRpb24gaWYgdGhlIHVuY2F1Z2h0IGV4Y2VwdGlvbiBpcyBzdXBwcmVzc2VkXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVuaW5nIFwidW5jYXVnaHRFeGNlcHRpb25cIiBldmVudHMgKGFzIGRvbWFpbnMgZG9lcykuXG4gICAgICAgICAgICAgICAgLy8gQ29udGludWUgaW4gbmV4dCBldmVudCB0byBhdm9pZCB0aWNrIHJlY3Vyc2lvbi5cbiAgICAgICAgICAgICAgICBpZiAoZG9tYWluKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbWFpbi5leGl0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgICAgICAgICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluLmVudGVyKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBicm93c2VycywgdW5jYXVnaHQgZXhjZXB0aW9ucyBhcmUgbm90IGZhdGFsLlxuICAgICAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZW0gYXN5bmNocm9ub3VzbHkgdG8gYXZvaWQgc2xvdy1kb3ducy5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgIGRvbWFpbi5leGl0KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZXh0VGljayA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgIHRhaWwgPSB0YWlsLm5leHQgPSB7XG4gICAgICAgICAgICB0YXNrOiB0YXNrLFxuICAgICAgICAgICAgZG9tYWluOiBpc05vZGVKUyAmJiBwcm9jZXNzLmRvbWFpbixcbiAgICAgICAgICAgIG5leHQ6IG51bGxcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoIWZsdXNoaW5nKSB7XG4gICAgICAgICAgICBmbHVzaGluZyA9IHRydWU7XG4gICAgICAgICAgICByZXF1ZXN0VGljaygpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBwcm9jZXNzLnRvU3RyaW5nKCkgPT09IFwiW29iamVjdCBwcm9jZXNzXVwiICYmIHByb2Nlc3MubmV4dFRpY2spIHtcbiAgICAgICAgLy8gRW5zdXJlIFEgaXMgaW4gYSByZWFsIE5vZGUgZW52aXJvbm1lbnQsIHdpdGggYSBgcHJvY2Vzcy5uZXh0VGlja2AuXG4gICAgICAgIC8vIFRvIHNlZSB0aHJvdWdoIGZha2UgTm9kZSBlbnZpcm9ubWVudHM6XG4gICAgICAgIC8vICogTW9jaGEgdGVzdCBydW5uZXIgLSBleHBvc2VzIGEgYHByb2Nlc3NgIGdsb2JhbCB3aXRob3V0IGEgYG5leHRUaWNrYFxuICAgICAgICAvLyAqIEJyb3dzZXJpZnkgLSBleHBvc2VzIGEgYHByb2Nlc3MubmV4VGlja2AgZnVuY3Rpb24gdGhhdCB1c2VzXG4gICAgICAgIC8vICAgYHNldFRpbWVvdXRgLiBJbiB0aGlzIGNhc2UgYHNldEltbWVkaWF0ZWAgaXMgcHJlZmVycmVkIGJlY2F1c2VcbiAgICAgICAgLy8gICAgaXQgaXMgZmFzdGVyLiBCcm93c2VyaWZ5J3MgYHByb2Nlc3MudG9TdHJpbmcoKWAgeWllbGRzXG4gICAgICAgIC8vICAgXCJbb2JqZWN0IE9iamVjdF1cIiwgd2hpbGUgaW4gYSByZWFsIE5vZGUgZW52aXJvbm1lbnRcbiAgICAgICAgLy8gICBgcHJvY2Vzcy50b1N0cmluZygpYCB5aWVsZHMgXCJbb2JqZWN0IHByb2Nlc3NdXCIuXG4gICAgICAgIGlzTm9kZUpTID0gdHJ1ZTtcblxuICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHByb2Nlc3MubmV4dFRpY2soZmx1c2gpO1xuICAgICAgICB9O1xuXG4gICAgfSBlbHNlIGlmICh0eXBlb2Ygc2V0SW1tZWRpYXRlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgLy8gSW4gSUUxMCwgTm9kZS5qcyAwLjkrLCBvciBodHRwczovL2dpdGh1Yi5jb20vTm9ibGVKUy9zZXRJbW1lZGlhdGVcbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrID0gc2V0SW1tZWRpYXRlLmJpbmQod2luZG93LCBmbHVzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZXRJbW1lZGlhdGUoZmx1c2gpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgLy8gbW9kZXJuIGJyb3dzZXJzXG4gICAgICAgIC8vIGh0dHA6Ly93d3cubm9uYmxvY2tpbmcuaW8vMjAxMS8wNi93aW5kb3duZXh0dGljay5odG1sXG4gICAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICAgIC8vIEF0IGxlYXN0IFNhZmFyaSBWZXJzaW9uIDYuMC41ICg4NTM2LjMwLjEpIGludGVybWl0dGVudGx5IGNhbm5vdCBjcmVhdGVcbiAgICAgICAgLy8gd29ya2luZyBtZXNzYWdlIHBvcnRzIHRoZSBmaXJzdCB0aW1lIGEgcGFnZSBsb2Fkcy5cbiAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXF1ZXN0VGljayA9IHJlcXVlc3RQb3J0VGljaztcbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gZmx1c2g7XG4gICAgICAgICAgICBmbHVzaCgpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcmVxdWVzdFBvcnRUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gT3BlcmEgcmVxdWlyZXMgdXMgdG8gcHJvdmlkZSBhIG1lc3NhZ2UgcGF5bG9hZCwgcmVnYXJkbGVzcyBvZlxuICAgICAgICAgICAgLy8gd2hldGhlciB3ZSB1c2UgaXQuXG4gICAgICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgICAgICAgICAgcmVxdWVzdFBvcnRUaWNrKCk7XG4gICAgICAgIH07XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyBvbGQgYnJvd3NlcnNcbiAgICAgICAgcmVxdWVzdFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZsdXNoLCAwKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLy8gcnVucyBhIHRhc2sgYWZ0ZXIgYWxsIG90aGVyIHRhc2tzIGhhdmUgYmVlbiBydW5cbiAgICAvLyB0aGlzIGlzIHVzZWZ1bCBmb3IgdW5oYW5kbGVkIHJlamVjdGlvbiB0cmFja2luZyB0aGF0IG5lZWRzIHRvIGhhcHBlblxuICAgIC8vIGFmdGVyIGFsbCBgdGhlbmBkIHRhc2tzIGhhdmUgYmVlbiBydW4uXG4gICAgbmV4dFRpY2sucnVuQWZ0ZXIgPSBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICBsYXRlclF1ZXVlLnB1c2godGFzayk7XG4gICAgICAgIGlmICghZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIGZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiBuZXh0VGljaztcbn0pKCk7XG5cbi8vIEF0dGVtcHQgdG8gbWFrZSBnZW5lcmljcyBzYWZlIGluIHRoZSBmYWNlIG9mIGRvd25zdHJlYW1cbi8vIG1vZGlmaWNhdGlvbnMuXG4vLyBUaGVyZSBpcyBubyBzaXR1YXRpb24gd2hlcmUgdGhpcyBpcyBuZWNlc3NhcnkuXG4vLyBJZiB5b3UgbmVlZCBhIHNlY3VyaXR5IGd1YXJhbnRlZSwgdGhlc2UgcHJpbW9yZGlhbHMgbmVlZCB0byBiZVxuLy8gZGVlcGx5IGZyb3plbiBhbnl3YXksIGFuZCBpZiB5b3UgZG9u4oCZdCBuZWVkIGEgc2VjdXJpdHkgZ3VhcmFudGVlLFxuLy8gdGhpcyBpcyBqdXN0IHBsYWluIHBhcmFub2lkLlxuLy8gSG93ZXZlciwgdGhpcyAqKm1pZ2h0KiogaGF2ZSB0aGUgbmljZSBzaWRlLWVmZmVjdCBvZiByZWR1Y2luZyB0aGUgc2l6ZSBvZlxuLy8gdGhlIG1pbmlmaWVkIGNvZGUgYnkgcmVkdWNpbmcgeC5jYWxsKCkgdG8gbWVyZWx5IHgoKVxuLy8gU2VlIE1hcmsgTWlsbGVy4oCZcyBleHBsYW5hdGlvbiBvZiB3aGF0IHRoaXMgZG9lcy5cbi8vIGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWNvbnZlbnRpb25zOnNhZmVfbWV0YV9wcm9ncmFtbWluZ1xudmFyIGNhbGwgPSBGdW5jdGlvbi5jYWxsO1xuZnVuY3Rpb24gdW5jdXJyeVRoaXMoZikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBjYWxsLmFwcGx5KGYsIGFyZ3VtZW50cyk7XG4gICAgfTtcbn1cbi8vIFRoaXMgaXMgZXF1aXZhbGVudCwgYnV0IHNsb3dlcjpcbi8vIHVuY3VycnlUaGlzID0gRnVuY3Rpb25fYmluZC5iaW5kKEZ1bmN0aW9uX2JpbmQuY2FsbCk7XG4vLyBodHRwOi8vanNwZXJmLmNvbS91bmN1cnJ5dGhpc1xuXG52YXIgYXJyYXlfc2xpY2UgPSB1bmN1cnJ5VGhpcyhBcnJheS5wcm90b3R5cGUuc2xpY2UpO1xuXG52YXIgYXJyYXlfcmVkdWNlID0gdW5jdXJyeVRoaXMoXG4gICAgQXJyYXkucHJvdG90eXBlLnJlZHVjZSB8fCBmdW5jdGlvbiAoY2FsbGJhY2ssIGJhc2lzKSB7XG4gICAgICAgIHZhciBpbmRleCA9IDAsXG4gICAgICAgICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgLy8gY29uY2VybmluZyB0aGUgaW5pdGlhbCB2YWx1ZSwgaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gc2VlayB0byB0aGUgZmlyc3QgdmFsdWUgaW4gdGhlIGFycmF5LCBhY2NvdW50aW5nXG4gICAgICAgICAgICAvLyBmb3IgdGhlIHBvc3NpYmlsaXR5IHRoYXQgaXMgaXMgYSBzcGFyc2UgYXJyYXlcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggaW4gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICBiYXNpcyA9IHRoaXNbaW5kZXgrK107XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKytpbmRleCA+PSBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gd2hpbGUgKDEpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlZHVjZVxuICAgICAgICBmb3IgKDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgIC8vIGFjY291bnQgZm9yIHRoZSBwb3NzaWJpbGl0eSB0aGF0IHRoZSBhcnJheSBpcyBzcGFyc2VcbiAgICAgICAgICAgIGlmIChpbmRleCBpbiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgYmFzaXMgPSBjYWxsYmFjayhiYXNpcywgdGhpc1tpbmRleF0sIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYmFzaXM7XG4gICAgfVxuKTtcblxudmFyIGFycmF5X2luZGV4T2YgPSB1bmN1cnJ5VGhpcyhcbiAgICBBcnJheS5wcm90b3R5cGUuaW5kZXhPZiB8fCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbm90IGEgdmVyeSBnb29kIHNoaW0sIGJ1dCBnb29kIGVub3VnaCBmb3Igb3VyIG9uZSB1c2Ugb2YgaXRcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpc1tpXSA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuKTtcblxudmFyIGFycmF5X21hcCA9IHVuY3VycnlUaGlzKFxuICAgIEFycmF5LnByb3RvdHlwZS5tYXAgfHwgZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzcCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHZhciBjb2xsZWN0ID0gW107XG4gICAgICAgIGFycmF5X3JlZHVjZShzZWxmLCBmdW5jdGlvbiAodW5kZWZpbmVkLCB2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbGxlY3QucHVzaChjYWxsYmFjay5jYWxsKHRoaXNwLCB2YWx1ZSwgaW5kZXgsIHNlbGYpKTtcbiAgICAgICAgfSwgdm9pZCAwKTtcbiAgICAgICAgcmV0dXJuIGNvbGxlY3Q7XG4gICAgfVxuKTtcblxudmFyIG9iamVjdF9jcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIChwcm90b3R5cGUpIHtcbiAgICBmdW5jdGlvbiBUeXBlKCkgeyB9XG4gICAgVHlwZS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgcmV0dXJuIG5ldyBUeXBlKCk7XG59O1xuXG52YXIgb2JqZWN0X2RlZmluZVByb3BlcnR5ID0gT2JqZWN0LmRlZmluZVByb3BlcnR5IHx8IGZ1bmN0aW9uIChvYmosIHByb3AsIGRlc2NyaXB0b3IpIHtcbiAgICBvYmpbcHJvcF0gPSBkZXNjcmlwdG9yLnZhbHVlO1xuICAgIHJldHVybiBvYmo7XG59O1xuXG52YXIgb2JqZWN0X2hhc093blByb3BlcnR5ID0gdW5jdXJyeVRoaXMoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eSk7XG5cbnZhciBvYmplY3Rfa2V5cyA9IE9iamVjdC5rZXlzIHx8IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgaWYgKG9iamVjdF9oYXNPd25Qcm9wZXJ0eShvYmplY3QsIGtleSkpIHtcbiAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlzO1xufTtcblxudmFyIG9iamVjdF90b1N0cmluZyA9IHVuY3VycnlUaGlzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcpO1xuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gT2JqZWN0KHZhbHVlKTtcbn1cblxuLy8gZ2VuZXJhdG9yIHJlbGF0ZWQgc2hpbXNcblxuLy8gRklYTUU6IFJlbW92ZSB0aGlzIGZ1bmN0aW9uIG9uY2UgRVM2IGdlbmVyYXRvcnMgYXJlIGluIFNwaWRlck1vbmtleS5cbmZ1bmN0aW9uIGlzU3RvcEl0ZXJhdGlvbihleGNlcHRpb24pIHtcbiAgICByZXR1cm4gKFxuICAgICAgICBvYmplY3RfdG9TdHJpbmcoZXhjZXB0aW9uKSA9PT0gXCJbb2JqZWN0IFN0b3BJdGVyYXRpb25dXCIgfHxcbiAgICAgICAgZXhjZXB0aW9uIGluc3RhbmNlb2YgUVJldHVyblZhbHVlXG4gICAgKTtcbn1cblxuLy8gRklYTUU6IFJlbW92ZSB0aGlzIGhlbHBlciBhbmQgUS5yZXR1cm4gb25jZSBFUzYgZ2VuZXJhdG9ycyBhcmUgaW5cbi8vIFNwaWRlck1vbmtleS5cbnZhciBRUmV0dXJuVmFsdWU7XG5pZiAodHlwZW9mIFJldHVyblZhbHVlICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgUVJldHVyblZhbHVlID0gUmV0dXJuVmFsdWU7XG59IGVsc2Uge1xuICAgIFFSZXR1cm5WYWx1ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgfTtcbn1cblxuLy8gbG9uZyBzdGFjayB0cmFjZXNcblxudmFyIFNUQUNLX0pVTVBfU0VQQVJBVE9SID0gXCJGcm9tIHByZXZpb3VzIGV2ZW50OlwiO1xuXG5mdW5jdGlvbiBtYWtlU3RhY2tUcmFjZUxvbmcoZXJyb3IsIHByb21pc2UpIHtcbiAgICAvLyBJZiBwb3NzaWJsZSwgdHJhbnNmb3JtIHRoZSBlcnJvciBzdGFjayB0cmFjZSBieSByZW1vdmluZyBOb2RlIGFuZCBRXG4gICAgLy8gY3J1ZnQsIHRoZW4gY29uY2F0ZW5hdGluZyB3aXRoIHRoZSBzdGFjayB0cmFjZSBvZiBgcHJvbWlzZWAuIFNlZSAjNTcuXG4gICAgaWYgKGhhc1N0YWNrcyAmJlxuICAgICAgICBwcm9taXNlLnN0YWNrICYmXG4gICAgICAgIHR5cGVvZiBlcnJvciA9PT0gXCJvYmplY3RcIiAmJlxuICAgICAgICBlcnJvciAhPT0gbnVsbCAmJlxuICAgICAgICBlcnJvci5zdGFja1xuICAgICkge1xuICAgICAgICB2YXIgc3RhY2tzID0gW107XG4gICAgICAgIGZvciAodmFyIHAgPSBwcm9taXNlOyAhIXA7IHAgPSBwLnNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHAuc3RhY2sgJiYgKCFlcnJvci5fX21pbmltdW1TdGFja0NvdW50ZXJfXyB8fCBlcnJvci5fX21pbmltdW1TdGFja0NvdW50ZXJfXyA+IHAuc3RhY2tDb3VudGVyKSkge1xuICAgICAgICAgICAgICAgIG9iamVjdF9kZWZpbmVQcm9wZXJ0eShlcnJvciwgXCJfX21pbmltdW1TdGFja0NvdW50ZXJfX1wiLCB7dmFsdWU6IHAuc3RhY2tDb3VudGVyLCBjb25maWd1cmFibGU6IHRydWV9KTtcbiAgICAgICAgICAgICAgICBzdGFja3MudW5zaGlmdChwLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGFja3MudW5zaGlmdChlcnJvci5zdGFjayk7XG5cbiAgICAgICAgdmFyIGNvbmNhdGVkU3RhY2tzID0gc3RhY2tzLmpvaW4oXCJcXG5cIiArIFNUQUNLX0pVTVBfU0VQQVJBVE9SICsgXCJcXG5cIik7XG4gICAgICAgIHZhciBzdGFjayA9IGZpbHRlclN0YWNrU3RyaW5nKGNvbmNhdGVkU3RhY2tzKTtcbiAgICAgICAgb2JqZWN0X2RlZmluZVByb3BlcnR5KGVycm9yLCBcInN0YWNrXCIsIHt2YWx1ZTogc3RhY2ssIGNvbmZpZ3VyYWJsZTogdHJ1ZX0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlsdGVyU3RhY2tTdHJpbmcoc3RhY2tTdHJpbmcpIHtcbiAgICB2YXIgbGluZXMgPSBzdGFja1N0cmluZy5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZGVzaXJlZExpbmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2ldO1xuXG4gICAgICAgIGlmICghaXNJbnRlcm5hbEZyYW1lKGxpbmUpICYmICFpc05vZGVGcmFtZShsaW5lKSAmJiBsaW5lKSB7XG4gICAgICAgICAgICBkZXNpcmVkTGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVzaXJlZExpbmVzLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZUZyYW1lKHN0YWNrTGluZSkge1xuICAgIHJldHVybiBzdGFja0xpbmUuaW5kZXhPZihcIihtb2R1bGUuanM6XCIpICE9PSAtMSB8fFxuICAgICAgICAgICBzdGFja0xpbmUuaW5kZXhPZihcIihub2RlLmpzOlwiKSAhPT0gLTE7XG59XG5cbmZ1bmN0aW9uIGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihzdGFja0xpbmUpIHtcbiAgICAvLyBOYW1lZCBmdW5jdGlvbnM6IFwiYXQgZnVuY3Rpb25OYW1lIChmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlcilcIlxuICAgIC8vIEluIElFMTAgZnVuY3Rpb24gbmFtZSBjYW4gaGF2ZSBzcGFjZXMgKFwiQW5vbnltb3VzIGZ1bmN0aW9uXCIpIE9fb1xuICAgIHZhciBhdHRlbXB0MSA9IC9hdCAuKyBcXCgoLispOihcXGQrKTooPzpcXGQrKVxcKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDEpIHtcbiAgICAgICAgcmV0dXJuIFthdHRlbXB0MVsxXSwgTnVtYmVyKGF0dGVtcHQxWzJdKV07XG4gICAgfVxuXG4gICAgLy8gQW5vbnltb3VzIGZ1bmN0aW9uczogXCJhdCBmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlclwiXG4gICAgdmFyIGF0dGVtcHQyID0gL2F0IChbXiBdKyk6KFxcZCspOig/OlxcZCspJC8uZXhlYyhzdGFja0xpbmUpO1xuICAgIGlmIChhdHRlbXB0Mikge1xuICAgICAgICByZXR1cm4gW2F0dGVtcHQyWzFdLCBOdW1iZXIoYXR0ZW1wdDJbMl0pXTtcbiAgICB9XG5cbiAgICAvLyBGaXJlZm94IHN0eWxlOiBcImZ1bmN0aW9uQGZpbGVuYW1lOmxpbmVOdW1iZXIgb3IgQGZpbGVuYW1lOmxpbmVOdW1iZXJcIlxuICAgIHZhciBhdHRlbXB0MyA9IC8uKkAoLispOihcXGQrKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDMpIHtcbiAgICAgICAgcmV0dXJuIFthdHRlbXB0M1sxXSwgTnVtYmVyKGF0dGVtcHQzWzJdKV07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0ludGVybmFsRnJhbWUoc3RhY2tMaW5lKSB7XG4gICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihzdGFja0xpbmUpO1xuXG4gICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBmaWxlTmFtZSA9IGZpbGVOYW1lQW5kTGluZU51bWJlclswXTtcbiAgICB2YXIgbGluZU51bWJlciA9IGZpbGVOYW1lQW5kTGluZU51bWJlclsxXTtcblxuICAgIHJldHVybiBmaWxlTmFtZSA9PT0gcUZpbGVOYW1lICYmXG4gICAgICAgIGxpbmVOdW1iZXIgPj0gcVN0YXJ0aW5nTGluZSAmJlxuICAgICAgICBsaW5lTnVtYmVyIDw9IHFFbmRpbmdMaW5lO1xufVxuXG4vLyBkaXNjb3ZlciBvd24gZmlsZSBuYW1lIGFuZCBsaW5lIG51bWJlciByYW5nZSBmb3IgZmlsdGVyaW5nIHN0YWNrXG4vLyB0cmFjZXNcbmZ1bmN0aW9uIGNhcHR1cmVMaW5lKCkge1xuICAgIGlmICghaGFzU3RhY2tzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHZhciBsaW5lcyA9IGUuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIHZhciBmaXJzdExpbmUgPSBsaW5lc1swXS5pbmRleE9mKFwiQFwiKSA+IDAgPyBsaW5lc1sxXSA6IGxpbmVzWzJdO1xuICAgICAgICB2YXIgZmlsZU5hbWVBbmRMaW5lTnVtYmVyID0gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKGZpcnN0TGluZSk7XG4gICAgICAgIGlmICghZmlsZU5hbWVBbmRMaW5lTnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBxRmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF07XG4gICAgICAgIHJldHVybiBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZXByZWNhdGUoY2FsbGJhY2ssIG5hbWUsIGFsdGVybmF0aXZlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB0eXBlb2YgY29uc29sZS53YXJuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihuYW1lICsgXCIgaXMgZGVwcmVjYXRlZCwgdXNlIFwiICsgYWx0ZXJuYXRpdmUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgIFwiIGluc3RlYWQuXCIsIG5ldyBFcnJvcihcIlwiKS5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KGNhbGxiYWNrLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8vIGVuZCBvZiBzaGltc1xuLy8gYmVnaW5uaW5nIG9mIHJlYWwgd29ya1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBwcm9taXNlIGZvciBhbiBpbW1lZGlhdGUgcmVmZXJlbmNlLCBwYXNzZXMgcHJvbWlzZXMgdGhyb3VnaCwgb3JcbiAqIGNvZXJjZXMgcHJvbWlzZXMgZnJvbSBkaWZmZXJlbnQgc3lzdGVtcy5cbiAqIEBwYXJhbSB2YWx1ZSBpbW1lZGlhdGUgcmVmZXJlbmNlIG9yIHByb21pc2VcbiAqL1xuZnVuY3Rpb24gUSh2YWx1ZSkge1xuICAgIC8vIElmIHRoZSBvYmplY3QgaXMgYWxyZWFkeSBhIFByb21pc2UsIHJldHVybiBpdCBkaXJlY3RseS4gIFRoaXMgZW5hYmxlc1xuICAgIC8vIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHRvIGJvdGggYmUgdXNlZCB0byBjcmVhdGVkIHJlZmVyZW5jZXMgZnJvbSBvYmplY3RzLFxuICAgIC8vIGJ1dCB0byB0b2xlcmFibHkgY29lcmNlIG5vbi1wcm9taXNlcyB0byBwcm9taXNlcy5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBhc3NpbWlsYXRlIHRoZW5hYmxlc1xuICAgIGlmIChpc1Byb21pc2VBbGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bGZpbGwodmFsdWUpO1xuICAgIH1cbn1cblEucmVzb2x2ZSA9IFE7XG5cbi8qKlxuICogUGVyZm9ybXMgYSB0YXNrIGluIGEgZnV0dXJlIHR1cm4gb2YgdGhlIGV2ZW50IGxvb3AuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXNrXG4gKi9cblEubmV4dFRpY2sgPSBuZXh0VGljaztcblxuLyoqXG4gKiBDb250cm9scyB3aGV0aGVyIG9yIG5vdCBsb25nIHN0YWNrIHRyYWNlcyB3aWxsIGJlIG9uXG4gKi9cblEubG9uZ1N0YWNrU3VwcG9ydCA9IGZhbHNlO1xuXG4vKipcbiAqIFRoZSBjb3VudGVyIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBzdG9wcGluZyBwb2ludCBmb3IgYnVpbGRpbmdcbiAqIGxvbmcgc3RhY2sgdHJhY2VzLiBJbiBtYWtlU3RhY2tUcmFjZUxvbmcgd2Ugd2FsayBiYWNrd2FyZHMgdGhyb3VnaFxuICogdGhlIGxpbmtlZCBsaXN0IG9mIHByb21pc2VzLCBvbmx5IHN0YWNrcyB3aGljaCB3ZXJlIGNyZWF0ZWQgYmVmb3JlXG4gKiB0aGUgcmVqZWN0aW9uIGFyZSBjb25jYXRlbmF0ZWQuXG4gKi9cbnZhciBsb25nU3RhY2tDb3VudGVyID0gMTtcblxuLy8gZW5hYmxlIGxvbmcgc3RhY2tzIGlmIFFfREVCVUcgaXMgc2V0XG5pZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgcHJvY2VzcyAmJiBwcm9jZXNzLmVudiAmJiBwcm9jZXNzLmVudi5RX0RFQlVHKSB7XG4gICAgUS5sb25nU3RhY2tTdXBwb3J0ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEge3Byb21pc2UsIHJlc29sdmUsIHJlamVjdH0gb2JqZWN0LlxuICpcbiAqIGByZXNvbHZlYCBpcyBhIGNhbGxiYWNrIHRvIGludm9rZSB3aXRoIGEgbW9yZSByZXNvbHZlZCB2YWx1ZSBmb3IgdGhlXG4gKiBwcm9taXNlLiBUbyBmdWxmaWxsIHRoZSBwcm9taXNlLCBpbnZva2UgYHJlc29sdmVgIHdpdGggYW55IHZhbHVlIHRoYXQgaXNcbiAqIG5vdCBhIHRoZW5hYmxlLiBUbyByZWplY3QgdGhlIHByb21pc2UsIGludm9rZSBgcmVzb2x2ZWAgd2l0aCBhIHJlamVjdGVkXG4gKiB0aGVuYWJsZSwgb3IgaW52b2tlIGByZWplY3RgIHdpdGggdGhlIHJlYXNvbiBkaXJlY3RseS4gVG8gcmVzb2x2ZSB0aGVcbiAqIHByb21pc2UgdG8gYW5vdGhlciB0aGVuYWJsZSwgdGh1cyBwdXR0aW5nIGl0IGluIHRoZSBzYW1lIHN0YXRlLCBpbnZva2VcbiAqIGByZXNvbHZlYCB3aXRoIHRoYXQgb3RoZXIgdGhlbmFibGUuXG4gKi9cblEuZGVmZXIgPSBkZWZlcjtcbmZ1bmN0aW9uIGRlZmVyKCkge1xuICAgIC8vIGlmIFwibWVzc2FnZXNcIiBpcyBhbiBcIkFycmF5XCIsIHRoYXQgaW5kaWNhdGVzIHRoYXQgdGhlIHByb21pc2UgaGFzIG5vdCB5ZXRcbiAgICAvLyBiZWVuIHJlc29sdmVkLiAgSWYgaXQgaXMgXCJ1bmRlZmluZWRcIiwgaXQgaGFzIGJlZW4gcmVzb2x2ZWQuICBFYWNoXG4gICAgLy8gZWxlbWVudCBvZiB0aGUgbWVzc2FnZXMgYXJyYXkgaXMgaXRzZWxmIGFuIGFycmF5IG9mIGNvbXBsZXRlIGFyZ3VtZW50cyB0b1xuICAgIC8vIGZvcndhcmQgdG8gdGhlIHJlc29sdmVkIHByb21pc2UuICBXZSBjb2VyY2UgdGhlIHJlc29sdXRpb24gdmFsdWUgdG8gYVxuICAgIC8vIHByb21pc2UgdXNpbmcgdGhlIGByZXNvbHZlYCBmdW5jdGlvbiBiZWNhdXNlIGl0IGhhbmRsZXMgYm90aCBmdWxseVxuICAgIC8vIG5vbi10aGVuYWJsZSB2YWx1ZXMgYW5kIG90aGVyIHRoZW5hYmxlcyBncmFjZWZ1bGx5LlxuICAgIHZhciBtZXNzYWdlcyA9IFtdLCBwcm9ncmVzc0xpc3RlbmVycyA9IFtdLCByZXNvbHZlZFByb21pc2U7XG5cbiAgICB2YXIgZGVmZXJyZWQgPSBvYmplY3RfY3JlYXRlKGRlZmVyLnByb3RvdHlwZSk7XG4gICAgdmFyIHByb21pc2UgPSBvYmplY3RfY3JlYXRlKFByb21pc2UucHJvdG90eXBlKTtcblxuICAgIHByb21pc2UucHJvbWlzZURpc3BhdGNoID0gZnVuY3Rpb24gKHJlc29sdmUsIG9wLCBvcGVyYW5kcykge1xuICAgICAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChtZXNzYWdlcykge1xuICAgICAgICAgICAgbWVzc2FnZXMucHVzaChhcmdzKTtcbiAgICAgICAgICAgIGlmIChvcCA9PT0gXCJ3aGVuXCIgJiYgb3BlcmFuZHNbMV0pIHsgLy8gcHJvZ3Jlc3Mgb3BlcmFuZFxuICAgICAgICAgICAgICAgIHByb2dyZXNzTGlzdGVuZXJzLnB1c2gob3BlcmFuZHNbMV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZWRQcm9taXNlLnByb21pc2VEaXNwYXRjaC5hcHBseShyZXNvbHZlZFByb21pc2UsIGFyZ3MpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gWFhYIGRlcHJlY2F0ZWRcbiAgICBwcm9taXNlLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtZXNzYWdlcykge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5lYXJlclZhbHVlID0gbmVhcmVyKHJlc29sdmVkUHJvbWlzZSk7XG4gICAgICAgIGlmIChpc1Byb21pc2UobmVhcmVyVmFsdWUpKSB7XG4gICAgICAgICAgICByZXNvbHZlZFByb21pc2UgPSBuZWFyZXJWYWx1ZTsgLy8gc2hvcnRlbiBjaGFpblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZWFyZXJWYWx1ZTtcbiAgICB9O1xuXG4gICAgcHJvbWlzZS5pbnNwZWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwicGVuZGluZ1wiIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc29sdmVkUHJvbWlzZS5pbnNwZWN0KCk7XG4gICAgfTtcblxuICAgIGlmIChRLmxvbmdTdGFja1N1cHBvcnQgJiYgaGFzU3RhY2tzKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgLy8gTk9URTogZG9uJ3QgdHJ5IHRvIHVzZSBgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2VgIG9yIHRyYW5zZmVyIHRoZVxuICAgICAgICAgICAgLy8gYWNjZXNzb3IgYXJvdW5kOyB0aGF0IGNhdXNlcyBtZW1vcnkgbGVha3MgYXMgcGVyIEdILTExMS4gSnVzdFxuICAgICAgICAgICAgLy8gcmVpZnkgdGhlIHN0YWNrIHRyYWNlIGFzIGEgc3RyaW5nIEFTQVAuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gQXQgdGhlIHNhbWUgdGltZSwgY3V0IG9mZiB0aGUgZmlyc3QgbGluZTsgaXQncyBhbHdheXMganVzdFxuICAgICAgICAgICAgLy8gXCJbb2JqZWN0IFByb21pc2VdXFxuXCIsIGFzIHBlciB0aGUgYHRvU3RyaW5nYC5cbiAgICAgICAgICAgIHByb21pc2Uuc3RhY2sgPSBlLnN0YWNrLnN1YnN0cmluZyhlLnN0YWNrLmluZGV4T2YoXCJcXG5cIikgKyAxKTtcbiAgICAgICAgICAgIHByb21pc2Uuc3RhY2tDb3VudGVyID0gbG9uZ1N0YWNrQ291bnRlcisrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTk9URTogd2UgZG8gdGhlIGNoZWNrcyBmb3IgYHJlc29sdmVkUHJvbWlzZWAgaW4gZWFjaCBtZXRob2QsIGluc3RlYWQgb2ZcbiAgICAvLyBjb25zb2xpZGF0aW5nIHRoZW0gaW50byBgYmVjb21lYCwgc2luY2Ugb3RoZXJ3aXNlIHdlJ2QgY3JlYXRlIG5ld1xuICAgIC8vIHByb21pc2VzIHdpdGggdGhlIGxpbmVzIGBiZWNvbWUod2hhdGV2ZXIodmFsdWUpKWAuIFNlZSBlLmcuIEdILTI1Mi5cblxuICAgIGZ1bmN0aW9uIGJlY29tZShuZXdQcm9taXNlKSB7XG4gICAgICAgIHJlc29sdmVkUHJvbWlzZSA9IG5ld1Byb21pc2U7XG5cbiAgICAgICAgaWYgKFEubG9uZ1N0YWNrU3VwcG9ydCAmJiBoYXNTdGFja3MpIHtcbiAgICAgICAgICAgIC8vIE9ubHkgaG9sZCBhIHJlZmVyZW5jZSB0byB0aGUgbmV3IHByb21pc2UgaWYgbG9uZyBzdGFja3NcbiAgICAgICAgICAgIC8vIGFyZSBlbmFibGVkIHRvIHJlZHVjZSBtZW1vcnkgdXNhZ2VcbiAgICAgICAgICAgIHByb21pc2Uuc291cmNlID0gbmV3UHJvbWlzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFycmF5X3JlZHVjZShtZXNzYWdlcywgZnVuY3Rpb24gKHVuZGVmaW5lZCwgbWVzc2FnZSkge1xuICAgICAgICAgICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbmV3UHJvbWlzZS5wcm9taXNlRGlzcGF0Y2guYXBwbHkobmV3UHJvbWlzZSwgbWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdm9pZCAwKTtcblxuICAgICAgICBtZXNzYWdlcyA9IHZvaWQgMDtcbiAgICAgICAgcHJvZ3Jlc3NMaXN0ZW5lcnMgPSB2b2lkIDA7XG4gICAgfVxuXG4gICAgZGVmZXJyZWQucHJvbWlzZSA9IHByb21pc2U7XG4gICAgZGVmZXJyZWQucmVzb2x2ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAocmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiZWNvbWUoUSh2YWx1ZSkpO1xuICAgIH07XG5cbiAgICBkZWZlcnJlZC5mdWxmaWxsID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmIChyZXNvbHZlZFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJlY29tZShmdWxmaWxsKHZhbHVlKSk7XG4gICAgfTtcbiAgICBkZWZlcnJlZC5yZWplY3QgPSBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIGlmIChyZXNvbHZlZFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJlY29tZShyZWplY3QocmVhc29uKSk7XG4gICAgfTtcbiAgICBkZWZlcnJlZC5ub3RpZnkgPSBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcbiAgICAgICAgaWYgKHJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYXJyYXlfcmVkdWNlKHByb2dyZXNzTGlzdGVuZXJzLCBmdW5jdGlvbiAodW5kZWZpbmVkLCBwcm9ncmVzc0xpc3RlbmVyKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0xpc3RlbmVyKHByb2dyZXNzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB2b2lkIDApO1xuICAgIH07XG5cbiAgICByZXR1cm4gZGVmZXJyZWQ7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIE5vZGUtc3R5bGUgY2FsbGJhY2sgdGhhdCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBkZWZlcnJlZFxuICogcHJvbWlzZS5cbiAqIEByZXR1cm5zIGEgbm9kZWJhY2tcbiAqL1xuZGVmZXIucHJvdG90eXBlLm1ha2VOb2RlUmVzb2x2ZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHJldHVybiBmdW5jdGlvbiAoZXJyb3IsIHZhbHVlKSB7XG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgc2VsZi5yZWplY3QoZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XG4gICAgICAgICAgICBzZWxmLnJlc29sdmUoYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZWxmLnJlc29sdmUodmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHJlc29sdmVyIHtGdW5jdGlvbn0gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgbm90aGluZyBhbmQgYWNjZXB0c1xuICogdGhlIHJlc29sdmUsIHJlamVjdCwgYW5kIG5vdGlmeSBmdW5jdGlvbnMgZm9yIGEgZGVmZXJyZWQuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCBtYXkgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgZ2l2ZW4gcmVzb2x2ZSBhbmQgcmVqZWN0XG4gKiBmdW5jdGlvbnMsIG9yIHJlamVjdGVkIGJ5IGEgdGhyb3duIGV4Y2VwdGlvbiBpbiByZXNvbHZlclxuICovXG5RLlByb21pc2UgPSBwcm9taXNlOyAvLyBFUzZcblEucHJvbWlzZSA9IHByb21pc2U7XG5mdW5jdGlvbiBwcm9taXNlKHJlc29sdmVyKSB7XG4gICAgaWYgKHR5cGVvZiByZXNvbHZlciAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb24uXCIpO1xuICAgIH1cbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIHRyeSB7XG4gICAgICAgIHJlc29sdmVyKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCwgZGVmZXJyZWQubm90aWZ5KTtcbiAgICB9IGNhdGNoIChyZWFzb24pIHtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlYXNvbik7XG4gICAgfVxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG5wcm9taXNlLnJhY2UgPSByYWNlOyAvLyBFUzZcbnByb21pc2UuYWxsID0gYWxsOyAvLyBFUzZcbnByb21pc2UucmVqZWN0ID0gcmVqZWN0OyAvLyBFUzZcbnByb21pc2UucmVzb2x2ZSA9IFE7IC8vIEVTNlxuXG4vLyBYWFggZXhwZXJpbWVudGFsLiAgVGhpcyBtZXRob2QgaXMgYSB3YXkgdG8gZGVub3RlIHRoYXQgYSBsb2NhbCB2YWx1ZSBpc1xuLy8gc2VyaWFsaXphYmxlIGFuZCBzaG91bGQgYmUgaW1tZWRpYXRlbHkgZGlzcGF0Y2hlZCB0byBhIHJlbW90ZSB1cG9uIHJlcXVlc3QsXG4vLyBpbnN0ZWFkIG9mIHBhc3NpbmcgYSByZWZlcmVuY2UuXG5RLnBhc3NCeUNvcHkgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgLy9mcmVlemUob2JqZWN0KTtcbiAgICAvL3Bhc3NCeUNvcGllcy5zZXQob2JqZWN0LCB0cnVlKTtcbiAgICByZXR1cm4gb2JqZWN0O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUucGFzc0J5Q29weSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvL2ZyZWV6ZShvYmplY3QpO1xuICAgIC8vcGFzc0J5Q29waWVzLnNldChvYmplY3QsIHRydWUpO1xuICAgIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBJZiB0d28gcHJvbWlzZXMgZXZlbnR1YWxseSBmdWxmaWxsIHRvIHRoZSBzYW1lIHZhbHVlLCBwcm9taXNlcyB0aGF0IHZhbHVlLFxuICogYnV0IG90aGVyd2lzZSByZWplY3RzLlxuICogQHBhcmFtIHgge0FueSp9XG4gKiBAcGFyYW0geSB7QW55Kn1cbiAqIEByZXR1cm5zIHtBbnkqfSBhIHByb21pc2UgZm9yIHggYW5kIHkgaWYgdGhleSBhcmUgdGhlIHNhbWUsIGJ1dCBhIHJlamVjdGlvblxuICogb3RoZXJ3aXNlLlxuICpcbiAqL1xuUS5qb2luID0gZnVuY3Rpb24gKHgsIHkpIHtcbiAgICByZXR1cm4gUSh4KS5qb2luKHkpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuam9pbiA9IGZ1bmN0aW9uICh0aGF0KSB7XG4gICAgcmV0dXJuIFEoW3RoaXMsIHRoYXRdKS5zcHJlYWQoZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgaWYgKHggPT09IHkpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFwiPT09XCIgc2hvdWxkIGJlIE9iamVjdC5pcyBvciBlcXVpdlxuICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRIGNhbid0IGpvaW46IG5vdCB0aGUgc2FtZTogXCIgKyB4ICsgXCIgXCIgKyB5KTtcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIGZpcnN0IG9mIGFuIGFycmF5IG9mIHByb21pc2VzIHRvIGJlY29tZSBzZXR0bGVkLlxuICogQHBhcmFtIGFuc3dlcnMge0FycmF5W0FueSpdfSBwcm9taXNlcyB0byByYWNlXG4gKiBAcmV0dXJucyB7QW55Kn0gdGhlIGZpcnN0IHByb21pc2UgdG8gYmUgc2V0dGxlZFxuICovXG5RLnJhY2UgPSByYWNlO1xuZnVuY3Rpb24gcmFjZShhbnN3ZXJQcykge1xuICAgIHJldHVybiBwcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gU3dpdGNoIHRvIHRoaXMgb25jZSB3ZSBjYW4gYXNzdW1lIGF0IGxlYXN0IEVTNVxuICAgICAgICAvLyBhbnN3ZXJQcy5mb3JFYWNoKGZ1bmN0aW9uIChhbnN3ZXJQKSB7XG4gICAgICAgIC8vICAgICBRKGFuc3dlclApLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIFVzZSB0aGlzIGluIHRoZSBtZWFudGltZVxuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYW5zd2VyUHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIFEoYW5zd2VyUHNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5yYWNlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnRoZW4oUS5yYWNlKTtcbn07XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIFByb21pc2Ugd2l0aCBhIHByb21pc2UgZGVzY3JpcHRvciBvYmplY3QgYW5kIG9wdGlvbmFsIGZhbGxiYWNrXG4gKiBmdW5jdGlvbi4gIFRoZSBkZXNjcmlwdG9yIGNvbnRhaW5zIG1ldGhvZHMgbGlrZSB3aGVuKHJlamVjdGVkKSwgZ2V0KG5hbWUpLFxuICogc2V0KG5hbWUsIHZhbHVlKSwgcG9zdChuYW1lLCBhcmdzKSwgYW5kIGRlbGV0ZShuYW1lKSwgd2hpY2ggYWxsXG4gKiByZXR1cm4gZWl0aGVyIGEgdmFsdWUsIGEgcHJvbWlzZSBmb3IgYSB2YWx1ZSwgb3IgYSByZWplY3Rpb24uICBUaGUgZmFsbGJhY2tcbiAqIGFjY2VwdHMgdGhlIG9wZXJhdGlvbiBuYW1lLCBhIHJlc29sdmVyLCBhbmQgYW55IGZ1cnRoZXIgYXJndW1lbnRzIHRoYXQgd291bGRcbiAqIGhhdmUgYmVlbiBmb3J3YXJkZWQgdG8gdGhlIGFwcHJvcHJpYXRlIG1ldGhvZCBhYm92ZSBoYWQgYSBtZXRob2QgYmVlblxuICogcHJvdmlkZWQgd2l0aCB0aGUgcHJvcGVyIG5hbWUuICBUaGUgQVBJIG1ha2VzIG5vIGd1YXJhbnRlZXMgYWJvdXQgdGhlIG5hdHVyZVxuICogb2YgdGhlIHJldHVybmVkIG9iamVjdCwgYXBhcnQgZnJvbSB0aGF0IGl0IGlzIHVzYWJsZSB3aGVyZWV2ZXIgcHJvbWlzZXMgYXJlXG4gKiBib3VnaHQgYW5kIHNvbGQuXG4gKi9cblEubWFrZVByb21pc2UgPSBQcm9taXNlO1xuZnVuY3Rpb24gUHJvbWlzZShkZXNjcmlwdG9yLCBmYWxsYmFjaywgaW5zcGVjdCkge1xuICAgIGlmIChmYWxsYmFjayA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGZhbGxiYWNrID0gZnVuY3Rpb24gKG9wKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBcIlByb21pc2UgZG9lcyBub3Qgc3VwcG9ydCBvcGVyYXRpb246IFwiICsgb3BcbiAgICAgICAgICAgICkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBpZiAoaW5zcGVjdCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIGluc3BlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4ge3N0YXRlOiBcInVua25vd25cIn07XG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBvYmplY3RfY3JlYXRlKFByb21pc2UucHJvdG90eXBlKTtcblxuICAgIHByb21pc2UucHJvbWlzZURpc3BhdGNoID0gZnVuY3Rpb24gKHJlc29sdmUsIG9wLCBhcmdzKSB7XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoZGVzY3JpcHRvcltvcF0pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBkZXNjcmlwdG9yW29wXS5hcHBseShwcm9taXNlLCBhcmdzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gZmFsbGJhY2suY2FsbChwcm9taXNlLCBvcCwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHJlc29sdmUpIHtcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcm9taXNlLmluc3BlY3QgPSBpbnNwZWN0O1xuXG4gICAgLy8gWFhYIGRlcHJlY2F0ZWQgYHZhbHVlT2ZgIGFuZCBgZXhjZXB0aW9uYCBzdXBwb3J0XG4gICAgaWYgKGluc3BlY3QpIHtcbiAgICAgICAgdmFyIGluc3BlY3RlZCA9IGluc3BlY3QoKTtcbiAgICAgICAgaWYgKGluc3BlY3RlZC5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiKSB7XG4gICAgICAgICAgICBwcm9taXNlLmV4Y2VwdGlvbiA9IGluc3BlY3RlZC5yZWFzb247XG4gICAgICAgIH1cblxuICAgICAgICBwcm9taXNlLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaW5zcGVjdGVkID0gaW5zcGVjdCgpO1xuICAgICAgICAgICAgaWYgKGluc3BlY3RlZC5zdGF0ZSA9PT0gXCJwZW5kaW5nXCIgfHxcbiAgICAgICAgICAgICAgICBpbnNwZWN0ZWQuc3RhdGUgPT09IFwicmVqZWN0ZWRcIikge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGluc3BlY3RlZC52YWx1ZTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFwiW29iamVjdCBQcm9taXNlXVwiO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzc2VkKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdmFyIGRvbmUgPSBmYWxzZTsgICAvLyBlbnN1cmUgdGhlIHVudHJ1c3RlZCBwcm9taXNlIG1ha2VzIGF0IG1vc3QgYVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2luZ2xlIGNhbGwgdG8gb25lIG9mIHRoZSBjYWxsYmFja3NcblxuICAgIGZ1bmN0aW9uIF9mdWxmaWxsZWQodmFsdWUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgZnVsZmlsbGVkID09PSBcImZ1bmN0aW9uXCIgPyBmdWxmaWxsZWQodmFsdWUpIDogdmFsdWU7XG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX3JlamVjdGVkKGV4Y2VwdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIHJlamVjdGVkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIG1ha2VTdGFja1RyYWNlTG9uZyhleGNlcHRpb24sIHNlbGYpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0ZWQoZXhjZXB0aW9uKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKG5ld0V4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3RXhjZXB0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gX3Byb2dyZXNzZWQodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBwcm9ncmVzc2VkID09PSBcImZ1bmN0aW9uXCIgPyBwcm9ncmVzc2VkKHZhbHVlKSA6IHZhbHVlO1xuICAgIH1cblxuICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnByb21pc2VEaXNwYXRjaChmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX2Z1bGZpbGxlZCh2YWx1ZSkpO1xuICAgICAgICB9LCBcIndoZW5cIiwgW2Z1bmN0aW9uIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9uZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoX3JlamVjdGVkKGV4Y2VwdGlvbikpO1xuICAgICAgICB9XSk7XG4gICAgfSk7XG5cbiAgICAvLyBQcm9ncmVzcyBwcm9wYWdhdG9yIG5lZWQgdG8gYmUgYXR0YWNoZWQgaW4gdGhlIGN1cnJlbnQgdGljay5cbiAgICBzZWxmLnByb21pc2VEaXNwYXRjaCh2b2lkIDAsIFwid2hlblwiLCBbdm9pZCAwLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdmFyIG5ld1ZhbHVlO1xuICAgICAgICB2YXIgdGhyZXcgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIG5ld1ZhbHVlID0gX3Byb2dyZXNzZWQodmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aHJldyA9IHRydWU7XG4gICAgICAgICAgICBpZiAoUS5vbmVycm9yKSB7XG4gICAgICAgICAgICAgICAgUS5vbmVycm9yKGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aHJldykge1xuICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KG5ld1ZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuUS50YXAgPSBmdW5jdGlvbiAocHJvbWlzZSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gUShwcm9taXNlKS50YXAoY2FsbGJhY2spO1xufTtcblxuLyoqXG4gKiBXb3JrcyBhbG1vc3QgbGlrZSBcImZpbmFsbHlcIiwgYnV0IG5vdCBjYWxsZWQgZm9yIHJlamVjdGlvbnMuXG4gKiBPcmlnaW5hbCByZXNvbHV0aW9uIHZhbHVlIGlzIHBhc3NlZCB0aHJvdWdoIGNhbGxiYWNrIHVuYWZmZWN0ZWQuXG4gKiBDYWxsYmFjayBtYXkgcmV0dXJuIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmUgYXdhaXRlZCBmb3IuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICogQHJldHVybnMge1EuUHJvbWlzZX1cbiAqIEBleGFtcGxlXG4gKiBkb1NvbWV0aGluZygpXG4gKiAgIC50aGVuKC4uLilcbiAqICAgLnRhcChjb25zb2xlLmxvZylcbiAqICAgLnRoZW4oLi4uKTtcbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUudGFwID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2sgPSBRKGNhbGxiYWNrKTtcblxuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjay5mY2FsbCh2YWx1ZSkudGhlblJlc29sdmUodmFsdWUpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBSZWdpc3RlcnMgYW4gb2JzZXJ2ZXIgb24gYSBwcm9taXNlLlxuICpcbiAqIEd1YXJhbnRlZXM6XG4gKlxuICogMS4gdGhhdCBmdWxmaWxsZWQgYW5kIHJlamVjdGVkIHdpbGwgYmUgY2FsbGVkIG9ubHkgb25jZS5cbiAqIDIuIHRoYXQgZWl0aGVyIHRoZSBmdWxmaWxsZWQgY2FsbGJhY2sgb3IgdGhlIHJlamVjdGVkIGNhbGxiYWNrIHdpbGwgYmVcbiAqICAgIGNhbGxlZCwgYnV0IG5vdCBib3RoLlxuICogMy4gdGhhdCBmdWxmaWxsZWQgYW5kIHJlamVjdGVkIHdpbGwgbm90IGJlIGNhbGxlZCBpbiB0aGlzIHR1cm4uXG4gKlxuICogQHBhcmFtIHZhbHVlICAgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIHRvIG9ic2VydmVcbiAqIEBwYXJhbSBmdWxmaWxsZWQgIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSBmdWxmaWxsZWQgdmFsdWVcbiAqIEBwYXJhbSByZWplY3RlZCAgIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCB3aXRoIHRoZSByZWplY3Rpb24gZXhjZXB0aW9uXG4gKiBAcGFyYW0gcHJvZ3Jlc3NlZCBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYW55IHByb2dyZXNzIG5vdGlmaWNhdGlvbnNcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZSBmcm9tIHRoZSBpbnZva2VkIGNhbGxiYWNrXG4gKi9cblEud2hlbiA9IHdoZW47XG5mdW5jdGlvbiB3aGVuKHZhbHVlLCBmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzc2VkKSB7XG4gICAgcmV0dXJuIFEodmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3NlZCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnRoZW5SZXNvbHZlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSk7XG59O1xuXG5RLnRoZW5SZXNvbHZlID0gZnVuY3Rpb24gKHByb21pc2UsIHZhbHVlKSB7XG4gICAgcmV0dXJuIFEocHJvbWlzZSkudGhlblJlc29sdmUodmFsdWUpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUudGhlblJlamVjdCA9IGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICgpIHsgdGhyb3cgcmVhc29uOyB9KTtcbn07XG5cblEudGhlblJlamVjdCA9IGZ1bmN0aW9uIChwcm9taXNlLCByZWFzb24pIHtcbiAgICByZXR1cm4gUShwcm9taXNlKS50aGVuUmVqZWN0KHJlYXNvbik7XG59O1xuXG4vKipcbiAqIElmIGFuIG9iamVjdCBpcyBub3QgYSBwcm9taXNlLCBpdCBpcyBhcyBcIm5lYXJcIiBhcyBwb3NzaWJsZS5cbiAqIElmIGEgcHJvbWlzZSBpcyByZWplY3RlZCwgaXQgaXMgYXMgXCJuZWFyXCIgYXMgcG9zc2libGUgdG9vLlxuICogSWYgaXTigJlzIGEgZnVsZmlsbGVkIHByb21pc2UsIHRoZSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZWFyZXIuXG4gKiBJZiBpdOKAmXMgYSBkZWZlcnJlZCBwcm9taXNlIGFuZCB0aGUgZGVmZXJyZWQgaGFzIGJlZW4gcmVzb2x2ZWQsIHRoZVxuICogcmVzb2x1dGlvbiBpcyBcIm5lYXJlclwiLlxuICogQHBhcmFtIG9iamVjdFxuICogQHJldHVybnMgbW9zdCByZXNvbHZlZCAobmVhcmVzdCkgZm9ybSBvZiB0aGUgb2JqZWN0XG4gKi9cblxuLy8gWFhYIHNob3VsZCB3ZSByZS1kbyB0aGlzP1xuUS5uZWFyZXIgPSBuZWFyZXI7XG5mdW5jdGlvbiBuZWFyZXIodmFsdWUpIHtcbiAgICBpZiAoaXNQcm9taXNlKHZhbHVlKSkge1xuICAgICAgICB2YXIgaW5zcGVjdGVkID0gdmFsdWUuaW5zcGVjdCgpO1xuICAgICAgICBpZiAoaW5zcGVjdGVkLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5zcGVjdGVkLnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBwcm9taXNlLlxuICogT3RoZXJ3aXNlIGl0IGlzIGEgZnVsZmlsbGVkIHZhbHVlLlxuICovXG5RLmlzUHJvbWlzZSA9IGlzUHJvbWlzZTtcbmZ1bmN0aW9uIGlzUHJvbWlzZShvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgUHJvbWlzZTtcbn1cblxuUS5pc1Byb21pc2VBbGlrZSA9IGlzUHJvbWlzZUFsaWtlO1xuZnVuY3Rpb24gaXNQcm9taXNlQWxpa2Uob2JqZWN0KSB7XG4gICAgcmV0dXJuIGlzT2JqZWN0KG9iamVjdCkgJiYgdHlwZW9mIG9iamVjdC50aGVuID09PSBcImZ1bmN0aW9uXCI7XG59XG5cbi8qKlxuICogQHJldHVybnMgd2hldGhlciB0aGUgZ2l2ZW4gb2JqZWN0IGlzIGEgcGVuZGluZyBwcm9taXNlLCBtZWFuaW5nIG5vdFxuICogZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuICovXG5RLmlzUGVuZGluZyA9IGlzUGVuZGluZztcbmZ1bmN0aW9uIGlzUGVuZGluZyhvYmplY3QpIHtcbiAgICByZXR1cm4gaXNQcm9taXNlKG9iamVjdCkgJiYgb2JqZWN0Lmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJwZW5kaW5nXCI7XG59XG5cblByb21pc2UucHJvdG90eXBlLmlzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNwZWN0KCkuc3RhdGUgPT09IFwicGVuZGluZ1wiO1xufTtcblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSB2YWx1ZSBvciBmdWxmaWxsZWRcbiAqIHByb21pc2UuXG4gKi9cblEuaXNGdWxmaWxsZWQgPSBpc0Z1bGZpbGxlZDtcbmZ1bmN0aW9uIGlzRnVsZmlsbGVkKG9iamVjdCkge1xuICAgIHJldHVybiAhaXNQcm9taXNlKG9iamVjdCkgfHwgb2JqZWN0Lmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJmdWxmaWxsZWRcIjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuaXNGdWxmaWxsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zcGVjdCgpLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiO1xufTtcblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSByZWplY3RlZCBwcm9taXNlLlxuICovXG5RLmlzUmVqZWN0ZWQgPSBpc1JlamVjdGVkO1xuZnVuY3Rpb24gaXNSZWplY3RlZChvYmplY3QpIHtcbiAgICByZXR1cm4gaXNQcm9taXNlKG9iamVjdCkgJiYgb2JqZWN0Lmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5pc1JlamVjdGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiO1xufTtcblxuLy8vLyBCRUdJTiBVTkhBTkRMRUQgUkVKRUNUSU9OIFRSQUNLSU5HXG5cbi8vIFRoaXMgcHJvbWlzZSBsaWJyYXJ5IGNvbnN1bWVzIGV4Y2VwdGlvbnMgdGhyb3duIGluIGhhbmRsZXJzIHNvIHRoZXkgY2FuIGJlXG4vLyBoYW5kbGVkIGJ5IGEgc3Vic2VxdWVudCBwcm9taXNlLiAgVGhlIGV4Y2VwdGlvbnMgZ2V0IGFkZGVkIHRvIHRoaXMgYXJyYXkgd2hlblxuLy8gdGhleSBhcmUgY3JlYXRlZCwgYW5kIHJlbW92ZWQgd2hlbiB0aGV5IGFyZSBoYW5kbGVkLiAgTm90ZSB0aGF0IGluIEVTNiBvclxuLy8gc2hpbW1lZCBlbnZpcm9ubWVudHMsIHRoaXMgd291bGQgbmF0dXJhbGx5IGJlIGEgYFNldGAuXG52YXIgdW5oYW5kbGVkUmVhc29ucyA9IFtdO1xudmFyIHVuaGFuZGxlZFJlamVjdGlvbnMgPSBbXTtcbnZhciByZXBvcnRlZFVuaGFuZGxlZFJlamVjdGlvbnMgPSBbXTtcbnZhciB0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMgPSB0cnVlO1xuXG5mdW5jdGlvbiByZXNldFVuaGFuZGxlZFJlamVjdGlvbnMoKSB7XG4gICAgdW5oYW5kbGVkUmVhc29ucy5sZW5ndGggPSAwO1xuICAgIHVuaGFuZGxlZFJlamVjdGlvbnMubGVuZ3RoID0gMDtcblxuICAgIGlmICghdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gICAgICAgIHRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHRydWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB0cmFja1JlamVjdGlvbihwcm9taXNlLCByZWFzb24pIHtcbiAgICBpZiAoIXRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgcHJvY2Vzcy5lbWl0ID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgUS5uZXh0VGljay5ydW5BZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoYXJyYXlfaW5kZXhPZih1bmhhbmRsZWRSZWplY3Rpb25zLCBwcm9taXNlKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICBwcm9jZXNzLmVtaXQoXCJ1bmhhbmRsZWRSZWplY3Rpb25cIiwgcmVhc29uLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICByZXBvcnRlZFVuaGFuZGxlZFJlamVjdGlvbnMucHVzaChwcm9taXNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5wdXNoKHByb21pc2UpO1xuICAgIGlmIChyZWFzb24gJiYgdHlwZW9mIHJlYXNvbi5zdGFjayAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICB1bmhhbmRsZWRSZWFzb25zLnB1c2gocmVhc29uLnN0YWNrKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB1bmhhbmRsZWRSZWFzb25zLnB1c2goXCIobm8gc3RhY2spIFwiICsgcmVhc29uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVudHJhY2tSZWplY3Rpb24ocHJvbWlzZSkge1xuICAgIGlmICghdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgYXQgPSBhcnJheV9pbmRleE9mKHVuaGFuZGxlZFJlamVjdGlvbnMsIHByb21pc2UpO1xuICAgIGlmIChhdCAhPT0gLTEpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwcm9jZXNzLmVtaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgUS5uZXh0VGljay5ydW5BZnRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0UmVwb3J0ID0gYXJyYXlfaW5kZXhPZihyZXBvcnRlZFVuaGFuZGxlZFJlamVjdGlvbnMsIHByb21pc2UpO1xuICAgICAgICAgICAgICAgIGlmIChhdFJlcG9ydCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5lbWl0KFwicmVqZWN0aW9uSGFuZGxlZFwiLCB1bmhhbmRsZWRSZWFzb25zW2F0XSwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucy5zcGxpY2UoYXRSZXBvcnQsIDEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHVuaGFuZGxlZFJlamVjdGlvbnMuc3BsaWNlKGF0LCAxKTtcbiAgICAgICAgdW5oYW5kbGVkUmVhc29ucy5zcGxpY2UoYXQsIDEpO1xuICAgIH1cbn1cblxuUS5yZXNldFVuaGFuZGxlZFJlamVjdGlvbnMgPSByZXNldFVuaGFuZGxlZFJlamVjdGlvbnM7XG5cblEuZ2V0VW5oYW5kbGVkUmVhc29ucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBNYWtlIGEgY29weSBzbyB0aGF0IGNvbnN1bWVycyBjYW4ndCBpbnRlcmZlcmUgd2l0aCBvdXIgaW50ZXJuYWwgc3RhdGUuXG4gICAgcmV0dXJuIHVuaGFuZGxlZFJlYXNvbnMuc2xpY2UoKTtcbn07XG5cblEuc3RvcFVuaGFuZGxlZFJlamVjdGlvblRyYWNraW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucygpO1xuICAgIHRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucyA9IGZhbHNlO1xufTtcblxucmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG5cbi8vLy8gRU5EIFVOSEFORExFRCBSRUpFQ1RJT04gVFJBQ0tJTkdcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgcmVqZWN0ZWQgcHJvbWlzZS5cbiAqIEBwYXJhbSByZWFzb24gdmFsdWUgZGVzY3JpYmluZyB0aGUgZmFpbHVyZVxuICovXG5RLnJlamVjdCA9IHJlamVjdDtcbmZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcbiAgICB2YXIgcmVqZWN0aW9uID0gUHJvbWlzZSh7XG4gICAgICAgIFwid2hlblwiOiBmdW5jdGlvbiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICAgIC8vIG5vdGUgdGhhdCB0aGUgZXJyb3IgaGFzIGJlZW4gaGFuZGxlZFxuICAgICAgICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgdW50cmFja1JlamVjdGlvbih0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZWplY3RlZCA/IHJlamVjdGVkKHJlYXNvbikgOiB0aGlzO1xuICAgICAgICB9XG4gICAgfSwgZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sIGZ1bmN0aW9uIGluc3BlY3QoKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXRlOiBcInJlamVjdGVkXCIsIHJlYXNvbjogcmVhc29uIH07XG4gICAgfSk7XG5cbiAgICAvLyBOb3RlIHRoYXQgdGhlIHJlYXNvbiBoYXMgbm90IGJlZW4gaGFuZGxlZC5cbiAgICB0cmFja1JlamVjdGlvbihyZWplY3Rpb24sIHJlYXNvbik7XG5cbiAgICByZXR1cm4gcmVqZWN0aW9uO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBmdWxmaWxsZWQgcHJvbWlzZSBmb3IgYW4gaW1tZWRpYXRlIHJlZmVyZW5jZS5cbiAqIEBwYXJhbSB2YWx1ZSBpbW1lZGlhdGUgcmVmZXJlbmNlXG4gKi9cblEuZnVsZmlsbCA9IGZ1bGZpbGw7XG5mdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7XG4gICAgcmV0dXJuIFByb21pc2Uoe1xuICAgICAgICBcIndoZW5cIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlW25hbWVdO1xuICAgICAgICB9LFxuICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAobmFtZSwgcmhzKSB7XG4gICAgICAgICAgICB2YWx1ZVtuYW1lXSA9IHJocztcbiAgICAgICAgfSxcbiAgICAgICAgXCJkZWxldGVcIjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIGRlbGV0ZSB2YWx1ZVtuYW1lXTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJwb3N0XCI6IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7XG4gICAgICAgICAgICAvLyBNYXJrIE1pbGxlciBwcm9wb3NlcyB0aGF0IHBvc3Qgd2l0aCBubyBuYW1lIHNob3VsZCBhcHBseSBhXG4gICAgICAgICAgICAvLyBwcm9taXNlZCBmdW5jdGlvbi5cbiAgICAgICAgICAgIGlmIChuYW1lID09PSBudWxsIHx8IG5hbWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5hcHBseSh2b2lkIDAsIGFyZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVbbmFtZV0uYXBwbHkodmFsdWUsIGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImFwcGx5XCI6IGZ1bmN0aW9uICh0aGlzcCwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmFwcGx5KHRoaXNwLCBhcmdzKTtcbiAgICAgICAgfSxcbiAgICAgICAgXCJrZXlzXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmplY3Rfa2V5cyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9LCB2b2lkIDAsIGZ1bmN0aW9uIGluc3BlY3QoKSB7XG4gICAgICAgIHJldHVybiB7IHN0YXRlOiBcImZ1bGZpbGxlZFwiLCB2YWx1ZTogdmFsdWUgfTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGVuYWJsZXMgdG8gUSBwcm9taXNlcy5cbiAqIEBwYXJhbSBwcm9taXNlIHRoZW5hYmxlIHByb21pc2VcbiAqIEByZXR1cm5zIGEgUSBwcm9taXNlXG4gKi9cbmZ1bmN0aW9uIGNvZXJjZShwcm9taXNlKSB7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHByb21pc2UudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG4gICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBBbm5vdGF0ZXMgYW4gb2JqZWN0IHN1Y2ggdGhhdCBpdCB3aWxsIG5ldmVyIGJlXG4gKiB0cmFuc2ZlcnJlZCBhd2F5IGZyb20gdGhpcyBwcm9jZXNzIG92ZXIgYW55IHByb21pc2VcbiAqIGNvbW11bmljYXRpb24gY2hhbm5lbC5cbiAqIEBwYXJhbSBvYmplY3RcbiAqIEByZXR1cm5zIHByb21pc2UgYSB3cmFwcGluZyBvZiB0aGF0IG9iamVjdCB0aGF0XG4gKiBhZGRpdGlvbmFsbHkgcmVzcG9uZHMgdG8gdGhlIFwiaXNEZWZcIiBtZXNzYWdlXG4gKiB3aXRob3V0IGEgcmVqZWN0aW9uLlxuICovXG5RLm1hc3RlciA9IG1hc3RlcjtcbmZ1bmN0aW9uIG1hc3RlcihvYmplY3QpIHtcbiAgICByZXR1cm4gUHJvbWlzZSh7XG4gICAgICAgIFwiaXNEZWZcIjogZnVuY3Rpb24gKCkge31cbiAgICB9LCBmdW5jdGlvbiBmYWxsYmFjayhvcCwgYXJncykge1xuICAgICAgICByZXR1cm4gZGlzcGF0Y2gob2JqZWN0LCBvcCwgYXJncyk7XG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gUShvYmplY3QpLmluc3BlY3QoKTtcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBTcHJlYWRzIHRoZSB2YWx1ZXMgb2YgYSBwcm9taXNlZCBhcnJheSBvZiBhcmd1bWVudHMgaW50byB0aGVcbiAqIGZ1bGZpbGxtZW50IGNhbGxiYWNrLlxuICogQHBhcmFtIGZ1bGZpbGxlZCBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHZhcmlhZGljIGFyZ3VtZW50cyBmcm9tIHRoZVxuICogcHJvbWlzZWQgYXJyYXlcbiAqIEBwYXJhbSByZWplY3RlZCBjYWxsYmFjayB0aGF0IHJlY2VpdmVzIHRoZSBleGNlcHRpb24gaWYgdGhlIHByb21pc2VcbiAqIGlzIHJlamVjdGVkLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9yIHRocm93biBleGNlcHRpb24gb2ZcbiAqIGVpdGhlciBjYWxsYmFjay5cbiAqL1xuUS5zcHJlYWQgPSBzcHJlYWQ7XG5mdW5jdGlvbiBzcHJlYWQodmFsdWUsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gUSh2YWx1ZSkuc3ByZWFkKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5zcHJlYWQgPSBmdW5jdGlvbiAoZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLmFsbCgpLnRoZW4oZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgICAgIHJldHVybiBmdWxmaWxsZWQuYXBwbHkodm9pZCAwLCBhcnJheSk7XG4gICAgfSwgcmVqZWN0ZWQpO1xufTtcblxuLyoqXG4gKiBUaGUgYXN5bmMgZnVuY3Rpb24gaXMgYSBkZWNvcmF0b3IgZm9yIGdlbmVyYXRvciBmdW5jdGlvbnMsIHR1cm5pbmdcbiAqIHRoZW0gaW50byBhc3luY2hyb25vdXMgZ2VuZXJhdG9ycy4gIEFsdGhvdWdoIGdlbmVyYXRvcnMgYXJlIG9ubHkgcGFydFxuICogb2YgdGhlIG5ld2VzdCBFQ01BU2NyaXB0IDYgZHJhZnRzLCB0aGlzIGNvZGUgZG9lcyBub3QgY2F1c2Ugc3ludGF4XG4gKiBlcnJvcnMgaW4gb2xkZXIgZW5naW5lcy4gIFRoaXMgY29kZSBzaG91bGQgY29udGludWUgdG8gd29yayBhbmQgd2lsbFxuICogaW4gZmFjdCBpbXByb3ZlIG92ZXIgdGltZSBhcyB0aGUgbGFuZ3VhZ2UgaW1wcm92ZXMuXG4gKlxuICogRVM2IGdlbmVyYXRvcnMgYXJlIGN1cnJlbnRseSBwYXJ0IG9mIFY4IHZlcnNpb24gMy4xOSB3aXRoIHRoZVxuICogLS1oYXJtb255LWdlbmVyYXRvcnMgcnVudGltZSBmbGFnIGVuYWJsZWQuICBTcGlkZXJNb25rZXkgaGFzIGhhZCB0aGVtXG4gKiBmb3IgbG9uZ2VyLCBidXQgdW5kZXIgYW4gb2xkZXIgUHl0aG9uLWluc3BpcmVkIGZvcm0uICBUaGlzIGZ1bmN0aW9uXG4gKiB3b3JrcyBvbiBib3RoIGtpbmRzIG9mIGdlbmVyYXRvcnMuXG4gKlxuICogRGVjb3JhdGVzIGEgZ2VuZXJhdG9yIGZ1bmN0aW9uIHN1Y2ggdGhhdDpcbiAqICAtIGl0IG1heSB5aWVsZCBwcm9taXNlc1xuICogIC0gZXhlY3V0aW9uIHdpbGwgY29udGludWUgd2hlbiB0aGF0IHByb21pc2UgaXMgZnVsZmlsbGVkXG4gKiAgLSB0aGUgdmFsdWUgb2YgdGhlIHlpZWxkIGV4cHJlc3Npb24gd2lsbCBiZSB0aGUgZnVsZmlsbGVkIHZhbHVlXG4gKiAgLSBpdCByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZSAod2hlbiB0aGUgZ2VuZXJhdG9yXG4gKiAgICBzdG9wcyBpdGVyYXRpbmcpXG4gKiAgLSB0aGUgZGVjb3JhdGVkIGZ1bmN0aW9uIHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKiAgICBvZiB0aGUgZ2VuZXJhdG9yIG9yIHRoZSBmaXJzdCByZWplY3RlZCBwcm9taXNlIGFtb25nIHRob3NlXG4gKiAgICB5aWVsZGVkLlxuICogIC0gaWYgYW4gZXJyb3IgaXMgdGhyb3duIGluIHRoZSBnZW5lcmF0b3IsIGl0IHByb3BhZ2F0ZXMgdGhyb3VnaFxuICogICAgZXZlcnkgZm9sbG93aW5nIHlpZWxkIHVudGlsIGl0IGlzIGNhdWdodCwgb3IgdW50aWwgaXQgZXNjYXBlc1xuICogICAgdGhlIGdlbmVyYXRvciBmdW5jdGlvbiBhbHRvZ2V0aGVyLCBhbmQgaXMgdHJhbnNsYXRlZCBpbnRvIGFcbiAqICAgIHJlamVjdGlvbiBmb3IgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlIGRlY29yYXRlZCBnZW5lcmF0b3IuXG4gKi9cblEuYXN5bmMgPSBhc3luYztcbmZ1bmN0aW9uIGFzeW5jKG1ha2VHZW5lcmF0b3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyB3aGVuIHZlcmIgaXMgXCJzZW5kXCIsIGFyZyBpcyBhIHZhbHVlXG4gICAgICAgIC8vIHdoZW4gdmVyYiBpcyBcInRocm93XCIsIGFyZyBpcyBhbiBleGNlcHRpb25cbiAgICAgICAgZnVuY3Rpb24gY29udGludWVyKHZlcmIsIGFyZykge1xuICAgICAgICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgICAgICAgLy8gVW50aWwgVjggMy4xOSAvIENocm9taXVtIDI5IGlzIHJlbGVhc2VkLCBTcGlkZXJNb25rZXkgaXMgdGhlIG9ubHlcbiAgICAgICAgICAgIC8vIGVuZ2luZSB0aGF0IGhhcyBhIGRlcGxveWVkIGJhc2Ugb2YgYnJvd3NlcnMgdGhhdCBzdXBwb3J0IGdlbmVyYXRvcnMuXG4gICAgICAgICAgICAvLyBIb3dldmVyLCBTTSdzIGdlbmVyYXRvcnMgdXNlIHRoZSBQeXRob24taW5zcGlyZWQgc2VtYW50aWNzIG9mXG4gICAgICAgICAgICAvLyBvdXRkYXRlZCBFUzYgZHJhZnRzLiAgV2Ugd291bGQgbGlrZSB0byBzdXBwb3J0IEVTNiwgYnV0IHdlJ2QgYWxzb1xuICAgICAgICAgICAgLy8gbGlrZSB0byBtYWtlIGl0IHBvc3NpYmxlIHRvIHVzZSBnZW5lcmF0b3JzIGluIGRlcGxveWVkIGJyb3dzZXJzLCBzb1xuICAgICAgICAgICAgLy8gd2UgYWxzbyBzdXBwb3J0IFB5dGhvbi1zdHlsZSBnZW5lcmF0b3JzLiAgQXQgc29tZSBwb2ludCB3ZSBjYW4gcmVtb3ZlXG4gICAgICAgICAgICAvLyB0aGlzIGJsb2NrLlxuXG4gICAgICAgICAgICBpZiAodHlwZW9mIFN0b3BJdGVyYXRpb24gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBFUzYgR2VuZXJhdG9yc1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGdlbmVyYXRvclt2ZXJiXShhcmcpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZG9uZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUShyZXN1bHQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aGVuKHJlc3VsdC52YWx1ZSwgY2FsbGJhY2ssIGVycmJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gU3BpZGVyTW9ua2V5IEdlbmVyYXRvcnNcbiAgICAgICAgICAgICAgICAvLyBGSVhNRTogUmVtb3ZlIHRoaXMgY2FzZSB3aGVuIFNNIGRvZXMgRVM2IGdlbmVyYXRvcnMuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2VuZXJhdG9yW3ZlcmJdKGFyZyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1N0b3BJdGVyYXRpb24oZXhjZXB0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFEoZXhjZXB0aW9uLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gd2hlbihyZXN1bHQsIGNhbGxiYWNrLCBlcnJiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgZ2VuZXJhdG9yID0gbWFrZUdlbmVyYXRvci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBjb250aW51ZXIuYmluZChjb250aW51ZXIsIFwibmV4dFwiKTtcbiAgICAgICAgdmFyIGVycmJhY2sgPSBjb250aW51ZXIuYmluZChjb250aW51ZXIsIFwidGhyb3dcIik7XG4gICAgICAgIHJldHVybiBjYWxsYmFjaygpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGhlIHNwYXduIGZ1bmN0aW9uIGlzIGEgc21hbGwgd3JhcHBlciBhcm91bmQgYXN5bmMgdGhhdCBpbW1lZGlhdGVseVxuICogY2FsbHMgdGhlIGdlbmVyYXRvciBhbmQgYWxzbyBlbmRzIHRoZSBwcm9taXNlIGNoYWluLCBzbyB0aGF0IGFueVxuICogdW5oYW5kbGVkIGVycm9ycyBhcmUgdGhyb3duIGluc3RlYWQgb2YgZm9yd2FyZGVkIHRvIHRoZSBlcnJvclxuICogaGFuZGxlci4gVGhpcyBpcyB1c2VmdWwgYmVjYXVzZSBpdCdzIGV4dHJlbWVseSBjb21tb24gdG8gcnVuXG4gKiBnZW5lcmF0b3JzIGF0IHRoZSB0b3AtbGV2ZWwgdG8gd29yayB3aXRoIGxpYnJhcmllcy5cbiAqL1xuUS5zcGF3biA9IHNwYXduO1xuZnVuY3Rpb24gc3Bhd24obWFrZUdlbmVyYXRvcikge1xuICAgIFEuZG9uZShRLmFzeW5jKG1ha2VHZW5lcmF0b3IpKCkpO1xufVxuXG4vLyBGSVhNRTogUmVtb3ZlIHRoaXMgaW50ZXJmYWNlIG9uY2UgRVM2IGdlbmVyYXRvcnMgYXJlIGluIFNwaWRlck1vbmtleS5cbi8qKlxuICogVGhyb3dzIGEgUmV0dXJuVmFsdWUgZXhjZXB0aW9uIHRvIHN0b3AgYW4gYXN5bmNocm9ub3VzIGdlbmVyYXRvci5cbiAqXG4gKiBUaGlzIGludGVyZmFjZSBpcyBhIHN0b3AtZ2FwIG1lYXN1cmUgdG8gc3VwcG9ydCBnZW5lcmF0b3IgcmV0dXJuXG4gKiB2YWx1ZXMgaW4gb2xkZXIgRmlyZWZveC9TcGlkZXJNb25rZXkuICBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgRVM2XG4gKiBnZW5lcmF0b3JzIGxpa2UgQ2hyb21pdW0gMjksIGp1c3QgdXNlIFwicmV0dXJuXCIgaW4geW91ciBnZW5lcmF0b3JcbiAqIGZ1bmN0aW9ucy5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgdGhlIHJldHVybiB2YWx1ZSBmb3IgdGhlIHN1cnJvdW5kaW5nIGdlbmVyYXRvclxuICogQHRocm93cyBSZXR1cm5WYWx1ZSBleGNlcHRpb24gd2l0aCB0aGUgdmFsdWUuXG4gKiBAZXhhbXBsZVxuICogLy8gRVM2IHN0eWxlXG4gKiBRLmFzeW5jKGZ1bmN0aW9uKiAoKSB7XG4gKiAgICAgIHZhciBmb28gPSB5aWVsZCBnZXRGb29Qcm9taXNlKCk7XG4gKiAgICAgIHZhciBiYXIgPSB5aWVsZCBnZXRCYXJQcm9taXNlKCk7XG4gKiAgICAgIHJldHVybiBmb28gKyBiYXI7XG4gKiB9KVxuICogLy8gT2xkZXIgU3BpZGVyTW9ua2V5IHN0eWxlXG4gKiBRLmFzeW5jKGZ1bmN0aW9uICgpIHtcbiAqICAgICAgdmFyIGZvbyA9IHlpZWxkIGdldEZvb1Byb21pc2UoKTtcbiAqICAgICAgdmFyIGJhciA9IHlpZWxkIGdldEJhclByb21pc2UoKTtcbiAqICAgICAgUS5yZXR1cm4oZm9vICsgYmFyKTtcbiAqIH0pXG4gKi9cblFbXCJyZXR1cm5cIl0gPSBfcmV0dXJuO1xuZnVuY3Rpb24gX3JldHVybih2YWx1ZSkge1xuICAgIHRocm93IG5ldyBRUmV0dXJuVmFsdWUodmFsdWUpO1xufVxuXG4vKipcbiAqIFRoZSBwcm9taXNlZCBmdW5jdGlvbiBkZWNvcmF0b3IgZW5zdXJlcyB0aGF0IGFueSBwcm9taXNlIGFyZ3VtZW50c1xuICogYXJlIHNldHRsZWQgYW5kIHBhc3NlZCBhcyB2YWx1ZXMgKGB0aGlzYCBpcyBhbHNvIHNldHRsZWQgYW5kIHBhc3NlZFxuICogYXMgYSB2YWx1ZSkuICBJdCB3aWxsIGFsc28gZW5zdXJlIHRoYXQgdGhlIHJlc3VsdCBvZiBhIGZ1bmN0aW9uIGlzXG4gKiBhbHdheXMgYSBwcm9taXNlLlxuICpcbiAqIEBleGFtcGxlXG4gKiB2YXIgYWRkID0gUS5wcm9taXNlZChmdW5jdGlvbiAoYSwgYikge1xuICogICAgIHJldHVybiBhICsgYjtcbiAqIH0pO1xuICogYWRkKFEoYSksIFEoQikpO1xuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrIFRoZSBmdW5jdGlvbiB0byBkZWNvcmF0ZVxuICogQHJldHVybnMge2Z1bmN0aW9ufSBhIGZ1bmN0aW9uIHRoYXQgaGFzIGJlZW4gZGVjb3JhdGVkLlxuICovXG5RLnByb21pc2VkID0gcHJvbWlzZWQ7XG5mdW5jdGlvbiBwcm9taXNlZChjYWxsYmFjaykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzcHJlYWQoW3RoaXMsIGFsbChhcmd1bWVudHMpXSwgZnVuY3Rpb24gKHNlbGYsIGFyZ3MpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseShzZWxmLCBhcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBzZW5kcyBhIG1lc3NhZ2UgdG8gYSB2YWx1ZSBpbiBhIGZ1dHVyZSB0dXJuXG4gKiBAcGFyYW0gb2JqZWN0KiB0aGUgcmVjaXBpZW50XG4gKiBAcGFyYW0gb3AgdGhlIG5hbWUgb2YgdGhlIG1lc3NhZ2Ugb3BlcmF0aW9uLCBlLmcuLCBcIndoZW5cIixcbiAqIEBwYXJhbSBhcmdzIGZ1cnRoZXIgYXJndW1lbnRzIHRvIGJlIGZvcndhcmRlZCB0byB0aGUgb3BlcmF0aW9uXG4gKiBAcmV0dXJucyByZXN1bHQge1Byb21pc2V9IGEgcHJvbWlzZSBmb3IgdGhlIHJlc3VsdCBvZiB0aGUgb3BlcmF0aW9uXG4gKi9cblEuZGlzcGF0Y2ggPSBkaXNwYXRjaDtcbmZ1bmN0aW9uIGRpc3BhdGNoKG9iamVjdCwgb3AsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKG9wLCBhcmdzKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuZGlzcGF0Y2ggPSBmdW5jdGlvbiAob3AsIGFyZ3MpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wcm9taXNlRGlzcGF0Y2goZGVmZXJyZWQucmVzb2x2ZSwgb3AsIGFyZ3MpO1xuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIHByb3BlcnR5IHRvIGdldFxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcHJvcGVydHkgdmFsdWVcbiAqL1xuUS5nZXQgPSBmdW5jdGlvbiAob2JqZWN0LCBrZXkpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwiZ2V0XCIsIFtrZXldKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImdldFwiLCBba2V5XSk7XG59O1xuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciBvYmplY3Qgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgcHJvcGVydHkgdG8gc2V0XG4gKiBAcGFyYW0gdmFsdWUgICAgIG5ldyB2YWx1ZSBvZiBwcm9wZXJ0eVxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKi9cblEuc2V0ID0gZnVuY3Rpb24gKG9iamVjdCwga2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJzZXRcIiwgW2tleSwgdmFsdWVdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJzZXRcIiwgW2tleSwgdmFsdWVdKTtcbn07XG5cbi8qKlxuICogRGVsZXRlcyBhIHByb3BlcnR5IGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIHByb3BlcnR5IHRvIGRlbGV0ZVxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKi9cblEuZGVsID0gLy8gWFhYIGxlZ2FjeVxuUVtcImRlbGV0ZVwiXSA9IGZ1bmN0aW9uIChvYmplY3QsIGtleSkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJkZWxldGVcIiwgW2tleV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZGVsID0gLy8gWFhYIGxlZ2FjeVxuUHJvbWlzZS5wcm90b3R5cGVbXCJkZWxldGVcIl0gPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJkZWxldGVcIiwgW2tleV0pO1xufTtcblxuLyoqXG4gKiBJbnZva2VzIGEgbWV0aG9kIGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIG1ldGhvZCB0byBpbnZva2VcbiAqIEBwYXJhbSB2YWx1ZSAgICAgYSB2YWx1ZSB0byBwb3N0LCB0eXBpY2FsbHkgYW4gYXJyYXkgb2ZcbiAqICAgICAgICAgICAgICAgICAgaW52b2NhdGlvbiBhcmd1bWVudHMgZm9yIHByb21pc2VzIHRoYXRcbiAqICAgICAgICAgICAgICAgICAgYXJlIHVsdGltYXRlbHkgYmFja2VkIHdpdGggYHJlc29sdmVgIHZhbHVlcyxcbiAqICAgICAgICAgICAgICAgICAgYXMgb3Bwb3NlZCB0byB0aG9zZSBiYWNrZWQgd2l0aCBVUkxzXG4gKiAgICAgICAgICAgICAgICAgIHdoZXJlaW4gdGhlIHBvc3RlZCB2YWx1ZSBjYW4gYmUgYW55XG4gKiAgICAgICAgICAgICAgICAgIEpTT04gc2VyaWFsaXphYmxlIG9iamVjdC5cbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZVxuICovXG4vLyBib3VuZCBsb2NhbGx5IGJlY2F1c2UgaXQgaXMgdXNlZCBieSBvdGhlciBtZXRob2RzXG5RLm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5RLnBvc3QgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lLCBhcmdzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFyZ3NdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5Qcm9taXNlLnByb3RvdHlwZS5wb3N0ID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFyZ3NdKTtcbn07XG5cbi8qKlxuICogSW52b2tlcyBhIG1ldGhvZCBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBvYmplY3RcbiAqIEBwYXJhbSBuYW1lICAgICAgbmFtZSBvZiBtZXRob2QgdG8gaW52b2tlXG4gKiBAcGFyYW0gLi4uYXJncyAgIGFycmF5IG9mIGludm9jYXRpb24gYXJndW1lbnRzXG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqL1xuUS5zZW5kID0gLy8gWFhYIE1hcmsgTWlsbGVyJ3MgcHJvcG9zZWQgcGFybGFuY2VcblEubWNhbGwgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUS5pbnZva2UgPSBmdW5jdGlvbiAob2JqZWN0LCBuYW1lIC8qLi4uYXJncyovKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMildKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnNlbmQgPSAvLyBYWFggTWFyayBNaWxsZXIncyBwcm9wb3NlZCBwYXJsYW5jZVxuUHJvbWlzZS5wcm90b3R5cGUubWNhbGwgPSAvLyBYWFggQXMgcHJvcG9zZWQgYnkgXCJSZWRzYW5kcm9cIlxuUHJvbWlzZS5wcm90b3R5cGUuaW52b2tlID0gZnVuY3Rpb24gKG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcInBvc3RcIiwgW25hbWUsIGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSldKTtcbn07XG5cbi8qKlxuICogQXBwbGllcyB0aGUgcHJvbWlzZWQgZnVuY3Rpb24gaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgZnVuY3Rpb25cbiAqIEBwYXJhbSBhcmdzICAgICAgYXJyYXkgb2YgYXBwbGljYXRpb24gYXJndW1lbnRzXG4gKi9cblEuZmFwcGx5ID0gZnVuY3Rpb24gKG9iamVjdCwgYXJncykge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJhcHBseVwiLCBbdm9pZCAwLCBhcmdzXSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5mYXBwbHkgPSBmdW5jdGlvbiAoYXJncykge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwiYXBwbHlcIiwgW3ZvaWQgMCwgYXJnc10pO1xufTtcblxuLyoqXG4gKiBDYWxscyB0aGUgcHJvbWlzZWQgZnVuY3Rpb24gaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgZnVuY3Rpb25cbiAqIEBwYXJhbSAuLi5hcmdzICAgYXJyYXkgb2YgYXBwbGljYXRpb24gYXJndW1lbnRzXG4gKi9cblFbXCJ0cnlcIl0gPVxuUS5mY2FsbCA9IGZ1bmN0aW9uIChvYmplY3QgLyogLi4uYXJncyovKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImFwcGx5XCIsIFt2b2lkIDAsIGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSldKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZjYWxsID0gZnVuY3Rpb24gKC8qLi4uYXJncyovKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJhcHBseVwiLCBbdm9pZCAwLCBhcnJheV9zbGljZShhcmd1bWVudHMpXSk7XG59O1xuXG4vKipcbiAqIEJpbmRzIHRoZSBwcm9taXNlZCBmdW5jdGlvbiwgdHJhbnNmb3JtaW5nIHJldHVybiB2YWx1ZXMgaW50byBhIGZ1bGZpbGxlZFxuICogcHJvbWlzZSBhbmQgdGhyb3duIGVycm9ycyBpbnRvIGEgcmVqZWN0ZWQgb25lLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBmdW5jdGlvblxuICogQHBhcmFtIC4uLmFyZ3MgICBhcnJheSBvZiBhcHBsaWNhdGlvbiBhcmd1bWVudHNcbiAqL1xuUS5mYmluZCA9IGZ1bmN0aW9uIChvYmplY3QgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgcHJvbWlzZSA9IFEob2JqZWN0KTtcbiAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZib3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UuZGlzcGF0Y2goXCJhcHBseVwiLCBbXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgYXJncy5jb25jYXQoYXJyYXlfc2xpY2UoYXJndW1lbnRzKSlcbiAgICAgICAgXSk7XG4gICAgfTtcbn07XG5Qcm9taXNlLnByb3RvdHlwZS5mYmluZCA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgYXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cyk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGZib3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UuZGlzcGF0Y2goXCJhcHBseVwiLCBbXG4gICAgICAgICAgICB0aGlzLFxuICAgICAgICAgICAgYXJncy5jb25jYXQoYXJyYXlfc2xpY2UoYXJndW1lbnRzKSlcbiAgICAgICAgXSk7XG4gICAgfTtcbn07XG5cbi8qKlxuICogUmVxdWVzdHMgdGhlIG5hbWVzIG9mIHRoZSBvd25lZCBwcm9wZXJ0aWVzIG9mIGEgcHJvbWlzZWRcbiAqIG9iamVjdCBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBvYmplY3RcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIGtleXMgb2YgdGhlIGV2ZW50dWFsbHkgc2V0dGxlZCBvYmplY3RcbiAqL1xuUS5rZXlzID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJrZXlzXCIsIFtdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJrZXlzXCIsIFtdKTtcbn07XG5cbi8qKlxuICogVHVybnMgYW4gYXJyYXkgb2YgcHJvbWlzZXMgaW50byBhIHByb21pc2UgZm9yIGFuIGFycmF5LiAgSWYgYW55IG9mXG4gKiB0aGUgcHJvbWlzZXMgZ2V0cyByZWplY3RlZCwgdGhlIHdob2xlIGFycmF5IGlzIHJlamVjdGVkIGltbWVkaWF0ZWx5LlxuICogQHBhcmFtIHtBcnJheSp9IGFuIGFycmF5IChvciBwcm9taXNlIGZvciBhbiBhcnJheSkgb2YgdmFsdWVzIChvclxuICogcHJvbWlzZXMgZm9yIHZhbHVlcylcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWVzXG4gKi9cbi8vIEJ5IE1hcmsgTWlsbGVyXG4vLyBodHRwOi8vd2lraS5lY21hc2NyaXB0Lm9yZy9kb2t1LnBocD9pZD1zdHJhd21hbjpjb25jdXJyZW5jeSZyZXY9MTMwODc3NjUyMSNhbGxmdWxmaWxsZWRcblEuYWxsID0gYWxsO1xuZnVuY3Rpb24gYWxsKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHdoZW4ocHJvbWlzZXMsIGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgICAgICB2YXIgcGVuZGluZ0NvdW50ID0gMDtcbiAgICAgICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICAgICAgYXJyYXlfcmVkdWNlKHByb21pc2VzLCBmdW5jdGlvbiAodW5kZWZpbmVkLCBwcm9taXNlLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyIHNuYXBzaG90O1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIGlzUHJvbWlzZShwcm9taXNlKSAmJlxuICAgICAgICAgICAgICAgIChzbmFwc2hvdCA9IHByb21pc2UuaW5zcGVjdCgpKS5zdGF0ZSA9PT0gXCJmdWxmaWxsZWRcIlxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgcHJvbWlzZXNbaW5kZXhdID0gc25hcHNob3QudmFsdWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICsrcGVuZGluZ0NvdW50O1xuICAgICAgICAgICAgICAgIHdoZW4oXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2UsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZXNbaW5kZXhdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoLS1wZW5kaW5nQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeSh7IGluZGV4OiBpbmRleCwgdmFsdWU6IHByb2dyZXNzIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgdm9pZCAwKTtcbiAgICAgICAgaWYgKHBlbmRpbmdDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSk7XG59XG5cblByb21pc2UucHJvdG90eXBlLmFsbCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWxsKHRoaXMpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBmaXJzdCByZXNvbHZlZCBwcm9taXNlIG9mIGFuIGFycmF5LiBQcmlvciByZWplY3RlZCBwcm9taXNlcyBhcmVcbiAqIGlnbm9yZWQuICBSZWplY3RzIG9ubHkgaWYgYWxsIHByb21pc2VzIGFyZSByZWplY3RlZC5cbiAqIEBwYXJhbSB7QXJyYXkqfSBhbiBhcnJheSBjb250YWluaW5nIHZhbHVlcyBvciBwcm9taXNlcyBmb3IgdmFsdWVzXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZnVsZmlsbGVkIHdpdGggdGhlIHZhbHVlIG9mIHRoZSBmaXJzdCByZXNvbHZlZCBwcm9taXNlLFxuICogb3IgYSByZWplY3RlZCBwcm9taXNlIGlmIGFsbCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQuXG4gKi9cblEuYW55ID0gYW55O1xuXG5mdW5jdGlvbiBhbnkocHJvbWlzZXMpIHtcbiAgICBpZiAocHJvbWlzZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBRLnJlc29sdmUoKTtcbiAgICB9XG5cbiAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG4gICAgdmFyIHBlbmRpbmdDb3VudCA9IDA7XG4gICAgYXJyYXlfcmVkdWNlKHByb21pc2VzLCBmdW5jdGlvbiAocHJldiwgY3VycmVudCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBwcm9taXNlc1tpbmRleF07XG5cbiAgICAgICAgcGVuZGluZ0NvdW50Kys7XG5cbiAgICAgICAgd2hlbihwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCwgb25Qcm9ncmVzcyk7XG4gICAgICAgIGZ1bmN0aW9uIG9uRnVsZmlsbGVkKHJlc3VsdCkge1xuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uUmVqZWN0ZWQoZXJyKSB7XG4gICAgICAgICAgICBwZW5kaW5nQ291bnQtLTtcbiAgICAgICAgICAgIGlmIChwZW5kaW5nQ291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVqZWN0aW9uID0gZXJyIHx8IG5ldyBFcnJvcihcIlwiICsgZXJyKTtcblxuICAgICAgICAgICAgICAgIHJlamVjdGlvbi5tZXNzYWdlID0gKFwiUSBjYW4ndCBnZXQgZnVsZmlsbG1lbnQgdmFsdWUgZnJvbSBhbnkgcHJvbWlzZSwgYWxsIFwiICtcbiAgICAgICAgICAgICAgICAgICAgXCJwcm9taXNlcyB3ZXJlIHJlamVjdGVkLiBMYXN0IGVycm9yIG1lc3NhZ2U6IFwiICsgcmVqZWN0aW9uLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHJlamVjdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb25Qcm9ncmVzcyhwcm9ncmVzcykge1xuICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KHtcbiAgICAgICAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb2dyZXNzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHVuZGVmaW5lZCk7XG5cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYW55ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbnkodGhpcyk7XG59O1xuXG4vKipcbiAqIFdhaXRzIGZvciBhbGwgcHJvbWlzZXMgdG8gYmUgc2V0dGxlZCwgZWl0aGVyIGZ1bGZpbGxlZCBvclxuICogcmVqZWN0ZWQuICBUaGlzIGlzIGRpc3RpbmN0IGZyb20gYGFsbGAgc2luY2UgdGhhdCB3b3VsZCBzdG9wXG4gKiB3YWl0aW5nIGF0IHRoZSBmaXJzdCByZWplY3Rpb24uICBUaGUgcHJvbWlzZSByZXR1cm5lZCBieVxuICogYGFsbFJlc29sdmVkYCB3aWxsIG5ldmVyIGJlIHJlamVjdGVkLlxuICogQHBhcmFtIHByb21pc2VzIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgKG9yIGFuIGFycmF5KSBvZiBwcm9taXNlc1xuICogKG9yIHZhbHVlcylcbiAqIEByZXR1cm4gYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiBwcm9taXNlc1xuICovXG5RLmFsbFJlc29sdmVkID0gZGVwcmVjYXRlKGFsbFJlc29sdmVkLCBcImFsbFJlc29sdmVkXCIsIFwiYWxsU2V0dGxlZFwiKTtcbmZ1bmN0aW9uIGFsbFJlc29sdmVkKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIHdoZW4ocHJvbWlzZXMsIGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgICAgICBwcm9taXNlcyA9IGFycmF5X21hcChwcm9taXNlcywgUSk7XG4gICAgICAgIHJldHVybiB3aGVuKGFsbChhcnJheV9tYXAocHJvbWlzZXMsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4gd2hlbihwcm9taXNlLCBub29wLCBub29wKTtcbiAgICAgICAgfSkpLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZXM7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5hbGxSZXNvbHZlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWxsUmVzb2x2ZWQodGhpcyk7XG59O1xuXG4vKipcbiAqIEBzZWUgUHJvbWlzZSNhbGxTZXR0bGVkXG4gKi9cblEuYWxsU2V0dGxlZCA9IGFsbFNldHRsZWQ7XG5mdW5jdGlvbiBhbGxTZXR0bGVkKHByb21pc2VzKSB7XG4gICAgcmV0dXJuIFEocHJvbWlzZXMpLmFsbFNldHRsZWQoKTtcbn1cblxuLyoqXG4gKiBUdXJucyBhbiBhcnJheSBvZiBwcm9taXNlcyBpbnRvIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgdGhlaXIgc3RhdGVzIChhc1xuICogcmV0dXJuZWQgYnkgYGluc3BlY3RgKSB3aGVuIHRoZXkgaGF2ZSBhbGwgc2V0dGxlZC5cbiAqIEBwYXJhbSB7QXJyYXlbQW55Kl19IHZhbHVlcyBhbiBhcnJheSAob3IgcHJvbWlzZSBmb3IgYW4gYXJyYXkpIG9mIHZhbHVlcyAob3JcbiAqIHByb21pc2VzIGZvciB2YWx1ZXMpXG4gKiBAcmV0dXJucyB7QXJyYXlbU3RhdGVdfSBhbiBhcnJheSBvZiBzdGF0ZXMgZm9yIHRoZSByZXNwZWN0aXZlIHZhbHVlcy5cbiAqL1xuUHJvbWlzZS5wcm90b3R5cGUuYWxsU2V0dGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uIChwcm9taXNlcykge1xuICAgICAgICByZXR1cm4gYWxsKGFycmF5X21hcChwcm9taXNlcywgZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICAgICAgICAgIHByb21pc2UgPSBRKHByb21pc2UpO1xuICAgICAgICAgICAgZnVuY3Rpb24gcmVnYXJkbGVzcygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvbWlzZS5pbnNwZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKHJlZ2FyZGxlc3MsIHJlZ2FyZGxlc3MpO1xuICAgICAgICB9KSk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIENhcHR1cmVzIHRoZSBmYWlsdXJlIG9mIGEgcHJvbWlzZSwgZ2l2aW5nIGFuIG9wb3J0dW5pdHkgdG8gcmVjb3ZlclxuICogd2l0aCBhIGNhbGxiYWNrLiAgSWYgdGhlIGdpdmVuIHByb21pc2UgaXMgZnVsZmlsbGVkLCB0aGUgcmV0dXJuZWRcbiAqIHByb21pc2UgaXMgZnVsZmlsbGVkLlxuICogQHBhcmFtIHtBbnkqfSBwcm9taXNlIGZvciBzb21ldGhpbmdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIHRvIGZ1bGZpbGwgdGhlIHJldHVybmVkIHByb21pc2UgaWYgdGhlXG4gKiBnaXZlbiBwcm9taXNlIGlzIHJlamVjdGVkXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGNhbGxiYWNrXG4gKi9cblEuZmFpbCA9IC8vIFhYWCBsZWdhY3lcblFbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChvYmplY3QsIHJlamVjdGVkKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS50aGVuKHZvaWQgMCwgcmVqZWN0ZWQpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmFpbCA9IC8vIFhYWCBsZWdhY3lcblByb21pc2UucHJvdG90eXBlW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAocmVqZWN0ZWQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgcmVqZWN0ZWQpO1xufTtcblxuLyoqXG4gKiBBdHRhY2hlcyBhIGxpc3RlbmVyIHRoYXQgY2FuIHJlc3BvbmQgdG8gcHJvZ3Jlc3Mgbm90aWZpY2F0aW9ucyBmcm9tIGFcbiAqIHByb21pc2UncyBvcmlnaW5hdGluZyBkZWZlcnJlZC4gVGhpcyBsaXN0ZW5lciByZWNlaXZlcyB0aGUgZXhhY3QgYXJndW1lbnRzXG4gKiBwYXNzZWQgdG8gYGBkZWZlcnJlZC5ub3RpZnlgYC5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZSBmb3Igc29tZXRoaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0byByZWNlaXZlIGFueSBwcm9ncmVzcyBub3RpZmljYXRpb25zXG4gKiBAcmV0dXJucyB0aGUgZ2l2ZW4gcHJvbWlzZSwgdW5jaGFuZ2VkXG4gKi9cblEucHJvZ3Jlc3MgPSBwcm9ncmVzcztcbmZ1bmN0aW9uIHByb2dyZXNzKG9iamVjdCwgcHJvZ3Jlc3NlZCkge1xuICAgIHJldHVybiBRKG9iamVjdCkudGhlbih2b2lkIDAsIHZvaWQgMCwgcHJvZ3Jlc3NlZCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnByb2dyZXNzID0gZnVuY3Rpb24gKHByb2dyZXNzZWQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdm9pZCAwLCBwcm9ncmVzc2VkKTtcbn07XG5cbi8qKlxuICogUHJvdmlkZXMgYW4gb3Bwb3J0dW5pdHkgdG8gb2JzZXJ2ZSB0aGUgc2V0dGxpbmcgb2YgYSBwcm9taXNlLFxuICogcmVnYXJkbGVzcyBvZiB3aGV0aGVyIHRoZSBwcm9taXNlIGlzIGZ1bGZpbGxlZCBvciByZWplY3RlZC4gIEZvcndhcmRzXG4gKiB0aGUgcmVzb2x1dGlvbiB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZSB3aGVuIHRoZSBjYWxsYmFjayBpcyBkb25lLlxuICogVGhlIGNhbGxiYWNrIGNhbiByZXR1cm4gYSBwcm9taXNlIHRvIGRlZmVyIGNvbXBsZXRpb24uXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2VcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrIHRvIG9ic2VydmUgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuXG4gKiBwcm9taXNlLCB0YWtlcyBubyBhcmd1bWVudHMuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlbiBwcm9taXNlIHdoZW5cbiAqIGBgZmluYGAgaXMgZG9uZS5cbiAqL1xuUS5maW4gPSAvLyBYWFggbGVnYWN5XG5RW1wiZmluYWxseVwiXSA9IGZ1bmN0aW9uIChvYmplY3QsIGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KVtcImZpbmFsbHlcIl0oY2FsbGJhY2spO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmluID0gLy8gWFhYIGxlZ2FjeVxuUHJvbWlzZS5wcm90b3R5cGVbXCJmaW5hbGx5XCJdID0gZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgaWYgKCFjYWxsYmFjayB8fCB0eXBlb2YgY2FsbGJhY2suYXBwbHkgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRIGNhbid0IGFwcGx5IGZpbmFsbHkgY2FsbGJhY2tcIik7XG4gICAgfVxuICAgIGNhbGxiYWNrID0gUShjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmZjYWxsKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gVE9ETyBhdHRlbXB0IHRvIHJlY3ljbGUgdGhlIHJlamVjdGlvbiB3aXRoIFwidGhpc1wiLlxuICAgICAgICByZXR1cm4gY2FsbGJhY2suZmNhbGwoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFRlcm1pbmF0ZXMgYSBjaGFpbiBvZiBwcm9taXNlcywgZm9yY2luZyByZWplY3Rpb25zIHRvIGJlXG4gKiB0aHJvd24gYXMgZXhjZXB0aW9ucy5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZSBhdCB0aGUgZW5kIG9mIGEgY2hhaW4gb2YgcHJvbWlzZXNcbiAqIEByZXR1cm5zIG5vdGhpbmdcbiAqL1xuUS5kb25lID0gZnVuY3Rpb24gKG9iamVjdCwgZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRvbmUoZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uIChmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzcykge1xuICAgIHZhciBvblVuaGFuZGxlZEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIC8vIGZvcndhcmQgdG8gYSBmdXR1cmUgdHVybiBzbyB0aGF0IGBgd2hlbmBgXG4gICAgICAgIC8vIGRvZXMgbm90IGNhdGNoIGl0IGFuZCB0dXJuIGl0IGludG8gYSByZWplY3Rpb24uXG4gICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbWFrZVN0YWNrVHJhY2VMb25nKGVycm9yLCBwcm9taXNlKTtcbiAgICAgICAgICAgIGlmIChRLm9uZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBRLm9uZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEF2b2lkIHVubmVjZXNzYXJ5IGBuZXh0VGlja2BpbmcgdmlhIGFuIHVubmVjZXNzYXJ5IGB3aGVuYC5cbiAgICB2YXIgcHJvbWlzZSA9IGZ1bGZpbGxlZCB8fCByZWplY3RlZCB8fCBwcm9ncmVzcyA/XG4gICAgICAgIHRoaXMudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzcykgOlxuICAgICAgICB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MgJiYgcHJvY2Vzcy5kb21haW4pIHtcbiAgICAgICAgb25VbmhhbmRsZWRFcnJvciA9IHByb2Nlc3MuZG9tYWluLmJpbmQob25VbmhhbmRsZWRFcnJvcik7XG4gICAgfVxuXG4gICAgcHJvbWlzZS50aGVuKHZvaWQgMCwgb25VbmhhbmRsZWRFcnJvcik7XG59O1xuXG4vKipcbiAqIENhdXNlcyBhIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQgaWYgaXQgZG9lcyBub3QgZ2V0IGZ1bGZpbGxlZCBiZWZvcmVcbiAqIHNvbWUgbWlsbGlzZWNvbmRzIHRpbWUgb3V0LlxuICogQHBhcmFtIHtBbnkqfSBwcm9taXNlXG4gKiBAcGFyYW0ge051bWJlcn0gbWlsbGlzZWNvbmRzIHRpbWVvdXRcbiAqIEBwYXJhbSB7QW55Kn0gY3VzdG9tIGVycm9yIG1lc3NhZ2Ugb3IgRXJyb3Igb2JqZWN0IChvcHRpb25hbClcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2UgaWYgaXQgaXNcbiAqIGZ1bGZpbGxlZCBiZWZvcmUgdGhlIHRpbWVvdXQsIG90aGVyd2lzZSByZWplY3RlZC5cbiAqL1xuUS50aW1lb3V0ID0gZnVuY3Rpb24gKG9iamVjdCwgbXMsIGVycm9yKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS50aW1lb3V0KG1zLCBlcnJvcik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24gKG1zLCBlcnJvcikge1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdmFyIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWVycm9yIHx8IFwic3RyaW5nXCIgPT09IHR5cGVvZiBlcnJvcikge1xuICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZXJyb3IgfHwgXCJUaW1lZCBvdXQgYWZ0ZXIgXCIgKyBtcyArIFwiIG1zXCIpO1xuICAgICAgICAgICAgZXJyb3IuY29kZSA9IFwiRVRJTUVET1VUXCI7XG4gICAgICAgIH1cbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICB9LCBtcyk7XG5cbiAgICB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAoZXhjZXB0aW9uKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXhjZXB0aW9uKTtcbiAgICB9LCBkZWZlcnJlZC5ub3RpZnkpO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgKG9yIHByb21pc2VkIHZhbHVlKSwgc29tZVxuICogbWlsbGlzZWNvbmRzIGFmdGVyIGl0IHJlc29sdmVkLiBQYXNzZXMgcmVqZWN0aW9ucyBpbW1lZGlhdGVseS5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZVxuICogQHBhcmFtIHtOdW1iZXJ9IG1pbGxpc2Vjb25kc1xuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgZ2l2ZW4gcHJvbWlzZSBhZnRlciBtaWxsaXNlY29uZHNcbiAqIHRpbWUgaGFzIGVsYXBzZWQgc2luY2UgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2UuXG4gKiBJZiB0aGUgZ2l2ZW4gcHJvbWlzZSByZWplY3RzLCB0aGF0IGlzIHBhc3NlZCBpbW1lZGlhdGVseS5cbiAqL1xuUS5kZWxheSA9IGZ1bmN0aW9uIChvYmplY3QsIHRpbWVvdXQpIHtcbiAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRpbWVvdXQgPSBvYmplY3Q7XG4gICAgICAgIG9iamVjdCA9IHZvaWQgMDtcbiAgICB9XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kZWxheSh0aW1lb3V0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodmFsdWUpO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFBhc3NlcyBhIGNvbnRpbnVhdGlvbiB0byBhIE5vZGUgZnVuY3Rpb24sIHdoaWNoIGlzIGNhbGxlZCB3aXRoIHRoZSBnaXZlblxuICogYXJndW1lbnRzIHByb3ZpZGVkIGFzIGFuIGFycmF5LCBhbmQgcmV0dXJucyBhIHByb21pc2UuXG4gKlxuICogICAgICBRLm5mYXBwbHkoRlMucmVhZEZpbGUsIFtfX2ZpbGVuYW1lXSlcbiAqICAgICAgLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAqICAgICAgfSlcbiAqXG4gKi9cblEubmZhcHBseSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgYXJncykge1xuICAgIHJldHVybiBRKGNhbGxiYWNrKS5uZmFwcGx5KGFyZ3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmZhcHBseSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmdzKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogUGFzc2VzIGEgY29udGludWF0aW9uIHRvIGEgTm9kZSBmdW5jdGlvbiwgd2hpY2ggaXMgY2FsbGVkIHdpdGggdGhlIGdpdmVuXG4gKiBhcmd1bWVudHMgcHJvdmlkZWQgaW5kaXZpZHVhbGx5LCBhbmQgcmV0dXJucyBhIHByb21pc2UuXG4gKiBAZXhhbXBsZVxuICogUS5uZmNhbGwoRlMucmVhZEZpbGUsIF9fZmlsZW5hbWUpXG4gKiAudGhlbihmdW5jdGlvbiAoY29udGVudCkge1xuICogfSlcbiAqXG4gKi9cblEubmZjYWxsID0gZnVuY3Rpb24gKGNhbGxiYWNrIC8qLi4uYXJncyovKSB7XG4gICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBRKGNhbGxiYWNrKS5uZmFwcGx5KGFyZ3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmZjYWxsID0gZnVuY3Rpb24gKC8qLi4uYXJncyovKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIG5vZGVBcmdzLnB1c2goZGVmZXJyZWQubWFrZU5vZGVSZXNvbHZlcigpKTtcbiAgICB0aGlzLmZhcHBseShub2RlQXJncykuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBXcmFwcyBhIE5vZGVKUyBjb250aW51YXRpb24gcGFzc2luZyBmdW5jdGlvbiBhbmQgcmV0dXJucyBhbiBlcXVpdmFsZW50XG4gKiB2ZXJzaW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2UuXG4gKiBAZXhhbXBsZVxuICogUS5uZmJpbmQoRlMucmVhZEZpbGUsIF9fZmlsZW5hbWUpKFwidXRmLThcIilcbiAqIC50aGVuKGNvbnNvbGUubG9nKVxuICogLmRvbmUoKVxuICovXG5RLm5mYmluZCA9XG5RLmRlbm9kZWlmeSA9IGZ1bmN0aW9uIChjYWxsYmFjayAvKi4uLmFyZ3MqLykge1xuICAgIGlmIChjYWxsYmFjayA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlEgY2FuJ3Qgd3JhcCBhbiB1bmRlZmluZWQgZnVuY3Rpb25cIik7XG4gICAgfVxuICAgIHZhciBiYXNlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGVBcmdzID0gYmFzZUFyZ3MuY29uY2F0KGFycmF5X3NsaWNlKGFyZ3VtZW50cykpO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgICAgIFEoY2FsbGJhY2spLmZhcHBseShub2RlQXJncykuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmZiaW5kID1cblByb21pc2UucHJvdG90eXBlLmRlbm9kZWlmeSA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIFEuZGVub2RlaWZ5LmFwcGx5KHZvaWQgMCwgYXJncyk7XG59O1xuXG5RLm5iaW5kID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzcCAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBiYXNlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGVBcmdzID0gYmFzZUFyZ3MuY29uY2F0KGFycmF5X3NsaWNlKGFyZ3VtZW50cykpO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgICAgIGZ1bmN0aW9uIGJvdW5kKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXNwLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIFEoYm91bmQpLmZhcHBseShub2RlQXJncykuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmJpbmQgPSBmdW5jdGlvbiAoLyp0aGlzcCwgLi4uYXJncyovKSB7XG4gICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDApO1xuICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICByZXR1cm4gUS5uYmluZC5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufTtcblxuLyoqXG4gKiBDYWxscyBhIG1ldGhvZCBvZiBhIE5vZGUtc3R5bGUgb2JqZWN0IHRoYXQgYWNjZXB0cyBhIE5vZGUtc3R5bGVcbiAqIGNhbGxiYWNrIHdpdGggYSBnaXZlbiBhcnJheSBvZiBhcmd1bWVudHMsIHBsdXMgYSBwcm92aWRlZCBjYWxsYmFjay5cbiAqIEBwYXJhbSBvYmplY3QgYW4gb2JqZWN0IHRoYXQgaGFzIHRoZSBuYW1lZCBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIG1ldGhvZCBvZiBvYmplY3RcbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIG1ldGhvZDsgdGhlIGNhbGxiYWNrXG4gKiB3aWxsIGJlIHByb3ZpZGVkIGJ5IFEgYW5kIGFwcGVuZGVkIHRvIHRoZXNlIGFyZ3VtZW50cy5cbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9yIGVycm9yXG4gKi9cblEubm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5RLm5wb3N0ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgYXJncykge1xuICAgIHJldHVybiBRKG9iamVjdCkubnBvc3QobmFtZSwgYXJncyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5ubWFwcGx5ID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblByb21pc2UucHJvdG90eXBlLm5wb3N0ID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmdzIHx8IFtdKTtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIG5vZGVBcmdzLnB1c2goZGVmZXJyZWQubWFrZU5vZGVSZXNvbHZlcigpKTtcbiAgICB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgbm9kZUFyZ3NdKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIENhbGxzIGEgbWV0aG9kIG9mIGEgTm9kZS1zdHlsZSBvYmplY3QgdGhhdCBhY2NlcHRzIGEgTm9kZS1zdHlsZVxuICogY2FsbGJhY2ssIGZvcndhcmRpbmcgdGhlIGdpdmVuIHZhcmlhZGljIGFyZ3VtZW50cywgcGx1cyBhIHByb3ZpZGVkXG4gKiBjYWxsYmFjayBhcmd1bWVudC5cbiAqIEBwYXJhbSBvYmplY3QgYW4gb2JqZWN0IHRoYXQgaGFzIHRoZSBuYW1lZCBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIG1ldGhvZCBvZiBvYmplY3RcbiAqIEBwYXJhbSAuLi5hcmdzIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2Q7IHRoZSBjYWxsYmFjayB3aWxsXG4gKiBiZSBwcm92aWRlZCBieSBRIGFuZCBhcHBlbmRlZCB0byB0aGVzZSBhcmd1bWVudHMuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSB2YWx1ZSBvciBlcnJvclxuICovXG5RLm5zZW5kID0gLy8gWFhYIEJhc2VkIG9uIE1hcmsgTWlsbGVyJ3MgcHJvcG9zZWQgXCJzZW5kXCJcblEubm1jYWxsID0gLy8gWFhYIEJhc2VkIG9uIFwiUmVkc2FuZHJvJ3NcIiBwcm9wb3NhbFxuUS5uaW52b2tlID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBub2RlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMik7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgUShvYmplY3QpLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgbm9kZUFyZ3NdKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5uc2VuZCA9IC8vIFhYWCBCYXNlZCBvbiBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIFwic2VuZFwiXG5Qcm9taXNlLnByb3RvdHlwZS5ubWNhbGwgPSAvLyBYWFggQmFzZWQgb24gXCJSZWRzYW5kcm8nc1wiIHByb3Bvc2FsXG5Qcm9taXNlLnByb3RvdHlwZS5uaW52b2tlID0gZnVuY3Rpb24gKG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIHRoaXMuZGlzcGF0Y2goXCJwb3N0XCIsIFtuYW1lLCBub2RlQXJnc10pLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogSWYgYSBmdW5jdGlvbiB3b3VsZCBsaWtlIHRvIHN1cHBvcnQgYm90aCBOb2RlIGNvbnRpbnVhdGlvbi1wYXNzaW5nLXN0eWxlIGFuZFxuICogcHJvbWlzZS1yZXR1cm5pbmctc3R5bGUsIGl0IGNhbiBlbmQgaXRzIGludGVybmFsIHByb21pc2UgY2hhaW4gd2l0aFxuICogYG5vZGVpZnkobm9kZWJhY2spYCwgZm9yd2FyZGluZyB0aGUgb3B0aW9uYWwgbm9kZWJhY2sgYXJndW1lbnQuICBJZiB0aGUgdXNlclxuICogZWxlY3RzIHRvIHVzZSBhIG5vZGViYWNrLCB0aGUgcmVzdWx0IHdpbGwgYmUgc2VudCB0aGVyZS4gIElmIHRoZXkgZG8gbm90XG4gKiBwYXNzIGEgbm9kZWJhY2ssIHRoZXkgd2lsbCByZWNlaXZlIHRoZSByZXN1bHQgcHJvbWlzZS5cbiAqIEBwYXJhbSBvYmplY3QgYSByZXN1bHQgKG9yIGEgcHJvbWlzZSBmb3IgYSByZXN1bHQpXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBub2RlYmFjayBhIE5vZGUuanMtc3R5bGUgY2FsbGJhY2tcbiAqIEByZXR1cm5zIGVpdGhlciB0aGUgcHJvbWlzZSBvciBub3RoaW5nXG4gKi9cblEubm9kZWlmeSA9IG5vZGVpZnk7XG5mdW5jdGlvbiBub2RlaWZ5KG9iamVjdCwgbm9kZWJhY2spIHtcbiAgICByZXR1cm4gUShvYmplY3QpLm5vZGVpZnkobm9kZWJhY2spO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5ub2RlaWZ5ID0gZnVuY3Rpb24gKG5vZGViYWNrKSB7XG4gICAgaWYgKG5vZGViYWNrKSB7XG4gICAgICAgIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5vZGViYWNrKG51bGwsIHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5vZGViYWNrKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59O1xuXG5RLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJRLm5vQ29uZmxpY3Qgb25seSB3b3JrcyB3aGVuIFEgaXMgdXNlZCBhcyBhIGdsb2JhbFwiKTtcbn07XG5cbi8vIEFsbCBjb2RlIGJlZm9yZSB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMuXG52YXIgcUVuZGluZ0xpbmUgPSBjYXB0dXJlTGluZSgpO1xuXG5yZXR1cm4gUTtcblxufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgncmVhY3QvbGliL1JlYWN0RE9NJyk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQXV0b0ZvY3VzVXRpbHNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG52YXIgZmluZERPTU5vZGUgPSByZXF1aXJlKCcuL2ZpbmRET01Ob2RlJyk7XG52YXIgZm9jdXNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvZm9jdXNOb2RlJyk7XG5cbnZhciBNaXhpbiA9IHtcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvRm9jdXMpIHtcbiAgICAgIGZvY3VzTm9kZShmaW5kRE9NTm9kZSh0aGlzKSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgQXV0b0ZvY3VzVXRpbHMgPSB7XG4gIE1peGluOiBNaXhpbixcblxuICBmb2N1c0RPTUNvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIGZvY3VzTm9kZShSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCkpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEF1dG9Gb2N1c1V0aWxzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEJlZm9yZUlucHV0RXZlbnRQbHVnaW5cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUgPSByZXF1aXJlKCcuL0ZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZScpO1xudmFyIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQnKTtcbnZhciBTeW50aGV0aWNJbnB1dEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNJbnB1dEV2ZW50Jyk7XG5cbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbnZhciBFTkRfS0VZQ09ERVMgPSBbOSwgMTMsIDI3LCAzMl07IC8vIFRhYiwgUmV0dXJuLCBFc2MsIFNwYWNlXG52YXIgU1RBUlRfS0VZQ09ERSA9IDIyOTtcblxudmFyIGNhblVzZUNvbXBvc2l0aW9uRXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ0NvbXBvc2l0aW9uRXZlbnQnIGluIHdpbmRvdztcblxudmFyIGRvY3VtZW50TW9kZSA9IG51bGw7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50KSB7XG4gIGRvY3VtZW50TW9kZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcbn1cblxuLy8gV2Via2l0IG9mZmVycyBhIHZlcnkgdXNlZnVsIGB0ZXh0SW5wdXRgIGV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG9cbi8vIGRpcmVjdGx5IHJlcHJlc2VudCBgYmVmb3JlSW5wdXRgLiBUaGUgSUUgYHRleHRpbnB1dGAgZXZlbnQgaXMgbm90IGFzXG4vLyB1c2VmdWwsIHNvIHdlIGRvbid0IHVzZSBpdC5cbnZhciBjYW5Vc2VUZXh0SW5wdXRFdmVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnVGV4dEV2ZW50JyBpbiB3aW5kb3cgJiYgIWRvY3VtZW50TW9kZSAmJiAhaXNQcmVzdG8oKTtcblxuLy8gSW4gSUU5Kywgd2UgaGF2ZSBhY2Nlc3MgdG8gY29tcG9zaXRpb24gZXZlbnRzLCBidXQgdGhlIGRhdGEgc3VwcGxpZWRcbi8vIGJ5IHRoZSBuYXRpdmUgY29tcG9zaXRpb25lbmQgZXZlbnQgbWF5IGJlIGluY29ycmVjdC4gSmFwYW5lc2UgaWRlb2dyYXBoaWNcbi8vIHNwYWNlcywgZm9yIGluc3RhbmNlIChcXHUzMDAwKSBhcmUgbm90IHJlY29yZGVkIGNvcnJlY3RseS5cbnZhciB1c2VGYWxsYmFja0NvbXBvc2l0aW9uRGF0YSA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAoIWNhblVzZUNvbXBvc2l0aW9uRXZlbnQgfHwgZG9jdW1lbnRNb2RlICYmIGRvY3VtZW50TW9kZSA+IDggJiYgZG9jdW1lbnRNb2RlIDw9IDExKTtcblxuLyoqXG4gKiBPcGVyYSA8PSAxMiBpbmNsdWRlcyBUZXh0RXZlbnQgaW4gd2luZG93LCBidXQgZG9lcyBub3QgZmlyZVxuICogdGV4dCBpbnB1dCBldmVudHMuIFJlbHkgb24ga2V5cHJlc3MgaW5zdGVhZC5cbiAqL1xuZnVuY3Rpb24gaXNQcmVzdG8oKSB7XG4gIHZhciBvcGVyYSA9IHdpbmRvdy5vcGVyYTtcbiAgcmV0dXJuIHR5cGVvZiBvcGVyYSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9wZXJhLnZlcnNpb24gPT09ICdmdW5jdGlvbicgJiYgcGFyc2VJbnQob3BlcmEudmVyc2lvbigpLCAxMCkgPD0gMTI7XG59XG5cbnZhciBTUEFDRUJBUl9DT0RFID0gMzI7XG52YXIgU1BBQ0VCQVJfQ0hBUiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoU1BBQ0VCQVJfQ09ERSk7XG5cbnZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblxuLy8gRXZlbnRzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnR5IG5hbWVzLlxudmFyIGV2ZW50VHlwZXMgPSB7XG4gIGJlZm9yZUlucHV0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25CZWZvcmVJbnB1dDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQmVmb3JlSW5wdXRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcFRleHRJbnB1dCwgdG9wTGV2ZWxUeXBlcy50b3BQYXN0ZV1cbiAgfSxcbiAgY29tcG9zaXRpb25FbmQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uRW5kOiBudWxsIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvbkVuZENhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfSxcbiAgY29tcG9zaXRpb25TdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25TdGFydDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25TdGFydENhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblN0YXJ0LCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3MsIHRvcExldmVsVHlwZXMudG9wS2V5VXAsIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duXVxuICB9LFxuICBjb21wb3NpdGlvblVwZGF0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25VcGRhdGU6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uVXBkYXRlQ2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uVXBkYXRlLCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3MsIHRvcExldmVsVHlwZXMudG9wS2V5VXAsIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duXVxuICB9XG59O1xuXG4vLyBUcmFjayB3aGV0aGVyIHdlJ3ZlIGV2ZXIgaGFuZGxlZCBhIGtleXByZXNzIG9uIHRoZSBzcGFjZSBrZXkuXG52YXIgaGFzU3BhY2VLZXlwcmVzcyA9IGZhbHNlO1xuXG4vKipcbiAqIFJldHVybiB3aGV0aGVyIGEgbmF0aXZlIGtleXByZXNzIGV2ZW50IGlzIGFzc3VtZWQgdG8gYmUgYSBjb21tYW5kLlxuICogVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIEZpcmVmb3ggZmlyZXMgYGtleXByZXNzYCBldmVudHMgZm9yIGtleSBjb21tYW5kc1xuICogKGN1dCwgY29weSwgc2VsZWN0LWFsbCwgZXRjLikgZXZlbiB0aG91Z2ggbm8gY2hhcmFjdGVyIGlzIGluc2VydGVkLlxuICovXG5mdW5jdGlvbiBpc0tleXByZXNzQ29tbWFuZChuYXRpdmVFdmVudCkge1xuICByZXR1cm4gKG5hdGl2ZUV2ZW50LmN0cmxLZXkgfHwgbmF0aXZlRXZlbnQuYWx0S2V5IHx8IG5hdGl2ZUV2ZW50Lm1ldGFLZXkpICYmXG4gIC8vIGN0cmxLZXkgJiYgYWx0S2V5IGlzIGVxdWl2YWxlbnQgdG8gQWx0R3IsIGFuZCBpcyBub3QgYSBjb21tYW5kLlxuICAhKG5hdGl2ZUV2ZW50LmN0cmxLZXkgJiYgbmF0aXZlRXZlbnQuYWx0S2V5KTtcbn1cblxuLyoqXG4gKiBUcmFuc2xhdGUgbmF0aXZlIHRvcCBsZXZlbCBldmVudHMgaW50byBldmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvc2l0aW9uRXZlbnRUeXBlKHRvcExldmVsVHlwZSkge1xuICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblN0YXJ0OlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25TdGFydDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25VcGRhdGU6XG4gICAgICByZXR1cm4gZXZlbnRUeXBlcy5jb21wb3NpdGlvblVwZGF0ZTtcbiAgfVxufVxuXG4vKipcbiAqIERvZXMgb3VyIGZhbGxiYWNrIGJlc3QtZ3Vlc3MgbW9kZWwgdGhpbmsgdGhpcyBldmVudCBzaWduaWZpZXMgdGhhdFxuICogY29tcG9zaXRpb24gaGFzIGJlZ3VuP1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGYWxsYmFja0NvbXBvc2l0aW9uU3RhcnQodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24gJiYgbmF0aXZlRXZlbnQua2V5Q29kZSA9PT0gU1RBUlRfS0VZQ09ERTtcbn1cblxuLyoqXG4gKiBEb2VzIG91ciBmYWxsYmFjayBtb2RlIHRoaW5rIHRoYXQgdGhpcyBldmVudCBpcyB0aGUgZW5kIG9mIGNvbXBvc2l0aW9uP1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5VXA6XG4gICAgICAvLyBDb21tYW5kIGtleXMgaW5zZXJ0IG9yIGNsZWFyIElNRSBpbnB1dC5cbiAgICAgIHJldHVybiBFTkRfS0VZQ09ERVMuaW5kZXhPZihuYXRpdmVFdmVudC5rZXlDb2RlKSAhPT0gLTE7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG4gICAgICAvLyBFeHBlY3QgSU1FIGtleUNvZGUgb24gZWFjaCBrZXlkb3duLiBJZiB3ZSBnZXQgYW55IG90aGVyXG4gICAgICAvLyBjb2RlIHdlIG11c3QgaGF2ZSBleGl0ZWQgZWFybGllci5cbiAgICAgIHJldHVybiBuYXRpdmVFdmVudC5rZXlDb2RlICE9PSBTVEFSVF9LRVlDT0RFO1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzczpcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duOlxuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgLy8gRXZlbnRzIGFyZSBub3QgcG9zc2libGUgd2l0aG91dCBjYW5jZWxsaW5nIElNRS5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBHb29nbGUgSW5wdXQgVG9vbHMgcHJvdmlkZXMgY29tcG9zaXRpb24gZGF0YSB2aWEgYSBDdXN0b21FdmVudCxcbiAqIHdpdGggdGhlIGBkYXRhYCBwcm9wZXJ0eSBwb3B1bGF0ZWQgaW4gdGhlIGBkZXRhaWxgIG9iamVjdC4gSWYgdGhpc1xuICogaXMgYXZhaWxhYmxlIG9uIHRoZSBldmVudCBvYmplY3QsIHVzZSBpdC4gSWYgbm90LCB0aGlzIGlzIGEgcGxhaW5cbiAqIGNvbXBvc2l0aW9uIGV2ZW50IGFuZCB3ZSBoYXZlIG5vdGhpbmcgc3BlY2lhbCB0byBleHRyYWN0LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCkge1xuICB2YXIgZGV0YWlsID0gbmF0aXZlRXZlbnQuZGV0YWlsO1xuICBpZiAodHlwZW9mIGRldGFpbCA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIGRldGFpbCkge1xuICAgIHJldHVybiBkZXRhaWwuZGF0YTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8gVHJhY2sgdGhlIGN1cnJlbnQgSU1FIGNvbXBvc2l0aW9uIGZhbGxiYWNrIG9iamVjdCwgaWYgYW55LlxudmFyIGN1cnJlbnRDb21wb3NpdGlvbiA9IG51bGw7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9vYmplY3R9IEEgU3ludGhldGljQ29tcG9zaXRpb25FdmVudC5cbiAqL1xuZnVuY3Rpb24gZXh0cmFjdENvbXBvc2l0aW9uRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIHZhciBldmVudFR5cGU7XG4gIHZhciBmYWxsYmFja0RhdGE7XG5cbiAgaWYgKGNhblVzZUNvbXBvc2l0aW9uRXZlbnQpIHtcbiAgICBldmVudFR5cGUgPSBnZXRDb21wb3NpdGlvbkV2ZW50VHlwZSh0b3BMZXZlbFR5cGUpO1xuICB9IGVsc2UgaWYgKCFjdXJyZW50Q29tcG9zaXRpb24pIHtcbiAgICBpZiAoaXNGYWxsYmFja0NvbXBvc2l0aW9uU3RhcnQodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkpIHtcbiAgICAgIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXMuY29tcG9zaXRpb25TdGFydDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgZXZlbnRUeXBlID0gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZDtcbiAgfVxuXG4gIGlmICghZXZlbnRUeXBlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAodXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEpIHtcbiAgICAvLyBUaGUgY3VycmVudCBjb21wb3NpdGlvbiBpcyBzdG9yZWQgc3RhdGljYWxseSBhbmQgbXVzdCBub3QgYmVcbiAgICAvLyBvdmVyd3JpdHRlbiB3aGlsZSBjb21wb3NpdGlvbiBjb250aW51ZXMuXG4gICAgaWYgKCFjdXJyZW50Q29tcG9zaXRpb24gJiYgZXZlbnRUeXBlID09PSBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQpIHtcbiAgICAgIGN1cnJlbnRDb21wb3NpdGlvbiA9IEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5nZXRQb29sZWQodG9wTGV2ZWxUYXJnZXQpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBldmVudFR5cGVzLmNvbXBvc2l0aW9uRW5kKSB7XG4gICAgICBpZiAoY3VycmVudENvbXBvc2l0aW9uKSB7XG4gICAgICAgIGZhbGxiYWNrRGF0YSA9IGN1cnJlbnRDb21wb3NpdGlvbi5nZXREYXRhKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGV2ZW50ID0gU3ludGhldGljQ29tcG9zaXRpb25FdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlLCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gIGlmIChmYWxsYmFja0RhdGEpIHtcbiAgICAvLyBJbmplY3QgZGF0YSBnZW5lcmF0ZWQgZnJvbSBmYWxsYmFjayBwYXRoIGludG8gdGhlIHN5bnRoZXRpYyBldmVudC5cbiAgICAvLyBUaGlzIG1hdGNoZXMgdGhlIHByb3BlcnR5IG9mIG5hdGl2ZSBDb21wb3NpdGlvbkV2ZW50SW50ZXJmYWNlLlxuICAgIGV2ZW50LmRhdGEgPSBmYWxsYmFja0RhdGE7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1c3RvbURhdGEgPSBnZXREYXRhRnJvbUN1c3RvbUV2ZW50KG5hdGl2ZUV2ZW50KTtcbiAgICBpZiAoY3VzdG9tRGF0YSAhPT0gbnVsbCkge1xuICAgICAgZXZlbnQuZGF0YSA9IGN1c3RvbURhdGE7XG4gICAgfVxuICB9XG5cbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgcmV0dXJuIGV2ZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBzdHJpbmcgY29ycmVzcG9uZGluZyB0byB0aGlzIGBiZWZvcmVJbnB1dGAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZUJlZm9yZUlucHV0Q2hhcnModG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZDpcbiAgICAgIHJldHVybiBnZXREYXRhRnJvbUN1c3RvbUV2ZW50KG5hdGl2ZUV2ZW50KTtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgICAvKipcbiAgICAgICAqIElmIG5hdGl2ZSBgdGV4dElucHV0YCBldmVudHMgYXJlIGF2YWlsYWJsZSwgb3VyIGdvYWwgaXMgdG8gbWFrZVxuICAgICAgICogdXNlIG9mIHRoZW0uIEhvd2V2ZXIsIHRoZXJlIGlzIGEgc3BlY2lhbCBjYXNlOiB0aGUgc3BhY2ViYXIga2V5LlxuICAgICAgICogSW4gV2Via2l0LCBwcmV2ZW50aW5nIGRlZmF1bHQgb24gYSBzcGFjZWJhciBgdGV4dElucHV0YCBldmVudFxuICAgICAgICogY2FuY2VscyBjaGFyYWN0ZXIgaW5zZXJ0aW9uLCBidXQgaXQgKmFsc28qIGNhdXNlcyB0aGUgYnJvd3NlclxuICAgICAgICogdG8gZmFsbCBiYWNrIHRvIGl0cyBkZWZhdWx0IHNwYWNlYmFyIGJlaGF2aW9yIG9mIHNjcm9sbGluZyB0aGVcbiAgICAgICAqIHBhZ2UuXG4gICAgICAgKlxuICAgICAgICogVHJhY2tpbmcgYXQ6XG4gICAgICAgKiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MzU1MTAzXG4gICAgICAgKlxuICAgICAgICogVG8gYXZvaWQgdGhpcyBpc3N1ZSwgdXNlIHRoZSBrZXlwcmVzcyBldmVudCBhcyBpZiBubyBgdGV4dElucHV0YFxuICAgICAgICogZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICovXG4gICAgICB2YXIgd2hpY2ggPSBuYXRpdmVFdmVudC53aGljaDtcbiAgICAgIGlmICh3aGljaCAhPT0gU1BBQ0VCQVJfQ09ERSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaGFzU3BhY2VLZXlwcmVzcyA9IHRydWU7XG4gICAgICByZXR1cm4gU1BBQ0VCQVJfQ0hBUjtcblxuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUZXh0SW5wdXQ6XG4gICAgICAvLyBSZWNvcmQgdGhlIGNoYXJhY3RlcnMgdG8gYmUgYWRkZWQgdG8gdGhlIERPTS5cbiAgICAgIHZhciBjaGFycyA9IG5hdGl2ZUV2ZW50LmRhdGE7XG5cbiAgICAgIC8vIElmIGl0J3MgYSBzcGFjZWJhciBjaGFyYWN0ZXIsIGFzc3VtZSB0aGF0IHdlIGhhdmUgYWxyZWFkeSBoYW5kbGVkXG4gICAgICAvLyBpdCBhdCB0aGUga2V5cHJlc3MgbGV2ZWwgYW5kIGJhaWwgaW1tZWRpYXRlbHkuIEFuZHJvaWQgQ2hyb21lXG4gICAgICAvLyBkb2Vzbid0IGdpdmUgdXMga2V5Y29kZXMsIHNvIHdlIG5lZWQgdG8gYmxhY2tsaXN0IGl0LlxuICAgICAgaWYgKGNoYXJzID09PSBTUEFDRUJBUl9DSEFSICYmIGhhc1NwYWNlS2V5cHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGFycztcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBGb3Igb3RoZXIgbmF0aXZlIGV2ZW50IHR5cGVzLCBkbyBub3RoaW5nLlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBGb3IgYnJvd3NlcnMgdGhhdCBkbyBub3QgcHJvdmlkZSB0aGUgYHRleHRJbnB1dGAgZXZlbnQsIGV4dHJhY3QgdGhlXG4gKiBhcHByb3ByaWF0ZSBzdHJpbmcgdG8gdXNlIGZvciBTeW50aGV0aWNJbnB1dEV2ZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBmYWxsYmFjayBzdHJpbmcgZm9yIHRoaXMgYGJlZm9yZUlucHV0YCBldmVudC5cbiAqL1xuZnVuY3Rpb24gZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgLy8gSWYgd2UgYXJlIGN1cnJlbnRseSBjb21wb3NpbmcgKElNRSkgYW5kIHVzaW5nIGEgZmFsbGJhY2sgdG8gZG8gc28sXG4gIC8vIHRyeSB0byBleHRyYWN0IHRoZSBjb21wb3NlZCBjaGFyYWN0ZXJzIGZyb20gdGhlIGZhbGxiYWNrIG9iamVjdC5cbiAgaWYgKGN1cnJlbnRDb21wb3NpdGlvbikge1xuICAgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQgfHwgaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgICB2YXIgY2hhcnMgPSBjdXJyZW50Q29tcG9zaXRpb24uZ2V0RGF0YSgpO1xuICAgICAgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlLnJlbGVhc2UoY3VycmVudENvbXBvc2l0aW9uKTtcbiAgICAgIGN1cnJlbnRDb21wb3NpdGlvbiA9IG51bGw7XG4gICAgICByZXR1cm4gY2hhcnM7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGFzdGU6XG4gICAgICAvLyBJZiBhIHBhc3RlIGV2ZW50IG9jY3VycyBhZnRlciBhIGtleXByZXNzLCB0aHJvdyBvdXQgdGhlIGlucHV0XG4gICAgICAvLyBjaGFycy4gUGFzdGUgZXZlbnRzIHNob3VsZCBub3QgbGVhZCB0byBCZWZvcmVJbnB1dCBldmVudHMuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgICAvKipcbiAgICAgICAqIEFzIG9mIHYyNywgRmlyZWZveCBtYXkgZmlyZSBrZXlwcmVzcyBldmVudHMgZXZlbiB3aGVuIG5vIGNoYXJhY3RlclxuICAgICAgICogd2lsbCBiZSBpbnNlcnRlZC4gQSBmZXcgcG9zc2liaWxpdGllczpcbiAgICAgICAqXG4gICAgICAgKiAtIGB3aGljaGAgaXMgYDBgLiBBcnJvdyBrZXlzLCBFc2Mga2V5LCBldGMuXG4gICAgICAgKlxuICAgICAgICogLSBgd2hpY2hgIGlzIHRoZSBwcmVzc2VkIGtleSBjb2RlLCBidXQgbm8gY2hhciBpcyBhdmFpbGFibGUuXG4gICAgICAgKiAgIEV4OiAnQWx0R3IgKyBkYCBpbiBQb2xpc2guIFRoZXJlIGlzIG5vIG1vZGlmaWVkIGNoYXJhY3RlciBmb3JcbiAgICAgICAqICAgdGhpcyBrZXkgY29tYmluYXRpb24gYW5kIG5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZCBpbnRvIHRoZVxuICAgICAgICogICBkb2N1bWVudCwgYnV0IEZGIGZpcmVzIHRoZSBrZXlwcmVzcyBmb3IgY2hhciBjb2RlIGAxMDBgIGFueXdheS5cbiAgICAgICAqICAgTm8gYGlucHV0YCBldmVudCB3aWxsIG9jY3VyLlxuICAgICAgICpcbiAgICAgICAqIC0gYHdoaWNoYCBpcyB0aGUgcHJlc3NlZCBrZXkgY29kZSwgYnV0IGEgY29tbWFuZCBjb21iaW5hdGlvbiBpc1xuICAgICAgICogICBiZWluZyB1c2VkLiBFeDogYENtZCtDYC4gTm8gY2hhcmFjdGVyIGlzIGluc2VydGVkLCBhbmQgbm9cbiAgICAgICAqICAgYGlucHV0YCBldmVudCB3aWxsIG9jY3VyLlxuICAgICAgICovXG4gICAgICBpZiAobmF0aXZlRXZlbnQud2hpY2ggJiYgIWlzS2V5cHJlc3NDb21tYW5kKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShuYXRpdmVFdmVudC53aGljaCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPyBudWxsIDogbmF0aXZlRXZlbnQuZGF0YTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IGEgU3ludGhldGljSW5wdXRFdmVudCBmb3IgYGJlZm9yZUlucHV0YCwgYmFzZWQgb24gZWl0aGVyIG5hdGl2ZVxuICogYHRleHRJbnB1dGAgb3IgZmFsbGJhY2sgYmVoYXZpb3IuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9vYmplY3R9IEEgU3ludGhldGljSW5wdXRFdmVudC5cbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEJlZm9yZUlucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIHZhciBjaGFycztcblxuICBpZiAoY2FuVXNlVGV4dElucHV0RXZlbnQpIHtcbiAgICBjaGFycyA9IGdldE5hdGl2ZUJlZm9yZUlucHV0Q2hhcnModG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCk7XG4gIH0gZWxzZSB7XG4gICAgY2hhcnMgPSBnZXRGYWxsYmFja0JlZm9yZUlucHV0Q2hhcnModG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCk7XG4gIH1cblxuICAvLyBJZiBubyBjaGFyYWN0ZXJzIGFyZSBiZWluZyBpbnNlcnRlZCwgbm8gQmVmb3JlSW5wdXQgZXZlbnQgc2hvdWxkXG4gIC8vIGJlIGZpcmVkLlxuICBpZiAoIWNoYXJzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgZXZlbnQgPSBTeW50aGV0aWNJbnB1dEV2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmJlZm9yZUlucHV0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gIGV2ZW50LmRhdGEgPSBjaGFycztcbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgcmV0dXJuIGV2ZW50O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBgb25CZWZvcmVJbnB1dGAgZXZlbnQgdG8gbWF0Y2hcbiAqIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMTMxMTA1LyNldmVudHMtaW5wdXRldmVudHMuXG4gKlxuICogVGhpcyBldmVudCBwbHVnaW4gaXMgYmFzZWQgb24gdGhlIG5hdGl2ZSBgdGV4dElucHV0YCBldmVudFxuICogYXZhaWxhYmxlIGluIENocm9tZSwgU2FmYXJpLCBPcGVyYSwgYW5kIElFLiBUaGlzIGV2ZW50IGZpcmVzIGFmdGVyXG4gKiBgb25LZXlQcmVzc2AgYW5kIGBvbkNvbXBvc2l0aW9uRW5kYCwgYnV0IGJlZm9yZSBgb25JbnB1dGAuXG4gKlxuICogYGJlZm9yZUlucHV0YCBpcyBzcGVjJ2QgYnV0IG5vdCBpbXBsZW1lbnRlZCBpbiBhbnkgYnJvd3NlcnMsIGFuZFxuICogdGhlIGBpbnB1dGAgZXZlbnQgZG9lcyBub3QgcHJvdmlkZSBhbnkgdXNlZnVsIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgaGFzXG4gKiBhY3R1YWxseSBiZWVuIGFkZGVkLCBjb250cmFyeSB0byB0aGUgc3BlYy4gVGh1cywgYHRleHRJbnB1dGAgaXMgdGhlIGJlc3RcbiAqIGF2YWlsYWJsZSBldmVudCB0byBpZGVudGlmeSB0aGUgY2hhcmFjdGVycyB0aGF0IGhhdmUgYWN0dWFsbHkgYmVlbiBpbnNlcnRlZFxuICogaW50byB0aGUgdGFyZ2V0IG5vZGUuXG4gKlxuICogVGhpcyBwbHVnaW4gaXMgYWxzbyByZXNwb25zaWJsZSBmb3IgZW1pdHRpbmcgYGNvbXBvc2l0aW9uYCBldmVudHMsIHRodXNcbiAqIGFsbG93aW5nIHVzIHRvIHNoYXJlIGNvbXBvc2l0aW9uIGZhbGxiYWNrIGNvZGUgZm9yIGJvdGggYGJlZm9yZUlucHV0YCBhbmRcbiAqIGBjb21wb3NpdGlvbmAgZXZlbnQgdHlwZXMuXG4gKi9cbnZhciBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHJldHVybiBbZXh0cmFjdENvbXBvc2l0aW9uRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSwgZXh0cmFjdEJlZm9yZUlucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KV07XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQmVmb3JlSW5wdXRFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ1NTUHJvcGVydHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ1NTIHByb3BlcnRpZXMgd2hpY2ggYWNjZXB0IG51bWJlcnMgYnV0IGFyZSBub3QgaW4gdW5pdHMgb2YgXCJweFwiLlxuICovXG52YXIgaXNVbml0bGVzc051bWJlciA9IHtcbiAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IHRydWUsXG4gIGJveEZsZXg6IHRydWUsXG4gIGJveEZsZXhHcm91cDogdHJ1ZSxcbiAgYm94T3JkaW5hbEdyb3VwOiB0cnVlLFxuICBjb2x1bW5Db3VudDogdHJ1ZSxcbiAgZmxleDogdHJ1ZSxcbiAgZmxleEdyb3c6IHRydWUsXG4gIGZsZXhQb3NpdGl2ZTogdHJ1ZSxcbiAgZmxleFNocmluazogdHJ1ZSxcbiAgZmxleE5lZ2F0aXZlOiB0cnVlLFxuICBmbGV4T3JkZXI6IHRydWUsXG4gIGZvbnRXZWlnaHQ6IHRydWUsXG4gIGxpbmVDbGFtcDogdHJ1ZSxcbiAgbGluZUhlaWdodDogdHJ1ZSxcbiAgb3BhY2l0eTogdHJ1ZSxcbiAgb3JkZXI6IHRydWUsXG4gIG9ycGhhbnM6IHRydWUsXG4gIHRhYlNpemU6IHRydWUsXG4gIHdpZG93czogdHJ1ZSxcbiAgekluZGV4OiB0cnVlLFxuICB6b29tOiB0cnVlLFxuXG4gIC8vIFNWRy1yZWxhdGVkIHByb3BlcnRpZXNcbiAgZmlsbE9wYWNpdHk6IHRydWUsXG4gIHN0b3BPcGFjaXR5OiB0cnVlLFxuICBzdHJva2VEYXNob2Zmc2V0OiB0cnVlLFxuICBzdHJva2VPcGFjaXR5OiB0cnVlLFxuICBzdHJva2VXaWR0aDogdHJ1ZVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4IHZlbmRvci1zcGVjaWZpYyBwcmVmaXgsIGVnOiBXZWJraXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgc3R5bGUgbmFtZSwgZWc6IHRyYW5zaXRpb25EdXJhdGlvblxuICogQHJldHVybiB7c3RyaW5nfSBzdHlsZSBuYW1lIHByZWZpeGVkIHdpdGggYHByZWZpeGAsIHByb3Blcmx5IGNhbWVsQ2FzZWQsIGVnOlxuICogV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uXG4gKi9cbmZ1bmN0aW9uIHByZWZpeEtleShwcmVmaXgsIGtleSkge1xuICByZXR1cm4gcHJlZml4ICsga2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKTtcbn1cblxuLyoqXG4gKiBTdXBwb3J0IHN0eWxlIG5hbWVzIHRoYXQgbWF5IGNvbWUgcGFzc2VkIGluIHByZWZpeGVkIGJ5IGFkZGluZyBwZXJtdXRhdGlvbnNcbiAqIG9mIHZlbmRvciBwcmVmaXhlcy5cbiAqL1xudmFyIHByZWZpeGVzID0gWydXZWJraXQnLCAnbXMnLCAnTW96JywgJ08nXTtcblxuLy8gVXNpbmcgT2JqZWN0LmtleXMgaGVyZSwgb3IgZWxzZSB0aGUgdmFuaWxsYSBmb3ItaW4gbG9vcCBtYWtlcyBJRTggZ28gaW50byBhblxuLy8gaW5maW5pdGUgbG9vcCwgYmVjYXVzZSBpdCBpdGVyYXRlcyBvdmVyIHRoZSBuZXdseSBhZGRlZCBwcm9wcyB0b28uXG5PYmplY3Qua2V5cyhpc1VuaXRsZXNzTnVtYmVyKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gIHByZWZpeGVzLmZvckVhY2goZnVuY3Rpb24gKHByZWZpeCkge1xuICAgIGlzVW5pdGxlc3NOdW1iZXJbcHJlZml4S2V5KHByZWZpeCwgcHJvcCldID0gaXNVbml0bGVzc051bWJlcltwcm9wXTtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBNb3N0IHN0eWxlIHByb3BlcnRpZXMgY2FuIGJlIHVuc2V0IGJ5IGRvaW5nIC5zdHlsZVtwcm9wXSA9ICcnIGJ1dCBJRThcbiAqIGRvZXNuJ3QgbGlrZSBkb2luZyB0aGF0IHdpdGggc2hvcnRoYW5kIHByb3BlcnRpZXMgc28gZm9yIHRoZSBwcm9wZXJ0aWVzIHRoYXRcbiAqIElFOCBicmVha3Mgb24sIHdoaWNoIGFyZSBsaXN0ZWQgaGVyZSwgd2UgaW5zdGVhZCB1bnNldCBlYWNoIG9mIHRoZVxuICogaW5kaXZpZHVhbCBwcm9wZXJ0aWVzLiBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzODUuXG4gKiBUaGUgNC12YWx1ZSAnY2xvY2snIHByb3BlcnRpZXMgbGlrZSBtYXJnaW4sIHBhZGRpbmcsIGJvcmRlci13aWR0aCBzZWVtIHRvXG4gKiBiZWhhdmUgd2l0aG91dCBhbnkgcHJvYmxlbXMuIEN1cmlvdXNseSwgbGlzdC1zdHlsZSB3b3JrcyB0b28gd2l0aG91dCBhbnlcbiAqIHNwZWNpYWwgcHJvZGRpbmcuXG4gKi9cbnZhciBzaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnMgPSB7XG4gIGJhY2tncm91bmQ6IHtcbiAgICBiYWNrZ3JvdW5kQXR0YWNobWVudDogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IHRydWUsXG4gICAgYmFja2dyb3VuZEltYWdlOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblg6IHRydWUsXG4gICAgYmFja2dyb3VuZFBvc2l0aW9uWTogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kUmVwZWF0OiB0cnVlXG4gIH0sXG4gIGJhY2tncm91bmRQb3NpdGlvbjoge1xuICAgIGJhY2tncm91bmRQb3NpdGlvblg6IHRydWUsXG4gICAgYmFja2dyb3VuZFBvc2l0aW9uWTogdHJ1ZVxuICB9LFxuICBib3JkZXI6IHtcbiAgICBib3JkZXJXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJTdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJDb2xvcjogdHJ1ZVxuICB9LFxuICBib3JkZXJCb3R0b206IHtcbiAgICBib3JkZXJCb3R0b21XaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJCb3R0b21TdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJCb3R0b21Db2xvcjogdHJ1ZVxuICB9LFxuICBib3JkZXJMZWZ0OiB7XG4gICAgYm9yZGVyTGVmdFdpZHRoOiB0cnVlLFxuICAgIGJvcmRlckxlZnRTdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJMZWZ0Q29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyUmlnaHQ6IHtcbiAgICBib3JkZXJSaWdodFdpZHRoOiB0cnVlLFxuICAgIGJvcmRlclJpZ2h0U3R5bGU6IHRydWUsXG4gICAgYm9yZGVyUmlnaHRDb2xvcjogdHJ1ZVxuICB9LFxuICBib3JkZXJUb3A6IHtcbiAgICBib3JkZXJUb3BXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJUb3BTdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJUb3BDb2xvcjogdHJ1ZVxuICB9LFxuICBmb250OiB7XG4gICAgZm9udFN0eWxlOiB0cnVlLFxuICAgIGZvbnRWYXJpYW50OiB0cnVlLFxuICAgIGZvbnRXZWlnaHQ6IHRydWUsXG4gICAgZm9udFNpemU6IHRydWUsXG4gICAgbGluZUhlaWdodDogdHJ1ZSxcbiAgICBmb250RmFtaWx5OiB0cnVlXG4gIH0sXG4gIG91dGxpbmU6IHtcbiAgICBvdXRsaW5lV2lkdGg6IHRydWUsXG4gICAgb3V0bGluZVN0eWxlOiB0cnVlLFxuICAgIG91dGxpbmVDb2xvcjogdHJ1ZVxuICB9XG59O1xuXG52YXIgQ1NTUHJvcGVydHkgPSB7XG4gIGlzVW5pdGxlc3NOdW1iZXI6IGlzVW5pdGxlc3NOdW1iZXIsXG4gIHNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uczogc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENTU1Byb3BlcnR5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDU1NQcm9wZXJ0eU9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ1NTUHJvcGVydHkgPSByZXF1aXJlKCcuL0NTU1Byb3BlcnR5Jyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG5cbnZhciBjYW1lbGl6ZVN0eWxlTmFtZSA9IHJlcXVpcmUoJ2ZianMvbGliL2NhbWVsaXplU3R5bGVOYW1lJyk7XG52YXIgZGFuZ2Vyb3VzU3R5bGVWYWx1ZSA9IHJlcXVpcmUoJy4vZGFuZ2Vyb3VzU3R5bGVWYWx1ZScpO1xudmFyIGh5cGhlbmF0ZVN0eWxlTmFtZSA9IHJlcXVpcmUoJ2ZianMvbGliL2h5cGhlbmF0ZVN0eWxlTmFtZScpO1xudmFyIG1lbW9pemVTdHJpbmdPbmx5ID0gcmVxdWlyZSgnZmJqcy9saWIvbWVtb2l6ZVN0cmluZ09ubHknKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgcHJvY2Vzc1N0eWxlTmFtZSA9IG1lbW9pemVTdHJpbmdPbmx5KGZ1bmN0aW9uIChzdHlsZU5hbWUpIHtcbiAgcmV0dXJuIGh5cGhlbmF0ZVN0eWxlTmFtZShzdHlsZU5hbWUpO1xufSk7XG5cbnZhciBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyA9IGZhbHNlO1xudmFyIHN0eWxlRmxvYXRBY2Nlc3NvciA9ICdjc3NGbG9hdCc7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIHZhciB0ZW1wU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcbiAgdHJ5IHtcbiAgICAvLyBJRTggdGhyb3dzIFwiSW52YWxpZCBhcmd1bWVudC5cIiBpZiByZXNldHRpbmcgc2hvcnRoYW5kIHN0eWxlIHByb3BlcnRpZXMuXG4gICAgdGVtcFN0eWxlLmZvbnQgPSAnJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGhhc1Nob3J0aGFuZFByb3BlcnR5QnVnID0gdHJ1ZTtcbiAgfVxuICAvLyBJRTggb25seSBzdXBwb3J0cyBhY2Nlc3NpbmcgY3NzRmxvYXQgKHN0YW5kYXJkKSBhcyBzdHlsZUZsb2F0XG4gIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuY3NzRmxvYXQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0eWxlRmxvYXRBY2Nlc3NvciA9ICdzdHlsZUZsb2F0JztcbiAgfVxufVxuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAvLyAnbXNUcmFuc2Zvcm0nIGlzIGNvcnJlY3QsIGJ1dCB0aGUgb3RoZXIgcHJlZml4ZXMgc2hvdWxkIGJlIGNhcGl0YWxpemVkXG4gIHZhciBiYWRWZW5kb3JlZFN0eWxlTmFtZVBhdHRlcm4gPSAvXig/OndlYmtpdHxtb3p8bylbQS1aXS87XG5cbiAgLy8gc3R5bGUgdmFsdWVzIHNob3VsZG4ndCBjb250YWluIGEgc2VtaWNvbG9uXG4gIHZhciBiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4gPSAvO1xccyokLztcblxuICB2YXIgd2FybmVkU3R5bGVOYW1lcyA9IHt9O1xuICB2YXIgd2FybmVkU3R5bGVWYWx1ZXMgPSB7fTtcblxuICB2YXIgd2Fybkh5cGhlbmF0ZWRTdHlsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZU5hbWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFN0eWxlTmFtZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRTdHlsZU5hbWVzW25hbWVdID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1Vuc3VwcG9ydGVkIHN0eWxlIHByb3BlcnR5ICVzLiBEaWQgeW91IG1lYW4gJXM/JywgbmFtZSwgY2FtZWxpemVTdHlsZU5hbWUobmFtZSkpIDogdW5kZWZpbmVkO1xuICB9O1xuXG4gIHZhciB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZU5hbWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFN0eWxlTmFtZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRTdHlsZU5hbWVzW25hbWVdID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1Vuc3VwcG9ydGVkIHZlbmRvci1wcmVmaXhlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICB2YXIgd2FyblN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHdhcm5lZFN0eWxlVmFsdWVzLmhhc093blByb3BlcnR5KHZhbHVlKSAmJiB3YXJuZWRTdHlsZVZhbHVlc1t2YWx1ZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRTdHlsZVZhbHVlc1t2YWx1ZV0gPSB0cnVlO1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnU3R5bGUgcHJvcGVydHkgdmFsdWVzIHNob3VsZG5cXCd0IGNvbnRhaW4gYSBzZW1pY29sb24uICcgKyAnVHJ5IFwiJXM6ICVzXCIgaW5zdGVhZC4nLCBuYW1lLCB2YWx1ZS5yZXBsYWNlKGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybiwgJycpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKi9cbiAgdmFyIHdhcm5WYWxpZFN0eWxlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKG5hbWUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIHdhcm5IeXBoZW5hdGVkU3R5bGVOYW1lKG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoYmFkVmVuZG9yZWRTdHlsZU5hbWVQYXR0ZXJuLnRlc3QobmFtZSkpIHtcbiAgICAgIHdhcm5CYWRWZW5kb3JlZFN0eWxlTmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybi50ZXN0KHZhbHVlKSkge1xuICAgICAgd2FyblN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uKG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgZGVhbGluZyB3aXRoIENTUyBwcm9wZXJ0aWVzLlxuICovXG52YXIgQ1NTUHJvcGVydHlPcGVyYXRpb25zID0ge1xuXG4gIC8qKlxuICAgKiBTZXJpYWxpemVzIGEgbWFwcGluZyBvZiBzdHlsZSBwcm9wZXJ0aWVzIGZvciB1c2UgYXMgaW5saW5lIHN0eWxlczpcbiAgICpcbiAgICogICA+IGNyZWF0ZU1hcmt1cEZvclN0eWxlcyh7d2lkdGg6ICcyMDBweCcsIGhlaWdodDogMH0pXG4gICAqICAgXCJ3aWR0aDoyMDBweDtoZWlnaHQ6MDtcIlxuICAgKlxuICAgKiBVbmRlZmluZWQgdmFsdWVzIGFyZSBpZ25vcmVkIHNvIHRoYXQgZGVjbGFyYXRpdmUgcHJvZ3JhbW1pbmcgaXMgZWFzaWVyLlxuICAgKiBUaGUgcmVzdWx0IHNob3VsZCBiZSBIVE1MLWVzY2FwZWQgYmVmb3JlIGluc2VydGlvbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzdHlsZXNcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGNyZWF0ZU1hcmt1cEZvclN0eWxlczogZnVuY3Rpb24gKHN0eWxlcykge1xuICAgIHZhciBzZXJpYWxpemVkID0gJyc7XG4gICAgZm9yICh2YXIgc3R5bGVOYW1lIGluIHN0eWxlcykge1xuICAgICAgaWYgKCFzdHlsZXMuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBzdHlsZVZhbHVlID0gc3R5bGVzW3N0eWxlTmFtZV07XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuVmFsaWRTdHlsZShzdHlsZU5hbWUsIHN0eWxlVmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICBzZXJpYWxpemVkICs9IHByb2Nlc3NTdHlsZU5hbWUoc3R5bGVOYW1lKSArICc6JztcbiAgICAgICAgc2VyaWFsaXplZCArPSBkYW5nZXJvdXNTdHlsZVZhbHVlKHN0eWxlTmFtZSwgc3R5bGVWYWx1ZSkgKyAnOyc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkIHx8IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGZvciBtdWx0aXBsZSBzdHlsZXMgb24gYSBub2RlLiAgSWYgYSB2YWx1ZSBpcyBzcGVjaWZpZWQgYXNcbiAgICogJycgKGVtcHR5IHN0cmluZyksIHRoZSBjb3JyZXNwb25kaW5nIHN0eWxlIHByb3BlcnR5IHdpbGwgYmUgdW5zZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGVzXG4gICAqL1xuICBzZXRWYWx1ZUZvclN0eWxlczogZnVuY3Rpb24gKG5vZGUsIHN0eWxlcykge1xuICAgIHZhciBzdHlsZSA9IG5vZGUuc3R5bGU7XG4gICAgZm9yICh2YXIgc3R5bGVOYW1lIGluIHN0eWxlcykge1xuICAgICAgaWYgKCFzdHlsZXMuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm5WYWxpZFN0eWxlKHN0eWxlTmFtZSwgc3R5bGVzW3N0eWxlTmFtZV0pO1xuICAgICAgfVxuICAgICAgdmFyIHN0eWxlVmFsdWUgPSBkYW5nZXJvdXNTdHlsZVZhbHVlKHN0eWxlTmFtZSwgc3R5bGVzW3N0eWxlTmFtZV0pO1xuICAgICAgaWYgKHN0eWxlTmFtZSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICBzdHlsZU5hbWUgPSBzdHlsZUZsb2F0QWNjZXNzb3I7XG4gICAgICB9XG4gICAgICBpZiAoc3R5bGVWYWx1ZSkge1xuICAgICAgICBzdHlsZVtzdHlsZU5hbWVdID0gc3R5bGVWYWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBleHBhbnNpb24gPSBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyAmJiBDU1NQcm9wZXJ0eS5zaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnNbc3R5bGVOYW1lXTtcbiAgICAgICAgaWYgKGV4cGFuc2lvbikge1xuICAgICAgICAgIC8vIFNob3J0aGFuZCBwcm9wZXJ0eSB0aGF0IElFOCB3b24ndCBsaWtlIHVuc2V0dGluZywgc28gdW5zZXQgZWFjaFxuICAgICAgICAgIC8vIGNvbXBvbmVudCB0byBwbGFjYXRlIGl0XG4gICAgICAgICAgZm9yICh2YXIgaW5kaXZpZHVhbFN0eWxlTmFtZSBpbiBleHBhbnNpb24pIHtcbiAgICAgICAgICAgIHN0eWxlW2luZGl2aWR1YWxTdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlW3N0eWxlTmFtZV0gPSAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoQ1NTUHJvcGVydHlPcGVyYXRpb25zLCAnQ1NTUHJvcGVydHlPcGVyYXRpb25zJywge1xuICBzZXRWYWx1ZUZvclN0eWxlczogJ3NldFZhbHVlRm9yU3R5bGVzJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ1NTUHJvcGVydHlPcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDYWxsYmFja1F1ZXVlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHBzZXVkby1ldmVudCBtb2R1bGUgdG8gaGVscCBrZWVwIHRyYWNrIG9mIGNvbXBvbmVudHMgd2FpdGluZyB0b1xuICogYmUgbm90aWZpZWQgd2hlbiB0aGVpciBET00gcmVwcmVzZW50YXRpb25zIGFyZSBhdmFpbGFibGUgZm9yIHVzZS5cbiAqXG4gKiBUaGlzIGltcGxlbWVudHMgYFBvb2xlZENsYXNzYCwgc28geW91IHNob3VsZCBuZXZlciBuZWVkIHRvIGluc3RhbnRpYXRlIHRoaXMuXG4gKiBJbnN0ZWFkLCB1c2UgYENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKClgLlxuICpcbiAqIEBjbGFzcyBSZWFjdE1vdW50UmVhZHlcbiAqIEBpbXBsZW1lbnRzIFBvb2xlZENsYXNzXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gQ2FsbGJhY2tRdWV1ZSgpIHtcbiAgdGhpcy5fY2FsbGJhY2tzID0gbnVsbDtcbiAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xufVxuXG5hc3NpZ24oQ2FsbGJhY2tRdWV1ZS5wcm90b3R5cGUsIHtcblxuICAvKipcbiAgICogRW5xdWV1ZXMgYSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gYG5vdGlmeUFsbGAgaXMgaW52b2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgSW52b2tlZCB3aGVuIGBub3RpZnlBbGxgIGlzIGludm9rZWQuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gY29udGV4dCBDb250ZXh0IHRvIGNhbGwgYGNhbGxiYWNrYCB3aXRoLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWU6IGZ1bmN0aW9uIChjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCBbXTtcbiAgICB0aGlzLl9jb250ZXh0cyA9IHRoaXMuX2NvbnRleHRzIHx8IFtdO1xuICAgIHRoaXMuX2NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB0aGlzLl9jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2VzIGFsbCBlbnF1ZXVlZCBjYWxsYmFja3MgYW5kIGNsZWFycyB0aGUgcXVldWUuIFRoaXMgaXMgaW52b2tlZCBhZnRlclxuICAgKiB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIG9mIGEgY29tcG9uZW50IGhhcyBiZWVuIGNyZWF0ZWQgb3IgdXBkYXRlZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBub3RpZnlBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzO1xuICAgIHZhciBjb250ZXh0cyA9IHRoaXMuX2NvbnRleHRzO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICEoY2FsbGJhY2tzLmxlbmd0aCA9PT0gY29udGV4dHMubGVuZ3RoKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNaXNtYXRjaGVkIGxpc3Qgb2YgY29udGV4dHMgaW4gY2FsbGJhY2sgcXVldWUnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9jYWxsYmFja3MgPSBudWxsO1xuICAgICAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwoY29udGV4dHNbaV0pO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgICBjb250ZXh0cy5sZW5ndGggPSAwO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCBxdWV1ZS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IG51bGw7XG4gICAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG59KTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKENhbGxiYWNrUXVldWUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbGxiYWNrUXVldWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIENoYW5nZUV2ZW50UGx1Z2luXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2dldEV2ZW50VGFyZ2V0Jyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xudmFyIGlzVGV4dElucHV0RWxlbWVudCA9IHJlcXVpcmUoJy4vaXNUZXh0SW5wdXRFbGVtZW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBjaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNoYW5nZTogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2hhbmdlQ2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSwgdG9wTGV2ZWxUeXBlcy50b3BDbGljaywgdG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgdG9wTGV2ZWxUeXBlcy50b3BJbnB1dCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZV1cbiAgfVxufTtcblxuLyoqXG4gKiBGb3IgSUUgc2hpbXNcbiAqL1xudmFyIGFjdGl2ZUVsZW1lbnQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudFZhbHVlID0gbnVsbDtcbnZhciBhY3RpdmVFbGVtZW50VmFsdWVQcm9wID0gbnVsbDtcblxuLyoqXG4gKiBTRUNUSU9OOiBoYW5kbGUgYGNoYW5nZWAgZXZlbnRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkVXNlQ2hhbmdlRXZlbnQoZWxlbSkge1xuICB2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5vZGVOYW1lID09PSAnc2VsZWN0JyB8fCBub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBlbGVtLnR5cGUgPT09ICdmaWxlJztcbn1cblxudmFyIGRvZXNDaGFuZ2VFdmVudEJ1YmJsZSA9IGZhbHNlO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAvLyBTZWUgYGhhbmRsZUNoYW5nZWAgY29tbWVudCBiZWxvd1xuICBkb2VzQ2hhbmdlRXZlbnRCdWJibGUgPSBpc0V2ZW50U3VwcG9ydGVkKCdjaGFuZ2UnKSAmJiAoISgnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCkgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID4gOCk7XG59XG5cbmZ1bmN0aW9uIG1hbnVhbERpc3BhdGNoQ2hhbmdlRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGV2ZW50ID0gU3ludGhldGljRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuY2hhbmdlLCBhY3RpdmVFbGVtZW50SUQsIG5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkpO1xuICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuXG4gIC8vIElmIGNoYW5nZSBhbmQgcHJvcGVydHljaGFuZ2UgYnViYmxlZCwgd2UnZCBqdXN0IGJpbmQgdG8gaXQgbGlrZSBhbGwgdGhlXG4gIC8vIG90aGVyIGV2ZW50cyBhbmQgaGF2ZSBpdCBnbyB0aHJvdWdoIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci4gU2luY2UgaXRcbiAgLy8gZG9lc24ndCwgd2UgbWFudWFsbHkgbGlzdGVuIGZvciB0aGUgZXZlbnRzIGFuZCBzbyB3ZSBoYXZlIHRvIGVucXVldWUgYW5kXG4gIC8vIHByb2Nlc3MgdGhlIGFic3RyYWN0IGV2ZW50IG1hbnVhbGx5LlxuICAvL1xuICAvLyBCYXRjaGluZyBpcyBuZWNlc3NhcnkgaGVyZSBpbiBvcmRlciB0byBlbnN1cmUgdGhhdCBhbGwgZXZlbnQgaGFuZGxlcnMgcnVuXG4gIC8vIGJlZm9yZSB0aGUgbmV4dCByZXJlbmRlciAoaW5jbHVkaW5nIGV2ZW50IGhhbmRsZXJzIGF0dGFjaGVkIHRvIGFuY2VzdG9yXG4gIC8vIGVsZW1lbnRzIGluc3RlYWQgb2YgZGlyZWN0bHkgb24gdGhlIGlucHV0KS4gV2l0aG91dCB0aGlzLCBjb250cm9sbGVkXG4gIC8vIGNvbXBvbmVudHMgZG9uJ3Qgd29yayBwcm9wZXJseSBpbiBjb25qdW5jdGlvbiB3aXRoIGV2ZW50IGJ1YmJsaW5nIGJlY2F1c2VcbiAgLy8gdGhlIGNvbXBvbmVudCBpcyByZXJlbmRlcmVkIGFuZCB0aGUgdmFsdWUgcmV2ZXJ0ZWQgYmVmb3JlIGFsbCB0aGUgZXZlbnRcbiAgLy8gaGFuZGxlcnMgY2FuIHJ1bi4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvNzA4LlxuICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMocnVuRXZlbnRJbkJhdGNoLCBldmVudCk7XG59XG5cbmZ1bmN0aW9uIHJ1bkV2ZW50SW5CYXRjaChldmVudCkge1xuICBFdmVudFBsdWdpbkh1Yi5lbnF1ZXVlRXZlbnRzKGV2ZW50KTtcbiAgRXZlbnRQbHVnaW5IdWIucHJvY2Vzc0V2ZW50UXVldWUoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBzdGFydFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgodGFyZ2V0LCB0YXJnZXRJRCkge1xuICBhY3RpdmVFbGVtZW50ID0gdGFyZ2V0O1xuICBhY3RpdmVFbGVtZW50SUQgPSB0YXJnZXRJRDtcbiAgYWN0aXZlRWxlbWVudC5hdHRhY2hFdmVudCgnb25jaGFuZ2UnLCBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KTtcbn1cblxuZnVuY3Rpb24gc3RvcFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgoKSB7XG4gIGlmICghYWN0aXZlRWxlbWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBhY3RpdmVFbGVtZW50LmRldGFjaEV2ZW50KCdvbmNoYW5nZScsIG1hbnVhbERpc3BhdGNoQ2hhbmdlRXZlbnQpO1xuICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JDaGFuZ2VFdmVudCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQ2hhbmdlKSB7XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50c0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cykge1xuICAgIC8vIHN0b3BXYXRjaGluZygpIHNob3VsZCBiZSBhIG5vb3AgaGVyZSBidXQgd2UgY2FsbCBpdCBqdXN0IGluIGNhc2Ugd2VcbiAgICAvLyBtaXNzZWQgYSBibHVyIGV2ZW50IHNvbWVob3cuXG4gICAgc3RvcFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgoKTtcbiAgICBzdGFydFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgodG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICB9IGVsc2UgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BCbHVyKSB7XG4gICAgc3RvcFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgoKTtcbiAgfVxufVxuXG4vKipcbiAqIFNFQ1RJT046IGhhbmRsZSBgaW5wdXRgIGV2ZW50XG4gKi9cbnZhciBpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBmYWxzZTtcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgLy8gSUU5IGNsYWltcyB0byBzdXBwb3J0IHRoZSBpbnB1dCBldmVudCBidXQgZmFpbHMgdG8gdHJpZ2dlciBpdCB3aGVuXG4gIC8vIGRlbGV0aW5nIHRleHQsIHNvIHdlIGlnbm9yZSBpdHMgaW5wdXQgZXZlbnRzXG4gIGlzSW5wdXRFdmVudFN1cHBvcnRlZCA9IGlzRXZlbnRTdXBwb3J0ZWQoJ2lucHV0JykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDkpO1xufVxuXG4vKipcbiAqIChGb3Igb2xkIElFLikgUmVwbGFjZW1lbnQgZ2V0dGVyL3NldHRlciBmb3IgdGhlIGB2YWx1ZWAgcHJvcGVydHkgdGhhdCBnZXRzXG4gKiBzZXQgb24gdGhlIGFjdGl2ZSBlbGVtZW50LlxuICovXG52YXIgbmV3VmFsdWVQcm9wID0ge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWN0aXZlRWxlbWVudFZhbHVlUHJvcC5nZXQuY2FsbCh0aGlzKTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgLy8gQ2FzdCB0byBhIHN0cmluZyBzbyB3ZSBjYW4gZG8gZXF1YWxpdHkgY2hlY2tzLlxuICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9ICcnICsgdmFsO1xuICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3Auc2V0LmNhbGwodGhpcywgdmFsKTtcbiAgfVxufTtcblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFN0YXJ0cyB0cmFja2luZyBwcm9wZXJ0eWNoYW5nZSBldmVudHMgb24gdGhlIHBhc3NlZC1pbiBlbGVtZW50XG4gKiBhbmQgb3ZlcnJpZGUgdGhlIHZhbHVlIHByb3BlcnR5IHNvIHRoYXQgd2UgY2FuIGRpc3Rpbmd1aXNoIHVzZXIgZXZlbnRzIGZyb21cbiAqIHZhbHVlIGNoYW5nZXMgaW4gSlMuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0V2F0Y2hpbmdGb3JWYWx1ZUNoYW5nZSh0YXJnZXQsIHRhcmdldElEKSB7XG4gIGFjdGl2ZUVsZW1lbnQgPSB0YXJnZXQ7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IHRhcmdldElEO1xuICBhY3RpdmVFbGVtZW50VmFsdWUgPSB0YXJnZXQudmFsdWU7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICd2YWx1ZScpO1xuXG4gIC8vIE5vdCBndWFyZGVkIGluIGEgY2FuRGVmaW5lUHJvcGVydHkgY2hlY2s6IElFOCBzdXBwb3J0cyBkZWZpbmVQcm9wZXJ0eSBvbmx5XG4gIC8vIG9uIERPTSBlbGVtZW50c1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYWN0aXZlRWxlbWVudCwgJ3ZhbHVlJywgbmV3VmFsdWVQcm9wKTtcbiAgYWN0aXZlRWxlbWVudC5hdHRhY2hFdmVudCgnb25wcm9wZXJ0eWNoYW5nZScsIGhhbmRsZVByb3BlcnR5Q2hhbmdlKTtcbn1cblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFJlbW92ZXMgdGhlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBjdXJyZW50bHktdHJhY2tlZCBlbGVtZW50LFxuICogaWYgYW55IGV4aXN0cy5cbiAqL1xuZnVuY3Rpb24gc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKSB7XG4gIGlmICghYWN0aXZlRWxlbWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGRlbGV0ZSByZXN0b3JlcyB0aGUgb3JpZ2luYWwgcHJvcGVydHkgZGVmaW5pdGlvblxuICBkZWxldGUgYWN0aXZlRWxlbWVudC52YWx1ZTtcbiAgYWN0aXZlRWxlbWVudC5kZXRhY2hFdmVudCgnb25wcm9wZXJ0eWNoYW5nZScsIGhhbmRsZVByb3BlcnR5Q2hhbmdlKTtcblxuICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlUHJvcCA9IG51bGw7XG59XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBIYW5kbGVzIGEgcHJvcGVydHljaGFuZ2UgZXZlbnQsIHNlbmRpbmcgYSBgY2hhbmdlYCBldmVudCBpZlxuICogdGhlIHZhbHVlIG9mIHRoZSBhY3RpdmUgZWxlbWVudCBoYXMgY2hhbmdlZC5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlUHJvcGVydHlDaGFuZ2UobmF0aXZlRXZlbnQpIHtcbiAgaWYgKG5hdGl2ZUV2ZW50LnByb3BlcnR5TmFtZSAhPT0gJ3ZhbHVlJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgdmFsdWUgPSBuYXRpdmVFdmVudC5zcmNFbGVtZW50LnZhbHVlO1xuICBpZiAodmFsdWUgPT09IGFjdGl2ZUVsZW1lbnRWYWx1ZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBhY3RpdmVFbGVtZW50VmFsdWUgPSB2YWx1ZTtcblxuICBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KG5hdGl2ZUV2ZW50KTtcbn1cblxuLyoqXG4gKiBJZiBhIGBjaGFuZ2VgIGV2ZW50IHNob3VsZCBiZSBmaXJlZCwgcmV0dXJucyB0aGUgdGFyZ2V0J3MgSUQuXG4gKi9cbmZ1bmN0aW9uIGdldFRhcmdldElERm9ySW5wdXRFdmVudCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wSW5wdXQpIHtcbiAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMgKGkuZS4sIG5vdCBJRTggb3IgSUU5KSwgdGhlIGlucHV0IGV2ZW50IGlzIGV4YWN0bHlcbiAgICAvLyB3aGF0IHdlIHdhbnQgc28gZmFsbCB0aHJvdWdoIGhlcmUgYW5kIHRyaWdnZXIgYW4gYWJzdHJhY3QgZXZlbnRcbiAgICByZXR1cm4gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgfVxufVxuXG4vLyBGb3IgSUU4IGFuZCBJRTkuXG5mdW5jdGlvbiBoYW5kbGVFdmVudHNGb3JJbnB1dEV2ZW50SUUodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzKSB7XG4gICAgLy8gSW4gSUU4LCB3ZSBjYW4gY2FwdHVyZSBhbG1vc3QgYWxsIC52YWx1ZSBjaGFuZ2VzIGJ5IGFkZGluZyBhXG4gICAgLy8gcHJvcGVydHljaGFuZ2UgaGFuZGxlciBhbmQgbG9va2luZyBmb3IgZXZlbnRzIHdpdGggcHJvcGVydHlOYW1lXG4gICAgLy8gZXF1YWwgdG8gJ3ZhbHVlJ1xuICAgIC8vIEluIElFOSwgcHJvcGVydHljaGFuZ2UgZmlyZXMgZm9yIG1vc3QgaW5wdXQgZXZlbnRzIGJ1dCBpcyBidWdneSBhbmRcbiAgICAvLyBkb2Vzbid0IGZpcmUgd2hlbiB0ZXh0IGlzIGRlbGV0ZWQsIGJ1dCBjb252ZW5pZW50bHksIHNlbGVjdGlvbmNoYW5nZVxuICAgIC8vIGFwcGVhcnMgdG8gZmlyZSBpbiBhbGwgb2YgdGhlIHJlbWFpbmluZyBjYXNlcyBzbyB3ZSBjYXRjaCB0aG9zZSBhbmRcbiAgICAvLyBmb3J3YXJkIHRoZSBldmVudCBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICAvLyBJbiBlaXRoZXIgY2FzZSwgd2UgZG9uJ3Qgd2FudCB0byBjYWxsIHRoZSBldmVudCBoYW5kbGVyIGlmIHRoZSB2YWx1ZVxuICAgIC8vIGlzIGNoYW5nZWQgZnJvbSBKUyBzbyB3ZSByZWRlZmluZSBhIHNldHRlciBmb3IgYC52YWx1ZWAgdGhhdCB1cGRhdGVzXG4gICAgLy8gb3VyIGFjdGl2ZUVsZW1lbnRWYWx1ZSB2YXJpYWJsZSwgYWxsb3dpbmcgdXMgdG8gaWdub3JlIHRob3NlIGNoYW5nZXNcbiAgICAvL1xuICAgIC8vIHN0b3BXYXRjaGluZygpIHNob3VsZCBiZSBhIG5vb3AgaGVyZSBidXQgd2UgY2FsbCBpdCBqdXN0IGluIGNhc2Ugd2VcbiAgICAvLyBtaXNzZWQgYSBibHVyIGV2ZW50IHNvbWVob3cuXG4gICAgc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKTtcbiAgICBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICB9IGVsc2UgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BCbHVyKSB7XG4gICAgc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKTtcbiAgfVxufVxuXG4vLyBGb3IgSUU4IGFuZCBJRTkuXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvcklucHV0RXZlbnRJRSh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wU2VsZWN0aW9uQ2hhbmdlIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wS2V5RG93bikge1xuICAgIC8vIE9uIHRoZSBzZWxlY3Rpb25jaGFuZ2UgZXZlbnQsIHRoZSB0YXJnZXQgaXMganVzdCBkb2N1bWVudCB3aGljaCBpc24ndFxuICAgIC8vIGhlbHBmdWwgZm9yIHVzIHNvIGp1c3QgY2hlY2sgYWN0aXZlRWxlbWVudCBpbnN0ZWFkLlxuICAgIC8vXG4gICAgLy8gOTklIG9mIHRoZSB0aW1lLCBrZXlkb3duIGFuZCBrZXl1cCBhcmVuJ3QgbmVjZXNzYXJ5LiBJRTggZmFpbHMgdG8gZmlyZVxuICAgIC8vIHByb3BlcnR5Y2hhbmdlIG9uIHRoZSBmaXJzdCBpbnB1dCBldmVudCBhZnRlciBzZXR0aW5nIGB2YWx1ZWAgZnJvbSBhXG4gICAgLy8gc2NyaXB0IGFuZCBmaXJlcyBvbmx5IGtleWRvd24sIGtleXByZXNzLCBrZXl1cC4gQ2F0Y2hpbmcga2V5dXAgdXN1YWxseVxuICAgIC8vIGdldHMgaXQgYW5kIGNhdGNoaW5nIGtleWRvd24gbGV0cyB1cyBmaXJlIGFuIGV2ZW50IGZvciB0aGUgZmlyc3RcbiAgICAvLyBrZXlzdHJva2UgaWYgdXNlciBkb2VzIGEga2V5IHJlcGVhdCAoaXQnbGwgYmUgYSBsaXR0bGUgZGVsYXllZDogcmlnaHRcbiAgICAvLyBiZWZvcmUgdGhlIHNlY29uZCBrZXlzdHJva2UpLiBPdGhlciBpbnB1dCBtZXRob2RzIChlLmcuLCBwYXN0ZSkgc2VlbSB0b1xuICAgIC8vIGZpcmUgc2VsZWN0aW9uY2hhbmdlIG5vcm1hbGx5LlxuICAgIGlmIChhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQudmFsdWUgIT09IGFjdGl2ZUVsZW1lbnRWYWx1ZSkge1xuICAgICAgYWN0aXZlRWxlbWVudFZhbHVlID0gYWN0aXZlRWxlbWVudC52YWx1ZTtcbiAgICAgIHJldHVybiBhY3RpdmVFbGVtZW50SUQ7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU0VDVElPTjogaGFuZGxlIGBjbGlja2AgZXZlbnRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkVXNlQ2xpY2tFdmVudChlbGVtKSB7XG4gIC8vIFVzZSB0aGUgYGNsaWNrYCBldmVudCB0byBkZXRlY3QgY2hhbmdlcyB0byBjaGVja2JveCBhbmQgcmFkaW8gaW5wdXRzLlxuICAvLyBUaGlzIGFwcHJvYWNoIHdvcmtzIGFjcm9zcyBhbGwgYnJvd3NlcnMsIHdoZXJlYXMgYGNoYW5nZWAgZG9lcyBub3QgZmlyZVxuICAvLyB1bnRpbCBgYmx1cmAgaW4gSUU4LlxuICByZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcgJiYgKGVsZW0udHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBlbGVtLnR5cGUgPT09ICdyYWRpbycpO1xufVxuXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENsaWNrKSB7XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHBsdWdpbiBjcmVhdGVzIGFuIGBvbkNoYW5nZWAgZXZlbnQgdGhhdCBub3JtYWxpemVzIGNoYW5nZSBldmVudHNcbiAqIGFjcm9zcyBmb3JtIGVsZW1lbnRzLiBUaGlzIGV2ZW50IGZpcmVzIGF0IGEgdGltZSB3aGVuIGl0J3MgcG9zc2libGUgdG9cbiAqIGNoYW5nZSB0aGUgZWxlbWVudCdzIHZhbHVlIHdpdGhvdXQgc2VlaW5nIGEgZmxpY2tlci5cbiAqXG4gKiBTdXBwb3J0ZWQgZWxlbWVudHMgYXJlOlxuICogLSBpbnB1dCAoc2VlIGBpc1RleHRJbnB1dEVsZW1lbnRgKVxuICogLSB0ZXh0YXJlYVxuICogLSBzZWxlY3RcbiAqL1xudmFyIENoYW5nZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXG4gICAgdmFyIGdldFRhcmdldElERnVuYywgaGFuZGxlRXZlbnRGdW5jO1xuICAgIGlmIChzaG91bGRVc2VDaGFuZ2VFdmVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGlmIChkb2VzQ2hhbmdlRXZlbnRCdWJibGUpIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JDaGFuZ2VFdmVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhhbmRsZUV2ZW50RnVuYyA9IGhhbmRsZUV2ZW50c0ZvckNoYW5nZUV2ZW50SUU4O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNUZXh0SW5wdXRFbGVtZW50KHRvcExldmVsVGFyZ2V0KSkge1xuICAgICAgaWYgKGlzSW5wdXRFdmVudFN1cHBvcnRlZCkge1xuICAgICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvcklucHV0RXZlbnRJRTtcbiAgICAgICAgaGFuZGxlRXZlbnRGdW5jID0gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2hvdWxkVXNlQ2xpY2tFdmVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGdldFRhcmdldElERnVuYyA9IGdldFRhcmdldElERm9yQ2xpY2tFdmVudDtcbiAgICB9XG5cbiAgICBpZiAoZ2V0VGFyZ2V0SURGdW5jKSB7XG4gICAgICB2YXIgdGFyZ2V0SUQgPSBnZXRUYXJnZXRJREZ1bmModG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCk7XG4gICAgICBpZiAodGFyZ2V0SUQpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gU3ludGhldGljRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuY2hhbmdlLCB0YXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICAgICAgZXZlbnQudHlwZSA9ICdjaGFuZ2UnO1xuICAgICAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhbmRsZUV2ZW50RnVuYykge1xuICAgICAgaGFuZGxlRXZlbnRGdW5jKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYW5nZUV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDbGllbnRSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBuZXh0UmVhY3RSb290SW5kZXggPSAwO1xuXG52YXIgQ2xpZW50UmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5leHRSZWFjdFJvb3RJbmRleCsrO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENsaWVudFJlYWN0Um9vdEluZGV4OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01DaGlsZHJlbk9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRGFuZ2VyID0gcmVxdWlyZSgnLi9EYW5nZXInKTtcbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzZXRUZXh0Q29udGVudCA9IHJlcXVpcmUoJy4vc2V0VGV4dENvbnRlbnQnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBJbnNlcnRzIGBjaGlsZE5vZGVgIGFzIGEgY2hpbGQgb2YgYHBhcmVudE5vZGVgIGF0IHRoZSBgaW5kZXhgLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50Tm9kZSBQYXJlbnQgbm9kZSBpbiB3aGljaCB0byBpbnNlcnQuXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNoaWxkTm9kZSBDaGlsZCBub2RlIHRvIGluc2VydC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0byBpbnNlcnQgdGhlIGNoaWxkLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGluc2VydENoaWxkQXQocGFyZW50Tm9kZSwgY2hpbGROb2RlLCBpbmRleCkge1xuICAvLyBCeSBleHBsb2l0aW5nIGFycmF5cyByZXR1cm5pbmcgYHVuZGVmaW5lZGAgZm9yIGFuIHVuZGVmaW5lZCBpbmRleCwgd2UgY2FuXG4gIC8vIHJlbHkgZXhjbHVzaXZlbHkgb24gYGluc2VydEJlZm9yZShub2RlLCBudWxsKWAgaW5zdGVhZCBvZiBhbHNvIHVzaW5nXG4gIC8vIGBhcHBlbmRDaGlsZChub2RlKWAuIEhvd2V2ZXIsIHVzaW5nIGB1bmRlZmluZWRgIGlzIG5vdCBhbGxvd2VkIGJ5IGFsbFxuICAvLyBicm93c2VycyBzbyB3ZSBtdXN0IHJlcGxhY2UgaXQgd2l0aCBgbnVsbGAuXG5cbiAgLy8gZml4IHJlbmRlciBvcmRlciBlcnJvciBpbiBzYWZhcmlcbiAgLy8gSUU4IHdpbGwgdGhyb3cgZXJyb3Igd2hlbiBpbmRleCBvdXQgb2YgbGlzdCBzaXplLlxuICB2YXIgYmVmb3JlQ2hpbGQgPSBpbmRleCA+PSBwYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoID8gbnVsbCA6IHBhcmVudE5vZGUuY2hpbGROb2Rlcy5pdGVtKGluZGV4KTtcblxuICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShjaGlsZE5vZGUsIGJlZm9yZUNoaWxkKTtcbn1cblxuLyoqXG4gKiBPcGVyYXRpb25zIGZvciB1cGRhdGluZyB3aXRoIERPTSBjaGlsZHJlbi5cbiAqL1xudmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IHtcblxuICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cDogRGFuZ2VyLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwLFxuXG4gIHVwZGF0ZVRleHRDb250ZW50OiBzZXRUZXh0Q29udGVudCxcblxuICAvKipcbiAgICogVXBkYXRlcyBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGJ5IHByb2Nlc3NpbmcgYSBzZXJpZXMgb2YgdXBkYXRlcy4gVGhlXG4gICAqIHVwZGF0ZSBjb25maWd1cmF0aW9ucyBhcmUgZWFjaCBleHBlY3RlZCB0byBoYXZlIGEgYHBhcmVudE5vZGVgIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5PG9iamVjdD59IHVwZGF0ZXMgTGlzdCBvZiB1cGRhdGUgY29uZmlndXJhdGlvbnMuXG4gICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwTGlzdCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByb2Nlc3NVcGRhdGVzOiBmdW5jdGlvbiAodXBkYXRlcywgbWFya3VwTGlzdCkge1xuICAgIHZhciB1cGRhdGU7XG4gICAgLy8gTWFwcGluZyBmcm9tIHBhcmVudCBJRHMgdG8gaW5pdGlhbCBjaGlsZCBvcmRlcmluZ3MuXG4gICAgdmFyIGluaXRpYWxDaGlsZHJlbiA9IG51bGw7XG4gICAgLy8gTGlzdCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgYmUgbW92ZWQgb3IgcmVtb3ZlZC5cbiAgICB2YXIgdXBkYXRlZENoaWxkcmVuID0gbnVsbDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdXBkYXRlID0gdXBkYXRlc1tpXTtcbiAgICAgIGlmICh1cGRhdGUudHlwZSA9PT0gUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORyB8fCB1cGRhdGUudHlwZSA9PT0gUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREUpIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRJbmRleCA9IHVwZGF0ZS5mcm9tSW5kZXg7XG4gICAgICAgIHZhciB1cGRhdGVkQ2hpbGQgPSB1cGRhdGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzW3VwZGF0ZWRJbmRleF07XG4gICAgICAgIHZhciBwYXJlbnRJRCA9IHVwZGF0ZS5wYXJlbnRJRDtcblxuICAgICAgICAhdXBkYXRlZENoaWxkID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3Byb2Nlc3NVcGRhdGVzKCk6IFVuYWJsZSB0byBmaW5kIGNoaWxkICVzIG9mIGVsZW1lbnQuIFRoaXMgJyArICdwcm9iYWJseSBtZWFucyB0aGUgRE9NIHdhcyB1bmV4cGVjdGVkbHkgbXV0YXRlZCAoZS5nLiwgYnkgdGhlICcgKyAnYnJvd3NlciksIHVzdWFsbHkgZHVlIHRvIGZvcmdldHRpbmcgYSA8dGJvZHk+IHdoZW4gdXNpbmcgdGFibGVzLCAnICsgJ25lc3RpbmcgdGFncyBsaWtlIDxmb3JtPiwgPHA+LCBvciA8YT4sIG9yIHVzaW5nIG5vbi1TVkcgZWxlbWVudHMgJyArICdpbiBhbiA8c3ZnPiBwYXJlbnQuIFRyeSBpbnNwZWN0aW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZWxlbWVudCAnICsgJ3dpdGggUmVhY3QgSUQgYCVzYC4nLCB1cGRhdGVkSW5kZXgsIHBhcmVudElEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaW5pdGlhbENoaWxkcmVuID0gaW5pdGlhbENoaWxkcmVuIHx8IHt9O1xuICAgICAgICBpbml0aWFsQ2hpbGRyZW5bcGFyZW50SURdID0gaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXSB8fCBbXTtcbiAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXVt1cGRhdGVkSW5kZXhdID0gdXBkYXRlZENoaWxkO1xuXG4gICAgICAgIHVwZGF0ZWRDaGlsZHJlbiA9IHVwZGF0ZWRDaGlsZHJlbiB8fCBbXTtcbiAgICAgICAgdXBkYXRlZENoaWxkcmVuLnB1c2godXBkYXRlZENoaWxkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVuZGVyZWRNYXJrdXA7XG4gICAgLy8gbWFya3VwTGlzdCBpcyBlaXRoZXIgYSBsaXN0IG9mIG1hcmt1cCBvciBqdXN0IGEgbGlzdCBvZiBlbGVtZW50c1xuICAgIGlmIChtYXJrdXBMaXN0Lmxlbmd0aCAmJiB0eXBlb2YgbWFya3VwTGlzdFswXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJlbmRlcmVkTWFya3VwID0gRGFuZ2VyLmRhbmdlcm91c2x5UmVuZGVyTWFya3VwKG1hcmt1cExpc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXJlZE1hcmt1cCA9IG1hcmt1cExpc3Q7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHVwZGF0ZWQgY2hpbGRyZW4gZmlyc3Qgc28gdGhhdCBgdG9JbmRleGAgaXMgY29uc2lzdGVudC5cbiAgICBpZiAodXBkYXRlZENoaWxkcmVuKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHVwZGF0ZWRDaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICB1cGRhdGVkQ2hpbGRyZW5bal0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh1cGRhdGVkQ2hpbGRyZW5bal0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdXBkYXRlcy5sZW5ndGg7IGsrKykge1xuICAgICAgdXBkYXRlID0gdXBkYXRlc1trXTtcbiAgICAgIHN3aXRjaCAodXBkYXRlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5JTlNFUlRfTUFSS1VQOlxuICAgICAgICAgIGluc2VydENoaWxkQXQodXBkYXRlLnBhcmVudE5vZGUsIHJlbmRlcmVkTWFya3VwW3VwZGF0ZS5tYXJrdXBJbmRleF0sIHVwZGF0ZS50b0luZGV4KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5NT1ZFX0VYSVNUSU5HOlxuICAgICAgICAgIGluc2VydENoaWxkQXQodXBkYXRlLnBhcmVudE5vZGUsIGluaXRpYWxDaGlsZHJlblt1cGRhdGUucGFyZW50SURdW3VwZGF0ZS5mcm9tSW5kZXhdLCB1cGRhdGUudG9JbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuU0VUX01BUktVUDpcbiAgICAgICAgICBzZXRJbm5lckhUTUwodXBkYXRlLnBhcmVudE5vZGUsIHVwZGF0ZS5jb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5URVhUX0NPTlRFTlQ6XG4gICAgICAgICAgc2V0VGV4dENvbnRlbnQodXBkYXRlLnBhcmVudE5vZGUsIHVwZGF0ZS5jb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5SRU1PVkVfTk9ERTpcbiAgICAgICAgICAvLyBBbHJlYWR5IHJlbW92ZWQgYnkgdGhlIGZvci1sb29wIGFib3ZlLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoRE9NQ2hpbGRyZW5PcGVyYXRpb25zLCAnRE9NQ2hpbGRyZW5PcGVyYXRpb25zJywge1xuICB1cGRhdGVUZXh0Q29udGVudDogJ3VwZGF0ZVRleHRDb250ZW50J1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NQ2hpbGRyZW5PcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01Qcm9wZXJ0eVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuZnVuY3Rpb24gY2hlY2tNYXNrKHZhbHVlLCBiaXRtYXNrKSB7XG4gIHJldHVybiAodmFsdWUgJiBiaXRtYXNrKSA9PT0gYml0bWFzaztcbn1cblxudmFyIERPTVByb3BlcnR5SW5qZWN0aW9uID0ge1xuICAvKipcbiAgICogTWFwcGluZyBmcm9tIG5vcm1hbGl6ZWQsIGNhbWVsY2FzZWQgcHJvcGVydHkgbmFtZXMgdG8gYSBjb25maWd1cmF0aW9uIHRoYXRcbiAgICogc3BlY2lmaWVzIGhvdyB0aGUgYXNzb2NpYXRlZCBET00gcHJvcGVydHkgc2hvdWxkIGJlIGFjY2Vzc2VkIG9yIHJlbmRlcmVkLlxuICAgKi9cbiAgTVVTVF9VU0VfQVRUUklCVVRFOiAweDEsXG4gIE1VU1RfVVNFX1BST1BFUlRZOiAweDIsXG4gIEhBU19TSURFX0VGRkVDVFM6IDB4NCxcbiAgSEFTX0JPT0xFQU5fVkFMVUU6IDB4OCxcbiAgSEFTX05VTUVSSUNfVkFMVUU6IDB4MTAsXG4gIEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFOiAweDIwIHwgMHgxMCxcbiAgSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRTogMHg0MCxcblxuICAvKipcbiAgICogSW5qZWN0IHNvbWUgc3BlY2lhbGl6ZWQga25vd2xlZGdlIGFib3V0IHRoZSBET00uIFRoaXMgdGFrZXMgYSBjb25maWcgb2JqZWN0XG4gICAqIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgKlxuICAgKiBpc0N1c3RvbUF0dHJpYnV0ZTogZnVuY3Rpb24gdGhhdCBnaXZlbiBhbiBhdHRyaWJ1dGUgbmFtZSB3aWxsIHJldHVybiB0cnVlXG4gICAqIGlmIGl0IGNhbiBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00gdmVyYmF0aW0uIFVzZWZ1bCBmb3IgZGF0YS0qIG9yIGFyaWEtKlxuICAgKiBhdHRyaWJ1dGVzIHdoZXJlIGl0J3MgaW1wb3NzaWJsZSB0byBlbnVtZXJhdGUgYWxsIG9mIHRoZSBwb3NzaWJsZVxuICAgKiBhdHRyaWJ1dGUgbmFtZXMsXG4gICAqXG4gICAqIFByb3BlcnRpZXM6IG9iamVjdCBtYXBwaW5nIERPTSBwcm9wZXJ0eSBuYW1lIHRvIG9uZSBvZiB0aGVcbiAgICogRE9NUHJvcGVydHlJbmplY3Rpb24gY29uc3RhbnRzIG9yIG51bGwuIElmIHlvdXIgYXR0cmlidXRlIGlzbid0IGluIGhlcmUsXG4gICAqIGl0IHdvbid0IGdldCB3cml0dGVuIHRvIHRoZSBET00uXG4gICAqXG4gICAqIERPTUF0dHJpYnV0ZU5hbWVzOiBvYmplY3QgbWFwcGluZyBSZWFjdCBhdHRyaWJ1dGUgbmFtZSB0byB0aGUgRE9NXG4gICAqIGF0dHJpYnV0ZSBuYW1lLiBBdHRyaWJ1dGUgbmFtZXMgbm90IHNwZWNpZmllZCB1c2UgdGhlICoqbG93ZXJjYXNlKipcbiAgICogbm9ybWFsaXplZCBuYW1lLlxuICAgKlxuICAgKiBET01BdHRyaWJ1dGVOYW1lc3BhY2VzOiBvYmplY3QgbWFwcGluZyBSZWFjdCBhdHRyaWJ1dGUgbmFtZSB0byB0aGUgRE9NXG4gICAqIGF0dHJpYnV0ZSBuYW1lc3BhY2UgVVJMLiAoQXR0cmlidXRlIG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIG5vIG5hbWVzcGFjZS4pXG4gICAqXG4gICAqIERPTVByb3BlcnR5TmFtZXM6IHNpbWlsYXIgdG8gRE9NQXR0cmlidXRlTmFtZXMgYnV0IGZvciBET00gcHJvcGVydGllcy5cbiAgICogUHJvcGVydHkgbmFtZXMgbm90IHNwZWNpZmllZCB1c2UgdGhlIG5vcm1hbGl6ZWQgbmFtZS5cbiAgICpcbiAgICogRE9NTXV0YXRpb25NZXRob2RzOiBQcm9wZXJ0aWVzIHRoYXQgcmVxdWlyZSBzcGVjaWFsIG11dGF0aW9uIG1ldGhvZHMuIElmXG4gICAqIGB2YWx1ZWAgaXMgdW5kZWZpbmVkLCB0aGUgbXV0YXRpb24gbWV0aG9kIHNob3VsZCB1bnNldCB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkb21Qcm9wZXJ0eUNvbmZpZyB0aGUgY29uZmlnIGFzIGRlc2NyaWJlZCBhYm92ZS5cbiAgICovXG4gIGluamVjdERPTVByb3BlcnR5Q29uZmlnOiBmdW5jdGlvbiAoZG9tUHJvcGVydHlDb25maWcpIHtcbiAgICB2YXIgSW5qZWN0aW9uID0gRE9NUHJvcGVydHlJbmplY3Rpb247XG4gICAgdmFyIFByb3BlcnRpZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5Qcm9wZXJ0aWVzIHx8IHt9O1xuICAgIHZhciBET01BdHRyaWJ1dGVOYW1lc3BhY2VzID0gZG9tUHJvcGVydHlDb25maWcuRE9NQXR0cmlidXRlTmFtZXNwYWNlcyB8fCB7fTtcbiAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01BdHRyaWJ1dGVOYW1lcyB8fCB7fTtcbiAgICB2YXIgRE9NUHJvcGVydHlOYW1lcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTVByb3BlcnR5TmFtZXMgfHwge307XG4gICAgdmFyIERPTU11dGF0aW9uTWV0aG9kcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTU11dGF0aW9uTWV0aG9kcyB8fCB7fTtcblxuICAgIGlmIChkb21Qcm9wZXJ0eUNvbmZpZy5pc0N1c3RvbUF0dHJpYnV0ZSkge1xuICAgICAgRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zLnB1c2goZG9tUHJvcGVydHlDb25maWcuaXNDdXN0b21BdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIFByb3BlcnRpZXMpIHtcbiAgICAgICEhRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnaW5qZWN0RE9NUHJvcGVydHlDb25maWcoLi4uKTogWW91XFwncmUgdHJ5aW5nIHRvIGluamVjdCBET00gcHJvcGVydHkgJyArICdcXCclc1xcJyB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGluamVjdGVkLiBZb3UgbWF5IGJlIGFjY2lkZW50YWxseSAnICsgJ2luamVjdGluZyB0aGUgc2FtZSBET00gcHJvcGVydHkgY29uZmlnIHR3aWNlLCBvciB5b3UgbWF5IGJlICcgKyAnaW5qZWN0aW5nIHR3byBjb25maWdzIHRoYXQgaGF2ZSBjb25mbGljdGluZyBwcm9wZXJ0eSBuYW1lcy4nLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICB2YXIgbG93ZXJDYXNlZCA9IHByb3BOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YXIgcHJvcENvbmZpZyA9IFByb3BlcnRpZXNbcHJvcE5hbWVdO1xuXG4gICAgICB2YXIgcHJvcGVydHlJbmZvID0ge1xuICAgICAgICBhdHRyaWJ1dGVOYW1lOiBsb3dlckNhc2VkLFxuICAgICAgICBhdHRyaWJ1dGVOYW1lc3BhY2U6IG51bGwsXG4gICAgICAgIHByb3BlcnR5TmFtZTogcHJvcE5hbWUsXG4gICAgICAgIG11dGF0aW9uTWV0aG9kOiBudWxsLFxuXG4gICAgICAgIG11c3RVc2VBdHRyaWJ1dGU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uTVVTVF9VU0VfQVRUUklCVVRFKSxcbiAgICAgICAgbXVzdFVzZVByb3BlcnR5OiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX1BST1BFUlRZKSxcbiAgICAgICAgaGFzU2lkZUVmZmVjdHM6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX1NJREVfRUZGRUNUUyksXG4gICAgICAgIGhhc0Jvb2xlYW5WYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfQk9PTEVBTl9WQUxVRSksXG4gICAgICAgIGhhc051bWVyaWNWYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfTlVNRVJJQ19WQUxVRSksXG4gICAgICAgIGhhc1Bvc2l0aXZlTnVtZXJpY1ZhbHVlOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLkhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFKSxcbiAgICAgICAgaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFKVxuICAgICAgfTtcblxuICAgICAgISghcHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUgfHwgIXByb3BlcnR5SW5mby5tdXN0VXNlUHJvcGVydHkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RPTVByb3BlcnR5OiBDYW5ub3QgcmVxdWlyZSB1c2luZyBib3RoIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHk6ICVzJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICEocHJvcGVydHlJbmZvLm11c3RVc2VQcm9wZXJ0eSB8fCAhcHJvcGVydHlJbmZvLmhhc1NpZGVFZmZlY3RzKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogUHJvcGVydGllcyB0aGF0IGhhdmUgc2lkZSBlZmZlY3RzIG11c3QgdXNlIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAhKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgKyBwcm9wZXJ0eUluZm8uaGFzTnVtZXJpY1ZhbHVlICsgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgPD0gMSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRE9NUHJvcGVydHk6IFZhbHVlIGNhbiBiZSBvbmUgb2YgYm9vbGVhbiwgb3ZlcmxvYWRlZCBib29sZWFuLCBvciAnICsgJ251bWVyaWMgdmFsdWUsIGJ1dCBub3QgYSBjb21iaW5hdGlvbjogJXMnLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBET01Qcm9wZXJ0eS5nZXRQb3NzaWJsZVN0YW5kYXJkTmFtZVtsb3dlckNhc2VkXSA9IHByb3BOYW1lO1xuICAgICAgfVxuXG4gICAgICBpZiAoRE9NQXR0cmlidXRlTmFtZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVOYW1lID0gRE9NQXR0cmlidXRlTmFtZXNbcHJvcE5hbWVdO1xuICAgICAgICBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZU5hbWU7XG4gICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbYXR0cmlidXRlTmFtZV0gPSBwcm9wTmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoRE9NQXR0cmlidXRlTmFtZXNwYWNlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWVzcGFjZSA9IERPTUF0dHJpYnV0ZU5hbWVzcGFjZXNbcHJvcE5hbWVdO1xuICAgICAgfVxuXG4gICAgICBpZiAoRE9NUHJvcGVydHlOYW1lcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZSA9IERPTVByb3BlcnR5TmFtZXNbcHJvcE5hbWVdO1xuICAgICAgfVxuXG4gICAgICBpZiAoRE9NTXV0YXRpb25NZXRob2RzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICBwcm9wZXJ0eUluZm8ubXV0YXRpb25NZXRob2QgPSBET01NdXRhdGlvbk1ldGhvZHNbcHJvcE5hbWVdO1xuICAgICAgfVxuXG4gICAgICBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BOYW1lXSA9IHByb3BlcnR5SW5mbztcbiAgICB9XG4gIH1cbn07XG52YXIgZGVmYXVsdFZhbHVlQ2FjaGUgPSB7fTtcblxuLyoqXG4gKiBET01Qcm9wZXJ0eSBleHBvcnRzIGxvb2t1cCBvYmplY3RzIHRoYXQgY2FuIGJlIHVzZWQgbGlrZSBmdW5jdGlvbnM6XG4gKlxuICogICA+IERPTVByb3BlcnR5LmlzVmFsaWRbJ2lkJ11cbiAqICAgdHJ1ZVxuICogICA+IERPTVByb3BlcnR5LmlzVmFsaWRbJ2Zvb2JhciddXG4gKiAgIHVuZGVmaW5lZFxuICpcbiAqIEFsdGhvdWdoIHRoaXMgbWF5IGJlIGNvbmZ1c2luZywgaXQgcGVyZm9ybXMgYmV0dGVyIGluIGdlbmVyYWwuXG4gKlxuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9rZXktZXhpc3RzXG4gKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2tleS1taXNzaW5nXG4gKi9cbnZhciBET01Qcm9wZXJ0eSA9IHtcblxuICBJRF9BVFRSSUJVVEVfTkFNRTogJ2RhdGEtcmVhY3RpZCcsXG5cbiAgLyoqXG4gICAqIE1hcCBmcm9tIHByb3BlcnR5IFwic3RhbmRhcmQgbmFtZVwiIHRvIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgaG93IHRvIHNldFxuICAgKiB0aGUgcHJvcGVydHkgaW4gdGhlIERPTS4gRWFjaCBvYmplY3QgY29udGFpbnM6XG4gICAqXG4gICAqIGF0dHJpYnV0ZU5hbWU6XG4gICAqICAgVXNlZCB3aGVuIHJlbmRlcmluZyBtYXJrdXAgb3Igd2l0aCBgKkF0dHJpYnV0ZSgpYC5cbiAgICogYXR0cmlidXRlTmFtZXNwYWNlXG4gICAqIHByb3BlcnR5TmFtZTpcbiAgICogICBVc2VkIG9uIERPTSBub2RlIGluc3RhbmNlcy4gKFRoaXMgaW5jbHVkZXMgcHJvcGVydGllcyB0aGF0IG11dGF0ZSBkdWUgdG9cbiAgICogICBleHRlcm5hbCBmYWN0b3JzLilcbiAgICogbXV0YXRpb25NZXRob2Q6XG4gICAqICAgSWYgbm9uLW51bGwsIHVzZWQgaW5zdGVhZCBvZiB0aGUgcHJvcGVydHkgb3IgYHNldEF0dHJpYnV0ZSgpYCBhZnRlclxuICAgKiAgIGluaXRpYWwgcmVuZGVyLlxuICAgKiBtdXN0VXNlQXR0cmlidXRlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IG11c3QgYmUgYWNjZXNzZWQgYW5kIG11dGF0ZWQgdXNpbmcgYCpBdHRyaWJ1dGUoKWAuXG4gICAqICAgKFRoaXMgaW5jbHVkZXMgYW55dGhpbmcgdGhhdCBmYWlscyBgPHByb3BOYW1lPiBpbiA8ZWxlbWVudD5gLilcbiAgICogbXVzdFVzZVByb3BlcnR5OlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IG11c3QgYmUgYWNjZXNzZWQgYW5kIG11dGF0ZWQgYXMgYW4gb2JqZWN0IHByb3BlcnR5LlxuICAgKiBoYXNTaWRlRWZmZWN0czpcbiAgICogICBXaGV0aGVyIG9yIG5vdCBzZXR0aW5nIGEgdmFsdWUgY2F1c2VzIHNpZGUgZWZmZWN0cyBzdWNoIGFzIHRyaWdnZXJpbmdcbiAgICogICByZXNvdXJjZXMgdG8gYmUgbG9hZGVkIG9yIHRleHQgc2VsZWN0aW9uIGNoYW5nZXMuIElmIHRydWUsIHdlIHJlYWQgZnJvbVxuICAgKiAgIHRoZSBET00gYmVmb3JlIHVwZGF0aW5nIHRvIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSBpcyBvbmx5IHNldCBpZiBpdCBoYXNcbiAgICogICBjaGFuZ2VkLlxuICAgKiBoYXNCb29sZWFuVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgc2hvdWxkIGJlIHJlbW92ZWQgd2hlbiBzZXQgdG8gYSBmYWxzZXkgdmFsdWUuXG4gICAqIGhhc051bWVyaWNWYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIG51bWVyaWMgb3IgcGFyc2UgYXMgYSBudW1lcmljIGFuZCBzaG91bGQgYmVcbiAgICogICByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIHBvc2l0aXZlIG51bWVyaWMgb3IgcGFyc2UgYXMgYSBwb3NpdGl2ZVxuICAgKiAgIG51bWVyaWMgYW5kIHNob3VsZCBiZSByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IGNhbiBiZSB1c2VkIGFzIGEgZmxhZyBhcyB3ZWxsIGFzIHdpdGggYSB2YWx1ZS5cbiAgICogICBSZW1vdmVkIHdoZW4gc3RyaWN0bHkgZXF1YWwgdG8gZmFsc2U7IHByZXNlbnQgd2l0aG91dCBhIHZhbHVlIHdoZW5cbiAgICogICBzdHJpY3RseSBlcXVhbCB0byB0cnVlOyBwcmVzZW50IHdpdGggYSB2YWx1ZSBvdGhlcndpc2UuXG4gICAqL1xuICBwcm9wZXJ0aWVzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIGxvd2VyY2FzZSBwcm9wZXJ0eSBuYW1lcyB0byB0aGUgcHJvcGVybHkgY2FzZWQgdmVyc2lvbiwgdXNlZFxuICAgKiB0byB3YXJuIGluIHRoZSBjYXNlIG9mIG1pc3NpbmcgcHJvcGVydGllcy4gQXZhaWxhYmxlIG9ubHkgaW4gX19ERVZfXy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIGdldFBvc3NpYmxlU3RhbmRhcmROYW1lOiBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8ge30gOiBudWxsLFxuXG4gIC8qKlxuICAgKiBBbGwgb2YgdGhlIGlzQ3VzdG9tQXR0cmlidXRlKCkgZnVuY3Rpb25zIHRoYXQgaGF2ZSBiZWVuIGluamVjdGVkLlxuICAgKi9cbiAgX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zOiBbXSxcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBwcm9wZXJ0eSBuYW1lIGlzIGEgY3VzdG9tIGF0dHJpYnV0ZS5cbiAgICogQG1ldGhvZFxuICAgKi9cbiAgaXNDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIChhdHRyaWJ1dGVOYW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBET01Qcm9wZXJ0eS5faXNDdXN0b21BdHRyaWJ1dGVGdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpc0N1c3RvbUF0dHJpYnV0ZUZuID0gRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zW2ldO1xuICAgICAgaWYgKGlzQ3VzdG9tQXR0cmlidXRlRm4oYXR0cmlidXRlTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGVmYXVsdCBwcm9wZXJ0eSB2YWx1ZSBmb3IgYSBET00gcHJvcGVydHkgKGkuZS4sIG5vdCBhblxuICAgKiBhdHRyaWJ1dGUpLiBNb3N0IGRlZmF1bHQgdmFsdWVzIGFyZSAnJyBvciBmYWxzZSwgYnV0IG5vdCBhbGwuIFdvcnNlIHlldCxcbiAgICogc29tZSAoaW4gcGFydGljdWxhciwgYHR5cGVgKSB2YXJ5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBlbGVtZW50LlxuICAgKlxuICAgKiBUT0RPOiBJcyBpdCBiZXR0ZXIgdG8gZ3JhYiBhbGwgdGhlIHBvc3NpYmxlIHByb3BlcnRpZXMgd2hlbiBjcmVhdGluZyBhblxuICAgKiBlbGVtZW50IHRvIGF2b2lkIGhhdmluZyB0byBjcmVhdGUgdGhlIHNhbWUgZWxlbWVudCB0d2ljZT9cbiAgICovXG4gIGdldERlZmF1bHRWYWx1ZUZvclByb3BlcnR5OiBmdW5jdGlvbiAobm9kZU5hbWUsIHByb3ApIHtcbiAgICB2YXIgbm9kZURlZmF1bHRzID0gZGVmYXVsdFZhbHVlQ2FjaGVbbm9kZU5hbWVdO1xuICAgIHZhciB0ZXN0RWxlbWVudDtcbiAgICBpZiAoIW5vZGVEZWZhdWx0cykge1xuICAgICAgZGVmYXVsdFZhbHVlQ2FjaGVbbm9kZU5hbWVdID0gbm9kZURlZmF1bHRzID0ge307XG4gICAgfVxuICAgIGlmICghKHByb3AgaW4gbm9kZURlZmF1bHRzKSkge1xuICAgICAgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcbiAgICAgIG5vZGVEZWZhdWx0c1twcm9wXSA9IHRlc3RFbGVtZW50W3Byb3BdO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZURlZmF1bHRzW3Byb3BdO1xuICB9LFxuXG4gIGluamVjdGlvbjogRE9NUHJvcGVydHlJbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NUHJvcGVydHk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERPTVByb3BlcnR5T3BlcmF0aW9uc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIgPSByZXF1aXJlKCcuL3F1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLy8gU2ltcGxpZmllZCBzdWJzZXRcbnZhciBWQUxJRF9BVFRSSUJVVEVfTkFNRV9SRUdFWCA9IC9eW2EtekEtWl9dW1xcd1xcLlxcLV0qJC87XG52YXIgaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZSA9IHt9O1xudmFyIHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBpc0F0dHJpYnV0ZU5hbWVTYWZlKGF0dHJpYnV0ZU5hbWUpIHtcbiAgaWYgKHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZS5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChpbGxlZ2FsQXR0cmlidXRlTmFtZUNhY2hlLmhhc093blByb3BlcnR5KGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChWQUxJRF9BVFRSSUJVVEVfTkFNRV9SRUdFWC50ZXN0KGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgdmFsaWRhdGVkQXR0cmlidXRlTmFtZUNhY2hlW2F0dHJpYnV0ZU5hbWVdID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpbGxlZ2FsQXR0cmlidXRlTmFtZUNhY2hlW2F0dHJpYnV0ZU5hbWVdID0gdHJ1ZTtcbiAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lOiBgJXNgJywgYXR0cmlidXRlTmFtZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCB8fCBwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlICYmICF2YWx1ZSB8fCBwcm9wZXJ0eUluZm8uaGFzTnVtZXJpY1ZhbHVlICYmIGlzTmFOKHZhbHVlKSB8fCBwcm9wZXJ0eUluZm8uaGFzUG9zaXRpdmVOdW1lcmljVmFsdWUgJiYgdmFsdWUgPCAxIHx8IHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlICYmIHZhbHVlID09PSBmYWxzZTtcbn1cblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIHJlYWN0UHJvcHMgPSB7XG4gICAgY2hpbGRyZW46IHRydWUsXG4gICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHRydWUsXG4gICAga2V5OiB0cnVlLFxuICAgIHJlZjogdHJ1ZVxuICB9O1xuICB2YXIgd2FybmVkUHJvcGVydGllcyA9IHt9O1xuXG4gIHZhciB3YXJuVW5rbm93blByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAocmVhY3RQcm9wcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiByZWFjdFByb3BzW25hbWVdIHx8IHdhcm5lZFByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgd2FybmVkUHJvcGVydGllc1tuYW1lXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlO1xuICAgIHZhciBsb3dlckNhc2VkTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIGRhdGEtKiBhdHRyaWJ1dGVzIHNob3VsZCBiZSBsb3dlcmNhc2U7IHN1Z2dlc3QgdGhlIGxvd2VyY2FzZSB2ZXJzaW9uXG4gICAgdmFyIHN0YW5kYXJkTmFtZSA9IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKGxvd2VyQ2FzZWROYW1lKSA/IGxvd2VyQ2FzZWROYW1lIDogRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWUuaGFzT3duUHJvcGVydHkobG93ZXJDYXNlZE5hbWUpID8gRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbbG93ZXJDYXNlZE5hbWVdIDogbnVsbDtcblxuICAgIC8vIEZvciBub3csIG9ubHkgd2FybiB3aGVuIHdlIGhhdmUgYSBzdWdnZXN0ZWQgY29ycmVjdGlvbi4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIGxvZ2dpbmcgdG9vIG11Y2ggd2hlbiB1c2luZyB0cmFuc2ZlclByb3BzVG8uXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoc3RhbmRhcmROYW1lID09IG51bGwsICdVbmtub3duIERPTSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIHN0YW5kYXJkTmFtZSkgOiB1bmRlZmluZWQ7XG4gIH07XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgZGVhbGluZyB3aXRoIERPTSBwcm9wZXJ0aWVzLlxuICovXG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0ge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgdGhlIElEIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVW5lc2NhcGVkIElELlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIERPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIoaWQpO1xuICB9LFxuXG4gIHNldEF0dHJpYnV0ZUZvcklEOiBmdW5jdGlvbiAobm9kZSwgaWQpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZShET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRSwgaWQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgYSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBNYXJrdXAgc3RyaW5nLCBvciBudWxsIGlmIHRoZSBwcm9wZXJ0eSB3YXMgaW52YWxpZC5cbiAgICovXG4gIGNyZWF0ZU1hcmt1cEZvclByb3BlcnR5OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIGlmIChzaG91bGRJZ25vcmVWYWx1ZShwcm9wZXJ0eUluZm8sIHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lO1xuICAgICAgaWYgKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZU5hbWUgKyAnPVwiXCInO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF0dHJpYnV0ZU5hbWUgKyAnPScgKyBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hbWUgKyAnPScgKyBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuVW5rbm93blByb3BlcnR5KG5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIGEgY3VzdG9tIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTWFya3VwIHN0cmluZywgb3IgZW1wdHkgc3RyaW5nIGlmIHRoZSBwcm9wZXJ0eSB3YXMgaW52YWxpZC5cbiAgICovXG4gIGNyZWF0ZU1hcmt1cEZvckN1c3RvbUF0dHJpYnV0ZTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCFpc0F0dHJpYnV0ZU5hbWVTYWZlKG5hbWUpIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUgKyAnPScgKyBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGZvciBhIHByb3BlcnR5IG9uIGEgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICovXG4gIHNldFZhbHVlRm9yUHJvcGVydHk6IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBwcm9wZXJ0eUluZm8gPSBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpID8gRE9NUHJvcGVydHkucHJvcGVydGllc1tuYW1lXSA6IG51bGw7XG4gICAgaWYgKHByb3BlcnR5SW5mbykge1xuICAgICAgdmFyIG11dGF0aW9uTWV0aG9kID0gcHJvcGVydHlJbmZvLm11dGF0aW9uTWV0aG9kO1xuICAgICAgaWYgKG11dGF0aW9uTWV0aG9kKSB7XG4gICAgICAgIG11dGF0aW9uTWV0aG9kKG5vZGUsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIG5hbWUpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eUluZm8ubXVzdFVzZUF0dHJpYnV0ZSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lO1xuICAgICAgICB2YXIgbmFtZXNwYWNlID0gcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWVzcGFjZTtcbiAgICAgICAgLy8gYHNldEF0dHJpYnV0ZWAgd2l0aCBvYmplY3RzIGJlY29tZXMgb25seSBgW29iamVjdF1gIGluIElFOC85LFxuICAgICAgICAvLyAoJycgKyB2YWx1ZSkgbWFrZXMgaXQgb3V0cHV0IHRoZSBjb3JyZWN0IHRvU3RyaW5nKCktdmFsdWUuXG4gICAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZU5TKG5hbWVzcGFjZSwgYXR0cmlidXRlTmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSB8fCBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSAmJiB2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsICcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAnJyArIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcbiAgICAgICAgLy8gTXVzdCBleHBsaWNpdGx5IGNhc3QgdmFsdWVzIGZvciBIQVNfU0lERV9FRkZFQ1RTLXByb3BlcnRpZXMgdG8gdGhlXG4gICAgICAgIC8vIHByb3BlcnR5IHR5cGUgYmVmb3JlIGNvbXBhcmluZzsgb25seSBgdmFsdWVgIGRvZXMgYW5kIGlzIHN0cmluZy5cbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gJycgKyB2YWx1ZSkge1xuICAgICAgICAgIC8vIENvbnRyYXJ5IHRvIGBzZXRBdHRyaWJ1dGVgLCBvYmplY3QgcHJvcGVydGllcyBhcmUgcHJvcGVybHlcbiAgICAgICAgICAvLyBgdG9TdHJpbmdgZWQgYnkgSUU4LzkuXG4gICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvckF0dHJpYnV0ZShub2RlLCBuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuVW5rbm93blByb3BlcnR5KG5hbWUpO1xuICAgIH1cbiAgfSxcblxuICBzZXRWYWx1ZUZvckF0dHJpYnV0ZTogZnVuY3Rpb24gKG5vZGUsIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCFpc0F0dHJpYnV0ZU5hbWVTYWZlKG5hbWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHRoZSB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSBvbiBhIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKi9cbiAgZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIHZhciBtdXRhdGlvbk1ldGhvZCA9IHByb3BlcnR5SW5mby5tdXRhdGlvbk1ldGhvZDtcbiAgICAgIGlmIChtdXRhdGlvbk1ldGhvZCkge1xuICAgICAgICBtdXRhdGlvbk1ldGhvZChub2RlLCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eUluZm8ubXVzdFVzZUF0dHJpYnV0ZSkge1xuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcHJvcE5hbWUgPSBwcm9wZXJ0eUluZm8ucHJvcGVydHlOYW1lO1xuICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gRE9NUHJvcGVydHkuZ2V0RGVmYXVsdFZhbHVlRm9yUHJvcGVydHkobm9kZS5ub2RlTmFtZSwgcHJvcE5hbWUpO1xuICAgICAgICBpZiAoIXByb3BlcnR5SW5mby5oYXNTaWRlRWZmZWN0cyB8fCAnJyArIG5vZGVbcHJvcE5hbWVdICE9PSBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICBub2RlW3Byb3BOYW1lXSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKERPTVByb3BlcnR5T3BlcmF0aW9ucywgJ0RPTVByb3BlcnR5T3BlcmF0aW9ucycsIHtcbiAgc2V0VmFsdWVGb3JQcm9wZXJ0eTogJ3NldFZhbHVlRm9yUHJvcGVydHknLFxuICBzZXRWYWx1ZUZvckF0dHJpYnV0ZTogJ3NldFZhbHVlRm9yQXR0cmlidXRlJyxcbiAgZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eTogJ2RlbGV0ZVZhbHVlRm9yUHJvcGVydHknXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBET01Qcm9wZXJ0eU9wZXJhdGlvbnM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERhbmdlclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAgPSByZXF1aXJlKCdmYmpzL2xpYi9jcmVhdGVOb2Rlc0Zyb21NYXJrdXAnKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIGdldE1hcmt1cFdyYXAgPSByZXF1aXJlKCdmYmpzL2xpYi9nZXRNYXJrdXBXcmFwJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBPUEVOX1RBR19OQU1FX0VYUCA9IC9eKDxbXiBcXC8+XSspLztcbnZhciBSRVNVTFRfSU5ERVhfQVRUUiA9ICdkYXRhLWRhbmdlci1pbmRleCc7XG5cbi8qKlxuICogRXh0cmFjdHMgdGhlIGBub2RlTmFtZWAgZnJvbSBhIHN0cmluZyBvZiBtYXJrdXAuXG4gKlxuICogTk9URTogRXh0cmFjdGluZyB0aGUgYG5vZGVOYW1lYCBkb2VzIG5vdCByZXF1aXJlIGEgcmVndWxhciBleHByZXNzaW9uIG1hdGNoXG4gKiBiZWNhdXNlIHdlIG1ha2UgYXNzdW1wdGlvbnMgYWJvdXQgUmVhY3QtZ2VuZXJhdGVkIG1hcmt1cCAoaS5lLiB0aGVyZSBhcmUgbm9cbiAqIHNwYWNlcyBzdXJyb3VuZGluZyB0aGUgb3BlbmluZyB0YWcgYW5kIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBhdHRyaWJ1dGUpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgU3RyaW5nIG9mIG1hcmt1cC5cbiAqIEByZXR1cm4ge3N0cmluZ30gTm9kZSBuYW1lIG9mIHRoZSBzdXBwbGllZCBtYXJrdXAuXG4gKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2V4dHJhY3Qtbm9kZW5hbWVcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZU5hbWUobWFya3VwKSB7XG4gIHJldHVybiBtYXJrdXAuc3Vic3RyaW5nKDEsIG1hcmt1cC5pbmRleE9mKCcgJykpO1xufVxuXG52YXIgRGFuZ2VyID0ge1xuXG4gIC8qKlxuICAgKiBSZW5kZXJzIG1hcmt1cCBpbnRvIGFuIGFycmF5IG9mIG5vZGVzLiBUaGUgbWFya3VwIGlzIGV4cGVjdGVkIHRvIHJlbmRlclxuICAgKiBpbnRvIGEgbGlzdCBvZiByb290IG5vZGVzLiBBbHNvLCB0aGUgbGVuZ3RoIG9mIGByZXN1bHRMaXN0YCBhbmRcbiAgICogYG1hcmt1cExpc3RgIHNob3VsZCBiZSB0aGUgc2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxzdHJpbmc+fSBtYXJrdXBMaXN0IExpc3Qgb2YgbWFya3VwIHN0cmluZ3MgdG8gcmVuZGVyLlxuICAgKiBAcmV0dXJuIHthcnJheTxET01FbGVtZW50Pn0gTGlzdCBvZiByZW5kZXJlZCBub2Rlcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYW5nZXJvdXNseVJlbmRlck1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cExpc3QpIHtcbiAgICAhRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVuZGVyTWFya3VwKC4uLik6IENhbm5vdCByZW5kZXIgbWFya3VwIGluIGEgd29ya2VyICcgKyAndGhyZWFkLiBNYWtlIHN1cmUgYHdpbmRvd2AgYW5kIGBkb2N1bWVudGAgYXJlIGF2YWlsYWJsZSBnbG9iYWxseSAnICsgJ2JlZm9yZSByZXF1aXJpbmcgUmVhY3Qgd2hlbiB1bml0IHRlc3Rpbmcgb3IgdXNlICcgKyAnUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcgZm9yIHNlcnZlciByZW5kZXJpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBub2RlTmFtZTtcbiAgICB2YXIgbWFya3VwQnlOb2RlTmFtZSA9IHt9O1xuICAgIC8vIEdyb3VwIG1hcmt1cCBieSBgbm9kZU5hbWVgIGlmIGEgd3JhcCBpcyBuZWNlc3NhcnksIGVsc2UgYnkgJyonLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya3VwTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgIW1hcmt1cExpc3RbaV0gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXAoLi4uKTogTWlzc2luZyBtYXJrdXAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgbm9kZU5hbWUgPSBnZXROb2RlTmFtZShtYXJrdXBMaXN0W2ldKTtcbiAgICAgIG5vZGVOYW1lID0gZ2V0TWFya3VwV3JhcChub2RlTmFtZSkgPyBub2RlTmFtZSA6ICcqJztcbiAgICAgIG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdID0gbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV0gfHwgW107XG4gICAgICBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXVtpXSA9IG1hcmt1cExpc3RbaV07XG4gICAgfVxuICAgIHZhciByZXN1bHRMaXN0ID0gW107XG4gICAgdmFyIHJlc3VsdExpc3RBc3NpZ25tZW50Q291bnQgPSAwO1xuICAgIGZvciAobm9kZU5hbWUgaW4gbWFya3VwQnlOb2RlTmFtZSkge1xuICAgICAgaWYgKCFtYXJrdXBCeU5vZGVOYW1lLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBtYXJrdXBMaXN0QnlOb2RlTmFtZSA9IG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdO1xuXG4gICAgICAvLyBUaGlzIGZvci1pbiBsb29wIHNraXBzIHRoZSBob2xlcyBvZiB0aGUgc3BhcnNlIGFycmF5LiBUaGUgb3JkZXIgb2ZcbiAgICAgIC8vIGl0ZXJhdGlvbiBzaG91bGQgZm9sbG93IHRoZSBvcmRlciBvZiBhc3NpZ25tZW50LCB3aGljaCBoYXBwZW5zIHRvIG1hdGNoXG4gICAgICAvLyBudW1lcmljYWwgaW5kZXggb3JkZXIsIGJ1dCB3ZSBkb24ndCByZWx5IG9uIHRoYXQuXG4gICAgICB2YXIgcmVzdWx0SW5kZXg7XG4gICAgICBmb3IgKHJlc3VsdEluZGV4IGluIG1hcmt1cExpc3RCeU5vZGVOYW1lKSB7XG4gICAgICAgIGlmIChtYXJrdXBMaXN0QnlOb2RlTmFtZS5oYXNPd25Qcm9wZXJ0eShyZXN1bHRJbmRleCkpIHtcbiAgICAgICAgICB2YXIgbWFya3VwID0gbWFya3VwTGlzdEJ5Tm9kZU5hbWVbcmVzdWx0SW5kZXhdO1xuXG4gICAgICAgICAgLy8gUHVzaCB0aGUgcmVxdWVzdGVkIG1hcmt1cCB3aXRoIGFuIGFkZGl0aW9uYWwgUkVTVUxUX0lOREVYX0FUVFJcbiAgICAgICAgICAvLyBhdHRyaWJ1dGUuICBJZiB0aGUgbWFya3VwIGRvZXMgbm90IHN0YXJ0IHdpdGggYSA8IGNoYXJhY3RlciwgaXRcbiAgICAgICAgICAvLyB3aWxsIGJlIGRpc2NhcmRlZCBiZWxvdyAod2l0aCBhbiBhcHByb3ByaWF0ZSBjb25zb2xlLmVycm9yKS5cbiAgICAgICAgICBtYXJrdXBMaXN0QnlOb2RlTmFtZVtyZXN1bHRJbmRleF0gPSBtYXJrdXAucmVwbGFjZShPUEVOX1RBR19OQU1FX0VYUCxcbiAgICAgICAgICAvLyBUaGlzIGluZGV4IHdpbGwgYmUgcGFyc2VkIGJhY2sgb3V0IGJlbG93LlxuICAgICAgICAgICckMSAnICsgUkVTVUxUX0lOREVYX0FUVFIgKyAnPVwiJyArIHJlc3VsdEluZGV4ICsgJ1wiICcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbmRlciBlYWNoIGdyb3VwIG9mIG1hcmt1cCB3aXRoIHNpbWlsYXIgd3JhcHBpbmcgYG5vZGVOYW1lYC5cbiAgICAgIHZhciByZW5kZXJOb2RlcyA9IGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXBMaXN0QnlOb2RlTmFtZS5qb2luKCcnKSwgZW1wdHlGdW5jdGlvbiAvLyBEbyBub3RoaW5nIHNwZWNpYWwgd2l0aCA8c2NyaXB0PiB0YWdzLlxuICAgICAgKTtcblxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByZW5kZXJOb2Rlcy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIgcmVuZGVyTm9kZSA9IHJlbmRlck5vZGVzW2pdO1xuICAgICAgICBpZiAocmVuZGVyTm9kZS5oYXNBdHRyaWJ1dGUgJiYgcmVuZGVyTm9kZS5oYXNBdHRyaWJ1dGUoUkVTVUxUX0lOREVYX0FUVFIpKSB7XG5cbiAgICAgICAgICByZXN1bHRJbmRleCA9ICtyZW5kZXJOb2RlLmdldEF0dHJpYnV0ZShSRVNVTFRfSU5ERVhfQVRUUik7XG4gICAgICAgICAgcmVuZGVyTm9kZS5yZW1vdmVBdHRyaWJ1dGUoUkVTVUxUX0lOREVYX0FUVFIpO1xuXG4gICAgICAgICAgISFyZXN1bHRMaXN0Lmhhc093blByb3BlcnR5KHJlc3VsdEluZGV4KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEYW5nZXI6IEFzc2lnbmluZyB0byBhbiBhbHJlYWR5LW9jY3VwaWVkIHJlc3VsdCBpbmRleC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICByZXN1bHRMaXN0W3Jlc3VsdEluZGV4XSA9IHJlbmRlck5vZGU7XG5cbiAgICAgICAgICAvLyBUaGlzIHNob3VsZCBtYXRjaCByZXN1bHRMaXN0Lmxlbmd0aCBhbmQgbWFya3VwTGlzdC5sZW5ndGggd2hlblxuICAgICAgICAgIC8vIHdlJ3JlIGRvbmUuXG4gICAgICAgICAgcmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCArPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYW5nZXI6IERpc2NhcmRpbmcgdW5leHBlY3RlZCBub2RlOicsIHJlbmRlck5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWx0aG91Z2ggcmVzdWx0TGlzdCB3YXMgcG9wdWxhdGVkIG91dCBvZiBvcmRlciwgaXQgc2hvdWxkIG5vdyBiZSBhIGRlbnNlXG4gICAgLy8gYXJyYXkuXG4gICAgIShyZXN1bHRMaXN0QXNzaWdubWVudENvdW50ID09PSByZXN1bHRMaXN0Lmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBEaWQgbm90IGFzc2lnbiB0byBldmVyeSBpbmRleCBvZiByZXN1bHRMaXN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICEocmVzdWx0TGlzdC5sZW5ndGggPT09IG1hcmt1cExpc3QubGVuZ3RoKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEYW5nZXI6IEV4cGVjdGVkIG1hcmt1cCB0byByZW5kZXIgJXMgbm9kZXMsIGJ1dCByZW5kZXJlZCAlcy4nLCBtYXJrdXBMaXN0Lmxlbmd0aCwgcmVzdWx0TGlzdC5sZW5ndGgpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiByZXN1bHRMaXN0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhIG5vZGUgd2l0aCBhIHN0cmluZyBvZiBtYXJrdXAgYXQgaXRzIGN1cnJlbnQgcG9zaXRpb24gd2l0aGluIGl0c1xuICAgKiBwYXJlbnQuIFRoZSBtYXJrdXAgbXVzdCByZW5kZXIgaW50byBhIHNpbmdsZSByb290IG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gb2xkQ2hpbGQgQ2hpbGQgbm9kZSB0byByZXBsYWNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0byByZW5kZXIgaW4gcGxhY2Ugb2YgdGhlIGNoaWxkIG5vZGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXA6IGZ1bmN0aW9uIChvbGRDaGlsZCwgbWFya3VwKSB7XG4gICAgIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCguLi4pOiBDYW5ub3QgcmVuZGVyIG1hcmt1cCBpbiBhICcgKyAnd29ya2VyIHRocmVhZC4gTWFrZSBzdXJlIGB3aW5kb3dgIGFuZCBgZG9jdW1lbnRgIGFyZSBhdmFpbGFibGUgJyArICdnbG9iYWxseSBiZWZvcmUgcmVxdWlyaW5nIFJlYWN0IHdoZW4gdW5pdCB0ZXN0aW5nIG9yIHVzZSAnICsgJ1JlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKCkgZm9yIHNlcnZlciByZW5kZXJpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICFtYXJrdXAgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAoLi4uKTogTWlzc2luZyBtYXJrdXAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICEob2xkQ2hpbGQudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnaHRtbCcpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IENhbm5vdCByZXBsYWNlIG1hcmt1cCBvZiB0aGUgJyArICc8aHRtbD4gbm9kZS4gVGhpcyBpcyBiZWNhdXNlIGJyb3dzZXIgcXVpcmtzIG1ha2UgdGhpcyB1bnJlbGlhYmxlICcgKyAnYW5kL29yIHNsb3cuIElmIHlvdSB3YW50IHRvIHJlbmRlciB0byB0aGUgcm9vdCB5b3UgbXVzdCB1c2UgJyArICdzZXJ2ZXIgcmVuZGVyaW5nLiBTZWUgUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgbmV3Q2hpbGQ7XG4gICAgaWYgKHR5cGVvZiBtYXJrdXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICBuZXdDaGlsZCA9IGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXAsIGVtcHR5RnVuY3Rpb24pWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdDaGlsZCA9IG1hcmt1cDtcbiAgICB9XG4gICAgb2xkQ2hpbGQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Q2hpbGQsIG9sZENoaWxkKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhbmdlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbi8qKlxuICogTW9kdWxlIHRoYXQgaXMgaW5qZWN0YWJsZSBpbnRvIGBFdmVudFBsdWdpbkh1YmAsIHRoYXQgc3BlY2lmaWVzIGFcbiAqIGRldGVybWluaXN0aWMgb3JkZXJpbmcgb2YgYEV2ZW50UGx1Z2luYHMuIEEgY29udmVuaWVudCB3YXkgdG8gcmVhc29uIGFib3V0XG4gKiBwbHVnaW5zLCB3aXRob3V0IGhhdmluZyB0byBwYWNrYWdlIGV2ZXJ5IG9uZSBvZiB0aGVtLiBUaGlzIGlzIGJldHRlciB0aGFuXG4gKiBoYXZpbmcgcGx1Z2lucyBiZSBvcmRlcmVkIGluIHRoZSBzYW1lIG9yZGVyIHRoYXQgdGhleSBhcmUgaW5qZWN0ZWQgYmVjYXVzZVxuICogdGhhdCBvcmRlcmluZyB3b3VsZCBiZSBpbmZsdWVuY2VkIGJ5IHRoZSBwYWNrYWdpbmcgb3JkZXIuXG4gKiBgUmVzcG9uZGVyRXZlbnRQbHVnaW5gIG11c3Qgb2NjdXIgYmVmb3JlIGBTaW1wbGVFdmVudFBsdWdpbmAgc28gdGhhdFxuICogcHJldmVudGluZyBkZWZhdWx0IG9uIGV2ZW50cyBpcyBjb252ZW5pZW50IGluIGBTaW1wbGVFdmVudFBsdWdpbmAgaGFuZGxlcnMuXG4gKi9cbnZhciBEZWZhdWx0RXZlbnRQbHVnaW5PcmRlciA9IFtrZXlPZih7IFJlc3BvbmRlckV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IFNpbXBsZUV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IFRhcEV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IEVudGVyTGVhdmVFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBDaGFuZ2VFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBTZWxlY3RFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luOiBudWxsIH0pXTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWZhdWx0RXZlbnRQbHVnaW5PcmRlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG52YXIgZ2V0Rmlyc3RSZWFjdERPTSA9IFJlYWN0TW91bnQuZ2V0Rmlyc3RSZWFjdERPTTtcblxudmFyIGV2ZW50VHlwZXMgPSB7XG4gIG1vdXNlRW50ZXI6IHtcbiAgICByZWdpc3RyYXRpb25OYW1lOiBrZXlPZih7IG9uTW91c2VFbnRlcjogbnVsbCB9KSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0LCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcl1cbiAgfSxcbiAgbW91c2VMZWF2ZToge1xuICAgIHJlZ2lzdHJhdGlvbk5hbWU6IGtleU9mKHsgb25Nb3VzZUxlYXZlOiBudWxsIH0pLFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wTW91c2VPdXQsIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyXVxuICB9XG59O1xuXG52YXIgZXh0cmFjdGVkRXZlbnRzID0gW251bGwsIG51bGxdO1xuXG52YXIgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEZvciBhbG1vc3QgZXZlcnkgaW50ZXJhY3Rpb24gd2UgY2FyZSBhYm91dCwgdGhlcmUgd2lsbCBiZSBib3RoIGEgdG9wLWxldmVsXG4gICAqIGBtb3VzZW92ZXJgIGFuZCBgbW91c2VvdXRgIGV2ZW50IHRoYXQgb2NjdXJzLiBPbmx5IHVzZSBgbW91c2VvdXRgIHNvIHRoYXRcbiAgICogd2UgZG8gbm90IGV4dHJhY3QgZHVwbGljYXRlIGV2ZW50cy4gSG93ZXZlciwgbW92aW5nIHRoZSBtb3VzZSBpbnRvIHRoZVxuICAgKiBicm93c2VyIGZyb20gb3V0c2lkZSB3aWxsIG5vdCBmaXJlIGEgYG1vdXNlb3V0YCBldmVudC4gSW4gdGhpcyBjYXNlLCB3ZSB1c2VcbiAgICogdGhlIGBtb3VzZW92ZXJgIHRvcC1sZXZlbCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHN9XG4gICAqL1xuICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gICAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXIgJiYgKG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgbmF0aXZlRXZlbnQuZnJvbUVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRvcExldmVsVHlwZSAhPT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCAmJiB0b3BMZXZlbFR5cGUgIT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyKSB7XG4gICAgICAvLyBNdXN0IG5vdCBiZSBhIG1vdXNlIGluIG9yIG1vdXNlIG91dCAtIGlnbm9yaW5nLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHdpbjtcbiAgICBpZiAodG9wTGV2ZWxUYXJnZXQud2luZG93ID09PSB0b3BMZXZlbFRhcmdldCkge1xuICAgICAgLy8gYHRvcExldmVsVGFyZ2V0YCBpcyBwcm9iYWJseSBhIHdpbmRvdyBvYmplY3QuXG4gICAgICB3aW4gPSB0b3BMZXZlbFRhcmdldDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETzogRmlndXJlIG91dCB3aHkgYG93bmVyRG9jdW1lbnRgIGlzIHNvbWV0aW1lcyB1bmRlZmluZWQgaW4gSUU4LlxuICAgICAgdmFyIGRvYyA9IHRvcExldmVsVGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG4gICAgICBpZiAoZG9jKSB7XG4gICAgICAgIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luID0gd2luZG93O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmcm9tO1xuICAgIHZhciB0bztcbiAgICB2YXIgZnJvbUlEID0gJyc7XG4gICAgdmFyIHRvSUQgPSAnJztcbiAgICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0KSB7XG4gICAgICBmcm9tID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgICBmcm9tSUQgPSB0b3BMZXZlbFRhcmdldElEO1xuICAgICAgdG8gPSBnZXRGaXJzdFJlYWN0RE9NKG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgbmF0aXZlRXZlbnQudG9FbGVtZW50KTtcbiAgICAgIGlmICh0bykge1xuICAgICAgICB0b0lEID0gUmVhY3RNb3VudC5nZXRJRCh0byk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0byA9IHdpbjtcbiAgICAgIH1cbiAgICAgIHRvID0gdG8gfHwgd2luO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcm9tID0gd2luO1xuICAgICAgdG8gPSB0b3BMZXZlbFRhcmdldDtcbiAgICAgIHRvSUQgPSB0b3BMZXZlbFRhcmdldElEO1xuICAgIH1cblxuICAgIGlmIChmcm9tID09PSB0bykge1xuICAgICAgLy8gTm90aGluZyBwZXJ0YWlucyB0byBvdXIgbWFuYWdlZCBjb21wb25lbnRzLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGxlYXZlID0gU3ludGhldGljTW91c2VFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5tb3VzZUxlYXZlLCBmcm9tSUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgbGVhdmUudHlwZSA9ICdtb3VzZWxlYXZlJztcbiAgICBsZWF2ZS50YXJnZXQgPSBmcm9tO1xuICAgIGxlYXZlLnJlbGF0ZWRUYXJnZXQgPSB0bztcblxuICAgIHZhciBlbnRlciA9IFN5bnRoZXRpY01vdXNlRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMubW91c2VFbnRlciwgdG9JRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICBlbnRlci50eXBlID0gJ21vdXNlZW50ZXInO1xuICAgIGVudGVyLnRhcmdldCA9IHRvO1xuICAgIGVudGVyLnJlbGF0ZWRUYXJnZXQgPSBmcm9tO1xuXG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXMobGVhdmUsIGVudGVyLCBmcm9tSUQsIHRvSUQpO1xuXG4gICAgZXh0cmFjdGVkRXZlbnRzWzBdID0gbGVhdmU7XG4gICAgZXh0cmFjdGVkRXZlbnRzWzFdID0gZW50ZXI7XG5cbiAgICByZXR1cm4gZXh0cmFjdGVkRXZlbnRzO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRW50ZXJMZWF2ZUV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudENvbnN0YW50c1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xuXG52YXIgUHJvcGFnYXRpb25QaGFzZXMgPSBrZXlNaXJyb3IoeyBidWJibGVkOiBudWxsLCBjYXB0dXJlZDogbnVsbCB9KTtcblxuLyoqXG4gKiBUeXBlcyBvZiByYXcgc2lnbmFscyBmcm9tIHRoZSBicm93c2VyIGNhdWdodCBhdCB0aGUgdG9wIGxldmVsLlxuICovXG52YXIgdG9wTGV2ZWxUeXBlcyA9IGtleU1pcnJvcih7XG4gIHRvcEFib3J0OiBudWxsLFxuICB0b3BCbHVyOiBudWxsLFxuICB0b3BDYW5QbGF5OiBudWxsLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogbnVsbCxcbiAgdG9wQ2hhbmdlOiBudWxsLFxuICB0b3BDbGljazogbnVsbCxcbiAgdG9wQ29tcG9zaXRpb25FbmQ6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uU3RhcnQ6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uVXBkYXRlOiBudWxsLFxuICB0b3BDb250ZXh0TWVudTogbnVsbCxcbiAgdG9wQ29weTogbnVsbCxcbiAgdG9wQ3V0OiBudWxsLFxuICB0b3BEb3VibGVDbGljazogbnVsbCxcbiAgdG9wRHJhZzogbnVsbCxcbiAgdG9wRHJhZ0VuZDogbnVsbCxcbiAgdG9wRHJhZ0VudGVyOiBudWxsLFxuICB0b3BEcmFnRXhpdDogbnVsbCxcbiAgdG9wRHJhZ0xlYXZlOiBudWxsLFxuICB0b3BEcmFnT3ZlcjogbnVsbCxcbiAgdG9wRHJhZ1N0YXJ0OiBudWxsLFxuICB0b3BEcm9wOiBudWxsLFxuICB0b3BEdXJhdGlvbkNoYW5nZTogbnVsbCxcbiAgdG9wRW1wdGllZDogbnVsbCxcbiAgdG9wRW5jcnlwdGVkOiBudWxsLFxuICB0b3BFbmRlZDogbnVsbCxcbiAgdG9wRXJyb3I6IG51bGwsXG4gIHRvcEZvY3VzOiBudWxsLFxuICB0b3BJbnB1dDogbnVsbCxcbiAgdG9wS2V5RG93bjogbnVsbCxcbiAgdG9wS2V5UHJlc3M6IG51bGwsXG4gIHRvcEtleVVwOiBudWxsLFxuICB0b3BMb2FkOiBudWxsLFxuICB0b3BMb2FkZWREYXRhOiBudWxsLFxuICB0b3BMb2FkZWRNZXRhZGF0YTogbnVsbCxcbiAgdG9wTG9hZFN0YXJ0OiBudWxsLFxuICB0b3BNb3VzZURvd246IG51bGwsXG4gIHRvcE1vdXNlTW92ZTogbnVsbCxcbiAgdG9wTW91c2VPdXQ6IG51bGwsXG4gIHRvcE1vdXNlT3ZlcjogbnVsbCxcbiAgdG9wTW91c2VVcDogbnVsbCxcbiAgdG9wUGFzdGU6IG51bGwsXG4gIHRvcFBhdXNlOiBudWxsLFxuICB0b3BQbGF5OiBudWxsLFxuICB0b3BQbGF5aW5nOiBudWxsLFxuICB0b3BQcm9ncmVzczogbnVsbCxcbiAgdG9wUmF0ZUNoYW5nZTogbnVsbCxcbiAgdG9wUmVzZXQ6IG51bGwsXG4gIHRvcFNjcm9sbDogbnVsbCxcbiAgdG9wU2Vla2VkOiBudWxsLFxuICB0b3BTZWVraW5nOiBudWxsLFxuICB0b3BTZWxlY3Rpb25DaGFuZ2U6IG51bGwsXG4gIHRvcFN0YWxsZWQ6IG51bGwsXG4gIHRvcFN1Ym1pdDogbnVsbCxcbiAgdG9wU3VzcGVuZDogbnVsbCxcbiAgdG9wVGV4dElucHV0OiBudWxsLFxuICB0b3BUaW1lVXBkYXRlOiBudWxsLFxuICB0b3BUb3VjaENhbmNlbDogbnVsbCxcbiAgdG9wVG91Y2hFbmQ6IG51bGwsXG4gIHRvcFRvdWNoTW92ZTogbnVsbCxcbiAgdG9wVG91Y2hTdGFydDogbnVsbCxcbiAgdG9wVm9sdW1lQ2hhbmdlOiBudWxsLFxuICB0b3BXYWl0aW5nOiBudWxsLFxuICB0b3BXaGVlbDogbnVsbFxufSk7XG5cbnZhciBFdmVudENvbnN0YW50cyA9IHtcbiAgdG9wTGV2ZWxUeXBlczogdG9wTGV2ZWxUeXBlcyxcbiAgUHJvcGFnYXRpb25QaGFzZXM6IFByb3BhZ2F0aW9uUGhhc2VzXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50Q29uc3RhbnRzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudFBsdWdpbkh1YlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luUmVnaXN0cnknKTtcbnZhciBFdmVudFBsdWdpblV0aWxzID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpblV0aWxzJyk7XG52YXIgUmVhY3RFcnJvclV0aWxzID0gcmVxdWlyZSgnLi9SZWFjdEVycm9yVXRpbHMnKTtcblxudmFyIGFjY3VtdWxhdGVJbnRvID0gcmVxdWlyZSgnLi9hY2N1bXVsYXRlSW50bycpO1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IHJlcXVpcmUoJy4vZm9yRWFjaEFjY3VtdWxhdGVkJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBJbnRlcm5hbCBzdG9yZSBmb3IgZXZlbnQgbGlzdGVuZXJzXG4gKi9cbnZhciBsaXN0ZW5lckJhbmsgPSB7fTtcblxuLyoqXG4gKiBJbnRlcm5hbCBxdWV1ZSBvZiBldmVudHMgdGhhdCBoYXZlIGFjY3VtdWxhdGVkIHRoZWlyIGRpc3BhdGNoZXMgYW5kIGFyZVxuICogd2FpdGluZyB0byBoYXZlIHRoZWlyIGRpc3BhdGNoZXMgZXhlY3V0ZWQuXG4gKi9cbnZhciBldmVudFF1ZXVlID0gbnVsbDtcblxuLyoqXG4gKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGFuZCByZWxlYXNlcyBpdCBiYWNrIGludG8gdGhlIHBvb2wsIHVubGVzcyBwZXJzaXN0ZW50LlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gZXZlbnQgU3ludGhldGljIGV2ZW50IHRvIGJlIGRpc3BhdGNoZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNpbXVsYXRlZCBJZiB0aGUgZXZlbnQgaXMgc2ltdWxhdGVkIChjaGFuZ2VzIGV4biBiZWhhdmlvcilcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2UgPSBmdW5jdGlvbiAoZXZlbnQsIHNpbXVsYXRlZCkge1xuICBpZiAoZXZlbnQpIHtcbiAgICBFdmVudFBsdWdpblV0aWxzLmV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcihldmVudCwgc2ltdWxhdGVkKTtcblxuICAgIGlmICghZXZlbnQuaXNQZXJzaXN0ZW50KCkpIHtcbiAgICAgIGV2ZW50LmNvbnN0cnVjdG9yLnJlbGVhc2UoZXZlbnQpO1xuICAgIH1cbiAgfVxufTtcbnZhciBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VTaW11bGF0ZWQgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlKGUsIHRydWUpO1xufTtcbnZhciBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VUb3BMZXZlbCA9IGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2UoZSwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiAtIGBJbnN0YW5jZUhhbmRsZWA6IFtyZXF1aXJlZF0gTW9kdWxlIHRoYXQgcGVyZm9ybXMgbG9naWNhbCB0cmF2ZXJzYWxzIG9mIERPTVxuICogICBoaWVyYXJjaHkgZ2l2ZW4gaWRzIG9mIHRoZSBsb2dpY2FsIERPTSBlbGVtZW50cyBpbnZvbHZlZC5cbiAqL1xudmFyIEluc3RhbmNlSGFuZGxlID0gbnVsbDtcblxuZnVuY3Rpb24gdmFsaWRhdGVJbnN0YW5jZUhhbmRsZSgpIHtcbiAgdmFyIHZhbGlkID0gSW5zdGFuY2VIYW5kbGUgJiYgSW5zdGFuY2VIYW5kbGUudHJhdmVyc2VUd29QaGFzZSAmJiBJbnN0YW5jZUhhbmRsZS50cmF2ZXJzZUVudGVyTGVhdmU7XG4gIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHZhbGlkLCAnSW5zdGFuY2VIYW5kbGUgbm90IGluamVjdGVkIGJlZm9yZSB1c2UhJykgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHVuaWZpZWQgaW50ZXJmYWNlIGZvciBldmVudCBwbHVnaW5zIHRvIGJlIGluc3RhbGxlZCBhbmQgY29uZmlndXJlZC5cbiAqXG4gKiBFdmVudCBwbHVnaW5zIGNhbiBpbXBsZW1lbnQgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgYGV4dHJhY3RFdmVudHNgIHtmdW5jdGlvbihzdHJpbmcsIERPTUV2ZW50VGFyZ2V0LCBzdHJpbmcsIG9iamVjdCk6ICp9XG4gKiAgICAgUmVxdWlyZWQuIFdoZW4gYSB0b3AtbGV2ZWwgZXZlbnQgaXMgZmlyZWQsIHRoaXMgbWV0aG9kIGlzIGV4cGVjdGVkIHRvXG4gKiAgICAgZXh0cmFjdCBzeW50aGV0aWMgZXZlbnRzIHRoYXQgd2lsbCBpbiB0dXJuIGJlIHF1ZXVlZCBhbmQgZGlzcGF0Y2hlZC5cbiAqXG4gKiAgIGBldmVudFR5cGVzYCB7b2JqZWN0fVxuICogICAgIE9wdGlvbmFsLCBwbHVnaW5zIHRoYXQgZmlyZSBldmVudHMgbXVzdCBwdWJsaXNoIGEgbWFwcGluZyBvZiByZWdpc3RyYXRpb25cbiAqICAgICBuYW1lcyB0aGF0IGFyZSB1c2VkIHRvIHJlZ2lzdGVyIGxpc3RlbmVycy4gVmFsdWVzIG9mIHRoaXMgbWFwcGluZyBtdXN0XG4gKiAgICAgYmUgb2JqZWN0cyB0aGF0IGNvbnRhaW4gYHJlZ2lzdHJhdGlvbk5hbWVgIG9yIGBwaGFzZWRSZWdpc3RyYXRpb25OYW1lc2AuXG4gKlxuICogICBgZXhlY3V0ZURpc3BhdGNoYCB7ZnVuY3Rpb24ob2JqZWN0LCBmdW5jdGlvbiwgc3RyaW5nKX1cbiAqICAgICBPcHRpb25hbCwgYWxsb3dzIHBsdWdpbnMgdG8gb3ZlcnJpZGUgaG93IGFuIGV2ZW50IGdldHMgZGlzcGF0Y2hlZC4gQnlcbiAqICAgICBkZWZhdWx0LCB0aGUgbGlzdGVuZXIgaXMgc2ltcGx5IGludm9rZWQuXG4gKlxuICogRWFjaCBwbHVnaW4gdGhhdCBpcyBpbmplY3RlZCBpbnRvIGBFdmVudHNQbHVnaW5IdWJgIGlzIGltbWVkaWF0ZWx5IG9wZXJhYmxlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xudmFyIEV2ZW50UGx1Z2luSHViID0ge1xuXG4gIC8qKlxuICAgKiBNZXRob2RzIGZvciBpbmplY3RpbmcgZGVwZW5kZW5jaWVzLlxuICAgKi9cbiAgaW5qZWN0aW9uOiB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gSW5qZWN0ZWRNb3VudFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RNb3VudDogRXZlbnRQbHVnaW5VdGlscy5pbmplY3Rpb24uaW5qZWN0TW91bnQsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gSW5qZWN0ZWRJbnN0YW5jZUhhbmRsZVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RJbnN0YW5jZUhhbmRsZTogZnVuY3Rpb24gKEluamVjdGVkSW5zdGFuY2VIYW5kbGUpIHtcbiAgICAgIEluc3RhbmNlSGFuZGxlID0gSW5qZWN0ZWRJbnN0YW5jZUhhbmRsZTtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0SW5zdGFuY2VIYW5kbGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBJbnN0YW5jZUhhbmRsZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthcnJheX0gSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGluamVjdEV2ZW50UGx1Z2luT3JkZXI6IEV2ZW50UGx1Z2luUmVnaXN0cnkuaW5qZWN0RXZlbnRQbHVnaW5PcmRlcixcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpbmplY3RlZE5hbWVzVG9QbHVnaW5zIE1hcCBmcm9tIG5hbWVzIHRvIHBsdWdpbiBtb2R1bGVzLlxuICAgICAqL1xuICAgIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZTogRXZlbnRQbHVnaW5SZWdpc3RyeS5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWVcblxuICB9LFxuXG4gIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlnczogRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MsXG5cbiAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMsXG5cbiAgLyoqXG4gICAqIFN0b3JlcyBgbGlzdGVuZXJgIGF0IGBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdYC4gSXMgaWRlbXBvdGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIHN0b3JlLlxuICAgKi9cbiAgcHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICAhKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXhwZWN0ZWQgJXMgbGlzdGVuZXIgdG8gYmUgYSBmdW5jdGlvbiwgaW5zdGVhZCBnb3QgdHlwZSAlcycsIHJlZ2lzdHJhdGlvbk5hbWUsIHR5cGVvZiBsaXN0ZW5lcikgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdIHx8IChsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV0gPSB7fSk7XG4gICAgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWVbaWRdID0gbGlzdGVuZXI7XG5cbiAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXTtcbiAgICBpZiAoUGx1Z2luTW9kdWxlICYmIFBsdWdpbk1vZHVsZS5kaWRQdXRMaXN0ZW5lcikge1xuICAgICAgUGx1Z2luTW9kdWxlLmRpZFB1dExpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIERPTSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaXN0cmF0aW9uTmFtZSBOYW1lIG9mIGxpc3RlbmVyIChlLmcuIGBvbkNsaWNrYCkuXG4gICAqIEByZXR1cm4gez9mdW5jdGlvbn0gVGhlIHN0b3JlZCBjYWxsYmFjay5cbiAgICovXG4gIGdldExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICB2YXIgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUgPSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgcmV0dXJuIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lICYmIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXTtcbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlcyBhIGxpc3RlbmVyIGZyb20gdGhlIHJlZ2lzdHJhdGlvbiBiYW5rLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIERPTSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaXN0cmF0aW9uTmFtZSBOYW1lIG9mIGxpc3RlbmVyIChlLmcuIGBvbkNsaWNrYCkuXG4gICAqL1xuICBkZWxldGVMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgaWYgKFBsdWdpbk1vZHVsZSAmJiBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKSB7XG4gICAgICBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUgPSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgLy8gVE9ETzogVGhpcyBzaG91bGQgbmV2ZXIgYmUgbnVsbCAtLSB3aGVuIGlzIGl0P1xuICAgIGlmIChiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSkge1xuICAgICAgZGVsZXRlIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYWxsIGxpc3RlbmVycyBmb3IgdGhlIERPTSBlbGVtZW50IHdpdGggdGhlIHN1cHBsaWVkIElELlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIERPTSBlbGVtZW50LlxuICAgKi9cbiAgZGVsZXRlQWxsTGlzdGVuZXJzOiBmdW5jdGlvbiAoaWQpIHtcbiAgICBmb3IgKHZhciByZWdpc3RyYXRpb25OYW1lIGluIGxpc3RlbmVyQmFuaykge1xuICAgICAgaWYgKCFsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXTtcbiAgICAgIGlmIChQbHVnaW5Nb2R1bGUgJiYgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcikge1xuICAgICAgICBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lKTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXVtpZF07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBbGxvd3MgcmVnaXN0ZXJlZCBwbHVnaW5zIGFuIG9wcG9ydHVuaXR5IHRvIGV4dHJhY3QgZXZlbnRzIGZyb20gdG9wLWxldmVsXG4gICAqIG5hdGl2ZSBicm93c2VyIGV2ZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBldmVudHM7XG4gICAgdmFyIHBsdWdpbnMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBOb3QgZXZlcnkgcGx1Z2luIGluIHRoZSBvcmRlcmluZyBtYXkgYmUgbG9hZGVkIGF0IHJ1bnRpbWUuXG4gICAgICB2YXIgcG9zc2libGVQbHVnaW4gPSBwbHVnaW5zW2ldO1xuICAgICAgaWYgKHBvc3NpYmxlUGx1Z2luKSB7XG4gICAgICAgIHZhciBleHRyYWN0ZWRFdmVudHMgPSBwb3NzaWJsZVBsdWdpbi5leHRyYWN0RXZlbnRzKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgICAgIGlmIChleHRyYWN0ZWRFdmVudHMpIHtcbiAgICAgICAgICBldmVudHMgPSBhY2N1bXVsYXRlSW50byhldmVudHMsIGV4dHJhY3RlZEV2ZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbiAgfSxcblxuICAvKipcbiAgICogRW5xdWV1ZXMgYSBzeW50aGV0aWMgZXZlbnQgdGhhdCBzaG91bGQgYmUgZGlzcGF0Y2hlZCB3aGVuXG4gICAqIGBwcm9jZXNzRXZlbnRRdWV1ZWAgaXMgaW52b2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudHMgQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUV2ZW50czogZnVuY3Rpb24gKGV2ZW50cykge1xuICAgIGlmIChldmVudHMpIHtcbiAgICAgIGV2ZW50UXVldWUgPSBhY2N1bXVsYXRlSW50byhldmVudFF1ZXVlLCBldmVudHMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhbGwgc3ludGhldGljIGV2ZW50cyBvbiB0aGUgZXZlbnQgcXVldWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJvY2Vzc0V2ZW50UXVldWU6IGZ1bmN0aW9uIChzaW11bGF0ZWQpIHtcbiAgICAvLyBTZXQgYGV2ZW50UXVldWVgIHRvIG51bGwgYmVmb3JlIHByb2Nlc3NpbmcgaXQgc28gdGhhdCB3ZSBjYW4gdGVsbCBpZiBtb3JlXG4gICAgLy8gZXZlbnRzIGdldCBlbnF1ZXVlZCB3aGlsZSBwcm9jZXNzaW5nLlxuICAgIHZhciBwcm9jZXNzaW5nRXZlbnRRdWV1ZSA9IGV2ZW50UXVldWU7XG4gICAgZXZlbnRRdWV1ZSA9IG51bGw7XG4gICAgaWYgKHNpbXVsYXRlZCkge1xuICAgICAgZm9yRWFjaEFjY3VtdWxhdGVkKHByb2Nlc3NpbmdFdmVudFF1ZXVlLCBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VTaW11bGF0ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JFYWNoQWNjdW11bGF0ZWQocHJvY2Vzc2luZ0V2ZW50UXVldWUsIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVRvcExldmVsKTtcbiAgICB9XG4gICAgISFldmVudFF1ZXVlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3Byb2Nlc3NFdmVudFF1ZXVlKCk6IEFkZGl0aW9uYWwgZXZlbnRzIHdlcmUgZW5xdWV1ZWQgd2hpbGUgcHJvY2Vzc2luZyAnICsgJ2FuIGV2ZW50IHF1ZXVlLiBTdXBwb3J0IGZvciB0aGlzIGhhcyBub3QgeWV0IGJlZW4gaW1wbGVtZW50ZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIC8vIFRoaXMgd291bGQgYmUgYSBnb29kIHRpbWUgdG8gcmV0aHJvdyBpZiBhbnkgb2YgdGhlIGV2ZW50IGhhbmRsZXJzIHRocmV3LlxuICAgIFJlYWN0RXJyb3JVdGlscy5yZXRocm93Q2F1Z2h0RXJyb3IoKTtcbiAgfSxcblxuICAvKipcbiAgICogVGhlc2UgYXJlIG5lZWRlZCBmb3IgdGVzdHMgb25seS4gRG8gbm90IHVzZSFcbiAgICovXG4gIF9fcHVyZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICBsaXN0ZW5lckJhbmsgPSB7fTtcbiAgfSxcblxuICBfX2dldExpc3RlbmVyQmFuazogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBsaXN0ZW5lckJhbms7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpbkh1YjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5SZWdpc3RyeVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBJbmplY3RhYmxlIG9yZGVyaW5nIG9mIGV2ZW50IHBsdWdpbnMuXG4gKi9cbnZhciBFdmVudFBsdWdpbk9yZGVyID0gbnVsbDtcblxuLyoqXG4gKiBJbmplY3RhYmxlIG1hcHBpbmcgZnJvbSBuYW1lcyB0byBldmVudCBwbHVnaW4gbW9kdWxlcy5cbiAqL1xudmFyIG5hbWVzVG9QbHVnaW5zID0ge307XG5cbi8qKlxuICogUmVjb21wdXRlcyB0aGUgcGx1Z2luIGxpc3QgdXNpbmcgdGhlIGluamVjdGVkIHBsdWdpbnMgYW5kIHBsdWdpbiBvcmRlcmluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNvbXB1dGVQbHVnaW5PcmRlcmluZygpIHtcbiAgaWYgKCFFdmVudFBsdWdpbk9yZGVyKSB7XG4gICAgLy8gV2FpdCB1bnRpbCBhbiBgRXZlbnRQbHVnaW5PcmRlcmAgaXMgaW5qZWN0ZWQuXG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gbmFtZXNUb1BsdWdpbnMpIHtcbiAgICB2YXIgUGx1Z2luTW9kdWxlID0gbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG4gICAgdmFyIHBsdWdpbkluZGV4ID0gRXZlbnRQbHVnaW5PcmRlci5pbmRleE9mKHBsdWdpbk5hbWUpO1xuICAgICEocGx1Z2luSW5kZXggPiAtMSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogQ2Fubm90IGluamVjdCBldmVudCBwbHVnaW5zIHRoYXQgZG8gbm90IGV4aXN0IGluICcgKyAndGhlIHBsdWdpbiBvcmRlcmluZywgYCVzYC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgaWYgKEV2ZW50UGx1Z2luUmVnaXN0cnkucGx1Z2luc1twbHVnaW5JbmRleF0pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAhUGx1Z2luTW9kdWxlLmV4dHJhY3RFdmVudHMgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogRXZlbnQgcGx1Z2lucyBtdXN0IGltcGxlbWVudCBhbiBgZXh0cmFjdEV2ZW50c2AgJyArICdtZXRob2QsIGJ1dCBgJXNgIGRvZXMgbm90LicsIHBsdWdpbk5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnNbcGx1Z2luSW5kZXhdID0gUGx1Z2luTW9kdWxlO1xuICAgIHZhciBwdWJsaXNoZWRFdmVudHMgPSBQbHVnaW5Nb2R1bGUuZXZlbnRUeXBlcztcbiAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gcHVibGlzaGVkRXZlbnRzKSB7XG4gICAgICAhcHVibGlzaEV2ZW50Rm9yUGx1Z2luKHB1Ymxpc2hlZEV2ZW50c1tldmVudE5hbWVdLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogRmFpbGVkIHRvIHB1Ymxpc2ggZXZlbnQgYCVzYCBmb3IgcGx1Z2luIGAlc2AuJywgZXZlbnROYW1lLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUHVibGlzaGVzIGFuIGV2ZW50IHNvIHRoYXQgaXQgY2FuIGJlIGRpc3BhdGNoZWQgYnkgdGhlIHN1cHBsaWVkIHBsdWdpbi5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgRGlzcGF0Y2ggY29uZmlndXJhdGlvbiBmb3IgdGhlIGV2ZW50LlxuICogQHBhcmFtIHtvYmplY3R9IFBsdWdpbk1vZHVsZSBQbHVnaW4gcHVibGlzaGluZyB0aGUgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCB3YXMgc3VjY2Vzc2Z1bGx5IHB1Ymxpc2hlZC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hFdmVudEZvclBsdWdpbihkaXNwYXRjaENvbmZpZywgUGx1Z2luTW9kdWxlLCBldmVudE5hbWUpIHtcbiAgISFFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luSHViOiBNb3JlIHRoYW4gb25lIHBsdWdpbiBhdHRlbXB0ZWQgdG8gcHVibGlzaCB0aGUgc2FtZSAnICsgJ2V2ZW50IG5hbWUsIGAlc2AuJywgZXZlbnROYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIEV2ZW50UGx1Z2luUmVnaXN0cnkuZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzW2V2ZW50TmFtZV0gPSBkaXNwYXRjaENvbmZpZztcblxuICB2YXIgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMgPSBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcztcbiAgaWYgKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgZm9yICh2YXIgcGhhc2VOYW1lIGluIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgICBpZiAocGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMuaGFzT3duUHJvcGVydHkocGhhc2VOYW1lKSkge1xuICAgICAgICB2YXIgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZSA9IHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3BoYXNlTmFtZV07XG4gICAgICAgIHB1Ymxpc2hSZWdpc3RyYXRpb25OYW1lKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWUsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHB1Ymxpc2hSZWdpc3RyYXRpb25OYW1lKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgcmVnaXN0cmF0aW9uIG5hbWUgdGhhdCBpcyB1c2VkIHRvIGlkZW50aWZ5IGRpc3BhdGNoZWQgZXZlbnRzIGFuZFxuICogY2FuIGJlIHVzZWQgd2l0aCBgRXZlbnRQbHVnaW5IdWIucHV0TGlzdGVuZXJgIHRvIHJlZ2lzdGVyIGxpc3RlbmVycy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVnaXN0cmF0aW9uTmFtZSBSZWdpc3RyYXRpb24gbmFtZSB0byBhZGQuXG4gKiBAcGFyYW0ge29iamVjdH0gUGx1Z2luTW9kdWxlIFBsdWdpbiBwdWJsaXNoaW5nIHRoZSBldmVudC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hSZWdpc3RyYXRpb25OYW1lKHJlZ2lzdHJhdGlvbk5hbWUsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG4gICEhRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpbkh1YjogTW9yZSB0aGFuIG9uZSBwbHVnaW4gYXR0ZW1wdGVkIHRvIHB1Ymxpc2ggdGhlIHNhbWUgJyArICdyZWdpc3RyYXRpb24gbmFtZSwgYCVzYC4nLCByZWdpc3RyYXRpb25OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV0gPSBQbHVnaW5Nb2R1bGU7XG4gIEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXSA9IFBsdWdpbk1vZHVsZS5ldmVudFR5cGVzW2V2ZW50TmFtZV0uZGVwZW5kZW5jaWVzO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBwbHVnaW5zIHNvIHRoYXQgdGhleSBjYW4gZXh0cmFjdCBhbmQgZGlzcGF0Y2ggZXZlbnRzLlxuICpcbiAqIEBzZWUge0V2ZW50UGx1Z2luSHVifVxuICovXG52YXIgRXZlbnRQbHVnaW5SZWdpc3RyeSA9IHtcblxuICAvKipcbiAgICogT3JkZXJlZCBsaXN0IG9mIGluamVjdGVkIHBsdWdpbnMuXG4gICAqL1xuICBwbHVnaW5zOiBbXSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIGV2ZW50IG5hbWUgdG8gZGlzcGF0Y2ggY29uZmlnXG4gICAqL1xuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IHt9LFxuXG4gIC8qKlxuICAgKiBNYXBwaW5nIGZyb20gcmVnaXN0cmF0aW9uIG5hbWUgdG8gcGx1Z2luIG1vZHVsZVxuICAgKi9cbiAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IHt9LFxuXG4gIC8qKlxuICAgKiBNYXBwaW5nIGZyb20gcmVnaXN0cmF0aW9uIG5hbWUgdG8gZXZlbnQgbmFtZVxuICAgKi9cbiAgcmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llczoge30sXG5cbiAgLyoqXG4gICAqIEluamVjdHMgYW4gb3JkZXJpbmcgb2YgcGx1Z2lucyAoYnkgcGx1Z2luIG5hbWUpLiBUaGlzIGFsbG93cyB0aGUgb3JkZXJpbmdcbiAgICogdG8gYmUgZGVjb3VwbGVkIGZyb20gaW5qZWN0aW9uIG9mIHRoZSBhY3R1YWwgcGx1Z2lucyBzbyB0aGF0IG9yZGVyaW5nIGlzXG4gICAqIGFsd2F5cyBkZXRlcm1pbmlzdGljIHJlZ2FyZGxlc3Mgb2YgcGFja2FnaW5nLCBvbi10aGUtZmx5IGluamVjdGlvbiwgZXRjLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5fSBJbmplY3RlZEV2ZW50UGx1Z2luT3JkZXJcbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmluamVjdGlvbi5pbmplY3RFdmVudFBsdWdpbk9yZGVyfVxuICAgKi9cbiAgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcjogZnVuY3Rpb24gKEluamVjdGVkRXZlbnRQbHVnaW5PcmRlcikge1xuICAgICEhRXZlbnRQbHVnaW5PcmRlciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpblJlZ2lzdHJ5OiBDYW5ub3QgaW5qZWN0IGV2ZW50IHBsdWdpbiBvcmRlcmluZyBtb3JlIHRoYW4gJyArICdvbmNlLiBZb3UgYXJlIGxpa2VseSB0cnlpbmcgdG8gbG9hZCBtb3JlIHRoYW4gb25lIGNvcHkgb2YgUmVhY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIC8vIENsb25lIHRoZSBvcmRlcmluZyBzbyBpdCBjYW5ub3QgYmUgZHluYW1pY2FsbHkgbXV0YXRlZC5cbiAgICBFdmVudFBsdWdpbk9yZGVyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyKTtcbiAgICByZWNvbXB1dGVQbHVnaW5PcmRlcmluZygpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIHBsdWdpbnMgdG8gYmUgdXNlZCBieSBgRXZlbnRQbHVnaW5IdWJgLiBUaGUgcGx1Z2luIG5hbWVzIG11c3QgYmVcbiAgICogaW4gdGhlIG9yZGVyaW5nIGluamVjdGVkIGJ5IGBpbmplY3RFdmVudFBsdWdpbk9yZGVyYC5cbiAgICpcbiAgICogUGx1Z2lucyBjYW4gYmUgaW5qZWN0ZWQgYXMgcGFydCBvZiBwYWdlIGluaXRpYWxpemF0aW9uIG9yIG9uLXRoZS1mbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbmplY3RlZE5hbWVzVG9QbHVnaW5zIE1hcCBmcm9tIG5hbWVzIHRvIHBsdWdpbiBtb2R1bGVzLlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmluamVjdEV2ZW50UGx1Z2luc0J5TmFtZX1cbiAgICovXG4gIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZTogZnVuY3Rpb24gKGluamVjdGVkTmFtZXNUb1BsdWdpbnMpIHtcbiAgICB2YXIgaXNPcmRlcmluZ0RpcnR5ID0gZmFsc2U7XG4gICAgZm9yICh2YXIgcGx1Z2luTmFtZSBpbiBpbmplY3RlZE5hbWVzVG9QbHVnaW5zKSB7XG4gICAgICBpZiAoIWluamVjdGVkTmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gaW5qZWN0ZWROYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXTtcbiAgICAgIGlmICghbmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkgfHwgbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV0gIT09IFBsdWdpbk1vZHVsZSkge1xuICAgICAgICAhIW5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgdHdvIGRpZmZlcmVudCBldmVudCBwbHVnaW5zICcgKyAndXNpbmcgdGhlIHNhbWUgbmFtZSwgYCVzYC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdID0gUGx1Z2luTW9kdWxlO1xuICAgICAgICBpc09yZGVyaW5nRGlydHkgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNPcmRlcmluZ0RpcnR5KSB7XG4gICAgICByZWNvbXB1dGVQbHVnaW5PcmRlcmluZygpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogTG9va3MgdXAgdGhlIHBsdWdpbiBmb3IgdGhlIHN1cHBsaWVkIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgQSBzeW50aGV0aWMgZXZlbnQuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IFRoZSBwbHVnaW4gdGhhdCBjcmVhdGVkIHRoZSBzdXBwbGllZCBldmVudC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRQbHVnaW5Nb2R1bGVGb3JFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGRpc3BhdGNoQ29uZmlnID0gZXZlbnQuZGlzcGF0Y2hDb25maWc7XG4gICAgaWYgKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICAgIHJldHVybiBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW2Rpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWVdIHx8IG51bGw7XG4gICAgfVxuICAgIGZvciAodmFyIHBoYXNlIGluIGRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgICBpZiAoIWRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzLmhhc093blByb3BlcnR5KHBoYXNlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW2Rpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3BoYXNlXV07XG4gICAgICBpZiAoUGx1Z2luTW9kdWxlKSB7XG4gICAgICAgIHJldHVybiBQbHVnaW5Nb2R1bGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVzZXRFdmVudFBsdWdpbnM6IGZ1bmN0aW9uICgpIHtcbiAgICBFdmVudFBsdWdpbk9yZGVyID0gbnVsbDtcbiAgICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIG5hbWVzVG9QbHVnaW5zKSB7XG4gICAgICBpZiAobmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkpIHtcbiAgICAgICAgZGVsZXRlIG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgICBFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnMubGVuZ3RoID0gMDtcblxuICAgIHZhciBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncztcbiAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzKSB7XG4gICAgICBpZiAoZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHtcbiAgICAgICAgZGVsZXRlIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlnc1tldmVudE5hbWVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZWdpc3RyYXRpb25OYW1lTW9kdWxlcyA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM7XG4gICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSBpbiByZWdpc3RyYXRpb25OYW1lTW9kdWxlcykge1xuICAgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHJlZ2lzdHJhdGlvbk5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSByZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudFBsdWdpblV0aWxzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgUmVhY3RFcnJvclV0aWxzID0gcmVxdWlyZSgnLi9SZWFjdEVycm9yVXRpbHMnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogSW5qZWN0ZWQgZGVwZW5kZW5jaWVzOlxuICovXG5cbi8qKlxuICogLSBgTW91bnRgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IGNhbiBjb252ZXJ0IGJldHdlZW4gUmVhY3QgZG9tIElEcyBhbmRcbiAqICAgYWN0dWFsIG5vZGUgcmVmZXJlbmNlcy5cbiAqL1xudmFyIGluamVjdGlvbiA9IHtcbiAgTW91bnQ6IG51bGwsXG4gIGluamVjdE1vdW50OiBmdW5jdGlvbiAoSW5qZWN0ZWRNb3VudCkge1xuICAgIGluamVjdGlvbi5Nb3VudCA9IEluamVjdGVkTW91bnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKEluamVjdGVkTW91bnQgJiYgSW5qZWN0ZWRNb3VudC5nZXROb2RlICYmIEluamVjdGVkTW91bnQuZ2V0SUQsICdFdmVudFBsdWdpblV0aWxzLmluamVjdGlvbi5pbmplY3RNb3VudCguLi4pOiBJbmplY3RlZCBNb3VudCAnICsgJ21vZHVsZSBpcyBtaXNzaW5nIGdldE5vZGUgb3IgZ2V0SUQuJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbmZ1bmN0aW9uIGlzRW5kaXNoKHRvcExldmVsVHlwZSkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoRW5kIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaENhbmNlbDtcbn1cblxuZnVuY3Rpb24gaXNNb3ZlaXNoKHRvcExldmVsVHlwZSkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlTW92ZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wVG91Y2hNb3ZlO1xufVxuZnVuY3Rpb24gaXNTdGFydGlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd24gfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoU3RhcnQ7XG59XG5cbnZhciB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcztcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGRpc3BhdGNoTGlzdGVuZXJzID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICAgIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcblxuICAgIHZhciBsaXN0ZW5lcnNJc0FyciA9IEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpO1xuICAgIHZhciBpZHNJc0FyciA9IEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hJRHMpO1xuICAgIHZhciBJRHNMZW4gPSBpZHNJc0FyciA/IGRpc3BhdGNoSURzLmxlbmd0aCA6IGRpc3BhdGNoSURzID8gMSA6IDA7XG4gICAgdmFyIGxpc3RlbmVyc0xlbiA9IGxpc3RlbmVyc0lzQXJyID8gZGlzcGF0Y2hMaXN0ZW5lcnMubGVuZ3RoIDogZGlzcGF0Y2hMaXN0ZW5lcnMgPyAxIDogMDtcblxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGlkc0lzQXJyID09PSBsaXN0ZW5lcnNJc0FyciAmJiBJRHNMZW4gPT09IGxpc3RlbmVyc0xlbiwgJ0V2ZW50UGx1Z2luVXRpbHM6IEludmFsaWQgYGV2ZW50YC4nKSA6IHVuZGVmaW5lZDtcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCB0aGUgZXZlbnQgdG8gdGhlIGxpc3RlbmVyLlxuICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnQgU3ludGhldGljRXZlbnQgdG8gaGFuZGxlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNpbXVsYXRlZCBJZiB0aGUgZXZlbnQgaXMgc2ltdWxhdGVkIChjaGFuZ2VzIGV4biBiZWhhdmlvcilcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyIEFwcGxpY2F0aW9uLWxldmVsIGNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gZG9tSUQgRE9NIGlkIHRvIHBhc3MgdG8gdGhlIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2goZXZlbnQsIHNpbXVsYXRlZCwgbGlzdGVuZXIsIGRvbUlEKSB7XG4gIHZhciB0eXBlID0gZXZlbnQudHlwZSB8fCAndW5rbm93bi1ldmVudCc7XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBpbmplY3Rpb24uTW91bnQuZ2V0Tm9kZShkb21JRCk7XG4gIGlmIChzaW11bGF0ZWQpIHtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrV2l0aENhdGNoKHR5cGUsIGxpc3RlbmVyLCBldmVudCwgZG9tSUQpO1xuICB9IGVsc2Uge1xuICAgIFJlYWN0RXJyb3JVdGlscy5pbnZva2VHdWFyZGVkQ2FsbGJhY2sodHlwZSwgbGlzdGVuZXIsIGV2ZW50LCBkb21JRCk7XG4gIH1cbiAgZXZlbnQuY3VycmVudFRhcmdldCA9IG51bGw7XG59XG5cbi8qKlxuICogU3RhbmRhcmQvc2ltcGxlIGl0ZXJhdGlvbiB0aHJvdWdoIGFuIGV2ZW50J3MgY29sbGVjdGVkIGRpc3BhdGNoZXMuXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcihldmVudCwgc2ltdWxhdGVkKSB7XG4gIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcbiAgdmFyIGRpc3BhdGNoSURzID0gZXZlbnQuX2Rpc3BhdGNoSURzO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzKGV2ZW50KTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShkaXNwYXRjaExpc3RlbmVycykpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIExpc3RlbmVycyBhbmQgSURzIGFyZSB0d28gcGFyYWxsZWwgYXJyYXlzIHRoYXQgYXJlIGFsd2F5cyBpbiBzeW5jLlxuICAgICAgZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGRpc3BhdGNoTGlzdGVuZXJzW2ldLCBkaXNwYXRjaElEc1tpXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKSB7XG4gICAgZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGRpc3BhdGNoTGlzdGVuZXJzLCBkaXNwYXRjaElEcyk7XG4gIH1cbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbn1cblxuLyoqXG4gKiBTdGFuZGFyZC9zaW1wbGUgaXRlcmF0aW9uIHRocm91Z2ggYW4gZXZlbnQncyBjb2xsZWN0ZWQgZGlzcGF0Y2hlcywgYnV0IHN0b3BzXG4gKiBhdCB0aGUgZmlyc3QgZGlzcGF0Y2ggZXhlY3V0aW9uIHJldHVybmluZyB0cnVlLCBhbmQgcmV0dXJucyB0aGF0IGlkLlxuICpcbiAqIEByZXR1cm4gez9zdHJpbmd9IGlkIG9mIHRoZSBmaXJzdCBkaXNwYXRjaCBleGVjdXRpb24gd2hvJ3MgbGlzdGVuZXIgcmV0dXJuc1xuICogdHJ1ZSwgb3IgbnVsbCBpZiBubyBsaXN0ZW5lciByZXR1cm5lZCB0cnVlLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbChldmVudCkge1xuICB2YXIgZGlzcGF0Y2hMaXN0ZW5lcnMgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwYXRjaExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBMaXN0ZW5lcnMgYW5kIElEcyBhcmUgdHdvIHBhcmFsbGVsIGFycmF5cyB0aGF0IGFyZSBhbHdheXMgaW4gc3luYy5cbiAgICAgIGlmIChkaXNwYXRjaExpc3RlbmVyc1tpXShldmVudCwgZGlzcGF0Y2hJRHNbaV0pKSB7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaElEc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnMpIHtcbiAgICBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnMoZXZlbnQsIGRpc3BhdGNoSURzKSkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoSURzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAc2VlIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWVJbXBsXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUoZXZlbnQpIHtcbiAgdmFyIHJldCA9IGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWVJbXBsKGV2ZW50KTtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBFeGVjdXRpb24gb2YgYSBcImRpcmVjdFwiIGRpc3BhdGNoIC0gdGhlcmUgbXVzdCBiZSBhdCBtb3N0IG9uZSBkaXNwYXRjaFxuICogYWNjdW11bGF0ZWQgb24gdGhlIGV2ZW50IG9yIGl0IGlzIGNvbnNpZGVyZWQgYW4gZXJyb3IuIEl0IGRvZXNuJ3QgcmVhbGx5IG1ha2VcbiAqIHNlbnNlIGZvciBhbiBldmVudCB3aXRoIG11bHRpcGxlIGRpc3BhdGNoZXMgKGJ1YmJsZWQpIHRvIGtlZXAgdHJhY2sgb2YgdGhlXG4gKiByZXR1cm4gdmFsdWVzIGF0IGVhY2ggZGlzcGF0Y2ggZXhlY3V0aW9uLCBidXQgaXQgZG9lcyB0ZW5kIHRvIG1ha2Ugc2Vuc2Ugd2hlblxuICogZGVhbGluZyB3aXRoIFwiZGlyZWN0XCIgZGlzcGF0Y2hlcy5cbiAqXG4gKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGV4ZWN1dGluZyB0aGUgc2luZ2xlIGRpc3BhdGNoLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlyZWN0RGlzcGF0Y2goZXZlbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgdmFyIGRpc3BhdGNoTGlzdGVuZXIgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEID0gZXZlbnQuX2Rpc3BhdGNoSURzO1xuICAhIUFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZXhlY3V0ZURpcmVjdERpc3BhdGNoKC4uLik6IEludmFsaWQgYGV2ZW50YC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciByZXMgPSBkaXNwYXRjaExpc3RlbmVyID8gZGlzcGF0Y2hMaXN0ZW5lcihldmVudCwgZGlzcGF0Y2hJRCkgOiBudWxsO1xuICBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBudWxsO1xuICBldmVudC5fZGlzcGF0Y2hJRHMgPSBudWxsO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmZiBudW1iZXIgb2YgZGlzcGF0Y2hlcyBhY2N1bXVsYXRlZCBpcyBncmVhdGVyIHRoYW4gMC5cbiAqL1xuZnVuY3Rpb24gaGFzRGlzcGF0Y2hlcyhldmVudCkge1xuICByZXR1cm4gISFldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG59XG5cbi8qKlxuICogR2VuZXJhbCB1dGlsaXRpZXMgdGhhdCBhcmUgdXNlZnVsIGluIGNyZWF0aW5nIGN1c3RvbSBFdmVudCBQbHVnaW5zLlxuICovXG52YXIgRXZlbnRQbHVnaW5VdGlscyA9IHtcbiAgaXNFbmRpc2g6IGlzRW5kaXNoLFxuICBpc01vdmVpc2g6IGlzTW92ZWlzaCxcbiAgaXNTdGFydGlzaDogaXNTdGFydGlzaCxcblxuICBleGVjdXRlRGlyZWN0RGlzcGF0Y2g6IGV4ZWN1dGVEaXJlY3REaXNwYXRjaCxcbiAgZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyOiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIsXG4gIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWU6IGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUsXG4gIGhhc0Rpc3BhdGNoZXM6IGhhc0Rpc3BhdGNoZXMsXG5cbiAgZ2V0Tm9kZTogZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXROb2RlKGlkKTtcbiAgfSxcbiAgZ2V0SUQ6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXRJRChub2RlKTtcbiAgfSxcblxuICBpbmplY3Rpb246IGluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpblV0aWxzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudFByb3BhZ2F0b3JzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG5cbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgYWNjdW11bGF0ZUludG8gPSByZXF1aXJlKCcuL2FjY3VtdWxhdGVJbnRvJyk7XG52YXIgZm9yRWFjaEFjY3VtdWxhdGVkID0gcmVxdWlyZSgnLi9mb3JFYWNoQWNjdW11bGF0ZWQnKTtcblxudmFyIFByb3BhZ2F0aW9uUGhhc2VzID0gRXZlbnRDb25zdGFudHMuUHJvcGFnYXRpb25QaGFzZXM7XG52YXIgZ2V0TGlzdGVuZXIgPSBFdmVudFBsdWdpbkh1Yi5nZXRMaXN0ZW5lcjtcblxuLyoqXG4gKiBTb21lIGV2ZW50IHR5cGVzIGhhdmUgYSBub3Rpb24gb2YgZGlmZmVyZW50IHJlZ2lzdHJhdGlvbiBuYW1lcyBmb3IgZGlmZmVyZW50XG4gKiBcInBoYXNlc1wiIG9mIHByb3BhZ2F0aW9uLiBUaGlzIGZpbmRzIGxpc3RlbmVycyBieSBhIGdpdmVuIHBoYXNlLlxuICovXG5mdW5jdGlvbiBsaXN0ZW5lckF0UGhhc2UoaWQsIGV2ZW50LCBwcm9wYWdhdGlvblBoYXNlKSB7XG4gIHZhciByZWdpc3RyYXRpb25OYW1lID0gZXZlbnQuZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNbcHJvcGFnYXRpb25QaGFzZV07XG4gIHJldHVybiBnZXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG59XG5cbi8qKlxuICogVGFncyBhIGBTeW50aGV0aWNFdmVudGAgd2l0aCBkaXNwYXRjaGVkIGxpc3RlbmVycy4gQ3JlYXRpbmcgdGhpcyBmdW5jdGlvblxuICogaGVyZSwgYWxsb3dzIHVzIHRvIG5vdCBoYXZlIHRvIGJpbmQgb3IgY3JlYXRlIGZ1bmN0aW9ucyBmb3IgZWFjaCBldmVudC5cbiAqIE11dGF0aW5nIHRoZSBldmVudCdzIG1lbWJlcnMgYWxsb3dzIHVzIHRvIG5vdCBoYXZlIHRvIGNyZWF0ZSBhIHdyYXBwaW5nXG4gKiBcImRpc3BhdGNoXCIgb2JqZWN0IHRoYXQgcGFpcnMgdGhlIGV2ZW50IHdpdGggdGhlIGxpc3RlbmVyLlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0aW9uYWxEaXNwYXRjaGVzKGRvbUlELCB1cHdhcmRzLCBldmVudCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRvbUlELCAnRGlzcGF0Y2hpbmcgaWQgbXVzdCBub3QgYmUgbnVsbCcpIDogdW5kZWZpbmVkO1xuICB9XG4gIHZhciBwaGFzZSA9IHVwd2FyZHMgPyBQcm9wYWdhdGlvblBoYXNlcy5idWJibGVkIDogUHJvcGFnYXRpb25QaGFzZXMuY2FwdHVyZWQ7XG4gIHZhciBsaXN0ZW5lciA9IGxpc3RlbmVyQXRQaGFzZShkb21JRCwgZXZlbnQsIHBoYXNlKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgZXZlbnQuX2Rpc3BhdGNoSURzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoSURzLCBkb21JRCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb2xsZWN0IGRpc3BhdGNoZXMgKG11c3QgYmUgZW50aXJlbHkgY29sbGVjdGVkIGJlZm9yZSBkaXNwYXRjaGluZyAtIHNlZSB1bml0XG4gKiB0ZXN0cykuIExhemlseSBhbGxvY2F0ZSB0aGUgYXJyYXkgdG8gY29uc2VydmUgbWVtb3J5LiAgV2UgbXVzdCBsb29wIHRocm91Z2hcbiAqIGVhY2ggZXZlbnQgYW5kIHBlcmZvcm0gdGhlIHRyYXZlcnNhbCBmb3IgZWFjaCBvbmUuIFdlIGNhbm5vdCBwZXJmb3JtIGFcbiAqIHNpbmdsZSB0cmF2ZXJzYWwgZm9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbiBvZiBldmVudHMgYmVjYXVzZSBlYWNoIGV2ZW50IG1heVxuICogaGF2ZSBhIGRpZmZlcmVudCB0YXJnZXQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGUoZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmdldEluc3RhbmNlSGFuZGxlKCkudHJhdmVyc2VUd29QaGFzZShldmVudC5kaXNwYXRjaE1hcmtlciwgYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcywgZXZlbnQpO1xuICB9XG59XG5cbi8qKlxuICogU2FtZSBhcyBgYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZWAsIGJ1dCBza2lwcyBvdmVyIHRoZSB0YXJnZXRJRC5cbiAqL1xuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZVNraXBUYXJnZXQoZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmdldEluc3RhbmNlSGFuZGxlKCkudHJhdmVyc2VUd29QaGFzZVNraXBUYXJnZXQoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIGFjY3VtdWxhdGVEaXJlY3Rpb25hbERpc3BhdGNoZXMsIGV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEFjY3VtdWxhdGVzIHdpdGhvdXQgcmVnYXJkIHRvIGRpcmVjdGlvbiwgZG9lcyBub3QgbG9vayBmb3IgcGhhc2VkXG4gKiByZWdpc3RyYXRpb24gbmFtZXMuIFNhbWUgYXMgYGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlYCBidXQgd2l0aG91dFxuICogcmVxdWlyaW5nIHRoYXQgdGhlIGBkaXNwYXRjaE1hcmtlcmAgYmUgdGhlIHNhbWUgYXMgdGhlIGRpc3BhdGNoZWQgSUQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVEaXNwYXRjaGVzKGlkLCBpZ25vcmVkRGlyZWN0aW9uLCBldmVudCkge1xuICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHZhciByZWdpc3RyYXRpb25OYW1lID0gZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZTtcbiAgICB2YXIgbGlzdGVuZXIgPSBnZXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMsIGxpc3RlbmVyKTtcbiAgICAgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaElEcywgaWQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY3VtdWxhdGVzIGRpc3BhdGNoZXMgb24gYW4gYFN5bnRoZXRpY0V2ZW50YCwgYnV0IG9ubHkgZm9yIHRoZVxuICogYGRpc3BhdGNoTWFya2VyYC5cbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50XG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlKGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgYWNjdW11bGF0ZURpc3BhdGNoZXMoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIG51bGwsIGV2ZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50cykge1xuICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlKTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQoZXZlbnRzKSB7XG4gIGZvckVhY2hBY2N1bXVsYXRlZChldmVudHMsIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVTa2lwVGFyZ2V0KTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzKGxlYXZlLCBlbnRlciwgZnJvbUlELCB0b0lEKSB7XG4gIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlRW50ZXJMZWF2ZShmcm9tSUQsIHRvSUQsIGFjY3VtdWxhdGVEaXNwYXRjaGVzLCBsZWF2ZSwgZW50ZXIpO1xufVxuXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlcyhldmVudHMpIHtcbiAgZm9yRWFjaEFjY3VtdWxhdGVkKGV2ZW50cywgYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXNTaW5nbGUpO1xufVxuXG4vKipcbiAqIEEgc21hbGwgc2V0IG9mIHByb3BhZ2F0aW9uIHBhdHRlcm5zLCBlYWNoIG9mIHdoaWNoIHdpbGwgYWNjZXB0IGEgc21hbGwgYW1vdW50XG4gKiBvZiBpbmZvcm1hdGlvbiwgYW5kIGdlbmVyYXRlIGEgc2V0IG9mIFwiZGlzcGF0Y2ggcmVhZHkgZXZlbnQgb2JqZWN0c1wiIC0gd2hpY2hcbiAqIGFyZSBzZXRzIG9mIGV2ZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGFubm90YXRlZCB3aXRoIGEgc2V0IG9mIGRpc3BhdGNoZWRcbiAqIGxpc3RlbmVyIGZ1bmN0aW9ucy9pZHMuIFRoZSBBUEkgaXMgZGVzaWduZWQgdGhpcyB3YXkgdG8gZGlzY291cmFnZSB0aGVzZVxuICogcHJvcGFnYXRpb24gc3RyYXRlZ2llcyBmcm9tIGFjdHVhbGx5IGV4ZWN1dGluZyB0aGUgZGlzcGF0Y2hlcywgc2luY2Ugd2VcbiAqIGFsd2F5cyB3YW50IHRvIGNvbGxlY3QgdGhlIGVudGlyZSBzZXQgb2YgZGlzcGF0Y2hlcyBiZWZvcmUgZXhlY3V0aW5nIGV2ZW50IGFcbiAqIHNpbmdsZSBvbmUuXG4gKlxuICogQGNvbnN0cnVjdG9yIEV2ZW50UHJvcGFnYXRvcnNcbiAqL1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSB7XG4gIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXM6IGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMsXG4gIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTa2lwVGFyZ2V0OiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldCxcbiAgYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXM6IGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzLFxuICBhY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXM6IGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFByb3BhZ2F0b3JzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBnZXRUZXh0Q29udGVudEFjY2Vzc29yID0gcmVxdWlyZSgnLi9nZXRUZXh0Q29udGVudEFjY2Vzc29yJyk7XG5cbi8qKlxuICogVGhpcyBoZWxwZXIgY2xhc3Mgc3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IHRleHQgY29udGVudCBvZiBhIHRhcmdldCBub2RlLFxuICogYWxsb3dpbmcgY29tcGFyaXNvbiBvZiBjb250ZW50IGJlZm9yZSBhbmQgYWZ0ZXIgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBJZGVudGlmeSB0aGUgbm9kZSB3aGVyZSBzZWxlY3Rpb24gY3VycmVudGx5IGJlZ2lucywgdGhlbiBvYnNlcnZlXG4gKiBib3RoIGl0cyB0ZXh0IGNvbnRlbnQgYW5kIGl0cyBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBET00uIFNpbmNlIHRoZVxuICogYnJvd3NlciBtYXkgbmF0aXZlbHkgcmVwbGFjZSB0aGUgdGFyZ2V0IG5vZGUgZHVyaW5nIGNvbXBvc2l0aW9uLCB3ZSBjYW5cbiAqIHVzZSBpdHMgcG9zaXRpb24gdG8gZmluZCBpdHMgcmVwbGFjZW1lbnQuXG4gKlxuICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gcm9vdFxuICovXG5mdW5jdGlvbiBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUocm9vdCkge1xuICB0aGlzLl9yb290ID0gcm9vdDtcbiAgdGhpcy5fc3RhcnRUZXh0ID0gdGhpcy5nZXRUZXh0KCk7XG4gIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IG51bGw7XG59XG5cbmFzc2lnbihGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUucHJvdG90eXBlLCB7XG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yb290ID0gbnVsbDtcbiAgICB0aGlzLl9zdGFydFRleHQgPSBudWxsO1xuICAgIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHRleHQgb2YgaW5wdXQuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJ3ZhbHVlJyBpbiB0aGlzLl9yb290KSB7XG4gICAgICByZXR1cm4gdGhpcy5fcm9vdC52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Jvb3RbZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcigpXTtcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHRoZSBkaWZmZXJpbmcgc3Vic3RyaW5nIGJldHdlZW4gdGhlIGluaXRpYWxseSBzdG9yZWRcbiAgICogdGV4dCBjb250ZW50IGFuZCB0aGUgY3VycmVudCBjb250ZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2ZhbGxiYWNrVGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZhbGxiYWNrVGV4dDtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnQ7XG4gICAgdmFyIHN0YXJ0VmFsdWUgPSB0aGlzLl9zdGFydFRleHQ7XG4gICAgdmFyIHN0YXJ0TGVuZ3RoID0gc3RhcnRWYWx1ZS5sZW5ndGg7XG4gICAgdmFyIGVuZDtcbiAgICB2YXIgZW5kVmFsdWUgPSB0aGlzLmdldFRleHQoKTtcbiAgICB2YXIgZW5kTGVuZ3RoID0gZW5kVmFsdWUubGVuZ3RoO1xuXG4gICAgZm9yIChzdGFydCA9IDA7IHN0YXJ0IDwgc3RhcnRMZW5ndGg7IHN0YXJ0KyspIHtcbiAgICAgIGlmIChzdGFydFZhbHVlW3N0YXJ0XSAhPT0gZW5kVmFsdWVbc3RhcnRdKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBtaW5FbmQgPSBzdGFydExlbmd0aCAtIHN0YXJ0O1xuICAgIGZvciAoZW5kID0gMTsgZW5kIDw9IG1pbkVuZDsgZW5kKyspIHtcbiAgICAgIGlmIChzdGFydFZhbHVlW3N0YXJ0TGVuZ3RoIC0gZW5kXSAhPT0gZW5kVmFsdWVbZW5kTGVuZ3RoIC0gZW5kXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2xpY2VUYWlsID0gZW5kID4gMSA/IDEgLSBlbmQgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZmFsbGJhY2tUZXh0ID0gZW5kVmFsdWUuc2xpY2Uoc3RhcnQsIHNsaWNlVGFpbCk7XG4gICAgcmV0dXJuIHRoaXMuX2ZhbGxiYWNrVGV4dDtcbiAgfVxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgSFRNTERPTVByb3BlcnR5Q29uZmlnXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgTVVTVF9VU0VfQVRUUklCVVRFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURTtcbnZhciBNVVNUX1VTRV9QUk9QRVJUWSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9QUk9QRVJUWTtcbnZhciBIQVNfQk9PTEVBTl9WQUxVRSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfQk9PTEVBTl9WQUxVRTtcbnZhciBIQVNfU0lERV9FRkZFQ1RTID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19TSURFX0VGRkVDVFM7XG52YXIgSEFTX05VTUVSSUNfVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX05VTUVSSUNfVkFMVUU7XG52YXIgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUU7XG52YXIgSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFO1xuXG52YXIgaGFzU1ZHO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB2YXIgaW1wbGVtZW50YXRpb24gPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbjtcbiAgaGFzU1ZHID0gaW1wbGVtZW50YXRpb24gJiYgaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSAmJiBpbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCdodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0Jhc2ljU3RydWN0dXJlJywgJzEuMScpO1xufVxuXG52YXIgSFRNTERPTVByb3BlcnR5Q29uZmlnID0ge1xuICBpc0N1c3RvbUF0dHJpYnV0ZTogUmVnRXhwLnByb3RvdHlwZS50ZXN0LmJpbmQoL14oZGF0YXxhcmlhKS1bYS16X11bYS16XFxkXy5cXC1dKiQvKSxcbiAgUHJvcGVydGllczoge1xuICAgIC8qKlxuICAgICAqIFN0YW5kYXJkIFByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBhY2NlcHQ6IG51bGwsXG4gICAgYWNjZXB0Q2hhcnNldDogbnVsbCxcbiAgICBhY2Nlc3NLZXk6IG51bGwsXG4gICAgYWN0aW9uOiBudWxsLFxuICAgIGFsbG93RnVsbFNjcmVlbjogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgYWxsb3dUcmFuc3BhcmVuY3k6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBhbHQ6IG51bGwsXG4gICAgYXN5bmM6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGF1dG9Db21wbGV0ZTogbnVsbCxcbiAgICAvLyBhdXRvRm9jdXMgaXMgcG9seWZpbGxlZC9ub3JtYWxpemVkIGJ5IEF1dG9Gb2N1c1V0aWxzXG4gICAgLy8gYXV0b0ZvY3VzOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBhdXRvUGxheTogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY2FwdHVyZTogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY2VsbFBhZGRpbmc6IG51bGwsXG4gICAgY2VsbFNwYWNpbmc6IG51bGwsXG4gICAgY2hhclNldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNoYWxsZW5nZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNoZWNrZWQ6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY2xhc3NJRDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIFRvIHNldCBjbGFzc05hbWUgb24gU1ZHIGVsZW1lbnRzLCBpdCdzIG5lY2Vzc2FyeSB0byB1c2UgLnNldEF0dHJpYnV0ZTtcbiAgICAvLyB0aGlzIHdvcmtzIG9uIEhUTUwgZWxlbWVudHMgdG9vIGluIGFsbCBicm93c2VycyBleGNlcHQgSUU4LiBDb252ZW5pZW50bHksXG4gICAgLy8gSUU4IGRvZXNuJ3Qgc3VwcG9ydCBTVkcgYW5kIHNvIHdlIGNhbiBzaW1wbHkgdXNlIHRoZSBhdHRyaWJ1dGUgaW5cbiAgICAvLyBicm93c2VycyB0aGF0IHN1cHBvcnQgU1ZHIGFuZCB0aGUgcHJvcGVydHkgaW4gYnJvd3NlcnMgdGhhdCBkb24ndCxcbiAgICAvLyByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgSFRNTCBvciBTVkcuXG4gICAgY2xhc3NOYW1lOiBoYXNTVkcgPyBNVVNUX1VTRV9BVFRSSUJVVEUgOiBNVVNUX1VTRV9QUk9QRVJUWSxcbiAgICBjb2xzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICBjb2xTcGFuOiBudWxsLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgY29udGVudEVkaXRhYmxlOiBudWxsLFxuICAgIGNvbnRleHRNZW51OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgY29udHJvbHM6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY29vcmRzOiBudWxsLFxuICAgIGNyb3NzT3JpZ2luOiBudWxsLFxuICAgIGRhdGE6IG51bGwsIC8vIEZvciBgPG9iamVjdCAvPmAgYWN0cyBhcyBgc3JjYC5cbiAgICBkYXRlVGltZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgICdkZWZhdWx0JzogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgZGVmZXI6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRpcjogbnVsbCxcbiAgICBkaXNhYmxlZDogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgZG93bmxvYWQ6IEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUsXG4gICAgZHJhZ2dhYmxlOiBudWxsLFxuICAgIGVuY1R5cGU6IG51bGwsXG4gICAgZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZvcm1BY3Rpb246IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtRW5jVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZvcm1NZXRob2Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtTm9WYWxpZGF0ZTogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgZm9ybVRhcmdldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZyYW1lQm9yZGVyOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaGVhZGVyczogbnVsbCxcbiAgICBoZWlnaHQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBoaWRkZW46IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGhpZ2g6IG51bGwsXG4gICAgaHJlZjogbnVsbCxcbiAgICBocmVmTGFuZzogbnVsbCxcbiAgICBodG1sRm9yOiBudWxsLFxuICAgIGh0dHBFcXVpdjogbnVsbCxcbiAgICBpY29uOiBudWxsLFxuICAgIGlkOiBNVVNUX1VTRV9QUk9QRVJUWSxcbiAgICBpbnB1dE1vZGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBpbnRlZ3JpdHk6IG51bGwsXG4gICAgaXM6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBrZXlQYXJhbXM6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBrZXlUeXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2luZDogbnVsbCxcbiAgICBsYWJlbDogbnVsbCxcbiAgICBsYW5nOiBudWxsLFxuICAgIGxpc3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBsb29wOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGxvdzogbnVsbCxcbiAgICBtYW5pZmVzdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG1hcmdpbkhlaWdodDogbnVsbCxcbiAgICBtYXJnaW5XaWR0aDogbnVsbCxcbiAgICBtYXg6IG51bGwsXG4gICAgbWF4TGVuZ3RoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWVkaWE6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtZWRpYUdyb3VwOiBudWxsLFxuICAgIG1ldGhvZDogbnVsbCxcbiAgICBtaW46IG51bGwsXG4gICAgbWluTGVuZ3RoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbXVsdGlwbGU6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgbXV0ZWQ6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgbmFtZTogbnVsbCxcbiAgICBub25jZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG5vVmFsaWRhdGU6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG9wZW46IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG9wdGltdW06IG51bGwsXG4gICAgcGF0dGVybjogbnVsbCxcbiAgICBwbGFjZWhvbGRlcjogbnVsbCxcbiAgICBwb3N0ZXI6IG51bGwsXG4gICAgcHJlbG9hZDogbnVsbCxcbiAgICByYWRpb0dyb3VwOiBudWxsLFxuICAgIHJlYWRPbmx5OiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJlbDogbnVsbCxcbiAgICByZXF1aXJlZDogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgcmV2ZXJzZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByb3dzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICByb3dTcGFuOiBudWxsLFxuICAgIHNhbmRib3g6IG51bGwsXG4gICAgc2NvcGU6IG51bGwsXG4gICAgc2NvcGVkOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzY3JvbGxpbmc6IG51bGwsXG4gICAgc2VhbWxlc3M6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHNlbGVjdGVkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHNoYXBlOiBudWxsLFxuICAgIHNpemU6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFLFxuICAgIHNpemVzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3BhbjogSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgc3BlbGxDaGVjazogbnVsbCxcbiAgICBzcmM6IG51bGwsXG4gICAgc3JjRG9jOiBNVVNUX1VTRV9QUk9QRVJUWSxcbiAgICBzcmNMYW5nOiBudWxsLFxuICAgIHNyY1NldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0YXJ0OiBIQVNfTlVNRVJJQ19WQUxVRSxcbiAgICBzdGVwOiBudWxsLFxuICAgIHN0eWxlOiBudWxsLFxuICAgIHN1bW1hcnk6IG51bGwsXG4gICAgdGFiSW5kZXg6IG51bGwsXG4gICAgdGFyZ2V0OiBudWxsLFxuICAgIHRpdGxlOiBudWxsLFxuICAgIHR5cGU6IG51bGwsXG4gICAgdXNlTWFwOiBudWxsLFxuICAgIHZhbHVlOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19TSURFX0VGRkVDVFMsXG4gICAgd2lkdGg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB3bW9kZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHdyYXA6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBSREZhIFByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBhYm91dDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGRhdGF0eXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaW5saXN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcHJlZml4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgLy8gcHJvcGVydHkgaXMgYWxzbyBzdXBwb3J0ZWQgZm9yIE9wZW5HcmFwaCBpbiBtZXRhIHRhZ3MuXG4gICAgcHJvcGVydHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByZXNvdXJjZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgICd0eXBlb2YnOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdm9jYWI6IE1VU1RfVVNFX0FUVFJJQlVURSxcblxuICAgIC8qKlxuICAgICAqIE5vbi1zdGFuZGFyZCBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgLy8gYXV0b0NhcGl0YWxpemUgYW5kIGF1dG9Db3JyZWN0IGFyZSBzdXBwb3J0ZWQgaW4gTW9iaWxlIFNhZmFyaSBmb3JcbiAgICAvLyBrZXlib2FyZCBoaW50cy5cbiAgICBhdXRvQ2FwaXRhbGl6ZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGF1dG9Db3JyZWN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgLy8gYXV0b1NhdmUgYWxsb3dzIFdlYktpdC9CbGluayB0byBwZXJzaXN0IHZhbHVlcyBvZiBpbnB1dCBmaWVsZHMgb24gcGFnZSByZWxvYWRzXG4gICAgYXV0b1NhdmU6IG51bGwsXG4gICAgLy8gY29sb3IgaXMgZm9yIFNhZmFyaSBtYXNrLWljb24gbGlua1xuICAgIGNvbG9yOiBudWxsLFxuICAgIC8vIGl0ZW1Qcm9wLCBpdGVtU2NvcGUsIGl0ZW1UeXBlIGFyZSBmb3JcbiAgICAvLyBNaWNyb2RhdGEgc3VwcG9ydC4gU2VlIGh0dHA6Ly9zY2hlbWEub3JnL2RvY3MvZ3MuaHRtbFxuICAgIGl0ZW1Qcm9wOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaXRlbVNjb3BlOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBpdGVtVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIGl0ZW1JRCBhbmQgaXRlbVJlZiBhcmUgZm9yIE1pY3JvZGF0YSBzdXBwb3J0IGFzIHdlbGwgYnV0XG4gICAgLy8gb25seSBzcGVjaWZpZWQgaW4gdGhlIHRoZSBXSEFUV0cgc3BlYyBkb2N1bWVudC4gU2VlXG4gICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvbWljcm9kYXRhLmh0bWwjbWljcm9kYXRhLWRvbS1hcGlcbiAgICBpdGVtSUQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBpdGVtUmVmOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgLy8gcmVzdWx0cyBzaG93IGxvb2tpbmcgZ2xhc3MgaWNvbiBhbmQgcmVjZW50IHNlYXJjaGVzIG9uIGlucHV0XG4gICAgLy8gc2VhcmNoIGZpZWxkcyBpbiBXZWJLaXQvQmxpbmtcbiAgICByZXN1bHRzOiBudWxsLFxuICAgIC8vIElFLW9ubHkgYXR0cmlidXRlIHRoYXQgc3BlY2lmaWVzIHNlY3VyaXR5IHJlc3RyaWN0aW9ucyBvbiBhbiBpZnJhbWVcbiAgICAvLyBhcyBhbiBhbHRlcm5hdGl2ZSB0byB0aGUgc2FuZGJveCBhdHRyaWJ1dGUgb24gSUU8MTBcbiAgICBzZWN1cml0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIElFLW9ubHkgYXR0cmlidXRlIHRoYXQgY29udHJvbHMgZm9jdXMgYmVoYXZpb3JcbiAgICB1bnNlbGVjdGFibGU6IE1VU1RfVVNFX0FUVFJJQlVURVxuICB9LFxuICBET01BdHRyaWJ1dGVOYW1lczoge1xuICAgIGFjY2VwdENoYXJzZXQ6ICdhY2NlcHQtY2hhcnNldCcsXG4gICAgY2xhc3NOYW1lOiAnY2xhc3MnLFxuICAgIGh0bWxGb3I6ICdmb3InLFxuICAgIGh0dHBFcXVpdjogJ2h0dHAtZXF1aXYnXG4gIH0sXG4gIERPTVByb3BlcnR5TmFtZXM6IHtcbiAgICBhdXRvQ29tcGxldGU6ICdhdXRvY29tcGxldGUnLFxuICAgIGF1dG9Gb2N1czogJ2F1dG9mb2N1cycsXG4gICAgYXV0b1BsYXk6ICdhdXRvcGxheScsXG4gICAgYXV0b1NhdmU6ICdhdXRvc2F2ZScsXG4gICAgLy8gYGVuY29kaW5nYCBpcyBlcXVpdmFsZW50IHRvIGBlbmN0eXBlYCwgSUU4IGxhY2tzIGFuIGBlbmN0eXBlYCBzZXR0ZXIuXG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvZm9ybXMuaHRtbCNkb20tZnMtZW5jb2RpbmdcbiAgICBlbmNUeXBlOiAnZW5jb2RpbmcnLFxuICAgIGhyZWZMYW5nOiAnaHJlZmxhbmcnLFxuICAgIHJhZGlvR3JvdXA6ICdyYWRpb2dyb3VwJyxcbiAgICBzcGVsbENoZWNrOiAnc3BlbGxjaGVjaycsXG4gICAgc3JjRG9jOiAnc3JjZG9jJyxcbiAgICBzcmNTZXQ6ICdzcmNzZXQnXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSFRNTERPTVByb3BlcnR5Q29uZmlnOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBMaW5rZWRWYWx1ZVV0aWxzXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlcycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBoYXNSZWFkT25seVZhbHVlID0ge1xuICAnYnV0dG9uJzogdHJ1ZSxcbiAgJ2NoZWNrYm94JzogdHJ1ZSxcbiAgJ2ltYWdlJzogdHJ1ZSxcbiAgJ2hpZGRlbic6IHRydWUsXG4gICdyYWRpbyc6IHRydWUsXG4gICdyZXNldCc6IHRydWUsXG4gICdzdWJtaXQnOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKSB7XG4gICEoaW5wdXRQcm9wcy5jaGVja2VkTGluayA9PSBudWxsIHx8IGlucHV0UHJvcHMudmFsdWVMaW5rID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgY2hlY2tlZExpbmsgYW5kIGEgdmFsdWVMaW5rLiBJZiB5b3Ugd2FudCB0byB1c2UgJyArICdjaGVja2VkTGluaywgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byB1c2UgdmFsdWVMaW5rIGFuZCB2aWNlIHZlcnNhLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NlcnRWYWx1ZUxpbmsoaW5wdXRQcm9wcykge1xuICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcbiAgIShpbnB1dFByb3BzLnZhbHVlID09IG51bGwgJiYgaW5wdXRQcm9wcy5vbkNoYW5nZSA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW5ub3QgcHJvdmlkZSBhIHZhbHVlTGluayBhbmQgYSB2YWx1ZSBvciBvbkNoYW5nZSBldmVudC4gSWYgeW91IHdhbnQgJyArICd0byB1c2UgdmFsdWUgb3Igb25DaGFuZ2UsIHlvdSBwcm9iYWJseSBkb25cXCd0IHdhbnQgdG8gdXNlIHZhbHVlTGluay4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRDaGVja2VkTGluayhpbnB1dFByb3BzKSB7XG4gIF9hc3NlcnRTaW5nbGVMaW5rKGlucHV0UHJvcHMpO1xuICAhKGlucHV0UHJvcHMuY2hlY2tlZCA9PSBudWxsICYmIGlucHV0UHJvcHMub25DaGFuZ2UgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ2Fubm90IHByb3ZpZGUgYSBjaGVja2VkTGluayBhbmQgYSBjaGVja2VkIHByb3BlcnR5IG9yIG9uQ2hhbmdlIGV2ZW50LiAnICsgJ0lmIHlvdSB3YW50IHRvIHVzZSBjaGVja2VkIG9yIG9uQ2hhbmdlLCB5b3UgcHJvYmFibHkgZG9uXFwndCB3YW50IHRvICcgKyAndXNlIGNoZWNrZWRMaW5rJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG52YXIgcHJvcFR5cGVzID0ge1xuICB2YWx1ZTogZnVuY3Rpb24gKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgIGlmICghcHJvcHNbcHJvcE5hbWVdIHx8IGhhc1JlYWRPbmx5VmFsdWVbcHJvcHMudHlwZV0gfHwgcHJvcHMub25DaGFuZ2UgfHwgcHJvcHMucmVhZE9ubHkgfHwgcHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgcHJvdmlkZWQgYSBgdmFsdWVgIHByb3AgdG8gYSBmb3JtIGZpZWxkIHdpdGhvdXQgYW4gJyArICdgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmICcgKyAndGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdFZhbHVlYC4gT3RoZXJ3aXNlLCAnICsgJ3NldCBlaXRoZXIgYG9uQ2hhbmdlYCBvciBgcmVhZE9ubHlgLicpO1xuICB9LFxuICBjaGVja2VkOiBmdW5jdGlvbiAocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gICAgaWYgKCFwcm9wc1twcm9wTmFtZV0gfHwgcHJvcHMub25DaGFuZ2UgfHwgcHJvcHMucmVhZE9ubHkgfHwgcHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgcHJvdmlkZWQgYSBgY2hlY2tlZGAgcHJvcCB0byBhIGZvcm0gZmllbGQgd2l0aG91dCBhbiAnICsgJ2BvbkNoYW5nZWAgaGFuZGxlci4gVGhpcyB3aWxsIHJlbmRlciBhIHJlYWQtb25seSBmaWVsZC4gSWYgJyArICd0aGUgZmllbGQgc2hvdWxkIGJlIG11dGFibGUgdXNlIGBkZWZhdWx0Q2hlY2tlZGAuIE90aGVyd2lzZSwgJyArICdzZXQgZWl0aGVyIGBvbkNoYW5nZWAgb3IgYHJlYWRPbmx5YC4nKTtcbiAgfSxcbiAgb25DaGFuZ2U6IFJlYWN0UHJvcFR5cGVzLmZ1bmNcbn07XG5cbnZhciBsb2dnZWRUeXBlRmFpbHVyZXMgPSB7fTtcbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFByb3ZpZGUgYSBsaW5rZWQgYHZhbHVlYCBhdHRyaWJ1dGUgZm9yIGNvbnRyb2xsZWQgZm9ybXMuIFlvdSBzaG91bGQgbm90IHVzZVxuICogdGhpcyBvdXRzaWRlIG9mIHRoZSBSZWFjdERPTSBjb250cm9sbGVkIGZvcm0gY29tcG9uZW50cy5cbiAqL1xudmFyIExpbmtlZFZhbHVlVXRpbHMgPSB7XG4gIGNoZWNrUHJvcFR5cGVzOiBmdW5jdGlvbiAodGFnTmFtZSwgcHJvcHMsIG93bmVyKSB7XG4gICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcFR5cGVzKSB7XG4gICAgICBpZiAocHJvcFR5cGVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICB2YXIgZXJyb3IgPSBwcm9wVHlwZXNbcHJvcE5hbWVdKHByb3BzLCBwcm9wTmFtZSwgdGFnTmFtZSwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wLCBudWxsLCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICEoZXJyb3IubWVzc2FnZSBpbiBsb2dnZWRUeXBlRmFpbHVyZXMpKSB7XG4gICAgICAgIC8vIE9ubHkgbW9uaXRvciB0aGlzIGZhaWx1cmUgb25jZSBiZWNhdXNlIHRoZXJlIHRlbmRzIHRvIGJlIGEgbG90IG9mIHRoZVxuICAgICAgICAvLyBzYW1lIGVycm9yLlxuICAgICAgICBsb2dnZWRUeXBlRmFpbHVyZXNbZXJyb3IubWVzc2FnZV0gPSB0cnVlO1xuXG4gICAgICAgIHZhciBhZGRlbmR1bSA9IGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcik7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIGZvcm0gcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcbiAgICogQHJldHVybiB7Kn0gY3VycmVudCB2YWx1ZSBvZiB0aGUgaW5wdXQgZWl0aGVyIGZyb20gdmFsdWUgcHJvcCBvciBsaW5rLlxuICAgKi9cbiAgZ2V0VmFsdWU6IGZ1bmN0aW9uIChpbnB1dFByb3BzKSB7XG4gICAgaWYgKGlucHV0UHJvcHMudmFsdWVMaW5rKSB7XG4gICAgICBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMudmFsdWVMaW5rLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGlucHV0UHJvcHMgUHJvcHMgZm9yIGZvcm0gY29tcG9uZW50XG4gICAqIEByZXR1cm4geyp9IGN1cnJlbnQgY2hlY2tlZCBzdGF0dXMgb2YgdGhlIGlucHV0IGVpdGhlciBmcm9tIGNoZWNrZWQgcHJvcFxuICAgKiAgICAgICAgICAgICBvciBsaW5rLlxuICAgKi9cbiAgZ2V0Q2hlY2tlZDogZnVuY3Rpb24gKGlucHV0UHJvcHMpIHtcbiAgICBpZiAoaW5wdXRQcm9wcy5jaGVja2VkTGluaykge1xuICAgICAgX2Fzc2VydENoZWNrZWRMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZExpbmsudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dFByb3BzLmNoZWNrZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dFByb3BzIFByb3BzIGZvciBmb3JtIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudCBjaGFuZ2UgZXZlbnQgdG8gaGFuZGxlXG4gICAqL1xuICBleGVjdXRlT25DaGFuZ2U6IGZ1bmN0aW9uIChpbnB1dFByb3BzLCBldmVudCkge1xuICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuICAgICAgX2Fzc2VydFZhbHVlTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLnZhbHVlTGluay5yZXF1ZXN0Q2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChpbnB1dFByb3BzLmNoZWNrZWRMaW5rKSB7XG4gICAgICBfYXNzZXJ0Q2hlY2tlZExpbmsoaW5wdXRQcm9wcyk7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy5jaGVja2VkTGluay5yZXF1ZXN0Q2hhbmdlKGV2ZW50LnRhcmdldC5jaGVja2VkKTtcbiAgICB9IGVsc2UgaWYgKGlucHV0UHJvcHMub25DaGFuZ2UpIHtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLm9uQ2hhbmdlLmNhbGwodW5kZWZpbmVkLCBldmVudCk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IExpbmtlZFZhbHVlVXRpbHM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIE9iamVjdC5hc3NpZ25cbiAqL1xuXG4vLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LmFzc2lnblxuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZXMpIHtcbiAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiB0YXJnZXQgY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcbiAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuICBmb3IgKHZhciBuZXh0SW5kZXggPSAxOyBuZXh0SW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBuZXh0SW5kZXgrKykge1xuICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW25leHRJbmRleF07XG4gICAgaWYgKG5leHRTb3VyY2UgPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGZyb20gPSBPYmplY3QobmV4dFNvdXJjZSk7XG5cbiAgICAvLyBXZSBkb24ndCBjdXJyZW50bHkgc3VwcG9ydCBhY2Nlc3NvcnMgbm9yIHByb3hpZXMuIFRoZXJlZm9yZSB0aGlzXG4gICAgLy8gY29weSBjYW5ub3QgdGhyb3cuIElmIHdlIGV2ZXIgc3VwcG9ydGVkIHRoaXMgdGhlbiB3ZSBtdXN0IGhhbmRsZVxuICAgIC8vIGV4Y2VwdGlvbnMgYW5kIHNpZGUtZWZmZWN0cy4gV2UgZG9uJ3Qgc3VwcG9ydCBzeW1ib2xzIHNvIHRoZXkgd29uJ3RcbiAgICAvLyBiZSB0cmFuc2ZlcnJlZC5cblxuICAgIGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG4gICAgICAgIHRvW2tleV0gPSBmcm9tW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc2lnbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUG9vbGVkQ2xhc3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBTdGF0aWMgcG9vbGVycy4gU2V2ZXJhbCBjdXN0b20gdmVyc2lvbnMgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZlxuICogYXJndW1lbnRzLiBBIGNvbXBsZXRlbHkgZ2VuZXJpYyBwb29sZXIgaXMgZWFzeSB0byBpbXBsZW1lbnQsIGJ1dCB3b3VsZFxuICogcmVxdWlyZSBhY2Nlc3NpbmcgdGhlIGBhcmd1bWVudHNgIG9iamVjdC4gSW4gZWFjaCBvZiB0aGVzZSwgYHRoaXNgIHJlZmVycyB0b1xuICogdGhlIENsYXNzIGl0c2VsZiwgbm90IGFuIGluc3RhbmNlLiBJZiBhbnkgb3RoZXJzIGFyZSBuZWVkZWQsIHNpbXBseSBhZGQgdGhlbVxuICogaGVyZSwgb3IgaW4gdGhlaXIgb3duIGZpbGVzLlxuICovXG52YXIgb25lQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoY29weUZpZWxkc0Zyb20pIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcbiAgfVxufTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMikge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMik7XG4gIH1cbn07XG5cbnZhciB0aHJlZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMyk7XG4gIH1cbn07XG5cbnZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMywgYTQpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcbiAgfVxufTtcblxudmFyIGZpdmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQsIGE1KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCwgYTUpO1xuICB9XG59O1xuXG52YXIgc3RhbmRhcmRSZWxlYXNlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICAhKGluc3RhbmNlIGluc3RhbmNlb2YgS2xhc3MpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyeWluZyB0byByZWxlYXNlIGFuIGluc3RhbmNlIGludG8gYSBwb29sIG9mIGEgZGlmZmVyZW50IHR5cGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpbnN0YW5jZS5kZXN0cnVjdG9yKCk7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoIDwgS2xhc3MucG9vbFNpemUpIHtcbiAgICBLbGFzcy5pbnN0YW5jZVBvb2wucHVzaChpbnN0YW5jZSk7XG4gIH1cbn07XG5cbnZhciBERUZBVUxUX1BPT0xfU0laRSA9IDEwO1xudmFyIERFRkFVTFRfUE9PTEVSID0gb25lQXJndW1lbnRQb29sZXI7XG5cbi8qKlxuICogQXVnbWVudHMgYENvcHlDb25zdHJ1Y3RvcmAgdG8gYmUgYSBwb29sYWJsZSBjbGFzcywgYXVnbWVudGluZyBvbmx5IHRoZSBjbGFzc1xuICogaXRzZWxmIChzdGF0aWNhbGx5KSBub3QgYWRkaW5nIGFueSBwcm90b3R5cGljYWwgZmllbGRzLiBBbnkgQ29weUNvbnN0cnVjdG9yXG4gKiB5b3UgZ2l2ZSB0aGlzIG1heSBoYXZlIGEgYHBvb2xTaXplYCBwcm9wZXJ0eSwgYW5kIHdpbGwgbG9vayBmb3IgYVxuICogcHJvdG90eXBpY2FsIGBkZXN0cnVjdG9yYCBvbiBpbnN0YW5jZXMgKG9wdGlvbmFsKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBDb3B5Q29uc3RydWN0b3IgQ29uc3RydWN0b3IgdGhhdCBjYW4gYmUgdXNlZCB0byByZXNldC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBvb2xlciBDdXN0b21pemFibGUgcG9vbGVyLlxuICovXG52YXIgYWRkUG9vbGluZ1RvID0gZnVuY3Rpb24gKENvcHlDb25zdHJ1Y3RvciwgcG9vbGVyKSB7XG4gIHZhciBOZXdLbGFzcyA9IENvcHlDb25zdHJ1Y3RvcjtcbiAgTmV3S2xhc3MuaW5zdGFuY2VQb29sID0gW107XG4gIE5ld0tsYXNzLmdldFBvb2xlZCA9IHBvb2xlciB8fCBERUZBVUxUX1BPT0xFUjtcbiAgaWYgKCFOZXdLbGFzcy5wb29sU2l6ZSkge1xuICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG4gIH1cbiAgTmV3S2xhc3MucmVsZWFzZSA9IHN0YW5kYXJkUmVsZWFzZXI7XG4gIHJldHVybiBOZXdLbGFzcztcbn07XG5cbnZhciBQb29sZWRDbGFzcyA9IHtcbiAgYWRkUG9vbGluZ1RvOiBhZGRQb29saW5nVG8sXG4gIG9uZUFyZ3VtZW50UG9vbGVyOiBvbmVBcmd1bWVudFBvb2xlcixcbiAgdHdvQXJndW1lbnRQb29sZXI6IHR3b0FyZ3VtZW50UG9vbGVyLFxuICB0aHJlZUFyZ3VtZW50UG9vbGVyOiB0aHJlZUFyZ3VtZW50UG9vbGVyLFxuICBmb3VyQXJndW1lbnRQb29sZXI6IGZvdXJBcmd1bWVudFBvb2xlcixcbiAgZml2ZUFyZ3VtZW50UG9vbGVyOiBmaXZlQXJndW1lbnRQb29sZXJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUG9vbGVkQ2xhc3M7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET00gPSByZXF1aXJlKCcuL1JlYWN0RE9NJyk7XG52YXIgUmVhY3RET01TZXJ2ZXIgPSByZXF1aXJlKCcuL1JlYWN0RE9NU2VydmVyJyk7XG52YXIgUmVhY3RJc29tb3JwaGljID0gcmVxdWlyZSgnLi9SZWFjdElzb21vcnBoaWMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGRlcHJlY2F0ZWQgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZWQnKTtcblxuLy8gYHZlcnNpb25gIHdpbGwgYmUgYWRkZWQgaGVyZSBieSBSZWFjdElzb21vcnBoaWMuXG52YXIgUmVhY3QgPSB7fTtcblxuYXNzaWduKFJlYWN0LCBSZWFjdElzb21vcnBoaWMpO1xuXG5hc3NpZ24oUmVhY3QsIHtcbiAgLy8gUmVhY3RET01cbiAgZmluZERPTU5vZGU6IGRlcHJlY2F0ZWQoJ2ZpbmRET01Ob2RlJywgJ1JlYWN0RE9NJywgJ3JlYWN0LWRvbScsIFJlYWN0RE9NLCBSZWFjdERPTS5maW5kRE9NTm9kZSksXG4gIHJlbmRlcjogZGVwcmVjYXRlZCgncmVuZGVyJywgJ1JlYWN0RE9NJywgJ3JlYWN0LWRvbScsIFJlYWN0RE9NLCBSZWFjdERPTS5yZW5kZXIpLFxuICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiBkZXByZWNhdGVkKCd1bm1vdW50Q29tcG9uZW50QXROb2RlJywgJ1JlYWN0RE9NJywgJ3JlYWN0LWRvbScsIFJlYWN0RE9NLCBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKSxcblxuICAvLyBSZWFjdERPTVNlcnZlclxuICByZW5kZXJUb1N0cmluZzogZGVwcmVjYXRlZCgncmVuZGVyVG9TdHJpbmcnLCAnUmVhY3RET01TZXJ2ZXInLCAncmVhY3QtZG9tL3NlcnZlcicsIFJlYWN0RE9NU2VydmVyLCBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZyksXG4gIHJlbmRlclRvU3RhdGljTWFya3VwOiBkZXByZWNhdGVkKCdyZW5kZXJUb1N0YXRpY01hcmt1cCcsICdSZWFjdERPTVNlcnZlcicsICdyZWFjdC1kb20vc2VydmVyJywgUmVhY3RET01TZXJ2ZXIsIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKVxufSk7XG5cblJlYWN0Ll9fU0VDUkVUX0RPTV9ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID0gUmVhY3RET007XG5SZWFjdC5fX1NFQ1JFVF9ET01fU0VSVkVSX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQgPSBSZWFjdERPTVNlcnZlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG5cbnZhciBmaW5kRE9NTm9kZSA9IHJlcXVpcmUoJy4vZmluZERPTU5vZGUnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgZGlkV2FybktleSA9ICdfZ2V0RE9NTm9kZURpZFdhcm4nO1xuXG52YXIgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4gPSB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBET00gbm9kZSByZW5kZXJlZCBieSB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHJldHVybiB7RE9NRWxlbWVudH0gVGhlIHJvb3Qgbm9kZSBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICogQGZpbmFsXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldERPTU5vZGU6IGZ1bmN0aW9uICgpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0aGlzLmNvbnN0cnVjdG9yW2RpZFdhcm5LZXldLCAnJXMuZ2V0RE9NTm9kZSguLi4pIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJyArICdSZWFjdERPTS5maW5kRE9NTm9kZShpbnN0YW5jZSkgaW5zdGVhZC4nLCBSZWFjdEluc3RhbmNlTWFwLmdldCh0aGlzKS5nZXROYW1lKCkgfHwgdGhpcy50YWdOYW1lIHx8ICdVbmtub3duJykgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5jb25zdHJ1Y3RvcltkaWRXYXJuS2V5XSA9IHRydWU7XG4gICAgcmV0dXJuIGZpbmRET01Ob2RlKHRoaXMpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG52YXIgRXZlbnRQbHVnaW5SZWdpc3RyeSA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5SZWdpc3RyeScpO1xudmFyIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW4gPSByZXF1aXJlKCcuL1JlYWN0RXZlbnRFbWl0dGVyTWl4aW4nKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFZpZXdwb3J0TWV0cmljcyA9IHJlcXVpcmUoJy4vVmlld3BvcnRNZXRyaWNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpc0V2ZW50U3VwcG9ydGVkID0gcmVxdWlyZSgnLi9pc0V2ZW50U3VwcG9ydGVkJyk7XG5cbi8qKlxuICogU3VtbWFyeSBvZiBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBldmVudCBoYW5kbGluZzpcbiAqXG4gKiAgLSBUb3AtbGV2ZWwgZGVsZWdhdGlvbiBpcyB1c2VkIHRvIHRyYXAgbW9zdCBuYXRpdmUgYnJvd3NlciBldmVudHMuIFRoaXNcbiAqICAgIG1heSBvbmx5IG9jY3VyIGluIHRoZSBtYWluIHRocmVhZCBhbmQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mXG4gKiAgICBSZWFjdEV2ZW50TGlzdGVuZXIsIHdoaWNoIGlzIGluamVjdGVkIGFuZCBjYW4gdGhlcmVmb3JlIHN1cHBvcnQgcGx1Z2dhYmxlXG4gKiAgICBldmVudCBzb3VyY2VzLiBUaGlzIGlzIHRoZSBvbmx5IHdvcmsgdGhhdCBvY2N1cnMgaW4gdGhlIG1haW4gdGhyZWFkLlxuICpcbiAqICAtIFdlIG5vcm1hbGl6ZSBhbmQgZGUtZHVwbGljYXRlIGV2ZW50cyB0byBhY2NvdW50IGZvciBicm93c2VyIHF1aXJrcy4gVGhpc1xuICogICAgbWF5IGJlIGRvbmUgaW4gdGhlIHdvcmtlciB0aHJlYWQuXG4gKlxuICogIC0gRm9yd2FyZCB0aGVzZSBuYXRpdmUgZXZlbnRzICh3aXRoIHRoZSBhc3NvY2lhdGVkIHRvcC1sZXZlbCB0eXBlIHVzZWQgdG9cbiAqICAgIHRyYXAgaXQpIHRvIGBFdmVudFBsdWdpbkh1YmAsIHdoaWNoIGluIHR1cm4gd2lsbCBhc2sgcGx1Z2lucyBpZiB0aGV5IHdhbnRcbiAqICAgIHRvIGV4dHJhY3QgYW55IHN5bnRoZXRpYyBldmVudHMuXG4gKlxuICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgd2lsbCB0aGVuIHByb2Nlc3MgZWFjaCBldmVudCBieSBhbm5vdGF0aW5nIHRoZW0gd2l0aFxuICogICAgXCJkaXNwYXRjaGVzXCIsIGEgc2VxdWVuY2Ugb2YgbGlzdGVuZXJzIGFuZCBJRHMgdGhhdCBjYXJlIGFib3V0IHRoYXQgZXZlbnQuXG4gKlxuICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgdGhlbiBkaXNwYXRjaGVzIHRoZSBldmVudHMuXG4gKlxuICogT3ZlcnZpZXcgb2YgUmVhY3QgYW5kIHRoZSBldmVudCBzeXN0ZW06XG4gKlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogfCAgICBET00gICAgIHwgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogICAgICAgfCAgICAgICAgICAgLlxuICogICAgICAgdiAgICAgICAgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogfCBSZWFjdEV2ZW50IHwgICAgLlxuICogfCAgTGlzdGVuZXIgIHwgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLiAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0rXG4gKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgKy0tLS0tLS0tK3xTaW1wbGVFdmVudHxcbiAqICAgICAgIHwgICAgICAgICAgIC4gICAgICAgICAgICAgICB8ICAgICAgICAgfFBsdWdpbiAgICAgfFxuICogKy0tLS0tfC0tLS0tLSsgICAgLiAgICAgICAgICAgICAgIHYgICAgICAgICArLS0tLS0tLS0tLS0rXG4gKiB8ICAgICB8ICAgICAgfCAgICAuICAgICstLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0rXG4gKiB8ICAgICArLS0tLS0tLS0tLS0uLS0tPnxFdmVudFBsdWdpbkh1YnwgICAgICAgICAgICAgICAgICAgIHwgICAgRXZlbnQgICB8XG4gKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgUHJvcGFnYXRvcnN8XG4gKiB8IFJlYWN0RXZlbnQgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgIHxUYXBFdmVudCAgIHwgIHwtLS0tLS0tLS0tLS18XG4gKiB8ICBFbWl0dGVyICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHw8LS0tK3xQbHVnaW4gICAgIHwgIHxvdGhlciBwbHVnaW58XG4gKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgIHV0aWxpdGllcyB8XG4gKiB8ICAgICArLS0tLS0tLS0tLS0uLS0tPnwgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0rXG4gKiB8ICAgICB8ICAgICAgfCAgICAuICAgICstLS0tLS0tLS0tLS0tLStcbiAqICstLS0tLXwtLS0tLS0rICAgIC4gICAgICAgICAgICAgICAgXiAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogICAgICAgfCAgICAgICAgICAgLiAgICAgICAgICAgICAgICB8ICAgICAgICB8RW50ZXIvTGVhdmV8XG4gKiAgICAgICArICAgICAgICAgICAuICAgICAgICAgICAgICAgICstLS0tLS0tK3xQbHVnaW4gICAgIHxcbiAqICstLS0tLS0tLS0tLS0tKyAgIC4gICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogfCBhcHBsaWNhdGlvbiB8ICAgLlxuICogfC0tLS0tLS0tLS0tLS18ICAgLlxuICogfCAgICAgICAgICAgICB8ICAgLlxuICogfCAgICAgICAgICAgICB8ICAgLlxuICogKy0tLS0tLS0tLS0tLS0rICAgLlxuICogICAgICAgICAgICAgICAgICAgLlxuICogICAgUmVhY3QgQ29yZSAgICAgLiAgR2VuZXJhbCBQdXJwb3NlIEV2ZW50IFBsdWdpbiBTeXN0ZW1cbiAqL1xuXG52YXIgYWxyZWFkeUxpc3RlbmluZ1RvID0ge307XG52YXIgaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUgPSBmYWxzZTtcbnZhciByZWFjdFRvcExpc3RlbmVyc0NvdW50ZXIgPSAwO1xuXG4vLyBGb3IgZXZlbnRzIGxpa2UgJ3N1Ym1pdCcgd2hpY2ggZG9uJ3QgY29uc2lzdGVudGx5IGJ1YmJsZSAod2hpY2ggd2UgdHJhcCBhdCBhXG4vLyBsb3dlciBub2RlIHRoYW4gYGRvY3VtZW50YCksIGJpbmRpbmcgYXQgYGRvY3VtZW50YCB3b3VsZCBjYXVzZSBkdXBsaWNhdGVcbi8vIGV2ZW50cyBzbyB3ZSBkb24ndCBpbmNsdWRlIHRoZW0gaGVyZVxudmFyIHRvcEV2ZW50TWFwcGluZyA9IHtcbiAgdG9wQWJvcnQ6ICdhYm9ydCcsXG4gIHRvcEJsdXI6ICdibHVyJyxcbiAgdG9wQ2FuUGxheTogJ2NhbnBsYXknLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogJ2NhbnBsYXl0aHJvdWdoJyxcbiAgdG9wQ2hhbmdlOiAnY2hhbmdlJyxcbiAgdG9wQ2xpY2s6ICdjbGljaycsXG4gIHRvcENvbXBvc2l0aW9uRW5kOiAnY29tcG9zaXRpb25lbmQnLFxuICB0b3BDb21wb3NpdGlvblN0YXJ0OiAnY29tcG9zaXRpb25zdGFydCcsXG4gIHRvcENvbXBvc2l0aW9uVXBkYXRlOiAnY29tcG9zaXRpb251cGRhdGUnLFxuICB0b3BDb250ZXh0TWVudTogJ2NvbnRleHRtZW51JyxcbiAgdG9wQ29weTogJ2NvcHknLFxuICB0b3BDdXQ6ICdjdXQnLFxuICB0b3BEb3VibGVDbGljazogJ2RibGNsaWNrJyxcbiAgdG9wRHJhZzogJ2RyYWcnLFxuICB0b3BEcmFnRW5kOiAnZHJhZ2VuZCcsXG4gIHRvcERyYWdFbnRlcjogJ2RyYWdlbnRlcicsXG4gIHRvcERyYWdFeGl0OiAnZHJhZ2V4aXQnLFxuICB0b3BEcmFnTGVhdmU6ICdkcmFnbGVhdmUnLFxuICB0b3BEcmFnT3ZlcjogJ2RyYWdvdmVyJyxcbiAgdG9wRHJhZ1N0YXJ0OiAnZHJhZ3N0YXJ0JyxcbiAgdG9wRHJvcDogJ2Ryb3AnLFxuICB0b3BEdXJhdGlvbkNoYW5nZTogJ2R1cmF0aW9uY2hhbmdlJyxcbiAgdG9wRW1wdGllZDogJ2VtcHRpZWQnLFxuICB0b3BFbmNyeXB0ZWQ6ICdlbmNyeXB0ZWQnLFxuICB0b3BFbmRlZDogJ2VuZGVkJyxcbiAgdG9wRXJyb3I6ICdlcnJvcicsXG4gIHRvcEZvY3VzOiAnZm9jdXMnLFxuICB0b3BJbnB1dDogJ2lucHV0JyxcbiAgdG9wS2V5RG93bjogJ2tleWRvd24nLFxuICB0b3BLZXlQcmVzczogJ2tleXByZXNzJyxcbiAgdG9wS2V5VXA6ICdrZXl1cCcsXG4gIHRvcExvYWRlZERhdGE6ICdsb2FkZWRkYXRhJyxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6ICdsb2FkZWRtZXRhZGF0YScsXG4gIHRvcExvYWRTdGFydDogJ2xvYWRzdGFydCcsXG4gIHRvcE1vdXNlRG93bjogJ21vdXNlZG93bicsXG4gIHRvcE1vdXNlTW92ZTogJ21vdXNlbW92ZScsXG4gIHRvcE1vdXNlT3V0OiAnbW91c2VvdXQnLFxuICB0b3BNb3VzZU92ZXI6ICdtb3VzZW92ZXInLFxuICB0b3BNb3VzZVVwOiAnbW91c2V1cCcsXG4gIHRvcFBhc3RlOiAncGFzdGUnLFxuICB0b3BQYXVzZTogJ3BhdXNlJyxcbiAgdG9wUGxheTogJ3BsYXknLFxuICB0b3BQbGF5aW5nOiAncGxheWluZycsXG4gIHRvcFByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICB0b3BSYXRlQ2hhbmdlOiAncmF0ZWNoYW5nZScsXG4gIHRvcFNjcm9sbDogJ3Njcm9sbCcsXG4gIHRvcFNlZWtlZDogJ3NlZWtlZCcsXG4gIHRvcFNlZWtpbmc6ICdzZWVraW5nJyxcbiAgdG9wU2VsZWN0aW9uQ2hhbmdlOiAnc2VsZWN0aW9uY2hhbmdlJyxcbiAgdG9wU3RhbGxlZDogJ3N0YWxsZWQnLFxuICB0b3BTdXNwZW5kOiAnc3VzcGVuZCcsXG4gIHRvcFRleHRJbnB1dDogJ3RleHRJbnB1dCcsXG4gIHRvcFRpbWVVcGRhdGU6ICd0aW1ldXBkYXRlJyxcbiAgdG9wVG91Y2hDYW5jZWw6ICd0b3VjaGNhbmNlbCcsXG4gIHRvcFRvdWNoRW5kOiAndG91Y2hlbmQnLFxuICB0b3BUb3VjaE1vdmU6ICd0b3VjaG1vdmUnLFxuICB0b3BUb3VjaFN0YXJ0OiAndG91Y2hzdGFydCcsXG4gIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG4gIHRvcFdhaXRpbmc6ICd3YWl0aW5nJyxcbiAgdG9wV2hlZWw6ICd3aGVlbCdcbn07XG5cbi8qKlxuICogVG8gZW5zdXJlIG5vIGNvbmZsaWN0cyB3aXRoIG90aGVyIHBvdGVudGlhbCBSZWFjdCBpbnN0YW5jZXMgb24gdGhlIHBhZ2VcbiAqL1xudmFyIHRvcExpc3RlbmVyc0lES2V5ID0gJ19yZWFjdExpc3RlbmVyc0lEJyArIFN0cmluZyhNYXRoLnJhbmRvbSgpKS5zbGljZSgyKTtcblxuZnVuY3Rpb24gZ2V0TGlzdGVuaW5nRm9yRG9jdW1lbnQobW91bnRBdCkge1xuICAvLyBJbiBJRTgsIGBtb3VudEF0YCBpcyBhIGhvc3Qgb2JqZWN0IGFuZCBkb2Vzbid0IGhhdmUgYGhhc093blByb3BlcnR5YFxuICAvLyBkaXJlY3RseS5cbiAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW91bnRBdCwgdG9wTGlzdGVuZXJzSURLZXkpKSB7XG4gICAgbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV0gPSByZWFjdFRvcExpc3RlbmVyc0NvdW50ZXIrKztcbiAgICBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dID0ge307XG4gIH1cbiAgcmV0dXJuIGFscmVhZHlMaXN0ZW5pbmdUb1ttb3VudEF0W3RvcExpc3RlbmVyc0lES2V5XV07XG59XG5cbi8qKlxuICogYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgaXMgdXNlZCB0byBhdHRhY2ggdG9wLWxldmVsIGV2ZW50IGxpc3RlbmVycy4gRm9yXG4gKiBleGFtcGxlOlxuICpcbiAqICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnB1dExpc3RlbmVyKCdteUlEJywgJ29uQ2xpY2snLCBteUZ1bmN0aW9uKTtcbiAqXG4gKiBUaGlzIHdvdWxkIGFsbG9jYXRlIGEgXCJyZWdpc3RyYXRpb25cIiBvZiBgKCdvbkNsaWNrJywgbXlGdW5jdGlvbilgIG9uICdteUlEJy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IGFzc2lnbih7fSwgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiwge1xuXG4gIC8qKlxuICAgKiBJbmplY3RhYmxlIGV2ZW50IGJhY2tlbmRcbiAgICovXG4gIFJlYWN0RXZlbnRMaXN0ZW5lcjogbnVsbCxcblxuICBpbmplY3Rpb246IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gUmVhY3RFdmVudExpc3RlbmVyXG4gICAgICovXG4gICAgaW5qZWN0UmVhY3RFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoUmVhY3RFdmVudExpc3RlbmVyKSB7XG4gICAgICBSZWFjdEV2ZW50TGlzdGVuZXIuc2V0SGFuZGxlVG9wTGV2ZWwoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmhhbmRsZVRvcExldmVsKTtcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIgPSBSZWFjdEV2ZW50TGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgb3Igbm90IGFueSBjcmVhdGVkIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIFRydWUgaWYgY2FsbGJhY2tzIHNob3VsZCBiZSBlbmFibGVkLlxuICAgKi9cbiAgc2V0RW5hYmxlZDogZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICBpZiAoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lcikge1xuICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5zZXRFbmFibGVkKGVuYWJsZWQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBjYWxsYmFja3MgYXJlIGVuYWJsZWQuXG4gICAqL1xuICBpc0VuYWJsZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gISEoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lciAmJiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLmlzRW5hYmxlZCgpKTtcbiAgfSxcblxuICAvKipcbiAgICogV2UgbGlzdGVuIGZvciBidWJibGVkIHRvdWNoIGV2ZW50cyBvbiB0aGUgZG9jdW1lbnQgb2JqZWN0LlxuICAgKlxuICAgKiBGaXJlZm94IHY4LjAxIChhbmQgcG9zc2libHkgb3RoZXJzKSBleGhpYml0ZWQgc3RyYW5nZSBiZWhhdmlvciB3aGVuXG4gICAqIG1vdW50aW5nIGBvbm1vdXNlbW92ZWAgZXZlbnRzIGF0IHNvbWUgbm9kZSB0aGF0IHdhcyBub3QgdGhlIGRvY3VtZW50XG4gICAqIGVsZW1lbnQuIFRoZSBzeW1wdG9tcyB3ZXJlIHRoYXQgaWYgeW91ciBtb3VzZSBpcyBub3QgbW92aW5nIG92ZXIgc29tZXRoaW5nXG4gICAqIGNvbnRhaW5lZCB3aXRoaW4gdGhhdCBtb3VudCBwb2ludCAoZm9yIGV4YW1wbGUgb24gdGhlIGJhY2tncm91bmQpIHRoZVxuICAgKiB0b3AtbGV2ZWwgbGlzdGVuZXJzIGZvciBgb25tb3VzZW1vdmVgIHdvbid0IGJlIGNhbGxlZC4gSG93ZXZlciwgaWYgeW91XG4gICAqIHJlZ2lzdGVyIHRoZSBgbW91c2Vtb3ZlYCBvbiB0aGUgZG9jdW1lbnQgb2JqZWN0LCB0aGVuIGl0IHdpbGwgb2YgY291cnNlXG4gICAqIGNhdGNoIGFsbCBgbW91c2Vtb3ZlYHMuIFRoaXMgYWxvbmcgd2l0aCBpT1MgcXVpcmtzLCBqdXN0aWZpZXMgcmVzdHJpY3RpbmdcbiAgICogdG9wLWxldmVsIGxpc3RlbmVycyB0byB0aGUgZG9jdW1lbnQgb2JqZWN0IG9ubHksIGF0IGxlYXN0IGZvciB0aGVzZVxuICAgKiBtb3ZlbWVudCB0eXBlcyBvZiBldmVudHMgYW5kIHBvc3NpYmx5IGFsbCBldmVudHMuXG4gICAqXG4gICAqIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMTAvMDkvY2xpY2tfZXZlbnRfZGVsLmh0bWxcbiAgICpcbiAgICogQWxzbywgYGtleXVwYC9ga2V5cHJlc3NgL2BrZXlkb3duYCBkbyBub3QgYnViYmxlIHRvIHRoZSB3aW5kb3cgb24gSUUsIGJ1dFxuICAgKiB0aGV5IGJ1YmJsZSB0byBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGVudERvY3VtZW50SGFuZGxlIERvY3VtZW50IHdoaWNoIG93bnMgdGhlIGNvbnRhaW5lclxuICAgKi9cbiAgbGlzdGVuVG86IGZ1bmN0aW9uIChyZWdpc3RyYXRpb25OYW1lLCBjb250ZW50RG9jdW1lbnRIYW5kbGUpIHtcbiAgICB2YXIgbW91bnRBdCA9IGNvbnRlbnREb2N1bWVudEhhbmRsZTtcbiAgICB2YXIgaXNMaXN0ZW5pbmcgPSBnZXRMaXN0ZW5pbmdGb3JEb2N1bWVudChtb3VudEF0KTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuXG4gICAgdmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY2llc1tpXTtcbiAgICAgIGlmICghKGlzTGlzdGVuaW5nLmhhc093blByb3BlcnR5KGRlcGVuZGVuY3kpICYmIGlzTGlzdGVuaW5nW2RlcGVuZGVuY3ldKSkge1xuICAgICAgICBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BXaGVlbCkge1xuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCd3aGVlbCcpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ3doZWVsJywgbW91bnRBdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdtb3VzZXdoZWVsJykpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnbW91c2V3aGVlbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGaXJlZm94IG5lZWRzIHRvIGNhcHR1cmUgYSBkaWZmZXJlbnQgbW91c2Ugc2Nyb2xsIGV2ZW50LlxuICAgICAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2RvbS9ldmVudHMvdGVzdHMvc2Nyb2xsLmh0bWxcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnRE9NTW91c2VTY3JvbGwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwpIHtcblxuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdzY3JvbGwnLCB0cnVlKSkge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFNjcm9sbCwgJ3Njcm9sbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwsICdzY3JvbGwnLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLldJTkRPV19IQU5ETEUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkZXBlbmRlbmN5ID09PSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzIHx8IGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuXG4gICAgICAgICAgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcENhcHR1cmVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgJ2ZvY3VzJywgbW91bnRBdCk7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wQmx1ciwgJ2JsdXInLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzaW4nKSkge1xuICAgICAgICAgICAgLy8gSUUgaGFzIGBmb2N1c2luYCBhbmQgYGZvY3Vzb3V0YCBldmVudHMgd2hpY2ggYnViYmxlLlxuICAgICAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2Jsb2cvYXJjaGl2ZXMvMjAwOC8wNC9kZWxlZ2F0aW5nX3RoZS5odG1sXG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgJ2ZvY3VzaW4nLCBtb3VudEF0KTtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEJsdXIsICdmb2N1c291dCcsIG1vdW50QXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBibHVyIGFuZCBmb2N1cyBldmVudCBsaXN0ZW5lcnMgYXJlIG9ubHkgYXR0YWNoZWQgb25jZVxuICAgICAgICAgIGlzTGlzdGVuaW5nW3RvcExldmVsVHlwZXMudG9wQmx1cl0gPSB0cnVlO1xuICAgICAgICAgIGlzTGlzdGVuaW5nW3RvcExldmVsVHlwZXMudG9wRm9jdXNdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0b3BFdmVudE1hcHBpbmcuaGFzT3duUHJvcGVydHkoZGVwZW5kZW5jeSkpIHtcbiAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQoZGVwZW5kZW5jeSwgdG9wRXZlbnRNYXBwaW5nW2RlcGVuZGVuY3ldLCBtb3VudEF0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzTGlzdGVuaW5nW2RlcGVuZGVuY3ldID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdHJhcEJ1YmJsZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICByZXR1cm4gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpO1xuICB9LFxuXG4gIHRyYXBDYXB0dXJlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuICAgIHJldHVybiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMaXN0ZW5zIHRvIHdpbmRvdyBzY3JvbGwgYW5kIHJlc2l6ZSBldmVudHMuIFdlIGNhY2hlIHNjcm9sbCB2YWx1ZXMgc28gdGhhdFxuICAgKiBhcHBsaWNhdGlvbiBjb2RlIGNhbiBhY2Nlc3MgdGhlbSB3aXRob3V0IHRyaWdnZXJpbmcgcmVmbG93cy5cbiAgICpcbiAgICogTk9URTogU2Nyb2xsIGV2ZW50cyBkbyBub3QgYnViYmxlLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvZG9tL2V2ZW50cy9zY3JvbGwuaHRtbFxuICAgKi9cbiAgZW5zdXJlU2Nyb2xsVmFsdWVNb25pdG9yaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFpc01vbml0b3JpbmdTY3JvbGxWYWx1ZSkge1xuICAgICAgdmFyIHJlZnJlc2ggPSBWaWV3cG9ydE1ldHJpY3MucmVmcmVzaFNjcm9sbFZhbHVlcztcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIubW9uaXRvclNjcm9sbFZhbHVlKHJlZnJlc2gpO1xuICAgICAgaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IEV2ZW50UGx1Z2luSHViLmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncyxcblxuICByZWdpc3RyYXRpb25OYW1lTW9kdWxlczogRXZlbnRQbHVnaW5IdWIucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMsXG5cbiAgcHV0TGlzdGVuZXI6IEV2ZW50UGx1Z2luSHViLnB1dExpc3RlbmVyLFxuXG4gIGdldExpc3RlbmVyOiBFdmVudFBsdWdpbkh1Yi5nZXRMaXN0ZW5lcixcblxuICBkZWxldGVMaXN0ZW5lcjogRXZlbnRQbHVnaW5IdWIuZGVsZXRlTGlzdGVuZXIsXG5cbiAgZGVsZXRlQWxsTGlzdGVuZXJzOiBFdmVudFBsdWdpbkh1Yi5kZWxldGVBbGxMaXN0ZW5lcnNcblxufSk7XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIsICdSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInLCB7XG4gIHB1dExpc3RlbmVyOiAncHV0TGlzdGVuZXInLFxuICBkZWxldGVMaXN0ZW5lcjogJ2RlbGV0ZUxpc3RlbmVyJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkUmVjb25jaWxlclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xuXG52YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSByZXF1aXJlKCcuL3RyYXZlcnNlQWxsQ2hpbGRyZW4nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBpbnN0YW50aWF0ZUNoaWxkKGNoaWxkSW5zdGFuY2VzLCBjaGlsZCwgbmFtZSkge1xuICAvLyBXZSBmb3VuZCBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgdmFyIGtleVVuaXF1ZSA9IGNoaWxkSW5zdGFuY2VzW25hbWVdID09PSB1bmRlZmluZWQ7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoa2V5VW5pcXVlLCAnZmxhdHRlbkNoaWxkcmVuKC4uLik6IEVuY291bnRlcmVkIHR3byBjaGlsZHJlbiB3aXRoIHRoZSBzYW1lIGtleSwgJyArICdgJXNgLiBDaGlsZCBrZXlzIG11c3QgYmUgdW5pcXVlOyB3aGVuIHR3byBjaGlsZHJlbiBzaGFyZSBhIGtleSwgb25seSAnICsgJ3RoZSBmaXJzdCBjaGlsZCB3aWxsIGJlIHVzZWQuJywgbmFtZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGNoaWxkICE9IG51bGwgJiYga2V5VW5pcXVlKSB7XG4gICAgY2hpbGRJbnN0YW5jZXNbbmFtZV0gPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KGNoaWxkLCBudWxsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlYWN0Q2hpbGRSZWNvbmNpbGVyIHByb3ZpZGVzIGhlbHBlcnMgZm9yIGluaXRpYWxpemluZyBvciB1cGRhdGluZyBhIHNldCBvZlxuICogY2hpbGRyZW4uIEl0cyBvdXRwdXQgaXMgc3VpdGFibGUgZm9yIHBhc3NpbmcgaXQgb250byBSZWFjdE11bHRpQ2hpbGQgd2hpY2hcbiAqIGRvZXMgZGlmZmVkIHJlb3JkZXJpbmcgYW5kIGluc2VydGlvbi5cbiAqL1xudmFyIFJlYWN0Q2hpbGRSZWNvbmNpbGVyID0ge1xuICAvKipcbiAgICogR2VuZXJhdGVzIGEgXCJtb3VudCBpbWFnZVwiIGZvciBlYWNoIG9mIHRoZSBzdXBwbGllZCBjaGlsZHJlbi4gSW4gdGhlIGNhc2VcbiAgICogb2YgYFJlYWN0RE9NQ29tcG9uZW50YCwgYSBtb3VudCBpbWFnZSBpcyBhIHN0cmluZyBvZiBtYXJrdXAuXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmVzdGVkQ2hpbGROb2RlcyBOZXN0ZWQgY2hpbGQgbWFwcy5cbiAgICogQHJldHVybiB7P29iamVjdH0gQSBzZXQgb2YgY2hpbGQgaW5zdGFuY2VzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGluc3RhbnRpYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZE5vZGVzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChuZXN0ZWRDaGlsZE5vZGVzID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGRJbnN0YW5jZXMgPSB7fTtcbiAgICB0cmF2ZXJzZUFsbENoaWxkcmVuKG5lc3RlZENoaWxkTm9kZXMsIGluc3RhbnRpYXRlQ2hpbGQsIGNoaWxkSW5zdGFuY2VzKTtcbiAgICByZXR1cm4gY2hpbGRJbnN0YW5jZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHJlbmRlcmVkIGNoaWxkcmVuIGFuZCByZXR1cm5zIGEgbmV3IHNldCBvZiBjaGlsZHJlbi5cbiAgICpcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q2hpbGRyZW4gUHJldmlvdXNseSBpbml0aWFsaXplZCBzZXQgb2YgY2hpbGRyZW4uXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENoaWxkcmVuIEZsYXQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4gez9vYmplY3R9IEEgbmV3IHNldCBvZiBjaGlsZCBpbnN0YW5jZXMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAvLyBXZSBjdXJyZW50bHkgZG9uJ3QgaGF2ZSBhIHdheSB0byB0cmFjayBtb3ZlcyBoZXJlIGJ1dCBpZiB3ZSB1c2UgaXRlcmF0b3JzXG4gICAgLy8gaW5zdGVhZCBvZiBmb3IuLmluIHdlIGNhbiB6aXAgdGhlIGl0ZXJhdG9ycyBhbmQgY2hlY2sgaWYgYW4gaXRlbSBoYXNcbiAgICAvLyBtb3ZlZC5cbiAgICAvLyBUT0RPOiBJZiBub3RoaW5nIGhhcyBjaGFuZ2VkLCByZXR1cm4gdGhlIHByZXZDaGlsZHJlbiBvYmplY3Qgc28gdGhhdCB3ZVxuICAgIC8vIGNhbiBxdWlja2x5IGJhaWxvdXQgaWYgbm90aGluZyBoYXMgY2hhbmdlZC5cbiAgICBpZiAoIW5leHRDaGlsZHJlbiAmJiAhcHJldkNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIG5hbWU7XG4gICAgZm9yIChuYW1lIGluIG5leHRDaGlsZHJlbikge1xuICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgcHJldkNoaWxkID0gcHJldkNoaWxkcmVuICYmIHByZXZDaGlsZHJlbltuYW1lXTtcbiAgICAgIHZhciBwcmV2RWxlbWVudCA9IHByZXZDaGlsZCAmJiBwcmV2Q2hpbGQuX2N1cnJlbnRFbGVtZW50O1xuICAgICAgdmFyIG5leHRFbGVtZW50ID0gbmV4dENoaWxkcmVuW25hbWVdO1xuICAgICAgaWYgKHByZXZDaGlsZCAhPSBudWxsICYmIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCkpIHtcbiAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQocHJldkNoaWxkLCBuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICBuZXh0Q2hpbGRyZW5bbmFtZV0gPSBwcmV2Q2hpbGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJldkNoaWxkKSB7XG4gICAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNoaWxkLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgY2hpbGQgbXVzdCBiZSBpbnN0YW50aWF0ZWQgYmVmb3JlIGl0J3MgbW91bnRlZC5cbiAgICAgICAgdmFyIG5leHRDaGlsZEluc3RhbmNlID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0RWxlbWVudCwgbnVsbCk7XG4gICAgICAgIG5leHRDaGlsZHJlbltuYW1lXSA9IG5leHRDaGlsZEluc3RhbmNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBVbm1vdW50IGNoaWxkcmVuIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LlxuICAgIGZvciAobmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIShuZXh0Q2hpbGRyZW4gJiYgbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSkge1xuICAgICAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChwcmV2Q2hpbGRyZW5bbmFtZV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV4dENoaWxkcmVuO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVbm1vdW50cyBhbGwgcmVuZGVyZWQgY2hpbGRyZW4uIFRoaXMgc2hvdWxkIGJlIHVzZWQgdG8gY2xlYW4gdXAgY2hpbGRyZW5cbiAgICogd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcmVuZGVyZWRDaGlsZHJlbiBQcmV2aW91c2x5IGluaXRpYWxpemVkIHNldCBvZiBjaGlsZHJlbi5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uIChyZW5kZXJlZENoaWxkcmVuKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiByZW5kZXJlZENoaWxkcmVuKSB7XG4gICAgICBpZiAocmVuZGVyZWRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICB2YXIgcmVuZGVyZWRDaGlsZCA9IHJlbmRlcmVkQ2hpbGRyZW5bbmFtZV07XG4gICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHJlbmRlcmVkQ2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q2hpbGRSZWNvbmNpbGVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkcmVuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgdHJhdmVyc2VBbGxDaGlsZHJlbiA9IHJlcXVpcmUoJy4vdHJhdmVyc2VBbGxDaGlsZHJlbicpO1xuXG52YXIgdHdvQXJndW1lbnRQb29sZXIgPSBQb29sZWRDbGFzcy50d29Bcmd1bWVudFBvb2xlcjtcbnZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBQb29sZWRDbGFzcy5mb3VyQXJndW1lbnRQb29sZXI7XG5cbnZhciB1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCA9IC9cXC8oPyFcXC8pL2c7XG5mdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgJy8vJyk7XG59XG5cbi8qKlxuICogUG9vbGVkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBib29ra2VlcGluZyBhc3NvY2lhdGVkIHdpdGggcGVyZm9ybWluZyBhIGNoaWxkXG4gKiB0cmF2ZXJzYWwuIEFsbG93cyBhdm9pZGluZyBiaW5kaW5nIGNhbGxiYWNrcy5cbiAqXG4gKiBAY29uc3RydWN0b3IgRm9yRWFjaEJvb2tLZWVwaW5nXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gZm9yRWFjaEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gdHJhdmVyc2FsIHdpdGguXG4gKiBAcGFyYW0gez8qfSBmb3JFYWNoQ29udGV4dCBDb250ZXh0IHRvIHBlcmZvcm0gY29udGV4dCB3aXRoLlxuICovXG5mdW5jdGlvbiBGb3JFYWNoQm9va0tlZXBpbmcoZm9yRWFjaEZ1bmN0aW9uLCBmb3JFYWNoQ29udGV4dCkge1xuICB0aGlzLmZ1bmMgPSBmb3JFYWNoRnVuY3Rpb247XG4gIHRoaXMuY29udGV4dCA9IGZvckVhY2hDb250ZXh0O1xuICB0aGlzLmNvdW50ID0gMDtcbn1cbkZvckVhY2hCb29rS2VlcGluZy5wcm90b3R5cGUuZGVzdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5mdW5jID0gbnVsbDtcbiAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgdGhpcy5jb3VudCA9IDA7XG59O1xuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKEZvckVhY2hCb29rS2VlcGluZywgdHdvQXJndW1lbnRQb29sZXIpO1xuXG5mdW5jdGlvbiBmb3JFYWNoU2luZ2xlQ2hpbGQoYm9va0tlZXBpbmcsIGNoaWxkLCBuYW1lKSB7XG4gIHZhciBmdW5jID0gYm9va0tlZXBpbmcuZnVuYztcbiAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXG4gIGZ1bmMuY2FsbChjb250ZXh0LCBjaGlsZCwgYm9va0tlZXBpbmcuY291bnQrKyk7XG59XG5cbi8qKlxuICogSXRlcmF0ZXMgdGhyb3VnaCBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogVGhlIHByb3ZpZGVkIGZvckVhY2hGdW5jKGNoaWxkLCBpbmRleCkgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2hcbiAqIGxlYWYgY2hpbGQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZvckVhY2hGdW5jXG4gKiBAcGFyYW0geyp9IGZvckVhY2hDb250ZXh0IENvbnRleHQgZm9yIGZvckVhY2hDb250ZXh0LlxuICovXG5mdW5jdGlvbiBmb3JFYWNoQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCkge1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gRm9yRWFjaEJvb2tLZWVwaW5nLmdldFBvb2xlZChmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpO1xuICB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoU2luZ2xlQ2hpbGQsIHRyYXZlcnNlQ29udGV4dCk7XG4gIEZvckVhY2hCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbi8qKlxuICogUG9vbGVkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBib29ra2VlcGluZyBhc3NvY2lhdGVkIHdpdGggcGVyZm9ybWluZyBhIGNoaWxkXG4gKiBtYXBwaW5nLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIE1hcEJvb2tLZWVwaW5nXG4gKiBAcGFyYW0geyEqfSBtYXBSZXN1bHQgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9yZGVyZWQgbWFwIG9mIHJlc3VsdHMuXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gbWFwRnVuY3Rpb24gRnVuY3Rpb24gdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG4gKiBAcGFyYW0gez8qfSBtYXBDb250ZXh0IENvbnRleHQgdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG4gKi9cbmZ1bmN0aW9uIE1hcEJvb2tLZWVwaW5nKG1hcFJlc3VsdCwga2V5UHJlZml4LCBtYXBGdW5jdGlvbiwgbWFwQ29udGV4dCkge1xuICB0aGlzLnJlc3VsdCA9IG1hcFJlc3VsdDtcbiAgdGhpcy5rZXlQcmVmaXggPSBrZXlQcmVmaXg7XG4gIHRoaXMuZnVuYyA9IG1hcEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBtYXBDb250ZXh0O1xuICB0aGlzLmNvdW50ID0gMDtcbn1cbk1hcEJvb2tLZWVwaW5nLnByb3RvdHlwZS5kZXN0cnVjdG9yID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnJlc3VsdCA9IG51bGw7XG4gIHRoaXMua2V5UHJlZml4ID0gbnVsbDtcbiAgdGhpcy5mdW5jID0gbnVsbDtcbiAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgdGhpcy5jb3VudCA9IDA7XG59O1xuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKE1hcEJvb2tLZWVwaW5nLCBmb3VyQXJndW1lbnRQb29sZXIpO1xuXG5mdW5jdGlvbiBtYXBTaW5nbGVDaGlsZEludG9Db250ZXh0KGJvb2tLZWVwaW5nLCBjaGlsZCwgY2hpbGRLZXkpIHtcbiAgdmFyIHJlc3VsdCA9IGJvb2tLZWVwaW5nLnJlc3VsdDtcbiAgdmFyIGtleVByZWZpeCA9IGJvb2tLZWVwaW5nLmtleVByZWZpeDtcbiAgdmFyIGZ1bmMgPSBib29rS2VlcGluZy5mdW5jO1xuICB2YXIgY29udGV4dCA9IGJvb2tLZWVwaW5nLmNvbnRleHQ7XG5cbiAgdmFyIG1hcHBlZENoaWxkID0gZnVuYy5jYWxsKGNvbnRleHQsIGNoaWxkLCBib29rS2VlcGluZy5jb3VudCsrKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobWFwcGVkQ2hpbGQpKSB7XG4gICAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChtYXBwZWRDaGlsZCwgcmVzdWx0LCBjaGlsZEtleSwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcbiAgfSBlbHNlIGlmIChtYXBwZWRDaGlsZCAhPSBudWxsKSB7XG4gICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChtYXBwZWRDaGlsZCkpIHtcbiAgICAgIG1hcHBlZENoaWxkID0gUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZUtleShtYXBwZWRDaGlsZCxcbiAgICAgIC8vIEtlZXAgYm90aCB0aGUgKG1hcHBlZCkgYW5kIG9sZCBrZXlzIGlmIHRoZXkgZGlmZmVyLCBqdXN0IGFzXG4gICAgICAvLyB0cmF2ZXJzZUFsbENoaWxkcmVuIHVzZWQgdG8gZG8gZm9yIG9iamVjdHMgYXMgY2hpbGRyZW5cbiAgICAgIGtleVByZWZpeCArIChtYXBwZWRDaGlsZCAhPT0gY2hpbGQgPyBlc2NhcGVVc2VyUHJvdmlkZWRLZXkobWFwcGVkQ2hpbGQua2V5IHx8ICcnKSArICcvJyA6ICcnKSArIGNoaWxkS2V5KTtcbiAgICB9XG4gICAgcmVzdWx0LnB1c2gobWFwcGVkQ2hpbGQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIGFycmF5LCBwcmVmaXgsIGZ1bmMsIGNvbnRleHQpIHtcbiAgdmFyIGVzY2FwZWRQcmVmaXggPSAnJztcbiAgaWYgKHByZWZpeCAhPSBudWxsKSB7XG4gICAgZXNjYXBlZFByZWZpeCA9IGVzY2FwZVVzZXJQcm92aWRlZEtleShwcmVmaXgpICsgJy8nO1xuICB9XG4gIHZhciB0cmF2ZXJzZUNvbnRleHQgPSBNYXBCb29rS2VlcGluZy5nZXRQb29sZWQoYXJyYXksIGVzY2FwZWRQcmVmaXgsIGZ1bmMsIGNvbnRleHQpO1xuICB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBtYXBTaW5nbGVDaGlsZEludG9Db250ZXh0LCB0cmF2ZXJzZUNvbnRleHQpO1xuICBNYXBCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbi8qKlxuICogTWFwcyBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogVGhlIHByb3ZpZGVkIG1hcEZ1bmN0aW9uKGNoaWxkLCBrZXksIGluZGV4KSB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaFxuICogbGVhZiBjaGlsZC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgaW50KX0gZnVuYyBUaGUgbWFwIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IENvbnRleHQgZm9yIG1hcEZ1bmN0aW9uLlxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3QgY29udGFpbmluZyB0aGUgb3JkZXJlZCBtYXAgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmMsIGNvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCByZXN1bHQsIG51bGwsIGZ1bmMsIGNvbnRleHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoU2luZ2xlQ2hpbGREdW1teSh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkLCBuYW1lKSB7XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENvdW50IHRoZSBudW1iZXIgb2YgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhc1xuICogYHByb3BzLmNoaWxkcmVuYC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gY291bnRDaGlsZHJlbihjaGlsZHJlbiwgY29udGV4dCkge1xuICByZXR1cm4gdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXksIG51bGwpO1xufVxuXG4vKipcbiAqIEZsYXR0ZW4gYSBjaGlsZHJlbiBvYmplY3QgKHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCkgYW5kXG4gKiByZXR1cm4gYW4gYXJyYXkgd2l0aCBhcHByb3ByaWF0ZWx5IHJlLWtleWVkIGNoaWxkcmVuLlxuICovXG5mdW5jdGlvbiB0b0FycmF5KGNoaWxkcmVuKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgcmVzdWx0LCBudWxsLCBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zQXJndW1lbnQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgUmVhY3RDaGlsZHJlbiA9IHtcbiAgZm9yRWFjaDogZm9yRWFjaENoaWxkcmVuLFxuICBtYXA6IG1hcENoaWxkcmVuLFxuICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsOiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsLFxuICBjb3VudDogY291bnRDaGlsZHJlbixcbiAgdG9BcnJheTogdG9BcnJheVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENoaWxkcmVuOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENsYXNzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25zJyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzJyk7XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBNSVhJTlNfS0VZID0ga2V5T2YoeyBtaXhpbnM6IG51bGwgfSk7XG5cbi8qKlxuICogUG9saWNpZXMgdGhhdCBkZXNjcmliZSBtZXRob2RzIGluIGBSZWFjdENsYXNzSW50ZXJmYWNlYC5cbiAqL1xudmFyIFNwZWNQb2xpY3kgPSBrZXlNaXJyb3Ioe1xuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBtYXkgYmUgZGVmaW5lZCBvbmx5IG9uY2UgYnkgdGhlIGNsYXNzIHNwZWNpZmljYXRpb24gb3IgbWl4aW4uXG4gICAqL1xuICBERUZJTkVfT05DRTogbnVsbCxcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgYnkgYm90aCB0aGUgY2xhc3Mgc3BlY2lmaWNhdGlvbiBhbmQgbWl4aW5zLlxuICAgKiBTdWJzZXF1ZW50IGRlZmluaXRpb25zIHdpbGwgYmUgY2hhaW5lZC4gVGhlc2UgbWV0aG9kcyBtdXN0IHJldHVybiB2b2lkLlxuICAgKi9cbiAgREVGSU5FX01BTlk6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIGFyZSBvdmVycmlkaW5nIHRoZSBiYXNlIGNsYXNzLlxuICAgKi9cbiAgT1ZFUlJJREVfQkFTRTogbnVsbCxcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgYXJlIHNpbWlsYXIgdG8gREVGSU5FX01BTlksIGV4Y2VwdCB3ZSBhc3N1bWUgdGhleSByZXR1cm5cbiAgICogb2JqZWN0cy4gV2UgdHJ5IHRvIG1lcmdlIHRoZSBrZXlzIG9mIHRoZSByZXR1cm4gdmFsdWVzIG9mIGFsbCB0aGUgbWl4ZWQgaW5cbiAgICogZnVuY3Rpb25zLiBJZiB0aGVyZSBpcyBhIGtleSBjb25mbGljdCB3ZSB0aHJvdy5cbiAgICovXG4gIERFRklORV9NQU5ZX01FUkdFRDogbnVsbFxufSk7XG5cbnZhciBpbmplY3RlZE1peGlucyA9IFtdO1xuXG52YXIgd2FybmVkU2V0UHJvcHMgPSBmYWxzZTtcbmZ1bmN0aW9uIHdhcm5TZXRQcm9wcygpIHtcbiAgaWYgKCF3YXJuZWRTZXRQcm9wcykge1xuICAgIHdhcm5lZFNldFByb3BzID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3NldFByb3BzKC4uLikgYW5kIHJlcGxhY2VQcm9wcyguLi4pIGFyZSBkZXByZWNhdGVkLiAnICsgJ0luc3RlYWQsIGNhbGwgcmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21wb3NpdGUgY29tcG9uZW50cyBhcmUgaGlnaGVyLWxldmVsIGNvbXBvbmVudHMgdGhhdCBjb21wb3NlIG90aGVyIGNvbXBvc2l0ZVxuICogb3IgbmF0aXZlIGNvbXBvbmVudHMuXG4gKlxuICogVG8gY3JlYXRlIGEgbmV3IHR5cGUgb2YgYFJlYWN0Q2xhc3NgLCBwYXNzIGEgc3BlY2lmaWNhdGlvbiBvZlxuICogeW91ciBuZXcgY2xhc3MgdG8gYFJlYWN0LmNyZWF0ZUNsYXNzYC4gVGhlIG9ubHkgcmVxdWlyZW1lbnQgb2YgeW91ciBjbGFzc1xuICogc3BlY2lmaWNhdGlvbiBpcyB0aGF0IHlvdSBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuXG4gKlxuICogICB2YXIgTXlDb21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHJldHVybiA8ZGl2PkhlbGxvIFdvcmxkPC9kaXY+O1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIGNsYXNzIHNwZWNpZmljYXRpb24gc3VwcG9ydHMgYSBzcGVjaWZpYyBwcm90b2NvbCBvZiBtZXRob2RzIHRoYXQgaGF2ZVxuICogc3BlY2lhbCBtZWFuaW5nIChlLmcuIGByZW5kZXJgKS4gU2VlIGBSZWFjdENsYXNzSW50ZXJmYWNlYCBmb3JcbiAqIG1vcmUgdGhlIGNvbXByZWhlbnNpdmUgcHJvdG9jb2wuIEFueSBvdGhlciBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGluIHRoZVxuICogY2xhc3Mgc3BlY2lmaWNhdGlvbiB3aWxsIGJlIGF2YWlsYWJsZSBvbiB0aGUgcHJvdG90eXBlLlxuICpcbiAqIEBpbnRlcmZhY2UgUmVhY3RDbGFzc0ludGVyZmFjZVxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdENsYXNzSW50ZXJmYWNlID0ge1xuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBNaXhpbiBvYmplY3RzIHRvIGluY2x1ZGUgd2hlbiBkZWZpbmluZyB5b3VyIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge2FycmF5fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIG1peGluczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgcHJvcGVydGllcyBhbmQgbWV0aG9kcyB0aGF0IHNob3VsZCBiZSBkZWZpbmVkIG9uXG4gICAqIHRoZSBjb21wb25lbnQncyBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIGl0cyBwcm90b3R5cGUgKHN0YXRpYyBtZXRob2RzKS5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBzdGF0aWNzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIG9mIHByb3AgdHlwZXMgZm9yIHRoaXMgY29tcG9uZW50LlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHByb3BUeXBlczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogRGVmaW5pdGlvbiBvZiBjb250ZXh0IHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb250ZXh0VHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyB0aGlzIGNvbXBvbmVudCBzZXRzIGZvciBpdHMgY2hpbGRyZW4uXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY2hpbGRDb250ZXh0VHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLy8gPT09PSBEZWZpbml0aW9uIG1ldGhvZHMgPT09PVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBWYWx1ZXMgaW4gdGhlIG1hcHBpbmcgd2lsbCBiZSBzZXQgb25cbiAgICogYHRoaXMucHJvcHNgIGlmIHRoYXQgcHJvcCBpcyBub3Qgc3BlY2lmaWVkIChpLmUuIHVzaW5nIGFuIGBpbmAgY2hlY2spLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBpbnZva2VkIGJlZm9yZSBgZ2V0SW5pdGlhbFN0YXRlYCBhbmQgdGhlcmVmb3JlIGNhbm5vdCByZWx5XG4gICAqIG9uIGB0aGlzLnN0YXRlYCBvciB1c2UgYHRoaXMuc2V0U3RhdGVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgZ2V0RGVmYXVsdFByb3BzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCxcblxuICAvKipcbiAgICogSW52b2tlZCBvbmNlIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQuIFRoZSByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkXG4gICAqIGFzIHRoZSBpbml0aWFsIHZhbHVlIG9mIGB0aGlzLnN0YXRlYC5cbiAgICpcbiAgICogICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgcmV0dXJuIHtcbiAgICogICAgICAgaXNPbjogZmFsc2UsXG4gICAqICAgICAgIGZvb0JhejogbmV3IEJhekZvbygpXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgZ2V0SW5pdGlhbFN0YXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCxcblxuICAvKipcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldENoaWxkQ29udGV4dDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIFVzZXMgcHJvcHMgZnJvbSBgdGhpcy5wcm9wc2AgYW5kIHN0YXRlIGZyb20gYHRoaXMuc3RhdGVgIHRvIHJlbmRlciB0aGVcbiAgICogc3RydWN0dXJlIG9mIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIE5vIGd1YXJhbnRlZXMgYXJlIG1hZGUgYWJvdXQgd2hlbiBvciBob3cgb2Z0ZW4gdGhpcyBtZXRob2QgaXMgaW52b2tlZCwgc29cbiAgICogaXQgbXVzdCBub3QgaGF2ZSBzaWRlIGVmZmVjdHMuXG4gICAqXG4gICAqICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICogICAgIHZhciBuYW1lID0gdGhpcy5wcm9wcy5uYW1lO1xuICAgKiAgICAgcmV0dXJuIDxkaXY+SGVsbG8sIHtuYW1lfSE8L2Rpdj47XG4gICAqICAgfVxuICAgKlxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH1cbiAgICogQG5vc2lkZWVmZmVjdHNcbiAgICogQHJlcXVpcmVkXG4gICAqL1xuICByZW5kZXI6IFNwZWNQb2xpY3kuREVGSU5FX09OQ0UsXG5cbiAgLy8gPT09PSBEZWxlZ2F0ZSBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgaW5pdGlhbGx5IGNyZWF0ZWQgYW5kIGFib3V0IHRvIGJlIG1vdW50ZWQuXG4gICAqIFRoaXMgbWF5IGhhdmUgc2lkZSBlZmZlY3RzLCBidXQgYW55IGV4dGVybmFsIHN1YnNjcmlwdGlvbnMgb3IgZGF0YSBjcmVhdGVkXG4gICAqIGJ5IHRoaXMgbWV0aG9kIG11c3QgYmUgY2xlYW5lZCB1cCBpbiBgY29tcG9uZW50V2lsbFVubW91bnRgLlxuICAgKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxNb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbW91bnRlZCBhbmQgaGFzIGEgRE9NIHJlcHJlc2VudGF0aW9uLlxuICAgKiBIb3dldmVyLCB0aGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgRE9NIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBvcGVyYXRlIG9uIHRoZSBET00gd2hlbiB0aGUgY29tcG9uZW50IGhhc1xuICAgKiBiZWVuIG1vdW50ZWQgKGluaXRpYWxpemVkIGFuZCByZW5kZXJlZCkgZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHJvb3ROb2RlIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50LlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudERpZE1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIGJlZm9yZSB0aGUgY29tcG9uZW50IHJlY2VpdmVzIG5ldyBwcm9wcy5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gcmVhY3QgdG8gYSBwcm9wIHRyYW5zaXRpb24gYnkgdXBkYXRpbmcgdGhlXG4gICAqIHN0YXRlIHVzaW5nIGB0aGlzLnNldFN0YXRlYC4gQ3VycmVudCBwcm9wcyBhcmUgYWNjZXNzZWQgdmlhIGB0aGlzLnByb3BzYC5cbiAgICpcbiAgICogICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRDb250ZXh0KSB7XG4gICAqICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICogICAgICAgbGlrZXNJbmNyZWFzaW5nOiBuZXh0UHJvcHMubGlrZUNvdW50ID4gdGhpcy5wcm9wcy5saWtlQ291bnRcbiAgICogICAgIH0pO1xuICAgKiAgIH1cbiAgICpcbiAgICogTk9URTogVGhlcmUgaXMgbm8gZXF1aXZhbGVudCBgY29tcG9uZW50V2lsbFJlY2VpdmVTdGF0ZWAuIEFuIGluY29taW5nIHByb3BcbiAgICogdHJhbnNpdGlvbiBtYXkgY2F1c2UgYSBzdGF0ZSBjaGFuZ2UsIGJ1dCB0aGUgb3Bwb3NpdGUgaXMgbm90IHRydWUuIElmIHlvdVxuICAgKiBuZWVkIGl0LCB5b3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgZm9yIGBjb21wb25lbnRXaWxsVXBkYXRlYC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hpbGUgZGVjaWRpbmcgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgdXBkYXRlZCBhcyBhIHJlc3VsdCBvZlxuICAgKiByZWNlaXZpbmcgbmV3IHByb3BzLCBzdGF0ZSBhbmQvb3IgY29udGV4dC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gYHJldHVybiBmYWxzZWAgd2hlbiB5b3UncmUgY2VydGFpbiB0aGF0IHRoZVxuICAgKiB0cmFuc2l0aW9uIHRvIHRoZSBuZXcgcHJvcHMvc3RhdGUvY29udGV4dCB3aWxsIG5vdCByZXF1aXJlIGEgY29tcG9uZW50XG4gICAqIHVwZGF0ZS5cbiAgICpcbiAgICogICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCkge1xuICAgKiAgICAgcmV0dXJuICFlcXVhbChuZXh0UHJvcHMsIHRoaXMucHJvcHMpIHx8XG4gICAqICAgICAgICFlcXVhbChuZXh0U3RhdGUsIHRoaXMuc3RhdGUpIHx8XG4gICAqICAgICAgICFlcXVhbChuZXh0Q29udGV4dCwgdGhpcy5jb250ZXh0KTtcbiAgICogICB9XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGVcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIHVwZGF0ZS5cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBzaG91bGRDb21wb25lbnRVcGRhdGU6IFNwZWNQb2xpY3kuREVGSU5FX09OQ0UsXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIHVwZGF0ZSBkdWUgdG8gYSB0cmFuc2l0aW9uIGZyb21cbiAgICogYHRoaXMucHJvcHNgLCBgdGhpcy5zdGF0ZWAgYW5kIGB0aGlzLmNvbnRleHRgIHRvIGBuZXh0UHJvcHNgLCBgbmV4dFN0YXRlYFxuICAgKiBhbmQgYG5leHRDb250ZXh0YC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gcGVyZm9ybSBwcmVwYXJhdGlvbiBiZWZvcmUgYW4gdXBkYXRlIG9jY3Vycy5cbiAgICpcbiAgICogTk9URTogWW91ICoqY2Fubm90KiogdXNlIGB0aGlzLnNldFN0YXRlKClgIGluIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50J3MgRE9NIHJlcHJlc2VudGF0aW9uIGhhcyBiZWVuIHVwZGF0ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIG9wZXJhdGUgb24gdGhlIERPTSB3aGVuIHRoZSBjb21wb25lbnQgaGFzXG4gICAqIGJlZW4gdXBkYXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHByZXZQcm9wc1xuICAgKiBAcGFyYW0gez9vYmplY3R9IHByZXZTdGF0ZVxuICAgKiBAcGFyYW0gez9vYmplY3R9IHByZXZDb250ZXh0XG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcm9vdE5vZGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQuXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkIGZyb20gaXRzIHBhcmVudCBhbmQgaGF2ZVxuICAgKiBpdHMgRE9NIHJlcHJlc2VudGF0aW9uIGRlc3Ryb3llZC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gZGVhbGxvY2F0ZSBhbnkgZXh0ZXJuYWwgcmVzb3VyY2VzLlxuICAgKlxuICAgKiBOT1RFOiBUaGVyZSBpcyBubyBgY29tcG9uZW50RGlkVW5tb3VudGAgc2luY2UgeW91ciBjb21wb25lbnQgd2lsbCBoYXZlIGJlZW5cbiAgICogZGVzdHJveWVkIGJ5IHRoYXQgcG9pbnQuXG4gICAqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLy8gPT09PSBBZHZhbmNlZCBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY29tcG9uZW50J3MgY3VycmVudGx5IG1vdW50ZWQgRE9NIHJlcHJlc2VudGF0aW9uLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGltcGxlbWVudHMgUmVhY3QncyByZW5kZXJpbmcgYW5kIHJlY29uY2lsaWF0aW9uIGFsZ29yaXRobS5cbiAgICogU29waGlzdGljYXRlZCBjbGllbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBTcGVjUG9saWN5Lk9WRVJSSURFX0JBU0VcblxufTtcblxuLyoqXG4gKiBNYXBwaW5nIGZyb20gY2xhc3Mgc3BlY2lmaWNhdGlvbiBrZXlzIHRvIHNwZWNpYWwgcHJvY2Vzc2luZyBmdW5jdGlvbnMuXG4gKlxuICogQWx0aG91Z2ggdGhlc2UgYXJlIGRlY2xhcmVkIGxpa2UgaW5zdGFuY2UgcHJvcGVydGllcyBpbiB0aGUgc3BlY2lmaWNhdGlvblxuICogd2hlbiBkZWZpbmluZyBjbGFzc2VzIHVzaW5nIGBSZWFjdC5jcmVhdGVDbGFzc2AsIHRoZXkgYXJlIGFjdHVhbGx5IHN0YXRpY1xuICogYW5kIGFyZSBhY2Nlc3NpYmxlIG9uIHRoZSBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIHRoZSBwcm90b3R5cGUuIERlc3BpdGVcbiAqIGJlaW5nIHN0YXRpYywgdGhleSBtdXN0IGJlIGRlZmluZWQgb3V0c2lkZSBvZiB0aGUgXCJzdGF0aWNzXCIga2V5IHVuZGVyXG4gKiB3aGljaCBhbGwgb3RoZXIgc3RhdGljIG1ldGhvZHMgYXJlIGRlZmluZWQuXG4gKi9cbnZhciBSRVNFUlZFRF9TUEVDX0tFWVMgPSB7XG4gIGRpc3BsYXlOYW1lOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGRpc3BsYXlOYW1lKSB7XG4gICAgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgfSxcbiAgbWl4aW5zOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIG1peGlucykge1xuICAgIGlmIChtaXhpbnMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWl4aW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBtaXhpbnNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgY2hpbGRDb250ZXh0VHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBjaGlsZENvbnRleHRUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jaGlsZENvbnRleHQpO1xuICAgIH1cbiAgICBDb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcyA9IGFzc2lnbih7fSwgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMsIGNoaWxkQ29udGV4dFR5cGVzKTtcbiAgfSxcbiAgY29udGV4dFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGNvbnRleHRUeXBlcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIGNvbnRleHRUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jb250ZXh0KTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IuY29udGV4dFR5cGVzID0gYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5jb250ZXh0VHlwZXMsIGNvbnRleHRUeXBlcyk7XG4gIH0sXG4gIC8qKlxuICAgKiBTcGVjaWFsIGNhc2UgZ2V0RGVmYXVsdFByb3BzIHdoaWNoIHNob3VsZCBtb3ZlIGludG8gc3RhdGljcyBidXQgcmVxdWlyZXNcbiAgICogYXV0b21hdGljIG1lcmdpbmcuXG4gICAqL1xuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24oQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzLCBnZXREZWZhdWx0UHJvcHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMgPSBnZXREZWZhdWx0UHJvcHM7XG4gICAgfVxuICB9LFxuICBwcm9wVHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvcFR5cGVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgcHJvcFR5cGVzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuICAgIH1cbiAgICBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLnByb3BUeXBlcywgcHJvcFR5cGVzKTtcbiAgfSxcbiAgc3RhdGljczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBzdGF0aWNzKSB7XG4gICAgbWl4U3RhdGljU3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHN0YXRpY3MpO1xuICB9LFxuICBhdXRvYmluZDogZnVuY3Rpb24gKCkge30gfTtcblxuLy8gbm9vcFxuZnVuY3Rpb24gdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCB0eXBlRGVmLCBsb2NhdGlvbikge1xuICBmb3IgKHZhciBwcm9wTmFtZSBpbiB0eXBlRGVmKSB7XG4gICAgaWYgKHR5cGVEZWYuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAvLyB1c2UgYSB3YXJuaW5nIGluc3RlYWQgb2YgYW4gaW52YXJpYW50IHNvIGNvbXBvbmVudHNcbiAgICAgIC8vIGRvbid0IHNob3cgdXAgaW4gcHJvZCBidXQgbm90IGluIF9fREVWX19cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiB0eXBlRGVmW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJywgJyVzOiAlcyB0eXBlIGAlc2AgaXMgaW52YWxpZDsgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLCB1c3VhbGx5IGZyb20gJyArICdSZWFjdC5Qcm9wVHlwZXMuJywgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ1JlYWN0Q2xhc3MnLCBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl0sIHByb3BOYW1lKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVNZXRob2RPdmVycmlkZShwcm90bywgbmFtZSkge1xuICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSkgPyBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdIDogbnVsbDtcblxuICAvLyBEaXNhbGxvdyBvdmVycmlkaW5nIG9mIGJhc2UgY2xhc3MgbWV0aG9kcyB1bmxlc3MgZXhwbGljaXRseSBhbGxvd2VkLlxuICBpZiAoUmVhY3RDbGFzc01peGluLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgIShzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5Lk9WRVJSSURFX0JBU0UpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3NJbnRlcmZhY2U6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBvdmVycmlkZSAnICsgJ2Alc2AgZnJvbSB5b3VyIGNsYXNzIHNwZWNpZmljYXRpb24uIEVuc3VyZSB0aGF0IHlvdXIgbWV0aG9kIG5hbWVzICcgKyAnZG8gbm90IG92ZXJsYXAgd2l0aCBSZWFjdCBtZXRob2RzLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIERpc2FsbG93IGRlZmluaW5nIG1ldGhvZHMgbW9yZSB0aGFuIG9uY2UgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgaWYgKHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgIShzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lICcgKyAnYCVzYCBvbiB5b3VyIGNvbXBvbmVudCBtb3JlIHRoYW4gb25jZS4gVGhpcyBjb25mbGljdCBtYXkgYmUgZHVlICcgKyAndG8gYSBtaXhpbi4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBNaXhpbiBoZWxwZXIgd2hpY2ggaGFuZGxlcyBwb2xpY3kgdmFsaWRhdGlvbiBhbmQgcmVzZXJ2ZWRcbiAqIHNwZWNpZmljYXRpb24ga2V5cyB3aGVuIGJ1aWxkaW5nIFJlYWN0IGNsYXNzc2VzLlxuICovXG5mdW5jdGlvbiBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYykge1xuICBpZiAoIXNwZWMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAhKHR5cGVvZiBzcGVjICE9PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3VcXCdyZSBhdHRlbXB0aW5nIHRvICcgKyAndXNlIGEgY29tcG9uZW50IGNsYXNzIGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAhIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzcGVjKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3VcXCdyZSBhdHRlbXB0aW5nIHRvICcgKyAndXNlIGEgY29tcG9uZW50IGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIHZhciBwcm90byA9IENvbnN0cnVjdG9yLnByb3RvdHlwZTtcblxuICAvLyBCeSBoYW5kbGluZyBtaXhpbnMgYmVmb3JlIGFueSBvdGhlciBwcm9wZXJ0aWVzLCB3ZSBlbnN1cmUgdGhlIHNhbWVcbiAgLy8gY2hhaW5pbmcgb3JkZXIgaXMgYXBwbGllZCB0byBtZXRob2RzIHdpdGggREVGSU5FX01BTlkgcG9saWN5LCB3aGV0aGVyXG4gIC8vIG1peGlucyBhcmUgbGlzdGVkIGJlZm9yZSBvciBhZnRlciB0aGVzZSBtZXRob2RzIGluIHRoZSBzcGVjLlxuICBpZiAoc3BlYy5oYXNPd25Qcm9wZXJ0eShNSVhJTlNfS0VZKSkge1xuICAgIFJFU0VSVkVEX1NQRUNfS0VZUy5taXhpbnMoQ29uc3RydWN0b3IsIHNwZWMubWl4aW5zKTtcbiAgfVxuXG4gIGZvciAodmFyIG5hbWUgaW4gc3BlYykge1xuICAgIGlmICghc3BlYy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUgPT09IE1JWElOU19LRVkpIHtcbiAgICAgIC8vIFdlIGhhdmUgYWxyZWFkeSBoYW5kbGVkIG1peGlucyBpbiBhIHNwZWNpYWwgY2FzZSBhYm92ZS5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBwcm9wZXJ0eSA9IHNwZWNbbmFtZV07XG4gICAgdmFsaWRhdGVNZXRob2RPdmVycmlkZShwcm90bywgbmFtZSk7XG5cbiAgICBpZiAoUkVTRVJWRURfU1BFQ19LRVlTLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBSRVNFUlZFRF9TUEVDX0tFWVNbbmFtZV0oQ29uc3RydWN0b3IsIHByb3BlcnR5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2V0dXAgbWV0aG9kcyBvbiBwcm90b3R5cGU6XG4gICAgICAvLyBUaGUgZm9sbG93aW5nIG1lbWJlciBtZXRob2RzIHNob3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBib3VuZDpcbiAgICAgIC8vIDEuIEV4cGVjdGVkIFJlYWN0Q2xhc3MgbWV0aG9kcyAoaW4gdGhlIFwiaW50ZXJmYWNlXCIpLlxuICAgICAgLy8gMi4gT3ZlcnJpZGRlbiBtZXRob2RzICh0aGF0IHdlcmUgbWl4ZWQgaW4pLlxuICAgICAgdmFyIGlzUmVhY3RDbGFzc01ldGhvZCA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSk7XG4gICAgICB2YXIgaXNBbHJlYWR5RGVmaW5lZCA9IHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgdmFyIGlzRnVuY3Rpb24gPSB0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbic7XG4gICAgICB2YXIgc2hvdWxkQXV0b0JpbmQgPSBpc0Z1bmN0aW9uICYmICFpc1JlYWN0Q2xhc3NNZXRob2QgJiYgIWlzQWxyZWFkeURlZmluZWQgJiYgc3BlYy5hdXRvYmluZCAhPT0gZmFsc2U7XG5cbiAgICAgIGlmIChzaG91bGRBdXRvQmluZCkge1xuICAgICAgICBpZiAoIXByb3RvLl9fcmVhY3RBdXRvQmluZE1hcCkge1xuICAgICAgICAgIHByb3RvLl9fcmVhY3RBdXRvQmluZE1hcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHByb3RvLl9fcmVhY3RBdXRvQmluZE1hcFtuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgICBwcm90b1tuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzQWxyZWFkeURlZmluZWQpIHtcbiAgICAgICAgICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NJbnRlcmZhY2VbbmFtZV07XG5cbiAgICAgICAgICAvLyBUaGVzZSBjYXNlcyBzaG91bGQgYWxyZWFkeSBiZSBjYXVnaHQgYnkgdmFsaWRhdGVNZXRob2RPdmVycmlkZS5cbiAgICAgICAgICAhKGlzUmVhY3RDbGFzc01ldGhvZCAmJiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQgfHwgc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFVuZXhwZWN0ZWQgc3BlYyBwb2xpY3kgJXMgZm9yIGtleSAlcyAnICsgJ3doZW4gbWl4aW5nIGluIGNvbXBvbmVudCBzcGVjcy4nLCBzcGVjUG9saWN5LCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAvLyBGb3IgbWV0aG9kcyB3aGljaCBhcmUgZGVmaW5lZCBtb3JlIHRoYW4gb25jZSwgY2FsbCB0aGUgZXhpc3RpbmdcbiAgICAgICAgICAvLyBtZXRob2RzIGJlZm9yZSBjYWxsaW5nIHRoZSBuZXcgcHJvcGVydHksIG1lcmdpbmcgaWYgYXBwcm9wcmlhdGUuXG4gICAgICAgICAgaWYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEKSB7XG4gICAgICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKHByb3RvW25hbWVdLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZKSB7XG4gICAgICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZUNoYWluZWRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm90b1tuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBBZGQgdmVyYm9zZSBkaXNwbGF5TmFtZSB0byB0aGUgZnVuY3Rpb24sIHdoaWNoIGhlbHBzIHdoZW4gbG9va2luZ1xuICAgICAgICAgICAgLy8gYXQgcHJvZmlsaW5nIHRvb2xzLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJyAmJiBzcGVjLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgICAgIHByb3RvW25hbWVdLmRpc3BsYXlOYW1lID0gc3BlYy5kaXNwbGF5TmFtZSArICdfJyArIG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKSB7XG4gIGlmICghc3RhdGljcykge1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKHZhciBuYW1lIGluIHN0YXRpY3MpIHtcbiAgICB2YXIgcHJvcGVydHkgPSBzdGF0aWNzW25hbWVdO1xuICAgIGlmICghc3RhdGljcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGlzUmVzZXJ2ZWQgPSAobmFtZSBpbiBSRVNFUlZFRF9TUEVDX0tFWVMpO1xuICAgICEhaXNSZXNlcnZlZCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lIGEgcmVzZXJ2ZWQgJyArICdwcm9wZXJ0eSwgYCVzYCwgdGhhdCBzaG91bGRuXFwndCBiZSBvbiB0aGUgXCJzdGF0aWNzXCIga2V5LiBEZWZpbmUgaXQgJyArICdhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBpbnN0ZWFkOyBpdCB3aWxsIHN0aWxsIGJlIGFjY2Vzc2libGUgb24gdGhlICcgKyAnY29uc3RydWN0b3IuJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGlzSW5oZXJpdGVkID0gKG5hbWUgaW4gQ29uc3RydWN0b3IpO1xuICAgICEhaXNJbmhlcml0ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSAnICsgJ2Alc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlICcgKyAnZHVlIHRvIGEgbWl4aW4uJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIENvbnN0cnVjdG9yW25hbWVdID0gcHJvcGVydHk7XG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb2JqZWN0cywgYnV0IHRocm93IGlmIGJvdGggY29udGFpbiB0aGUgc2FtZSBrZXkuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9uZSBUaGUgZmlyc3Qgb2JqZWN0LCB3aGljaCBpcyBtdXRhdGVkLlxuICogQHBhcmFtIHtvYmplY3R9IHR3byBUaGUgc2Vjb25kIG9iamVjdFxuICogQHJldHVybiB7b2JqZWN0fSBvbmUgYWZ0ZXIgaXQgaGFzIGJlZW4gbXV0YXRlZCB0byBjb250YWluIGV2ZXJ5dGhpbmcgaW4gdHdvLlxuICovXG5mdW5jdGlvbiBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKG9uZSwgdHdvKSB7XG4gICEob25lICYmIHR3byAmJiB0eXBlb2Ygb25lID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdHdvID09PSAnb2JqZWN0JykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cygpOiBDYW5ub3QgbWVyZ2Ugbm9uLW9iamVjdHMuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIGZvciAodmFyIGtleSBpbiB0d28pIHtcbiAgICBpZiAodHdvLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICEob25lW2tleV0gPT09IHVuZGVmaW5lZCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cygpOiAnICsgJ1RyaWVkIHRvIG1lcmdlIHR3byBvYmplY3RzIHdpdGggdGhlIHNhbWUga2V5OiBgJXNgLiBUaGlzIGNvbmZsaWN0ICcgKyAnbWF5IGJlIGR1ZSB0byBhIG1peGluOyBpbiBwYXJ0aWN1bGFyLCB0aGlzIG1heSBiZSBjYXVzZWQgYnkgdHdvICcgKyAnZ2V0SW5pdGlhbFN0YXRlKCkgb3IgZ2V0RGVmYXVsdFByb3BzKCkgbWV0aG9kcyByZXR1cm5pbmcgb2JqZWN0cyAnICsgJ3dpdGggY2xhc2hpbmcga2V5cy4nLCBrZXkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIG9uZVtrZXldID0gdHdvW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBvbmU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBtZXJnZXMgdGhlaXIgcmV0dXJuIHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbmUgRnVuY3Rpb24gdG8gaW52b2tlIGZpcnN0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ob25lLCB0d28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZFJlc3VsdCgpIHtcbiAgICB2YXIgYSA9IG9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHZhciBiID0gdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGEgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGI7XG4gICAgfSBlbHNlIGlmIChiID09IG51bGwpIHtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICB2YXIgYyA9IHt9O1xuICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYSk7XG4gICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBiKTtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHR3byBmdW5jdGlvbnMgYW5kIGlnbm9yZXMgdGhlaXIgcmV0dXJuIHZhbGVzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0d28gRnVuY3Rpb24gdG8gaW52b2tlIHNlY29uZC5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ob25lLCB0d28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoYWluZWRGdW5jdGlvbigpIHtcbiAgICBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBCaW5kcyBhIG1ldGhvZCB0byB0aGUgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgQ29tcG9uZW50IHdob3NlIG1ldGhvZCBpcyBnb2luZyB0byBiZSBib3VuZC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZXRob2QgdG8gYmUgYm91bmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGJvdW5kIG1ldGhvZC5cbiAqL1xuZnVuY3Rpb24gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKSB7XG4gIHZhciBib3VuZE1ldGhvZCA9IG1ldGhvZC5iaW5kKGNvbXBvbmVudCk7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQ29udGV4dCA9IGNvbXBvbmVudDtcbiAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRNZXRob2QgPSBtZXRob2Q7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gbnVsbDtcbiAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZTtcbiAgICB2YXIgX2JpbmQgPSBib3VuZE1ldGhvZC5iaW5kO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIGJsb2NrLXNjb3BlZC12YXIsIG5vLXVuZGVmICovXG4gICAgYm91bmRNZXRob2QuYmluZCA9IGZ1bmN0aW9uIChuZXdUaGlzKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIC8vIFVzZXIgaXMgdHJ5aW5nIHRvIGJpbmQoKSBhbiBhdXRvYm91bmQgbWV0aG9kOyB3ZSBlZmZlY3RpdmVseSB3aWxsXG4gICAgICAvLyBpZ25vcmUgdGhlIHZhbHVlIG9mIFwidGhpc1wiIHRoYXQgdGhlIHVzZXIgaXMgdHJ5aW5nIHRvIHVzZSwgc29cbiAgICAgIC8vIGxldCdzIHdhcm4uXG4gICAgICBpZiAobmV3VGhpcyAhPT0gY29tcG9uZW50ICYmIG5ld1RoaXMgIT09IG51bGwpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdiaW5kKCk6IFJlYWN0IGNvbXBvbmVudCBtZXRob2RzIG1heSBvbmx5IGJlIGJvdW5kIHRvIHRoZSAnICsgJ2NvbXBvbmVudCBpbnN0YW5jZS4gU2VlICVzJywgY29tcG9uZW50TmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2UgaWYgKCFhcmdzLmxlbmd0aCkge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ2JpbmQoKTogWW91IGFyZSBiaW5kaW5nIGEgY29tcG9uZW50IG1ldGhvZCB0byB0aGUgY29tcG9uZW50LiAnICsgJ1JlYWN0IGRvZXMgdGhpcyBmb3IgeW91IGF1dG9tYXRpY2FsbHkgaW4gYSBoaWdoLXBlcmZvcm1hbmNlICcgKyAnd2F5LCBzbyB5b3UgY2FuIHNhZmVseSByZW1vdmUgdGhpcyBjYWxsLiBTZWUgJXMnLCBjb21wb25lbnROYW1lKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGJvdW5kTWV0aG9kO1xuICAgICAgfVxuICAgICAgdmFyIHJlYm91bmRNZXRob2QgPSBfYmluZC5hcHBseShib3VuZE1ldGhvZCwgYXJndW1lbnRzKTtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQ29udGV4dCA9IGNvbXBvbmVudDtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuICAgICAgcmVib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRBcmd1bWVudHMgPSBhcmdzO1xuICAgICAgcmV0dXJuIHJlYm91bmRNZXRob2Q7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlICovXG4gICAgfTtcbiAgfVxuICByZXR1cm4gYm91bmRNZXRob2Q7XG59XG5cbi8qKlxuICogQmluZHMgYWxsIGF1dG8tYm91bmQgbWV0aG9kcyBpbiBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG4gKi9cbmZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZHMoY29tcG9uZW50KSB7XG4gIGZvciAodmFyIGF1dG9CaW5kS2V5IGluIGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRNYXApIHtcbiAgICBpZiAoY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZE1hcC5oYXNPd25Qcm9wZXJ0eShhdXRvQmluZEtleSkpIHtcbiAgICAgIHZhciBtZXRob2QgPSBjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kTWFwW2F1dG9CaW5kS2V5XTtcbiAgICAgIGNvbXBvbmVudFthdXRvQmluZEtleV0gPSBiaW5kQXV0b0JpbmRNZXRob2QoY29tcG9uZW50LCBtZXRob2QpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFkZCBtb3JlIHRvIHRoZSBSZWFjdENsYXNzIGJhc2UgY2xhc3MuIFRoZXNlIGFyZSBhbGwgbGVnYWN5IGZlYXR1cmVzIGFuZFxuICogdGhlcmVmb3JlIG5vdCBhbHJlYWR5IHBhcnQgb2YgdGhlIG1vZGVybiBSZWFjdENvbXBvbmVudC5cbiAqL1xudmFyIFJlYWN0Q2xhc3NNaXhpbiA9IHtcblxuICAvKipcbiAgICogVE9ETzogVGhpcyB3aWxsIGJlIGRlcHJlY2F0ZWQgYmVjYXVzZSBzdGF0ZSBzaG91bGQgYWx3YXlzIGtlZXAgYSBjb25zaXN0ZW50XG4gICAqIHR5cGUgc2lnbmF0dXJlIGFuZCB0aGUgb25seSB1c2UgY2FzZSBmb3IgdGhpcywgaXMgdG8gYXZvaWQgdGhhdC5cbiAgICovXG4gIHJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKG5ld1N0YXRlLCBjYWxsYmFjaykge1xuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlUmVwbGFjZVN0YXRlKHRoaXMsIG5ld1N0YXRlKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzTW91bnRlZDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZXIuaXNNb3VudGVkKHRoaXMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxQcm9wcyBTdWJzZXQgb2YgdGhlIG5leHQgcHJvcHMuXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgcHJvcHMgYXJlIHVwZGF0ZWQuXG4gICAqIEBmaW5hbFxuICAgKiBAcHVibGljXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBzZXRQcm9wczogZnVuY3Rpb24gKHBhcnRpYWxQcm9wcywgY2FsbGJhY2spIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblNldFByb3BzKCk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0UHJvcHModGhpcywgcGFydGlhbFByb3BzKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZSBhbGwgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV3UHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHByb3BzIGFyZSB1cGRhdGVkLlxuICAgKiBAZmluYWxcbiAgICogQHB1YmxpY1xuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgcmVwbGFjZVByb3BzOiBmdW5jdGlvbiAobmV3UHJvcHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5TZXRQcm9wcygpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVJlcGxhY2VQcm9wcyh0aGlzLCBuZXdQcm9wcyk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBSZWFjdENsYXNzQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkge307XG5hc3NpZ24oUmVhY3RDbGFzc0NvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSwgUmVhY3RDbGFzc01peGluKTtcblxuLyoqXG4gKiBNb2R1bGUgZm9yIGNyZWF0aW5nIGNvbXBvc2l0ZSBjb21wb25lbnRzLlxuICpcbiAqIEBjbGFzcyBSZWFjdENsYXNzXG4gKi9cbnZhciBSZWFjdENsYXNzID0ge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29tcG9zaXRlIGNvbXBvbmVudCBjbGFzcyBnaXZlbiBhIGNsYXNzIHNwZWNpZmljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzcGVjIENsYXNzIHNwZWNpZmljYXRpb24gKHdoaWNoIG11c3QgZGVmaW5lIGByZW5kZXJgKS5cbiAgICogQHJldHVybiB7ZnVuY3Rpb259IENvbXBvbmVudCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY3JlYXRlQ2xhc3M6IGZ1bmN0aW9uIChzcGVjKSB7XG4gICAgdmFyIENvbnN0cnVjdG9yID0gZnVuY3Rpb24gKHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gICAgICAvLyBUaGlzIGNvbnN0cnVjdG9yIGlzIG92ZXJyaWRkZW4gYnkgbW9ja3MuIFRoZSBhcmd1bWVudCBpcyB1c2VkXG4gICAgICAvLyBieSBtb2NrcyB0byBhc3NlcnQgb24gd2hhdCBnZXRzIG1vdW50ZWQuXG5cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHRoaXMgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvciwgJ1NvbWV0aGluZyBpcyBjYWxsaW5nIGEgUmVhY3QgY29tcG9uZW50IGRpcmVjdGx5LiBVc2UgYSBmYWN0b3J5IG9yICcgKyAnSlNYIGluc3RlYWQuIFNlZTogaHR0cHM6Ly9mYi5tZS9yZWFjdC1sZWdhY3lmYWN0b3J5JykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIFdpcmUgdXAgYXV0by1iaW5kaW5nXG4gICAgICBpZiAodGhpcy5fX3JlYWN0QXV0b0JpbmRNYXApIHtcbiAgICAgICAgYmluZEF1dG9CaW5kTWV0aG9kcyh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcblxuICAgICAgdGhpcy5zdGF0ZSA9IG51bGw7XG5cbiAgICAgIC8vIFJlYWN0Q2xhc3NlcyBkb2Vzbid0IGhhdmUgY29uc3RydWN0b3JzLiBJbnN0ZWFkLCB0aGV5IHVzZSB0aGVcbiAgICAgIC8vIGdldEluaXRpYWxTdGF0ZSBhbmQgY29tcG9uZW50V2lsbE1vdW50IG1ldGhvZHMgZm9yIGluaXRpYWxpemF0aW9uLlxuXG4gICAgICB2YXIgaW5pdGlhbFN0YXRlID0gdGhpcy5nZXRJbml0aWFsU3RhdGUgPyB0aGlzLmdldEluaXRpYWxTdGF0ZSgpIDogbnVsbDtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8vIFdlIGFsbG93IGF1dG8tbW9ja3MgdG8gcHJvY2VlZCBhcyBpZiB0aGV5J3JlIHJldHVybmluZyBudWxsLlxuICAgICAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5nZXRJbml0aWFsU3RhdGUuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBiYWQgcHJhY3RpY2UuIENvbnNpZGVyIHdhcm5pbmcgaGVyZSBhbmRcbiAgICAgICAgICAvLyBkZXByZWNhdGluZyB0aGlzIGNvbnZlbmllbmNlLlxuICAgICAgICAgIGluaXRpYWxTdGF0ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICEodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaW5pdGlhbFN0YXRlKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0SW5pdGlhbFN0YXRlKCk6IG11c3QgcmV0dXJuIGFuIG9iamVjdCBvciBudWxsJywgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICAgIH07XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gbmV3IFJlYWN0Q2xhc3NDb21wb25lbnQoKTtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcblxuICAgIGluamVjdGVkTWl4aW5zLmZvckVhY2gobWl4U3BlY0ludG9Db21wb25lbnQuYmluZChudWxsLCBDb25zdHJ1Y3RvcikpO1xuXG4gICAgbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHNwZWMpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgZGVmYXVsdFByb3BzIHByb3BlcnR5IGFmdGVyIGFsbCBtaXhpbnMgaGF2ZSBiZWVuIG1lcmdlZC5cbiAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5kZWZhdWx0UHJvcHMgPSBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMoKTtcbiAgICB9XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gVGhpcyBpcyBhIHRhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSB1c2Ugb2YgdGhlc2UgbWV0aG9kIG5hbWVzIGlzIG9rLFxuICAgICAgLy8gc2luY2UgaXQncyB1c2VkIHdpdGggY3JlYXRlQ2xhc3MuIElmIGl0J3Mgbm90LCB0aGVuIGl0J3MgbGlrZWx5IGFcbiAgICAgIC8vIG1pc3Rha2Ugc28gd2UnbGwgd2FybiB5b3UgdG8gdXNlIHRoZSBzdGF0aWMgcHJvcGVydHksIHByb3BlcnR5XG4gICAgICAvLyBpbml0aWFsaXplciBvciBjb25zdHJ1Y3RvciByZXNwZWN0aXZlbHkuXG4gICAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUpIHtcbiAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEluaXRpYWxTdGF0ZS5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuICAgICAgfVxuICAgIH1cblxuICAgICFDb25zdHJ1Y3Rvci5wcm90b3R5cGUucmVuZGVyID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZUNsYXNzKC4uLik6IENsYXNzIHNwZWNpZmljYXRpb24gbXVzdCBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50U2hvdWxkVXBkYXRlLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFNob3VsZFVwZGF0ZSgpLiBEaWQgeW91IG1lYW4gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk/ICcgKyAnVGhlIG5hbWUgaXMgcGhyYXNlZCBhcyBhIHF1ZXN0aW9uIGJlY2F1c2UgdGhlIGZ1bmN0aW9uIGlzICcgKyAnZXhwZWN0ZWQgdG8gcmV0dXJuIGEgdmFsdWUuJywgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzKCkuIERpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk/Jywgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBSZWR1Y2UgdGltZSBzcGVudCBkb2luZyBsb29rdXBzIGJ5IHNldHRpbmcgdGhlc2Ugb24gdGhlIHByb3RvdHlwZS5cbiAgICBmb3IgKHZhciBtZXRob2ROYW1lIGluIFJlYWN0Q2xhc3NJbnRlcmZhY2UpIHtcbiAgICAgIGlmICghQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9LFxuXG4gIGluamVjdGlvbjoge1xuICAgIGluamVjdE1peGluOiBmdW5jdGlvbiAobWl4aW4pIHtcbiAgICAgIGluamVjdGVkTWl4aW5zLnB1c2gobWl4aW4pO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q2xhc3M7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGhlbHBlcnMgZm9yIHRoZSB1cGRhdGluZyBzdGF0ZSBvZiBhIGNvbXBvbmVudC5cbiAqL1xuZnVuY3Rpb24gUmVhY3RDb21wb25lbnQocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcbiAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgLy8gV2UgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCB1cGRhdGVyIGJ1dCB0aGUgcmVhbCBvbmUgZ2V0cyBpbmplY3RlZCBieSB0aGVcbiAgLy8gcmVuZGVyZXIuXG4gIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG59XG5cblJlYWN0Q29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307XG5cbi8qKlxuICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIEFsd2F5cyB1c2UgdGhpcyB0byBtdXRhdGVcbiAqIHN0YXRlLiBZb3Ugc2hvdWxkIHRyZWF0IGB0aGlzLnN0YXRlYCBhcyBpbW11dGFibGUuXG4gKlxuICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cbiAqIGFjY2Vzc2luZyBgdGhpcy5zdGF0ZWAgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIHRoZSBvbGQgdmFsdWUuXG4gKlxuICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgY2FsbHMgdG8gYHNldFN0YXRlYCB3aWxsIHJ1biBzeW5jaHJvbm91c2x5LFxuICogYXMgdGhleSBtYXkgZXZlbnR1YWxseSBiZSBiYXRjaGVkIHRvZ2V0aGVyLiAgWW91IGNhbiBwcm92aWRlIGFuIG9wdGlvbmFsXG4gKiBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgY2FsbCB0byBzZXRTdGF0ZSBpcyBhY3R1YWxseVxuICogY29tcGxldGVkLlxuICpcbiAqIFdoZW4gYSBmdW5jdGlvbiBpcyBwcm92aWRlZCB0byBzZXRTdGF0ZSwgaXQgd2lsbCBiZSBjYWxsZWQgYXQgc29tZSBwb2ludCBpblxuICogdGhlIGZ1dHVyZSAobm90IHN5bmNocm9ub3VzbHkpLiBJdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSB1cCB0byBkYXRlXG4gKiBjb21wb25lbnQgYXJndW1lbnRzIChzdGF0ZSwgcHJvcHMsIGNvbnRleHQpLiBUaGVzZSB2YWx1ZXMgY2FuIGJlIGRpZmZlcmVudFxuICogZnJvbSB0aGlzLiogYmVjYXVzZSB5b3VyIGZ1bmN0aW9uIG1heSBiZSBjYWxsZWQgYWZ0ZXIgcmVjZWl2ZVByb3BzIGJ1dCBiZWZvcmVcbiAqIHNob3VsZENvbXBvbmVudFVwZGF0ZSwgYW5kIHRoaXMgbmV3IHN0YXRlLCBwcm9wcywgYW5kIGNvbnRleHQgd2lsbCBub3QgeWV0IGJlXG4gKiBhc3NpZ25lZCB0byB0aGlzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIG9yIGZ1bmN0aW9uIHRvXG4gKiAgICAgICAgcHJvZHVjZSBuZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggY3VycmVudCBzdGF0ZS5cbiAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgc3RhdGUgaXMgdXBkYXRlZC5cbiAqIEBmaW5hbFxuICogQHByb3RlY3RlZFxuICovXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAocGFydGlhbFN0YXRlLCBjYWxsYmFjaykge1xuICAhKHR5cGVvZiBwYXJ0aWFsU3RhdGUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBwYXJ0aWFsU3RhdGUgPT09ICdmdW5jdGlvbicgfHwgcGFydGlhbFN0YXRlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3NldFN0YXRlKC4uLik6IHRha2VzIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMgdG8gdXBkYXRlIG9yIGEgJyArICdmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHBhcnRpYWxTdGF0ZSAhPSBudWxsLCAnc2V0U3RhdGUoLi4uKTogWW91IHBhc3NlZCBhbiB1bmRlZmluZWQgb3IgbnVsbCBzdGF0ZSBvYmplY3Q7ICcgKyAnaW5zdGVhZCwgdXNlIGZvcmNlVXBkYXRlKCkuJykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgdGhpcy51cGRhdGVyLmVucXVldWVTZXRTdGF0ZSh0aGlzLCBwYXJ0aWFsU3RhdGUpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuLyoqXG4gKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG4gKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG4gKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cbiAqXG4gKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG4gKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuICpcbiAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgdXBkYXRlIGlzIGNvbXBsZXRlLlxuICogQGZpbmFsXG4gKiBAcHJvdGVjdGVkXG4gKi9cblJlYWN0Q29tcG9uZW50LnByb3RvdHlwZS5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUZvcmNlVXBkYXRlKHRoaXMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZXByZWNhdGVkIEFQSXMuIFRoZXNlIEFQSXMgdXNlZCB0byBleGlzdCBvbiBjbGFzc2ljIFJlYWN0IGNsYXNzZXMgYnV0IHNpbmNlXG4gKiB3ZSB3b3VsZCBsaWtlIHRvIGRlcHJlY2F0ZSB0aGVtLCB3ZSdyZSBub3QgZ29pbmcgdG8gbW92ZSB0aGVtIG92ZXIgdG8gdGhpc1xuICogbW9kZXJuIGJhc2UgY2xhc3MuIEluc3RlYWQsIHdlIGRlZmluZSBhIGdldHRlciB0aGF0IHdhcm5zIGlmIGl0J3MgYWNjZXNzZWQuXG4gKi9cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBkZXByZWNhdGVkQVBJcyA9IHtcbiAgICBnZXRET01Ob2RlOiBbJ2dldERPTU5vZGUnLCAnVXNlIFJlYWN0RE9NLmZpbmRET01Ob2RlKGNvbXBvbmVudCkgaW5zdGVhZC4nXSxcbiAgICBpc01vdW50ZWQ6IFsnaXNNb3VudGVkJywgJ0luc3RlYWQsIG1ha2Ugc3VyZSB0byBjbGVhbiB1cCBzdWJzY3JpcHRpb25zIGFuZCBwZW5kaW5nIHJlcXVlc3RzIGluICcgKyAnY29tcG9uZW50V2lsbFVubW91bnQgdG8gcHJldmVudCBtZW1vcnkgbGVha3MuJ10sXG4gICAgcmVwbGFjZVByb3BzOiBbJ3JlcGxhY2VQcm9wcycsICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiddLFxuICAgIHJlcGxhY2VTdGF0ZTogWydyZXBsYWNlU3RhdGUnLCAnUmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBzZXRTdGF0ZSBpbnN0ZWFkIChzZWUgJyArICdodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzMyMzYpLiddLFxuICAgIHNldFByb3BzOiBbJ3NldFByb3BzJywgJ0luc3RlYWQsIGNhbGwgcmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJ11cbiAgfTtcbiAgdmFyIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbmZvKSB7XG4gICAgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhY3RDb21wb25lbnQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnJXMoLi4uKSBpcyBkZXByZWNhdGVkIGluIHBsYWluIEphdmFTY3JpcHQgUmVhY3QgY2xhc3Nlcy4gJXMnLCBpbmZvWzBdLCBpbmZvWzFdKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGZvciAodmFyIGZuTmFtZSBpbiBkZXByZWNhdGVkQVBJcykge1xuICAgIGlmIChkZXByZWNhdGVkQVBJcy5oYXNPd25Qcm9wZXJ0eShmbk5hbWUpKSB7XG4gICAgICBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcoZm5OYW1lLCBkZXByZWNhdGVkQVBJc1tmbk5hbWVdKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RET01JRE9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbi8qKlxuICogQWJzdHJhY3RzIGF3YXkgYWxsIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIHJlY29uY2lsZXIgdGhhdCByZXF1aXJlcyBrbm93bGVkZ2Ugb2ZcbiAqIHRoZSBicm93c2VyIGNvbnRleHQuIFRPRE86IFRoZXNlIGNhbGxlcnMgc2hvdWxkIGJlIHJlZmFjdG9yZWQgdG8gYXZvaWQgdGhlXG4gKiBuZWVkIGZvciB0aGlzIGluamVjdGlvbi5cbiAqL1xudmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0ge1xuXG4gIHByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6IFJlYWN0RE9NSURPcGVyYXRpb25zLmRhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlcyxcblxuICByZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBSZWFjdERPTUlET3BlcmF0aW9ucy5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQsXG5cbiAgLyoqXG4gICAqIElmIGEgcGFydGljdWxhciBlbnZpcm9ubWVudCByZXF1aXJlcyB0aGF0IHNvbWUgcmVzb3VyY2VzIGJlIGNsZWFuZWQgdXAsXG4gICAqIHNwZWNpZnkgdGhpcyBpbiB0aGUgaW5qZWN0ZWQgTWl4aW4uIEluIHRoZSBET00sIHdlIHdvdWxkIGxpa2VseSB3YW50IHRvXG4gICAqIHB1cmdlIGFueSBjYWNoZWQgbm9kZSBJRCBsb29rdXBzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5tb3VudElERnJvbUVudmlyb25tZW50OiBmdW5jdGlvbiAocm9vdE5vZGVJRCkge1xuICAgIFJlYWN0TW91bnQucHVyZ2VJRChyb290Tm9kZUlEKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudEVudmlyb25tZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBpbmplY3RlZCA9IGZhbHNlO1xuXG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHtcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGVudmlyb25tZW50IGRlcGVuZGVudCBjbGVhbnVwIGhvb2suIChzZXJ2ZXIgdnMuXG4gICAqIGJyb3dzZXIgZXRjKS4gRXhhbXBsZTogQSBicm93c2VyIHN5c3RlbSBjYWNoZXMgRE9NIG5vZGVzIGJhc2VkIG9uIGNvbXBvbmVudFxuICAgKiBJRCBhbmQgbXVzdCByZW1vdmUgdGhhdCBjYWNoZSBlbnRyeSB3aGVuIHRoaXMgaW5zdGFuY2UgaXMgdW5tb3VudGVkLlxuICAgKi9cbiAgdW5tb3VudElERnJvbUVudmlyb25tZW50OiBudWxsLFxuXG4gIC8qKlxuICAgKiBPcHRpb25hbGx5IGluamVjdGFibGUgaG9vayBmb3Igc3dhcHBpbmcgb3V0IG1vdW50IGltYWdlcyBpbiB0aGUgbWlkZGxlIG9mXG4gICAqIHRoZSB0cmVlLlxuICAgKi9cbiAgcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogbnVsbCxcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGhvb2sgZm9yIHByb2Nlc3NpbmcgYSBxdWV1ZSBvZiBjaGlsZCB1cGRhdGVzLiBXaWxsXG4gICAqIGxhdGVyIG1vdmUgaW50byBNdWx0aUNoaWxkQ29tcG9uZW50cy5cbiAgICovXG4gIHByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6IG51bGwsXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgaW5qZWN0RW52aXJvbm1lbnQ6IGZ1bmN0aW9uIChlbnZpcm9ubWVudCkge1xuICAgICAgISFpbmplY3RlZCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudDogaW5qZWN0RW52aXJvbm1lbnQoKSBjYW4gb25seSBiZSBjYWxsZWQgb25jZS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudCA9IGVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudDtcbiAgICAgIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQucmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCA9IGVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ7XG4gICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnByb2Nlc3NDaGlsZHJlblVwZGF0ZXMgPSBlbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzO1xuICAgICAgaW5qZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgUmVhY3RVcGRhdGVRdWV1ZSA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVRdWV1ZScpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpIHtcbiAgdmFyIG93bmVyID0gY29tcG9uZW50Ll9jdXJyZW50RWxlbWVudC5fb3duZXIgfHwgbnVsbDtcbiAgaWYgKG93bmVyKSB7XG4gICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuZnVuY3Rpb24gU3RhdGVsZXNzQ29tcG9uZW50KENvbXBvbmVudCkge31cblN0YXRlbGVzc0NvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgQ29tcG9uZW50ID0gUmVhY3RJbnN0YW5jZU1hcC5nZXQodGhpcykuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gIHJldHVybiBDb21wb25lbnQodGhpcy5wcm9wcywgdGhpcy5jb250ZXh0LCB0aGlzLnVwZGF0ZXIpO1xufTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0gVGhlIExpZmUtQ3ljbGUgb2YgYSBDb21wb3NpdGUgQ29tcG9uZW50IC0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIC0gY29uc3RydWN0b3I6IEluaXRpYWxpemF0aW9uIG9mIHN0YXRlLiBUaGUgaW5zdGFuY2UgaXMgbm93IHJldGFpbmVkLlxuICogICAtIGNvbXBvbmVudFdpbGxNb3VudFxuICogICAtIHJlbmRlclxuICogICAtIFtjaGlsZHJlbidzIGNvbnN0cnVjdG9yc11cbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudFdpbGxNb3VudCBhbmQgcmVuZGVyXVxuICogICAgIC0gW2NoaWxkcmVuJ3MgY29tcG9uZW50RGlkTW91bnRdXG4gKiAgICAgLSBjb21wb25lbnREaWRNb3VudFxuICpcbiAqICAgICAgIFVwZGF0ZSBQaGFzZXM6XG4gKiAgICAgICAtIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG9ubHkgY2FsbGVkIGlmIHBhcmVudCB1cGRhdGVkKVxuICogICAgICAgLSBzaG91bGRDb21wb25lbnRVcGRhdGVcbiAqICAgICAgICAgLSBjb21wb25lbnRXaWxsVXBkYXRlXG4gKiAgICAgICAgICAgLSByZW5kZXJcbiAqICAgICAgICAgICAtIFtjaGlsZHJlbidzIGNvbnN0cnVjdG9ycyBvciByZWNlaXZlIHByb3BzIHBoYXNlc11cbiAqICAgICAgICAgLSBjb21wb25lbnREaWRVcGRhdGVcbiAqXG4gKiAgICAgLSBjb21wb25lbnRXaWxsVW5tb3VudFxuICogICAgIC0gW2NoaWxkcmVuJ3MgY29tcG9uZW50V2lsbFVubW91bnRdXG4gKiAgIC0gW2NoaWxkcmVuIGRlc3Ryb3llZF1cbiAqIC0gKGRlc3Ryb3llZCk6IFRoZSBpbnN0YW5jZSBpcyBub3cgYmxhbmssIHJlbGVhc2VkIGJ5IFJlYWN0IGFuZCByZWFkeSBmb3IgR0MuXG4gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4vKipcbiAqIEFuIGluY3JlbWVudGluZyBJRCBhc3NpZ25lZCB0byBlYWNoIGNvbXBvbmVudCB3aGVuIGl0IGlzIG1vdW50ZWQuIFRoaXMgaXNcbiAqIHVzZWQgdG8gZW5mb3JjZSB0aGUgb3JkZXIgaW4gd2hpY2ggYFJlYWN0VXBkYXRlc2AgdXBkYXRlcyBkaXJ0eSBjb21wb25lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBuZXh0TW91bnRJRCA9IDE7XG5cbi8qKlxuICogQGxlbmRzIHtSZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5wcm90b3R5cGV9XG4gKi9cbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudE1peGluID0ge1xuXG4gIC8qKlxuICAgKiBCYXNlIGNvbnN0cnVjdG9yIGZvciBhbGwgY29tcG9zaXRlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG5cbiAgICAvLyBTZWUgUmVhY3RVcGRhdGVRdWV1ZVxuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuXG4gICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgdGhpcy5fbW91bnRPcmRlciA9IDA7XG4gICAgdGhpcy5fdG9wTGV2ZWxXcmFwcGVyID0gbnVsbDtcblxuICAgIC8vIFNlZSBSZWFjdFVwZGF0ZXMgYW5kIFJlYWN0VXBkYXRlUXVldWUuXG4gICAgdGhpcy5fcGVuZGluZ0NhbGxiYWNrcyA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBjb21wb25lbnQsIHJlbmRlcnMgbWFya3VwLCBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEByZXR1cm4gez9zdHJpbmd9IFJlbmRlcmVkIG1hcmt1cCB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00uXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuX21vdW50T3JkZXIgPSBuZXh0TW91bnRJRCsrO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG5cbiAgICB2YXIgcHVibGljUHJvcHMgPSB0aGlzLl9wcm9jZXNzUHJvcHModGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHMpO1xuICAgIHZhciBwdWJsaWNDb250ZXh0ID0gdGhpcy5fcHJvY2Vzc0NvbnRleHQoY29udGV4dCk7XG5cbiAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIHB1YmxpYyBjbGFzc1xuICAgIHZhciBpbnN0O1xuICAgIHZhciByZW5kZXJlZEVsZW1lbnQ7XG5cbiAgICAvLyBUaGlzIGlzIGEgd2F5IHRvIGRldGVjdCBpZiBDb21wb25lbnQgaXMgYSBzdGF0ZWxlc3MgYXJyb3cgZnVuY3Rpb25cbiAgICAvLyBjb21wb25lbnQsIHdoaWNoIGlzIG5vdCBuZXdhYmxlLiBJdCBtaWdodCBub3QgYmUgMTAwJSByZWxpYWJsZSBidXQgaXNcbiAgICAvLyBzb21ldGhpbmcgd2UgY2FuIGRvIHVudGlsIHdlIHN0YXJ0IGRldGVjdGluZyB0aGF0IENvbXBvbmVudCBleHRlbmRzXG4gICAgLy8gUmVhY3QuQ29tcG9uZW50LiBXZSBhbHJlYWR5IGFzc3VtZSB0aGF0IHR5cGVvZiBDb21wb25lbnQgPT09ICdmdW5jdGlvbicuXG4gICAgdmFyIGNhbkluc3RhbnRpYXRlID0gKCdwcm90b3R5cGUnIGluIENvbXBvbmVudCk7XG5cbiAgICBpZiAoY2FuSW5zdGFudGlhdGUpIHtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGluc3QgPSBuZXcgQ29tcG9uZW50KHB1YmxpY1Byb3BzLCBwdWJsaWNDb250ZXh0LCBSZWFjdFVwZGF0ZVF1ZXVlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHVibGljUHJvcHMsIHB1YmxpY0NvbnRleHQsIFJlYWN0VXBkYXRlUXVldWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2FuSW5zdGFudGlhdGUgfHwgaW5zdCA9PT0gbnVsbCB8fCBpbnN0ID09PSBmYWxzZSB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoaW5zdCkpIHtcbiAgICAgIHJlbmRlcmVkRWxlbWVudCA9IGluc3Q7XG4gICAgICBpbnN0ID0gbmV3IFN0YXRlbGVzc0NvbXBvbmVudChDb21wb25lbnQpO1xuICAgIH1cblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgbGF0ZXIgaW4gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCwgYnV0IGFkZCBhbiBlYXJseVxuICAgICAgLy8gd2FybmluZyBub3cgdG8gaGVscCBkZWJ1Z2dpbmdcbiAgICAgIGlmIChpbnN0LnJlbmRlciA9PSBudWxsKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnJXMoLi4uKTogTm8gYHJlbmRlcmAgbWV0aG9kIGZvdW5kIG9uIHRoZSByZXR1cm5lZCBjb21wb25lbnQgJyArICdpbnN0YW5jZTogeW91IG1heSBoYXZlIGZvcmdvdHRlbiB0byBkZWZpbmUgYHJlbmRlcmAsIHJldHVybmVkICcgKyAnbnVsbC9mYWxzZSBmcm9tIGEgc3RhdGVsZXNzIGNvbXBvbmVudCwgb3IgdHJpZWQgdG8gcmVuZGVyIGFuICcgKyAnZWxlbWVudCB3aG9zZSB0eXBlIGlzIGEgZnVuY3Rpb24gdGhhdCBpc25cXCd0IGEgUmVhY3QgY29tcG9uZW50LicsIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAnQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXZSBzdXBwb3J0IEVTNiBpbmhlcml0aW5nIGZyb20gUmVhY3QuQ29tcG9uZW50LCB0aGUgbW9kdWxlIHBhdHRlcm4sXG4gICAgICAgIC8vIGFuZCBzdGF0ZWxlc3MgY29tcG9uZW50cywgYnV0IG5vdCBFUzYgY2xhc3NlcyB0aGF0IGRvbid0IGV4dGVuZFxuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhDb21wb25lbnQucHJvdG90eXBlICYmIENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCB8fCAhY2FuSW5zdGFudGlhdGUgfHwgIShpbnN0IGluc3RhbmNlb2YgQ29tcG9uZW50KSwgJyVzKC4uLik6IFJlYWN0IGNvbXBvbmVudCBjbGFzc2VzIG11c3QgZXh0ZW5kIFJlYWN0LkNvbXBvbmVudC4nLCBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgJ0NvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZXNlIHNob3VsZCBiZSBzZXQgdXAgaW4gdGhlIGNvbnN0cnVjdG9yLCBidXQgYXMgYSBjb252ZW5pZW5jZSBmb3JcbiAgICAvLyBzaW1wbGVyIGNsYXNzIGFic3RyYWN0aW9ucywgd2Ugc2V0IHRoZW0gdXAgYWZ0ZXIgdGhlIGZhY3QuXG4gICAgaW5zdC5wcm9wcyA9IHB1YmxpY1Byb3BzO1xuICAgIGluc3QuY29udGV4dCA9IHB1YmxpY0NvbnRleHQ7XG4gICAgaW5zdC5yZWZzID0gZW1wdHlPYmplY3Q7XG4gICAgaW5zdC51cGRhdGVyID0gUmVhY3RVcGRhdGVRdWV1ZTtcblxuICAgIHRoaXMuX2luc3RhbmNlID0gaW5zdDtcblxuICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIGZyb20gdGhlIGluc3RhbmNlIGJhY2sgdG8gdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG4gICAgUmVhY3RJbnN0YW5jZU1hcC5zZXQoaW5zdCwgdGhpcyk7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gU2luY2UgcGxhaW4gSlMgY2xhc3NlcyBhcmUgZGVmaW5lZCB3aXRob3V0IGFueSBzcGVjaWFsIGluaXRpYWxpemF0aW9uXG4gICAgICAvLyBsb2dpYywgd2UgY2FuIG5vdCBjYXRjaCBjb21tb24gZXJyb3JzIGVhcmx5LiBUaGVyZWZvcmUsIHdlIGhhdmUgdG9cbiAgICAgIC8vIGNhdGNoIHRoZW0gaGVyZSwgYXQgaW5pdGlhbGl6YXRpb24gdGltZSwgaW5zdGVhZC5cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LmdldEluaXRpYWxTdGF0ZSB8fCBpbnN0LmdldEluaXRpYWxTdGF0ZS5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldEluaXRpYWxTdGF0ZSB3YXMgZGVmaW5lZCBvbiAlcywgYSBwbGFpbiBKYXZhU2NyaXB0IGNsYXNzLiAnICsgJ1RoaXMgaXMgb25seSBzdXBwb3J0ZWQgZm9yIGNsYXNzZXMgY3JlYXRlZCB1c2luZyBSZWFjdC5jcmVhdGVDbGFzcy4gJyArICdEaWQgeW91IG1lYW4gdG8gZGVmaW5lIGEgc3RhdGUgcHJvcGVydHkgaW5zdGVhZD8nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LmdldERlZmF1bHRQcm9wcyB8fCBpbnN0LmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldERlZmF1bHRQcm9wcyB3YXMgZGVmaW5lZCBvbiAlcywgYSBwbGFpbiBKYXZhU2NyaXB0IGNsYXNzLiAnICsgJ1RoaXMgaXMgb25seSBzdXBwb3J0ZWQgZm9yIGNsYXNzZXMgY3JlYXRlZCB1c2luZyBSZWFjdC5jcmVhdGVDbGFzcy4gJyArICdVc2UgYSBzdGF0aWMgcHJvcGVydHkgdG8gZGVmaW5lIGRlZmF1bHRQcm9wcyBpbnN0ZWFkLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QucHJvcFR5cGVzLCAncHJvcFR5cGVzIHdhcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIHByb3BlcnR5IG9uICVzLiBVc2UgYSBzdGF0aWMgJyArICdwcm9wZXJ0eSB0byBkZWZpbmUgcHJvcFR5cGVzIGluc3RlYWQuJywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5jb250ZXh0VHlwZXMsICdjb250ZXh0VHlwZXMgd2FzIGRlZmluZWQgYXMgYW4gaW5zdGFuY2UgcHJvcGVydHkgb24gJXMuIFVzZSBhICcgKyAnc3RhdGljIHByb3BlcnR5IHRvIGRlZmluZSBjb250ZXh0VHlwZXMgaW5zdGVhZC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0LmNvbXBvbmVudFNob3VsZFVwZGF0ZSAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRTaG91bGRVcGRhdGUoKS4gRGlkIHlvdSBtZWFuIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpPyAnICsgJ1RoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyAnICsgJ2V4cGVjdGVkIHRvIHJldHVybiBhIHZhbHVlLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3QuY29tcG9uZW50RGlkVW5tb3VudCAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnREaWRVbm1vdW50KCkuIEJ1dCB0aGVyZSBpcyBubyBzdWNoIGxpZmVjeWNsZSBtZXRob2QuICcgKyAnRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxVbm1vdW50KCk/JywgdGhpcy5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdC5jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzICE9PSAnZnVuY3Rpb24nLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8nLCB0aGlzLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB2YXIgaW5pdGlhbFN0YXRlID0gaW5zdC5zdGF0ZTtcbiAgICBpZiAoaW5pdGlhbFN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGluc3Quc3RhdGUgPSBpbml0aWFsU3RhdGUgPSBudWxsO1xuICAgIH1cbiAgICAhKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGluaXRpYWxTdGF0ZSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLnN0YXRlOiBtdXN0IGJlIHNldCB0byBhbiBvYmplY3Qgb3IgbnVsbCcsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG5cbiAgICBpZiAoaW5zdC5jb21wb25lbnRXaWxsTW91bnQpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbE1vdW50KCk7XG4gICAgICAvLyBXaGVuIG1vdW50aW5nLCBjYWxscyB0byBgc2V0U3RhdGVgIGJ5IGBjb21wb25lbnRXaWxsTW91bnRgIHdpbGwgc2V0XG4gICAgICAvLyBgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWVgIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlLXJlbmRlci5cbiAgICAgIGlmICh0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSkge1xuICAgICAgICBpbnN0LnN0YXRlID0gdGhpcy5fcHJvY2Vzc1BlbmRpbmdTdGF0ZShpbnN0LnByb3BzLCBpbnN0LmNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vdCBhIHN0YXRlbGVzcyBjb21wb25lbnQsIHdlIG5vdyByZW5kZXJcbiAgICBpZiAocmVuZGVyZWRFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlbmRlcmVkRWxlbWVudCA9IHRoaXMuX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5faW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChyZW5kZXJlZEVsZW1lbnQpO1xuXG4gICAgdmFyIG1hcmt1cCA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCwgcm9vdElELCB0cmFuc2FjdGlvbiwgdGhpcy5fcHJvY2Vzc0NoaWxkQ29udGV4dChjb250ZXh0KSk7XG4gICAgaWYgKGluc3QuY29tcG9uZW50RGlkTW91bnQpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoaW5zdC5jb21wb25lbnREaWRNb3VudCwgaW5zdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmt1cDtcbiAgfSxcblxuICAvKipcbiAgICogUmVsZWFzZXMgYW55IHJlc291cmNlcyBhbGxvY2F0ZWQgYnkgYG1vdW50Q29tcG9uZW50YC5cbiAgICpcbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICBpZiAoaW5zdC5jb21wb25lbnRXaWxsVW5tb3VudCkge1xuICAgICAgaW5zdC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuICAgIH1cblxuICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50KTtcbiAgICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IG51bGw7XG4gICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuXG4gICAgLy8gUmVzZXQgcGVuZGluZyBmaWVsZHNcbiAgICAvLyBFdmVuIGlmIHRoaXMgY29tcG9uZW50IGlzIHNjaGVkdWxlZCBmb3IgYW5vdGhlciB1cGRhdGUgaW4gUmVhY3RVcGRhdGVzLFxuICAgIC8vIGl0IHdvdWxkIHN0aWxsIGJlIGlnbm9yZWQgYmVjYXVzZSB0aGVzZSBmaWVsZHMgYXJlIHJlc2V0LlxuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ0NhbGxiYWNrcyA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ0VsZW1lbnQgPSBudWxsO1xuXG4gICAgLy8gVGhlc2UgZmllbGRzIGRvIG5vdCByZWFsbHkgbmVlZCB0byBiZSByZXNldCBzaW5jZSB0aGlzIG9iamVjdCBpcyBub1xuICAgIC8vIGxvbmdlciBhY2Nlc3NpYmxlLlxuICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX3RvcExldmVsV3JhcHBlciA9IG51bGw7XG5cbiAgICAvLyBEZWxldGUgdGhlIHJlZmVyZW5jZSBmcm9tIHRoZSBpbnN0YW5jZSB0byB0aGlzIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG4gICAgLy8gd2hpY2ggYWxsb3cgdGhlIGludGVybmFscyB0byBiZSBwcm9wZXJseSBjbGVhbmVkIHVwIGV2ZW4gaWYgdGhlIHVzZXJcbiAgICAvLyBsZWFrcyBhIHJlZmVyZW5jZSB0byB0aGUgcHVibGljIGluc3RhbmNlLlxuICAgIFJlYWN0SW5zdGFuY2VNYXAucmVtb3ZlKGluc3QpO1xuXG4gICAgLy8gU29tZSBleGlzdGluZyBjb21wb25lbnRzIHJlbHkgb24gaW5zdC5wcm9wcyBldmVuIGFmdGVyIHRoZXkndmUgYmVlblxuICAgIC8vIGRlc3Ryb3llZCAoaW4gZXZlbnQgaGFuZGxlcnMpLlxuICAgIC8vIFRPRE86IGluc3QucHJvcHMgPSBudWxsO1xuICAgIC8vIFRPRE86IGluc3Quc3RhdGUgPSBudWxsO1xuICAgIC8vIFRPRE86IGluc3QuY29udGV4dCA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdGhlIGNvbnRleHQgb2JqZWN0IHRvIG9ubHkgY29udGFpbiBrZXlzIHNwZWNpZmllZCBpblxuICAgKiBgY29udGV4dFR5cGVzYFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX21hc2tDb250ZXh0OiBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBtYXNrZWRDb250ZXh0ID0gbnVsbDtcbiAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICB2YXIgY29udGV4dFR5cGVzID0gQ29tcG9uZW50LmNvbnRleHRUeXBlcztcbiAgICBpZiAoIWNvbnRleHRUeXBlcykge1xuICAgICAgcmV0dXJuIGVtcHR5T2JqZWN0O1xuICAgIH1cbiAgICBtYXNrZWRDb250ZXh0ID0ge307XG4gICAgZm9yICh2YXIgY29udGV4dE5hbWUgaW4gY29udGV4dFR5cGVzKSB7XG4gICAgICBtYXNrZWRDb250ZXh0W2NvbnRleHROYW1lXSA9IGNvbnRleHRbY29udGV4dE5hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gbWFza2VkQ29udGV4dDtcbiAgfSxcblxuICAvKipcbiAgICogRmlsdGVycyB0aGUgY29udGV4dCBvYmplY3QgdG8gb25seSBjb250YWluIGtleXMgc3BlY2lmaWVkIGluXG4gICAqIGBjb250ZXh0VHlwZXNgLCBhbmQgYXNzZXJ0cyB0aGF0IHRoZXkgYXJlIHZhbGlkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NDb250ZXh0OiBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBtYXNrZWRDb250ZXh0ID0gdGhpcy5fbWFza0NvbnRleHQoY29udGV4dCk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgICAgaWYgKENvbXBvbmVudC5jb250ZXh0VHlwZXMpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tQcm9wVHlwZXMoQ29tcG9uZW50LmNvbnRleHRUeXBlcywgbWFza2VkQ29udGV4dCwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hc2tlZENvbnRleHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjdXJyZW50Q29udGV4dFxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcHJvY2Vzc0NoaWxkQ29udGV4dDogZnVuY3Rpb24gKGN1cnJlbnRDb250ZXh0KSB7XG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICB2YXIgY2hpbGRDb250ZXh0ID0gaW5zdC5nZXRDaGlsZENvbnRleHQgJiYgaW5zdC5nZXRDaGlsZENvbnRleHQoKTtcbiAgICBpZiAoY2hpbGRDb250ZXh0KSB7XG4gICAgICAhKHR5cGVvZiBDb21wb25lbnQuY2hpbGRDb250ZXh0VHlwZXMgPT09ICdvYmplY3QnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRDaGlsZENvbnRleHQoKTogY2hpbGRDb250ZXh0VHlwZXMgbXVzdCBiZSBkZWZpbmVkIGluIG9yZGVyIHRvICcgKyAndXNlIGdldENoaWxkQ29udGV4dCgpLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcywgY2hpbGRDb250ZXh0LCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLmNoaWxkQ29udGV4dCk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBuYW1lIGluIGNoaWxkQ29udGV4dCkge1xuICAgICAgICAhKG5hbWUgaW4gQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRDaGlsZENvbnRleHQoKToga2V5IFwiJXNcIiBpcyBub3QgZGVmaW5lZCBpbiBjaGlsZENvbnRleHRUeXBlcy4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXNzaWduKHt9LCBjdXJyZW50Q29udGV4dCwgY2hpbGRDb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRDb250ZXh0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcm9jZXNzZXMgcHJvcHMgYnkgc2V0dGluZyBkZWZhdWx0IHZhbHVlcyBmb3IgdW5zcGVjaWZpZWQgcHJvcHMgYW5kXG4gICAqIGFzc2VydGluZyB0aGF0IHRoZSBwcm9wcyBhcmUgdmFsaWQuIERvZXMgbm90IG11dGF0ZSBpdHMgYXJndW1lbnQ7IHJldHVybnNcbiAgICogYSBuZXcgcHJvcHMgb2JqZWN0IHdpdGggZGVmYXVsdHMgbWVyZ2VkIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV3UHJvcHNcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NQcm9wczogZnVuY3Rpb24gKG5ld1Byb3BzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgICAgaWYgKENvbXBvbmVudC5wcm9wVHlwZXMpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tQcm9wVHlwZXMoQ29tcG9uZW50LnByb3BUeXBlcywgbmV3UHJvcHMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdQcm9wcztcbiAgfSxcblxuICAvKipcbiAgICogQXNzZXJ0IHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcFR5cGVzIE1hcCBvZiBwcm9wIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gZS5nLiBcInByb3BcIiwgXCJjb250ZXh0XCIsIFwiY2hpbGQgY29udGV4dFwiXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY2hlY2tQcm9wVHlwZXM6IGZ1bmN0aW9uIChwcm9wVHlwZXMsIHByb3BzLCBsb2NhdGlvbikge1xuICAgIC8vIFRPRE86IFN0b3AgdmFsaWRhdGluZyBwcm9wIHR5cGVzIGhlcmUgYW5kIG9ubHkgdXNlIHRoZSBlbGVtZW50XG4gICAgLy8gdmFsaWRhdGlvbi5cbiAgICB2YXIgY29tcG9uZW50TmFtZSA9IHRoaXMuZ2V0TmFtZSgpO1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBhbiBpbnZhcmlhbnQgdGhhdCBnZXRzIGNhdWdodC4gSXQncyB0aGUgc2FtZVxuICAgICAgICAgIC8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS5cbiAgICAgICAgICAhKHR5cGVvZiBwcm9wVHlwZXNbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSAnICsgJ2Zyb20gUmVhY3QuUHJvcFR5cGVzLicsIGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICAgIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBudWxsLCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgLy8gV2UgbWF5IHdhbnQgdG8gZXh0ZW5kIHRoaXMgbG9naWMgZm9yIHNpbWlsYXIgZXJyb3JzIGluXG4gICAgICAgICAgLy8gdG9wLWxldmVsIHJlbmRlciBjYWxscywgc28gSSdtIGFic3RyYWN0aW5nIGl0IGF3YXkgaW50b1xuICAgICAgICAgIC8vIGEgZnVuY3Rpb24gdG8gbWluaW1pemUgcmVmYWN0b3JpbmcgaW4gdGhlIGZ1dHVyZVxuICAgICAgICAgIHZhciBhZGRlbmR1bSA9IGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSh0aGlzKTtcblxuICAgICAgICAgIGlmIChsb2NhdGlvbiA9PT0gUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKSB7XG4gICAgICAgICAgICAvLyBQcmVmYWNlIGdpdmVzIHVzIHNvbWV0aGluZyB0byBibGFja2xpc3QgaW4gd2FybmluZyBtb2R1bGVcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIENvbXBvc2l0ZSBwcm9wVHlwZTogJXMlcycsIGVycm9yLm1lc3NhZ2UsIGFkZGVuZHVtKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWlsZWQgQ29udGV4dCBUeXBlczogJXMlcycsIGVycm9yLm1lc3NhZ2UsIGFkZGVuZHVtKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgbmV4dENvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudDtcbiAgICB2YXIgcHJldkNvbnRleHQgPSB0aGlzLl9jb250ZXh0O1xuXG4gICAgdGhpcy5fcGVuZGluZ0VsZW1lbnQgPSBudWxsO1xuXG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQodHJhbnNhY3Rpb24sIHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgcHJldkNvbnRleHQsIG5leHRDb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogSWYgYW55IG9mIGBfcGVuZGluZ0VsZW1lbnRgLCBgX3BlbmRpbmdTdGF0ZVF1ZXVlYCwgb3IgYF9wZW5kaW5nRm9yY2VVcGRhdGVgXG4gICAqIGlzIHNldCwgdXBkYXRlIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwZXJmb3JtVXBkYXRlSWZOZWNlc3Nhcnk6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xuICAgIGlmICh0aGlzLl9wZW5kaW5nRWxlbWVudCAhPSBudWxsKSB7XG4gICAgICBSZWFjdFJlY29uY2lsZXIucmVjZWl2ZUNvbXBvbmVudCh0aGlzLCB0aGlzLl9wZW5kaW5nRWxlbWVudCB8fCB0aGlzLl9jdXJyZW50RWxlbWVudCwgdHJhbnNhY3Rpb24sIHRoaXMuX2NvbnRleHQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSAhPT0gbnVsbCB8fCB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCB0aGlzLl9jdXJyZW50RWxlbWVudCwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRoaXMuX2NvbnRleHQsIHRoaXMuX2NvbnRleHQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUGVyZm9ybSBhbiB1cGRhdGUgdG8gYSBtb3VudGVkIGNvbXBvbmVudC4gVGhlIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgYW5kXG4gICAqIHNob3VsZENvbXBvbmVudFVwZGF0ZSBtZXRob2RzIGFyZSBjYWxsZWQsIHRoZW4gKGFzc3VtaW5nIHRoZSB1cGRhdGUgaXNuJ3RcbiAgICogc2tpcHBlZCkgdGhlIHJlbWFpbmluZyB1cGRhdGUgbGlmZWN5Y2xlIG1ldGhvZHMgYXJlIGNhbGxlZCBhbmQgdGhlIERPTVxuICAgKiByZXByZXNlbnRhdGlvbiBpcyB1cGRhdGVkLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGltcGxlbWVudHMgUmVhY3QncyByZW5kZXJpbmcgYW5kIHJlY29uY2lsaWF0aW9uIGFsZ29yaXRobS5cbiAgICogU29waGlzdGljYXRlZCBjbGllbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IHByZXZQYXJlbnRFbGVtZW50XG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0UGFyZW50RWxlbWVudFxuICAgKiBAaW50ZXJuYWxcbiAgICogQG92ZXJyaWRhYmxlXG4gICAqL1xuICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJldlBhcmVudEVsZW1lbnQsIG5leHRQYXJlbnRFbGVtZW50LCBwcmV2VW5tYXNrZWRDb250ZXh0LCBuZXh0VW5tYXNrZWRDb250ZXh0KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblxuICAgIHZhciBuZXh0Q29udGV4dCA9IHRoaXMuX2NvbnRleHQgPT09IG5leHRVbm1hc2tlZENvbnRleHQgPyBpbnN0LmNvbnRleHQgOiB0aGlzLl9wcm9jZXNzQ29udGV4dChuZXh0VW5tYXNrZWRDb250ZXh0KTtcbiAgICB2YXIgbmV4dFByb3BzO1xuXG4gICAgLy8gRGlzdGluZ3Vpc2ggYmV0d2VlbiBhIHByb3BzIHVwZGF0ZSB2ZXJzdXMgYSBzaW1wbGUgc3RhdGUgdXBkYXRlXG4gICAgaWYgKHByZXZQYXJlbnRFbGVtZW50ID09PSBuZXh0UGFyZW50RWxlbWVudCkge1xuICAgICAgLy8gU2tpcCBjaGVja2luZyBwcm9wIHR5cGVzIGFnYWluIC0tIHdlIGRvbid0IHJlYWQgaW5zdC5wcm9wcyB0byBhdm9pZFxuICAgICAgLy8gd2FybmluZyBmb3IgRE9NIGNvbXBvbmVudCBwcm9wcyBpbiB0aGlzIHVwZ3JhZGVcbiAgICAgIG5leHRQcm9wcyA9IG5leHRQYXJlbnRFbGVtZW50LnByb3BzO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0UHJvcHMgPSB0aGlzLl9wcm9jZXNzUHJvcHMobmV4dFBhcmVudEVsZW1lbnQucHJvcHMpO1xuICAgICAgLy8gQW4gdXBkYXRlIGhlcmUgd2lsbCBzY2hlZHVsZSBhbiB1cGRhdGUgYnV0IGltbWVkaWF0ZWx5IHNldFxuICAgICAgLy8gX3BlbmRpbmdTdGF0ZVF1ZXVlIHdoaWNoIHdpbGwgZW5zdXJlIHRoYXQgYW55IHN0YXRlIHVwZGF0ZXMgZ2V0c1xuICAgICAgLy8gaW1tZWRpYXRlbHkgcmVjb25jaWxlZCBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIHRoZSBuZXh0IGJhdGNoLlxuXG4gICAgICBpZiAoaW5zdC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKSB7XG4gICAgICAgIGluc3QuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbmV4dFN0YXRlID0gdGhpcy5fcHJvY2Vzc1BlbmRpbmdTdGF0ZShuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcblxuICAgIHZhciBzaG91bGRVcGRhdGUgPSB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgfHwgIWluc3Quc2hvdWxkQ29tcG9uZW50VXBkYXRlIHx8IGluc3Quc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCk7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIHNob3VsZFVwZGF0ZSAhPT0gJ3VuZGVmaW5lZCcsICclcy5zaG91bGRDb21wb25lbnRVcGRhdGUoKTogUmV0dXJuZWQgdW5kZWZpbmVkIGluc3RlYWQgb2YgYSAnICsgJ2Jvb2xlYW4gdmFsdWUuIE1ha2Ugc3VyZSB0byByZXR1cm4gdHJ1ZSBvciBmYWxzZS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcbiAgICAgIC8vIFdpbGwgc2V0IGB0aGlzLnByb3BzYCwgYHRoaXMuc3RhdGVgIGFuZCBgdGhpcy5jb250ZXh0YC5cbiAgICAgIHRoaXMuX3BlcmZvcm1Db21wb25lbnRVcGRhdGUobmV4dFBhcmVudEVsZW1lbnQsIG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCwgdHJhbnNhY3Rpb24sIG5leHRVbm1hc2tlZENvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBpdCdzIGRldGVybWluZWQgdGhhdCBhIGNvbXBvbmVudCBzaG91bGQgbm90IHVwZGF0ZSwgd2Ugc3RpbGwgd2FudFxuICAgICAgLy8gdG8gc2V0IHByb3BzIGFuZCBzdGF0ZSBidXQgd2Ugc2hvcnRjdXQgdGhlIHJlc3Qgb2YgdGhlIHVwZGF0ZS5cbiAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dFBhcmVudEVsZW1lbnQ7XG4gICAgICB0aGlzLl9jb250ZXh0ID0gbmV4dFVubWFza2VkQ29udGV4dDtcbiAgICAgIGluc3QucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgICBpbnN0LnN0YXRlID0gbmV4dFN0YXRlO1xuICAgICAgaW5zdC5jb250ZXh0ID0gbmV4dENvbnRleHQ7XG4gICAgfVxuICB9LFxuXG4gIF9wcm9jZXNzUGVuZGluZ1N0YXRlOiBmdW5jdGlvbiAocHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuICAgIHZhciBxdWV1ZSA9IHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlO1xuICAgIHZhciByZXBsYWNlID0gdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZTtcbiAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuXG4gICAgaWYgKCFxdWV1ZSkge1xuICAgICAgcmV0dXJuIGluc3Quc3RhdGU7XG4gICAgfVxuXG4gICAgaWYgKHJlcGxhY2UgJiYgcXVldWUubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gcXVldWVbMF07XG4gICAgfVxuXG4gICAgdmFyIG5leHRTdGF0ZSA9IGFzc2lnbih7fSwgcmVwbGFjZSA/IHF1ZXVlWzBdIDogaW5zdC5zdGF0ZSk7XG4gICAgZm9yICh2YXIgaSA9IHJlcGxhY2UgPyAxIDogMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFydGlhbCA9IHF1ZXVlW2ldO1xuICAgICAgYXNzaWduKG5leHRTdGF0ZSwgdHlwZW9mIHBhcnRpYWwgPT09ICdmdW5jdGlvbicgPyBwYXJ0aWFsLmNhbGwoaW5zdCwgbmV4dFN0YXRlLCBwcm9wcywgY29udGV4dCkgOiBwYXJ0aWFsKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dFN0YXRlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBNZXJnZXMgbmV3IHByb3BzIGFuZCBzdGF0ZSwgbm90aWZpZXMgZGVsZWdhdGUgbWV0aG9kcyBvZiB1cGRhdGUgYW5kXG4gICAqIHBlcmZvcm1zIHVwZGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IE5leHQgZWxlbWVudFxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzIE5leHQgcHVibGljIG9iamVjdCB0byBzZXQgYXMgcHJvcGVydGllcy5cbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGUgTmV4dCBvYmplY3QgdG8gc2V0IGFzIHN0YXRlLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0IE5leHQgcHVibGljIG9iamVjdCB0byBzZXQgYXMgY29udGV4dC5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0gez9vYmplY3R9IHVubWFza2VkQ29udGV4dFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3BlcmZvcm1Db21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgbmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0LCB0cmFuc2FjdGlvbiwgdW5tYXNrZWRDb250ZXh0KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblxuICAgIHZhciBoYXNDb21wb25lbnREaWRVcGRhdGUgPSBCb29sZWFuKGluc3QuY29tcG9uZW50RGlkVXBkYXRlKTtcbiAgICB2YXIgcHJldlByb3BzO1xuICAgIHZhciBwcmV2U3RhdGU7XG4gICAgdmFyIHByZXZDb250ZXh0O1xuICAgIGlmIChoYXNDb21wb25lbnREaWRVcGRhdGUpIHtcbiAgICAgIHByZXZQcm9wcyA9IGluc3QucHJvcHM7XG4gICAgICBwcmV2U3RhdGUgPSBpbnN0LnN0YXRlO1xuICAgICAgcHJldkNvbnRleHQgPSBpbnN0LmNvbnRleHQ7XG4gICAgfVxuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFVwZGF0ZSkge1xuICAgICAgaW5zdC5jb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0RWxlbWVudDtcbiAgICB0aGlzLl9jb250ZXh0ID0gdW5tYXNrZWRDb250ZXh0O1xuICAgIGluc3QucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgaW5zdC5zdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICBpbnN0LmNvbnRleHQgPSBuZXh0Q29udGV4dDtcblxuICAgIHRoaXMuX3VwZGF0ZVJlbmRlcmVkQ29tcG9uZW50KHRyYW5zYWN0aW9uLCB1bm1hc2tlZENvbnRleHQpO1xuXG4gICAgaWYgKGhhc0NvbXBvbmVudERpZFVwZGF0ZSkge1xuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShpbnN0LmNvbXBvbmVudERpZFVwZGF0ZS5iaW5kKGluc3QsIHByZXZQcm9wcywgcHJldlN0YXRlLCBwcmV2Q29udGV4dCksIGluc3QpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ2FsbCB0aGUgY29tcG9uZW50J3MgYHJlbmRlcmAgbWV0aG9kIGFuZCB1cGRhdGUgdGhlIERPTSBhY2NvcmRpbmdseS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF91cGRhdGVSZW5kZXJlZENvbXBvbmVudDogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIHByZXZDb21wb25lbnRJbnN0YW5jZSA9IHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50O1xuICAgIHZhciBwcmV2UmVuZGVyZWRFbGVtZW50ID0gcHJldkNvbXBvbmVudEluc3RhbmNlLl9jdXJyZW50RWxlbWVudDtcbiAgICB2YXIgbmV4dFJlbmRlcmVkRWxlbWVudCA9IHRoaXMuX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCgpO1xuICAgIGlmIChzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2UmVuZGVyZWRFbGVtZW50LCBuZXh0UmVuZGVyZWRFbGVtZW50KSkge1xuICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQocHJldkNvbXBvbmVudEluc3RhbmNlLCBuZXh0UmVuZGVyZWRFbGVtZW50LCB0cmFuc2FjdGlvbiwgdGhpcy5fcHJvY2Vzc0NoaWxkQ29udGV4dChjb250ZXh0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZXNlIHR3byBJRHMgYXJlIGFjdHVhbGx5IHRoZSBzYW1lISBCdXQgbm90aGluZyBzaG91bGQgcmVseSBvbiB0aGF0LlxuICAgICAgdmFyIHRoaXNJRCA9IHRoaXMuX3Jvb3ROb2RlSUQ7XG4gICAgICB2YXIgcHJldkNvbXBvbmVudElEID0gcHJldkNvbXBvbmVudEluc3RhbmNlLl9yb290Tm9kZUlEO1xuICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNvbXBvbmVudEluc3RhbmNlKTtcblxuICAgICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSB0aGlzLl9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KG5leHRSZW5kZXJlZEVsZW1lbnQpO1xuICAgICAgdmFyIG5leHRNYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHRoaXNJRCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgICAgdGhpcy5fcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRChwcmV2Q29tcG9uZW50SUQsIG5leHRNYXJrdXApO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX3JlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IGZ1bmN0aW9uIChwcmV2Q29tcG9uZW50SUQsIG5leHRNYXJrdXApIHtcbiAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKTtcbiAgfSxcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudFdpdGhvdXRPd25lck9yQ29udGV4dDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgdmFyIHJlbmRlcmVkQ29tcG9uZW50ID0gaW5zdC5yZW5kZXIoKTtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gV2UgYWxsb3cgYXV0by1tb2NrcyB0byBwcm9jZWVkIGFzIGlmIHRoZXkncmUgcmV0dXJuaW5nIG51bGwuXG4gICAgICBpZiAodHlwZW9mIHJlbmRlcmVkQ29tcG9uZW50ID09PSAndW5kZWZpbmVkJyAmJiBpbnN0LnJlbmRlci5faXNNb2NrRnVuY3Rpb24pIHtcbiAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBiYWQgcHJhY3RpY2UuIENvbnNpZGVyIHdhcm5pbmcgaGVyZSBhbmRcbiAgICAgICAgLy8gZGVwcmVjYXRpbmcgdGhpcyBjb252ZW5pZW5jZS5cbiAgICAgICAgcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZW5kZXJlZENvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVuZGVyZWRDb21wb25lbnQ7XG4gICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgIHJlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5fcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50V2l0aG91dE93bmVyT3JDb250ZXh0KCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICAhKFxuICAgIC8vIFRPRE86IEFuIGBpc1ZhbGlkTm9kZWAgZnVuY3Rpb24gd291bGQgcHJvYmFibHkgYmUgbW9yZSBhcHByb3ByaWF0ZVxuICAgIHJlbmRlcmVkQ29tcG9uZW50ID09PSBudWxsIHx8IHJlbmRlcmVkQ29tcG9uZW50ID09PSBmYWxzZSB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocmVuZGVyZWRDb21wb25lbnQpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5yZW5kZXIoKTogQSB2YWxpZCBSZWFjdENvbXBvbmVudCBtdXN0IGJlIHJldHVybmVkLiBZb3UgbWF5IGhhdmUgJyArICdyZXR1cm5lZCB1bmRlZmluZWQsIGFuIGFycmF5IG9yIHNvbWUgb3RoZXIgaW52YWxpZCBvYmplY3QuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiByZW5kZXJlZENvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogTGF6aWx5IGFsbG9jYXRlcyB0aGUgcmVmcyBvYmplY3QgYW5kIHN0b3JlcyBgY29tcG9uZW50YCBhcyBgcmVmYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZiBSZWZlcmVuY2UgbmFtZS5cbiAgICogQHBhcmFtIHtjb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gc3RvcmUgYXMgYHJlZmAuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXR0YWNoUmVmOiBmdW5jdGlvbiAocmVmLCBjb21wb25lbnQpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuZ2V0UHVibGljSW5zdGFuY2UoKTtcbiAgICAhKGluc3QgIT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnU3RhdGVsZXNzIGZ1bmN0aW9uIGNvbXBvbmVudHMgY2Fubm90IGhhdmUgcmVmcy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIHB1YmxpY0NvbXBvbmVudEluc3RhbmNlID0gY29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50ICYmIGNvbXBvbmVudC5nZXROYW1lID8gY29tcG9uZW50LmdldE5hbWUoKSA6ICdhIGNvbXBvbmVudCc7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwdWJsaWNDb21wb25lbnRJbnN0YW5jZSAhPSBudWxsLCAnU3RhdGVsZXNzIGZ1bmN0aW9uIGNvbXBvbmVudHMgY2Fubm90IGJlIGdpdmVuIHJlZnMgJyArICcoU2VlIHJlZiBcIiVzXCIgaW4gJXMgY3JlYXRlZCBieSAlcykuICcgKyAnQXR0ZW1wdHMgdG8gYWNjZXNzIHRoaXMgcmVmIHdpbGwgZmFpbC4nLCByZWYsIGNvbXBvbmVudE5hbWUsIHRoaXMuZ2V0TmFtZSgpKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdmFyIHJlZnMgPSBpbnN0LnJlZnMgPT09IGVtcHR5T2JqZWN0ID8gaW5zdC5yZWZzID0ge30gOiBpbnN0LnJlZnM7XG4gICAgcmVmc1tyZWZdID0gcHVibGljQ29tcG9uZW50SW5zdGFuY2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGFjaGVzIGEgcmVmZXJlbmNlIG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSB0byBkZXJlZmVyZW5jZS5cbiAgICogQGZpbmFsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZXRhY2hSZWY6IGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIgcmVmcyA9IHRoaXMuZ2V0UHVibGljSW5zdGFuY2UoKS5yZWZzO1xuICAgIGRlbGV0ZSByZWZzW3JlZl07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGNvbXBvbmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IGl0XG4gICAqIGluIGVycm9yIG1lc3NhZ2VzLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuYW1lIG9yIG51bGwuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0TmFtZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0eXBlID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICB2YXIgY29uc3RydWN0b3IgPSB0aGlzLl9pbnN0YW5jZSAmJiB0aGlzLl9pbnN0YW5jZS5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gdHlwZS5kaXNwbGF5TmFtZSB8fCBjb25zdHJ1Y3RvciAmJiBjb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgY29uc3RydWN0b3IgJiYgY29uc3RydWN0b3IubmFtZSB8fCBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHB1YmxpY2x5IGFjY2Vzc2libGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb21wb25lbnQgLSBpLmUuIHdoYXRcbiAgICogaXMgZXhwb3NlZCBieSByZWZzIGFuZCByZXR1cm5lZCBieSByZW5kZXIuIENhbiBiZSBudWxsIGZvciBzdGF0ZWxlc3NcbiAgICogY29tcG9uZW50cy5cbiAgICpcbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IHRoZSBwdWJsaWMgY29tcG9uZW50IGluc3RhbmNlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldFB1YmxpY0luc3RhbmNlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICBpZiAoaW5zdCBpbnN0YW5jZW9mIFN0YXRlbGVzc0NvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbnN0O1xuICB9LFxuXG4gIC8vIFN0dWJcbiAgX2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ6IG51bGxcblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW4sICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcsIHtcbiAgbW91bnRDb21wb25lbnQ6ICdtb3VudENvbXBvbmVudCcsXG4gIHVwZGF0ZUNvbXBvbmVudDogJ3VwZGF0ZUNvbXBvbmVudCcsXG4gIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQ6ICdfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50J1xufSk7XG5cbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCA9IHtcblxuICBNaXhpbjogUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpblxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEN1cnJlbnRPd25lclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBLZWVwcyB0cmFjayBvZiB0aGUgY3VycmVudCBvd25lci5cbiAqXG4gKiBUaGUgY3VycmVudCBvd25lciBpcyB0aGUgY29tcG9uZW50IHdobyBzaG91bGQgb3duIGFueSBjb21wb25lbnRzIHRoYXQgYXJlXG4gKiBjdXJyZW50bHkgYmVpbmcgY29uc3RydWN0ZWQuXG4gKi9cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqIEB0eXBlIHtSZWFjdENvbXBvbmVudH1cbiAgICovXG4gIGN1cnJlbnQ6IG51bGxcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEN1cnJlbnRPd25lcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01cbiAqL1xuXG4vKiBnbG9iYWxzIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RE9NVGV4dENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RET01UZXh0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3REZWZhdWx0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRJbmplY3Rpb24nKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG52YXIgUmVhY3RWZXJzaW9uID0gcmVxdWlyZSgnLi9SZWFjdFZlcnNpb24nKTtcblxudmFyIGZpbmRET01Ob2RlID0gcmVxdWlyZSgnLi9maW5kRE9NTm9kZScpO1xudmFyIHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyID0gcmVxdWlyZSgnLi9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cblJlYWN0RGVmYXVsdEluamVjdGlvbi5pbmplY3QoKTtcblxudmFyIHJlbmRlciA9IFJlYWN0UGVyZi5tZWFzdXJlKCdSZWFjdCcsICdyZW5kZXInLCBSZWFjdE1vdW50LnJlbmRlcik7XG5cbnZhciBSZWFjdCA9IHtcbiAgZmluZERPTU5vZGU6IGZpbmRET01Ob2RlLFxuICByZW5kZXI6IHJlbmRlcixcbiAgdW5tb3VudENvbXBvbmVudEF0Tm9kZTogUmVhY3RNb3VudC51bm1vdW50Q29tcG9uZW50QXROb2RlLFxuICB2ZXJzaW9uOiBSZWFjdFZlcnNpb24sXG5cbiAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4gIHVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzOiBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMsXG4gIHVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lclxufTtcblxuLy8gSW5qZWN0IHRoZSBydW50aW1lIGludG8gYSBkZXZ0b29scyBnbG9iYWwgaG9vayByZWdhcmRsZXNzIG9mIGJyb3dzZXIuXG4vLyBBbGxvd3MgZm9yIGRlYnVnZ2luZyB3aGVuIHRoZSBob29rIGlzIGluamVjdGVkIG9uIHRoZSBwYWdlLlxuLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cbmlmICh0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmluamVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18uaW5qZWN0KHtcbiAgICBDdXJyZW50T3duZXI6IFJlYWN0Q3VycmVudE93bmVyLFxuICAgIEluc3RhbmNlSGFuZGxlczogUmVhY3RJbnN0YW5jZUhhbmRsZXMsXG4gICAgTW91bnQ6IFJlYWN0TW91bnQsXG4gICAgUmVjb25jaWxlcjogUmVhY3RSZWNvbmNpbGVyLFxuICAgIFRleHRDb21wb25lbnQ6IFJlYWN0RE9NVGV4dENvbXBvbmVudFxuICB9KTtcbn1cblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbiAgaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiB3aW5kb3cudG9wID09PSB3aW5kb3cuc2VsZikge1xuXG4gICAgLy8gRmlyc3QgY2hlY2sgaWYgZGV2dG9vbHMgaXMgbm90IGluc3RhbGxlZFxuICAgIGlmICh0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gSWYgd2UncmUgaW4gQ2hyb21lIG9yIEZpcmVmb3gsIHByb3ZpZGUgYSBkb3dubG9hZCBsaW5rIGlmIG5vdCBpbnN0YWxsZWQuXG4gICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA+IC0xICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRWRnZScpID09PSAtMSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+IC0xKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ0Rvd25sb2FkIHRoZSBSZWFjdCBEZXZUb29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTogJyArICdodHRwczovL2ZiLm1lL3JlYWN0LWRldnRvb2xzJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgaW4gSUU4LCBjaGVjayB0byBzZWUgaWYgd2UgYXJlIGluIGNvbXBhdGliaWxpdHkgbW9kZSBhbmQgcHJvdmlkZVxuICAgIC8vIGluZm9ybWF0aW9uIG9uIHByZXZlbnRpbmcgY29tcGF0aWJpbGl0eSBtb2RlXG4gICAgdmFyIGllQ29tcGF0aWJpbGl0eU1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDwgODtcblxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpZUNvbXBhdGliaWxpdHlNb2RlLCAnSW50ZXJuZXQgRXhwbG9yZXIgaXMgcnVubmluZyBpbiBjb21wYXRpYmlsaXR5IG1vZGU7IHBsZWFzZSBhZGQgdGhlICcgKyAnZm9sbG93aW5nIHRhZyB0byB5b3VyIEhUTUwgdG8gcHJldmVudCB0aGlzIGZyb20gaGFwcGVuaW5nOiAnICsgJzxtZXRhIGh0dHAtZXF1aXY9XCJYLVVBLUNvbXBhdGlibGVcIiBjb250ZW50PVwiSUU9ZWRnZVwiIC8+JykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgZXhwZWN0ZWRGZWF0dXJlcyA9IFtcbiAgICAvLyBzaGltc1xuICAgIEFycmF5LmlzQXJyYXksIEFycmF5LnByb3RvdHlwZS5ldmVyeSwgQXJyYXkucHJvdG90eXBlLmZvckVhY2gsIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLCBBcnJheS5wcm90b3R5cGUubWFwLCBEYXRlLm5vdywgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsIE9iamVjdC5rZXlzLCBTdHJpbmcucHJvdG90eXBlLnNwbGl0LCBTdHJpbmcucHJvdG90eXBlLnRyaW0sXG5cbiAgICAvLyBzaGFtc1xuICAgIE9iamVjdC5jcmVhdGUsIE9iamVjdC5mcmVlemVdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZEZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWV4cGVjdGVkRmVhdHVyZXNbaV0pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignT25lIG9yIG1vcmUgRVM1IHNoaW0vc2hhbXMgZXhwZWN0ZWQgYnkgUmVhY3QgYXJlIG5vdCBhdmFpbGFibGU6ICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLXBvbHlmaWxscycpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01CdXR0b25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBtb3VzZUxpc3RlbmVyTmFtZXMgPSB7XG4gIG9uQ2xpY2s6IHRydWUsXG4gIG9uRG91YmxlQ2xpY2s6IHRydWUsXG4gIG9uTW91c2VEb3duOiB0cnVlLFxuICBvbk1vdXNlTW92ZTogdHJ1ZSxcbiAgb25Nb3VzZVVwOiB0cnVlLFxuXG4gIG9uQ2xpY2tDYXB0dXJlOiB0cnVlLFxuICBvbkRvdWJsZUNsaWNrQ2FwdHVyZTogdHJ1ZSxcbiAgb25Nb3VzZURvd25DYXB0dXJlOiB0cnVlLFxuICBvbk1vdXNlTW92ZUNhcHR1cmU6IHRydWUsXG4gIG9uTW91c2VVcENhcHR1cmU6IHRydWVcbn07XG5cbi8qKlxuICogSW1wbGVtZW50cyBhIDxidXR0b24+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCByZWNlaXZlIG1vdXNlIGV2ZW50c1xuICogd2hlbiBgZGlzYWJsZWRgIGlzIHNldC5cbiAqL1xudmFyIFJlYWN0RE9NQnV0dG9uID0ge1xuICBnZXROYXRpdmVQcm9wczogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgaWYgKCFwcm9wcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH1cblxuICAgIC8vIENvcHkgdGhlIHByb3BzLCBleGNlcHQgdGhlIG1vdXNlIGxpc3RlbmVyc1xuICAgIHZhciBuYXRpdmVQcm9wcyA9IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KGtleSkgJiYgIW1vdXNlTGlzdGVuZXJOYW1lc1trZXldKSB7XG4gICAgICAgIG5hdGl2ZVByb3BzW2tleV0gPSBwcm9wc1trZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUJ1dHRvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01Db21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuLyogZ2xvYmFsIGhhc093blByb3BlcnR5OnRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQXV0b0ZvY3VzVXRpbHMgPSByZXF1aXJlKCcuL0F1dG9Gb2N1c1V0aWxzJyk7XG52YXIgQ1NTUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RET01CdXR0b24gPSByZXF1aXJlKCcuL1JlYWN0RE9NQnV0dG9uJyk7XG52YXIgUmVhY3RET01JbnB1dCA9IHJlcXVpcmUoJy4vUmVhY3RET01JbnB1dCcpO1xudmFyIFJlYWN0RE9NT3B0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERPTU9wdGlvbicpO1xudmFyIFJlYWN0RE9NU2VsZWN0ID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdCcpO1xudmFyIFJlYWN0RE9NVGV4dGFyZWEgPSByZXF1aXJlKCcuL1JlYWN0RE9NVGV4dGFyZWEnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkID0gcmVxdWlyZSgnLi9SZWFjdE11bHRpQ2hpbGQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xudmFyIHNldFRleHRDb250ZW50ID0gcmVxdWlyZSgnLi9zZXRUZXh0Q29udGVudCcpO1xudmFyIHNoYWxsb3dFcXVhbCA9IHJlcXVpcmUoJ2ZianMvbGliL3NoYWxsb3dFcXVhbCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGRlbGV0ZUxpc3RlbmVyID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmRlbGV0ZUxpc3RlbmVyO1xudmFyIGxpc3RlblRvID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmxpc3RlblRvO1xudmFyIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzO1xuXG4vLyBGb3IgcXVpY2tseSBtYXRjaGluZyBjaGlsZHJlbiB0eXBlLCB0byB0ZXN0IGlmIGNhbiBiZSB0cmVhdGVkIGFzIGNvbnRlbnQuXG52YXIgQ09OVEVOVF9UWVBFUyA9IHsgJ3N0cmluZyc6IHRydWUsICdudW1iZXInOiB0cnVlIH07XG5cbnZhciBDSElMRFJFTiA9IGtleU9mKHsgY2hpbGRyZW46IG51bGwgfSk7XG52YXIgU1RZTEUgPSBrZXlPZih7IHN0eWxlOiBudWxsIH0pO1xudmFyIEhUTUwgPSBrZXlPZih7IF9faHRtbDogbnVsbCB9KTtcblxudmFyIEVMRU1FTlRfTk9ERV9UWVBFID0gMTtcblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGludGVybmFsSW5zdGFuY2UpIHtcbiAgaWYgKGludGVybmFsSW5zdGFuY2UpIHtcbiAgICB2YXIgb3duZXIgPSBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgfHwgbnVsbDtcbiAgICBpZiAob3duZXIpIHtcbiAgICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICcgVGhpcyBET00gbm9kZSB3YXMgcmVuZGVyZWQgYnkgYCcgKyBuYW1lICsgJ2AuJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgbGVnYWN5UHJvcHNEZXNjcmlwdG9yO1xuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgbGVnYWN5UHJvcHNEZXNjcmlwdG9yID0ge1xuICAgIHByb3BzOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAucHJvcHMgb2YgYSBET00gbm9kZTsgaW5zdGVhZCwgJyArICdyZWNyZWF0ZSB0aGUgcHJvcHMgYXMgYHJlbmRlcmAgZGlkIG9yaWdpbmFsbHkgb3IgcmVhZCB0aGUgRE9NICcgKyAncHJvcGVydGllcy9hdHRyaWJ1dGVzIGRpcmVjdGx5IGZyb20gdGhpcyBub2RlIChlLmcuLCAnICsgJ3RoaXMucmVmcy5ib3guY2xhc3NOYW1lKS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBsZWdhY3lHZXRET01Ob2RlKCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLmdldERPTU5vZGUoKSBvZiBhIERPTSBub2RlOyAnICsgJ2luc3RlYWQsIHVzZSB0aGUgbm9kZSBkaXJlY3RseS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gbGVnYWN5SXNNb3VudGVkKCkge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5pc01vdW50ZWQoKSBvZiBhIERPTSBub2RlLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiAhIWNvbXBvbmVudDtcbn1cblxuZnVuY3Rpb24gbGVnYWN5U2V0U3RhdGVFdGMoKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAuc2V0U3RhdGUoKSwgLnJlcGxhY2VTdGF0ZSgpLCBvciAnICsgJy5mb3JjZVVwZGF0ZSgpIG9mIGEgRE9NIG5vZGUuIFRoaXMgaXMgYSBuby1vcC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWdhY3lTZXRQcm9wcyhwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFByb3BzKCkgb2YgYSBET00gbm9kZS4gJyArICdJbnN0ZWFkLCBjYWxsIFJlYWN0RE9NLnJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmICghY29tcG9uZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVNldFByb3BzSW50ZXJuYWwoY29tcG9uZW50LCBwYXJ0aWFsUHJvcHMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVDYWxsYmFja0ludGVybmFsKGNvbXBvbmVudCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeVJlcGxhY2VQcm9wcyhwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnJlcGxhY2VQcm9wcygpIG9mIGEgRE9NIG5vZGUuICcgKyAnSW5zdGVhZCwgY2FsbCBSZWFjdERPTS5yZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbChjb21wb25lbnQsIHBhcnRpYWxQcm9wcyk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwoY29tcG9uZW50LCBjYWxsYmFjayk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZnJpZW5kbHlTdHJpbmdpZnkob2JqKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIHJldHVybiAnWycgKyBvYmoubWFwKGZyaWVuZGx5U3RyaW5naWZ5KS5qb2luKCcsICcpICsgJ10nO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICB2YXIga2V5RXNjYXBlZCA9IC9eW2EteiRfXVtcXHckX10qJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSk7XG4gICAgICAgICAgcGFpcnMucHVzaChrZXlFc2NhcGVkICsgJzogJyArIGZyaWVuZGx5U3RyaW5naWZ5KG9ialtrZXldKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAneycgKyBwYWlycy5qb2luKCcsICcpICsgJ30nO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gJ1tmdW5jdGlvbiBvYmplY3RdJztcbiAgfVxuICAvLyBEaWZmZXJzIGZyb20gSlNPTi5zdHJpbmdpZnkgaW4gdGhhdCB1bmRlZmluZWQgYmVjYXVzZXMgdW5kZWZpbmVkIGFuZCB0aGF0XG4gIC8vIGluZiBhbmQgbmFuIGRvbid0IGJlY29tZSBudWxsXG4gIHJldHVybiBTdHJpbmcob2JqKTtcbn1cblxudmFyIHN0eWxlTXV0YXRpb25XYXJuaW5nID0ge307XG5cbmZ1bmN0aW9uIGNoZWNrQW5kV2FybkZvck11dGF0ZWRTdHlsZShzdHlsZTEsIHN0eWxlMiwgY29tcG9uZW50KSB7XG4gIGlmIChzdHlsZTEgPT0gbnVsbCB8fCBzdHlsZTIgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2hhbGxvd0VxdWFsKHN0eWxlMSwgc3R5bGUyKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50Ll90YWc7XG4gIHZhciBvd25lciA9IGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICB2YXIgb3duZXJOYW1lO1xuICBpZiAob3duZXIpIHtcbiAgICBvd25lck5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gIH1cblxuICB2YXIgaGFzaCA9IG93bmVyTmFtZSArICd8JyArIGNvbXBvbmVudE5hbWU7XG5cbiAgaWYgKHN0eWxlTXV0YXRpb25XYXJuaW5nLmhhc093blByb3BlcnR5KGhhc2gpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3R5bGVNdXRhdGlvbldhcm5pbmdbaGFzaF0gPSB0cnVlO1xuXG4gIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYCVzYCB3YXMgcGFzc2VkIGEgc3R5bGUgb2JqZWN0IHRoYXQgaGFzIHByZXZpb3VzbHkgYmVlbiBtdXRhdGVkLiAnICsgJ011dGF0aW5nIGBzdHlsZWAgaXMgZGVwcmVjYXRlZC4gQ29uc2lkZXIgY2xvbmluZyBpdCBiZWZvcmVoYW5kLiBDaGVjayAnICsgJ3RoZSBgcmVuZGVyYCAlcy4gUHJldmlvdXMgc3R5bGU6ICVzLiBNdXRhdGVkIHN0eWxlOiAlcy4nLCBjb21wb25lbnROYW1lLCBvd25lciA/ICdvZiBgJyArIG93bmVyTmFtZSArICdgJyA6ICd1c2luZyA8JyArIGNvbXBvbmVudE5hbWUgKyAnPicsIGZyaWVuZGx5U3RyaW5naWZ5KHN0eWxlMSksIGZyaWVuZGx5U3RyaW5naWZ5KHN0eWxlMikpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnRcbiAqIEBwYXJhbSB7P29iamVjdH0gcHJvcHNcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0VmFsaWRQcm9wcyhjb21wb25lbnQsIHByb3BzKSB7XG4gIGlmICghcHJvcHMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gTm90ZSB0aGUgdXNlIG9mIGA9PWAgd2hpY2ggY2hlY2tzIGZvciBudWxsIG9yIHVuZGVmaW5lZC5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodm9pZEVsZW1lbnRUYWdzW2NvbXBvbmVudC5fdGFnXSkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHJvcHMuY2hpbGRyZW4gPT0gbnVsbCAmJiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PSBudWxsLCAnJXMgaXMgYSB2b2lkIGVsZW1lbnQgdGFnIGFuZCBtdXN0IG5vdCBoYXZlIGBjaGlsZHJlbmAgb3IgJyArICd1c2UgYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4lcycsIGNvbXBvbmVudC5fdGFnLCBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lciA/ICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJyArIGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyLmdldE5hbWUoKSArICcuJyA6ICcnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgaWYgKHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICE9IG51bGwpIHtcbiAgICAhKHByb3BzLmNoaWxkcmVuID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0NhbiBvbmx5IHNldCBvbmUgb2YgYGNoaWxkcmVuYCBvciBgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PT0gJ29iamVjdCcgJiYgSFRNTCBpbiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIGluIHRoZSBmb3JtIGB7X19odG1sOiAuLi59YC4gJyArICdQbGVhc2UgdmlzaXQgaHR0cHM6Ly9mYi5tZS9yZWFjdC1pbnZhcmlhbnQtZGFuZ2Vyb3VzbHktc2V0LWlubmVyLWh0bWwgJyArICdmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5pbm5lckhUTUwgPT0gbnVsbCwgJ0RpcmVjdGx5IHNldHRpbmcgcHJvcGVydHkgYGlubmVySFRNTGAgaXMgbm90IHBlcm1pdHRlZC4gJyArICdGb3IgbW9yZSBpbmZvcm1hdGlvbiwgbG9va3VwIGRvY3VtZW50YXRpb24gb24gYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IHVuZGVmaW5lZDtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghcHJvcHMuY29udGVudEVkaXRhYmxlIHx8IHByb3BzLmNoaWxkcmVuID09IG51bGwsICdBIGNvbXBvbmVudCBpcyBgY29udGVudEVkaXRhYmxlYCBhbmQgY29udGFpbnMgYGNoaWxkcmVuYCBtYW5hZ2VkIGJ5ICcgKyAnUmVhY3QuIEl0IGlzIG5vdyB5b3VyIHJlc3BvbnNpYmlsaXR5IHRvIGd1YXJhbnRlZSB0aGF0IG5vbmUgb2YgJyArICd0aG9zZSBub2RlcyBhcmUgdW5leHBlY3RlZGx5IG1vZGlmaWVkIG9yIGR1cGxpY2F0ZWQuIFRoaXMgaXMgJyArICdwcm9iYWJseSBub3QgaW50ZW50aW9uYWwuJykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgIShwcm9wcy5zdHlsZSA9PSBudWxsIHx8IHR5cGVvZiBwcm9wcy5zdHlsZSA9PT0gJ29iamVjdCcpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RoZSBgc3R5bGVgIHByb3AgZXhwZWN0cyBhIG1hcHBpbmcgZnJvbSBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcywgJyArICdub3QgYSBzdHJpbmcuIEZvciBleGFtcGxlLCBzdHlsZT17e21hcmdpblJpZ2h0OiBzcGFjaW5nICsgXFwnZW1cXCd9fSB3aGVuICcgKyAndXNpbmcgSlNYLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZW5xdWV1ZVB1dExpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lciwgdHJhbnNhY3Rpb24pIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBJRTggaGFzIG5vIEFQSSBmb3IgZXZlbnQgY2FwdHVyaW5nIGFuZCB0aGUgYG9uU2Nyb2xsYCBldmVudCBkb2Vzbid0XG4gICAgLy8gYnViYmxlLlxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHJlZ2lzdHJhdGlvbk5hbWUgIT09ICdvblNjcm9sbCcgfHwgaXNFdmVudFN1cHBvcnRlZCgnc2Nyb2xsJywgdHJ1ZSksICdUaGlzIGJyb3dzZXIgZG9lc25cXCd0IHN1cHBvcnQgdGhlIGBvblNjcm9sbGAgZXZlbnQnKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgY29udGFpbmVyID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG4gIGlmIChjb250YWluZXIpIHtcbiAgICB2YXIgZG9jID0gY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSA/IGNvbnRhaW5lci5vd25lckRvY3VtZW50IDogY29udGFpbmVyO1xuICAgIGxpc3RlblRvKHJlZ2lzdHJhdGlvbk5hbWUsIGRvYyk7XG4gIH1cbiAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShwdXRMaXN0ZW5lciwge1xuICAgIGlkOiBpZCxcbiAgICByZWdpc3RyYXRpb25OYW1lOiByZWdpc3RyYXRpb25OYW1lLFxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxuICB9KTtcbn1cblxuZnVuY3Rpb24gcHV0TGlzdGVuZXIoKSB7XG4gIHZhciBsaXN0ZW5lclRvUHV0ID0gdGhpcztcbiAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnB1dExpc3RlbmVyKGxpc3RlbmVyVG9QdXQuaWQsIGxpc3RlbmVyVG9QdXQucmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXJUb1B1dC5saXN0ZW5lcik7XG59XG5cbi8vIFRoZXJlIGFyZSBzbyBtYW55IG1lZGlhIGV2ZW50cywgaXQgbWFrZXMgc2Vuc2UgdG8ganVzdFxuLy8gbWFpbnRhaW4gYSBsaXN0IHJhdGhlciB0aGFuIGNyZWF0ZSBhIGB0cmFwQnViYmxlZEV2ZW50YCBmb3IgZWFjaFxudmFyIG1lZGlhRXZlbnRzID0ge1xuICB0b3BBYm9ydDogJ2Fib3J0JyxcbiAgdG9wQ2FuUGxheTogJ2NhbnBsYXknLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogJ2NhbnBsYXl0aHJvdWdoJyxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6ICdkdXJhdGlvbmNoYW5nZScsXG4gIHRvcEVtcHRpZWQ6ICdlbXB0aWVkJyxcbiAgdG9wRW5jcnlwdGVkOiAnZW5jcnlwdGVkJyxcbiAgdG9wRW5kZWQ6ICdlbmRlZCcsXG4gIHRvcEVycm9yOiAnZXJyb3InLFxuICB0b3BMb2FkZWREYXRhOiAnbG9hZGVkZGF0YScsXG4gIHRvcExvYWRlZE1ldGFkYXRhOiAnbG9hZGVkbWV0YWRhdGEnLFxuICB0b3BMb2FkU3RhcnQ6ICdsb2Fkc3RhcnQnLFxuICB0b3BQYXVzZTogJ3BhdXNlJyxcbiAgdG9wUGxheTogJ3BsYXknLFxuICB0b3BQbGF5aW5nOiAncGxheWluZycsXG4gIHRvcFByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICB0b3BSYXRlQ2hhbmdlOiAncmF0ZWNoYW5nZScsXG4gIHRvcFNlZWtlZDogJ3NlZWtlZCcsXG4gIHRvcFNlZWtpbmc6ICdzZWVraW5nJyxcbiAgdG9wU3RhbGxlZDogJ3N0YWxsZWQnLFxuICB0b3BTdXNwZW5kOiAnc3VzcGVuZCcsXG4gIHRvcFRpbWVVcGRhdGU6ICd0aW1ldXBkYXRlJyxcbiAgdG9wVm9sdW1lQ2hhbmdlOiAndm9sdW1lY2hhbmdlJyxcbiAgdG9wV2FpdGluZzogJ3dhaXRpbmcnXG59O1xuXG5mdW5jdGlvbiB0cmFwQnViYmxlZEV2ZW50c0xvY2FsKCkge1xuICB2YXIgaW5zdCA9IHRoaXM7XG4gIC8vIElmIGEgY29tcG9uZW50IHJlbmRlcnMgdG8gbnVsbCBvciBpZiBhbm90aGVyIGNvbXBvbmVudCBmYXRhbHMgYW5kIGNhdXNlc1xuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHRyZWUgdG8gYmUgY29ycnVwdGVkLCBgbm9kZWAgaGVyZSBjYW4gYmUgbnVsbC5cbiAgIWluc3QuX3Jvb3ROb2RlSUQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTXVzdCBiZSBtb3VudGVkIHRvIHRyYXAgZXZlbnRzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpbnN0Ll9yb290Tm9kZUlEKTtcbiAgIW5vZGUgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhcEJ1YmJsZWRFdmVudCguLi4pOiBSZXF1aXJlcyBub2RlIHRvIGJlIHJlbmRlcmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICBzd2l0Y2ggKGluc3QuX3RhZykge1xuICAgIGNhc2UgJ2lmcmFtZSc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wTG9hZCwgJ2xvYWQnLCBub2RlKV07XG4gICAgICBicmVhaztcbiAgICBjYXNlICd2aWRlbyc6XG4gICAgY2FzZSAnYXVkaW8nOlxuXG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW107XG4gICAgICAvLyBjcmVhdGUgbGlzdGVuZXIgZm9yIGVhY2ggbWVkaWEgZXZlbnRcbiAgICAgIGZvciAodmFyIGV2ZW50IGluIG1lZGlhRXZlbnRzKSB7XG4gICAgICAgIGlmIChtZWRpYUV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcbiAgICAgICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzLnB1c2goUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlc1tldmVudF0sIG1lZGlhRXZlbnRzW2V2ZW50XSwgbm9kZSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2ltZyc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wRXJyb3IsICdlcnJvcicsIG5vZGUpLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcExvYWQsICdsb2FkJywgbm9kZSldO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wUmVzZXQsICdyZXNldCcsIG5vZGUpLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcFN1Ym1pdCwgJ3N1Ym1pdCcsIG5vZGUpXTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1vdW50UmVhZHlJbnB1dFdyYXBwZXIoKSB7XG4gIFJlYWN0RE9NSW5wdXQubW91bnRSZWFkeVdyYXBwZXIodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHBvc3RVcGRhdGVTZWxlY3RXcmFwcGVyKCkge1xuICBSZWFjdERPTVNlbGVjdC5wb3N0VXBkYXRlV3JhcHBlcih0aGlzKTtcbn1cblxuLy8gRm9yIEhUTUwsIGNlcnRhaW4gdGFncyBzaG91bGQgb21pdCB0aGVpciBjbG9zZSB0YWcuIFdlIGtlZXAgYSB3aGl0ZWxpc3QgZm9yXG4vLyB0aG9zZSBzcGVjaWFsIGNhc2VkIHRhZ3MuXG5cbnZhciBvbWl0dGVkQ2xvc2VUYWdzID0ge1xuICAnYXJlYSc6IHRydWUsXG4gICdiYXNlJzogdHJ1ZSxcbiAgJ2JyJzogdHJ1ZSxcbiAgJ2NvbCc6IHRydWUsXG4gICdlbWJlZCc6IHRydWUsXG4gICdocic6IHRydWUsXG4gICdpbWcnOiB0cnVlLFxuICAnaW5wdXQnOiB0cnVlLFxuICAna2V5Z2VuJzogdHJ1ZSxcbiAgJ2xpbmsnOiB0cnVlLFxuICAnbWV0YSc6IHRydWUsXG4gICdwYXJhbSc6IHRydWUsXG4gICdzb3VyY2UnOiB0cnVlLFxuICAndHJhY2snOiB0cnVlLFxuICAnd2JyJzogdHJ1ZVxufTtcblxuLy8gTk9URTogbWVudWl0ZW0ncyBjbG9zZSB0YWcgc2hvdWxkIGJlIG9taXR0ZWQsIGJ1dCB0aGF0IGNhdXNlcyBwcm9ibGVtcy5cbnZhciBuZXdsaW5lRWF0aW5nVGFncyA9IHtcbiAgJ2xpc3RpbmcnOiB0cnVlLFxuICAncHJlJzogdHJ1ZSxcbiAgJ3RleHRhcmVhJzogdHJ1ZVxufTtcblxuLy8gRm9yIEhUTUwsIGNlcnRhaW4gdGFncyBjYW5ub3QgaGF2ZSBjaGlsZHJlbi4gVGhpcyBoYXMgdGhlIHNhbWUgcHVycG9zZSBhc1xuLy8gYG9taXR0ZWRDbG9zZVRhZ3NgIGV4Y2VwdCB0aGF0IGBtZW51aXRlbWAgc2hvdWxkIHN0aWxsIGhhdmUgaXRzIGNsb3NpbmcgdGFnLlxuXG52YXIgdm9pZEVsZW1lbnRUYWdzID0gYXNzaWduKHtcbiAgJ21lbnVpdGVtJzogdHJ1ZVxufSwgb21pdHRlZENsb3NlVGFncyk7XG5cbi8vIFdlIGFjY2VwdCBhbnkgdGFnIHRvIGJlIHJlbmRlcmVkIGJ1dCBzaW5jZSB0aGlzIGdldHMgaW5qZWN0ZWQgaW50byBhcmJpdHJhcnlcbi8vIEhUTUwsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoYXQgaXQncyBhIHNhZmUgdGFnLlxuLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVxuXG52YXIgVkFMSURfVEFHX1JFR0VYID0gL15bYS16QS1aXVthLXpBLVo6X1xcLlxcLVxcZF0qJC87IC8vIFNpbXBsaWZpZWQgc3Vic2V0XG52YXIgdmFsaWRhdGVkVGFnQ2FjaGUgPSB7fTtcbnZhciBoYXNPd25Qcm9wZXJ0eSA9ICh7fSkuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGFuZ2Vyb3VzVGFnKHRhZykge1xuICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwodmFsaWRhdGVkVGFnQ2FjaGUsIHRhZykpIHtcbiAgICAhVkFMSURfVEFHX1JFR0VYLnRlc3QodGFnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdJbnZhbGlkIHRhZzogJXMnLCB0YWcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YWxpZGF0ZWRUYWdDYWNoZVt0YWddID0gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzQ2hpbGRDb250ZXh0RGV2KGNvbnRleHQsIGluc3QpIHtcbiAgLy8gUGFzcyBkb3duIG91ciB0YWcgbmFtZSB0byBjaGlsZCBjb21wb25lbnRzIGZvciB2YWxpZGF0aW9uIHB1cnBvc2VzXG4gIGNvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICB2YXIgaW5mbyA9IGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldO1xuICBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSA9IHZhbGlkYXRlRE9NTmVzdGluZy51cGRhdGVkQW5jZXN0b3JJbmZvKGluZm8sIGluc3QuX3RhZywgaW5zdCk7XG4gIHJldHVybiBjb250ZXh0O1xufVxuXG5mdW5jdGlvbiBpc0N1c3RvbUNvbXBvbmVudCh0YWdOYW1lLCBwcm9wcykge1xuICByZXR1cm4gdGFnTmFtZS5pbmRleE9mKCctJykgPj0gMCB8fCBwcm9wcy5pcyAhPSBudWxsO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgUmVhY3QgY2xhc3MgdGhhdCBpcyBpZGVtcG90ZW50IGFuZCBjYXBhYmxlIG9mIGNvbnRhaW5pbmcgb3RoZXJcbiAqIFJlYWN0IGNvbXBvbmVudHMuIEl0IGFjY2VwdHMgZXZlbnQgbGlzdGVuZXJzIGFuZCBET00gcHJvcGVydGllcyB0aGF0IGFyZVxuICogdmFsaWQgYWNjb3JkaW5nIHRvIGBET01Qcm9wZXJ0eWAuXG4gKlxuICogIC0gRXZlbnQgbGlzdGVuZXJzOiBgb25DbGlja2AsIGBvbk1vdXNlRG93bmAsIGV0Yy5cbiAqICAtIERPTSBwcm9wZXJ0aWVzOiBgY2xhc3NOYW1lYCwgYG5hbWVgLCBgdGl0bGVgLCBldGMuXG4gKlxuICogVGhlIGBzdHlsZWAgcHJvcGVydHkgZnVuY3Rpb25zIGRpZmZlcmVudGx5IGZyb20gdGhlIERPTSBBUEkuIEl0IGFjY2VwdHMgYW5cbiAqIG9iamVjdCBtYXBwaW5nIG9mIHN0eWxlIHByb3BlcnRpZXMgdG8gdmFsdWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBSZWFjdERPTUNvbXBvbmVudFxuICogQGV4dGVuZHMgUmVhY3RNdWx0aUNoaWxkXG4gKi9cbmZ1bmN0aW9uIFJlYWN0RE9NQ29tcG9uZW50KHRhZykge1xuICB2YWxpZGF0ZURhbmdlcm91c1RhZyh0YWcpO1xuICB0aGlzLl90YWcgPSB0YWcudG9Mb3dlckNhc2UoKTtcbiAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG51bGw7XG4gIHRoaXMuX3ByZXZpb3VzU3R5bGUgPSBudWxsO1xuICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICB0aGlzLl93cmFwcGVyU3RhdGUgPSBudWxsO1xuICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBudWxsO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IG51bGw7XG4gICAgdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldiA9IG51bGw7XG4gIH1cbn1cblxuUmVhY3RET01Db21wb25lbnQuZGlzcGxheU5hbWUgPSAnUmVhY3RET01Db21wb25lbnQnO1xuXG5SZWFjdERPTUNvbXBvbmVudC5NaXhpbiA9IHtcblxuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgcm9vdCB0YWcgbWFya3VwIHRoZW4gcmVjdXJzZXMuIFRoaXMgbWV0aG9kIGhhcyBzaWRlIGVmZmVjdHMgYW5kXG4gICAqIGlzIG5vdCBpZGVtcG90ZW50LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBUaGUgcm9vdCBET00gSUQgZm9yIHRoaXMgbm9kZS5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXB1dGVkIG1hcmt1cC5cbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG5cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgY2FzZSAnaW1nJzpcbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUodHJhcEJ1YmJsZWRFdmVudHNMb2NhbCwgdGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBSZWFjdERPTUlucHV0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01JbnB1dC5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgUmVhY3RET01PcHRpb24ubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgUmVhY3RET01TZWxlY3QubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQgPSBSZWFjdERPTVNlbGVjdC5wcm9jZXNzQ2hpbGRDb250ZXh0KHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0ZXh0YXJlYSc6XG4gICAgICAgIFJlYWN0RE9NVGV4dGFyZWEubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTVRleHRhcmVhLmdldE5hdGl2ZVByb3BzKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgYXNzZXJ0VmFsaWRQcm9wcyh0aGlzLCBwcm9wcyk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSkge1xuICAgICAgICB2YWxpZGF0ZURPTU5lc3RpbmcodGhpcy5fdGFnLCB0aGlzLCBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IGNvbnRleHQ7XG4gICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2O1xuICAgIH1cblxuICAgIHZhciBtb3VudEltYWdlO1xuICAgIGlmICh0cmFuc2FjdGlvbi51c2VDcmVhdGVFbGVtZW50KSB7XG4gICAgICB2YXIgb3duZXJEb2N1bWVudCA9IGNvbnRleHRbUmVhY3RNb3VudC5vd25lckRvY3VtZW50Q29udGV4dEtleV07XG4gICAgICB2YXIgZWwgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5fY3VycmVudEVsZW1lbnQudHlwZSk7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0QXR0cmlidXRlRm9ySUQoZWwsIHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG4gICAgICB0aGlzLl91cGRhdGVET01Qcm9wZXJ0aWVzKHt9LCBwcm9wcywgdHJhbnNhY3Rpb24sIGVsKTtcbiAgICAgIHRoaXMuX2NyZWF0ZUluaXRpYWxDaGlsZHJlbih0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKTtcbiAgICAgIG1vdW50SW1hZ2UgPSBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhZ09wZW4gPSB0aGlzLl9jcmVhdGVPcGVuVGFnTWFya3VwQW5kUHV0TGlzdGVuZXJzKHRyYW5zYWN0aW9uLCBwcm9wcyk7XG4gICAgICB2YXIgdGFnQ29udGVudCA9IHRoaXMuX2NyZWF0ZUNvbnRlbnRNYXJrdXAodHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0KTtcbiAgICAgIGlmICghdGFnQ29udGVudCAmJiBvbWl0dGVkQ2xvc2VUYWdzW3RoaXMuX3RhZ10pIHtcbiAgICAgICAgbW91bnRJbWFnZSA9IHRhZ09wZW4gKyAnLz4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRJbWFnZSA9IHRhZ09wZW4gKyAnPicgKyB0YWdDb250ZW50ICsgJzwvJyArIHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGUgKyAnPic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLl90YWcpIHtcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShtb3VudFJlYWR5SW5wdXRXcmFwcGVyLCB0aGlzKTtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgJ2J1dHRvbic6XG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBpZiAocHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShBdXRvRm9jdXNVdGlscy5mb2N1c0RPTUNvbXBvbmVudCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vdW50SW1hZ2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciB0aGUgb3BlbiB0YWcgYW5kIGFsbCBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBoYXMgc2lkZSBlZmZlY3RzIGJlY2F1c2UgZXZlbnRzIGdldCByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBJdGVyYXRpbmcgb3ZlciBvYmplY3QgcHJvcGVydGllcyBpcyBmYXN0ZXIgdGhhbiBpdGVyYXRpbmcgb3ZlciBhcnJheXMuXG4gICAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vb2JqLXZzLWFyci1pdGVyYXRpb25cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBvZiBvcGVuaW5nIHRhZy5cbiAgICovXG4gIF9jcmVhdGVPcGVuVGFnTWFya3VwQW5kUHV0TGlzdGVuZXJzOiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByb3BzKSB7XG4gICAgdmFyIHJldCA9ICc8JyArIHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cbiAgICBmb3IgKHZhciBwcm9wS2V5IGluIHByb3BzKSB7XG4gICAgICBpZiAoIXByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BLZXldO1xuICAgICAgaWYgKHByb3BWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgcHJvcFZhbHVlLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9wS2V5ID09PSBTVFlMRSkge1xuICAgICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgIC8vIFNlZSBgX3VwZGF0ZURPTVByb3BlcnRpZXNgLiBzdHlsZSBibG9ja1xuICAgICAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlID0gcHJvcFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcFZhbHVlID0gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBhc3NpZ24oe30sIHByb3BzLnN0eWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvcFZhbHVlID0gQ1NTUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvclN0eWxlcyhwcm9wVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXJrdXAgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5fdGFnICE9IG51bGwgJiYgaXNDdXN0b21Db21wb25lbnQodGhpcy5fdGFnLCBwcm9wcykpIHtcbiAgICAgICAgICBpZiAocHJvcEtleSAhPT0gQ0hJTERSRU4pIHtcbiAgICAgICAgICAgIG1hcmt1cCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JDdXN0b21BdHRyaWJ1dGUocHJvcEtleSwgcHJvcFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFya3VwID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvclByb3BlcnR5KHByb3BLZXksIHByb3BWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcmt1cCkge1xuICAgICAgICAgIHJldCArPSAnICcgKyBtYXJrdXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3Igc3RhdGljIHBhZ2VzLCBubyBuZWVkIHRvIHB1dCBSZWFjdCBJRCBhbmQgY2hlY2tzdW0uIFNhdmVzIGxvdHMgb2ZcbiAgICAvLyBieXRlcy5cbiAgICBpZiAodHJhbnNhY3Rpb24ucmVuZGVyVG9TdGF0aWNNYXJrdXApIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgdmFyIG1hcmt1cEZvcklEID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHJldHVybiByZXQgKyAnICcgKyBtYXJrdXBGb3JJRDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIHRoZSBjb250ZW50IGJldHdlZW4gdGhlIHRhZ3MuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7c3RyaW5nfSBDb250ZW50IG1hcmt1cC5cbiAgICovXG4gIF9jcmVhdGVDb250ZW50TWFya3VwOiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIHJldCA9ICcnO1xuXG4gICAgLy8gSW50ZW50aW9uYWwgdXNlIG9mICE9IHRvIGF2b2lkIGNhdGNoaW5nIHplcm8vZmFsc2UuXG4gICAgdmFyIGlubmVySFRNTCA9IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MO1xuICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuICAgICAgaWYgKGlubmVySFRNTC5fX2h0bWwgIT0gbnVsbCkge1xuICAgICAgICByZXQgPSBpbm5lckhUTUwuX19odG1sO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29udGVudFRvVXNlID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgcHJvcHMuY2hpbGRyZW5dID8gcHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmIChjb250ZW50VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPOiBWYWxpZGF0ZSB0aGF0IHRleHQgaXMgYWxsb3dlZCBhcyBhIGNoaWxkIG9mIHRoaXMgbm9kZVxuICAgICAgICByZXQgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIoY29udGVudFRvVXNlKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRyZW5Ub1VzZSAhPSBudWxsKSB7XG4gICAgICAgIHZhciBtb3VudEltYWdlcyA9IHRoaXMubW91bnRDaGlsZHJlbihjaGlsZHJlblRvVXNlLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIHJldCA9IG1vdW50SW1hZ2VzLmpvaW4oJycpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmV3bGluZUVhdGluZ1RhZ3NbdGhpcy5fdGFnXSAmJiByZXQuY2hhckF0KDApID09PSAnXFxuJykge1xuICAgICAgLy8gdGV4dC9odG1sIGlnbm9yZXMgdGhlIGZpcnN0IGNoYXJhY3RlciBpbiB0aGVzZSB0YWdzIGlmIGl0J3MgYSBuZXdsaW5lXG4gICAgICAvLyBQcmVmZXIgdG8gYnJlYWsgYXBwbGljYXRpb24veG1sIG92ZXIgdGV4dC9odG1sIChmb3Igbm93KSBieSBhZGRpbmdcbiAgICAgIC8vIGEgbmV3bGluZSBzcGVjaWZpY2FsbHkgdG8gZ2V0IGVhdGVuIGJ5IHRoZSBwYXJzZXIuIChBbHRlcm5hdGVseSBmb3JcbiAgICAgIC8vIHRleHRhcmVhcywgcmVwbGFjaW5nIFwiXlxcblwiIHdpdGggXCJcXHJcXG5cIiBkb2Vzbid0IGdldCBlYXRlbiwgYW5kIHRoZSBmaXJzdFxuICAgICAgLy8gXFxyIGlzIG5vcm1hbGl6ZWQgb3V0IGJ5IEhUTUxUZXh0QXJlYUVsZW1lbnQjdmFsdWUuKVxuICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbC1wb2x5Z2xvdC8jbmV3bGluZXMtaW4tdGV4dGFyZWEtYW5kLXByZT5cbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI2VsZW1lbnQtcmVzdHJpY3Rpb25zPlxuICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjbmV3bGluZXM+XG4gICAgICAvLyBTZWU6IFBhcnNpbmcgb2YgXCJ0ZXh0YXJlYVwiIFwibGlzdGluZ1wiIGFuZCBcInByZVwiIGVsZW1lbnRzXG4gICAgICAvLyAgZnJvbSA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluYm9keT5cbiAgICAgIHJldHVybiAnXFxuJyArIHJldDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gIH0sXG5cbiAgX2NyZWF0ZUluaXRpYWxDaGlsZHJlbjogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCwgZWwpIHtcbiAgICAvLyBJbnRlbnRpb25hbCB1c2Ugb2YgIT0gdG8gYXZvaWQgY2F0Y2hpbmcgemVyby9mYWxzZS5cbiAgICB2YXIgaW5uZXJIVE1MID0gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw7XG4gICAgaWYgKGlubmVySFRNTCAhPSBudWxsKSB7XG4gICAgICBpZiAoaW5uZXJIVE1MLl9faHRtbCAhPSBudWxsKSB7XG4gICAgICAgIHNldElubmVySFRNTChlbCwgaW5uZXJIVE1MLl9faHRtbCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb250ZW50VG9Vc2UgPSBDT05URU5UX1RZUEVTW3R5cGVvZiBwcm9wcy5jaGlsZHJlbl0gPyBwcm9wcy5jaGlsZHJlbiA6IG51bGw7XG4gICAgICB2YXIgY2hpbGRyZW5Ub1VzZSA9IGNvbnRlbnRUb1VzZSAhPSBudWxsID8gbnVsbCA6IHByb3BzLmNoaWxkcmVuO1xuICAgICAgaWYgKGNvbnRlbnRUb1VzZSAhPSBudWxsKSB7XG4gICAgICAgIC8vIFRPRE86IFZhbGlkYXRlIHRoYXQgdGV4dCBpcyBhbGxvd2VkIGFzIGEgY2hpbGQgb2YgdGhpcyBub2RlXG4gICAgICAgIHNldFRleHRDb250ZW50KGVsLCBjb250ZW50VG9Vc2UpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZHJlblRvVXNlICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG1vdW50SW1hZ2VzID0gdGhpcy5tb3VudENoaWxkcmVuKGNoaWxkcmVuVG9Vc2UsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3VudEltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGVsLmFwcGVuZENoaWxkKG1vdW50SW1hZ2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZXMgYSBuZXh0IGVsZW1lbnQgYW5kIHVwZGF0ZXMgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICovXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudDtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRFbGVtZW50O1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCBwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIGNvbnRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgbmF0aXZlIERPTSBjb21wb25lbnQgYWZ0ZXIgaXQgaGFzIGFscmVhZHkgYmVlbiBhbGxvY2F0ZWQgYW5kXG4gICAqIGF0dGFjaGVkIHRvIHRoZSBET00uIFJlY29uY2lsZXMgdGhlIHJvb3QgRE9NIG5vZGUsIHRoZW4gcmVjdXJzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IHByZXZFbGVtZW50XG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAaW50ZXJuYWxcbiAgICogQG92ZXJyaWRhYmxlXG4gICAqL1xuICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KSB7XG4gICAgdmFyIGxhc3RQcm9wcyA9IHByZXZFbGVtZW50LnByb3BzO1xuICAgIHZhciBuZXh0UHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgUmVhY3RET01JbnB1dC51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTUlucHV0LmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NSW5wdXQuZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvcHRpb24nOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIGxhc3RQcm9wcyA9IFJlYWN0RE9NU2VsZWN0LmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NU2VsZWN0LmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBSZWFjdERPTVRleHRhcmVhLnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gICAgICAgIGxhc3RQcm9wcyA9IFJlYWN0RE9NVGV4dGFyZWEuZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01UZXh0YXJlYS5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gSWYgdGhlIGNvbnRleHQgaXMgcmVmZXJlbmNlLWVxdWFsIHRvIHRoZSBvbGQgb25lLCBwYXNzIGRvd24gdGhlIHNhbWVcbiAgICAgIC8vIHByb2Nlc3NlZCBvYmplY3Qgc28gdGhlIHVwZGF0ZSBiYWlsb3V0IGluIFJlYWN0UmVjb25jaWxlciBiZWhhdmVzXG4gICAgICAvLyBjb3JyZWN0bHkgKGFuZCBpZGVudGljYWxseSBpbiBkZXYgYW5kIHByb2QpLiBTZWUgIzUwMDUuXG4gICAgICBpZiAodGhpcy5fdW5wcm9jZXNzZWRDb250ZXh0RGV2ICE9PSBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXYgPSBwcm9jZXNzQ2hpbGRDb250ZXh0RGV2KGNvbnRleHQsIHRoaXMpO1xuICAgICAgfVxuICAgICAgY29udGV4dCA9IHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXY7XG4gICAgfVxuXG4gICAgYXNzZXJ0VmFsaWRQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgIHRoaXMuX3VwZGF0ZURPTVByb3BlcnRpZXMobGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBudWxsKTtcbiAgICB0aGlzLl91cGRhdGVET01DaGlsZHJlbihsYXN0UHJvcHMsIG5leHRQcm9wcywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXG4gICAgaWYgKCFjYW5EZWZpbmVQcm9wZXJ0eSAmJiB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMpIHtcbiAgICAgIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcy5wcm9wcyA9IG5leHRQcm9wcztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGFnID09PSAnc2VsZWN0Jykge1xuICAgICAgLy8gPHNlbGVjdD4gdmFsdWUgdXBkYXRlIG5lZWRzIHRvIG9jY3VyIGFmdGVyIDxvcHRpb24+IGNoaWxkcmVuXG4gICAgICAvLyByZWNvbmNpbGlhdGlvblxuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShwb3N0VXBkYXRlU2VsZWN0V3JhcHBlciwgdGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZWNvbmNpbGVzIHRoZSBwcm9wZXJ0aWVzIGJ5IGRldGVjdGluZyBkaWZmZXJlbmNlcyBpbiBwcm9wZXJ0eSB2YWx1ZXMgYW5kXG4gICAqIHVwZGF0aW5nIHRoZSBET00gYXMgbmVjZXNzYXJ5LiBUaGlzIGZ1bmN0aW9uIGlzIHByb2JhYmx5IHRoZSBzaW5nbGUgbW9zdFxuICAgKiBjcml0aWNhbCBwYXRoIGZvciBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uXG4gICAqXG4gICAqIFRPRE86IEJlbmNobWFyayB3aGV0aGVyIGNoZWNraW5nIGZvciBjaGFuZ2VkIHZhbHVlcyBpbiBtZW1vcnkgYWN0dWFsbHlcbiAgICogICAgICAgaW1wcm92ZXMgcGVyZm9ybWFuY2UgKGVzcGVjaWFsbHkgc3RhdGljYWxseSBwb3NpdGlvbmVkIGVsZW1lbnRzKS5cbiAgICogVE9ETzogQmVuY2htYXJrIHRoZSBlZmZlY3RzIG9mIHB1dHRpbmcgdGhpcyBhdCB0aGUgdG9wIHNpbmNlIDk5JSBvZiBwcm9wc1xuICAgKiAgICAgICBkbyBub3QgY2hhbmdlIGZvciBhIGdpdmVuIHJlY29uY2lsaWF0aW9uLlxuICAgKiBUT0RPOiBCZW5jaG1hcmsgYXJlYXMgdGhhdCBjYW4gYmUgaW1wcm92ZWQgd2l0aCBjYWNoaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge29iamVjdH0gbGFzdFByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlXG4gICAqL1xuICBfdXBkYXRlRE9NUHJvcGVydGllczogZnVuY3Rpb24gKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbm9kZSkge1xuICAgIHZhciBwcm9wS2V5O1xuICAgIHZhciBzdHlsZU5hbWU7XG4gICAgdmFyIHN0eWxlVXBkYXRlcztcbiAgICBmb3IgKHByb3BLZXkgaW4gbGFzdFByb3BzKSB7XG4gICAgICBpZiAobmV4dFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpIHx8ICFsYXN0UHJvcHMuaGFzT3duUHJvcGVydHkocHJvcEtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgdmFyIGxhc3RTdHlsZSA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5O1xuICAgICAgICBmb3IgKHN0eWxlTmFtZSBpbiBsYXN0U3R5bGUpIHtcbiAgICAgICAgICBpZiAobGFzdFN0eWxlLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IHN0eWxlVXBkYXRlcyB8fCB7fTtcbiAgICAgICAgICAgIHN0eWxlVXBkYXRlc1tzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAocmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMuaGFzT3duUHJvcGVydHkocHJvcEtleSkpIHtcbiAgICAgICAgaWYgKGxhc3RQcm9wc1twcm9wS2V5XSkge1xuICAgICAgICAgIC8vIE9ubHkgY2FsbCBkZWxldGVMaXN0ZW5lciBpZiB0aGVyZSB3YXMgYSBsaXN0ZW5lciBwcmV2aW91c2x5IG9yXG4gICAgICAgICAgLy8gZWxzZSB3aWxsRGVsZXRlTGlzdGVuZXIgZ2V0cyBjYWxsZWQgd2hlbiB0aGVyZSB3YXNuJ3QgYWN0dWFsbHkgYVxuICAgICAgICAgIC8vIGxpc3RlbmVyIChlLmcuLCBvbkNsaWNrPXtudWxsfSlcbiAgICAgICAgICBkZWxldGVMaXN0ZW5lcih0aGlzLl9yb290Tm9kZUlELCBwcm9wS2V5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgcHJvcEtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAocHJvcEtleSBpbiBuZXh0UHJvcHMpIHtcbiAgICAgIHZhciBuZXh0UHJvcCA9IG5leHRQcm9wc1twcm9wS2V5XTtcbiAgICAgIHZhciBsYXN0UHJvcCA9IHByb3BLZXkgPT09IFNUWUxFID8gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgOiBsYXN0UHJvcHNbcHJvcEtleV07XG4gICAgICBpZiAoIW5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCBuZXh0UHJvcCA9PT0gbGFzdFByb3ApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wKSB7XG4gICAgICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGNoZWNrQW5kV2FybkZvck11dGF0ZWRTdHlsZSh0aGlzLl9wcmV2aW91c1N0eWxlQ29weSwgdGhpcy5fcHJldmlvdXNTdHlsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlID0gbmV4dFByb3A7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRQcm9wID0gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBhc3NpZ24oe30sIG5leHRQcm9wKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RQcm9wKSB7XG4gICAgICAgICAgLy8gVW5zZXQgc3R5bGVzIG9uIGBsYXN0UHJvcGAgYnV0IG5vdCBvbiBgbmV4dFByb3BgLlxuICAgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIGxhc3RQcm9wKSB7XG4gICAgICAgICAgICBpZiAobGFzdFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSAmJiAoIW5leHRQcm9wIHx8ICFuZXh0UHJvcC5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSkge1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG4gICAgICAgICAgICAgIHN0eWxlVXBkYXRlc1tzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFVwZGF0ZSBzdHlsZXMgdGhhdCBjaGFuZ2VkIHNpbmNlIGBsYXN0UHJvcGAuXG4gICAgICAgICAgZm9yIChzdHlsZU5hbWUgaW4gbmV4dFByb3ApIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcC5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpICYmIGxhc3RQcm9wW3N0eWxlTmFtZV0gIT09IG5leHRQcm9wW3N0eWxlTmFtZV0pIHtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzID0gc3R5bGVVcGRhdGVzIHx8IHt9O1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9IG5leHRQcm9wW3N0eWxlTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlbGllcyBvbiBgdXBkYXRlU3R5bGVzQnlJRGAgbm90IG11dGF0aW5nIGBzdHlsZVVwZGF0ZXNgLlxuICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IG5leHRQcm9wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcCkge1xuICAgICAgICAgIGVucXVldWVQdXRMaXN0ZW5lcih0aGlzLl9yb290Tm9kZUlELCBwcm9wS2V5LCBuZXh0UHJvcCwgdHJhbnNhY3Rpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKGxhc3RQcm9wKSB7XG4gICAgICAgICAgZGVsZXRlTGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNDdXN0b21Db21wb25lbnQodGhpcy5fdGFnLCBuZXh0UHJvcHMpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BLZXkgPT09IENISUxEUkVOKSB7XG4gICAgICAgICAgbmV4dFByb3AgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvckF0dHJpYnV0ZShub2RlLCBwcm9wS2V5LCBuZXh0UHJvcCk7XG4gICAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LnByb3BlcnRpZXNbcHJvcEtleV0gfHwgRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUocHJvcEtleSkpIHtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSdyZSB1cGRhdGluZyB0byBudWxsIG9yIHVuZGVmaW5lZCwgd2Ugc2hvdWxkIHJlbW92ZSB0aGUgcHJvcGVydHlcbiAgICAgICAgLy8gZnJvbSB0aGUgRE9NIG5vZGUgaW5zdGVhZCBvZiBpbmFkdmVydGFudGx5IHNldHRpbmcgdG8gYSBzdHJpbmcuIFRoaXNcbiAgICAgICAgLy8gYnJpbmdzIHVzIGluIGxpbmUgd2l0aCB0aGUgc2FtZSBiZWhhdmlvciB3ZSBoYXZlIG9uIGluaXRpYWwgcmVuZGVyLlxuICAgICAgICBpZiAobmV4dFByb3AgIT0gbnVsbCkge1xuICAgICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclByb3BlcnR5KG5vZGUsIHByb3BLZXksIG5leHRQcm9wKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3R5bGVVcGRhdGVzKSB7XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgIH1cbiAgICAgIENTU1Byb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclN0eWxlcyhub2RlLCBzdHlsZVVwZGF0ZXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjb25jaWxlcyB0aGUgY2hpbGRyZW4gd2l0aCB0aGUgdmFyaW91cyBwcm9wZXJ0aWVzIHRoYXQgYWZmZWN0IHRoZVxuICAgKiBjaGlsZHJlbiBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbGFzdFByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKi9cbiAgX3VwZGF0ZURPTUNoaWxkcmVuOiBmdW5jdGlvbiAobGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIGxhc3RDb250ZW50ID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgbGFzdFByb3BzLmNoaWxkcmVuXSA/IGxhc3RQcm9wcy5jaGlsZHJlbiA6IG51bGw7XG4gICAgdmFyIG5leHRDb250ZW50ID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgbmV4dFByb3BzLmNoaWxkcmVuXSA/IG5leHRQcm9wcy5jaGlsZHJlbiA6IG51bGw7XG5cbiAgICB2YXIgbGFzdEh0bWwgPSBsYXN0UHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbGFzdFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbDtcbiAgICB2YXIgbmV4dEh0bWwgPSBuZXh0UHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbmV4dFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbDtcblxuICAgIC8vIE5vdGUgdGhlIHVzZSBvZiBgIT1gIHdoaWNoIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWQuXG4gICAgdmFyIGxhc3RDaGlsZHJlbiA9IGxhc3RDb250ZW50ICE9IG51bGwgPyBudWxsIDogbGFzdFByb3BzLmNoaWxkcmVuO1xuICAgIHZhciBuZXh0Q2hpbGRyZW4gPSBuZXh0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IG5leHRQcm9wcy5jaGlsZHJlbjtcblxuICAgIC8vIElmIHdlJ3JlIHN3aXRjaGluZyBmcm9tIGNoaWxkcmVuIHRvIGNvbnRlbnQvaHRtbCBvciB2aWNlIHZlcnNhLCByZW1vdmVcbiAgICAvLyB0aGUgb2xkIGNvbnRlbnRcbiAgICB2YXIgbGFzdEhhc0NvbnRlbnRPckh0bWwgPSBsYXN0Q29udGVudCAhPSBudWxsIHx8IGxhc3RIdG1sICE9IG51bGw7XG4gICAgdmFyIG5leHRIYXNDb250ZW50T3JIdG1sID0gbmV4dENvbnRlbnQgIT0gbnVsbCB8fCBuZXh0SHRtbCAhPSBudWxsO1xuICAgIGlmIChsYXN0Q2hpbGRyZW4gIT0gbnVsbCAmJiBuZXh0Q2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgdGhpcy51cGRhdGVDaGlsZHJlbihudWxsLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfSBlbHNlIGlmIChsYXN0SGFzQ29udGVudE9ySHRtbCAmJiAhbmV4dEhhc0NvbnRlbnRPckh0bWwpIHtcbiAgICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQoJycpO1xuICAgIH1cblxuICAgIGlmIChuZXh0Q29udGVudCAhPSBudWxsKSB7XG4gICAgICBpZiAobGFzdENvbnRlbnQgIT09IG5leHRDb250ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQoJycgKyBuZXh0Q29udGVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChuZXh0SHRtbCAhPSBudWxsKSB7XG4gICAgICBpZiAobGFzdEh0bWwgIT09IG5leHRIdG1sKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTWFya3VwKCcnICsgbmV4dEh0bWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV4dENoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4obmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhbGwgZXZlbnQgcmVnaXN0cmF0aW9ucyBmb3IgdGhpcyBpbnN0YW5jZS4gRG9lcyBub3QgcmVtb3ZlIGZyb21cbiAgICogdGhlIERPTS4gVGhhdCBtdXN0IGJlIGRvbmUgYnkgdGhlIHBhcmVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgc3dpdGNoICh0aGlzLl90YWcpIHtcbiAgICAgIGNhc2UgJ2lmcmFtZSc6XG4gICAgICBjYXNlICdpbWcnOlxuICAgICAgY2FzZSAnZm9ybSc6XG4gICAgICBjYXNlICd2aWRlbyc6XG4gICAgICBjYXNlICdhdWRpbyc6XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl93cmFwcGVyU3RhdGUubGlzdGVuZXJzO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIFJlYWN0RE9NSW5wdXQudW5tb3VudFdyYXBwZXIodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgIGNhc2UgJ2JvZHknOlxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcG9uZW50cyBsaWtlIDxodG1sPiA8aGVhZD4gYW5kIDxib2R5PiBjYW4ndCBiZSByZW1vdmVkIG9yIGFkZGVkXG4gICAgICAgICAqIGVhc2lseSBpbiBhIGNyb3NzLWJyb3dzZXIgd2F5LCBob3dldmVyIGl0J3MgdmFsdWFibGUgdG8gYmUgYWJsZSB0b1xuICAgICAgICAgKiB0YWtlIGFkdmFudGFnZSBvZiBSZWFjdCdzIHJlY29uY2lsaWF0aW9uIGZvciBzdHlsaW5nIGFuZCA8dGl0bGU+XG4gICAgICAgICAqIG1hbmFnZW1lbnQuIFNvIHdlIGp1c3QgZG9jdW1lbnQgaXQgYW5kIHRocm93IGluIGRhbmdlcm91cyBjYXNlcy5cbiAgICAgICAgICovXG4gICAgICAgICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICc8JXM+IHRyaWVkIHRvIHVubW91bnQuIEJlY2F1c2Ugb2YgY3Jvc3MtYnJvd3NlciBxdWlya3MgaXQgaXMgJyArICdpbXBvc3NpYmxlIHRvIHVubW91bnQgc29tZSB0b3AtbGV2ZWwgY29tcG9uZW50cyAoZWcgPGh0bWw+LCAnICsgJzxoZWFkPiwgYW5kIDxib2R5PikgcmVsaWFibHkgYW5kIGVmZmljaWVudGx5LiBUbyBmaXggdGhpcywgaGF2ZSBhICcgKyAnc2luZ2xlIHRvcC1sZXZlbCBjb21wb25lbnQgdGhhdCBuZXZlciB1bm1vdW50cyByZW5kZXIgdGhlc2UgJyArICdlbGVtZW50cy4nLCB0aGlzLl90YWcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy51bm1vdW50Q2hpbGRyZW4oKTtcbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZGVsZXRlQWxsTGlzdGVuZXJzKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudCh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSBudWxsO1xuICAgIGlmICh0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzO1xuICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IG51bGw7XG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICBnZXRQdWJsaWNJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcblxuICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IHRoaXM7XG4gICAgICBub2RlLmdldERPTU5vZGUgPSBsZWdhY3lHZXRET01Ob2RlO1xuICAgICAgbm9kZS5pc01vdW50ZWQgPSBsZWdhY3lJc01vdW50ZWQ7XG4gICAgICBub2RlLnNldFN0YXRlID0gbGVnYWN5U2V0U3RhdGVFdGM7XG4gICAgICBub2RlLnJlcGxhY2VTdGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5mb3JjZVVwZGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5zZXRQcm9wcyA9IGxlZ2FjeVNldFByb3BzO1xuICAgICAgbm9kZS5yZXBsYWNlUHJvcHMgPSBsZWdhY3lSZXBsYWNlUHJvcHM7XG5cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIGxlZ2FjeVByb3BzRGVzY3JpcHRvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdXBkYXRlQ29tcG9uZW50IHdpbGwgdXBkYXRlIHRoaXMgcHJvcGVydHkgb24gc3Vic2VxdWVudCByZW5kZXJzXG4gICAgICAgICAgbm9kZS5wcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1cGRhdGVDb21wb25lbnQgd2lsbCB1cGRhdGUgdGhpcyBwcm9wZXJ0eSBvbiBzdWJzZXF1ZW50IHJlbmRlcnNcbiAgICAgICAgbm9kZS5wcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzO1xuICB9XG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdERPTUNvbXBvbmVudCwgJ1JlYWN0RE9NQ29tcG9uZW50Jywge1xuICBtb3VudENvbXBvbmVudDogJ21vdW50Q29tcG9uZW50JyxcbiAgdXBkYXRlQ29tcG9uZW50OiAndXBkYXRlQ29tcG9uZW50J1xufSk7XG5cbmFzc2lnbihSZWFjdERPTUNvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0RE9NQ29tcG9uZW50Lk1peGluLCBSZWFjdE11bHRpQ2hpbGQuTWl4aW4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NQ29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZhY3Rvcmllc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0RWxlbWVudFZhbGlkYXRvciA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50VmFsaWRhdG9yJyk7XG5cbnZhciBtYXBPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9tYXBPYmplY3QnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBmYWN0b3J5IHRoYXQgY3JlYXRlcyBIVE1MIHRhZyBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRhZyBuYW1lIChlLmcuIGBkaXZgKS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURPTUZhY3RvcnkodGFnKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcmV0dXJuIFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVGYWN0b3J5KHRhZyk7XG4gIH1cbiAgcmV0dXJuIFJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5KHRhZyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcHBpbmcgZnJvbSBzdXBwb3J0ZWQgSFRNTCB0YWdzIHRvIGBSZWFjdERPTUNvbXBvbmVudGAgY2xhc3Nlcy5cbiAqIFRoaXMgaXMgYWxzbyBhY2Nlc3NpYmxlIHZpYSBgUmVhY3QuRE9NYC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbnZhciBSZWFjdERPTUZhY3RvcmllcyA9IG1hcE9iamVjdCh7XG4gIGE6ICdhJyxcbiAgYWJicjogJ2FiYnInLFxuICBhZGRyZXNzOiAnYWRkcmVzcycsXG4gIGFyZWE6ICdhcmVhJyxcbiAgYXJ0aWNsZTogJ2FydGljbGUnLFxuICBhc2lkZTogJ2FzaWRlJyxcbiAgYXVkaW86ICdhdWRpbycsXG4gIGI6ICdiJyxcbiAgYmFzZTogJ2Jhc2UnLFxuICBiZGk6ICdiZGknLFxuICBiZG86ICdiZG8nLFxuICBiaWc6ICdiaWcnLFxuICBibG9ja3F1b3RlOiAnYmxvY2txdW90ZScsXG4gIGJvZHk6ICdib2R5JyxcbiAgYnI6ICdicicsXG4gIGJ1dHRvbjogJ2J1dHRvbicsXG4gIGNhbnZhczogJ2NhbnZhcycsXG4gIGNhcHRpb246ICdjYXB0aW9uJyxcbiAgY2l0ZTogJ2NpdGUnLFxuICBjb2RlOiAnY29kZScsXG4gIGNvbDogJ2NvbCcsXG4gIGNvbGdyb3VwOiAnY29sZ3JvdXAnLFxuICBkYXRhOiAnZGF0YScsXG4gIGRhdGFsaXN0OiAnZGF0YWxpc3QnLFxuICBkZDogJ2RkJyxcbiAgZGVsOiAnZGVsJyxcbiAgZGV0YWlsczogJ2RldGFpbHMnLFxuICBkZm46ICdkZm4nLFxuICBkaWFsb2c6ICdkaWFsb2cnLFxuICBkaXY6ICdkaXYnLFxuICBkbDogJ2RsJyxcbiAgZHQ6ICdkdCcsXG4gIGVtOiAnZW0nLFxuICBlbWJlZDogJ2VtYmVkJyxcbiAgZmllbGRzZXQ6ICdmaWVsZHNldCcsXG4gIGZpZ2NhcHRpb246ICdmaWdjYXB0aW9uJyxcbiAgZmlndXJlOiAnZmlndXJlJyxcbiAgZm9vdGVyOiAnZm9vdGVyJyxcbiAgZm9ybTogJ2Zvcm0nLFxuICBoMTogJ2gxJyxcbiAgaDI6ICdoMicsXG4gIGgzOiAnaDMnLFxuICBoNDogJ2g0JyxcbiAgaDU6ICdoNScsXG4gIGg2OiAnaDYnLFxuICBoZWFkOiAnaGVhZCcsXG4gIGhlYWRlcjogJ2hlYWRlcicsXG4gIGhncm91cDogJ2hncm91cCcsXG4gIGhyOiAnaHInLFxuICBodG1sOiAnaHRtbCcsXG4gIGk6ICdpJyxcbiAgaWZyYW1lOiAnaWZyYW1lJyxcbiAgaW1nOiAnaW1nJyxcbiAgaW5wdXQ6ICdpbnB1dCcsXG4gIGluczogJ2lucycsXG4gIGtiZDogJ2tiZCcsXG4gIGtleWdlbjogJ2tleWdlbicsXG4gIGxhYmVsOiAnbGFiZWwnLFxuICBsZWdlbmQ6ICdsZWdlbmQnLFxuICBsaTogJ2xpJyxcbiAgbGluazogJ2xpbmsnLFxuICBtYWluOiAnbWFpbicsXG4gIG1hcDogJ21hcCcsXG4gIG1hcms6ICdtYXJrJyxcbiAgbWVudTogJ21lbnUnLFxuICBtZW51aXRlbTogJ21lbnVpdGVtJyxcbiAgbWV0YTogJ21ldGEnLFxuICBtZXRlcjogJ21ldGVyJyxcbiAgbmF2OiAnbmF2JyxcbiAgbm9zY3JpcHQ6ICdub3NjcmlwdCcsXG4gIG9iamVjdDogJ29iamVjdCcsXG4gIG9sOiAnb2wnLFxuICBvcHRncm91cDogJ29wdGdyb3VwJyxcbiAgb3B0aW9uOiAnb3B0aW9uJyxcbiAgb3V0cHV0OiAnb3V0cHV0JyxcbiAgcDogJ3AnLFxuICBwYXJhbTogJ3BhcmFtJyxcbiAgcGljdHVyZTogJ3BpY3R1cmUnLFxuICBwcmU6ICdwcmUnLFxuICBwcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgcTogJ3EnLFxuICBycDogJ3JwJyxcbiAgcnQ6ICdydCcsXG4gIHJ1Ynk6ICdydWJ5JyxcbiAgczogJ3MnLFxuICBzYW1wOiAnc2FtcCcsXG4gIHNjcmlwdDogJ3NjcmlwdCcsXG4gIHNlY3Rpb246ICdzZWN0aW9uJyxcbiAgc2VsZWN0OiAnc2VsZWN0JyxcbiAgc21hbGw6ICdzbWFsbCcsXG4gIHNvdXJjZTogJ3NvdXJjZScsXG4gIHNwYW46ICdzcGFuJyxcbiAgc3Ryb25nOiAnc3Ryb25nJyxcbiAgc3R5bGU6ICdzdHlsZScsXG4gIHN1YjogJ3N1YicsXG4gIHN1bW1hcnk6ICdzdW1tYXJ5JyxcbiAgc3VwOiAnc3VwJyxcbiAgdGFibGU6ICd0YWJsZScsXG4gIHRib2R5OiAndGJvZHknLFxuICB0ZDogJ3RkJyxcbiAgdGV4dGFyZWE6ICd0ZXh0YXJlYScsXG4gIHRmb290OiAndGZvb3QnLFxuICB0aDogJ3RoJyxcbiAgdGhlYWQ6ICd0aGVhZCcsXG4gIHRpbWU6ICd0aW1lJyxcbiAgdGl0bGU6ICd0aXRsZScsXG4gIHRyOiAndHInLFxuICB0cmFjazogJ3RyYWNrJyxcbiAgdTogJ3UnLFxuICB1bDogJ3VsJyxcbiAgJ3Zhcic6ICd2YXInLFxuICB2aWRlbzogJ3ZpZGVvJyxcbiAgd2JyOiAnd2JyJyxcblxuICAvLyBTVkdcbiAgY2lyY2xlOiAnY2lyY2xlJyxcbiAgY2xpcFBhdGg6ICdjbGlwUGF0aCcsXG4gIGRlZnM6ICdkZWZzJyxcbiAgZWxsaXBzZTogJ2VsbGlwc2UnLFxuICBnOiAnZycsXG4gIGltYWdlOiAnaW1hZ2UnLFxuICBsaW5lOiAnbGluZScsXG4gIGxpbmVhckdyYWRpZW50OiAnbGluZWFyR3JhZGllbnQnLFxuICBtYXNrOiAnbWFzaycsXG4gIHBhdGg6ICdwYXRoJyxcbiAgcGF0dGVybjogJ3BhdHRlcm4nLFxuICBwb2x5Z29uOiAncG9seWdvbicsXG4gIHBvbHlsaW5lOiAncG9seWxpbmUnLFxuICByYWRpYWxHcmFkaWVudDogJ3JhZGlhbEdyYWRpZW50JyxcbiAgcmVjdDogJ3JlY3QnLFxuICBzdG9wOiAnc3RvcCcsXG4gIHN2ZzogJ3N2ZycsXG4gIHRleHQ6ICd0ZXh0JyxcbiAgdHNwYW46ICd0c3BhbidcblxufSwgY3JlYXRlRE9NRmFjdG9yeSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01GYWN0b3JpZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NRmVhdHVyZUZsYWdzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01GZWF0dXJlRmxhZ3MgPSB7XG4gIHVzZUNyZWF0ZUVsZW1lbnQ6IGZhbHNlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NRmVhdHVyZUZsYWdzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUlET3BlcmF0aW9uc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01DaGlsZHJlbk9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTUNoaWxkcmVuT3BlcmF0aW9ucycpO1xudmFyIERPTVByb3BlcnR5T3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHlPcGVyYXRpb25zJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBFcnJvcnMgZm9yIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgbm90IGJlIHVwZGF0ZWQgd2l0aCBgdXBkYXRlUHJvcGVydHlCeUlEKClgLlxuICpcbiAqIEB0eXBlIHtvYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlMgPSB7XG4gIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiAnYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIHNldCB1c2luZyBgdXBkYXRlSW5uZXJIVE1MQnlJRCgpYC4nLFxuICBzdHlsZTogJ2BzdHlsZWAgbXVzdCBiZSBzZXQgdXNpbmcgYHVwZGF0ZVN0eWxlc0J5SUQoKWAuJ1xufTtcblxuLyoqXG4gKiBPcGVyYXRpb25zIHVzZWQgdG8gcHJvY2VzcyB1cGRhdGVzIHRvIERPTSBub2Rlcy5cbiAqL1xudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0ge1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgRE9NIG5vZGUgd2l0aCBuZXcgcHJvcGVydHkgdmFsdWVzLiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgdG9cbiAgICogdXBkYXRlIERPTSBwcm9wZXJ0aWVzIGluIGBET01Qcm9wZXJ0eWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgbm9kZSB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgdmFsaWQgcHJvcGVydHkgbmFtZSwgc2VlIGBET01Qcm9wZXJ0eWAuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgTmV3IHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB1cGRhdGVQcm9wZXJ0eUJ5SUQ6IGZ1bmN0aW9uIChpZCwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpZCk7XG4gICAgISFJTlZBTElEX1BST1BFUlRZX0VSUk9SUy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGVQcm9wZXJ0eUJ5SUQoLi4uKTogJXMnLCBJTlZBTElEX1BST1BFUlRZX0VSUk9SU1tuYW1lXSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gSWYgd2UncmUgdXBkYXRpbmcgdG8gbnVsbCBvciB1bmRlZmluZWQsIHdlIHNob3VsZCByZW1vdmUgdGhlIHByb3BlcnR5XG4gICAgLy8gZnJvbSB0aGUgRE9NIG5vZGUgaW5zdGVhZCBvZiBpbmFkdmVydGFudGx5IHNldHRpbmcgdG8gYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBicmluZ3MgdXMgaW4gbGluZSB3aXRoIHRoZSBzYW1lIGJlaGF2aW9yIHdlIGhhdmUgb24gaW5pdGlhbCByZW5kZXIuXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclByb3BlcnR5KG5vZGUsIG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgbmFtZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhIERPTSBub2RlIHRoYXQgZXhpc3RzIGluIHRoZSBkb2N1bWVudCB3aXRoIG1hcmt1cC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIGNoaWxkIHRvIGJlIHJlcGxhY2VkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIERhbmdlcm91cyBtYXJrdXAgdG8gaW5qZWN0IGluIHBsYWNlIG9mIGNoaWxkLlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHNlZSB7RGFuZ2VyLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwfVxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBmdW5jdGlvbiAoaWQsIG1hcmt1cCkge1xuICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKGlkKTtcbiAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMuZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAobm9kZSwgbWFya3VwKTtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGJ5IHByb2Nlc3NpbmcgYSBzZXJpZXMgb2YgdXBkYXRlcy5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxvYmplY3Q+fSB1cGRhdGVzIExpc3Qgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGRhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogZnVuY3Rpb24gKHVwZGF0ZXMsIG1hcmt1cCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdXBkYXRlc1tpXS5wYXJlbnROb2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHVwZGF0ZXNbaV0ucGFyZW50SUQpO1xuICAgIH1cbiAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMucHJvY2Vzc1VwZGF0ZXModXBkYXRlcywgbWFya3VwKTtcbiAgfVxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKFJlYWN0RE9NSURPcGVyYXRpb25zLCAnUmVhY3RET01JRE9wZXJhdGlvbnMnLCB7XG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCcsXG4gIGRhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogJ2Rhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlcydcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NSURPcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUlucHV0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01JRE9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0RE9NSURPcGVyYXRpb25zJyk7XG52YXIgTGlua2VkVmFsdWVVdGlscyA9IHJlcXVpcmUoJy4vTGlua2VkVmFsdWVVdGlscycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBpbnN0YW5jZXNCeVJlYWN0SUQgPSB7fTtcblxuZnVuY3Rpb24gZm9yY2VVcGRhdGVJZk1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEKSB7XG4gICAgLy8gRE9NIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkOyB1cGRhdGVcbiAgICBSZWFjdERPTUlucHV0LnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGFuIDxpbnB1dD4gbmF0aXZlIGNvbXBvbmVudCB0aGF0IGFsbG93cyBzZXR0aW5nIHRoZXNlIG9wdGlvbmFsXG4gKiBwcm9wczogYGNoZWNrZWRgLCBgdmFsdWVgLCBgZGVmYXVsdENoZWNrZWRgLCBhbmQgYGRlZmF1bHRWYWx1ZWAuXG4gKlxuICogSWYgYGNoZWNrZWRgIG9yIGB2YWx1ZWAgYXJlIG5vdCBzdXBwbGllZCAob3IgbnVsbC91bmRlZmluZWQpLCB1c2VyIGFjdGlvbnNcbiAqIHRoYXQgYWZmZWN0IHRoZSBjaGVja2VkIHN0YXRlIG9yIHZhbHVlIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIElmIHRoZXkgYXJlIHN1cHBsaWVkIChhbmQgbm90IG51bGwvdW5kZWZpbmVkKSwgdGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbCBub3RcbiAqIHRyaWdnZXIgdXBkYXRlcyB0byB0aGUgZWxlbWVudC4gSW5zdGVhZCwgdGhlIHByb3BzIG11c3QgY2hhbmdlIGluIG9yZGVyIGZvclxuICogdGhlIHJlbmRlcmVkIGVsZW1lbnQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiBUaGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIGJlIGluaXRpYWxpemVkIGFzIHVuY2hlY2tlZCAob3IgYGRlZmF1bHRDaGVja2VkYClcbiAqIHdpdGggYW4gZW1wdHkgdmFsdWUgKG9yIGBkZWZhdWx0VmFsdWVgKS5cbiAqXG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTIvV0QtaHRtbDUtMjAxMjEwMjUvdGhlLWlucHV0LWVsZW1lbnQuaHRtbFxuICovXG52YXIgUmVhY3RET01JbnB1dCA9IHtcbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIHZhciBjaGVja2VkID0gTGlua2VkVmFsdWVVdGlscy5nZXRDaGVja2VkKHByb3BzKTtcblxuICAgIHZhciBuYXRpdmVQcm9wcyA9IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgIGRlZmF1bHRDaGVja2VkOiB1bmRlZmluZWQsXG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIHZhbHVlOiB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlLFxuICAgICAgY2hlY2tlZDogY2hlY2tlZCAhPSBudWxsID8gY2hlY2tlZCA6IGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZCxcbiAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2VcbiAgICB9KTtcblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCdpbnB1dCcsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgaW5pdGlhbENoZWNrZWQ6IHByb3BzLmRlZmF1bHRDaGVja2VkIHx8IGZhbHNlLFxuICAgICAgaW5pdGlhbFZhbHVlOiBkZWZhdWx0VmFsdWUgIT0gbnVsbCA/IGRlZmF1bHRWYWx1ZSA6IG51bGwsXG4gICAgICBvbkNoYW5nZTogX2hhbmRsZUNoYW5nZS5iaW5kKGluc3QpXG4gICAgfTtcbiAgfSxcblxuICBtb3VudFJlYWR5V3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICAvLyBDYW4ndCBiZSBpbiBtb3VudFdyYXBwZXIgb3IgZWxzZSBzZXJ2ZXIgcmVuZGVyaW5nIGxlYWtzLlxuICAgIGluc3RhbmNlc0J5UmVhY3RJRFtpbnN0Ll9yb290Tm9kZUlEXSA9IGluc3Q7XG4gIH0sXG5cbiAgdW5tb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgZGVsZXRlIGluc3RhbmNlc0J5UmVhY3RJRFtpbnN0Ll9yb290Tm9kZUlEXTtcbiAgfSxcblxuICB1cGRhdGVXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXG4gICAgLy8gVE9ETzogU2hvdWxkbid0IHRoaXMgYmUgZ2V0Q2hlY2tlZChwcm9wcyk/XG4gICAgdmFyIGNoZWNrZWQgPSBwcm9wcy5jaGVja2VkO1xuICAgIGlmIChjaGVja2VkICE9IG51bGwpIHtcbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAnY2hlY2tlZCcsIGNoZWNrZWQgfHwgZmFsc2UpO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAvLyBDYXN0IGB2YWx1ZWAgdG8gYSBzdHJpbmcgdG8gZW5zdXJlIHRoZSB2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LiBXaGlsZVxuICAgICAgLy8gYnJvd3NlcnMgdHlwaWNhbGx5IGRvIHRoaXMgYXMgbmVjZXNzYXJ5LCBqc2RvbSBkb2Vzbid0LlxuICAgICAgUmVhY3RET01JRE9wZXJhdGlvbnMudXBkYXRlUHJvcGVydHlCeUlEKGluc3QuX3Jvb3ROb2RlSUQsICd2YWx1ZScsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gX2hhbmRsZUNoYW5nZShldmVudCkge1xuICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICB2YXIgcmV0dXJuVmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmV4ZWN1dGVPbkNoYW5nZShwcm9wcywgZXZlbnQpO1xuXG4gIC8vIEhlcmUgd2UgdXNlIGFzYXAgdG8gd2FpdCB1bnRpbCBhbGwgdXBkYXRlcyBoYXZlIHByb3BhZ2F0ZWQsIHdoaWNoXG4gIC8vIGlzIGltcG9ydGFudCB3aGVuIHVzaW5nIGNvbnRyb2xsZWQgY29tcG9uZW50cyB3aXRoaW4gbGF5ZXJzOlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzE2OThcbiAgUmVhY3RVcGRhdGVzLmFzYXAoZm9yY2VVcGRhdGVJZk1vdW50ZWQsIHRoaXMpO1xuXG4gIHZhciBuYW1lID0gcHJvcHMubmFtZTtcbiAgaWYgKHByb3BzLnR5cGUgPT09ICdyYWRpbycgJiYgbmFtZSAhPSBudWxsKSB7XG4gICAgdmFyIHJvb3ROb2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHZhciBxdWVyeVJvb3QgPSByb290Tm9kZTtcblxuICAgIHdoaWxlIChxdWVyeVJvb3QucGFyZW50Tm9kZSkge1xuICAgICAgcXVlcnlSb290ID0gcXVlcnlSb290LnBhcmVudE5vZGU7XG4gICAgfVxuXG4gICAgLy8gSWYgYHJvb3ROb2RlLmZvcm1gIHdhcyBub24tbnVsbCwgdGhlbiB3ZSBjb3VsZCB0cnkgYGZvcm0uZWxlbWVudHNgLFxuICAgIC8vIGJ1dCB0aGF0IHNvbWV0aW1lcyBiZWhhdmVzIHN0cmFuZ2VseSBpbiBJRTguIFdlIGNvdWxkIGFsc28gdHJ5IHVzaW5nXG4gICAgLy8gYGZvcm0uZ2V0RWxlbWVudHNCeU5hbWVgLCBidXQgdGhhdCB3aWxsIG9ubHkgcmV0dXJuIGRpcmVjdCBjaGlsZHJlblxuICAgIC8vIGFuZCB3b24ndCBpbmNsdWRlIGlucHV0cyB0aGF0IHVzZSB0aGUgSFRNTDUgYGZvcm09YCBhdHRyaWJ1dGUuIFNpbmNlXG4gICAgLy8gdGhlIGlucHV0IG1pZ2h0IG5vdCBldmVuIGJlIGluIGEgZm9ybSwgbGV0J3MganVzdCB1c2UgdGhlIGdsb2JhbFxuICAgIC8vIGBxdWVyeVNlbGVjdG9yQWxsYCB0byBlbnN1cmUgd2UgZG9uJ3QgbWlzcyBhbnl0aGluZy5cbiAgICB2YXIgZ3JvdXAgPSBxdWVyeVJvb3QucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT0nICsgSlNPTi5zdHJpbmdpZnkoJycgKyBuYW1lKSArICddW3R5cGU9XCJyYWRpb1wiXScpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG90aGVyTm9kZSA9IGdyb3VwW2ldO1xuICAgICAgaWYgKG90aGVyTm9kZSA9PT0gcm9vdE5vZGUgfHwgb3RoZXJOb2RlLmZvcm0gIT09IHJvb3ROb2RlLmZvcm0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgaWYgcmFkaW8gYnV0dG9ucyByZW5kZXJlZCBieSBkaWZmZXJlbnQgY29waWVzIG9mIFJlYWN0XG4gICAgICAvLyBhbmQgdGhlIHNhbWUgbmFtZSBhcmUgcmVuZGVyZWQgaW50byB0aGUgc2FtZSBmb3JtIChzYW1lIGFzICMxOTM5KS5cbiAgICAgIC8vIFRoYXQncyBwcm9iYWJseSBva2F5OyB3ZSBkb24ndCBzdXBwb3J0IGl0IGp1c3QgYXMgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgICAgLy8gbWl4aW5nIFJlYWN0IHdpdGggbm9uLVJlYWN0LlxuICAgICAgdmFyIG90aGVySUQgPSBSZWFjdE1vdW50LmdldElEKG90aGVyTm9kZSk7XG4gICAgICAhb3RoZXJJRCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdERPTUlucHV0OiBNaXhpbmcgUmVhY3QgYW5kIG5vbi1SZWFjdCByYWRpbyBpbnB1dHMgd2l0aCB0aGUgJyArICdzYW1lIGBuYW1lYCBpcyBub3Qgc3VwcG9ydGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHZhciBvdGhlckluc3RhbmNlID0gaW5zdGFuY2VzQnlSZWFjdElEW290aGVySURdO1xuICAgICAgIW90aGVySW5zdGFuY2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET01JbnB1dDogVW5rbm93biByYWRpbyBidXR0b24gSUQgJXMuJywgb3RoZXJJRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgLy8gSWYgdGhpcyBpcyBhIGNvbnRyb2xsZWQgcmFkaW8gYnV0dG9uIGdyb3VwLCBmb3JjaW5nIHRoZSBpbnB1dCB0aGF0XG4gICAgICAvLyB3YXMgcHJldmlvdXNseSBjaGVja2VkIHRvIHVwZGF0ZSB3aWxsIGNhdXNlIGl0IHRvIGJlIGNvbWUgcmUtY2hlY2tlZFxuICAgICAgLy8gYXMgYXBwcm9wcmlhdGUuXG4gICAgICBSZWFjdFVwZGF0ZXMuYXNhcChmb3JjZVVwZGF0ZUlmTW91bnRlZCwgb3RoZXJJbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NSW5wdXQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NT3B0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDaGlsZHJlbiA9IHJlcXVpcmUoJy4vUmVhY3RDaGlsZHJlbicpO1xudmFyIFJlYWN0RE9NU2VsZWN0ID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdCcpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHZhbHVlQ29udGV4dEtleSA9IFJlYWN0RE9NU2VsZWN0LnZhbHVlQ29udGV4dEtleTtcblxuLyoqXG4gKiBJbXBsZW1lbnRzIGFuIDxvcHRpb24+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCB3YXJucyB3aGVuIGBzZWxlY3RlZGAgaXMgc2V0LlxuICovXG52YXIgUmVhY3RET01PcHRpb24gPSB7XG4gIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgLy8gVE9ETyAoeXVuZ3N0ZXJzKTogUmVtb3ZlIHN1cHBvcnQgZm9yIGBzZWxlY3RlZGAgaW4gPG9wdGlvbj4uXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHByb3BzLnNlbGVjdGVkID09IG51bGwsICdVc2UgdGhlIGBkZWZhdWx0VmFsdWVgIG9yIGB2YWx1ZWAgcHJvcHMgb24gPHNlbGVjdD4gaW5zdGVhZCBvZiAnICsgJ3NldHRpbmcgYHNlbGVjdGVkYCBvbiA8b3B0aW9uPi4nKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBMb29rIHVwIHdoZXRoZXIgdGhpcyBvcHRpb24gaXMgJ3NlbGVjdGVkJyB2aWEgY29udGV4dFxuICAgIHZhciBzZWxlY3RWYWx1ZSA9IGNvbnRleHRbdmFsdWVDb250ZXh0S2V5XTtcblxuICAgIC8vIElmIGNvbnRleHQga2V5IGlzIG51bGwgKGUuZy4sIG5vIHNwZWNpZmllZCB2YWx1ZSBvciBhZnRlciBpbml0aWFsIG1vdW50KVxuICAgIC8vIG9yIG1pc3NpbmcgKGUuZy4sIGZvciA8ZGF0YWxpc3Q+KSwgd2UgZG9uJ3QgY2hhbmdlIHByb3BzLnNlbGVjdGVkXG4gICAgdmFyIHNlbGVjdGVkID0gbnVsbDtcbiAgICBpZiAoc2VsZWN0VmFsdWUgIT0gbnVsbCkge1xuICAgICAgc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdFZhbHVlKSkge1xuICAgICAgICAvLyBtdWx0aXBsZVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdFZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCcnICsgc2VsZWN0VmFsdWVbaV0gPT09ICcnICsgcHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0ZWQgPSAnJyArIHNlbGVjdFZhbHVlID09PSAnJyArIHByb3BzLnZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHsgc2VsZWN0ZWQ6IHNlbGVjdGVkIH07XG4gIH0sXG5cbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIHZhciBuYXRpdmVQcm9wcyA9IGFzc2lnbih7IHNlbGVjdGVkOiB1bmRlZmluZWQsIGNoaWxkcmVuOiB1bmRlZmluZWQgfSwgcHJvcHMpO1xuXG4gICAgLy8gUmVhZCBzdGF0ZSBvbmx5IGZyb20gaW5pdGlhbCBtb3VudCBiZWNhdXNlIDxzZWxlY3Q+IHVwZGF0ZXMgdmFsdWVcbiAgICAvLyBtYW51YWxseTsgd2UgbmVlZCB0aGUgaW5pdGlhbCBzdGF0ZSBvbmx5IGZvciBzZXJ2ZXIgcmVuZGVyaW5nXG4gICAgaWYgKGluc3QuX3dyYXBwZXJTdGF0ZS5zZWxlY3RlZCAhPSBudWxsKSB7XG4gICAgICBuYXRpdmVQcm9wcy5zZWxlY3RlZCA9IGluc3QuX3dyYXBwZXJTdGF0ZS5zZWxlY3RlZDtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudCA9ICcnO1xuXG4gICAgLy8gRmxhdHRlbiBjaGlsZHJlbiBhbmQgd2FybiBpZiB0aGV5IGFyZW4ndCBzdHJpbmdzIG9yIG51bWJlcnM7XG4gICAgLy8gaW52YWxpZCB0eXBlcyBhcmUgaWdub3JlZC5cbiAgICBSZWFjdENoaWxkcmVuLmZvckVhY2gocHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgaWYgKGNoaWxkID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGNoaWxkID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb250ZW50ICs9IGNoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdPbmx5IHN0cmluZ3MgYW5kIG51bWJlcnMgYXJlIHN1cHBvcnRlZCBhcyA8b3B0aW9uPiBjaGlsZHJlbi4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBuYXRpdmVQcm9wcy5jaGlsZHJlbiA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01PcHRpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VsZWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgTGlua2VkVmFsdWVVdGlscyA9IHJlcXVpcmUoJy4vTGlua2VkVmFsdWVVdGlscycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHZhbHVlQ29udGV4dEtleSA9ICdfX1JlYWN0RE9NU2VsZWN0X3ZhbHVlJCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblxuZnVuY3Rpb24gdXBkYXRlT3B0aW9uc0lmUGVuZGluZ1VwZGF0ZUFuZE1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEICYmIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlKSB7XG4gICAgdGhpcy5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUgPSBmYWxzZTtcblxuICAgIHZhciBwcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIHVwZGF0ZU9wdGlvbnModGhpcywgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSB7XG4gIGlmIChvd25lcikge1xuICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbnZhciB2YWx1ZVByb3BOYW1lcyA9IFsndmFsdWUnLCAnZGVmYXVsdFZhbHVlJ107XG5cbi8qKlxuICogVmFsaWRhdGlvbiBmdW5jdGlvbiBmb3IgYHZhbHVlYCBhbmQgYGRlZmF1bHRWYWx1ZWAuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjaGVja1NlbGVjdFByb3BUeXBlcyhpbnN0LCBwcm9wcykge1xuICB2YXIgb3duZXIgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gIExpbmtlZFZhbHVlVXRpbHMuY2hlY2tQcm9wVHlwZXMoJ3NlbGVjdCcsIHByb3BzLCBvd25lcik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZVByb3BOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwcm9wTmFtZSA9IHZhbHVlUHJvcE5hbWVzW2ldO1xuICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChwcm9wcy5tdWx0aXBsZSkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoQXJyYXkuaXNBcnJheShwcm9wc1twcm9wTmFtZV0pLCAnVGhlIGAlc2AgcHJvcCBzdXBwbGllZCB0byA8c2VsZWN0PiBtdXN0IGJlIGFuIGFycmF5IGlmICcgKyAnYG11bHRpcGxlYCBpcyB0cnVlLiVzJywgcHJvcE5hbWUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikpIDogdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQXJyYXkuaXNBcnJheShwcm9wc1twcm9wTmFtZV0pLCAnVGhlIGAlc2AgcHJvcCBzdXBwbGllZCB0byA8c2VsZWN0PiBtdXN0IGJlIGEgc2NhbGFyICcgKyAndmFsdWUgaWYgYG11bHRpcGxlYCBpcyBmYWxzZS4lcycsIHByb3BOYW1lLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0RE9NQ29tcG9uZW50fSBpbnN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGxlXG4gKiBAcGFyYW0geyp9IHByb3BWYWx1ZSBBIHN0cmluZ2FibGUgKHdpdGggYG11bHRpcGxlYCwgYSBsaXN0IG9mIHN0cmluZ2FibGVzKS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMoaW5zdCwgbXVsdGlwbGUsIHByb3BWYWx1ZSkge1xuICB2YXIgc2VsZWN0ZWRWYWx1ZSwgaTtcbiAgdmFyIG9wdGlvbnMgPSBSZWFjdE1vdW50LmdldE5vZGUoaW5zdC5fcm9vdE5vZGVJRCkub3B0aW9ucztcblxuICBpZiAobXVsdGlwbGUpIHtcbiAgICBzZWxlY3RlZFZhbHVlID0ge307XG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgc2VsZWN0ZWRWYWx1ZVsnJyArIHByb3BWYWx1ZVtpXV0gPSB0cnVlO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNlbGVjdGVkID0gc2VsZWN0ZWRWYWx1ZS5oYXNPd25Qcm9wZXJ0eShvcHRpb25zW2ldLnZhbHVlKTtcbiAgICAgIGlmIChvcHRpb25zW2ldLnNlbGVjdGVkICE9PSBzZWxlY3RlZCkge1xuICAgICAgICBvcHRpb25zW2ldLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIERvIG5vdCBzZXQgYHNlbGVjdC52YWx1ZWAgYXMgZXhhY3QgYmVoYXZpb3IgaXNuJ3QgY29uc2lzdGVudCBhY3Jvc3MgYWxsXG4gICAgLy8gYnJvd3NlcnMgZm9yIGFsbCBjYXNlcy5cbiAgICBzZWxlY3RlZFZhbHVlID0gJycgKyBwcm9wVmFsdWU7XG4gICAgZm9yIChpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChvcHRpb25zW2ldLnZhbHVlID09PSBzZWxlY3RlZFZhbHVlKSB7XG4gICAgICAgIG9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xuICAgICAgb3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBhIDxzZWxlY3Q+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgb3B0aW9uYWxseSBzZXR0aW5nIHRoZVxuICogcHJvcHMgYHZhbHVlYCBhbmQgYGRlZmF1bHRWYWx1ZWAuIElmIGBtdWx0aXBsZWAgaXMgZmFsc2UsIHRoZSBwcm9wIG11c3QgYmUgYVxuICogc3RyaW5nYWJsZS4gSWYgYG11bHRpcGxlYCBpcyB0cnVlLCB0aGUgcHJvcCBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ2FibGVzLlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgbm90IHN1cHBsaWVkIChvciBudWxsL3VuZGVmaW5lZCksIHVzZXIgYWN0aW9ucyB0aGF0IGNoYW5nZSB0aGVcbiAqIHNlbGVjdGVkIG9wdGlvbiB3aWxsIHRyaWdnZXIgdXBkYXRlcyB0byB0aGUgcmVuZGVyZWQgb3B0aW9ucy5cbiAqXG4gKiBJZiBpdCBpcyBzdXBwbGllZCAoYW5kIG5vdCBudWxsL3VuZGVmaW5lZCksIHRoZSByZW5kZXJlZCBvcHRpb25zIHdpbGwgbm90XG4gKiB1cGRhdGUgaW4gcmVzcG9uc2UgdG8gdXNlciBhY3Rpb25zLiBJbnN0ZWFkLCB0aGUgYHZhbHVlYCBwcm9wIG11c3QgY2hhbmdlIGluXG4gKiBvcmRlciBmb3IgdGhlIHJlbmRlcmVkIG9wdGlvbnMgdG8gdXBkYXRlLlxuICpcbiAqIElmIGBkZWZhdWx0VmFsdWVgIGlzIHByb3ZpZGVkLCBhbnkgb3B0aW9ucyB3aXRoIHRoZSBzdXBwbGllZCB2YWx1ZXMgd2lsbCBiZVxuICogc2VsZWN0ZWQuXG4gKi9cbnZhciBSZWFjdERPTVNlbGVjdCA9IHtcbiAgdmFsdWVDb250ZXh0S2V5OiB2YWx1ZUNvbnRleHRLZXksXG5cbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIHJldHVybiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBvbkNoYW5nZTogaW5zdC5fd3JhcHBlclN0YXRlLm9uQ2hhbmdlLFxuICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9LFxuXG4gIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNoZWNrU2VsZWN0UHJvcFR5cGVzKGluc3QsIHByb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG4gICAgICBwZW5kaW5nVXBkYXRlOiBmYWxzZSxcbiAgICAgIGluaXRpYWxWYWx1ZTogdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogcHJvcHMuZGVmYXVsdFZhbHVlLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KSxcbiAgICAgIHdhc011bHRpcGxlOiBCb29sZWFuKHByb3BzLm11bHRpcGxlKVxuICAgIH07XG4gIH0sXG5cbiAgcHJvY2Vzc0NoaWxkQ29udGV4dDogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgLy8gUGFzcyBkb3duIGluaXRpYWwgdmFsdWUgc28gaW5pdGlhbCBnZW5lcmF0ZWQgbWFya3VwIGhhcyBjb3JyZWN0XG4gICAgLy8gYHNlbGVjdGVkYCBhdHRyaWJ1dGVzXG4gICAgdmFyIGNoaWxkQ29udGV4dCA9IGFzc2lnbih7fSwgY29udGV4dCk7XG4gICAgY2hpbGRDb250ZXh0W3ZhbHVlQ29udGV4dEtleV0gPSBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlO1xuICAgIHJldHVybiBjaGlsZENvbnRleHQ7XG4gIH0sXG5cbiAgcG9zdFVwZGF0ZVdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgdmFyIHByb3BzID0gaW5zdC5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICAvLyBBZnRlciB0aGUgaW5pdGlhbCBtb3VudCwgd2UgY29udHJvbCBzZWxlY3RlZC1uZXNzIG1hbnVhbGx5IHNvIGRvbid0IHBhc3NcbiAgICAvLyB0aGUgY29udGV4dCB2YWx1ZSBkb3duXG4gICAgaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSA9IHVuZGVmaW5lZDtcblxuICAgIHZhciB3YXNNdWx0aXBsZSA9IGluc3QuX3dyYXBwZXJTdGF0ZS53YXNNdWx0aXBsZTtcbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGUgPSBCb29sZWFuKHByb3BzLm11bHRpcGxlKTtcblxuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAod2FzTXVsdGlwbGUgIT09IEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpKSB7XG4gICAgICAvLyBGb3Igc2ltcGxpY2l0eSwgcmVhcHBseSBgZGVmYXVsdFZhbHVlYCBpZiBgbXVsdGlwbGVgIGlzIHRvZ2dsZWQuXG4gICAgICBpZiAocHJvcHMuZGVmYXVsdFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgcHJvcHMuZGVmYXVsdFZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldmVydCB0aGUgc2VsZWN0IGJhY2sgdG8gaXRzIGRlZmF1bHQgdW5zZWxlY3RlZCBzdGF0ZS5cbiAgICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgcHJvcHMubXVsdGlwbGUgPyBbXSA6ICcnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gIHZhciByZXR1cm5WYWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZXhlY3V0ZU9uQ2hhbmdlKHByb3BzLCBldmVudCk7XG5cbiAgdGhpcy5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUgPSB0cnVlO1xuICBSZWFjdFVwZGF0ZXMuYXNhcCh1cGRhdGVPcHRpb25zSWZQZW5kaW5nVXBkYXRlQW5kTW91bnRlZCwgdGhpcyk7XG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlbGVjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01TZWxlY3Rpb25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0ID0gcmVxdWlyZSgnLi9nZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0Jyk7XG52YXIgZ2V0VGV4dENvbnRlbnRBY2Nlc3NvciA9IHJlcXVpcmUoJy4vZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcicpO1xuXG4vKipcbiAqIFdoaWxlIGBpc0NvbGxhcHNlZGAgaXMgYXZhaWxhYmxlIG9uIHRoZSBTZWxlY3Rpb24gb2JqZWN0IGFuZCBgY29sbGFwc2VkYFxuICogaXMgYXZhaWxhYmxlIG9uIHRoZSBSYW5nZSBvYmplY3QsIElFMTEgc29tZXRpbWVzIGdldHMgdGhlbSB3cm9uZy5cbiAqIElmIHRoZSBhbmNob3IvZm9jdXMgbm9kZXMgYW5kIG9mZnNldHMgYXJlIHRoZSBzYW1lLCB0aGUgcmFuZ2UgaXMgY29sbGFwc2VkLlxuICovXG5mdW5jdGlvbiBpc0NvbGxhcHNlZChhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpIHtcbiAgcmV0dXJuIGFuY2hvck5vZGUgPT09IGZvY3VzTm9kZSAmJiBhbmNob3JPZmZzZXQgPT09IGZvY3VzT2Zmc2V0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgYXBwcm9wcmlhdGUgYW5jaG9yIGFuZCBmb2N1cyBub2RlL29mZnNldCBwYWlycyBmb3IgSUUuXG4gKlxuICogVGhlIGNhdGNoIGhlcmUgaXMgdGhhdCBJRSdzIHNlbGVjdGlvbiBBUEkgZG9lc24ndCBwcm92aWRlIGluZm9ybWF0aW9uXG4gKiBhYm91dCB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gaXMgZm9yd2FyZCBvciBiYWNrd2FyZCwgc28gd2UgaGF2ZSB0b1xuICogYmVoYXZlIGFzIHRob3VnaCBpdCdzIGFsd2F5cyBmb3J3YXJkLlxuICpcbiAqIElFIHRleHQgZGlmZmVycyBmcm9tIG1vZGVybiBzZWxlY3Rpb24gaW4gdGhhdCBpdCBiZWhhdmVzIGFzIHRob3VnaFxuICogYmxvY2sgZWxlbWVudHMgZW5kIHdpdGggYSBuZXcgbGluZS4gVGhpcyBtZWFucyBjaGFyYWN0ZXIgb2Zmc2V0cyB3aWxsXG4gKiBkaWZmZXIgYmV0d2VlbiB0aGUgdHdvIEFQSXMuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldElFT2Zmc2V0cyhub2RlKSB7XG4gIHZhciBzZWxlY3Rpb24gPSBkb2N1bWVudC5zZWxlY3Rpb247XG4gIHZhciBzZWxlY3RlZFJhbmdlID0gc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gIHZhciBzZWxlY3RlZExlbmd0aCA9IHNlbGVjdGVkUmFuZ2UudGV4dC5sZW5ndGg7XG5cbiAgLy8gRHVwbGljYXRlIHNlbGVjdGlvbiBzbyB3ZSBjYW4gbW92ZSByYW5nZSB3aXRob3V0IGJyZWFraW5nIHVzZXIgc2VsZWN0aW9uLlxuICB2YXIgZnJvbVN0YXJ0ID0gc2VsZWN0ZWRSYW5nZS5kdXBsaWNhdGUoKTtcbiAgZnJvbVN0YXJ0Lm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUpO1xuICBmcm9tU3RhcnQuc2V0RW5kUG9pbnQoJ0VuZFRvU3RhcnQnLCBzZWxlY3RlZFJhbmdlKTtcblxuICB2YXIgc3RhcnRPZmZzZXQgPSBmcm9tU3RhcnQudGV4dC5sZW5ndGg7XG4gIHZhciBlbmRPZmZzZXQgPSBzdGFydE9mZnNldCArIHNlbGVjdGVkTGVuZ3RoO1xuXG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IHN0YXJ0T2Zmc2V0LFxuICAgIGVuZDogZW5kT2Zmc2V0XG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHs/b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRNb2Rlcm5PZmZzZXRzKG5vZGUpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24gJiYgd2luZG93LmdldFNlbGVjdGlvbigpO1xuXG4gIGlmICghc2VsZWN0aW9uIHx8IHNlbGVjdGlvbi5yYW5nZUNvdW50ID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgYW5jaG9yTm9kZSA9IHNlbGVjdGlvbi5hbmNob3JOb2RlO1xuICB2YXIgYW5jaG9yT2Zmc2V0ID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldDtcbiAgdmFyIGZvY3VzTm9kZSA9IHNlbGVjdGlvbi5mb2N1c05vZGU7XG4gIHZhciBmb2N1c09mZnNldCA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDtcblxuICB2YXIgY3VycmVudFJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XG5cbiAgLy8gSW4gRmlyZWZveCwgcmFuZ2Uuc3RhcnRDb250YWluZXIgYW5kIHJhbmdlLmVuZENvbnRhaW5lciBjYW4gYmUgXCJhbm9ueW1vdXNcbiAgLy8gZGl2c1wiLCBlLmcuIHRoZSB1cC9kb3duIGJ1dHRvbnMgb24gYW4gPGlucHV0IHR5cGU9XCJudW1iZXJcIj4uIEFub255bW91c1xuICAvLyBkaXZzIGRvIG5vdCBzZWVtIHRvIGV4cG9zZSBwcm9wZXJ0aWVzLCB0cmlnZ2VyaW5nIGEgXCJQZXJtaXNzaW9uIGRlbmllZFxuICAvLyBlcnJvclwiIGlmIGFueSBvZiBpdHMgcHJvcGVydGllcyBhcmUgYWNjZXNzZWQuIFRoZSBvbmx5IHNlZW1pbmdseSBwb3NzaWJsZVxuICAvLyB3YXkgdG8gYXZvaWQgZXJyb3JpbmcgaXMgdG8gYWNjZXNzIGEgcHJvcGVydHkgdGhhdCB0eXBpY2FsbHkgd29ya3MgZm9yXG4gIC8vIG5vbi1hbm9ueW1vdXMgZGl2cyBhbmQgY2F0Y2ggYW55IGVycm9yIHRoYXQgbWF5IG90aGVyd2lzZSBhcmlzZS4gU2VlXG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTIwODQyN1xuICB0cnkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICAgIGN1cnJlbnRSYW5nZS5zdGFydENvbnRhaW5lci5ub2RlVHlwZTtcbiAgICBjdXJyZW50UmFuZ2UuZW5kQ29udGFpbmVyLm5vZGVUeXBlO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIElmIHRoZSBub2RlIGFuZCBvZmZzZXQgdmFsdWVzIGFyZSB0aGUgc2FtZSwgdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWQuXG4gIC8vIGBTZWxlY3Rpb24uaXNDb2xsYXBzZWRgIGlzIGF2YWlsYWJsZSBuYXRpdmVseSwgYnV0IElFIHNvbWV0aW1lcyBnZXRzXG4gIC8vIHRoaXMgdmFsdWUgd3JvbmcuXG4gIHZhciBpc1NlbGVjdGlvbkNvbGxhcHNlZCA9IGlzQ29sbGFwc2VkKHNlbGVjdGlvbi5hbmNob3JOb2RlLCBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LCBzZWxlY3Rpb24uZm9jdXNOb2RlLCBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpO1xuXG4gIHZhciByYW5nZUxlbmd0aCA9IGlzU2VsZWN0aW9uQ29sbGFwc2VkID8gMCA6IGN1cnJlbnRSYW5nZS50b1N0cmluZygpLmxlbmd0aDtcblxuICB2YXIgdGVtcFJhbmdlID0gY3VycmVudFJhbmdlLmNsb25lUmFuZ2UoKTtcbiAgdGVtcFJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhub2RlKTtcbiAgdGVtcFJhbmdlLnNldEVuZChjdXJyZW50UmFuZ2Uuc3RhcnRDb250YWluZXIsIGN1cnJlbnRSYW5nZS5zdGFydE9mZnNldCk7XG5cbiAgdmFyIGlzVGVtcFJhbmdlQ29sbGFwc2VkID0gaXNDb2xsYXBzZWQodGVtcFJhbmdlLnN0YXJ0Q29udGFpbmVyLCB0ZW1wUmFuZ2Uuc3RhcnRPZmZzZXQsIHRlbXBSYW5nZS5lbmRDb250YWluZXIsIHRlbXBSYW5nZS5lbmRPZmZzZXQpO1xuXG4gIHZhciBzdGFydCA9IGlzVGVtcFJhbmdlQ29sbGFwc2VkID8gMCA6IHRlbXBSYW5nZS50b1N0cmluZygpLmxlbmd0aDtcbiAgdmFyIGVuZCA9IHN0YXJ0ICsgcmFuZ2VMZW5ndGg7XG5cbiAgLy8gRGV0ZWN0IHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBpcyBiYWNrd2FyZC5cbiAgdmFyIGRldGVjdGlvblJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgZGV0ZWN0aW9uUmFuZ2Uuc2V0U3RhcnQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0KTtcbiAgZGV0ZWN0aW9uUmFuZ2Uuc2V0RW5kKGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpO1xuICB2YXIgaXNCYWNrd2FyZCA9IGRldGVjdGlvblJhbmdlLmNvbGxhcHNlZDtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBpc0JhY2t3YXJkID8gZW5kIDogc3RhcnQsXG4gICAgZW5kOiBpc0JhY2t3YXJkID8gc3RhcnQgOiBlbmRcbiAgfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG4gKi9cbmZ1bmN0aW9uIHNldElFT2Zmc2V0cyhub2RlLCBvZmZzZXRzKSB7XG4gIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLmR1cGxpY2F0ZSgpO1xuICB2YXIgc3RhcnQsIGVuZDtcblxuICBpZiAodHlwZW9mIG9mZnNldHMuZW5kID09PSAndW5kZWZpbmVkJykge1xuICAgIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICBlbmQgPSBzdGFydDtcbiAgfSBlbHNlIGlmIChvZmZzZXRzLnN0YXJ0ID4gb2Zmc2V0cy5lbmQpIHtcbiAgICBzdGFydCA9IG9mZnNldHMuZW5kO1xuICAgIGVuZCA9IG9mZnNldHMuc3RhcnQ7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnQgPSBvZmZzZXRzLnN0YXJ0O1xuICAgIGVuZCA9IG9mZnNldHMuZW5kO1xuICB9XG5cbiAgcmFuZ2UubW92ZVRvRWxlbWVudFRleHQobm9kZSk7XG4gIHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgc3RhcnQpO1xuICByYW5nZS5zZXRFbmRQb2ludCgnRW5kVG9TdGFydCcsIHJhbmdlKTtcbiAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kIC0gc3RhcnQpO1xuICByYW5nZS5zZWxlY3QoKTtcbn1cblxuLyoqXG4gKiBJbiBtb2Rlcm4gbm9uLUlFIGJyb3dzZXJzLCB3ZSBjYW4gc3VwcG9ydCBib3RoIGZvcndhcmQgYW5kIGJhY2t3YXJkXG4gKiBzZWxlY3Rpb25zLlxuICpcbiAqIE5vdGU6IElFMTArIHN1cHBvcnRzIHRoZSBTZWxlY3Rpb24gb2JqZWN0LCBidXQgaXQgZG9lcyBub3Qgc3VwcG9ydFxuICogdGhlIGBleHRlbmRgIG1ldGhvZCwgd2hpY2ggbWVhbnMgdGhhdCBldmVuIGluIG1vZGVybiBJRSwgaXQncyBub3QgcG9zc2libGVcbiAqIHRvIHByb2dyYW1hdGljYWxseSBjcmVhdGUgYSBiYWNrd2FyZCBzZWxlY3Rpb24uIFRodXMsIGZvciBhbGwgSUVcbiAqIHZlcnNpb25zLCB3ZSB1c2UgdGhlIG9sZCBJRSBBUEkgdG8gY3JlYXRlIG91ciBzZWxlY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtvYmplY3R9IG9mZnNldHNcbiAqL1xuZnVuY3Rpb24gc2V0TW9kZXJuT2Zmc2V0cyhub2RlLCBvZmZzZXRzKSB7XG4gIGlmICghd2luZG93LmdldFNlbGVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gIHZhciBsZW5ndGggPSBub2RlW2dldFRleHRDb250ZW50QWNjZXNzb3IoKV0ubGVuZ3RoO1xuICB2YXIgc3RhcnQgPSBNYXRoLm1pbihvZmZzZXRzLnN0YXJ0LCBsZW5ndGgpO1xuICB2YXIgZW5kID0gdHlwZW9mIG9mZnNldHMuZW5kID09PSAndW5kZWZpbmVkJyA/IHN0YXJ0IDogTWF0aC5taW4ob2Zmc2V0cy5lbmQsIGxlbmd0aCk7XG5cbiAgLy8gSUUgMTEgdXNlcyBtb2Rlcm4gc2VsZWN0aW9uLCBidXQgZG9lc24ndCBzdXBwb3J0IHRoZSBleHRlbmQgbWV0aG9kLlxuICAvLyBGbGlwIGJhY2t3YXJkIHNlbGVjdGlvbnMsIHNvIHdlIGNhbiBzZXQgd2l0aCBhIHNpbmdsZSByYW5nZS5cbiAgaWYgKCFzZWxlY3Rpb24uZXh0ZW5kICYmIHN0YXJ0ID4gZW5kKSB7XG4gICAgdmFyIHRlbXAgPSBlbmQ7XG4gICAgZW5kID0gc3RhcnQ7XG4gICAgc3RhcnQgPSB0ZW1wO1xuICB9XG5cbiAgdmFyIHN0YXJ0TWFya2VyID0gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChub2RlLCBzdGFydCk7XG4gIHZhciBlbmRNYXJrZXIgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0KG5vZGUsIGVuZCk7XG5cbiAgaWYgKHN0YXJ0TWFya2VyICYmIGVuZE1hcmtlcikge1xuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcmFuZ2Uuc2V0U3RhcnQoc3RhcnRNYXJrZXIubm9kZSwgc3RhcnRNYXJrZXIub2Zmc2V0KTtcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHtcbiAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gICAgICBzZWxlY3Rpb24uZXh0ZW5kKGVuZE1hcmtlci5ub2RlLCBlbmRNYXJrZXIub2Zmc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2Uuc2V0RW5kKGVuZE1hcmtlci5ub2RlLCBlbmRNYXJrZXIub2Zmc2V0KTtcbiAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gICAgfVxuICB9XG59XG5cbnZhciB1c2VJRU9mZnNldHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ3NlbGVjdGlvbicgaW4gZG9jdW1lbnQgJiYgISgnZ2V0U2VsZWN0aW9uJyBpbiB3aW5kb3cpO1xuXG52YXIgUmVhY3RET01TZWxlY3Rpb24gPSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICovXG4gIGdldE9mZnNldHM6IHVzZUlFT2Zmc2V0cyA/IGdldElFT2Zmc2V0cyA6IGdldE1vZGVybk9mZnNldHMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICAgKiBAcGFyYW0ge29iamVjdH0gb2Zmc2V0c1xuICAgKi9cbiAgc2V0T2Zmc2V0czogdXNlSUVPZmZzZXRzID8gc2V0SUVPZmZzZXRzIDogc2V0TW9kZXJuT2Zmc2V0c1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlbGVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01TZXJ2ZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERlZmF1bHRJbmplY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0RGVmYXVsdEluamVjdGlvbicpO1xudmFyIFJlYWN0U2VydmVyUmVuZGVyaW5nID0gcmVxdWlyZSgnLi9SZWFjdFNlcnZlclJlbmRlcmluZycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cblJlYWN0RGVmYXVsdEluamVjdGlvbi5pbmplY3QoKTtcblxudmFyIFJlYWN0RE9NU2VydmVyID0ge1xuICByZW5kZXJUb1N0cmluZzogUmVhY3RTZXJ2ZXJSZW5kZXJpbmcucmVuZGVyVG9TdHJpbmcsXG4gIHJlbmRlclRvU3RhdGljTWFya3VwOiBSZWFjdFNlcnZlclJlbmRlcmluZy5yZW5kZXJUb1N0YXRpY01hcmt1cCxcbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NU2VydmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVRleHRDb21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NQ2hpbGRyZW5PcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01DaGlsZHJlbk9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgc2V0VGV4dENvbnRlbnQgPSByZXF1aXJlKCcuL3NldFRleHRDb250ZW50Jyk7XG52YXIgdmFsaWRhdGVET01OZXN0aW5nID0gcmVxdWlyZSgnLi92YWxpZGF0ZURPTU5lc3RpbmcnKTtcblxuLyoqXG4gKiBUZXh0IG5vZGVzIHZpb2xhdGUgYSBjb3VwbGUgYXNzdW1wdGlvbnMgdGhhdCBSZWFjdCBtYWtlcyBhYm91dCBjb21wb25lbnRzOlxuICpcbiAqICAtIFdoZW4gbW91bnRpbmcgdGV4dCBpbnRvIHRoZSBET00sIGFkamFjZW50IHRleHQgbm9kZXMgYXJlIG1lcmdlZC5cbiAqICAtIFRleHQgbm9kZXMgY2Fubm90IGJlIGFzc2lnbmVkIGEgUmVhY3Qgcm9vdCBJRC5cbiAqXG4gKiBUaGlzIGNvbXBvbmVudCBpcyB1c2VkIHRvIHdyYXAgc3RyaW5ncyBpbiBlbGVtZW50cyBzbyB0aGF0IHRoZXkgY2FuIHVuZGVyZ29cbiAqIHRoZSBzYW1lIHJlY29uY2lsaWF0aW9uIHRoYXQgaXMgYXBwbGllZCB0byBlbGVtZW50cy5cbiAqXG4gKiBUT0RPOiBJbnZlc3RpZ2F0ZSByZXByZXNlbnRpbmcgUmVhY3QgY29tcG9uZW50cyBpbiB0aGUgRE9NIHdpdGggdGV4dCBub2Rlcy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RET01UZXh0Q29tcG9uZW50XG4gKiBAZXh0ZW5kcyBSZWFjdENvbXBvbmVudFxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgLy8gVGhpcyBjb25zdHJ1Y3RvciBhbmQgaXRzIGFyZ3VtZW50IGlzIGN1cnJlbnRseSB1c2VkIGJ5IG1vY2tzLlxufTtcblxuYXNzaWduKFJlYWN0RE9NVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtSZWFjdFRleHR9IHRleHRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgLy8gVE9ETzogVGhpcyBpcyByZWFsbHkgYSBSZWFjdFRleHQgKFJlYWN0Tm9kZSksIG5vdCBhIFJlYWN0RWxlbWVudFxuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gdGV4dDtcbiAgICB0aGlzLl9zdHJpbmdUZXh0ID0gJycgKyB0ZXh0O1xuXG4gICAgLy8gUHJvcGVydGllc1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX21vdW50SW5kZXggPSAwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBtYXJrdXAgZm9yIHRoaXMgdGV4dCBub2RlLiBUaGlzIG5vZGUgaXMgbm90IGludGVuZGVkIHRvIGhhdmVcbiAgICogYW55IGZlYXR1cmVzIGJlc2lkZXMgY29udGFpbmluZyB0ZXh0IGNvbnRlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBmb3IgdGhpcyB0ZXh0IG5vZGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSkge1xuICAgICAgICB2YWxpZGF0ZURPTU5lc3RpbmcoJ3NwYW4nLCBudWxsLCBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcbiAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBjb250ZXh0W1JlYWN0TW91bnQub3duZXJEb2N1bWVudENvbnRleHRLZXldO1xuICAgICAgdmFyIGVsID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0QXR0cmlidXRlRm9ySUQoZWwsIHJvb3RJRCk7XG4gICAgICAvLyBQb3B1bGF0ZSBub2RlIGNhY2hlXG4gICAgICBSZWFjdE1vdW50LmdldElEKGVsKTtcbiAgICAgIHNldFRleHRDb250ZW50KGVsLCB0aGlzLl9zdHJpbmdUZXh0KTtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGVzY2FwZWRUZXh0ID0gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRoaXMuX3N0cmluZ1RleHQpO1xuXG4gICAgICBpZiAodHJhbnNhY3Rpb24ucmVuZGVyVG9TdGF0aWNNYXJrdXApIHtcbiAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCB3cmFwIHRoaXMgaW4gYSBgc3BhbmAgZm9yIHRoZSByZWFzb25zIHN0YXRlZCBhYm92ZSwgYnV0XG4gICAgICAgIC8vIHNpbmNlIHRoaXMgaXMgYSBzaXR1YXRpb24gd2hlcmUgUmVhY3Qgd29uJ3QgdGFrZSBvdmVyIChzdGF0aWMgcGFnZXMpLFxuICAgICAgICAvLyB3ZSBjYW4gc2ltcGx5IHJldHVybiB0aGUgdGV4dCBhcyBpdCBpcy5cbiAgICAgICAgcmV0dXJuIGVzY2FwZWRUZXh0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxzcGFuICcgKyBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuY3JlYXRlTWFya3VwRm9ySUQocm9vdElEKSArICc+JyArIGVzY2FwZWRUZXh0ICsgJzwvc3Bhbj4nO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGlzIGNvbXBvbmVudCBieSB1cGRhdGluZyB0aGUgdGV4dCBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0VGV4dH0gbmV4dFRleHQgVGhlIG5leHQgdGV4dCBjb250ZW50XG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dFRleHQsIHRyYW5zYWN0aW9uKSB7XG4gICAgaWYgKG5leHRUZXh0ICE9PSB0aGlzLl9jdXJyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0VGV4dDtcbiAgICAgIHZhciBuZXh0U3RyaW5nVGV4dCA9ICcnICsgbmV4dFRleHQ7XG4gICAgICBpZiAobmV4dFN0cmluZ1RleHQgIT09IHRoaXMuX3N0cmluZ1RleHQpIHtcbiAgICAgICAgLy8gVE9ETzogU2F2ZSB0aGlzIGFzIHBlbmRpbmcgcHJvcHMgYW5kIHVzZSBwZXJmb3JtVXBkYXRlSWZOZWNlc3NhcnlcbiAgICAgICAgLy8gYW5kL29yIHVwZGF0ZUNvbXBvbmVudCB0byBkbyB0aGUgYWN0dWFsIHVwZGF0ZSBmb3IgY29uc2lzdGVuY3kgd2l0aFxuICAgICAgICAvLyBvdGhlciBjb21wb25lbnQgdHlwZXM/XG4gICAgICAgIHRoaXMuX3N0cmluZ1RleHQgPSBuZXh0U3RyaW5nVGV4dDtcbiAgICAgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIERPTUNoaWxkcmVuT3BlcmF0aW9ucy51cGRhdGVUZXh0Q29udGVudChub2RlLCBuZXh0U3RyaW5nVGV4dCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQodGhpcy5fcm9vdE5vZGVJRCk7XG4gIH1cblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01UZXh0Q29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVRleHRhcmVhXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgTGlua2VkVmFsdWVVdGlscyA9IHJlcXVpcmUoJy4vTGlua2VkVmFsdWVVdGlscycpO1xudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdERPTUlET3BlcmF0aW9ucycpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBmb3JjZVVwZGF0ZUlmTW91bnRlZCgpIHtcbiAgaWYgKHRoaXMuX3Jvb3ROb2RlSUQpIHtcbiAgICAvLyBET00gY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQ7IHVwZGF0ZVxuICAgIFJlYWN0RE9NVGV4dGFyZWEudXBkYXRlV3JhcHBlcih0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8dGV4dGFyZWE+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgc2V0dGluZyBgdmFsdWVgLCBhbmRcbiAqIGBkZWZhdWx0VmFsdWVgLiBUaGlzIGRpZmZlcnMgZnJvbSB0aGUgdHJhZGl0aW9uYWwgRE9NIEFQSSBiZWNhdXNlIHZhbHVlIGlzXG4gKiB1c3VhbGx5IHNldCBhcyBQQ0RBVEEgY2hpbGRyZW4uXG4gKlxuICogSWYgYHZhbHVlYCBpcyBub3Qgc3VwcGxpZWQgKG9yIG51bGwvdW5kZWZpbmVkKSwgdXNlciBhY3Rpb25zIHRoYXQgYWZmZWN0IHRoZVxuICogdmFsdWUgd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuXG4gKlxuICogSWYgYHZhbHVlYCBpcyBzdXBwbGllZCAoYW5kIG5vdCBudWxsL3VuZGVmaW5lZCksIHRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGxcbiAqIG5vdCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuIEluc3RlYWQsIHRoZSBgdmFsdWVgIHByb3AgbXVzdCBjaGFuZ2UgaW5cbiAqIG9yZGVyIGZvciB0aGUgcmVuZGVyZWQgZWxlbWVudCB0byBiZSB1cGRhdGVkLlxuICpcbiAqIFRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGwgYmUgaW5pdGlhbGl6ZWQgd2l0aCBhbiBlbXB0eSB2YWx1ZSwgdGhlIHByb3BcbiAqIGBkZWZhdWx0VmFsdWVgIGlmIHNwZWNpZmllZCwgb3IgdGhlIGNoaWxkcmVuIGNvbnRlbnQgKGRlcHJlY2F0ZWQpLlxuICovXG52YXIgUmVhY3RET01UZXh0YXJlYSA9IHtcbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgICEocHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBkb2VzIG5vdCBtYWtlIHNlbnNlIG9uIDx0ZXh0YXJlYT4uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gQWx3YXlzIHNldCBjaGlsZHJlbiB0byB0aGUgc2FtZSB0aGluZy4gSW4gSUU5LCB0aGUgc2VsZWN0aW9uIHJhbmdlIHdpbGxcbiAgICAvLyBnZXQgcmVzZXQgaWYgYHRleHRDb250ZW50YCBpcyBtdXRhdGVkLlxuICAgIHZhciBuYXRpdmVQcm9wcyA9IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIGNoaWxkcmVuOiBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlLFxuICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuICB9LFxuXG4gIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIExpbmtlZFZhbHVlVXRpbHMuY2hlY2tQcm9wVHlwZXMoJ3RleHRhcmVhJywgcHJvcHMsIGluc3QuX2N1cnJlbnRFbGVtZW50Ll9vd25lcik7XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRWYWx1ZSA9IHByb3BzLmRlZmF1bHRWYWx1ZTtcbiAgICAvLyBUT0RPICh5dW5nc3RlcnMpOiBSZW1vdmUgc3VwcG9ydCBmb3IgY2hpbGRyZW4gY29udGVudCBpbiA8dGV4dGFyZWE+LlxuICAgIHZhciBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuO1xuICAgIGlmIChjaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1VzZSB0aGUgYGRlZmF1bHRWYWx1ZWAgb3IgYHZhbHVlYCBwcm9wcyBpbnN0ZWFkIG9mIHNldHRpbmcgJyArICdjaGlsZHJlbiBvbiA8dGV4dGFyZWE+LicpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgIShkZWZhdWx0VmFsdWUgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnSWYgeW91IHN1cHBseSBgZGVmYXVsdFZhbHVlYCBvbiBhIDx0ZXh0YXJlYT4sIGRvIG5vdCBwYXNzIGNoaWxkcmVuLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICAhKGNoaWxkcmVuLmxlbmd0aCA8PSAxKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICc8dGV4dGFyZWE+IGNhbiBvbmx5IGhhdmUgYXQgbW9zdCBvbmUgY2hpbGQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuWzBdO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0VmFsdWUgPSAnJyArIGNoaWxkcmVuO1xuICAgIH1cbiAgICBpZiAoZGVmYXVsdFZhbHVlID09IG51bGwpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9ICcnO1xuICAgIH1cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblxuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHtcbiAgICAgIC8vIFdlIHNhdmUgdGhlIGluaXRpYWwgdmFsdWUgc28gdGhhdCBgUmVhY3RET01Db21wb25lbnRgIGRvZXNuJ3QgdXBkYXRlXG4gICAgICAvLyBgdGV4dENvbnRlbnRgICh1bm5lY2Vzc2FyeSBzaW5jZSB3ZSB1cGRhdGUgdmFsdWUpLlxuICAgICAgLy8gVGhlIGluaXRpYWwgdmFsdWUgY2FuIGJlIGEgYm9vbGVhbiBvciBvYmplY3Qgc28gdGhhdCdzIHdoeSBpdCdzXG4gICAgICAvLyBmb3JjZWQgdG8gYmUgYSBzdHJpbmcuXG4gICAgICBpbml0aWFsVmFsdWU6ICcnICsgKHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZSksXG4gICAgICBvbkNoYW5nZTogX2hhbmRsZUNoYW5nZS5iaW5kKGluc3QpXG4gICAgfTtcbiAgfSxcblxuICB1cGRhdGVXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAvLyBDYXN0IGB2YWx1ZWAgdG8gYSBzdHJpbmcgdG8gZW5zdXJlIHRoZSB2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LiBXaGlsZVxuICAgICAgLy8gYnJvd3NlcnMgdHlwaWNhbGx5IGRvIHRoaXMgYXMgbmVjZXNzYXJ5LCBqc2RvbSBkb2Vzbid0LlxuICAgICAgUmVhY3RET01JRE9wZXJhdGlvbnMudXBkYXRlUHJvcGVydHlCeUlEKGluc3QuX3Jvb3ROb2RlSUQsICd2YWx1ZScsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gX2hhbmRsZUNoYW5nZShldmVudCkge1xuICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcbiAgUmVhY3RVcGRhdGVzLmFzYXAoZm9yY2VVcGRhdGVJZk1vdW50ZWQsIHRoaXMpO1xuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01UZXh0YXJlYTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xuXG52YXIgUkVTRVRfQkFUQ0hFRF9VUERBVEVTID0ge1xuICBpbml0aWFsaXplOiBlbXB0eUZ1bmN0aW9uLFxuICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMgPSBmYWxzZTtcbiAgfVxufTtcblxudmFyIEZMVVNIX0JBVENIRURfVVBEQVRFUyA9IHtcbiAgaW5pdGlhbGl6ZTogZW1wdHlGdW5jdGlvbixcbiAgY2xvc2U6IFJlYWN0VXBkYXRlcy5mbHVzaEJhdGNoZWRVcGRhdGVzLmJpbmQoUmVhY3RVcGRhdGVzKVxufTtcblxudmFyIFRSQU5TQUNUSU9OX1dSQVBQRVJTID0gW0ZMVVNIX0JBVENIRURfVVBEQVRFUywgUkVTRVRfQkFUQ0hFRF9VUERBVEVTXTtcblxuZnVuY3Rpb24gUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uKCkge1xuICB0aGlzLnJlaW5pdGlhbGl6ZVRyYW5zYWN0aW9uKCk7XG59XG5cbmFzc2lnbihSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5VHJhbnNhY3Rpb24ucHJvdG90eXBlLCBUcmFuc2FjdGlvbi5NaXhpbiwge1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9XG59KTtcblxudmFyIHRyYW5zYWN0aW9uID0gbmV3IFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbigpO1xuXG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHtcbiAgaXNCYXRjaGluZ1VwZGF0ZXM6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBDYWxsIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBpbiBhIGNvbnRleHQgd2l0aGluIHdoaWNoIGNhbGxzIHRvIGBzZXRTdGF0ZWBcbiAgICogYW5kIGZyaWVuZHMgYXJlIGJhdGNoZWQgc3VjaCB0aGF0IGNvbXBvbmVudHMgYXJlbid0IHVwZGF0ZWQgdW5uZWNlc3NhcmlseS5cbiAgICovXG4gIGJhdGNoZWRVcGRhdGVzOiBmdW5jdGlvbiAoY2FsbGJhY2ssIGEsIGIsIGMsIGQsIGUpIHtcbiAgICB2YXIgYWxyZWFkeUJhdGNoaW5nVXBkYXRlcyA9IFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXM7XG5cbiAgICBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID0gdHJ1ZTtcblxuICAgIC8vIFRoZSBjb2RlIGlzIHdyaXR0ZW4gdGhpcyB3YXkgdG8gYXZvaWQgZXh0cmEgYWxsb2NhdGlvbnNcbiAgICBpZiAoYWxyZWFkeUJhdGNoaW5nVXBkYXRlcykge1xuICAgICAgY2FsbGJhY2soYSwgYiwgYywgZCwgZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zYWN0aW9uLnBlcmZvcm0oY2FsbGJhY2ssIG51bGwsIGEsIGIsIGMsIGQsIGUpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERlZmF1bHRJbmplY3Rpb25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9CZWZvcmVJbnB1dEV2ZW50UGx1Z2luJyk7XG52YXIgQ2hhbmdlRXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL0NoYW5nZUV2ZW50UGx1Z2luJyk7XG52YXIgQ2xpZW50UmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL0NsaWVudFJlYWN0Um9vdEluZGV4Jyk7XG52YXIgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIgPSByZXF1aXJlKCcuL0RlZmF1bHRFdmVudFBsdWdpbk9yZGVyJyk7XG52YXIgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9FbnRlckxlYXZlRXZlbnRQbHVnaW4nKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgSFRNTERPTVByb3BlcnR5Q29uZmlnID0gcmVxdWlyZSgnLi9IVE1MRE9NUHJvcGVydHlDb25maWcnKTtcbnZhciBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbiA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4nKTtcbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5ID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RET01Db21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RE9NQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdERPTVRleHRDb21wb25lbnQnKTtcbnZhciBSZWFjdEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCcuL1JlYWN0RXZlbnRMaXN0ZW5lcicpO1xudmFyIFJlYWN0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdEluamVjdGlvbicpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uJyk7XG52YXIgU2VsZWN0RXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL1NlbGVjdEV2ZW50UGx1Z2luJyk7XG52YXIgU2VydmVyUmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL1NlcnZlclJlYWN0Um9vdEluZGV4Jyk7XG52YXIgU2ltcGxlRXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL1NpbXBsZUV2ZW50UGx1Z2luJyk7XG52YXIgU1ZHRE9NUHJvcGVydHlDb25maWcgPSByZXF1aXJlKCcuL1NWR0RPTVByb3BlcnR5Q29uZmlnJyk7XG5cbnZhciBhbHJlYWR5SW5qZWN0ZWQgPSBmYWxzZTtcblxuZnVuY3Rpb24gaW5qZWN0KCkge1xuICBpZiAoYWxyZWFkeUluamVjdGVkKSB7XG4gICAgLy8gVE9ETzogVGhpcyBpcyBjdXJyZW50bHkgdHJ1ZSBiZWNhdXNlIHRoZXNlIGluamVjdGlvbnMgYXJlIHNoYXJlZCBiZXR3ZWVuXG4gICAgLy8gdGhlIGNsaWVudCBhbmQgdGhlIHNlcnZlciBwYWNrYWdlLiBUaGV5IHNob3VsZCBiZSBidWlsdCBpbmRlcGVuZGVudGx5XG4gICAgLy8gYW5kIG5vdCBzaGFyZSBhbnkgaW5qZWN0aW9uIHN0YXRlLiBUaGVuIHRoaXMgcHJvYmxlbSB3aWxsIGJlIHNvbHZlZC5cbiAgICByZXR1cm47XG4gIH1cbiAgYWxyZWFkeUluamVjdGVkID0gdHJ1ZTtcblxuICBSZWFjdEluamVjdGlvbi5FdmVudEVtaXR0ZXIuaW5qZWN0UmVhY3RFdmVudExpc3RlbmVyKFJlYWN0RXZlbnRMaXN0ZW5lcik7XG5cbiAgLyoqXG4gICAqIEluamVjdCBtb2R1bGVzIGZvciByZXNvbHZpbmcgRE9NIGhpZXJhcmNoeSBhbmQgcGx1Z2luIG9yZGVyaW5nLlxuICAgKi9cbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRQbHVnaW5IdWIuaW5qZWN0RXZlbnRQbHVnaW5PcmRlcihEZWZhdWx0RXZlbnRQbHVnaW5PcmRlcik7XG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEluc3RhbmNlSGFuZGxlKFJlYWN0SW5zdGFuY2VIYW5kbGVzKTtcbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRQbHVnaW5IdWIuaW5qZWN0TW91bnQoUmVhY3RNb3VudCk7XG5cbiAgLyoqXG4gICAqIFNvbWUgaW1wb3J0YW50IGV2ZW50IHBsdWdpbnMgaW5jbHVkZWQgYnkgZGVmYXVsdCAod2l0aG91dCBoYXZpbmcgdG8gcmVxdWlyZVxuICAgKiB0aGVtKS5cbiAgICovXG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEV2ZW50UGx1Z2luc0J5TmFtZSh7XG4gICAgU2ltcGxlRXZlbnRQbHVnaW46IFNpbXBsZUV2ZW50UGx1Z2luLFxuICAgIEVudGVyTGVhdmVFdmVudFBsdWdpbjogRW50ZXJMZWF2ZUV2ZW50UGx1Z2luLFxuICAgIENoYW5nZUV2ZW50UGx1Z2luOiBDaGFuZ2VFdmVudFBsdWdpbixcbiAgICBTZWxlY3RFdmVudFBsdWdpbjogU2VsZWN0RXZlbnRQbHVnaW4sXG4gICAgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogQmVmb3JlSW5wdXRFdmVudFBsdWdpblxuICB9KTtcblxuICBSZWFjdEluamVjdGlvbi5OYXRpdmVDb21wb25lbnQuaW5qZWN0R2VuZXJpY0NvbXBvbmVudENsYXNzKFJlYWN0RE9NQ29tcG9uZW50KTtcblxuICBSZWFjdEluamVjdGlvbi5OYXRpdmVDb21wb25lbnQuaW5qZWN0VGV4dENvbXBvbmVudENsYXNzKFJlYWN0RE9NVGV4dENvbXBvbmVudCk7XG5cbiAgUmVhY3RJbmplY3Rpb24uQ2xhc3MuaW5qZWN0TWl4aW4oUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4pO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkRPTVByb3BlcnR5LmluamVjdERPTVByb3BlcnR5Q29uZmlnKEhUTUxET01Qcm9wZXJ0eUNvbmZpZyk7XG4gIFJlYWN0SW5qZWN0aW9uLkRPTVByb3BlcnR5LmluamVjdERPTVByb3BlcnR5Q29uZmlnKFNWR0RPTVByb3BlcnR5Q29uZmlnKTtcblxuICBSZWFjdEluamVjdGlvbi5FbXB0eUNvbXBvbmVudC5pbmplY3RFbXB0eUNvbXBvbmVudCgnbm9zY3JpcHQnKTtcblxuICBSZWFjdEluamVjdGlvbi5VcGRhdGVzLmluamVjdFJlY29uY2lsZVRyYW5zYWN0aW9uKFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuICBSZWFjdEluamVjdGlvbi5VcGRhdGVzLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgUmVhY3RJbmplY3Rpb24uUm9vdEluZGV4LmluamVjdENyZWF0ZVJlYWN0Um9vdEluZGV4KEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IENsaWVudFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4IDogU2VydmVyUmVhY3RSb290SW5kZXguY3JlYXRlUmVhY3RSb290SW5kZXgpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkNvbXBvbmVudC5pbmplY3RFbnZpcm9ubWVudChSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCk7XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgdXJsID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICcnO1xuICAgIGlmICgvWz8mXXJlYWN0X3BlcmZcXGIvLnRlc3QodXJsKSkge1xuICAgICAgdmFyIFJlYWN0RGVmYXVsdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0RGVmYXVsdFBlcmYnKTtcbiAgICAgIFJlYWN0RGVmYXVsdFBlcmYuc3RhcnQoKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGluamVjdDogaW5qZWN0XG59OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVsZW1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xuXG4vLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQgdHlwZS4gSWYgdGhlcmUgaXMgbm8gbmF0aXZlIFN5bWJvbFxuLy8gbm9yIHBvbHlmaWxsLCB0aGVuIGEgcGxhaW4gbnVtYmVyIGlzIHVzZWQgZm9yIHBlcmZvcm1hbmNlLlxudmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sWydmb3InXSAmJiBTeW1ib2xbJ2ZvciddKCdyZWFjdC5lbGVtZW50JykgfHwgMHhlYWM3O1xuXG52YXIgUkVTRVJWRURfUFJPUFMgPSB7XG4gIGtleTogdHJ1ZSxcbiAgcmVmOiB0cnVlLFxuICBfX3NlbGY6IHRydWUsXG4gIF9fc291cmNlOiB0cnVlXG59O1xuXG4vKipcbiAqIEJhc2UgY29uc3RydWN0b3IgZm9yIGFsbCBSZWFjdCBlbGVtZW50cy4gVGhpcyBpcyBvbmx5IHVzZWQgdG8gbWFrZSB0aGlzXG4gKiB3b3JrIHdpdGggYSBkeW5hbWljIGluc3RhbmNlb2YgY2hlY2suIE5vdGhpbmcgc2hvdWxkIGxpdmUgb24gdGhpcyBwcm90b3R5cGUuXG4gKlxuICogQHBhcmFtIHsqfSB0eXBlXG4gKiBAcGFyYW0geyp9IGtleVxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZWZcbiAqIEBwYXJhbSB7Kn0gc2VsZiBBICp0ZW1wb3JhcnkqIGhlbHBlciB0byBkZXRlY3QgcGxhY2VzIHdoZXJlIGB0aGlzYCBpc1xuICogZGlmZmVyZW50IGZyb20gdGhlIGBvd25lcmAgd2hlbiBSZWFjdC5jcmVhdGVFbGVtZW50IGlzIGNhbGxlZCwgc28gdGhhdCB3ZVxuICogY2FuIHdhcm4uIFdlIHdhbnQgdG8gZ2V0IHJpZCBvZiBvd25lciBhbmQgcmVwbGFjZSBzdHJpbmcgYHJlZmBzIHdpdGggYXJyb3dcbiAqIGZ1bmN0aW9ucywgYW5kIGFzIGxvbmcgYXMgYHRoaXNgIGFuZCBvd25lciBhcmUgdGhlIHNhbWUsIHRoZXJlIHdpbGwgYmUgbm9cbiAqIGNoYW5nZSBpbiBiZWhhdmlvci5cbiAqIEBwYXJhbSB7Kn0gc291cmNlIEFuIGFubm90YXRpb24gb2JqZWN0IChhZGRlZCBieSBhIHRyYW5zcGlsZXIgb3Igb3RoZXJ3aXNlKVxuICogaW5kaWNhdGluZyBmaWxlbmFtZSwgbGluZSBudW1iZXIsIGFuZC9vciBvdGhlciBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSB7Kn0gb3duZXJcbiAqIEBwYXJhbSB7Kn0gcHJvcHNcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcykge1xuICB2YXIgZWxlbWVudCA9IHtcbiAgICAvLyBUaGlzIHRhZyBhbGxvdyB1cyB0byB1bmlxdWVseSBpZGVudGlmeSB0aGlzIGFzIGEgUmVhY3QgRWxlbWVudFxuICAgICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsXG5cbiAgICAvLyBCdWlsdC1pbiBwcm9wZXJ0aWVzIHRoYXQgYmVsb25nIG9uIHRoZSBlbGVtZW50XG4gICAgdHlwZTogdHlwZSxcbiAgICBrZXk6IGtleSxcbiAgICByZWY6IHJlZixcbiAgICBwcm9wczogcHJvcHMsXG5cbiAgICAvLyBSZWNvcmQgdGhlIGNvbXBvbmVudCByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhpcyBlbGVtZW50LlxuICAgIF9vd25lcjogb3duZXJcbiAgfTtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIFRoZSB2YWxpZGF0aW9uIGZsYWcgaXMgY3VycmVudGx5IG11dGF0aXZlLiBXZSBwdXQgaXQgb25cbiAgICAvLyBhbiBleHRlcm5hbCBiYWNraW5nIHN0b3JlIHNvIHRoYXQgd2UgY2FuIGZyZWV6ZSB0aGUgd2hvbGUgb2JqZWN0LlxuICAgIC8vIFRoaXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggYSBXZWFrTWFwIG9uY2UgdGhleSBhcmUgaW1wbGVtZW50ZWQgaW5cbiAgICAvLyBjb21tb25seSB1c2VkIGRldmVsb3BtZW50IGVudmlyb25tZW50cy5cbiAgICBlbGVtZW50Ll9zdG9yZSA9IHt9O1xuXG4gICAgLy8gVG8gbWFrZSBjb21wYXJpbmcgUmVhY3RFbGVtZW50cyBlYXNpZXIgZm9yIHRlc3RpbmcgcHVycG9zZXMsIHdlIG1ha2VcbiAgICAvLyB0aGUgdmFsaWRhdGlvbiBmbGFnIG5vbi1lbnVtZXJhYmxlICh3aGVyZSBwb3NzaWJsZSwgd2hpY2ggc2hvdWxkXG4gICAgLy8gaW5jbHVkZSBldmVyeSBlbnZpcm9ubWVudCB3ZSBydW4gdGVzdHMgaW4pLCBzbyB0aGUgdGVzdCBmcmFtZXdvcmtcbiAgICAvLyBpZ25vcmVzIGl0LlxuICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQuX3N0b3JlLCAndmFsaWRhdGVkJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICAvLyBzZWxmIGFuZCBzb3VyY2UgYXJlIERFViBvbmx5IHByb3BlcnRpZXMuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudCwgJ19zZWxmJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc2VsZlxuICAgICAgfSk7XG4gICAgICAvLyBUd28gZWxlbWVudHMgY3JlYXRlZCBpbiB0d28gZGlmZmVyZW50IHBsYWNlcyBzaG91bGQgYmUgY29uc2lkZXJlZFxuICAgICAgLy8gZXF1YWwgZm9yIHRlc3RpbmcgcHVycG9zZXMgYW5kIHRoZXJlZm9yZSB3ZSBoaWRlIGl0IGZyb20gZW51bWVyYXRpb24uXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudCwgJ19zb3VyY2UnLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBzb3VyY2VcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgPSBmYWxzZTtcbiAgICAgIGVsZW1lbnQuX3NlbGYgPSBzZWxmO1xuICAgICAgZWxlbWVudC5fc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQucHJvcHMpO1xuICAgIE9iamVjdC5mcmVlemUoZWxlbWVudCk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cblJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGNvbmZpZywgY2hpbGRyZW4pIHtcbiAgdmFyIHByb3BOYW1lO1xuXG4gIC8vIFJlc2VydmVkIG5hbWVzIGFyZSBleHRyYWN0ZWRcbiAgdmFyIHByb3BzID0ge307XG5cbiAgdmFyIGtleSA9IG51bGw7XG4gIHZhciByZWYgPSBudWxsO1xuICB2YXIgc2VsZiA9IG51bGw7XG4gIHZhciBzb3VyY2UgPSBudWxsO1xuXG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIHJlZiA9IGNvbmZpZy5yZWYgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcucmVmO1xuICAgIGtleSA9IGNvbmZpZy5rZXkgPT09IHVuZGVmaW5lZCA/IG51bGwgOiAnJyArIGNvbmZpZy5rZXk7XG4gICAgc2VsZiA9IGNvbmZpZy5fX3NlbGYgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcuX19zZWxmO1xuICAgIHNvdXJjZSA9IGNvbmZpZy5fX3NvdXJjZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGNvbmZpZy5fX3NvdXJjZTtcbiAgICAvLyBSZW1haW5pbmcgcHJvcGVydGllcyBhcmUgYWRkZWQgdG8gYSBuZXcgcHJvcHMgb2JqZWN0XG4gICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG4gIC8vIHRoZSBuZXdseSBhbGxvY2F0ZWQgcHJvcHMgb2JqZWN0LlxuICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbkxlbmd0aCA+IDEpIHtcbiAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkQXJyYXlbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIH1cbiAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkQXJyYXk7XG4gIH1cblxuICAvLyBSZXNvbHZlIGRlZmF1bHQgcHJvcHNcbiAgaWYgKHR5cGUgJiYgdHlwZS5kZWZhdWx0UHJvcHMpIHtcbiAgICB2YXIgZGVmYXVsdFByb3BzID0gdHlwZS5kZWZhdWx0UHJvcHM7XG4gICAgZm9yIChwcm9wTmFtZSBpbiBkZWZhdWx0UHJvcHMpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcHNbcHJvcE5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCByZWYsIHNlbGYsIHNvdXJjZSwgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCwgcHJvcHMpO1xufTtcblxuUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3RvcnkgPSBmdW5jdGlvbiAodHlwZSkge1xuICB2YXIgZmFjdG9yeSA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7XG4gIC8vIEV4cG9zZSB0aGUgdHlwZSBvbiB0aGUgZmFjdG9yeSBhbmQgdGhlIHByb3RvdHlwZSBzbyB0aGF0IGl0IGNhbiBiZVxuICAvLyBlYXNpbHkgYWNjZXNzZWQgb24gZWxlbWVudHMuIEUuZy4gYDxGb28gLz4udHlwZSA9PT0gRm9vYC5cbiAgLy8gVGhpcyBzaG91bGQgbm90IGJlIG5hbWVkIGBjb25zdHJ1Y3RvcmAgc2luY2UgdGhpcyBtYXkgbm90IGJlIHRoZSBmdW5jdGlvblxuICAvLyB0aGF0IGNyZWF0ZWQgdGhlIGVsZW1lbnQsIGFuZCBpdCBtYXkgbm90IGV2ZW4gYmUgYSBjb25zdHJ1Y3Rvci5cbiAgLy8gTGVnYWN5IGhvb2sgVE9ETzogV2FybiBpZiB0aGlzIGlzIGFjY2Vzc2VkXG4gIGZhY3RvcnkudHlwZSA9IHR5cGU7XG4gIHJldHVybiBmYWN0b3J5O1xufTtcblxuUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZUtleSA9IGZ1bmN0aW9uIChvbGRFbGVtZW50LCBuZXdLZXkpIHtcbiAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBuZXdLZXksIG9sZEVsZW1lbnQucmVmLCBvbGRFbGVtZW50Ll9zZWxmLCBvbGRFbGVtZW50Ll9zb3VyY2UsIG9sZEVsZW1lbnQuX293bmVyLCBvbGRFbGVtZW50LnByb3BzKTtcblxuICByZXR1cm4gbmV3RWxlbWVudDtcbn07XG5cblJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyA9IGZ1bmN0aW9uIChvbGRFbGVtZW50LCBuZXdQcm9wcykge1xuICB2YXIgbmV3RWxlbWVudCA9IFJlYWN0RWxlbWVudChvbGRFbGVtZW50LnR5cGUsIG9sZEVsZW1lbnQua2V5LCBvbGRFbGVtZW50LnJlZiwgb2xkRWxlbWVudC5fc2VsZiwgb2xkRWxlbWVudC5fc291cmNlLCBvbGRFbGVtZW50Ll9vd25lciwgbmV3UHJvcHMpO1xuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gSWYgdGhlIGtleSBvbiB0aGUgb3JpZ2luYWwgaXMgdmFsaWQsIHRoZW4gdGhlIGNsb25lIGlzIHZhbGlkXG4gICAgbmV3RWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gb2xkRWxlbWVudC5fc3RvcmUudmFsaWRhdGVkO1xuICB9XG5cbiAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbmZpZywgY2hpbGRyZW4pIHtcbiAgdmFyIHByb3BOYW1lO1xuXG4gIC8vIE9yaWdpbmFsIHByb3BzIGFyZSBjb3BpZWRcbiAgdmFyIHByb3BzID0gYXNzaWduKHt9LCBlbGVtZW50LnByb3BzKTtcblxuICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG4gIHZhciBrZXkgPSBlbGVtZW50LmtleTtcbiAgdmFyIHJlZiA9IGVsZW1lbnQucmVmO1xuICAvLyBTZWxmIGlzIHByZXNlcnZlZCBzaW5jZSB0aGUgb3duZXIgaXMgcHJlc2VydmVkLlxuICB2YXIgc2VsZiA9IGVsZW1lbnQuX3NlbGY7XG4gIC8vIFNvdXJjZSBpcyBwcmVzZXJ2ZWQgc2luY2UgY2xvbmVFbGVtZW50IGlzIHVubGlrZWx5IHRvIGJlIHRhcmdldGVkIGJ5IGFcbiAgLy8gdHJhbnNwaWxlciwgYW5kIHRoZSBvcmlnaW5hbCBzb3VyY2UgaXMgcHJvYmFibHkgYSBiZXR0ZXIgaW5kaWNhdG9yIG9mIHRoZVxuICAvLyB0cnVlIG93bmVyLlxuICB2YXIgc291cmNlID0gZWxlbWVudC5fc291cmNlO1xuXG4gIC8vIE93bmVyIHdpbGwgYmUgcHJlc2VydmVkLCB1bmxlc3MgcmVmIGlzIG92ZXJyaWRkZW5cbiAgdmFyIG93bmVyID0gZWxlbWVudC5fb3duZXI7XG5cbiAgaWYgKGNvbmZpZyAhPSBudWxsKSB7XG4gICAgaWYgKGNvbmZpZy5yZWYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gU2lsZW50bHkgc3RlYWwgdGhlIHJlZiBmcm9tIHRoZSBwYXJlbnQuXG4gICAgICByZWYgPSBjb25maWcucmVmO1xuICAgICAgb3duZXIgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXkgPSAnJyArIGNvbmZpZy5rZXk7XG4gICAgfVxuICAgIC8vIFJlbWFpbmluZyBwcm9wZXJ0aWVzIG92ZXJyaWRlIGV4aXN0aW5nIHByb3BzXG4gICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG4gIC8vIHRoZSBuZXdseSBhbGxvY2F0ZWQgcHJvcHMgb2JqZWN0LlxuICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbkxlbmd0aCA+IDEpIHtcbiAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkQXJyYXlbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIH1cbiAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkQXJyYXk7XG4gIH1cblxuICByZXR1cm4gUmVhY3RFbGVtZW50KGVsZW1lbnQudHlwZSwga2V5LCByZWYsIHNlbGYsIHNvdXJjZSwgb3duZXIsIHByb3BzKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYG9iamVjdGAgaXMgYSB2YWxpZCBjb21wb25lbnQuXG4gKiBAZmluYWxcbiAqL1xuUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVsZW1lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RWxlbWVudFZhbGlkYXRvclxuICovXG5cbi8qKlxuICogUmVhY3RFbGVtZW50VmFsaWRhdG9yIHByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgYSBlbGVtZW50IGZhY3RvcnlcbiAqIHdoaWNoIHZhbGlkYXRlcyB0aGUgcHJvcHMgcGFzc2VkIHRvIHRoZSBlbGVtZW50LiBUaGlzIGlzIGludGVuZGVkIHRvIGJlXG4gKiB1c2VkIG9ubHkgaW4gREVWIGFuZCBjb3VsZCBiZSByZXBsYWNlZCBieSBhIHN0YXRpYyB0eXBlIGNoZWNrZXIgZm9yIGxhbmd1YWdlc1xuICogdGhhdCBzdXBwb3J0IGl0LlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpIHtcbiAgaWYgKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQpIHtcbiAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogV2FybiBpZiB0aGVyZSdzIG5vIGtleSBleHBsaWNpdGx5IHNldCBvbiBkeW5hbWljIGFycmF5cyBvZiBjaGlsZHJlbiBvclxuICogb2JqZWN0IGtleXMgYXJlIG5vdCB2YWxpZC4gVGhpcyBhbGxvd3MgdXMgdG8ga2VlcCB0cmFjayBvZiBjaGlsZHJlbiBiZXR3ZWVuXG4gKiB1cGRhdGVzLlxuICovXG52YXIgb3duZXJIYXNLZXlVc2VXYXJuaW5nID0ge307XG5cbnZhciBsb2dnZWRUeXBlRmFpbHVyZXMgPSB7fTtcblxuLyoqXG4gKiBXYXJuIGlmIHRoZSBlbGVtZW50IGRvZXNuJ3QgaGF2ZSBhbiBleHBsaWNpdCBrZXkgYXNzaWduZWQgdG8gaXQuXG4gKiBUaGlzIGVsZW1lbnQgaXMgaW4gYW4gYXJyYXkuIFRoZSBhcnJheSBjb3VsZCBncm93IGFuZCBzaHJpbmsgb3IgYmVcbiAqIHJlb3JkZXJlZC4gQWxsIGNoaWxkcmVuIHRoYXQgaGF2ZW4ndCBhbHJlYWR5IGJlZW4gdmFsaWRhdGVkIGFyZSByZXF1aXJlZCB0b1xuICogaGF2ZSBhIFwia2V5XCIgcHJvcGVydHkgYXNzaWduZWQgdG8gaXQuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IHRoYXQgcmVxdWlyZXMgYSBrZXkuXG4gKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgZWxlbWVudCdzIHBhcmVudCdzIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRXhwbGljaXRLZXkoZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICBpZiAoIWVsZW1lbnQuX3N0b3JlIHx8IGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCB8fCBlbGVtZW50LmtleSAhPSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG5cbiAgdmFyIGFkZGVuZGEgPSBnZXRBZGRlbmRhRm9yS2V5VXNlKCd1bmlxdWVLZXknLCBlbGVtZW50LCBwYXJlbnRUeXBlKTtcbiAgaWYgKGFkZGVuZGEgPT09IG51bGwpIHtcbiAgICAvLyB3ZSBhbHJlYWR5IHNob3dlZCB0aGUgd2FybmluZ1xuICAgIHJldHVybjtcbiAgfVxuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0VhY2ggY2hpbGQgaW4gYW4gYXJyYXkgb3IgaXRlcmF0b3Igc2hvdWxkIGhhdmUgYSB1bmlxdWUgXCJrZXlcIiBwcm9wLicgKyAnJXMlcyVzJywgYWRkZW5kYS5wYXJlbnRPck93bmVyIHx8ICcnLCBhZGRlbmRhLmNoaWxkT3duZXIgfHwgJycsIGFkZGVuZGEudXJsIHx8ICcnKSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBTaGFyZWQgd2FybmluZyBhbmQgbW9uaXRvcmluZyBjb2RlIGZvciB0aGUga2V5IHdhcm5pbmdzLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VUeXBlIEEga2V5IHVzZWQgZm9yIGRlLWR1cGluZyB3YXJuaW5ncy5cbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IENvbXBvbmVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICogQHJldHVybnMgez9vYmplY3R9IEEgc2V0IG9mIGFkZGVuZGEgdG8gdXNlIGluIHRoZSB3YXJuaW5nIG1lc3NhZ2UsIG9yIG51bGxcbiAqIGlmIHRoZSB3YXJuaW5nIGhhcyBhbHJlYWR5IGJlZW4gc2hvd24gYmVmb3JlIChhbmQgc2hvdWxkbid0IGJlIHNob3duIGFnYWluKS5cbiAqL1xuZnVuY3Rpb24gZ2V0QWRkZW5kYUZvcktleVVzZShtZXNzYWdlVHlwZSwgZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcbiAgaWYgKCFhZGRlbmR1bSkge1xuICAgIHZhciBwYXJlbnROYW1lID0gdHlwZW9mIHBhcmVudFR5cGUgPT09ICdzdHJpbmcnID8gcGFyZW50VHlwZSA6IHBhcmVudFR5cGUuZGlzcGxheU5hbWUgfHwgcGFyZW50VHlwZS5uYW1lO1xuICAgIGlmIChwYXJlbnROYW1lKSB7XG4gICAgICBhZGRlbmR1bSA9ICcgQ2hlY2sgdGhlIHRvcC1sZXZlbCByZW5kZXIgY2FsbCB1c2luZyA8JyArIHBhcmVudE5hbWUgKyAnPi4nO1xuICAgIH1cbiAgfVxuXG4gIHZhciBtZW1vaXplciA9IG93bmVySGFzS2V5VXNlV2FybmluZ1ttZXNzYWdlVHlwZV0gfHwgKG93bmVySGFzS2V5VXNlV2FybmluZ1ttZXNzYWdlVHlwZV0gPSB7fSk7XG4gIGlmIChtZW1vaXplclthZGRlbmR1bV0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBtZW1vaXplclthZGRlbmR1bV0gPSB0cnVlO1xuXG4gIHZhciBhZGRlbmRhID0ge1xuICAgIHBhcmVudE9yT3duZXI6IGFkZGVuZHVtLFxuICAgIHVybDogJyBTZWUgaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLWtleXMgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyxcbiAgICBjaGlsZE93bmVyOiBudWxsXG4gIH07XG5cbiAgLy8gVXN1YWxseSB0aGUgY3VycmVudCBvd25lciBpcyB0aGUgb2ZmZW5kZXIsIGJ1dCBpZiBpdCBhY2NlcHRzIGNoaWxkcmVuIGFzIGFcbiAgLy8gcHJvcGVydHksIGl0IG1heSBiZSB0aGUgY3JlYXRvciBvZiB0aGUgY2hpbGQgdGhhdCdzIHJlc3BvbnNpYmxlIGZvclxuICAvLyBhc3NpZ25pbmcgaXQgYSBrZXkuXG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuX293bmVyICYmIGVsZW1lbnQuX293bmVyICE9PSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgLy8gR2l2ZSB0aGUgY29tcG9uZW50IHRoYXQgb3JpZ2luYWxseSBjcmVhdGVkIHRoaXMgY2hpbGQuXG4gICAgYWRkZW5kYS5jaGlsZE93bmVyID0gJyBJdCB3YXMgcGFzc2VkIGEgY2hpbGQgZnJvbSAnICsgZWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpICsgJy4nO1xuICB9XG5cbiAgcmV0dXJuIGFkZGVuZGE7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgZXZlcnkgZWxlbWVudCBlaXRoZXIgaXMgcGFzc2VkIGluIGEgc3RhdGljIGxvY2F0aW9uLCBpbiBhblxuICogYXJyYXkgd2l0aCBhbiBleHBsaWNpdCBrZXlzIHByb3BlcnR5IGRlZmluZWQsIG9yIGluIGFuIG9iamVjdCBsaXRlcmFsXG4gKiB3aXRoIHZhbGlkIGtleSBwcm9wZXJ0eS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlIFN0YXRpY2FsbHkgcGFzc2VkIGNoaWxkIG9mIGFueSB0eXBlLlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIG5vZGUncyBwYXJlbnQncyB0eXBlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUNoaWxkS2V5cyhub2RlLCBwYXJlbnRUeXBlKSB7XG4gIGlmICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XG4gICAgICBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICB2YWxpZGF0ZUV4cGxpY2l0S2V5KGNoaWxkLCBwYXJlbnRUeXBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KG5vZGUpKSB7XG4gICAgLy8gVGhpcyBlbGVtZW50IHdhcyBwYXNzZWQgaW4gYSB2YWxpZCBsb2NhdGlvbi5cbiAgICBpZiAobm9kZS5fc3RvcmUpIHtcbiAgICAgIG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKG5vZGUpIHtcbiAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obm9kZSk7XG4gICAgLy8gRW50cnkgaXRlcmF0b3JzIHByb3ZpZGUgaW1wbGljaXQga2V5cy5cbiAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IG5vZGUuZW50cmllcykge1xuICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwobm9kZSk7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzdGVwLnZhbHVlKSkge1xuICAgICAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShzdGVwLnZhbHVlLCBwYXJlbnRUeXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhhdCB0aGUgcHJvcHMgYXJlIHZhbGlkXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudE5hbWUgTmFtZSBvZiB0aGUgY29tcG9uZW50IGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wVHlwZXMgTWFwIG9mIHByb3AgbmFtZSB0byBhIFJlYWN0UHJvcFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gXCJwcm9wXCIsIFwiY29udGV4dFwiLCBcImNoaWxkIGNvbnRleHRcIlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tQcm9wVHlwZXMoY29tcG9uZW50TmFtZSwgcHJvcFR5cGVzLCBwcm9wcywgbG9jYXRpb24pIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcFR5cGVzKSB7XG4gICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgIHZhciBlcnJvcjtcbiAgICAgIC8vIFByb3AgdHlwZSB2YWxpZGF0aW9uIG1heSB0aHJvdy4gSW4gY2FzZSB0aGV5IGRvLCB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAvLyBmYWlsIHRoZSByZW5kZXIgcGhhc2Ugd2hlcmUgaXQgZGlkbid0IGZhaWwgYmVmb3JlLiBTbyB3ZSBsb2cgaXQuXG4gICAgICAvLyBBZnRlciB0aGVzZSBoYXZlIGJlZW4gY2xlYW5lZCB1cCwgd2UnbGwgbGV0IHRoZW0gdGhyb3cuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcbiAgICAgICAgLy8gYmVoYXZpb3IgYXMgd2l0aG91dCB0aGlzIHN0YXRlbWVudCBleGNlcHQgd2l0aCBhIGJldHRlciBtZXNzYWdlLlxuICAgICAgICAhKHR5cGVvZiBwcm9wVHlwZXNbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgKyAnUmVhY3QuUHJvcFR5cGVzLicsIGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBlcnJvciA9IHByb3BUeXBlc1twcm9wTmFtZV0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgbnVsbCwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJyk7XG4gICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgfVxuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWVycm9yIHx8IGVycm9yIGluc3RhbmNlb2YgRXJyb3IsICclczogdHlwZSBzcGVjaWZpY2F0aW9uIG9mICVzIGAlc2AgaXMgaW52YWxpZDsgdGhlIHR5cGUgY2hlY2tlciAnICsgJ2Z1bmN0aW9uIG11c3QgcmV0dXJuIGBudWxsYCBvciBhbiBgRXJyb3JgIGJ1dCByZXR1cm5lZCBhICVzLiAnICsgJ1lvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgdHlwZSBjaGVja2VyICcgKyAnY3JlYXRvciAoYXJyYXlPZiwgaW5zdGFuY2VPZiwgb2JqZWN0T2YsIG9uZU9mLCBvbmVPZlR5cGUsIGFuZCAnICsgJ3NoYXBlIGFsbCByZXF1aXJlIGFuIGFyZ3VtZW50KS4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUsIHR5cGVvZiBlcnJvcikgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkge1xuICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbiAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTtcblxuICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWlsZWQgcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gZWxlbWVudCwgdmFsaWRhdGUgdGhhdCBpdHMgcHJvcHMgZm9sbG93IHRoZSBwcm9wVHlwZXMgZGVmaW5pdGlvbixcbiAqIHByb3ZpZGVkIGJ5IHRoZSB0eXBlLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcFR5cGVzKGVsZW1lbnQpIHtcbiAgdmFyIGNvbXBvbmVudENsYXNzID0gZWxlbWVudC50eXBlO1xuICBpZiAodHlwZW9mIGNvbXBvbmVudENsYXNzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuYW1lID0gY29tcG9uZW50Q2xhc3MuZGlzcGxheU5hbWUgfHwgY29tcG9uZW50Q2xhc3MubmFtZTtcbiAgaWYgKGNvbXBvbmVudENsYXNzLnByb3BUeXBlcykge1xuICAgIGNoZWNrUHJvcFR5cGVzKG5hbWUsIGNvbXBvbmVudENsYXNzLnByb3BUeXBlcywgZWxlbWVudC5wcm9wcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgfVxuICBpZiAodHlwZW9mIGNvbXBvbmVudENsYXNzLmdldERlZmF1bHRQcm9wcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGNvbXBvbmVudENsYXNzLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldERlZmF1bHRQcm9wcyBpcyBvbmx5IHVzZWQgb24gY2xhc3NpYyBSZWFjdC5jcmVhdGVDbGFzcyAnICsgJ2RlZmluaXRpb25zLiBVc2UgYSBzdGF0aWMgcHJvcGVydHkgbmFtZWQgYGRlZmF1bHRQcm9wc2AgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0ge1xuXG4gIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uICh0eXBlLCBwcm9wcywgY2hpbGRyZW4pIHtcbiAgICB2YXIgdmFsaWRUeXBlID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nO1xuICAgIC8vIFdlIHdhcm4gaW4gdGhpcyBjYXNlIGJ1dCBkb24ndCB0aHJvdy4gV2UgZXhwZWN0IHRoZSBlbGVtZW50IGNyZWF0aW9uIHRvXG4gICAgLy8gc3VjY2VlZCBhbmQgdGhlcmUgd2lsbCBsaWtlbHkgYmUgZXJyb3JzIGluIHJlbmRlci5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh2YWxpZFR5cGUsICdSZWFjdC5jcmVhdGVFbGVtZW50OiB0eXBlIHNob3VsZCBub3QgYmUgbnVsbCwgdW5kZWZpbmVkLCBib29sZWFuLCBvciAnICsgJ251bWJlci4gSXQgc2hvdWxkIGJlIGEgc3RyaW5nIChmb3IgRE9NIGVsZW1lbnRzKSBvciBhIFJlYWN0Q2xhc3MgJyArICcoZm9yIGNvbXBvc2l0ZSBjb21wb25lbnRzKS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBlbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIC8vIFRoZSByZXN1bHQgY2FuIGJlIG51bGxpc2ggaWYgYSBtb2NrIG9yIGEgY3VzdG9tIGZ1bmN0aW9uIGlzIHVzZWQuXG4gICAgLy8gVE9ETzogRHJvcCB0aGlzIHdoZW4gdGhlc2UgYXJlIG5vIGxvbmdlciBhbGxvd2VkIGFzIHRoZSB0eXBlIGFyZ3VtZW50LlxuICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIC8vIFNraXAga2V5IHdhcm5pbmcgaWYgdGhlIHR5cGUgaXNuJ3QgdmFsaWQgc2luY2Ugb3VyIGtleSB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gZG9lc24ndCBleHBlY3QgYSBub24tc3RyaW5nL2Z1bmN0aW9uIHR5cGUgYW5kIGNhbiB0aHJvdyBjb25mdXNpbmcgZXJyb3JzLlxuICAgIC8vIFdlIGRvbid0IHdhbnQgZXhjZXB0aW9uIGJlaGF2aW9yIHRvIGRpZmZlciBiZXR3ZWVuIGRldiBhbmQgcHJvZC5cbiAgICAvLyAoUmVuZGVyaW5nIHdpbGwgdGhyb3cgd2l0aCBhIGhlbHBmdWwgbWVzc2FnZSBhbmQgYXMgc29vbiBhcyB0aGUgdHlwZSBpc1xuICAgIC8vIGZpeGVkLCB0aGUga2V5IHdhcm5pbmdzIHdpbGwgYXBwZWFyLilcbiAgICBpZiAodmFsaWRUeXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIHR5cGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhbGlkYXRlUHJvcFR5cGVzKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH0sXG5cbiAgY3JlYXRlRmFjdG9yeTogZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgdmFsaWRhdGVkRmFjdG9yeSA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7XG4gICAgLy8gTGVnYWN5IGhvb2sgVE9ETzogV2FybiBpZiB0aGlzIGlzIGFjY2Vzc2VkXG4gICAgdmFsaWRhdGVkRmFjdG9yeS50eXBlID0gdHlwZTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbGlkYXRlZEZhY3RvcnksICd0eXBlJywge1xuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWN0b3J5LnR5cGUgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHRoZSBjbGFzcyBkaXJlY3RseSAnICsgJ2JlZm9yZSBwYXNzaW5nIGl0IHRvIGNyZWF0ZUZhY3RvcnkuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3R5cGUnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiB0eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRlZEZhY3Rvcnk7XG4gIH0sXG5cbiAgY2xvbmVFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbGlkYXRlQ2hpbGRLZXlzKGFyZ3VtZW50c1tpXSwgbmV3RWxlbWVudC50eXBlKTtcbiAgICB9XG4gICAgdmFsaWRhdGVQcm9wVHlwZXMobmV3RWxlbWVudCk7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3I7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RW1wdHlDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeSA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5Jyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xuXG52YXIgcGxhY2Vob2xkZXJFbGVtZW50O1xuXG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudEluamVjdGlvbiA9IHtcbiAgaW5qZWN0RW1wdHlDb21wb25lbnQ6IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICBwbGFjZWhvbGRlckVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudChjb21wb25lbnQpO1xuICB9XG59O1xuXG5mdW5jdGlvbiByZWdpc3Rlck51bGxDb21wb25lbnRJRCgpIHtcbiAgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LnJlZ2lzdGVyTnVsbENvbXBvbmVudElEKHRoaXMuX3Jvb3ROb2RlSUQpO1xufVxuXG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IGZ1bmN0aW9uIChpbnN0YW50aWF0ZSkge1xuICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG51bGw7XG4gIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IGluc3RhbnRpYXRlKHBsYWNlaG9sZGVyRWxlbWVudCk7XG59O1xuYXNzaWduKFJlYWN0RW1wdHlDb21wb25lbnQucHJvdG90eXBlLCB7XG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGVsZW1lbnQpIHt9LFxuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKHJlZ2lzdGVyTnVsbENvbXBvbmVudElELCB0aGlzKTtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuICAgIHJldHVybiBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICB9LFxuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAoKSB7fSxcbiAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCk7XG4gICAgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LmRlcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuICB9XG59KTtcblxuUmVhY3RFbXB0eUNvbXBvbmVudC5pbmplY3Rpb24gPSBSZWFjdEVtcHR5Q29tcG9uZW50SW5qZWN0aW9uO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RW1wdHlDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gVGhpcyByZWdpc3RyeSBrZWVwcyB0cmFjayBvZiB0aGUgUmVhY3QgSURzIG9mIHRoZSBjb21wb25lbnRzIHRoYXQgcmVuZGVyZWQgdG9cbi8vIGBudWxsYCAoaW4gcmVhbGl0eSBhIHBsYWNlaG9sZGVyIHN1Y2ggYXMgYG5vc2NyaXB0YClcbnZhciBudWxsQ29tcG9uZW50SURzUmVnaXN0cnkgPSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ29tcG9uZW50J3MgYF9yb290Tm9kZUlEYC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGNvbXBvbmVudCBpcyByZW5kZXJlZCB0byBudWxsLlxuICovXG5mdW5jdGlvbiBpc051bGxDb21wb25lbnRJRChpZCkge1xuICByZXR1cm4gISFudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdO1xufVxuXG4vKipcbiAqIE1hcmsgdGhlIGNvbXBvbmVudCBhcyBoYXZpbmcgcmVuZGVyZWQgdG8gbnVsbC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDb21wb25lbnQncyBgX3Jvb3ROb2RlSURgLlxuICovXG5mdW5jdGlvbiByZWdpc3Rlck51bGxDb21wb25lbnRJRChpZCkge1xuICBudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBVbm1hcmsgdGhlIGNvbXBvbmVudCBhcyBoYXZpbmcgcmVuZGVyZWQgdG8gbnVsbDogaXQgcmVuZGVycyB0byBzb21ldGhpbmcgbm93LlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG4gKi9cbmZ1bmN0aW9uIGRlcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgZGVsZXRlIG51bGxDb21wb25lbnRJRHNSZWdpc3RyeVtpZF07XG59XG5cbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSB7XG4gIGlzTnVsbENvbXBvbmVudElEOiBpc051bGxDb21wb25lbnRJRCxcbiAgcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQ6IHJlZ2lzdGVyTnVsbENvbXBvbmVudElELFxuICBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFcnJvclV0aWxzXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhdWdodEVycm9yID0gbnVsbDtcblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gd2hpbGUgZ3VhcmRpbmcgYWdhaW5zdCBlcnJvcnMgdGhhdCBoYXBwZW5zIHdpdGhpbiBpdC5cbiAqXG4gKiBAcGFyYW0gez9TdHJpbmd9IG5hbWUgb2YgdGhlIGd1YXJkIHRvIHVzZSBmb3IgbG9nZ2luZyBvciBkZWJ1Z2dpbmdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZVxuICogQHBhcmFtIHsqfSBhIEZpcnN0IGFyZ3VtZW50XG4gKiBAcGFyYW0geyp9IGIgU2Vjb25kIGFyZ3VtZW50XG4gKi9cbmZ1bmN0aW9uIGludm9rZUd1YXJkZWRDYWxsYmFjayhuYW1lLCBmdW5jLCBhLCBiKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZ1bmMoYSwgYik7XG4gIH0gY2F0Y2ggKHgpIHtcbiAgICBpZiAoY2F1Z2h0RXJyb3IgPT09IG51bGwpIHtcbiAgICAgIGNhdWdodEVycm9yID0geDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG52YXIgUmVhY3RFcnJvclV0aWxzID0ge1xuICBpbnZva2VHdWFyZGVkQ2FsbGJhY2s6IGludm9rZUd1YXJkZWRDYWxsYmFjayxcblxuICAvKipcbiAgICogSW52b2tlZCBieSBSZWFjdFRlc3RVdGlscy5TaW11bGF0ZSBzbyB0aGF0IGFueSBlcnJvcnMgdGhyb3duIGJ5IHRoZSBldmVudFxuICAgKiBoYW5kbGVyIGFyZSBzdXJlIHRvIGJlIHJldGhyb3duIGJ5IHJldGhyb3dDYXVnaHRFcnJvci5cbiAgICovXG4gIGludm9rZUd1YXJkZWRDYWxsYmFja1dpdGhDYXRjaDogaW52b2tlR3VhcmRlZENhbGxiYWNrLFxuXG4gIC8qKlxuICAgKiBEdXJpbmcgZXhlY3V0aW9uIG9mIGd1YXJkZWQgZnVuY3Rpb25zIHdlIHdpbGwgY2FwdHVyZSB0aGUgZmlyc3QgZXJyb3Igd2hpY2hcbiAgICogd2Ugd2lsbCByZXRocm93IHRvIGJlIGhhbmRsZWQgYnkgdGhlIHRvcCBsZXZlbCBlcnJvciBoYW5kbGVyLlxuICAgKi9cbiAgcmV0aHJvd0NhdWdodEVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNhdWdodEVycm9yKSB7XG4gICAgICB2YXIgZXJyb3IgPSBjYXVnaHRFcnJvcjtcbiAgICAgIGNhdWdodEVycm9yID0gbnVsbDtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufTtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLyoqXG4gICAqIFRvIGhlbHAgZGV2ZWxvcG1lbnQgd2UgY2FuIGdldCBiZXR0ZXIgZGV2dG9vbHMgaW50ZWdyYXRpb24gYnkgc2ltdWxhdGluZyBhXG4gICAqIHJlYWwgYnJvd3NlciBldmVudC5cbiAgICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRpc3BhdGNoRXZlbnQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgZmFrZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdyZWFjdCcpO1xuICAgIFJlYWN0RXJyb3JVdGlscy5pbnZva2VHdWFyZGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAobmFtZSwgZnVuYywgYSwgYikge1xuICAgICAgdmFyIGJvdW5kRnVuYyA9IGZ1bmMuYmluZChudWxsLCBhLCBiKTtcbiAgICAgIHZhciBldnRUeXBlID0gJ3JlYWN0LScgKyBuYW1lO1xuICAgICAgZmFrZU5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldnRUeXBlLCBib3VuZEZ1bmMsIGZhbHNlKTtcbiAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgIGV2dC5pbml0RXZlbnQoZXZ0VHlwZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgIGZha2VOb2RlLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgIGZha2VOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RXJyb3JVdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudEVtaXR0ZXJNaXhpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xuXG5mdW5jdGlvbiBydW5FdmVudFF1ZXVlSW5CYXRjaChldmVudHMpIHtcbiAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudHMpO1xuICBFdmVudFBsdWdpbkh1Yi5wcm9jZXNzRXZlbnRRdWV1ZShmYWxzZSk7XG59XG5cbnZhciBSZWFjdEV2ZW50RW1pdHRlck1peGluID0ge1xuXG4gIC8qKlxuICAgKiBTdHJlYW1zIGEgZmlyZWQgdG9wLWxldmVsIGV2ZW50IHRvIGBFdmVudFBsdWdpbkh1YmAgd2hlcmUgcGx1Z2lucyBoYXZlIHRoZVxuICAgKiBvcHBvcnR1bml0eSB0byBjcmVhdGUgYFJlYWN0RXZlbnRgcyB0byBiZSBkaXNwYXRjaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgZW52aXJvbm1lbnQgZXZlbnQuXG4gICAqL1xuICBoYW5kbGVUb3BMZXZlbDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBldmVudHMgPSBFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgcnVuRXZlbnRRdWV1ZUluQmF0Y2goZXZlbnRzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEV2ZW50RW1pdHRlck1peGluOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEV2ZW50TGlzdGVuZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRMaXN0ZW5lciA9IHJlcXVpcmUoJ2ZianMvbGliL0V2ZW50TGlzdGVuZXInKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBnZXRFdmVudFRhcmdldCA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRUYXJnZXQnKTtcbnZhciBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2dldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uJyk7XG5cbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUgPSAxMTtcblxuLyoqXG4gKiBGaW5kcyB0aGUgcGFyZW50IFJlYWN0IGNvbXBvbmVudCBvZiBgbm9kZWAuXG4gKlxuICogQHBhcmFtIHsqfSBub2RlXG4gKiBAcmV0dXJuIHs/RE9NRXZlbnRUYXJnZXR9IFBhcmVudCBjb250YWluZXIsIG9yIGBudWxsYCBpZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgbm90IG5lc3RlZC5cbiAqL1xuZnVuY3Rpb24gZmluZFBhcmVudChub2RlKSB7XG4gIC8vIFRPRE86IEl0IG1heSBiZSBhIGdvb2QgaWRlYSB0byBjYWNoZSB0aGlzIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgRE9NXG4gIC8vIHRyYXZlcnNhbCwgYnV0IGNhY2hpbmcgaXMgZGlmZmljdWx0IHRvIGRvIGNvcnJlY3RseSB3aXRob3V0IHVzaW5nIGFcbiAgLy8gbXV0YXRpb24gb2JzZXJ2ZXIgdG8gbGlzdGVuIGZvciBhbGwgRE9NIGNoYW5nZXMuXG4gIHZhciBub2RlSUQgPSBSZWFjdE1vdW50LmdldElEKG5vZGUpO1xuICB2YXIgcm9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKG5vZGVJRCk7XG4gIHZhciBjb250YWluZXIgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKHJvb3RJRCk7XG4gIHZhciBwYXJlbnQgPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET00oY29udGFpbmVyKTtcbiAgcmV0dXJuIHBhcmVudDtcbn1cblxuLy8gVXNlZCB0byBzdG9yZSBhbmNlc3RvciBoaWVyYXJjaHkgaW4gdG9wIGxldmVsIGNhbGxiYWNrXG5mdW5jdGlvbiBUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICB0aGlzLnRvcExldmVsVHlwZSA9IHRvcExldmVsVHlwZTtcbiAgdGhpcy5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuICB0aGlzLmFuY2VzdG9ycyA9IFtdO1xufVxuYXNzaWduKFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5wcm90b3R5cGUsIHtcbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudG9wTGV2ZWxUeXBlID0gbnVsbDtcbiAgICB0aGlzLm5hdGl2ZUV2ZW50ID0gbnVsbDtcbiAgICB0aGlzLmFuY2VzdG9ycy5sZW5ndGggPSAwO1xuICB9XG59KTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcsIFBvb2xlZENsYXNzLnR3b0FyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gaGFuZGxlVG9wTGV2ZWxJbXBsKGJvb2tLZWVwaW5nKSB7XG4gIC8vIFRPRE86IFJlLWVuYWJsZSBldmVudC5wYXRoIGhhbmRsaW5nXG4gIC8vXG4gIC8vIGlmIChib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoICYmIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LnBhdGgubGVuZ3RoID4gMSkge1xuICAvLyAgIC8vIE5ldyBicm93c2VycyBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuICAvLyAgIGhhbmRsZVRvcExldmVsV2l0aFBhdGgoYm9va0tlZXBpbmcpO1xuICAvLyB9IGVsc2Uge1xuICAvLyAgIC8vIExlZ2FjeSBicm93c2VycyBkb24ndCBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuICAvLyAgIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpO1xuICAvLyB9XG5cbiAgdm9pZCBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoOyAvLyB0ZW1wb3JhcmlseSB1bnVzZWRcbiAgaGFuZGxlVG9wTGV2ZWxXaXRob3V0UGF0aChib29rS2VlcGluZyk7XG59XG5cbi8vIExlZ2FjeSBicm93c2VycyBkb24ndCBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuZnVuY3Rpb24gaGFuZGxlVG9wTGV2ZWxXaXRob3V0UGF0aChib29rS2VlcGluZykge1xuICB2YXIgdG9wTGV2ZWxUYXJnZXQgPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET00oZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKSB8fCB3aW5kb3c7XG5cbiAgLy8gTG9vcCB0aHJvdWdoIHRoZSBoaWVyYXJjaHksIGluIGNhc2UgdGhlcmUncyBhbnkgbmVzdGVkIGNvbXBvbmVudHMuXG4gIC8vIEl0J3MgaW1wb3J0YW50IHRoYXQgd2UgYnVpbGQgdGhlIGFycmF5IG9mIGFuY2VzdG9ycyBiZWZvcmUgY2FsbGluZyBhbnlcbiAgLy8gZXZlbnQgaGFuZGxlcnMsIGJlY2F1c2UgZXZlbnQgaGFuZGxlcnMgY2FuIG1vZGlmeSB0aGUgRE9NLCBsZWFkaW5nIHRvXG4gIC8vIGluY29uc2lzdGVuY2llcyB3aXRoIFJlYWN0TW91bnQncyBub2RlIGNhY2hlLiBTZWUgIzExMDUuXG4gIHZhciBhbmNlc3RvciA9IHRvcExldmVsVGFyZ2V0O1xuICB3aGlsZSAoYW5jZXN0b3IpIHtcbiAgICBib29rS2VlcGluZy5hbmNlc3RvcnMucHVzaChhbmNlc3Rvcik7XG4gICAgYW5jZXN0b3IgPSBmaW5kUGFyZW50KGFuY2VzdG9yKTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYm9va0tlZXBpbmcuYW5jZXN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgdG9wTGV2ZWxUYXJnZXQgPSBib29rS2VlcGluZy5hbmNlc3RvcnNbaV07XG4gICAgdmFyIHRvcExldmVsVGFyZ2V0SUQgPSBSZWFjdE1vdW50LmdldElEKHRvcExldmVsVGFyZ2V0KSB8fCAnJztcbiAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2hhbmRsZVRvcExldmVsKGJvb2tLZWVwaW5nLnRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChib29rS2VlcGluZy5uYXRpdmVFdmVudCkpO1xuICB9XG59XG5cbi8vIE5ldyBicm93c2VycyBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuZnVuY3Rpb24gaGFuZGxlVG9wTGV2ZWxXaXRoUGF0aChib29rS2VlcGluZykge1xuICB2YXIgcGF0aCA9IGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LnBhdGg7XG4gIHZhciBjdXJyZW50TmF0aXZlVGFyZ2V0ID0gcGF0aFswXTtcbiAgdmFyIGV2ZW50c0ZpcmVkID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGN1cnJlbnRQYXRoRWxlbWVudCA9IHBhdGhbaV07XG4gICAgaWYgKGN1cnJlbnRQYXRoRWxlbWVudC5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFKSB7XG4gICAgICBjdXJyZW50TmF0aXZlVGFyZ2V0ID0gcGF0aFtpICsgMV07XG4gICAgfVxuICAgIC8vIFRPRE86IHNsb3dcbiAgICB2YXIgcmVhY3RQYXJlbnQgPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET00oY3VycmVudFBhdGhFbGVtZW50KTtcbiAgICBpZiAocmVhY3RQYXJlbnQgPT09IGN1cnJlbnRQYXRoRWxlbWVudCkge1xuICAgICAgdmFyIGN1cnJlbnRQYXRoRWxlbWVudElEID0gUmVhY3RNb3VudC5nZXRJRChjdXJyZW50UGF0aEVsZW1lbnQpO1xuICAgICAgdmFyIG5ld1Jvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChjdXJyZW50UGF0aEVsZW1lbnRJRCk7XG4gICAgICBib29rS2VlcGluZy5hbmNlc3RvcnMucHVzaChjdXJyZW50UGF0aEVsZW1lbnQpO1xuXG4gICAgICB2YXIgdG9wTGV2ZWxUYXJnZXRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY3VycmVudFBhdGhFbGVtZW50KSB8fCAnJztcbiAgICAgIGV2ZW50c0ZpcmVkKys7XG4gICAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2hhbmRsZVRvcExldmVsKGJvb2tLZWVwaW5nLnRvcExldmVsVHlwZSwgY3VycmVudFBhdGhFbGVtZW50LCB0b3BMZXZlbFRhcmdldElELCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgY3VycmVudE5hdGl2ZVRhcmdldCk7XG5cbiAgICAgIC8vIEp1bXAgdG8gdGhlIHJvb3Qgb2YgdGhpcyBSZWFjdCByZW5kZXIgdHJlZVxuICAgICAgd2hpbGUgKGN1cnJlbnRQYXRoRWxlbWVudElEICE9PSBuZXdSb290SUQpIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBjdXJyZW50UGF0aEVsZW1lbnQgPSBwYXRoW2ldO1xuICAgICAgICBjdXJyZW50UGF0aEVsZW1lbnRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY3VycmVudFBhdGhFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGV2ZW50c0ZpcmVkID09PSAwKSB7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIHdpbmRvdywgJycsIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChib29rS2VlcGluZy5uYXRpdmVFdmVudCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNjcm9sbFZhbHVlTW9uaXRvcihjYikge1xuICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbih3aW5kb3cpO1xuICBjYihzY3JvbGxQb3NpdGlvbik7XG59XG5cbnZhciBSZWFjdEV2ZW50TGlzdGVuZXIgPSB7XG4gIF9lbmFibGVkOiB0cnVlLFxuICBfaGFuZGxlVG9wTGV2ZWw6IG51bGwsXG5cbiAgV0lORE9XX0hBTkRMRTogRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gd2luZG93IDogbnVsbCxcblxuICBzZXRIYW5kbGVUb3BMZXZlbDogZnVuY3Rpb24gKGhhbmRsZVRvcExldmVsKSB7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbCA9IGhhbmRsZVRvcExldmVsO1xuICB9LFxuXG4gIHNldEVuYWJsZWQ6IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkID0gISFlbmFibGVkO1xuICB9LFxuXG4gIGlzRW5hYmxlZDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBSZWFjdEV2ZW50TGlzdGVuZXIuX2VuYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXBzIHRvcC1sZXZlbCBldmVudHMgYnkgdXNpbmcgZXZlbnQgYnViYmxpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhbmRsZXJCYXNlTmFtZSBFdmVudCBuYW1lIChlLmcuIFwiY2xpY2tcIikuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGUgRWxlbWVudCBvbiB3aGljaCB0byBhdHRhY2ggbGlzdGVuZXIuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgcmVtb3ZlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZm9yY2VmdWxseVxuICAgKiAgICAgICAgICAgICAgICAgIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhcEJ1YmJsZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICB2YXIgZWxlbWVudCA9IGhhbmRsZTtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gRXZlbnRMaXN0ZW5lci5saXN0ZW4oZWxlbWVudCwgaGFuZGxlckJhc2VOYW1lLCBSZWFjdEV2ZW50TGlzdGVuZXIuZGlzcGF0Y2hFdmVudC5iaW5kKG51bGwsIHRvcExldmVsVHlwZSkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmFwcyBhIHRvcC1sZXZlbCBldmVudCBieSB1c2luZyBldmVudCBjYXB0dXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhbmRsZXJCYXNlTmFtZSBFdmVudCBuYW1lIChlLmcuIFwiY2xpY2tcIikuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGUgRWxlbWVudCBvbiB3aGljaCB0byBhdHRhY2ggbGlzdGVuZXIuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgcmVtb3ZlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZm9yY2VmdWxseVxuICAgKiAgICAgICAgICAgICAgICAgIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhcENhcHR1cmVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBoYW5kbGU7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXIuY2FwdHVyZShlbGVtZW50LCBoYW5kbGVyQmFzZU5hbWUsIFJlYWN0RXZlbnRMaXN0ZW5lci5kaXNwYXRjaEV2ZW50LmJpbmQobnVsbCwgdG9wTGV2ZWxUeXBlKSk7XG4gIH0sXG5cbiAgbW9uaXRvclNjcm9sbFZhbHVlOiBmdW5jdGlvbiAocmVmcmVzaCkge1xuICAgIHZhciBjYWxsYmFjayA9IHNjcm9sbFZhbHVlTW9uaXRvci5iaW5kKG51bGwsIHJlZnJlc2gpO1xuICAgIEV2ZW50TGlzdGVuZXIubGlzdGVuKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGxiYWNrKTtcbiAgfSxcblxuICBkaXNwYXRjaEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICAgIGlmICghUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGJvb2tLZWVwaW5nID0gVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLmdldFBvb2xlZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KTtcbiAgICB0cnkge1xuICAgICAgLy8gRXZlbnQgcXVldWUgYmVpbmcgcHJvY2Vzc2VkIGluIHRoZSBzYW1lIGN5Y2xlIGFsbG93c1xuICAgICAgLy8gYHByZXZlbnREZWZhdWx0YC5cbiAgICAgIFJlYWN0VXBkYXRlcy5iYXRjaGVkVXBkYXRlcyhoYW5kbGVUb3BMZXZlbEltcGwsIGJvb2tLZWVwaW5nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLnJlbGVhc2UoYm9va0tlZXBpbmcpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEV2ZW50TGlzdGVuZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5qZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0Q2xhc3MgPSByZXF1aXJlKCcuL1JlYWN0Q2xhc3MnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVtcHR5Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnLi9SZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInKTtcbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3ROYXRpdmVDb21wb25lbnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9SZWFjdFJvb3RJbmRleCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBSZWFjdEluamVjdGlvbiA9IHtcbiAgQ29tcG9uZW50OiBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LmluamVjdGlvbixcbiAgQ2xhc3M6IFJlYWN0Q2xhc3MuaW5qZWN0aW9uLFxuICBET01Qcm9wZXJ0eTogRE9NUHJvcGVydHkuaW5qZWN0aW9uLFxuICBFbXB0eUNvbXBvbmVudDogUmVhY3RFbXB0eUNvbXBvbmVudC5pbmplY3Rpb24sXG4gIEV2ZW50UGx1Z2luSHViOiBFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24sXG4gIEV2ZW50RW1pdHRlcjogUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmluamVjdGlvbixcbiAgTmF0aXZlQ29tcG9uZW50OiBSZWFjdE5hdGl2ZUNvbXBvbmVudC5pbmplY3Rpb24sXG4gIFBlcmY6IFJlYWN0UGVyZi5pbmplY3Rpb24sXG4gIFJvb3RJbmRleDogUmVhY3RSb290SW5kZXguaW5qZWN0aW9uLFxuICBVcGRhdGVzOiBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5qZWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdElucHV0U2VsZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01TZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0RE9NU2VsZWN0aW9uJyk7XG5cbnZhciBjb250YWluc05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9jb250YWluc05vZGUnKTtcbnZhciBmb2N1c05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9mb2N1c05vZGUnKTtcbnZhciBnZXRBY3RpdmVFbGVtZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudCcpO1xuXG5mdW5jdGlvbiBpc0luRG9jdW1lbnQobm9kZSkge1xuICByZXR1cm4gY29udGFpbnNOb2RlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgbm9kZSk7XG59XG5cbi8qKlxuICogQFJlYWN0SW5wdXRTZWxlY3Rpb246IFJlYWN0IGlucHV0IHNlbGVjdGlvbiBtb2R1bGUuIEJhc2VkIG9uIFNlbGVjdGlvbi5qcyxcbiAqIGJ1dCBtb2RpZmllZCB0byBiZSBzdWl0YWJsZSBmb3IgcmVhY3QgYW5kIGhhcyBhIGNvdXBsZSBvZiBidWcgZml4ZXMgKGRvZXNuJ3RcbiAqIGFzc3VtZSBidXR0b25zIGhhdmUgcmFuZ2Ugc2VsZWN0aW9ucyBhbGxvd2VkKS5cbiAqIElucHV0IHNlbGVjdGlvbiBtb2R1bGUgZm9yIFJlYWN0LlxuICovXG52YXIgUmVhY3RJbnB1dFNlbGVjdGlvbiA9IHtcblxuICBoYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXM6IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgdmFyIG5vZGVOYW1lID0gZWxlbSAmJiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbm9kZU5hbWUgJiYgKG5vZGVOYW1lID09PSAnaW5wdXQnICYmIGVsZW0udHlwZSA9PT0gJ3RleHQnIHx8IG5vZGVOYW1lID09PSAndGV4dGFyZWEnIHx8IGVsZW0uY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpO1xuICB9LFxuXG4gIGdldFNlbGVjdGlvbkluZm9ybWF0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZvY3VzZWRFbGVtID0gZ2V0QWN0aXZlRWxlbWVudCgpO1xuICAgIHJldHVybiB7XG4gICAgICBmb2N1c2VkRWxlbTogZm9jdXNlZEVsZW0sXG4gICAgICBzZWxlY3Rpb25SYW5nZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMoZm9jdXNlZEVsZW0pID8gUmVhY3RJbnB1dFNlbGVjdGlvbi5nZXRTZWxlY3Rpb24oZm9jdXNlZEVsZW0pIDogbnVsbFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXN0b3JlU2VsZWN0aW9uOiBJZiBhbnkgc2VsZWN0aW9uIGluZm9ybWF0aW9uIHdhcyBwb3RlbnRpYWxseSBsb3N0LFxuICAgKiByZXN0b3JlIGl0LiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHBlcmZvcm1pbmcgb3BlcmF0aW9ucyB0aGF0IGNvdWxkIHJlbW92ZSBkb21cbiAgICogbm9kZXMgYW5kIHBsYWNlIHRoZW0gYmFjayBpbiwgcmVzdWx0aW5nIGluIGZvY3VzIGJlaW5nIGxvc3QuXG4gICAqL1xuICByZXN0b3JlU2VsZWN0aW9uOiBmdW5jdGlvbiAocHJpb3JTZWxlY3Rpb25JbmZvcm1hdGlvbikge1xuICAgIHZhciBjdXJGb2N1c2VkRWxlbSA9IGdldEFjdGl2ZUVsZW1lbnQoKTtcbiAgICB2YXIgcHJpb3JGb2N1c2VkRWxlbSA9IHByaW9yU2VsZWN0aW9uSW5mb3JtYXRpb24uZm9jdXNlZEVsZW07XG4gICAgdmFyIHByaW9yU2VsZWN0aW9uUmFuZ2UgPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLnNlbGVjdGlvblJhbmdlO1xuICAgIGlmIChjdXJGb2N1c2VkRWxlbSAhPT0gcHJpb3JGb2N1c2VkRWxlbSAmJiBpc0luRG9jdW1lbnQocHJpb3JGb2N1c2VkRWxlbSkpIHtcbiAgICAgIGlmIChSZWFjdElucHV0U2VsZWN0aW9uLmhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyhwcmlvckZvY3VzZWRFbGVtKSkge1xuICAgICAgICBSZWFjdElucHV0U2VsZWN0aW9uLnNldFNlbGVjdGlvbihwcmlvckZvY3VzZWRFbGVtLCBwcmlvclNlbGVjdGlvblJhbmdlKTtcbiAgICAgIH1cbiAgICAgIGZvY3VzTm9kZShwcmlvckZvY3VzZWRFbGVtKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBnZXRTZWxlY3Rpb246IEdldHMgdGhlIHNlbGVjdGlvbiBib3VuZHMgb2YgYSBmb2N1c2VkIHRleHRhcmVhLCBpbnB1dCBvclxuICAgKiBjb250ZW50RWRpdGFibGUgbm9kZS5cbiAgICogLUBpbnB1dDogTG9vayB1cCBzZWxlY3Rpb24gYm91bmRzIG9mIHRoaXMgaW5wdXRcbiAgICogLUByZXR1cm4ge3N0YXJ0OiBzZWxlY3Rpb25TdGFydCwgZW5kOiBzZWxlY3Rpb25FbmR9XG4gICAqL1xuICBnZXRTZWxlY3Rpb246IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHZhciBzZWxlY3Rpb247XG5cbiAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuICAgICAgLy8gTW9kZXJuIGJyb3dzZXIgd2l0aCBpbnB1dCBvciB0ZXh0YXJlYS5cbiAgICAgIHNlbGVjdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IGlucHV0LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICBlbmQ6IGlucHV0LnNlbGVjdGlvbkVuZFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcbiAgICAgIC8vIElFOCBpbnB1dC5cbiAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgLy8gVGhlcmUgY2FuIG9ubHkgYmUgb25lIHNlbGVjdGlvbiBwZXIgZG9jdW1lbnQgaW4gSUUsIHNvIGl0IG11c3RcbiAgICAgIC8vIGJlIGluIG91ciBlbGVtZW50LlxuICAgICAgaWYgKHJhbmdlLnBhcmVudEVsZW1lbnQoKSA9PT0gaW5wdXQpIHtcbiAgICAgICAgc2VsZWN0aW9uID0ge1xuICAgICAgICAgIHN0YXJ0OiAtcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCAtaW5wdXQudmFsdWUubGVuZ3RoKSxcbiAgICAgICAgICBlbmQ6IC1yYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCAtaW5wdXQudmFsdWUubGVuZ3RoKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDb250ZW50IGVkaXRhYmxlIG9yIG9sZCBJRSB0ZXh0YXJlYS5cbiAgICAgIHNlbGVjdGlvbiA9IFJlYWN0RE9NU2VsZWN0aW9uLmdldE9mZnNldHMoaW5wdXQpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3Rpb24gfHwgeyBzdGFydDogMCwgZW5kOiAwIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBzZXRTZWxlY3Rpb246IFNldHMgdGhlIHNlbGVjdGlvbiBib3VuZHMgb2YgYSB0ZXh0YXJlYSBvciBpbnB1dCBhbmQgZm9jdXNlc1xuICAgKiB0aGUgaW5wdXQuXG4gICAqIC1AaW5wdXQgICAgIFNldCBzZWxlY3Rpb24gYm91bmRzIG9mIHRoaXMgaW5wdXQgb3IgdGV4dGFyZWFcbiAgICogLUBvZmZzZXRzICAgT2JqZWN0IG9mIHNhbWUgZm9ybSB0aGF0IGlzIHJldHVybmVkIGZyb20gZ2V0KlxuICAgKi9cbiAgc2V0U2VsZWN0aW9uOiBmdW5jdGlvbiAoaW5wdXQsIG9mZnNldHMpIHtcbiAgICB2YXIgc3RhcnQgPSBvZmZzZXRzLnN0YXJ0O1xuICAgIHZhciBlbmQgPSBvZmZzZXRzLmVuZDtcbiAgICBpZiAodHlwZW9mIGVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVuZCA9IHN0YXJ0O1xuICAgIH1cblxuICAgIGlmICgnc2VsZWN0aW9uU3RhcnQnIGluIGlucHV0KSB7XG4gICAgICBpbnB1dC5zZWxlY3Rpb25TdGFydCA9IHN0YXJ0O1xuICAgICAgaW5wdXQuc2VsZWN0aW9uRW5kID0gTWF0aC5taW4oZW5kLCBpbnB1dC52YWx1ZS5sZW5ndGgpO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIChpbnB1dC5ub2RlTmFtZSAmJiBpbnB1dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSkge1xuICAgICAgdmFyIHJhbmdlID0gaW5wdXQuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcbiAgICAgIHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgc3RhcnQpO1xuICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kIC0gc3RhcnQpO1xuICAgICAgcmFuZ2Uuc2VsZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlYWN0RE9NU2VsZWN0aW9uLnNldE9mZnNldHMoaW5wdXQsIG9mZnNldHMpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdElucHV0U2VsZWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluc3RhbmNlSGFuZGxlc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJvb3RJbmRleCA9IHJlcXVpcmUoJy4vUmVhY3RSb290SW5kZXgnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgU0VQQVJBVE9SID0gJy4nO1xudmFyIFNFUEFSQVRPUl9MRU5HVEggPSBTRVBBUkFUT1IubGVuZ3RoO1xuXG4vKipcbiAqIE1heGltdW0gZGVwdGggb2YgdHJhdmVyc2FscyBiZWZvcmUgd2UgY29uc2lkZXIgdGhlIHBvc3NpYmlsaXR5IG9mIGEgYmFkIElELlxuICovXG52YXIgTUFYX1RSRUVfREVQVEggPSAxMDAwMDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgRE9NIElEIHByZWZpeCB0byB1c2Ugd2hlbiBtb3VudGluZyBSZWFjdCBjb21wb25lbnRzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBBIHVuaXF1ZSBpbnRlZ2VyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJlYWN0IHJvb3QgSUQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0UmVhY3RSb290SURTdHJpbmcoaW5kZXgpIHtcbiAgcmV0dXJuIFNFUEFSQVRPUiArIGluZGV4LnRvU3RyaW5nKDM2KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBjaGFyYWN0ZXIgaW4gdGhlIHN1cHBsaWVkIElEIGlzIGEgc2VwYXJhdG9yIG9yIHRoZSBlbmQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIEEgUmVhY3QgRE9NIElELlxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IG9mIHRoZSBjaGFyYWN0ZXIgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjaGFyYWN0ZXIgaXMgYSBzZXBhcmF0b3Igb3IgZW5kIG9mIHRoZSBJRC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzQm91bmRhcnkoaWQsIGluZGV4KSB7XG4gIHJldHVybiBpZC5jaGFyQXQoaW5kZXgpID09PSBTRVBBUkFUT1IgfHwgaW5kZXggPT09IGlkLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHN1cHBsaWVkIHN0cmluZyBpcyBhIHZhbGlkIFJlYWN0IERPTSBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdCBET00gSUQsIG1heWJlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3RyaW5nIGlzIGEgdmFsaWQgUmVhY3QgRE9NIElELlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXNWYWxpZElEKGlkKSB7XG4gIHJldHVybiBpZCA9PT0gJycgfHwgaWQuY2hhckF0KDApID09PSBTRVBBUkFUT1IgJiYgaWQuY2hhckF0KGlkLmxlbmd0aCAtIDEpICE9PSBTRVBBUkFUT1I7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBmaXJzdCBJRCBpcyBhbiBhbmNlc3RvciBvZiBvciBlcXVhbCB0byB0aGUgc2Vjb25kIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhbmNlc3RvcklEXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzY2VuZGFudElEXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBhbmNlc3RvcklEYCBpcyBhbiBhbmNlc3RvciBvZiBgZGVzY2VuZGFudElEYC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpc0FuY2VzdG9ySURPZihhbmNlc3RvcklELCBkZXNjZW5kYW50SUQpIHtcbiAgcmV0dXJuIGRlc2NlbmRhbnRJRC5pbmRleE9mKGFuY2VzdG9ySUQpID09PSAwICYmIGlzQm91bmRhcnkoZGVzY2VuZGFudElELCBhbmNlc3RvcklELmxlbmd0aCk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgcGFyZW50IElEIG9mIHRoZSBzdXBwbGllZCBSZWFjdCBET00gSUQsIGBpZGAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIGEgY29tcG9uZW50LlxuICogQHJldHVybiB7c3RyaW5nfSBJRCBvZiB0aGUgcGFyZW50LCBvciBhbiBlbXB0eSBzdHJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRQYXJlbnRJRChpZCkge1xuICByZXR1cm4gaWQgPyBpZC5zdWJzdHIoMCwgaWQubGFzdEluZGV4T2YoU0VQQVJBVE9SKSkgOiAnJztcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuZXh0IERPTSBJRCBvbiB0aGUgdHJlZSBwYXRoIGZyb20gdGhlIHN1cHBsaWVkIGBhbmNlc3RvcklEYCB0byB0aGVcbiAqIHN1cHBsaWVkIGBkZXN0aW5hdGlvbklEYC4gSWYgdGhleSBhcmUgZXF1YWwsIHRoZSBJRCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYW5jZXN0b3JJRCBJRCBvZiBhbiBhbmNlc3RvciBub2RlIG9mIGBkZXN0aW5hdGlvbklEYC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbklEIElEIG9mIHRoZSBkZXN0aW5hdGlvbiBub2RlLlxuICogQHJldHVybiB7c3RyaW5nfSBOZXh0IElEIG9uIHRoZSBwYXRoIGZyb20gYGFuY2VzdG9ySURgIHRvIGBkZXN0aW5hdGlvbklEYC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldE5leHREZXNjZW5kYW50SUQoYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkge1xuICAhKGlzVmFsaWRJRChhbmNlc3RvcklEKSAmJiBpc1ZhbGlkSUQoZGVzdGluYXRpb25JRCkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldE5leHREZXNjZW5kYW50SUQoJXMsICVzKTogUmVjZWl2ZWQgYW4gaW52YWxpZCBSZWFjdCBET00gSUQuJywgYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAhaXNBbmNlc3RvcklET2YoYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZ2V0TmV4dERlc2NlbmRhbnRJRCguLi4pOiBSZWFjdCBoYXMgbWFkZSBhbiBpbnZhbGlkIGFzc3VtcHRpb24gYWJvdXQgJyArICd0aGUgRE9NIGhpZXJhcmNoeS4gRXhwZWN0ZWQgYCVzYCB0byBiZSBhbiBhbmNlc3RvciBvZiBgJXNgLicsIGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKGFuY2VzdG9ySUQgPT09IGRlc3RpbmF0aW9uSUQpIHtcbiAgICByZXR1cm4gYW5jZXN0b3JJRDtcbiAgfVxuICAvLyBTa2lwIG92ZXIgdGhlIGFuY2VzdG9yIGFuZCB0aGUgaW1tZWRpYXRlIHNlcGFyYXRvci4gVHJhdmVyc2UgdW50aWwgd2UgaGl0XG4gIC8vIGFub3RoZXIgc2VwYXJhdG9yIG9yIHdlIHJlYWNoIHRoZSBlbmQgb2YgYGRlc3RpbmF0aW9uSURgLlxuICB2YXIgc3RhcnQgPSBhbmNlc3RvcklELmxlbmd0aCArIFNFUEFSQVRPUl9MRU5HVEg7XG4gIHZhciBpO1xuICBmb3IgKGkgPSBzdGFydDsgaSA8IGRlc3RpbmF0aW9uSUQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoaXNCb3VuZGFyeShkZXN0aW5hdGlvbklELCBpKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBkZXN0aW5hdGlvbklELnN1YnN0cigwLCBpKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBJRCBvZiB0d28gSURzLlxuICpcbiAqIFVzaW5nIHRoaXMgSUQgc2NoZW1lLCB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgSUQgaXMgdGhlIGxvbmdlc3QgY29tbW9uXG4gKiBwcmVmaXggb2YgdGhlIHR3byBJRHMgdGhhdCBpbW1lZGlhdGVseSBwcmVjZWRlZCBhIFwibWFya2VyXCIgaW4gYm90aCBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBvbmVJRFxuICogQHBhcmFtIHtzdHJpbmd9IHR3b0lEXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIElELCBvciB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vbmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQob25lSUQsIHR3b0lEKSB7XG4gIHZhciBtaW5MZW5ndGggPSBNYXRoLm1pbihvbmVJRC5sZW5ndGgsIHR3b0lELmxlbmd0aCk7XG4gIGlmIChtaW5MZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgdmFyIGxhc3RDb21tb25NYXJrZXJJbmRleCA9IDA7XG4gIC8vIFVzZSBgPD1gIHRvIHRyYXZlcnNlIHVudGlsIHRoZSBcIkVPTFwiIG9mIHRoZSBzaG9ydGVyIHN0cmluZy5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPD0gbWluTGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoaXNCb3VuZGFyeShvbmVJRCwgaSkgJiYgaXNCb3VuZGFyeSh0d29JRCwgaSkpIHtcbiAgICAgIGxhc3RDb21tb25NYXJrZXJJbmRleCA9IGk7XG4gICAgfSBlbHNlIGlmIChvbmVJRC5jaGFyQXQoaSkgIT09IHR3b0lELmNoYXJBdChpKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHZhciBsb25nZXN0Q29tbW9uSUQgPSBvbmVJRC5zdWJzdHIoMCwgbGFzdENvbW1vbk1hcmtlckluZGV4KTtcbiAgIWlzVmFsaWRJRChsb25nZXN0Q29tbW9uSUQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldEZpcnN0Q29tbW9uQW5jZXN0b3JJRCglcywgJXMpOiBFeHBlY3RlZCBhIHZhbGlkIFJlYWN0IERPTSBJRDogJXMnLCBvbmVJRCwgdHdvSUQsIGxvbmdlc3RDb21tb25JRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gbG9uZ2VzdENvbW1vbklEO1xufVxuXG4vKipcbiAqIFRyYXZlcnNlcyB0aGUgcGFyZW50IHBhdGggYmV0d2VlbiB0d28gSURzIChlaXRoZXIgdXAgb3IgZG93bikuIFRoZSBJRHMgbXVzdFxuICogbm90IGJlIHRoZSBzYW1lLCBhbmQgdGhlcmUgbXVzdCBleGlzdCBhIHBhcmVudCBwYXRoIGJldHdlZW4gdGhlbS4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWAsIHRyYXZlcnNhbCBpcyBzdG9wcGVkLlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ30gc3RhcnQgSUQgYXQgd2hpY2ggdG8gc3RhcnQgdHJhdmVyc2FsLlxuICogQHBhcmFtIHs/c3RyaW5nfSBzdG9wIElEIGF0IHdoaWNoIHRvIGVuZCB0cmF2ZXJzYWwuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2UgZWFjaCBJRCB3aXRoLlxuICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gc2tpcEZpcnN0IFdoZXRoZXIgb3Igbm90IHRvIHNraXAgdGhlIGZpcnN0IG5vZGUuXG4gKiBAcGFyYW0gez9ib29sZWFufSBza2lwTGFzdCBXaGV0aGVyIG9yIG5vdCB0byBza2lwIHRoZSBsYXN0IG5vZGUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZVBhcmVudFBhdGgoc3RhcnQsIHN0b3AsIGNiLCBhcmcsIHNraXBGaXJzdCwgc2tpcExhc3QpIHtcbiAgc3RhcnQgPSBzdGFydCB8fCAnJztcbiAgc3RvcCA9IHN0b3AgfHwgJyc7XG4gICEoc3RhcnQgIT09IHN0b3ApID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXZlcnNlUGFyZW50UGF0aCguLi4pOiBDYW5ub3QgdHJhdmVyc2UgZnJvbSBhbmQgdG8gdGhlIHNhbWUgSUQsIGAlc2AuJywgc3RhcnQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgdmFyIHRyYXZlcnNlVXAgPSBpc0FuY2VzdG9ySURPZihzdG9wLCBzdGFydCk7XG4gICEodHJhdmVyc2VVcCB8fCBpc0FuY2VzdG9ySURPZihzdGFydCwgc3RvcCkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXZlcnNlUGFyZW50UGF0aCglcywgJXMsIC4uLik6IENhbm5vdCB0cmF2ZXJzZSBmcm9tIHR3byBJRHMgdGhhdCBkbyAnICsgJ25vdCBoYXZlIGEgcGFyZW50IHBhdGguJywgc3RhcnQsIHN0b3ApIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgLy8gVHJhdmVyc2UgZnJvbSBgc3RhcnRgIHRvIGBzdG9wYCBvbmUgZGVwdGggYXQgYSB0aW1lLlxuICB2YXIgZGVwdGggPSAwO1xuICB2YXIgdHJhdmVyc2UgPSB0cmF2ZXJzZVVwID8gZ2V0UGFyZW50SUQgOiBnZXROZXh0RGVzY2VuZGFudElEO1xuICBmb3IgKHZhciBpZCA9IHN0YXJ0OzsgLyogdW50aWwgYnJlYWsgKi9pZCA9IHRyYXZlcnNlKGlkLCBzdG9wKSkge1xuICAgIHZhciByZXQ7XG4gICAgaWYgKCghc2tpcEZpcnN0IHx8IGlkICE9PSBzdGFydCkgJiYgKCFza2lwTGFzdCB8fCBpZCAhPT0gc3RvcCkpIHtcbiAgICAgIHJldCA9IGNiKGlkLCB0cmF2ZXJzZVVwLCBhcmcpO1xuICAgIH1cbiAgICBpZiAocmV0ID09PSBmYWxzZSB8fCBpZCA9PT0gc3RvcCkge1xuICAgICAgLy8gT25seSBicmVhayAvL2FmdGVyLy8gdmlzaXRpbmcgYHN0b3BgLlxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICEoZGVwdGgrKyA8IE1BWF9UUkVFX0RFUFRIKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoJXMsICVzLCAuLi4pOiBEZXRlY3RlZCBhbiBpbmZpbml0ZSBsb29wIHdoaWxlICcgKyAndHJhdmVyc2luZyB0aGUgUmVhY3QgRE9NIElEIHRyZWUuIFRoaXMgbWF5IGJlIGR1ZSB0byBtYWxmb3JtZWQgSURzOiAlcycsIHN0YXJ0LCBzdG9wLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgSURzIGFzc2lnbmVkIHRvIERPTSByZXByZXNlbnRhdGlvbnMgb2YgUmVhY3QgY29tcG9uZW50cy4gVGhpc1xuICogdXNlcyBhIHNwZWNpZmljIHNjaGVtZSBpbiBvcmRlciB0byB0cmF2ZXJzZSB0aGUgRE9NIGVmZmljaWVudGx5IChlLmcuIGluXG4gKiBvcmRlciB0byBzaW11bGF0ZSBldmVudHMpLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSB7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBSZWFjdCByb290IElEXG4gICAqIEByZXR1cm4ge3N0cmluZ30gQSBSZWFjdCByb290IElELlxuICAgKi9cbiAgY3JlYXRlUmVhY3RSb290SUQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0UmVhY3RSb290SURTdHJpbmcoUmVhY3RSb290SW5kZXguY3JlYXRlUmVhY3RSb290SW5kZXgoKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBSZWFjdCBJRCBieSBqb2luaW5nIGEgcm9vdCBJRCB3aXRoIGEgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBSb290IElEIG9mIGEgcGFyZW50IGNvbXBvbmVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQSBjb21wb25lbnQncyBuYW1lIChhcyBmbGF0dGVuZWQgY2hpbGRyZW4pLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgUmVhY3QgSUQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY3JlYXRlUmVhY3RJRDogZnVuY3Rpb24gKHJvb3RJRCwgbmFtZSkge1xuICAgIHJldHVybiByb290SUQgKyBuYW1lO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBET00gSUQgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0aGF0IGlzIHRoZSByb290IG9mIHRoZSB0cmVlIHRoYXRcbiAgICogY29udGFpbnMgdGhlIFJlYWN0IGNvbXBvbmVudCB3aXRoIHRoZSBzdXBwbGllZCBET00gSUQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBET00gSUQgb2YgYSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4gez9zdHJpbmd9IERPTSBJRCBvZiB0aGUgUmVhY3QgY29tcG9uZW50IHRoYXQgaXMgdGhlIHJvb3QuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEOiBmdW5jdGlvbiAoaWQpIHtcbiAgICBpZiAoaWQgJiYgaWQuY2hhckF0KDApID09PSBTRVBBUkFUT1IgJiYgaWQubGVuZ3RoID4gMSkge1xuICAgICAgdmFyIGluZGV4ID0gaWQuaW5kZXhPZihTRVBBUkFUT1IsIDEpO1xuICAgICAgcmV0dXJuIGluZGV4ID4gLTEgPyBpZC5zdWJzdHIoMCwgaW5kZXgpIDogaWQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmF2ZXJzZXMgdGhlIElEIGhpZXJhcmNoeSBhbmQgaW52b2tlcyB0aGUgc3VwcGxpZWQgYGNiYCBvbiBhbnkgSURzIHRoYXRcbiAgICogc2hvdWxkIHdvdWxkIHJlY2VpdmUgYSBgbW91c2VFbnRlcmAgb3IgYG1vdXNlTGVhdmVgIGV2ZW50LlxuICAgKlxuICAgKiBOT1RFOiBEb2VzIG5vdCBpbnZva2UgdGhlIGNhbGxiYWNrIG9uIHRoZSBuZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBiZWNhdXNlXG4gICAqIG5vdGhpbmcgXCJlbnRlcmVkXCIgb3IgXCJsZWZ0XCIgdGhhdCBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGVhdmVJRCBJRCBiZWluZyBsZWZ0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW50ZXJJRCBJRCBiZWluZyBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2Ugb24gZWFjaCBlbnRlcmVkL2xlZnQgSUQuXG4gICAqIEBwYXJhbSB7Kn0gdXBBcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIG9uIGxlZnQgSURzLlxuICAgKiBAcGFyYW0geyp9IGRvd25BcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIG9uIGVudGVyZWQgSURzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXZlcnNlRW50ZXJMZWF2ZTogZnVuY3Rpb24gKGxlYXZlSUQsIGVudGVySUQsIGNiLCB1cEFyZywgZG93bkFyZykge1xuICAgIHZhciBhbmNlc3RvcklEID0gZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEKGxlYXZlSUQsIGVudGVySUQpO1xuICAgIGlmIChhbmNlc3RvcklEICE9PSBsZWF2ZUlEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgobGVhdmVJRCwgYW5jZXN0b3JJRCwgY2IsIHVwQXJnLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChhbmNlc3RvcklEICE9PSBlbnRlcklEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoYW5jZXN0b3JJRCwgZW50ZXJJRCwgY2IsIGRvd25BcmcsIHRydWUsIGZhbHNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNpbXVsYXRlcyB0aGUgdHJhdmVyc2FsIG9mIGEgdHdvLXBoYXNlLCBjYXB0dXJlL2J1YmJsZSBldmVudCBkaXNwYXRjaC5cbiAgICpcbiAgICogTk9URTogVGhpcyB0cmF2ZXJzYWwgaGFwcGVucyBvbiBJRHMgd2l0aG91dCB0b3VjaGluZyB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0SUQgSUQgb2YgdGhlIHRhcmdldCBub2RlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2UuXG4gICAqIEBwYXJhbSB7Kn0gYXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmF2ZXJzZVR3b1BoYXNlOiBmdW5jdGlvbiAodGFyZ2V0SUQsIGNiLCBhcmcpIHtcbiAgICBpZiAodGFyZ2V0SUQpIHtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCgnJywgdGFyZ2V0SUQsIGNiLCBhcmcsIHRydWUsIGZhbHNlKTtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCh0YXJnZXRJRCwgJycsIGNiLCBhcmcsIGZhbHNlLCB0cnVlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNhbWUgYXMgYHRyYXZlcnNlVHdvUGhhc2VgIGJ1dCBza2lwcyB0aGUgYHRhcmdldElEYC5cbiAgICovXG4gIHRyYXZlcnNlVHdvUGhhc2VTa2lwVGFyZ2V0OiBmdW5jdGlvbiAodGFyZ2V0SUQsIGNiLCBhcmcpIHtcbiAgICBpZiAodGFyZ2V0SUQpIHtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCgnJywgdGFyZ2V0SUQsIGNiLCBhcmcsIHRydWUsIHRydWUpO1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKHRhcmdldElELCAnJywgY2IsIGFyZywgdHJ1ZSwgdHJ1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUcmF2ZXJzZSBhIG5vZGUgSUQsIGNhbGxpbmcgdGhlIHN1cHBsaWVkIGBjYmAgZm9yIGVhY2ggYW5jZXN0b3IgSUQuIEZvclxuICAgKiBleGFtcGxlLCBwYXNzaW5nIGAuMC4kcm93LTAuMWAgd291bGQgcmVzdWx0IGluIGBjYmAgZ2V0dGluZyBjYWxsZWRcbiAgICogd2l0aCBgLjBgLCBgLjAuJHJvdy0wYCwgYW5kIGAuMC4kcm93LTAuMWAuXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgdHJhdmVyc2FsIGhhcHBlbnMgb24gSURzIHdpdGhvdXQgdG91Y2hpbmcgdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSB0YXJnZXQgbm9kZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlLlxuICAgKiBAcGFyYW0geyp9IGFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhdmVyc2VBbmNlc3RvcnM6IGZ1bmN0aW9uICh0YXJnZXRJRCwgY2IsIGFyZykge1xuICAgIHRyYXZlcnNlUGFyZW50UGF0aCgnJywgdGFyZ2V0SUQsIGNiLCBhcmcsIHRydWUsIGZhbHNlKTtcbiAgfSxcblxuICBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQ6IGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRCxcblxuICAvKipcbiAgICogRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2dldE5leHREZXNjZW5kYW50SUQ6IGdldE5leHREZXNjZW5kYW50SUQsXG5cbiAgaXNBbmNlc3RvcklET2Y6IGlzQW5jZXN0b3JJRE9mLFxuXG4gIFNFUEFSQVRPUjogU0VQQVJBVE9SXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnN0YW5jZUhhbmRsZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5zdGFuY2VNYXBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogYFJlYWN0SW5zdGFuY2VNYXBgIG1haW50YWlucyBhIG1hcHBpbmcgZnJvbSBhIHB1YmxpYyBmYWNpbmcgc3RhdGVmdWxcbiAqIGluc3RhbmNlIChrZXkpIGFuZCB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gKHZhbHVlKS4gVGhpcyBhbGxvd3MgcHVibGljXG4gKiBtZXRob2RzIHRvIGFjY2VwdCB0aGUgdXNlciBmYWNpbmcgaW5zdGFuY2UgYXMgYW4gYXJndW1lbnQgYW5kIG1hcCB0aGVtIGJhY2tcbiAqIHRvIGludGVybmFsIG1ldGhvZHMuXG4gKi9cblxuLy8gVE9ETzogUmVwbGFjZSB0aGlzIHdpdGggRVM2OiB2YXIgUmVhY3RJbnN0YW5jZU1hcCA9IG5ldyBNYXAoKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0ge1xuXG4gIC8qKlxuICAgKiBUaGlzIEFQSSBzaG91bGQgYmUgY2FsbGVkIGBkZWxldGVgIGJ1dCB3ZSdkIGhhdmUgdG8gbWFrZSBzdXJlIHRvIGFsd2F5c1xuICAgKiB0cmFuc2Zvcm0gdGhlc2UgdG8gc3RyaW5ncyBmb3IgSUUgc3VwcG9ydC4gV2hlbiB0aGlzIHRyYW5zZm9ybSBpcyBmdWxseVxuICAgKiBzdXBwb3J0ZWQgd2UgY2FuIHJlbmFtZSBpdC5cbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24gKGtleSkge1xuICAgIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlID0gdW5kZWZpbmVkO1xuICB9LFxuXG4gIGdldDogZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZTtcbiAgfSxcblxuICBoYXM6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4ga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2UgIT09IHVuZGVmaW5lZDtcbiAgfSxcblxuICBzZXQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2UgPSB2YWx1ZTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5zdGFuY2VNYXA7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SXNvbW9ycGhpY1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q2hpbGRyZW4gPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRyZW4nKTtcbnZhciBSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnQnKTtcbnZhciBSZWFjdENsYXNzID0gcmVxdWlyZSgnLi9SZWFjdENsYXNzJyk7XG52YXIgUmVhY3RET01GYWN0b3JpZXMgPSByZXF1aXJlKCcuL1JlYWN0RE9NRmFjdG9yaWVzJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudFZhbGlkYXRvcicpO1xudmFyIFJlYWN0UHJvcFR5cGVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlcycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBvbmx5Q2hpbGQgPSByZXF1aXJlKCcuL29ubHlDaGlsZCcpO1xuXG52YXIgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50O1xudmFyIGNyZWF0ZUZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeTtcbnZhciBjbG9uZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50O1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICBjcmVhdGVFbGVtZW50ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUVsZW1lbnQ7XG4gIGNyZWF0ZUZhY3RvcnkgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeTtcbiAgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNsb25lRWxlbWVudDtcbn1cblxudmFyIFJlYWN0ID0ge1xuXG4gIC8vIE1vZGVyblxuXG4gIENoaWxkcmVuOiB7XG4gICAgbWFwOiBSZWFjdENoaWxkcmVuLm1hcCxcbiAgICBmb3JFYWNoOiBSZWFjdENoaWxkcmVuLmZvckVhY2gsXG4gICAgY291bnQ6IFJlYWN0Q2hpbGRyZW4uY291bnQsXG4gICAgdG9BcnJheTogUmVhY3RDaGlsZHJlbi50b0FycmF5LFxuICAgIG9ubHk6IG9ubHlDaGlsZFxuICB9LFxuXG4gIENvbXBvbmVudDogUmVhY3RDb21wb25lbnQsXG5cbiAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCxcbiAgY2xvbmVFbGVtZW50OiBjbG9uZUVsZW1lbnQsXG4gIGlzVmFsaWRFbGVtZW50OiBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQsXG5cbiAgLy8gQ2xhc3NpY1xuXG4gIFByb3BUeXBlczogUmVhY3RQcm9wVHlwZXMsXG4gIGNyZWF0ZUNsYXNzOiBSZWFjdENsYXNzLmNyZWF0ZUNsYXNzLFxuICBjcmVhdGVGYWN0b3J5OiBjcmVhdGVGYWN0b3J5LFxuICBjcmVhdGVNaXhpbjogZnVuY3Rpb24gKG1peGluKSB7XG4gICAgLy8gQ3VycmVudGx5IGEgbm9vcC4gV2lsbCBiZSB1c2VkIHRvIHZhbGlkYXRlIGFuZCB0cmFjZSBtaXhpbnMuXG4gICAgcmV0dXJuIG1peGluO1xuICB9LFxuXG4gIC8vIFRoaXMgbG9va3MgRE9NIHNwZWNpZmljIGJ1dCB0aGVzZSBhcmUgYWN0dWFsbHkgaXNvbW9ycGhpYyBoZWxwZXJzXG4gIC8vIHNpbmNlIHRoZXkgYXJlIGp1c3QgZ2VuZXJhdGluZyBET00gc3RyaW5ncy5cbiAgRE9NOiBSZWFjdERPTUZhY3RvcmllcyxcblxuICB2ZXJzaW9uOiBSZWFjdFZlcnNpb24sXG5cbiAgLy8gSG9vayBmb3IgSlNYIHNwcmVhZCwgZG9uJ3QgdXNlIHRoaXMgZm9yIGFueXRoaW5nIGVsc2UuXG4gIF9fc3ByZWFkOiBhc3NpZ25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TWFya3VwQ2hlY2tzdW1cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhZGxlcjMyID0gcmVxdWlyZSgnLi9hZGxlcjMyJyk7XG5cbnZhciBUQUdfRU5EID0gL1xcLz8+LztcblxudmFyIFJlYWN0TWFya3VwQ2hlY2tzdW0gPSB7XG4gIENIRUNLU1VNX0FUVFJfTkFNRTogJ2RhdGEtcmVhY3QtY2hlY2tzdW0nLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCBzdHJpbmdcbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgc3RyaW5nIHdpdGggY2hlY2tzdW0gYXR0cmlidXRlIGF0dGFjaGVkXG4gICAqL1xuICBhZGRDaGVja3N1bVRvTWFya3VwOiBmdW5jdGlvbiAobWFya3VwKSB7XG4gICAgdmFyIGNoZWNrc3VtID0gYWRsZXIzMihtYXJrdXApO1xuXG4gICAgLy8gQWRkIGNoZWNrc3VtIChoYW5kbGUgYm90aCBwYXJlbnQgdGFncyBhbmQgc2VsZi1jbG9zaW5nIHRhZ3MpXG4gICAgcmV0dXJuIG1hcmt1cC5yZXBsYWNlKFRBR19FTkQsICcgJyArIFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FICsgJz1cIicgKyBjaGVja3N1bSArICdcIiQmJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgdG8gdXNlXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCByb290IFJlYWN0IGVsZW1lbnRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgb3Igbm90IHRoZSBtYXJrdXAgaXMgdGhlIHNhbWVcbiAgICovXG4gIGNhblJldXNlTWFya3VwOiBmdW5jdGlvbiAobWFya3VwLCBlbGVtZW50KSB7XG4gICAgdmFyIGV4aXN0aW5nQ2hlY2tzdW0gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShSZWFjdE1hcmt1cENoZWNrc3VtLkNIRUNLU1VNX0FUVFJfTkFNRSk7XG4gICAgZXhpc3RpbmdDaGVja3N1bSA9IGV4aXN0aW5nQ2hlY2tzdW0gJiYgcGFyc2VJbnQoZXhpc3RpbmdDaGVja3N1bSwgMTApO1xuICAgIHZhciBtYXJrdXBDaGVja3N1bSA9IGFkbGVyMzIobWFya3VwKTtcbiAgICByZXR1cm4gbWFya3VwQ2hlY2tzdW0gPT09IGV4aXN0aW5nQ2hlY2tzdW07XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNYXJrdXBDaGVja3N1bTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNb3VudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RET01GZWF0dXJlRmxhZ3MgPSByZXF1aXJlKCcuL1JlYWN0RE9NRmVhdHVyZUZsYWdzJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeScpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdE1hcmt1cENoZWNrc3VtID0gcmVxdWlyZSgnLi9SZWFjdE1hcmt1cENoZWNrc3VtJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGNvbnRhaW5zTm9kZSA9IHJlcXVpcmUoJ2ZianMvbGliL2NvbnRhaW5zTm9kZScpO1xudmFyIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xudmFyIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIEFUVFJfTkFNRSA9IERPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FO1xudmFyIG5vZGVDYWNoZSA9IHt9O1xuXG52YXIgRUxFTUVOVF9OT0RFX1RZUEUgPSAxO1xudmFyIERPQ19OT0RFX1RZUEUgPSA5O1xudmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSA9IDExO1xuXG52YXIgb3duZXJEb2N1bWVudENvbnRleHRLZXkgPSAnX19SZWFjdE1vdW50X293bmVyRG9jdW1lbnQkJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXG4vKiogTWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIFJlYWN0IGNvbXBvbmVudCBpbnN0YW5jZS4gKi9cbnZhciBpbnN0YW5jZXNCeVJlYWN0Um9vdElEID0ge307XG5cbi8qKiBNYXBwaW5nIGZyb20gcmVhY3RSb290SUQgdG8gYGNvbnRhaW5lcmAgbm9kZXMuICovXG52YXIgY29udGFpbmVyc0J5UmVhY3RSb290SUQgPSB7fTtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLyoqIF9fREVWX18tb25seSBtYXBwaW5nIGZyb20gcmVhY3RSb290SUQgdG8gcm9vdCBlbGVtZW50cy4gKi9cbiAgdmFyIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SUQgPSB7fTtcbn1cblxuLy8gVXNlZCB0byBzdG9yZSBicmVhZHRoLWZpcnN0IHNlYXJjaCBzdGF0ZSBpbiBmaW5kQ29tcG9uZW50Um9vdC5cbnZhciBmaW5kQ29tcG9uZW50Um9vdFJldXNhYmxlQXJyYXkgPSBbXTtcblxuLyoqXG4gKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGNoYXJhY3RlclxuICogdGhhdCdzIG5vdCBjb21tb24gYmV0d2VlbiB0aGUgdHdvIGdpdmVuIHN0cmluZ3MuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSB0aGUgaW5kZXggb2YgdGhlIGNoYXJhY3RlciB3aGVyZSB0aGUgc3RyaW5ncyBkaXZlcmdlXG4gKi9cbmZ1bmN0aW9uIGZpcnN0RGlmZmVyZW5jZUluZGV4KHN0cmluZzEsIHN0cmluZzIpIHtcbiAgdmFyIG1pbkxlbiA9IE1hdGgubWluKHN0cmluZzEubGVuZ3RoLCBzdHJpbmcyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWluTGVuOyBpKyspIHtcbiAgICBpZiAoc3RyaW5nMS5jaGFyQXQoaSkgIT09IHN0cmluZzIuY2hhckF0KGkpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cmluZzEubGVuZ3RoID09PSBzdHJpbmcyLmxlbmd0aCA/IC0xIDogbWluTGVuO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01Eb2N1bWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgbWF5IGNvbnRhaW5cbiAqIGEgUmVhY3QgY29tcG9uZW50XG4gKiBAcmV0dXJuIHs/Kn0gRE9NIGVsZW1lbnQgdGhhdCBtYXkgaGF2ZSB0aGUgcmVhY3RSb290IElELCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKSB7XG4gIGlmICghY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5kb2N1bWVudEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdENoaWxkO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdGhhdCBtYXkgY29udGFpbiBhIFJlYWN0IGNvbXBvbmVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IEEgXCJyZWFjdFJvb3RcIiBJRCwgaWYgYSBSZWFjdCBjb21wb25lbnQgaXMgcmVuZGVyZWQuXG4gKi9cbmZ1bmN0aW9uIGdldFJlYWN0Um9vdElEKGNvbnRhaW5lcikge1xuICB2YXIgcm9vdEVsZW1lbnQgPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgcmV0dXJuIHJvb3RFbGVtZW50ICYmIFJlYWN0TW91bnQuZ2V0SUQocm9vdEVsZW1lbnQpO1xufVxuXG4vKipcbiAqIEFjY2Vzc2luZyBub2RlW0FUVFJfTkFNRV0gb3IgY2FsbGluZyBnZXRBdHRyaWJ1dGUoQVRUUl9OQU1FKSBvbiBhIGZvcm1cbiAqIGVsZW1lbnQgY2FuIHJldHVybiBpdHMgY29udHJvbCB3aG9zZSBuYW1lIG9yIElEIGVxdWFscyBBVFRSX05BTUUuIEFsbFxuICogRE9NIG5vZGVzIHN1cHBvcnQgYGdldEF0dHJpYnV0ZU5vZGVgIGJ1dCB0aGlzIGNhbiBhbHNvIGdldCBjYWxsZWQgb25cbiAqIG90aGVyIG9iamVjdHMgc28ganVzdCByZXR1cm4gJycgaWYgd2UncmUgZ2l2ZW4gc29tZXRoaW5nIG90aGVyIHRoYW4gYVxuICogRE9NIG5vZGUgKHN1Y2ggYXMgd2luZG93KS5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fERPTVdpbmRvd3xET01Eb2N1bWVudHxET01UZXh0Tm9kZX0gbm9kZSBET00gbm9kZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gSUQgb2YgdGhlIHN1cHBsaWVkIGBkb21Ob2RlYC5cbiAqL1xuZnVuY3Rpb24gZ2V0SUQobm9kZSkge1xuICB2YXIgaWQgPSBpbnRlcm5hbEdldElEKG5vZGUpO1xuICBpZiAoaWQpIHtcbiAgICBpZiAobm9kZUNhY2hlLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgdmFyIGNhY2hlZCA9IG5vZGVDYWNoZVtpZF07XG4gICAgICBpZiAoY2FjaGVkICE9PSBub2RlKSB7XG4gICAgICAgICEhaXNWYWxpZChjYWNoZWQsIGlkKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdE1vdW50OiBUd28gdmFsaWQgYnV0IHVuZXF1YWwgbm9kZXMgd2l0aCB0aGUgc2FtZSBgJXNgOiAlcycsIEFUVFJfTkFNRSwgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBub2RlQ2FjaGVbaWRdID0gbm9kZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGlkO1xufVxuXG5mdW5jdGlvbiBpbnRlcm5hbEdldElEKG5vZGUpIHtcbiAgLy8gSWYgbm9kZSBpcyBzb21ldGhpbmcgbGlrZSBhIHdpbmRvdywgZG9jdW1lbnQsIG9yIHRleHQgbm9kZSwgbm9uZSBvZlxuICAvLyB3aGljaCBzdXBwb3J0IGF0dHJpYnV0ZXMgb3IgYSAuZ2V0QXR0cmlidXRlIG1ldGhvZCwgZ3JhY2VmdWxseSByZXR1cm5cbiAgLy8gdGhlIGVtcHR5IHN0cmluZywgYXMgaWYgdGhlIGF0dHJpYnV0ZSB3ZXJlIG1pc3NpbmcuXG4gIHJldHVybiBub2RlICYmIG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKEFUVFJfTkFNRSkgfHwgJyc7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgUmVhY3Qtc3BlY2lmaWMgSUQgb2YgdGhlIGdpdmVuIG5vZGUuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlIFRoZSBET00gbm9kZSB3aG9zZSBJRCB3aWxsIGJlIHNldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgdmFsdWUgb2YgdGhlIElEIGF0dHJpYnV0ZS5cbiAqL1xuZnVuY3Rpb24gc2V0SUQobm9kZSwgaWQpIHtcbiAgdmFyIG9sZElEID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgaWYgKG9sZElEICE9PSBpZCkge1xuICAgIGRlbGV0ZSBub2RlQ2FjaGVbb2xkSURdO1xuICB9XG4gIG5vZGUuc2V0QXR0cmlidXRlKEFUVFJfTkFNRSwgaWQpO1xuICBub2RlQ2FjaGVbaWRdID0gbm9kZTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBIFJlYWN0LWdlbmVyYXRlZCBET00gSUQuXG4gKiBAcmV0dXJuIHtET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZShpZCkge1xuICBpZiAoIW5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkgfHwgIWlzVmFsaWQobm9kZUNhY2hlW2lkXSwgaWQpKSB7XG4gICAgbm9kZUNhY2hlW2lkXSA9IFJlYWN0TW91bnQuZmluZFJlYWN0Tm9kZUJ5SUQoaWQpO1xuICB9XG4gIHJldHVybiBub2RlQ2FjaGVbaWRdO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIHB1YmxpYyBSZWFjdCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0geyp9IGluc3RhbmNlIEEgcHVibGljIFJlYWN0IGluc3RhbmNlLlxuICogQHJldHVybiB7P0RPTUVsZW1lbnR9IERPTSBub2RlIHdpdGggdGhlIHN1cHBsZWQgYGlkYC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXROb2RlRnJvbUluc3RhbmNlKGluc3RhbmNlKSB7XG4gIHZhciBpZCA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KGluc3RhbmNlKS5fcm9vdE5vZGVJRDtcbiAgaWYgKFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5pc051bGxDb21wb25lbnRJRChpZCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoIW5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkgfHwgIWlzVmFsaWQobm9kZUNhY2hlW2lkXSwgaWQpKSB7XG4gICAgbm9kZUNhY2hlW2lkXSA9IFJlYWN0TW91bnQuZmluZFJlYWN0Tm9kZUJ5SUQoaWQpO1xuICB9XG4gIHJldHVybiBub2RlQ2FjaGVbaWRdO1xufVxuXG4vKipcbiAqIEEgbm9kZSBpcyBcInZhbGlkXCIgaWYgaXQgaXMgY29udGFpbmVkIGJ5IGEgY3VycmVudGx5IG1vdW50ZWQgY29udGFpbmVyLlxuICpcbiAqIFRoaXMgbWVhbnMgdGhhdCB0aGUgbm9kZSBkb2VzIG5vdCBoYXZlIHRvIGJlIGNvbnRhaW5lZCBieSBhIGRvY3VtZW50IGluXG4gKiBvcmRlciB0byBiZSBjb25zaWRlcmVkIHZhbGlkLlxuICpcbiAqIEBwYXJhbSB7P0RPTUVsZW1lbnR9IG5vZGUgVGhlIGNhbmRpZGF0ZSBET00gbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgZXhwZWN0ZWQgSUQgb2YgdGhlIG5vZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBub2RlIGlzIGNvbnRhaW5lZCBieSBhIG1vdW50ZWQgY29udGFpbmVyLlxuICovXG5mdW5jdGlvbiBpc1ZhbGlkKG5vZGUsIGlkKSB7XG4gIGlmIChub2RlKSB7XG4gICAgIShpbnRlcm5hbEdldElEKG5vZGUpID09PSBpZCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RNb3VudDogVW5leHBlY3RlZCBtb2RpZmljYXRpb24gb2YgYCVzYCcsIEFUVFJfTkFNRSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQoaWQpO1xuICAgIGlmIChjb250YWluZXIgJiYgY29udGFpbnNOb2RlKGNvbnRhaW5lciwgbm9kZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDYXVzZXMgdGhlIGNhY2hlIHRvIGZvcmdldCBhYm91dCBvbmUgUmVhY3Qtc3BlY2lmaWMgSUQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIFRoZSBJRCB0byBmb3JnZXQuXG4gKi9cbmZ1bmN0aW9uIHB1cmdlSUQoaWQpIHtcbiAgZGVsZXRlIG5vZGVDYWNoZVtpZF07XG59XG5cbnZhciBkZWVwZXN0Tm9kZVNvRmFyID0gbnVsbDtcbmZ1bmN0aW9uIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3JJbXBsKGFuY2VzdG9ySUQpIHtcbiAgdmFyIGFuY2VzdG9yID0gbm9kZUNhY2hlW2FuY2VzdG9ySURdO1xuICBpZiAoYW5jZXN0b3IgJiYgaXNWYWxpZChhbmNlc3RvciwgYW5jZXN0b3JJRCkpIHtcbiAgICBkZWVwZXN0Tm9kZVNvRmFyID0gYW5jZXN0b3I7XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhpcyBub2RlIGlzbid0IHBvcHVsYXRlZCBpbiB0aGUgY2FjaGUsIHNvIHByZXN1bWFibHkgbm9uZSBvZiBpdHNcbiAgICAvLyBkZXNjZW5kYW50cyBhcmUuIEJyZWFrIG91dCBvZiB0aGUgbG9vcC5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGRlZXBlc3QgY2FjaGVkIG5vZGUgd2hvc2UgSUQgaXMgYSBwcmVmaXggb2YgYHRhcmdldElEYC5cbiAqL1xuZnVuY3Rpb24gZmluZERlZXBlc3RDYWNoZWRBbmNlc3Rvcih0YXJnZXRJRCkge1xuICBkZWVwZXN0Tm9kZVNvRmFyID0gbnVsbDtcbiAgUmVhY3RJbnN0YW5jZUhhbmRsZXMudHJhdmVyc2VBbmNlc3RvcnModGFyZ2V0SUQsIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3JJbXBsKTtcblxuICB2YXIgZm91bmROb2RlID0gZGVlcGVzdE5vZGVTb0ZhcjtcbiAgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG4gIHJldHVybiBmb3VuZE5vZGU7XG59XG5cbi8qKlxuICogTW91bnRzIHRoaXMgY29tcG9uZW50IGFuZCBpbnNlcnRzIGl0IGludG8gdGhlIERPTS5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gbW91bnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gbW91bnQgaW50by5cbiAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvdWxkUmV1c2VNYXJrdXAgSWYgdHJ1ZSwgZG8gbm90IGluc2VydCBtYXJrdXBcbiAqL1xuZnVuY3Rpb24gbW91bnRDb21wb25lbnRJbnRvTm9kZShjb21wb25lbnRJbnN0YW5jZSwgcm9vdElELCBjb250YWluZXIsIHRyYW5zYWN0aW9uLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICBpZiAoUmVhY3RET01GZWF0dXJlRmxhZ3MudXNlQ3JlYXRlRWxlbWVudCkge1xuICAgIGNvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUpIHtcbiAgICAgIGNvbnRleHRbb3duZXJEb2N1bWVudENvbnRleHRLZXldID0gY29udGFpbmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0W293bmVyRG9jdW1lbnRDb250ZXh0S2V5XSA9IGNvbnRhaW5lci5vd25lckRvY3VtZW50O1xuICAgIH1cbiAgfVxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChjb250ZXh0ID09PSBlbXB0eU9iamVjdCkge1xuICAgICAgY29udGV4dCA9IHt9O1xuICAgIH1cbiAgICB2YXIgdGFnID0gY29udGFpbmVyLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0gPSB2YWxpZGF0ZURPTU5lc3RpbmcudXBkYXRlZEFuY2VzdG9ySW5mbyhudWxsLCB0YWcsIG51bGwpO1xuICB9XG4gIHZhciBtYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICBjb21wb25lbnRJbnN0YW5jZS5fcmVuZGVyZWRDb21wb25lbnQuX3RvcExldmVsV3JhcHBlciA9IGNvbXBvbmVudEluc3RhbmNlO1xuICBSZWFjdE1vdW50Ll9tb3VudEltYWdlSW50b05vZGUobWFya3VwLCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCB0cmFuc2FjdGlvbik7XG59XG5cbi8qKlxuICogQmF0Y2hlZCBtb3VudC5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gbW91bnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gbW91bnQgaW50by5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvdWxkUmV1c2VNYXJrdXAgSWYgdHJ1ZSwgZG8gbm90IGluc2VydCBtYXJrdXBcbiAqL1xuZnVuY3Rpb24gYmF0Y2hlZE1vdW50Q29tcG9uZW50SW50b05vZGUoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICB2YXIgdHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5nZXRQb29sZWQoXG4gIC8qIGZvcmNlSFRNTCAqL3Nob3VsZFJldXNlTWFya3VwKTtcbiAgdHJhbnNhY3Rpb24ucGVyZm9ybShtb3VudENvbXBvbmVudEludG9Ob2RlLCBudWxsLCBjb21wb25lbnRJbnN0YW5jZSwgcm9vdElELCBjb250YWluZXIsIHRyYW5zYWN0aW9uLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCk7XG4gIFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLnJlbGVhc2UodHJhbnNhY3Rpb24pO1xufVxuXG4vKipcbiAqIFVubW91bnRzIGEgY29tcG9uZW50IGFuZCByZW1vdmVzIGl0IGZyb20gdGhlIERPTS5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnN0YW5jZSBSZWFjdCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0byB1bm1vdW50IGZyb20uXG4gKiBAZmluYWxcbiAqIEBpbnRlcm5hbFxuICogQHNlZSB7UmVhY3RNb3VudC51bm1vdW50Q29tcG9uZW50QXROb2RlfVxuICovXG5mdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50RnJvbU5vZGUoaW5zdGFuY2UsIGNvbnRhaW5lcikge1xuICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChpbnN0YW5jZSk7XG5cbiAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lci5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cblxuICAvLyBodHRwOi8vanNwZXJmLmNvbS9lbXB0eWluZy1hLW5vZGVcbiAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUcnVlIGlmIHRoZSBzdXBwbGllZCBET00gbm9kZSBoYXMgYSBkaXJlY3QgUmVhY3QtcmVuZGVyZWQgY2hpbGQgdGhhdCBpc1xuICogbm90IGEgUmVhY3Qgcm9vdCBlbGVtZW50LiBVc2VmdWwgZm9yIHdhcm5pbmcgaW4gYHJlbmRlcmAsXG4gKiBgdW5tb3VudENvbXBvbmVudEF0Tm9kZWAsIGV0Yy5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlIFRoZSBjYW5kaWRhdGUgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBET00gZWxlbWVudCBjb250YWlucyBhIGRpcmVjdCBjaGlsZCB0aGF0IHdhc1xuICogcmVuZGVyZWQgYnkgUmVhY3QgYnV0IGlzIG5vdCBhIHJvb3QgZWxlbWVudC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBoYXNOb25Sb290UmVhY3RDaGlsZChub2RlKSB7XG4gIHZhciByZWFjdFJvb3RJRCA9IGdldFJlYWN0Um9vdElEKG5vZGUpO1xuICByZXR1cm4gcmVhY3RSb290SUQgPyByZWFjdFJvb3RJRCAhPT0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKHJlYWN0Um9vdElEKSA6IGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IChkZWVwZXN0KSBhbmNlc3RvciBvZiBhIG5vZGUgd2hpY2ggaXMgcmVuZGVyZWQgYnkgdGhpcyBjb3B5XG4gKiBvZiBSZWFjdC5cbiAqL1xuZnVuY3Rpb24gZmluZEZpcnN0UmVhY3RET01JbXBsKG5vZGUpIHtcbiAgLy8gVGhpcyBub2RlIG1pZ2h0IGJlIGZyb20gYW5vdGhlciBSZWFjdCBpbnN0YW5jZSwgc28gd2UgbWFrZSBzdXJlIG5vdCB0b1xuICAvLyBleGFtaW5lIHRoZSBub2RlIGNhY2hlIGhlcmVcbiAgZm9yICg7IG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlICE9PSBub2RlOyBub2RlID0gbm9kZS5wYXJlbnROb2RlKSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgIC8vIE5vdCBhIERPTUVsZW1lbnQsIHRoZXJlZm9yZSBub3QgYSBSZWFjdCBjb21wb25lbnRcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgbm9kZUlEID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgICBpZiAoIW5vZGVJRCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChub2RlSUQpO1xuXG4gICAgLy8gSWYgY29udGFpbmVyc0J5UmVhY3RSb290SUQgY29udGFpbnMgdGhlIGNvbnRhaW5lciB3ZSBmaW5kIGJ5IGNyYXdsaW5nIHVwXG4gICAgLy8gdGhlIHRyZWUsIHdlIGtub3cgdGhhdCB0aGlzIGluc3RhbmNlIG9mIFJlYWN0IHJlbmRlcmVkIHRoZSBub2RlLlxuICAgIC8vIG5iLiBpc1ZhbGlkJ3Mgc3RyYXRlZ3kgKHdpdGggY29udGFpbnNOb2RlKSBkb2VzIG5vdCB3b3JrIGJlY2F1c2UgcmVuZGVyXG4gICAgLy8gdHJlZXMgbWF5IGJlIG5lc3RlZCBhbmQgd2UgZG9uJ3Qgd2FudCBhIGZhbHNlIHBvc2l0aXZlIGluIHRoYXQgY2FzZS5cbiAgICB2YXIgY3VycmVudCA9IG5vZGU7XG4gICAgdmFyIGxhc3RJRDtcbiAgICBkbyB7XG4gICAgICBsYXN0SUQgPSBpbnRlcm5hbEdldElEKGN1cnJlbnQpO1xuICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50Tm9kZTtcbiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICAgICAgLy8gVGhlIHBhc3NlZC1pbiBub2RlIGhhcyBiZWVuIGRldGFjaGVkIGZyb20gdGhlIGNvbnRhaW5lciBpdCB3YXNcbiAgICAgICAgLy8gb3JpZ2luYWxseSByZW5kZXJlZCBpbnRvLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChsYXN0SUQgIT09IHJlYWN0Um9vdElEKTtcblxuICAgIGlmIChjdXJyZW50ID09PSBjb250YWluZXJzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0pIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcnkgKD8pIGhhY2sgc28gdGhhdCB3ZSBjYW4gc3RvcmUgYWxsIHRvcC1sZXZlbCBwZW5kaW5nIHVwZGF0ZXMgb25cbiAqIGNvbXBvc2l0ZXMgaW5zdGVhZCBvZiBoYXZpbmcgdG8gd29ycnkgYWJvdXQgZGlmZmVyZW50IHR5cGVzIG9mIGNvbXBvbmVudHNcbiAqIGhlcmUuXG4gKi9cbnZhciBUb3BMZXZlbFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7fTtcblRvcExldmVsV3JhcHBlci5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgVG9wTGV2ZWxXcmFwcGVyLmRpc3BsYXlOYW1lID0gJ1RvcExldmVsV3JhcHBlcic7XG59XG5Ub3BMZXZlbFdyYXBwZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gdGhpcy5wcm9wcyBpcyBhY3R1YWxseSBhIFJlYWN0RWxlbWVudFxuICByZXR1cm4gdGhpcy5wcm9wcztcbn07XG5cbi8qKlxuICogTW91bnRpbmcgaXMgdGhlIHByb2Nlc3Mgb2YgaW5pdGlhbGl6aW5nIGEgUmVhY3QgY29tcG9uZW50IGJ5IGNyZWF0aW5nIGl0c1xuICogcmVwcmVzZW50YXRpdmUgRE9NIGVsZW1lbnRzIGFuZCBpbnNlcnRpbmcgdGhlbSBpbnRvIGEgc3VwcGxpZWQgYGNvbnRhaW5lcmAuXG4gKiBBbnkgcHJpb3IgY29udGVudCBpbnNpZGUgYGNvbnRhaW5lcmAgaXMgZGVzdHJveWVkIGluIHRoZSBwcm9jZXNzLlxuICpcbiAqICAgUmVhY3RNb3VudC5yZW5kZXIoXG4gKiAgICAgY29tcG9uZW50LFxuICogICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKVxuICogICApO1xuICpcbiAqICAgPGRpdiBpZD1cImNvbnRhaW5lclwiPiAgICAgICAgICAgICAgICAgICA8LS0gU3VwcGxpZWQgYGNvbnRhaW5lcmAuXG4gKiAgICAgPGRpdiBkYXRhLXJlYWN0aWQ9XCIuM1wiPiAgICAgICAgICAgICAgPC0tIFJlbmRlcmVkIHJlYWN0Um9vdCBvZiBSZWFjdFxuICogICAgICAgLy8gLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LlxuICogICAgIDwvZGl2PlxuICogICA8L2Rpdj5cbiAqXG4gKiBJbnNpZGUgb2YgYGNvbnRhaW5lcmAsIHRoZSBmaXJzdCBlbGVtZW50IHJlbmRlcmVkIGlzIHRoZSBcInJlYWN0Um9vdFwiLlxuICovXG52YXIgUmVhY3RNb3VudCA9IHtcblxuICBUb3BMZXZlbFdyYXBwZXI6IFRvcExldmVsV3JhcHBlcixcblxuICAvKiogRXhwb3NlZCBmb3IgZGVidWdnaW5nIHB1cnBvc2VzICoqL1xuICBfaW5zdGFuY2VzQnlSZWFjdFJvb3RJRDogaW5zdGFuY2VzQnlSZWFjdFJvb3RJRCxcblxuICAvKipcbiAgICogVGhpcyBpcyBhIGhvb2sgcHJvdmlkZWQgdG8gc3VwcG9ydCByZW5kZXJpbmcgUmVhY3QgY29tcG9uZW50cyB3aGlsZVxuICAgKiBlbnN1cmluZyB0aGF0IHRoZSBhcHBhcmVudCBzY3JvbGwgcG9zaXRpb24gb2YgaXRzIGBjb250YWluZXJgIGRvZXMgbm90XG4gICAqIGNoYW5nZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgVGhlIGBjb250YWluZXJgIGJlaW5nIHJlbmRlcmVkIGludG8uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlbmRlckNhbGxiYWNrIFRoaXMgbXVzdCBiZSBjYWxsZWQgb25jZSB0byBkbyB0aGUgcmVuZGVyLlxuICAgKi9cbiAgc2Nyb2xsTW9uaXRvcjogZnVuY3Rpb24gKGNvbnRhaW5lciwgcmVuZGVyQ2FsbGJhY2spIHtcbiAgICByZW5kZXJDYWxsYmFjaygpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUYWtlIGEgY29tcG9uZW50IHRoYXQncyBhbHJlYWR5IG1vdW50ZWQgaW50byB0aGUgRE9NIGFuZCByZXBsYWNlIGl0cyBwcm9wc1xuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBwcmV2Q29tcG9uZW50IGNvbXBvbmVudCBpbnN0YW5jZSBhbHJlYWR5IGluIHRoZSBET01cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IGNvbXBvbmVudCBpbnN0YW5jZSB0byByZW5kZXJcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgY29udGFpbmVyIHRvIHJlbmRlciBpbnRvXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKi9cbiAgX3VwZGF0ZVJvb3RDb21wb25lbnQ6IGZ1bmN0aW9uIChwcmV2Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgIFJlYWN0TW91bnQuc2Nyb2xsTW9uaXRvcihjb250YWluZXIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUVsZW1lbnRJbnRlcm5hbChwcmV2Q29tcG9uZW50LCBuZXh0RWxlbWVudCk7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbChwcmV2Q29tcG9uZW50LCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gUmVjb3JkIHRoZSByb290IGVsZW1lbnQgaW4gY2FzZSBpdCBsYXRlciBnZXRzIHRyYW5zcGxhbnRlZC5cbiAgICAgIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKV0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldkNvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjb21wb25lbnQgaW50byB0aGUgaW5zdGFuY2UgbWFwIGFuZCBzdGFydHMgc2Nyb2xsIHZhbHVlXG4gICAqIG1vbml0b3JpbmdcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gbmV4dENvbXBvbmVudCBjb21wb25lbnQgaW5zdGFuY2UgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHJlYWN0Um9vdCBJRCBwcmVmaXhcbiAgICovXG4gIF9yZWdpc3RlckNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRDb21wb25lbnQsIGNvbnRhaW5lcikge1xuICAgICEoY29udGFpbmVyICYmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ19yZWdpc3RlckNvbXBvbmVudCguLi4pOiBUYXJnZXQgY29udGFpbmVyIGlzIG5vdCBhIERPTSBlbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5lbnN1cmVTY3JvbGxWYWx1ZU1vbml0b3JpbmcoKTtcblxuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0TW91bnQucmVnaXN0ZXJDb250YWluZXIoY29udGFpbmVyKTtcbiAgICBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IG5leHRDb21wb25lbnQ7XG4gICAgcmV0dXJuIHJlYWN0Um9vdElEO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBuZXcgY29tcG9uZW50IGludG8gdGhlIERPTS5cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IGVsZW1lbnQgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIGlmIHdlIHNob3VsZCBza2lwIHRoZSBtYXJrdXAgaW5zZXJ0aW9uXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSBuZXh0Q29tcG9uZW50XG4gICAqL1xuICBfcmVuZGVyTmV3Um9vdENvbXBvbmVudDogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBjb250ZXh0KSB7XG4gICAgLy8gVmFyaW91cyBwYXJ0cyBvZiBvdXIgY29kZSAoc3VjaCBhcyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdzXG4gICAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gICAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLlxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPT0gbnVsbCwgJ19yZW5kZXJOZXdSb290Q29tcG9uZW50KCk6IFJlbmRlciBtZXRob2RzIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gJyArICdvZiBwcm9wcyBhbmQgc3RhdGU7IHRyaWdnZXJpbmcgbmVzdGVkIGNvbXBvbmVudCB1cGRhdGVzIGZyb20gJyArICdyZW5kZXIgaXMgbm90IGFsbG93ZWQuIElmIG5lY2Vzc2FyeSwgdHJpZ2dlciBuZXN0ZWQgdXBkYXRlcyBpbiAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZS4gQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJXMuJywgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCAmJiBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobmV4dEVsZW1lbnQsIG51bGwpO1xuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0TW91bnQuX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCBjb250YWluZXIpO1xuXG4gICAgLy8gVGhlIGluaXRpYWwgcmVuZGVyIGlzIHN5bmNocm9ub3VzIGJ1dCBhbnkgdXBkYXRlcyB0aGF0IGhhcHBlbiBkdXJpbmdcbiAgICAvLyByZW5kZXJpbmcsIGluIGNvbXBvbmVudFdpbGxNb3VudCBvciBjb21wb25lbnREaWRNb3VudCwgd2lsbCBiZSBiYXRjaGVkXG4gICAgLy8gYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGJhdGNoaW5nIHN0cmF0ZWd5LlxuXG4gICAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKGJhdGNoZWRNb3VudENvbXBvbmVudEludG9Ob2RlLCBjb21wb25lbnRJbnN0YW5jZSwgcmVhY3RSb290SUQsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFJlY29yZCB0aGUgcm9vdCBlbGVtZW50IGluIGNhc2UgaXQgbGF0ZXIgZ2V0cyB0cmFuc3BsYW50ZWQuXG4gICAgICByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBjb21wb25lbnRJbnN0YW5jZTtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVycyBhIFJlYWN0IGNvbXBvbmVudCBpbnRvIHRoZSBET00gaW4gdGhlIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICAgKlxuICAgKiBJZiB0aGUgUmVhY3QgY29tcG9uZW50IHdhcyBwcmV2aW91c2x5IHJlbmRlcmVkIGludG8gYGNvbnRhaW5lcmAsIHRoaXMgd2lsbFxuICAgKiBwZXJmb3JtIGFuIHVwZGF0ZSBvbiBpdCBhbmQgb25seSBtdXRhdGUgdGhlIERPTSBhcyBuZWNlc3NhcnkgdG8gcmVmbGVjdCB0aGVcbiAgICogbGF0ZXN0IFJlYWN0IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gcGFyZW50Q29tcG9uZW50IFRoZSBjb25jZXB0dWFsIHBhcmVudCBvZiB0aGlzIHJlbmRlciB0cmVlLlxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnQgQ29tcG9uZW50IGVsZW1lbnQgdG8gcmVuZGVyLlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiBjb21wbGV0aW9uXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSBDb21wb25lbnQgaW5zdGFuY2UgcmVuZGVyZWQgaW4gYGNvbnRhaW5lcmAuXG4gICAqL1xuICByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogZnVuY3Rpb24gKHBhcmVudENvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICAhKHBhcmVudENvbXBvbmVudCAhPSBudWxsICYmIHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlICE9IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3BhcmVudENvbXBvbmVudCBtdXN0IGJlIGEgdmFsaWQgUmVhY3QgQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBSZWFjdE1vdW50Ll9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcihwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgfSxcblxuICBfcmVuZGVyU3VidHJlZUludG9Db250YWluZXI6IGZ1bmN0aW9uIChwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChuZXh0RWxlbWVudCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET00ucmVuZGVyKCk6IEludmFsaWQgY29tcG9uZW50IGVsZW1lbnQuJXMnLCB0eXBlb2YgbmV4dEVsZW1lbnQgPT09ICdzdHJpbmcnID8gJyBJbnN0ZWFkIG9mIHBhc3NpbmcgYW4gZWxlbWVudCBzdHJpbmcsIG1ha2Ugc3VyZSB0byBpbnN0YW50aWF0ZSAnICsgJ2l0IGJ5IHBhc3NpbmcgaXQgdG8gUmVhY3QuY3JlYXRlRWxlbWVudC4nIDogdHlwZW9mIG5leHRFbGVtZW50ID09PSAnZnVuY3Rpb24nID8gJyBJbnN0ZWFkIG9mIHBhc3NpbmcgYSBjb21wb25lbnQgY2xhc3MsIG1ha2Ugc3VyZSB0byBpbnN0YW50aWF0ZSAnICsgJ2l0IGJ5IHBhc3NpbmcgaXQgdG8gUmVhY3QuY3JlYXRlRWxlbWVudC4nIDpcbiAgICAvLyBDaGVjayBpZiBpdCBxdWFja3MgbGlrZSBhbiBlbGVtZW50XG4gICAgbmV4dEVsZW1lbnQgIT0gbnVsbCAmJiBuZXh0RWxlbWVudC5wcm9wcyAhPT0gdW5kZWZpbmVkID8gJyBUaGlzIG1heSBiZSBjYXVzZWQgYnkgdW5pbnRlbnRpb25hbGx5IGxvYWRpbmcgdHdvIGluZGVwZW5kZW50ICcgKyAnY29waWVzIG9mIFJlYWN0LicgOiAnJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNvbnRhaW5lciB8fCAhY29udGFpbmVyLnRhZ05hbWUgfHwgY29udGFpbmVyLnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPT0gJ0JPRFknLCAncmVuZGVyKCk6IFJlbmRlcmluZyBjb21wb25lbnRzIGRpcmVjdGx5IGludG8gZG9jdW1lbnQuYm9keSBpcyAnICsgJ2Rpc2NvdXJhZ2VkLCBzaW5jZSBpdHMgY2hpbGRyZW4gYXJlIG9mdGVuIG1hbmlwdWxhdGVkIGJ5IHRoaXJkLXBhcnR5ICcgKyAnc2NyaXB0cyBhbmQgYnJvd3NlciBleHRlbnNpb25zLiBUaGlzIG1heSBsZWFkIHRvIHN1YnRsZSAnICsgJ3JlY29uY2lsaWF0aW9uIGlzc3Vlcy4gVHJ5IHJlbmRlcmluZyBpbnRvIGEgY29udGFpbmVyIGVsZW1lbnQgY3JlYXRlZCAnICsgJ2ZvciB5b3VyIGFwcC4nKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBuZXh0V3JhcHBlZEVsZW1lbnQgPSBuZXcgUmVhY3RFbGVtZW50KFRvcExldmVsV3JhcHBlciwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbmV4dEVsZW1lbnQpO1xuXG4gICAgdmFyIHByZXZDb21wb25lbnQgPSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW2dldFJlYWN0Um9vdElEKGNvbnRhaW5lcildO1xuXG4gICAgaWYgKHByZXZDb21wb25lbnQpIHtcbiAgICAgIHZhciBwcmV2V3JhcHBlZEVsZW1lbnQgPSBwcmV2Q29tcG9uZW50Ll9jdXJyZW50RWxlbWVudDtcbiAgICAgIHZhciBwcmV2RWxlbWVudCA9IHByZXZXcmFwcGVkRWxlbWVudC5wcm9wcztcbiAgICAgIGlmIChzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpKSB7XG4gICAgICAgIHZhciBwdWJsaWNJbnN0ID0gcHJldkNvbXBvbmVudC5fcmVuZGVyZWRDb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKTtcbiAgICAgICAgdmFyIHVwZGF0ZWRDYWxsYmFjayA9IGNhbGxiYWNrICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKHB1YmxpY0luc3QpO1xuICAgICAgICB9O1xuICAgICAgICBSZWFjdE1vdW50Ll91cGRhdGVSb290Q29tcG9uZW50KHByZXZDb21wb25lbnQsIG5leHRXcmFwcGVkRWxlbWVudCwgY29udGFpbmVyLCB1cGRhdGVkQ2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gcHVibGljSW5zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFJlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZShjb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZWFjdFJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgdmFyIGNvbnRhaW5lckhhc1JlYWN0TWFya3VwID0gcmVhY3RSb290RWxlbWVudCAmJiAhIWludGVybmFsR2V0SUQocmVhY3RSb290RWxlbWVudCk7XG4gICAgdmFyIGNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkID0gaGFzTm9uUm9vdFJlYWN0Q2hpbGQoY29udGFpbmVyKTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQsICdyZW5kZXIoLi4uKTogUmVwbGFjaW5nIFJlYWN0LXJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSBuZXcgcm9vdCAnICsgJ2NvbXBvbmVudC4gSWYgeW91IGludGVuZGVkIHRvIHVwZGF0ZSB0aGUgY2hpbGRyZW4gb2YgdGhpcyBub2RlLCAnICsgJ3lvdSBzaG91bGQgaW5zdGVhZCBoYXZlIHRoZSBleGlzdGluZyBjaGlsZHJlbiB1cGRhdGUgdGhlaXIgc3RhdGUgJyArICdhbmQgcmVuZGVyIHRoZSBuZXcgY29tcG9uZW50cyBpbnN0ZWFkIG9mIGNhbGxpbmcgUmVhY3RET00ucmVuZGVyLicpIDogdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoIWNvbnRhaW5lckhhc1JlYWN0TWFya3VwIHx8IHJlYWN0Um9vdEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgdmFyIHJvb3RFbGVtZW50U2libGluZyA9IHJlYWN0Um9vdEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlIChyb290RWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICBpZiAoaW50ZXJuYWxHZXRJRChyb290RWxlbWVudFNpYmxpbmcpKSB7XG4gICAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3JlbmRlcigpOiBUYXJnZXQgbm9kZSBoYXMgbWFya3VwIHJlbmRlcmVkIGJ5IFJlYWN0LCBidXQgdGhlcmUgJyArICdhcmUgdW5yZWxhdGVkIG5vZGVzIGFzIHdlbGwuIFRoaXMgaXMgbW9zdCBjb21tb25seSBjYXVzZWQgYnkgJyArICd3aGl0ZS1zcGFjZSBpbnNlcnRlZCBhcm91bmQgc2VydmVyLXJlbmRlcmVkIG1hcmt1cC4nKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICByb290RWxlbWVudFNpYmxpbmcgPSByb290RWxlbWVudFNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2hvdWxkUmV1c2VNYXJrdXAgPSBjb250YWluZXJIYXNSZWFjdE1hcmt1cCAmJiAhcHJldkNvbXBvbmVudCAmJiAhY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQ7XG4gICAgdmFyIGNvbXBvbmVudCA9IFJlYWN0TW91bnQuX3JlbmRlck5ld1Jvb3RDb21wb25lbnQobmV4dFdyYXBwZWRFbGVtZW50LCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBwYXJlbnRDb21wb25lbnQgIT0gbnVsbCA/IHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9wcm9jZXNzQ2hpbGRDb250ZXh0KHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jb250ZXh0KSA6IGVtcHR5T2JqZWN0KS5fcmVuZGVyZWRDb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwoY29tcG9uZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVycyBhIFJlYWN0IGNvbXBvbmVudCBpbnRvIHRoZSBET00gaW4gdGhlIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICAgKlxuICAgKiBJZiB0aGUgUmVhY3QgY29tcG9uZW50IHdhcyBwcmV2aW91c2x5IHJlbmRlcmVkIGludG8gYGNvbnRhaW5lcmAsIHRoaXMgd2lsbFxuICAgKiBwZXJmb3JtIGFuIHVwZGF0ZSBvbiBpdCBhbmQgb25seSBtdXRhdGUgdGhlIERPTSBhcyBuZWNlc3NhcnkgdG8gcmVmbGVjdCB0aGVcbiAgICogbGF0ZXN0IFJlYWN0IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IENvbXBvbmVudCBlbGVtZW50IHRvIHJlbmRlci5cbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gQ29tcG9uZW50IGluc3RhbmNlIHJlbmRlcmVkIGluIGBjb250YWluZXJgLlxuICAgKi9cbiAgcmVuZGVyOiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5fcmVuZGVyU3VidHJlZUludG9Db250YWluZXIobnVsbCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjb250YWluZXIgbm9kZSBpbnRvIHdoaWNoIFJlYWN0IGNvbXBvbmVudHMgd2lsbCBiZSByZW5kZXJlZC5cbiAgICogVGhpcyBhbHNvIGNyZWF0ZXMgdGhlIFwicmVhY3RSb290XCIgSUQgdGhhdCB3aWxsIGJlIGFzc2lnbmVkIHRvIHRoZSBlbGVtZW50XG4gICAqIHJlbmRlcmVkIHdpdGhpbi5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVnaXN0ZXIgYXMgYSBjb250YWluZXIuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIFwicmVhY3RSb290XCIgSUQgb2YgZWxlbWVudHMgcmVuZGVyZWQgd2l0aGluLlxuICAgKi9cbiAgcmVnaXN0ZXJDb250YWluZXI6IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpO1xuICAgIGlmIChyZWFjdFJvb3RJRCkge1xuICAgICAgLy8gSWYgb25lIGV4aXN0cywgbWFrZSBzdXJlIGl0IGlzIGEgdmFsaWQgXCJyZWFjdFJvb3RcIiBJRC5cbiAgICAgIHJlYWN0Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKHJlYWN0Um9vdElEKTtcbiAgICB9XG4gICAgaWYgKCFyZWFjdFJvb3RJRCkge1xuICAgICAgLy8gTm8gdmFsaWQgXCJyZWFjdFJvb3RcIiBJRCBmb3VuZCwgY3JlYXRlIG9uZS5cbiAgICAgIHJlYWN0Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RSb290SUQoKTtcbiAgICB9XG4gICAgY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdID0gY29udGFpbmVyO1xuICAgIHJldHVybiByZWFjdFJvb3RJRDtcbiAgfSxcblxuICAvKipcbiAgICogVW5tb3VudHMgYW5kIGRlc3Ryb3lzIHRoZSBSZWFjdCBjb21wb25lbnQgcmVuZGVyZWQgaW4gdGhlIGBjb250YWluZXJgLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCBjb250YWluaW5nIGEgUmVhY3QgY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGEgY29tcG9uZW50IHdhcyBmb3VuZCBpbiBhbmQgdW5tb3VudGVkIGZyb21cbiAgICogICAgICAgICAgICAgICAgICAgYGNvbnRhaW5lcmBcbiAgICovXG4gIHVubW91bnRDb21wb25lbnRBdE5vZGU6IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAvLyBWYXJpb3VzIHBhcnRzIG9mIG91ciBjb2RlIChzdWNoIGFzIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50J3NcbiAgICAvLyBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KSBhc3N1bWUgdGhhdCBjYWxscyB0byByZW5kZXIgYXJlbid0IG5lc3RlZDtcbiAgICAvLyB2ZXJpZnkgdGhhdCB0aGF0J3MgdGhlIGNhc2UuIChTdHJpY3RseSBzcGVha2luZywgdW5tb3VudGluZyB3b24ndCBjYXVzZSBhXG4gICAgLy8gcmVuZGVyIGJ1dCB3ZSBzdGlsbCBkb24ndCBleHBlY3QgdG8gYmUgaW4gYSByZW5kZXIgY2FsbCBoZXJlLilcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKCk6IFJlbmRlciBtZXRob2RzIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gJyArICdvZiBwcm9wcyBhbmQgc3RhdGU7IHRyaWdnZXJpbmcgbmVzdGVkIGNvbXBvbmVudCB1cGRhdGVzIGZyb20gcmVuZGVyICcgKyAnaXMgbm90IGFsbG93ZWQuIElmIG5lY2Vzc2FyeSwgdHJpZ2dlciBuZXN0ZWQgdXBkYXRlcyBpbiAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZS4gQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJXMuJywgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCAmJiBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblxuICAgICEoY29udGFpbmVyICYmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VubW91bnRDb21wb25lbnRBdE5vZGUoLi4uKTogVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpO1xuICAgIHZhciBjb21wb25lbnQgPSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIG5vZGUgYmVpbmcgdW5tb3VudGVkIHdhcyByZW5kZXJlZCBieSBSZWFjdCwgYnV0IGlzbid0IGFcbiAgICAgIC8vIHJvb3Qgbm9kZS5cbiAgICAgIHZhciBjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCA9IGhhc05vblJvb3RSZWFjdENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSBjb250YWluZXIgaXRzZWxmIGlzIGEgUmVhY3Qgcm9vdCBub2RlLlxuICAgICAgdmFyIGNvbnRhaW5lcklEID0gaW50ZXJuYWxHZXRJRChjb250YWluZXIpO1xuICAgICAgdmFyIGlzQ29udGFpbmVyUmVhY3RSb290ID0gY29udGFpbmVySUQgJiYgY29udGFpbmVySUQgPT09IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChjb250YWluZXJJRCk7XG5cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCwgJ3VubW91bnRDb21wb25lbnRBdE5vZGUoKTogVGhlIG5vZGUgeW91XFwncmUgYXR0ZW1wdGluZyB0byB1bm1vdW50ICcgKyAnd2FzIHJlbmRlcmVkIGJ5IFJlYWN0IGFuZCBpcyBub3QgYSB0b3AtbGV2ZWwgY29udGFpbmVyLiAlcycsIGlzQ29udGFpbmVyUmVhY3RSb290ID8gJ1lvdSBtYXkgaGF2ZSBhY2NpZGVudGFsbHkgcGFzc2VkIGluIGEgUmVhY3Qgcm9vdCBub2RlIGluc3RlYWQgJyArICdvZiBpdHMgY29udGFpbmVyLicgOiAnSW5zdGVhZCwgaGF2ZSB0aGUgcGFyZW50IGNvbXBvbmVudCB1cGRhdGUgaXRzIHN0YXRlIGFuZCAnICsgJ3JlcmVuZGVyIGluIG9yZGVyIHRvIHJlbW92ZSB0aGlzIGNvbXBvbmVudC4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXModW5tb3VudENvbXBvbmVudEZyb21Ob2RlLCBjb21wb25lbnQsIGNvbnRhaW5lcik7XG4gICAgZGVsZXRlIGluc3RhbmNlc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgIGRlbGV0ZSBjb250YWluZXJzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGRlbGV0ZSByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBjb250YWluZXIgRE9NIGVsZW1lbnQgdGhhdCBjb250YWlucyBSZWFjdCBjb21wb25lbnQgdG8gd2hpY2ggdGhlXG4gICAqIHN1cHBsaWVkIERPTSBgaWRgIGJlbG9uZ3MuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgb2YgYW4gZWxlbWVudCByZW5kZXJlZCBieSBhIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7P0RPTUVsZW1lbnR9IERPTSBlbGVtZW50IHRoYXQgY29udGFpbnMgdGhlIGBpZGAuXG4gICAqL1xuICBmaW5kUmVhY3RDb250YWluZXJGb3JJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgdmFyIHJlYWN0Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKGlkKTtcbiAgICB2YXIgY29udGFpbmVyID0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciByb290RWxlbWVudCA9IHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgICAgaWYgKHJvb3RFbGVtZW50ICYmIHJvb3RFbGVtZW50LnBhcmVudE5vZGUgIT09IGNvbnRhaW5lcikge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhcbiAgICAgICAgLy8gQ2FsbCBpbnRlcm5hbEdldElEIGhlcmUgYmVjYXVzZSBnZXRJRCBjYWxscyBpc1ZhbGlkIHdoaWNoIGNhbGxzXG4gICAgICAgIC8vIGZpbmRSZWFjdENvbnRhaW5lckZvcklEICh0aGlzIGZ1bmN0aW9uKS5cbiAgICAgICAgaW50ZXJuYWxHZXRJRChyb290RWxlbWVudCkgPT09IHJlYWN0Um9vdElELCAnUmVhY3RNb3VudDogUm9vdCBlbGVtZW50IElEIGRpZmZlcmVkIGZyb20gcmVhY3RSb290SUQuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBjb250YWluZXJDaGlsZCA9IGNvbnRhaW5lci5maXJzdENoaWxkO1xuICAgICAgICBpZiAoY29udGFpbmVyQ2hpbGQgJiYgcmVhY3RSb290SUQgPT09IGludGVybmFsR2V0SUQoY29udGFpbmVyQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGNvbnRhaW5lciBoYXMgYSBuZXcgY2hpbGQgd2l0aCB0aGUgc2FtZSBJRCBhcyB0aGUgb2xkXG4gICAgICAgICAgLy8gcm9vdCBlbGVtZW50LCB0aGVuIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdIGlzXG4gICAgICAgICAgLy8ganVzdCBzdGFsZSBhbmQgbmVlZHMgdG8gYmUgdXBkYXRlZC4gVGhlIGNhc2UgdGhhdCBkZXNlcnZlcyBhXG4gICAgICAgICAgLy8gd2FybmluZyBpcyB3aGVuIHRoZSBjb250YWluZXIgaXMgZW1wdHkuXG4gICAgICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBjb250YWluZXJDaGlsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0TW91bnQ6IFJvb3QgZWxlbWVudCBoYXMgYmVlbiByZW1vdmVkIGZyb20gaXRzIG9yaWdpbmFsICcgKyAnY29udGFpbmVyLiBOZXcgY29udGFpbmVyOiAlcycsIHJvb3RFbGVtZW50LnBhcmVudE5vZGUpIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfSxcblxuICAvKipcbiAgICogRmluZHMgYW4gZWxlbWVudCByZW5kZXJlZCBieSBSZWFjdCB3aXRoIHRoZSBzdXBwbGllZCBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIGEgRE9NIG5vZGUgaW4gdGhlIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7RE9NRWxlbWVudH0gUm9vdCBET00gbm9kZSBvZiB0aGUgUmVhY3QgY29tcG9uZW50LlxuICAgKi9cbiAgZmluZFJlYWN0Tm9kZUJ5SUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciByZWFjdFJvb3QgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKGlkKTtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5maW5kQ29tcG9uZW50Um9vdChyZWFjdFJvb3QsIGlkKTtcbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2VzIHVwIHRoZSBhbmNlc3RvcnMgb2YgdGhlIHN1cHBsaWVkIG5vZGUgdG8gZmluZCBhIG5vZGUgdGhhdCBpcyBhXG4gICAqIERPTSByZXByZXNlbnRhdGlvbiBvZiBhIFJlYWN0IGNvbXBvbmVudCByZW5kZXJlZCBieSB0aGlzIGNvcHkgb2YgUmVhY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbm9kZVxuICAgKiBAcmV0dXJuIHs/RE9NRXZlbnRUYXJnZXR9XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0Rmlyc3RSZWFjdERPTTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICByZXR1cm4gZmluZEZpcnN0UmVhY3RET01JbXBsKG5vZGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kcyBhIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgYHRhcmdldElEYCBpbnNpZGUgb2YgdGhlIHN1cHBsaWVkXG4gICAqIGBhbmNlc3Rvck5vZGVgLiAgRXhwbG9pdHMgdGhlIElEIG5hbWluZyBzY2hlbWUgdG8gcGVyZm9ybSB0aGUgc2VhcmNoXG4gICAqIHF1aWNrbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IGFuY2VzdG9yTm9kZSBTZWFyY2ggZnJvbSB0aGlzIHJvb3QuXG4gICAqIEBwYXJhcm0ge3N0cmluZ30gdGFyZ2V0SUQgSUQgb2YgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHtET01FdmVudFRhcmdldH0gRE9NIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgYHRhcmdldElEYC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBmaW5kQ29tcG9uZW50Um9vdDogZnVuY3Rpb24gKGFuY2VzdG9yTm9kZSwgdGFyZ2V0SUQpIHtcbiAgICB2YXIgZmlyc3RDaGlsZHJlbiA9IGZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheTtcbiAgICB2YXIgY2hpbGRJbmRleCA9IDA7XG5cbiAgICB2YXIgZGVlcGVzdEFuY2VzdG9yID0gZmluZERlZXBlc3RDYWNoZWRBbmNlc3Rvcih0YXJnZXRJRCkgfHwgYW5jZXN0b3JOb2RlO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBvbiB0aGUgbmV4dCBsaW5lOyBnaXZlIGFuIGVhcmx5IHdhcm5pbmdcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRlZXBlc3RBbmNlc3RvciAhPSBudWxsLCAnUmVhY3QgY2FuXFwndCBmaW5kIHRoZSByb290IGNvbXBvbmVudCBub2RlIGZvciBkYXRhLXJlYWN0aWQgdmFsdWUgJyArICdgJXNgLiBJZiB5b3VcXCdyZSBzZWVpbmcgdGhpcyBtZXNzYWdlLCBpdCBwcm9iYWJseSBtZWFucyB0aGF0ICcgKyAneW91XFwndmUgbG9hZGVkIHR3byBjb3BpZXMgb2YgUmVhY3Qgb24gdGhlIHBhZ2UuIEF0IHRoaXMgdGltZSwgb25seSAnICsgJ2Egc2luZ2xlIGNvcHkgb2YgUmVhY3QgY2FuIGJlIGxvYWRlZCBhdCBhIHRpbWUuJywgdGFyZ2V0SUQpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGZpcnN0Q2hpbGRyZW5bMF0gPSBkZWVwZXN0QW5jZXN0b3IuZmlyc3RDaGlsZDtcbiAgICBmaXJzdENoaWxkcmVuLmxlbmd0aCA9IDE7XG5cbiAgICB3aGlsZSAoY2hpbGRJbmRleCA8IGZpcnN0Q2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICB2YXIgY2hpbGQgPSBmaXJzdENoaWxkcmVuW2NoaWxkSW5kZXgrK107XG4gICAgICB2YXIgdGFyZ2V0Q2hpbGQ7XG5cbiAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICB2YXIgY2hpbGRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY2hpbGQpO1xuICAgICAgICBpZiAoY2hpbGRJRCkge1xuICAgICAgICAgIC8vIEV2ZW4gaWYgd2UgZmluZCB0aGUgbm9kZSB3ZSdyZSBsb29raW5nIGZvciwgd2UgZmluaXNoIGxvb3BpbmdcbiAgICAgICAgICAvLyB0aHJvdWdoIGl0cyBzaWJsaW5ncyB0byBlbnN1cmUgdGhleSdyZSBjYWNoZWQgc28gdGhhdCB3ZSBkb24ndCBoYXZlXG4gICAgICAgICAgLy8gdG8gcmV2aXNpdCB0aGlzIG5vZGUgYWdhaW4uIE90aGVyd2lzZSwgd2UgbWFrZSBuXjIgY2FsbHMgdG8gZ2V0SURcbiAgICAgICAgICAvLyB3aGVuIHZpc2l0aW5nIHRoZSBtYW55IGNoaWxkcmVuIG9mIGEgc2luZ2xlIG5vZGUgaW4gb3JkZXIuXG5cbiAgICAgICAgICBpZiAodGFyZ2V0SUQgPT09IGNoaWxkSUQpIHtcbiAgICAgICAgICAgIHRhcmdldENoaWxkID0gY2hpbGQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChSZWFjdEluc3RhbmNlSGFuZGxlcy5pc0FuY2VzdG9ySURPZihjaGlsZElELCB0YXJnZXRJRCkpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGZpbmQgYSBjaGlsZCB3aG9zZSBJRCBpcyBhbiBhbmNlc3RvciBvZiB0aGUgZ2l2ZW4gSUQsXG4gICAgICAgICAgICAvLyB0aGVuIHdlIGNhbiBiZSBzdXJlIHRoYXQgd2Ugb25seSB3YW50IHRvIHNlYXJjaCB0aGUgc3VidHJlZVxuICAgICAgICAgICAgLy8gcm9vdGVkIGF0IHRoaXMgY2hpbGQsIHNvIHdlIGNhbiB0aHJvdyBvdXQgdGhlIHJlc3Qgb2YgdGhlXG4gICAgICAgICAgICAvLyBzZWFyY2ggc3RhdGUuXG4gICAgICAgICAgICBmaXJzdENoaWxkcmVuLmxlbmd0aCA9IGNoaWxkSW5kZXggPSAwO1xuICAgICAgICAgICAgZmlyc3RDaGlsZHJlbi5wdXNoKGNoaWxkLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGlzIGNoaWxkIGhhZCBubyBJRCwgdGhlbiB0aGVyZSdzIGEgY2hhbmNlIHRoYXQgaXQgd2FzXG4gICAgICAgICAgLy8gaW5qZWN0ZWQgYXV0b21hdGljYWxseSBieSB0aGUgYnJvd3NlciwgYXMgd2hlbiBhIGA8dGFibGU+YFxuICAgICAgICAgIC8vIGVsZW1lbnQgc3Byb3V0cyBhbiBleHRyYSBgPHRib2R5PmAgY2hpbGQgYXMgYSBzaWRlIGVmZmVjdCBvZlxuICAgICAgICAgIC8vIGAuaW5uZXJIVE1MYCBwYXJzaW5nLiBPcHRpbWlzdGljYWxseSBjb250aW51ZSBkb3duIHRoaXNcbiAgICAgICAgICAvLyBicmFuY2gsIGJ1dCBub3QgYmVmb3JlIGV4YW1pbmluZyB0aGUgb3RoZXIgc2libGluZ3MuXG4gICAgICAgICAgZmlyc3RDaGlsZHJlbi5wdXNoKGNoaWxkLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldENoaWxkKSB7XG4gICAgICAgIC8vIEVtcHR5aW5nIGZpcnN0Q2hpbGRyZW4vZmluZENvbXBvbmVudFJvb3RSZXVzYWJsZUFycmF5IGlzXG4gICAgICAgIC8vIG5vdCBuZWNlc3NhcnkgZm9yIGNvcnJlY3RuZXNzLCBidXQgaXQgaGVscHMgdGhlIEdDIHJlY2xhaW1cbiAgICAgICAgLy8gYW55IG5vZGVzIHRoYXQgd2VyZSBsZWZ0IGF0IHRoZSBlbmQgb2YgdGhlIHNlYXJjaC5cbiAgICAgICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAwO1xuXG4gICAgICAgIHJldHVybiB0YXJnZXRDaGlsZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmaXJzdENoaWxkcmVuLmxlbmd0aCA9IDA7XG5cbiAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZmluZENvbXBvbmVudFJvb3QoLi4uLCAlcyk6IFVuYWJsZSB0byBmaW5kIGVsZW1lbnQuIFRoaXMgcHJvYmFibHkgJyArICdtZWFucyB0aGUgRE9NIHdhcyB1bmV4cGVjdGVkbHkgbXV0YXRlZCAoZS5nLiwgYnkgdGhlIGJyb3dzZXIpLCAnICsgJ3VzdWFsbHkgZHVlIHRvIGZvcmdldHRpbmcgYSA8dGJvZHk+IHdoZW4gdXNpbmcgdGFibGVzLCBuZXN0aW5nIHRhZ3MgJyArICdsaWtlIDxmb3JtPiwgPHA+LCBvciA8YT4sIG9yIHVzaW5nIG5vbi1TVkcgZWxlbWVudHMgaW4gYW4gPHN2Zz4gJyArICdwYXJlbnQuICcgKyAnVHJ5IGluc3BlY3RpbmcgdGhlIGNoaWxkIG5vZGVzIG9mIHRoZSBlbGVtZW50IHdpdGggUmVhY3QgSUQgYCVzYC4nLCB0YXJnZXRJRCwgUmVhY3RNb3VudC5nZXRJRChhbmNlc3Rvck5vZGUpKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH0sXG5cbiAgX21vdW50SW1hZ2VJbnRvTm9kZTogZnVuY3Rpb24gKG1hcmt1cCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgdHJhbnNhY3Rpb24pIHtcbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdtb3VudENvbXBvbmVudEludG9Ob2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IHZhbGlkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChzaG91bGRSZXVzZU1hcmt1cCkge1xuICAgICAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgICBpZiAoUmVhY3RNYXJrdXBDaGVja3N1bS5jYW5SZXVzZU1hcmt1cChtYXJrdXAsIHJvb3RFbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2hlY2tzdW0gPSByb290RWxlbWVudC5nZXRBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUpO1xuICAgICAgICByb290RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUpO1xuXG4gICAgICAgIHZhciByb290TWFya3VwID0gcm9vdEVsZW1lbnQub3V0ZXJIVE1MO1xuICAgICAgICByb290RWxlbWVudC5zZXRBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUsIGNoZWNrc3VtKTtcblxuICAgICAgICB2YXIgbm9ybWFsaXplZE1hcmt1cCA9IG1hcmt1cDtcbiAgICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAvLyBiZWNhdXNlIHJvb3RNYXJrdXAgaXMgcmV0cmlldmVkIGZyb20gdGhlIERPTSwgdmFyaW91cyBub3JtYWxpemF0aW9uc1xuICAgICAgICAgIC8vIHdpbGwgaGF2ZSBvY2N1cnJlZCB3aGljaCB3aWxsIG5vdCBiZSBwcmVzZW50IGluIGBtYXJrdXBgLiBIZXJlLFxuICAgICAgICAgIC8vIGluc2VydCBtYXJrdXAgaW50byBhIDxkaXY+IG9yIDxpZnJhbWU+IGRlcGVuZGluZyBvbiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgLy8gdHlwZSB0byBwZXJmb3JtIHRoZSBzYW1lIG5vcm1hbGl6YXRpb25zIGJlZm9yZSBjb21wYXJpbmcuXG4gICAgICAgICAgdmFyIG5vcm1hbGl6ZXI7XG4gICAgICAgICAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUpIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIuaW5uZXJIVE1MID0gbWFya3VwO1xuICAgICAgICAgICAgbm9ybWFsaXplZE1hcmt1cCA9IG5vcm1hbGl6ZXIuaW5uZXJIVE1MO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub3JtYWxpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vcm1hbGl6ZXIpO1xuICAgICAgICAgICAgbm9ybWFsaXplci5jb250ZW50RG9jdW1lbnQud3JpdGUobWFya3VwKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXJrdXAgPSBub3JtYWxpemVyLmNvbnRlbnREb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub3JtYWxpemVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGlmZkluZGV4ID0gZmlyc3REaWZmZXJlbmNlSW5kZXgobm9ybWFsaXplZE1hcmt1cCwgcm9vdE1hcmt1cCk7XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gJyAoY2xpZW50KSAnICsgbm9ybWFsaXplZE1hcmt1cC5zdWJzdHJpbmcoZGlmZkluZGV4IC0gMjAsIGRpZmZJbmRleCArIDIwKSArICdcXG4gKHNlcnZlcikgJyArIHJvb3RNYXJrdXAuc3Vic3RyaW5nKGRpZmZJbmRleCAtIDIwLCBkaWZmSW5kZXggKyAyMCk7XG5cbiAgICAgICAgIShjb250YWluZXIubm9kZVR5cGUgIT09IERPQ19OT0RFX1RZUEUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1lvdVxcJ3JlIHRyeWluZyB0byByZW5kZXIgYSBjb21wb25lbnQgdG8gdGhlIGRvY3VtZW50IHVzaW5nICcgKyAnc2VydmVyIHJlbmRlcmluZyBidXQgdGhlIGNoZWNrc3VtIHdhcyBpbnZhbGlkLiBUaGlzIHVzdWFsbHkgJyArICdtZWFucyB5b3UgcmVuZGVyZWQgYSBkaWZmZXJlbnQgY29tcG9uZW50IHR5cGUgb3IgcHJvcHMgb24gJyArICd0aGUgY2xpZW50IGZyb20gdGhlIG9uZSBvbiB0aGUgc2VydmVyLCBvciB5b3VyIHJlbmRlcigpICcgKyAnbWV0aG9kcyBhcmUgaW1wdXJlLiBSZWFjdCBjYW5ub3QgaGFuZGxlIHRoaXMgY2FzZSBkdWUgdG8gJyArICdjcm9zcy1icm93c2VyIHF1aXJrcyBieSByZW5kZXJpbmcgYXQgdGhlIGRvY3VtZW50IHJvb3QuIFlvdSAnICsgJ3Nob3VsZCBsb29rIGZvciBlbnZpcm9ubWVudCBkZXBlbmRlbnQgY29kZSBpbiB5b3VyIGNvbXBvbmVudHMgJyArICdhbmQgZW5zdXJlIHRoZSBwcm9wcyBhcmUgdGhlIHNhbWUgY2xpZW50IGFuZCBzZXJ2ZXIgc2lkZTpcXG4lcycsIGRpZmZlcmVuY2UpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3QgYXR0ZW1wdGVkIHRvIHJldXNlIG1hcmt1cCBpbiBhIGNvbnRhaW5lciBidXQgdGhlICcgKyAnY2hlY2tzdW0gd2FzIGludmFsaWQuIFRoaXMgZ2VuZXJhbGx5IG1lYW5zIHRoYXQgeW91IGFyZSAnICsgJ3VzaW5nIHNlcnZlciByZW5kZXJpbmcgYW5kIHRoZSBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSAnICsgJ3NlcnZlciB3YXMgbm90IHdoYXQgdGhlIGNsaWVudCB3YXMgZXhwZWN0aW5nLiBSZWFjdCBpbmplY3RlZCAnICsgJ25ldyBtYXJrdXAgdG8gY29tcGVuc2F0ZSB3aGljaCB3b3JrcyBidXQgeW91IGhhdmUgbG9zdCBtYW55ICcgKyAnb2YgdGhlIGJlbmVmaXRzIG9mIHNlcnZlciByZW5kZXJpbmcuIEluc3RlYWQsIGZpZ3VyZSBvdXQgJyArICd3aHkgdGhlIG1hcmt1cCBiZWluZyBnZW5lcmF0ZWQgaXMgZGlmZmVyZW50IG9uIHRoZSBjbGllbnQgJyArICdvciBzZXJ2ZXI6XFxuJXMnLCBkaWZmZXJlbmNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICEoY29udGFpbmVyLm5vZGVUeXBlICE9PSBET0NfTk9ERV9UWVBFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdZb3VcXCdyZSB0cnlpbmcgdG8gcmVuZGVyIGEgY29tcG9uZW50IHRvIHRoZSBkb2N1bWVudCBidXQgJyArICd5b3UgZGlkblxcJ3QgdXNlIHNlcnZlciByZW5kZXJpbmcuIFdlIGNhblxcJ3QgZG8gdGhpcyAnICsgJ3dpdGhvdXQgdXNpbmcgc2VydmVyIHJlbmRlcmluZyBkdWUgdG8gY3Jvc3MtYnJvd3NlciBxdWlya3MuICcgKyAnU2VlIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKCkgZm9yIHNlcnZlciByZW5kZXJpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRyYW5zYWN0aW9uLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICAgIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcbiAgICAgIH1cbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtYXJrdXApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRJbm5lckhUTUwoY29udGFpbmVyLCBtYXJrdXApO1xuICAgIH1cbiAgfSxcblxuICBvd25lckRvY3VtZW50Q29udGV4dEtleTogb3duZXJEb2N1bWVudENvbnRleHRLZXksXG5cbiAgLyoqXG4gICAqIFJlYWN0IElEIHV0aWxpdGllcy5cbiAgICovXG5cbiAgZ2V0UmVhY3RSb290SUQ6IGdldFJlYWN0Um9vdElELFxuXG4gIGdldElEOiBnZXRJRCxcblxuICBzZXRJRDogc2V0SUQsXG5cbiAgZ2V0Tm9kZTogZ2V0Tm9kZSxcblxuICBnZXROb2RlRnJvbUluc3RhbmNlOiBnZXROb2RlRnJvbUluc3RhbmNlLFxuXG4gIGlzVmFsaWQ6IGlzVmFsaWQsXG5cbiAgcHVyZ2VJRDogcHVyZ2VJRFxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKFJlYWN0TW91bnQsICdSZWFjdE1vdW50Jywge1xuICBfcmVuZGVyTmV3Um9vdENvbXBvbmVudDogJ19yZW5kZXJOZXdSb290Q29tcG9uZW50JyxcbiAgX21vdW50SW1hZ2VJbnRvTm9kZTogJ19tb3VudEltYWdlSW50b05vZGUnXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE1vdW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE11bHRpQ2hpbGRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzID0gcmVxdWlyZSgnLi9SZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcycpO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdENoaWxkUmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RDaGlsZFJlY29uY2lsZXInKTtcblxudmFyIGZsYXR0ZW5DaGlsZHJlbiA9IHJlcXVpcmUoJy4vZmxhdHRlbkNoaWxkcmVuJyk7XG5cbi8qKlxuICogVXBkYXRpbmcgY2hpbGRyZW4gb2YgYSBjb21wb25lbnQgbWF5IHRyaWdnZXIgcmVjdXJzaXZlIHVwZGF0ZXMuIFRoZSBkZXB0aCBpc1xuICogdXNlZCB0byBiYXRjaCByZWN1cnNpdmUgdXBkYXRlcyB0byByZW5kZXIgbWFya3VwIG1vcmUgZWZmaWNpZW50bHkuXG4gKlxuICogQHR5cGUge251bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1cGRhdGVEZXB0aCA9IDA7XG5cbi8qKlxuICogUXVldWUgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb24gb2JqZWN0cy5cbiAqXG4gKiBFYWNoIG9iamVjdCBoYXMgYSBgdHlwZWAgcHJvcGVydHkgdGhhdCBpcyBpbiBgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXNgLlxuICpcbiAqIEB0eXBlIHthcnJheTxvYmplY3Q+fVxuICogQHByaXZhdGVcbiAqL1xudmFyIHVwZGF0ZVF1ZXVlID0gW107XG5cbi8qKlxuICogUXVldWUgb2YgbWFya3VwIHRvIGJlIHJlbmRlcmVkLlxuICpcbiAqIEB0eXBlIHthcnJheTxzdHJpbmc+fVxuICogQHByaXZhdGVcbiAqL1xudmFyIG1hcmt1cFF1ZXVlID0gW107XG5cbi8qKlxuICogRW5xdWV1ZXMgbWFya3VwIHRvIGJlIHJlbmRlcmVkIGFuZCBpbnNlcnRlZCBhdCBhIHN1cHBsaWVkIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRoYXQgcmVuZGVycyBpbnRvIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9JbmRleCBEZXN0aW5hdGlvbiBpbmRleC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVucXVldWVJbnNlcnRNYXJrdXAocGFyZW50SUQsIG1hcmt1cCwgdG9JbmRleCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLklOU0VSVF9NQVJLVVAsXG4gICAgbWFya3VwSW5kZXg6IG1hcmt1cFF1ZXVlLnB1c2gobWFya3VwKSAtIDEsXG4gICAgY29udGVudDogbnVsbCxcbiAgICBmcm9tSW5kZXg6IG51bGwsXG4gICAgdG9JbmRleDogdG9JbmRleFxuICB9KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlcyBtb3ZpbmcgYW4gZXhpc3RpbmcgZWxlbWVudCB0byBhbm90aGVyIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggU291cmNlIGluZGV4IG9mIHRoZSBleGlzdGluZyBlbGVtZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRvSW5kZXggRGVzdGluYXRpb24gaW5kZXggb2YgdGhlIGVsZW1lbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlTW92ZShwYXJlbnRJRCwgZnJvbUluZGV4LCB0b0luZGV4KSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORyxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGZyb21JbmRleDogZnJvbUluZGV4LFxuICAgIHRvSW5kZXg6IHRvSW5kZXhcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgcmVtb3ZpbmcgYW4gZWxlbWVudCBhdCBhbiBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IHRvIHJlbW92ZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVucXVldWVSZW1vdmUocGFyZW50SUQsIGZyb21JbmRleCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlJFTU9WRV9OT0RFLFxuICAgIG1hcmt1cEluZGV4OiBudWxsLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgZnJvbUluZGV4OiBmcm9tSW5kZXgsXG4gICAgdG9JbmRleDogbnVsbFxuICB9KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlcyBzZXR0aW5nIHRoZSBtYXJrdXAgb2YgYSBub2RlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRoYXQgcmVuZGVycyBpbnRvIGFuIGVsZW1lbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlU2V0TWFya3VwKHBhcmVudElELCBtYXJrdXApIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5TRVRfTUFSS1VQLFxuICAgIG1hcmt1cEluZGV4OiBudWxsLFxuICAgIGNvbnRlbnQ6IG1hcmt1cCxcbiAgICBmcm9tSW5kZXg6IG51bGwsXG4gICAgdG9JbmRleDogbnVsbFxuICB9KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlcyBzZXR0aW5nIHRoZSB0ZXh0IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRDb250ZW50IFRleHQgY29udGVudCB0byBzZXQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlVGV4dENvbnRlbnQocGFyZW50SUQsIHRleHRDb250ZW50KSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuVEVYVF9DT05URU5ULFxuICAgIG1hcmt1cEluZGV4OiBudWxsLFxuICAgIGNvbnRlbnQ6IHRleHRDb250ZW50LFxuICAgIGZyb21JbmRleDogbnVsbCxcbiAgICB0b0luZGV4OiBudWxsXG4gIH0pO1xufVxuXG4vKipcbiAqIFByb2Nlc3NlcyBhbnkgZW5xdWV1ZWQgdXBkYXRlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwcm9jZXNzUXVldWUoKSB7XG4gIGlmICh1cGRhdGVRdWV1ZS5sZW5ndGgpIHtcbiAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnByb2Nlc3NDaGlsZHJlblVwZGF0ZXModXBkYXRlUXVldWUsIG1hcmt1cFF1ZXVlKTtcbiAgICBjbGVhclF1ZXVlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgYW55IGVucXVldWVkIHVwZGF0ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJRdWV1ZSgpIHtcbiAgdXBkYXRlUXVldWUubGVuZ3RoID0gMDtcbiAgbWFya3VwUXVldWUubGVuZ3RoID0gMDtcbn1cblxuLyoqXG4gKiBSZWFjdE11bHRpQ2hpbGQgYXJlIGNhcGFibGUgb2YgcmVjb25jaWxpbmcgbXVsdGlwbGUgY2hpbGRyZW4uXG4gKlxuICogQGNsYXNzIFJlYWN0TXVsdGlDaGlsZFxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdE11bHRpQ2hpbGQgPSB7XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGNvbW1vbiBmdW5jdGlvbmFsaXR5IGZvciBjb21wb25lbnRzIHRoYXQgbXVzdCByZWNvbmNpbGUgbXVsdGlwbGVcbiAgICogY2hpbGRyZW4uIFRoaXMgaXMgdXNlZCBieSBgUmVhY3RET01Db21wb25lbnRgIHRvIG1vdW50LCB1cGRhdGUsIGFuZFxuICAgKiB1bm1vdW50IGNoaWxkIGNvbXBvbmVudHMuXG4gICAqXG4gICAqIEBsZW5kcyB7UmVhY3RNdWx0aUNoaWxkLnByb3RvdHlwZX1cbiAgICovXG4gIE1peGluOiB7XG5cbiAgICBfcmVjb25jaWxlckluc3RhbnRpYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50RWxlbWVudCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLmluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIuaW5zdGFudGlhdGVDaGlsZHJlbihuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICBfcmVjb25jaWxlclVwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAocHJldkNoaWxkcmVuLCBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciBuZXh0Q2hpbGRyZW47XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgICAgICAgICAgIG5leHRDaGlsZHJlbiA9IGZsYXR0ZW5DaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIudXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbmV4dENoaWxkcmVuID0gZmxhdHRlbkNoaWxkcmVuKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzKTtcbiAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci51cGRhdGVDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBcIm1vdW50IGltYWdlXCIgZm9yIGVhY2ggb2YgdGhlIHN1cHBsaWVkIGNoaWxkcmVuLiBJbiB0aGUgY2FzZVxuICAgICAqIG9mIGBSZWFjdERPTUNvbXBvbmVudGAsIGEgbW91bnQgaW1hZ2UgaXMgYSBzdHJpbmcgb2YgbWFya3VwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXN0ZWRDaGlsZHJlbiBOZXN0ZWQgY2hpbGQgbWFwcy5cbiAgICAgKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgb2YgbW91bnRlZCByZXByZXNlbnRhdGlvbnMuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbW91bnRDaGlsZHJlbjogZnVuY3Rpb24gKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fcmVjb25jaWxlckluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIHZhciBtb3VudEltYWdlcyA9IFtdO1xuICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKGNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bbmFtZV07XG4gICAgICAgICAgLy8gSW5saW5lZCBmb3IgcGVyZm9ybWFuY2UsIHNlZSBgUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RJRGAuXG4gICAgICAgICAgdmFyIHJvb3RJRCA9IHRoaXMuX3Jvb3ROb2RlSUQgKyBuYW1lO1xuICAgICAgICAgIHZhciBtb3VudEltYWdlID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNoaWxkLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgICBjaGlsZC5fbW91bnRJbmRleCA9IGluZGV4Kys7XG4gICAgICAgICAgbW91bnRJbWFnZXMucHVzaChtb3VudEltYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1vdW50SW1hZ2VzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBhbnkgcmVuZGVyZWQgY2hpbGRyZW4gd2l0aCBhIHRleHQgY29udGVudCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dENvbnRlbnQgU3RyaW5nIG9mIGNvbnRlbnQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlVGV4dENvbnRlbnQ6IGZ1bmN0aW9uIChuZXh0Q29udGVudCkge1xuICAgICAgdXBkYXRlRGVwdGgrKztcbiAgICAgIHZhciBlcnJvclRocm93biA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSByZW5kZXJlZCBjaGlsZHJlbi5cbiAgICAgICAgUmVhY3RDaGlsZFJlY29uY2lsZXIudW5tb3VudENoaWxkcmVuKHByZXZDaGlsZHJlbik7XG4gICAgICAgIC8vIFRPRE86IFRoZSBzZXRUZXh0Q29udGVudCBvcGVyYXRpb24gc2hvdWxkIGJlIGVub3VnaFxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHByZXZDaGlsZHJlbikge1xuICAgICAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZChwcmV2Q2hpbGRyZW5bbmFtZV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgbmV3IHRleHQgY29udGVudC5cbiAgICAgICAgdGhpcy5zZXRUZXh0Q29udGVudChuZXh0Q29udGVudCk7XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB1cGRhdGVEZXB0aC0tO1xuICAgICAgICBpZiAoIXVwZGF0ZURlcHRoKSB7XG4gICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICBjbGVhclF1ZXVlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBhbnkgcmVuZGVyZWQgY2hpbGRyZW4gd2l0aCBhIG1hcmt1cCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dE1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZU1hcmt1cDogZnVuY3Rpb24gKG5leHRNYXJrdXApIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgcmVuZGVyZWQgY2hpbGRyZW4uXG4gICAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4pO1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHByZXZDaGlsZHJlbikge1xuICAgICAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZEJ5TmFtZShwcmV2Q2hpbGRyZW5bbmFtZV0sIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldE1hcmt1cChuZXh0TWFya3VwKTtcbiAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHVwZGF0ZURlcHRoLS07XG4gICAgICAgIGlmICghdXBkYXRlRGVwdGgpIHtcbiAgICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggbmV3IGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyBOZXN0ZWQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVDaGlsZHJlbjogZnVuY3Rpb24gKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgdXBkYXRlRGVwdGgrKztcbiAgICAgIHZhciBlcnJvclRocm93biA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl91cGRhdGVDaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdXBkYXRlRGVwdGgtLTtcbiAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuICAgICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgICAgY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW1wcm92ZSBwZXJmb3JtYW5jZSBieSBpc29sYXRpbmcgdGhpcyBob3QgY29kZSBwYXRoIGZyb20gdGhlIHRyeS9jYXRjaFxuICAgICAqIGJsb2NrIGluIGB1cGRhdGVDaGlsZHJlbmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzIE5lc3RlZCBjaGlsZCBlbGVtZW50IG1hcHMuXG4gICAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgICAqIEBmaW5hbFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgdmFyIG5leHRDaGlsZHJlbiA9IHRoaXMuX3JlY29uY2lsZXJVcGRhdGVDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICB0aGlzLl9yZW5kZXJlZENoaWxkcmVuID0gbmV4dENoaWxkcmVuO1xuICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4gJiYgIXByZXZDaGlsZHJlbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgbmFtZTtcbiAgICAgIC8vIGBuZXh0SW5kZXhgIHdpbGwgaW5jcmVtZW50IGZvciBlYWNoIGNoaWxkIGluIGBuZXh0Q2hpbGRyZW5gLCBidXRcbiAgICAgIC8vIGBsYXN0SW5kZXhgIHdpbGwgYmUgdGhlIGxhc3QgaW5kZXggdmlzaXRlZCBpbiBgcHJldkNoaWxkcmVuYC5cbiAgICAgIHZhciBsYXN0SW5kZXggPSAwO1xuICAgICAgdmFyIG5leHRJbmRleCA9IDA7XG4gICAgICBmb3IgKG5hbWUgaW4gbmV4dENoaWxkcmVuKSB7XG4gICAgICAgIGlmICghbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZDaGlsZCA9IHByZXZDaGlsZHJlbiAmJiBwcmV2Q2hpbGRyZW5bbmFtZV07XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBuZXh0Q2hpbGRyZW5bbmFtZV07XG4gICAgICAgIGlmIChwcmV2Q2hpbGQgPT09IG5leHRDaGlsZCkge1xuICAgICAgICAgIHRoaXMubW92ZUNoaWxkKHByZXZDaGlsZCwgbmV4dEluZGV4LCBsYXN0SW5kZXgpO1xuICAgICAgICAgIGxhc3RJbmRleCA9IE1hdGgubWF4KHByZXZDaGlsZC5fbW91bnRJbmRleCwgbGFzdEluZGV4KTtcbiAgICAgICAgICBwcmV2Q2hpbGQuX21vdW50SW5kZXggPSBuZXh0SW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHByZXZDaGlsZCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGBsYXN0SW5kZXhgIGJlZm9yZSBgX21vdW50SW5kZXhgIGdldHMgdW5zZXQgYnkgdW5tb3VudGluZy5cbiAgICAgICAgICAgIGxhc3RJbmRleCA9IE1hdGgubWF4KHByZXZDaGlsZC5fbW91bnRJbmRleCwgbGFzdEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZChwcmV2Q2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBUaGUgY2hpbGQgbXVzdCBiZSBpbnN0YW50aWF0ZWQgYmVmb3JlIGl0J3MgbW91bnRlZC5cbiAgICAgICAgICB0aGlzLl9tb3VudENoaWxkQnlOYW1lQXRJbmRleChuZXh0Q2hpbGQsIG5hbWUsIG5leHRJbmRleCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIG5leHRJbmRleCsrO1xuICAgICAgfVxuICAgICAgLy8gUmVtb3ZlIGNoaWxkcmVuIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LlxuICAgICAgZm9yIChuYW1lIGluIHByZXZDaGlsZHJlbikge1xuICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpICYmICEobmV4dENoaWxkcmVuICYmIG5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkpIHtcbiAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyBhbGwgcmVuZGVyZWQgY2hpbGRyZW4uIFRoaXMgc2hvdWxkIGJlIHVzZWQgdG8gY2xlYW4gdXAgY2hpbGRyZW5cbiAgICAgKiB3aGVuIHRoaXMgY29tcG9uZW50IGlzIHVubW91bnRlZC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVubW91bnRDaGlsZHJlbjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgUmVhY3RDaGlsZFJlY29uY2lsZXIudW5tb3VudENoaWxkcmVuKHJlbmRlcmVkQ2hpbGRyZW4pO1xuICAgICAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE1vdmVzIGEgY2hpbGQgY29tcG9uZW50IHRvIHRoZSBzdXBwbGllZCBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNoaWxkIENvbXBvbmVudCB0byBtb3ZlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4IG9mIHRoZSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsYXN0SW5kZXggTGFzdCBpbmRleCB2aXNpdGVkIG9mIHRoZSBzaWJsaW5ncyBvZiBgY2hpbGRgLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBtb3ZlQ2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCwgdG9JbmRleCwgbGFzdEluZGV4KSB7XG4gICAgICAvLyBJZiB0aGUgaW5kZXggb2YgYGNoaWxkYCBpcyBsZXNzIHRoYW4gYGxhc3RJbmRleGAsIHRoZW4gaXQgbmVlZHMgdG9cbiAgICAgIC8vIGJlIG1vdmVkLiBPdGhlcndpc2UsIHdlIGRvIG5vdCBuZWVkIHRvIG1vdmUgaXQgYmVjYXVzZSBhIGNoaWxkIHdpbGwgYmVcbiAgICAgIC8vIGluc2VydGVkIG9yIG1vdmVkIGJlZm9yZSBgY2hpbGRgLlxuICAgICAgaWYgKGNoaWxkLl9tb3VudEluZGV4IDwgbGFzdEluZGV4KSB7XG4gICAgICAgIGVucXVldWVNb3ZlKHRoaXMuX3Jvb3ROb2RlSUQsIGNoaWxkLl9tb3VudEluZGV4LCB0b0luZGV4KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNoaWxkIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNoaWxkIENvbXBvbmVudCB0byBjcmVhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vdW50SW1hZ2UgTWFya3VwIHRvIGluc2VydC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgY3JlYXRlQ2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCwgbW91bnRJbWFnZSkge1xuICAgICAgZW5xdWV1ZUluc2VydE1hcmt1cCh0aGlzLl9yb290Tm9kZUlELCBtb3VudEltYWdlLCBjaGlsZC5fbW91bnRJbmRleCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBjaGlsZCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDaGlsZCB0byByZW1vdmUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHJlbW92ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGVucXVldWVSZW1vdmUodGhpcy5fcm9vdE5vZGVJRCwgY2hpbGQuX21vdW50SW5kZXgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoaXMgdGV4dCBjb250ZW50IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0Q29udGVudCBUZXh0IGNvbnRlbnQgdG8gc2V0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzZXRUZXh0Q29udGVudDogZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICBlbnF1ZXVlVGV4dENvbnRlbnQodGhpcy5fcm9vdE5vZGVJRCwgdGV4dENvbnRlbnQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoaXMgbWFya3VwIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRvIHNldC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgc2V0TWFya3VwOiBmdW5jdGlvbiAobWFya3VwKSB7XG4gICAgICBlbnF1ZXVlU2V0TWFya3VwKHRoaXMuX3Jvb3ROb2RlSUQsIG1hcmt1cCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE1vdW50cyBhIGNoaWxkIHdpdGggdGhlIHN1cHBsaWVkIG5hbWUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBUaGlzIGlzIHBhcnQgb2YgYHVwZGF0ZUNoaWxkcmVuYCBhbmQgaXMgaGVyZSBmb3IgcmVhZGFiaWxpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gbW91bnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgY2hpbGQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IGF0IHdoaWNoIHRvIGluc2VydCB0aGUgY2hpbGQuXG4gICAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21vdW50Q2hpbGRCeU5hbWVBdEluZGV4OiBmdW5jdGlvbiAoY2hpbGQsIG5hbWUsIGluZGV4LCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgLy8gSW5saW5lZCBmb3IgcGVyZm9ybWFuY2UsIHNlZSBgUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RJRGAuXG4gICAgICB2YXIgcm9vdElEID0gdGhpcy5fcm9vdE5vZGVJRCArIG5hbWU7XG4gICAgICB2YXIgbW91bnRJbWFnZSA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudChjaGlsZCwgcm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICBjaGlsZC5fbW91bnRJbmRleCA9IGluZGV4O1xuICAgICAgdGhpcy5jcmVhdGVDaGlsZChjaGlsZCwgbW91bnRJbWFnZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubW91bnRzIGEgcmVuZGVyZWQgY2hpbGQuXG4gICAgICpcbiAgICAgKiBOT1RFOiBUaGlzIGlzIHBhcnQgb2YgYHVwZGF0ZUNoaWxkcmVuYCBhbmQgaXMgaGVyZSBmb3IgcmVhZGFiaWxpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gdW5tb3VudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF91bm1vdW50Q2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICBjaGlsZC5fbW91bnRJbmRleCA9IG51bGw7XG4gICAgfVxuXG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE11bHRpQ2hpbGQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG5cbi8qKlxuICogV2hlbiBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGFyZSB1cGRhdGVkLCBhIHNlcmllcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvblxuICogb2JqZWN0cyBhcmUgY3JlYXRlZCBpbiBvcmRlciB0byBiYXRjaCBhbmQgc2VyaWFsaXplIHRoZSByZXF1aXJlZCBjaGFuZ2VzLlxuICpcbiAqIEVudW1lcmF0ZXMgYWxsIHRoZSBwb3NzaWJsZSB0eXBlcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvbnMuXG4gKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IGtleU1pcnJvcih7XG4gIElOU0VSVF9NQVJLVVA6IG51bGwsXG4gIE1PVkVfRVhJU1RJTkc6IG51bGwsXG4gIFJFTU9WRV9OT0RFOiBudWxsLFxuICBTRVRfTUFSS1VQOiBudWxsLFxuICBURVhUX0NPTlRFTlQ6IG51bGxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE5hdGl2ZUNvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgYXV0b0dlbmVyYXRlV3JhcHBlckNsYXNzID0gbnVsbDtcbnZhciBnZW5lcmljQ29tcG9uZW50Q2xhc3MgPSBudWxsO1xuLy8gVGhpcyByZWdpc3RyeSBrZWVwcyB0cmFjayBvZiB3cmFwcGVyIGNsYXNzZXMgYXJvdW5kIG5hdGl2ZSB0YWdzLlxudmFyIHRhZ1RvQ29tcG9uZW50Q2xhc3MgPSB7fTtcbnZhciB0ZXh0Q29tcG9uZW50Q2xhc3MgPSBudWxsO1xuXG52YXIgUmVhY3ROYXRpdmVDb21wb25lbnRJbmplY3Rpb24gPSB7XG4gIC8vIFRoaXMgYWNjZXB0cyBhIGNsYXNzIHRoYXQgcmVjZWl2ZXMgdGhlIHRhZyBzdHJpbmcuIFRoaXMgaXMgYSBjYXRjaCBhbGxcbiAgLy8gdGhhdCBjYW4gcmVuZGVyIGFueSBraW5kIG9mIHRhZy5cbiAgaW5qZWN0R2VuZXJpY0NvbXBvbmVudENsYXNzOiBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3MpIHtcbiAgICBnZW5lcmljQ29tcG9uZW50Q2xhc3MgPSBjb21wb25lbnRDbGFzcztcbiAgfSxcbiAgLy8gVGhpcyBhY2NlcHRzIGEgdGV4dCBjb21wb25lbnQgY2xhc3MgdGhhdCB0YWtlcyB0aGUgdGV4dCBzdHJpbmcgdG8gYmVcbiAgLy8gcmVuZGVyZWQgYXMgcHJvcHMuXG4gIGluamVjdFRleHRDb21wb25lbnRDbGFzczogZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzKSB7XG4gICAgdGV4dENvbXBvbmVudENsYXNzID0gY29tcG9uZW50Q2xhc3M7XG4gIH0sXG4gIC8vIFRoaXMgYWNjZXB0cyBhIGtleWVkIG9iamVjdCB3aXRoIGNsYXNzZXMgYXMgdmFsdWVzLiBFYWNoIGtleSByZXByZXNlbnRzIGFcbiAgLy8gdGFnLiBUaGF0IHBhcnRpY3VsYXIgdGFnIHdpbGwgdXNlIHRoaXMgY2xhc3MgaW5zdGVhZCBvZiB0aGUgZ2VuZXJpYyBvbmUuXG4gIGluamVjdENvbXBvbmVudENsYXNzZXM6IGZ1bmN0aW9uIChjb21wb25lbnRDbGFzc2VzKSB7XG4gICAgYXNzaWduKHRhZ1RvQ29tcG9uZW50Q2xhc3MsIGNvbXBvbmVudENsYXNzZXMpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBhIGNvbXBvc2l0ZSBjb21wb25lbnQgd3JhcHBlciBjbGFzcyBmb3IgYSBzcGVjaWZpYyB0YWcuXG4gKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgVGhlIHRhZyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBjbGFzcy5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgUmVhY3QgY2xhc3MgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudENsYXNzRm9yRWxlbWVudChlbGVtZW50KSB7XG4gIGlmICh0eXBlb2YgZWxlbWVudC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQudHlwZTtcbiAgfVxuICB2YXIgdGFnID0gZWxlbWVudC50eXBlO1xuICB2YXIgY29tcG9uZW50Q2xhc3MgPSB0YWdUb0NvbXBvbmVudENsYXNzW3RhZ107XG4gIGlmIChjb21wb25lbnRDbGFzcyA9PSBudWxsKSB7XG4gICAgdGFnVG9Db21wb25lbnRDbGFzc1t0YWddID0gY29tcG9uZW50Q2xhc3MgPSBhdXRvR2VuZXJhdGVXcmFwcGVyQ2xhc3ModGFnKTtcbiAgfVxuICByZXR1cm4gY29tcG9uZW50Q2xhc3M7XG59XG5cbi8qKlxuICogR2V0IGEgbmF0aXZlIGludGVybmFsIGNvbXBvbmVudCBjbGFzcyBmb3IgYSBzcGVjaWZpYyB0YWcuXG4gKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gY3JlYXRlLlxuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBpbnRlcm5hbCBjbGFzcyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW50ZXJuYWxDb21wb25lbnQoZWxlbWVudCkge1xuICAhZ2VuZXJpY0NvbXBvbmVudENsYXNzID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RoZXJlIGlzIG5vIHJlZ2lzdGVyZWQgY29tcG9uZW50IGZvciB0aGUgdGFnICVzJywgZWxlbWVudC50eXBlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBuZXcgZ2VuZXJpY0NvbXBvbmVudENsYXNzKGVsZW1lbnQudHlwZSwgZWxlbWVudC5wcm9wcyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdFRleHR9IHRleHRcbiAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZUZvclRleHQodGV4dCkge1xuICByZXR1cm4gbmV3IHRleHRDb21wb25lbnRDbGFzcyh0ZXh0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVGV4dENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcmV0dXJuIGNvbXBvbmVudCBpbnN0YW5jZW9mIHRleHRDb21wb25lbnRDbGFzcztcbn1cblxudmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50ID0ge1xuICBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQ6IGdldENvbXBvbmVudENsYXNzRm9yRWxlbWVudCxcbiAgY3JlYXRlSW50ZXJuYWxDb21wb25lbnQ6IGNyZWF0ZUludGVybmFsQ29tcG9uZW50LFxuICBjcmVhdGVJbnN0YW5jZUZvclRleHQ6IGNyZWF0ZUluc3RhbmNlRm9yVGV4dCxcbiAgaXNUZXh0Q29tcG9uZW50OiBpc1RleHRDb21wb25lbnQsXG4gIGluamVjdGlvbjogUmVhY3ROYXRpdmVDb21wb25lbnRJbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3ROYXRpdmVDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE5vb3BVcGRhdGVRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIHdhcm5URFoocHVibGljSW5zdGFuY2UsIGNhbGxlck5hbWUpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLik6IENhbiBvbmx5IHVwZGF0ZSBhIG1vdW50ZWQgb3IgbW91bnRpbmcgY29tcG9uZW50LiAnICsgJ1RoaXMgdXN1YWxseSBtZWFucyB5b3UgY2FsbGVkICVzKCkgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4gJyArICdUaGlzIGlzIGEgbm8tb3AuIFBsZWFzZSBjaGVjayB0aGUgY29kZSBmb3IgdGhlICVzIGNvbXBvbmVudC4nLCBjYWxsZXJOYW1lLCBjYWxsZXJOYW1lLCBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3RvciAmJiBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBhYnN0cmFjdCBBUEkgZm9yIGFuIHVwZGF0ZSBxdWV1ZS5cbiAqL1xudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0ge1xuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyBjb21wb3NpdGUgY29tcG9uZW50IGlzIG1vdW50ZWQuXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHdlIHdhbnQgdG8gdGVzdC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQGZpbmFsXG4gICAqL1xuICBpc01vdW50ZWQ6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICAvKipcbiAgICogRW5xdWV1ZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhZnRlciBhbGwgdGhlIHBlbmRpbmcgdXBkYXRlc1xuICAgKiBoYXZlIHByb2Nlc3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gdXNlIGFzIGB0aGlzYCBjb250ZXh0LlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUNhbGxiYWNrOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNhbGxiYWNrKSB7fSxcblxuICAvKipcbiAgICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICAgKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICAgKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cbiAgICpcbiAgICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICAgKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdmb3JjZVVwZGF0ZScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgb3IgYHNldFN0YXRlYCB0byBtdXRhdGUgc3RhdGUuXG4gICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cbiAgICpcbiAgICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cbiAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VTdGF0ZScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBzdGF0ZS4gVGhpcyBvbmx5IGV4aXN0cyBiZWNhdXNlIF9wZW5kaW5nU3RhdGUgaXNcbiAgICogaW50ZXJuYWwuIFRoaXMgcHJvdmlkZXMgYSBtZXJnaW5nIHN0cmF0ZWd5IHRoYXQgaXMgbm90IGF2YWlsYWJsZSB0byBkZWVwXG4gICAqIHByb3BlcnRpZXMgd2hpY2ggaXMgY29uZnVzaW5nLiBUT0RPOiBFeHBvc2UgcGVuZGluZ1N0YXRlIG9yIGRvbid0IHVzZSBpdFxuICAgKiBkdXJpbmcgdGhlIG1lcmdlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxTdGF0ZSBOZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVNldFN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxTdGF0ZSkge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdzZXRTdGF0ZScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnc2V0UHJvcHMnKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wcyBOZXcgcHJvcHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwcm9wcykge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdyZXBsYWNlUHJvcHMnKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE93bmVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogUmVhY3RPd25lcnMgYXJlIGNhcGFibGUgb2Ygc3RvcmluZyByZWZlcmVuY2VzIHRvIG93bmVkIGNvbXBvbmVudHMuXG4gKlxuICogQWxsIGNvbXBvbmVudHMgYXJlIGNhcGFibGUgb2YgLy9iZWluZy8vIHJlZmVyZW5jZWQgYnkgb3duZXIgY29tcG9uZW50cywgYnV0XG4gKiBvbmx5IFJlYWN0T3duZXIgY29tcG9uZW50cyBhcmUgY2FwYWJsZSBvZiAvL3JlZmVyZW5jaW5nLy8gb3duZWQgY29tcG9uZW50cy5cbiAqIFRoZSBuYW1lZCByZWZlcmVuY2UgaXMga25vd24gYXMgYSBcInJlZlwiLlxuICpcbiAqIFJlZnMgYXJlIGF2YWlsYWJsZSB3aGVuIG1vdW50ZWQgYW5kIHVwZGF0ZWQgZHVyaW5nIHJlY29uY2lsaWF0aW9uLlxuICpcbiAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gKFxuICogICAgICAgICA8ZGl2IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9PlxuICogICAgICAgICAgIDxDdXN0b21Db21wb25lbnQgcmVmPVwiY3VzdG9tXCIgLz5cbiAqICAgICAgICAgPC9kaXY+XG4gKiAgICAgICApO1xuICogICAgIH0sXG4gKiAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICogICAgICAgdGhpcy5yZWZzLmN1c3RvbS5oYW5kbGVDbGljaygpO1xuICogICAgIH0sXG4gKiAgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICogICAgICAgdGhpcy5yZWZzLmN1c3RvbS5pbml0aWFsaXplKCk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBSZWZzIHNob3VsZCByYXJlbHkgYmUgdXNlZC4gV2hlbiByZWZzIGFyZSB1c2VkLCB0aGV5IHNob3VsZCBvbmx5IGJlIGRvbmUgdG9cbiAqIGNvbnRyb2wgZGF0YSB0aGF0IGlzIG5vdCBoYW5kbGVkIGJ5IFJlYWN0J3MgZGF0YSBmbG93LlxuICpcbiAqIEBjbGFzcyBSZWFjdE93bmVyXG4gKi9cbnZhciBSZWFjdE93bmVyID0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgb3duZXIuXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNWYWxpZE93bmVyOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuICEhKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0LmF0dGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqZWN0LmRldGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZHMgYSBjb21wb25lbnQgYnkgcmVmIHRvIGFuIG93bmVyIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50IENvbXBvbmVudCB0byByZWZlcmVuY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSBieSB3aGljaCB0byByZWZlciB0byB0aGUgY29tcG9uZW50LlxuICAgKiBAcGFyYW0ge1JlYWN0T3duZXJ9IG93bmVyIENvbXBvbmVudCBvbiB3aGljaCB0byByZWNvcmQgdGhlIHJlZi5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgYWRkQ29tcG9uZW50QXNSZWZUbzogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuICAgICFSZWFjdE93bmVyLmlzVmFsaWRPd25lcihvd25lcikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYWRkQ29tcG9uZW50QXNSZWZUbyguLi4pOiBPbmx5IGEgUmVhY3RPd25lciBjYW4gaGF2ZSByZWZzLiBZb3UgbWlnaHQgJyArICdiZSBhZGRpbmcgYSByZWYgdG8gYSBjb21wb25lbnQgdGhhdCB3YXMgbm90IGNyZWF0ZWQgaW5zaWRlIGEgY29tcG9uZW50XFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCwgb3IgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IGxvYWRlZCAnICsgJyhkZXRhaWxzOiBodHRwczovL2ZiLm1lL3JlYWN0LXJlZnMtbXVzdC1oYXZlLW93bmVyKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgb3duZXIuYXR0YWNoUmVmKHJlZiwgY29tcG9uZW50KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBieSByZWYgZnJvbSBhbiBvd25lciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gZGVyZWZlcmVuY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSBvZiB0aGUgcmVmIHRvIHJlbW92ZS5cbiAgICogQHBhcmFtIHtSZWFjdE93bmVyfSBvd25lciBDb21wb25lbnQgb24gd2hpY2ggdGhlIHJlZiBpcyByZWNvcmRlZC5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tOiBmdW5jdGlvbiAoY29tcG9uZW50LCByZWYsIG93bmVyKSB7XG4gICAgIVJlYWN0T3duZXIuaXNWYWxpZE93bmVyKG93bmVyKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW1vdmVDb21wb25lbnRBc1JlZkZyb20oLi4uKTogT25seSBhIFJlYWN0T3duZXIgY2FuIGhhdmUgcmVmcy4gWW91IG1pZ2h0ICcgKyAnYmUgcmVtb3ZpbmcgYSByZWYgdG8gYSBjb21wb25lbnQgdGhhdCB3YXMgbm90IGNyZWF0ZWQgaW5zaWRlIGEgY29tcG9uZW50XFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCwgb3IgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IGxvYWRlZCAnICsgJyhkZXRhaWxzOiBodHRwczovL2ZiLm1lL3JlYWN0LXJlZnMtbXVzdC1oYXZlLW93bmVyKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgLy8gQ2hlY2sgdGhhdCBgY29tcG9uZW50YCBpcyBzdGlsbCB0aGUgY3VycmVudCByZWYgYmVjYXVzZSB3ZSBkbyBub3Qgd2FudCB0b1xuICAgIC8vIGRldGFjaCB0aGUgcmVmIGlmIGFub3RoZXIgY29tcG9uZW50IHN0b2xlIGl0LlxuICAgIGlmIChvd25lci5nZXRQdWJsaWNJbnN0YW5jZSgpLnJlZnNbcmVmXSA9PT0gY29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCkpIHtcbiAgICAgIG93bmVyLmRldGFjaFJlZihyZWYpO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0T3duZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UGVyZlxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogUmVhY3RQZXJmIGlzIGEgZ2VuZXJhbCBBT1Agc3lzdGVtIGRlc2lnbmVkIHRvIG1lYXN1cmUgcGVyZm9ybWFuY2UuIFRoaXNcbiAqIG1vZHVsZSBvbmx5IGhhcyB0aGUgaG9va3M6IHNlZSBSZWFjdERlZmF1bHRQZXJmIGZvciB0aGUgYW5hbHlzaXMgdG9vbC5cbiAqL1xudmFyIFJlYWN0UGVyZiA9IHtcbiAgLyoqXG4gICAqIEJvb2xlYW4gdG8gZW5hYmxlL2Rpc2FibGUgbWVhc3VyZW1lbnQuIFNldCB0byBmYWxzZSBieSBkZWZhdWx0IHRvIHByZXZlbnRcbiAgICogYWNjaWRlbnRhbCBsb2dnaW5nIGFuZCBwZXJmIGxvc3MuXG4gICAqL1xuICBlbmFibGVNZWFzdXJlOiBmYWxzZSxcblxuICAvKipcbiAgICogSG9sZHMgb250byB0aGUgbWVhc3VyZSBmdW5jdGlvbiBpbiB1c2UuIEJ5IGRlZmF1bHQsIGRvbid0IG1lYXN1cmVcbiAgICogYW55dGhpbmcsIGJ1dCB3ZSdsbCBvdmVycmlkZSB0aGlzIGlmIHdlIGluamVjdCBhIG1lYXN1cmUgZnVuY3Rpb24uXG4gICAqL1xuICBzdG9yZWRNZWFzdXJlOiBfbm9NZWFzdXJlLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmplY3ROYW1lXG4gICAqIEBwYXJhbSB7b2JqZWN0PHN0cmluZz59IG1ldGhvZE5hbWVzXG4gICAqL1xuICBtZWFzdXJlTWV0aG9kczogZnVuY3Rpb24gKG9iamVjdCwgb2JqZWN0TmFtZSwgbWV0aG9kTmFtZXMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZE5hbWVzKSB7XG4gICAgICAgIGlmICghbWV0aG9kTmFtZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG9iamVjdFtrZXldID0gUmVhY3RQZXJmLm1lYXN1cmUob2JqZWN0TmFtZSwgbWV0aG9kTmFtZXNba2V5XSwgb2JqZWN0W2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVXNlIHRoaXMgdG8gd3JhcCBtZXRob2RzIHlvdSB3YW50IHRvIG1lYXN1cmUuIFplcm8gb3ZlcmhlYWQgaW4gcHJvZHVjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9iak5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICAgKi9cbiAgbWVhc3VyZTogZnVuY3Rpb24gKG9iak5hbWUsIGZuTmFtZSwgZnVuYykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbWVhc3VyZWRGdW5jID0gbnVsbDtcbiAgICAgIHZhciB3cmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoUmVhY3RQZXJmLmVuYWJsZU1lYXN1cmUpIHtcbiAgICAgICAgICBpZiAoIW1lYXN1cmVkRnVuYykge1xuICAgICAgICAgICAgbWVhc3VyZWRGdW5jID0gUmVhY3RQZXJmLnN0b3JlZE1lYXN1cmUob2JqTmFtZSwgZm5OYW1lLCBmdW5jKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1lYXN1cmVkRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgICAgd3JhcHBlci5kaXNwbGF5TmFtZSA9IG9iak5hbWUgKyAnXycgKyBmbk5hbWU7XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH0sXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWVhc3VyZVxuICAgICAqL1xuICAgIGluamVjdE1lYXN1cmU6IGZ1bmN0aW9uIChtZWFzdXJlKSB7XG4gICAgICBSZWFjdFBlcmYuc3RvcmVkTWVhc3VyZSA9IG1lYXN1cmU7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNpbXBseSBwYXNzZXMgdGhyb3VnaCB0aGUgbWVhc3VyZWQgZnVuY3Rpb24sIHdpdGhvdXQgbWVhc3VyaW5nIGl0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBvYmpOYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gX25vTWVhc3VyZShvYmpOYW1lLCBmbk5hbWUsIGZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQZXJmOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0ge307XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0ge1xuICAgIHByb3A6ICdwcm9wJyxcbiAgICBjb250ZXh0OiAnY29udGV4dCcsXG4gICAgY2hpbGRDb250ZXh0OiAnY2hpbGQgY29udGV4dCdcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZUxvY2F0aW9uc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xuXG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IGtleU1pcnJvcih7XG4gIHByb3A6IG51bGwsXG4gIGNvbnRleHQ6IG51bGwsXG4gIGNoaWxkQ29udGV4dDogbnVsbFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRJdGVyYXRvckZuID0gcmVxdWlyZSgnLi9nZXRJdGVyYXRvckZuJyk7XG5cbi8qKlxuICogQ29sbGVjdGlvbiBvZiBtZXRob2RzIHRoYXQgYWxsb3cgZGVjbGFyYXRpb24gYW5kIHZhbGlkYXRpb24gb2YgcHJvcHMgdGhhdCBhcmVcbiAqIHN1cHBsaWVkIHRvIFJlYWN0IGNvbXBvbmVudHMuIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICB2YXIgUHJvcHMgPSByZXF1aXJlKCdSZWFjdFByb3BUeXBlcycpO1xuICogICB2YXIgTXlBcnRpY2xlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHByb3BUeXBlczoge1xuICogICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIHByb3AgbmFtZWQgXCJkZXNjcmlwdGlvblwiLlxuICogICAgICAgZGVzY3JpcHRpb246IFByb3BzLnN0cmluZyxcbiAqXG4gKiAgICAgICAvLyBBIHJlcXVpcmVkIGVudW0gcHJvcCBuYW1lZCBcImNhdGVnb3J5XCIuXG4gKiAgICAgICBjYXRlZ29yeTogUHJvcHMub25lT2YoWydOZXdzJywnUGhvdG9zJ10pLmlzUmVxdWlyZWQsXG4gKlxuICogICAgICAgLy8gQSBwcm9wIG5hbWVkIFwiZGlhbG9nXCIgdGhhdCByZXF1aXJlcyBhbiBpbnN0YW5jZSBvZiBEaWFsb2cuXG4gKiAgICAgICBkaWFsb2c6IFByb3BzLmluc3RhbmNlT2YoRGlhbG9nKS5pc1JlcXVpcmVkXG4gKiAgICAgfSxcbiAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgeyAuLi4gfVxuICogICB9KTtcbiAqXG4gKiBBIG1vcmUgZm9ybWFsIHNwZWNpZmljYXRpb24gb2YgaG93IHRoZXNlIG1ldGhvZHMgYXJlIHVzZWQ6XG4gKlxuICogICB0eXBlIDo9IGFycmF5fGJvb2x8ZnVuY3xvYmplY3R8bnVtYmVyfHN0cmluZ3xvbmVPZihbLi4uXSl8aW5zdGFuY2VPZiguLi4pXG4gKiAgIGRlY2wgOj0gUmVhY3RQcm9wVHlwZXMue3R5cGV9KC5pc1JlcXVpcmVkKT9cbiAqXG4gKiBFYWNoIGFuZCBldmVyeSBkZWNsYXJhdGlvbiBwcm9kdWNlcyBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgc2lnbmF0dXJlLiBUaGlzXG4gKiBhbGxvd3MgdGhlIGNyZWF0aW9uIG9mIGN1c3RvbSB2YWxpZGF0aW9uIGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGU6XG4gKlxuICogIHZhciBNeUxpbmsgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gKiAgICBwcm9wVHlwZXM6IHtcbiAqICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIG9yIFVSSSBwcm9wIG5hbWVkIFwiaHJlZlwiLlxuICogICAgICBocmVmOiBmdW5jdGlvbihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAqICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICogICAgICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJyAmJlxuICogICAgICAgICAgICAhKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFVSSSkpIHtcbiAqICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoXG4gKiAgICAgICAgICAgICdFeHBlY3RlZCBhIHN0cmluZyBvciBhbiBVUkkgZm9yICcgKyBwcm9wTmFtZSArICcgaW4gJyArXG4gKiAgICAgICAgICAgIGNvbXBvbmVudE5hbWVcbiAqICAgICAgICAgICk7XG4gKiAgICAgICAgfVxuICogICAgICB9XG4gKiAgICB9LFxuICogICAgcmVuZGVyOiBmdW5jdGlvbigpIHsuLi59XG4gKiAgfSk7XG4gKlxuICogQGludGVybmFsXG4gKi9cblxudmFyIEFOT05ZTU9VUyA9ICc8PGFub255bW91cz4+JztcblxudmFyIFJlYWN0UHJvcFR5cGVzID0ge1xuICBhcnJheTogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2FycmF5JyksXG4gIGJvb2w6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdib29sZWFuJyksXG4gIGZ1bmM6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdmdW5jdGlvbicpLFxuICBudW1iZXI6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdudW1iZXInKSxcbiAgb2JqZWN0OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignb2JqZWN0JyksXG4gIHN0cmluZzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N0cmluZycpLFxuXG4gIGFueTogY3JlYXRlQW55VHlwZUNoZWNrZXIoKSxcbiAgYXJyYXlPZjogY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyLFxuICBlbGVtZW50OiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSxcbiAgaW5zdGFuY2VPZjogY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcixcbiAgbm9kZTogY3JlYXRlTm9kZUNoZWNrZXIoKSxcbiAgb2JqZWN0T2Y6IGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIsXG4gIG9uZU9mOiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIsXG4gIG9uZU9mVHlwZTogY3JlYXRlVW5pb25UeXBlQ2hlY2tlcixcbiAgc2hhcGU6IGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXJcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKSB7XG4gIGZ1bmN0aW9uIGNoZWNrVHlwZShpc1JlcXVpcmVkLCBwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBjb21wb25lbnROYW1lID0gY29tcG9uZW50TmFtZSB8fCBBTk9OWU1PVVM7XG4gICAgcHJvcEZ1bGxOYW1lID0gcHJvcEZ1bGxOYW1lIHx8IHByb3BOYW1lO1xuICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT0gbnVsbCkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ1JlcXVpcmVkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agd2FzIG5vdCBzcGVjaWZpZWQgaW4gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AuJykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjaGFpbmVkQ2hlY2tUeXBlID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgZmFsc2UpO1xuICBjaGFpbmVkQ2hlY2tUeXBlLmlzUmVxdWlyZWQgPSBjaGVja1R5cGUuYmluZChudWxsLCB0cnVlKTtcblxuICByZXR1cm4gY2hhaW5lZENoZWNrVHlwZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoZXhwZWN0ZWRUeXBlKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICBpZiAocHJvcFR5cGUgIT09IGV4cGVjdGVkVHlwZSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIC8vIGBwcm9wVmFsdWVgIGJlaW5nIGluc3RhbmNlIG9mLCBzYXksIGRhdGUvcmVnZXhwLCBwYXNzIHRoZSAnb2JqZWN0J1xuICAgICAgLy8gY2hlY2ssIGJ1dCB3ZSBjYW4gb2ZmZXIgYSBtb3JlIHByZWNpc2UgZXJyb3IgbWVzc2FnZSBoZXJlIHJhdGhlciB0aGFuXG4gICAgICAvLyAnb2YgdHlwZSBgb2JqZWN0YCcuXG4gICAgICB2YXIgcHJlY2lzZVR5cGUgPSBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpO1xuXG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByZWNpc2VUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdgJyArIGV4cGVjdGVkVHlwZSArICdgLicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKSB7XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zKG51bGwpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhbiBhcnJheS4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcFZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZXJyb3IgPSB0eXBlQ2hlY2tlcihwcm9wVmFsdWUsIGksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnWycgKyBpICsgJ10nLCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBpZiAoIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChwcm9wc1twcm9wTmFtZV0pKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyKGV4cGVjdGVkQ2xhc3MpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKCEocHJvcHNbcHJvcE5hbWVdIGluc3RhbmNlb2YgZXhwZWN0ZWRDbGFzcykpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICB2YXIgZXhwZWN0ZWRDbGFzc05hbWUgPSBleHBlY3RlZENsYXNzLm5hbWUgfHwgQU5PTllNT1VTO1xuICAgICAgdmFyIGFjdHVhbENsYXNzTmFtZSA9IGdldENsYXNzTmFtZShwcm9wc1twcm9wTmFtZV0pO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBhY3R1YWxDbGFzc05hbWUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgJykgKyAoJ2luc3RhbmNlIG9mIGAnICsgZXhwZWN0ZWRDbGFzc05hbWUgKyAnYC4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVudW1UeXBlQ2hlY2tlcihleHBlY3RlZFZhbHVlcykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRWYWx1ZXMpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2YsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGVjdGVkVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocHJvcFZhbHVlID09PSBleHBlY3RlZFZhbHVlc1tpXSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgIHZhciB2YWx1ZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShleHBlY3RlZFZhbHVlcyk7XG4gICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHZhbHVlIGAnICsgcHJvcFZhbHVlICsgJ2AgJyArICgnc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIG9uZSBvZiAnICsgdmFsdWVzU3RyaW5nICsgJy4nKSk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gb2JqZWN0LicpKTtcbiAgICB9XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BWYWx1ZSkge1xuICAgICAgaWYgKHByb3BWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5LCAnU0VDUkVUX0RPX05PVF9QQVNTX1RISVNfT1JfWU9VX1dJTExfQkVfRklSRUQnKTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVW5pb25UeXBlQ2hlY2tlcihhcnJheU9mVHlwZUNoZWNrZXJzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShhcnJheU9mVHlwZUNoZWNrZXJzKSkge1xuICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZSwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5T2ZUeXBlQ2hlY2tlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGVja2VyID0gYXJyYXlPZlR5cGVDaGVja2Vyc1tpXTtcbiAgICAgIGlmIChjaGVja2VyKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSwgJ1NFQ1JFVF9ET19OT1RfUEFTU19USElTX09SX1lPVV9XSUxMX0JFX0ZJUkVEJykgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4nKSk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9kZUNoZWNrZXIoKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICghaXNOb2RlKHByb3BzW3Byb3BOYW1lXSkpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgUmVhY3ROb2RlLicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBzaGFwZVR5cGVzKSB7XG4gICAgICB2YXIgY2hlY2tlciA9IHNoYXBlVHlwZXNba2V5XTtcbiAgICAgIGlmICghY2hlY2tlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBlcnJvciA9IGNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXksICdTRUNSRVRfRE9fTk9UX1BBU1NfVEhJU19PUl9ZT1VfV0lMTF9CRV9GSVJFRCcpO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlKHByb3BWYWx1ZSkge1xuICBzd2l0Y2ggKHR5cGVvZiBwcm9wVmFsdWUpIHtcbiAgICBjYXNlICdudW1iZXInOlxuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuICFwcm9wVmFsdWU7XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHByb3BWYWx1ZS5ldmVyeShpc05vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gbnVsbCB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKHByb3BWYWx1ZSk7XG4gICAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwocHJvcFZhbHVlKTtcbiAgICAgICAgdmFyIHN0ZXA7XG4gICAgICAgIGlmIChpdGVyYXRvckZuICE9PSBwcm9wVmFsdWUuZW50cmllcykge1xuICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIGlmICghaXNOb2RlKHN0ZXAudmFsdWUpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSXRlcmF0b3Igd2lsbCBwcm92aWRlIGVudHJ5IFtrLHZdIHR1cGxlcyByYXRoZXIgdGhhbiB2YWx1ZXMuXG4gICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgICBpZiAoIWlzTm9kZShlbnRyeVsxXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBFcXVpdmFsZW50IG9mIGB0eXBlb2ZgIGJ1dCB3aXRoIHNwZWNpYWwgaGFuZGxpbmcgZm9yIGFycmF5IGFuZCByZWdleHAuXG5mdW5jdGlvbiBnZXRQcm9wVHlwZShwcm9wVmFsdWUpIHtcbiAgdmFyIHByb3BUeXBlID0gdHlwZW9mIHByb3BWYWx1ZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuICAgIHJldHVybiAnYXJyYXknO1xuICB9XG4gIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAvLyBPbGQgd2Via2l0cyAoYXQgbGVhc3QgdW50aWwgQW5kcm9pZCA0LjApIHJldHVybiAnZnVuY3Rpb24nIHJhdGhlciB0aGFuXG4gICAgLy8gJ29iamVjdCcgZm9yIHR5cGVvZiBhIFJlZ0V4cC4gV2UnbGwgbm9ybWFsaXplIHRoaXMgaGVyZSBzbyB0aGF0IC9ibGEvXG4gICAgLy8gcGFzc2VzIFByb3BUeXBlcy5vYmplY3QuXG4gICAgcmV0dXJuICdvYmplY3QnO1xuICB9XG4gIHJldHVybiBwcm9wVHlwZTtcbn1cblxuLy8gVGhpcyBoYW5kbGVzIG1vcmUgdHlwZXMgdGhhbiBgZ2V0UHJvcFR5cGVgLiBPbmx5IHVzZWQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuLy8gU2VlIGBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcmAuXG5mdW5jdGlvbiBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpIHtcbiAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgaWYgKHByb3BUeXBlID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gJ2RhdGUnO1xuICAgIH0gZWxzZSBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICByZXR1cm4gJ3JlZ2V4cCc7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wVHlwZTtcbn1cblxuLy8gUmV0dXJucyBjbGFzcyBuYW1lIG9mIHRoZSBvYmplY3QsIGlmIGFueS5cbmZ1bmN0aW9uIGdldENsYXNzTmFtZShwcm9wVmFsdWUpIHtcbiAgaWYgKCFwcm9wVmFsdWUuY29uc3RydWN0b3IgfHwgIXByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lKSB7XG4gICAgcmV0dXJuICc8PGFub255bW91cz4+JztcbiAgfVxuICByZXR1cm4gcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb25cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3RET01GZWF0dXJlRmxhZ3MgPSByZXF1aXJlKCcuL1JlYWN0RE9NRmVhdHVyZUZsYWdzJyk7XG52YXIgUmVhY3RJbnB1dFNlbGVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RJbnB1dFNlbGVjdGlvbicpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG5cbi8qKlxuICogRW5zdXJlcyB0aGF0LCB3aGVuIHBvc3NpYmxlLCB0aGUgc2VsZWN0aW9uIHJhbmdlIChjdXJyZW50bHkgc2VsZWN0ZWQgdGV4dFxuICogaW5wdXQpIGlzIG5vdCBkaXN0dXJiZWQgYnkgcGVyZm9ybWluZyB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBTRUxFQ1RJT05fUkVTVE9SQVRJT04gPSB7XG4gIC8qKlxuICAgKiBAcmV0dXJuIHtTZWxlY3Rpb259IFNlbGVjdGlvbiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIGluaXRpYWxpemU6IFJlYWN0SW5wdXRTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uSW5mb3JtYXRpb24sXG4gIC8qKlxuICAgKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsIFNlbGVjdGlvbiBpbmZvcm1hdGlvbiByZXR1cm5lZCBmcm9tIGBpbml0aWFsaXplYC5cbiAgICovXG4gIGNsb3NlOiBSZWFjdElucHV0U2VsZWN0aW9uLnJlc3RvcmVTZWxlY3Rpb25cbn07XG5cbi8qKlxuICogU3VwcHJlc3NlcyBldmVudHMgKGJsdXIvZm9jdXMpIHRoYXQgY291bGQgYmUgaW5hZHZlcnRlbnRseSBkaXNwYXRjaGVkIGR1ZSB0b1xuICogaGlnaCBsZXZlbCBET00gbWFuaXB1bGF0aW9ucyAobGlrZSB0ZW1wb3JhcmlseSByZW1vdmluZyBhIHRleHQgaW5wdXQgZnJvbSB0aGVcbiAqIERPTSkuXG4gKi9cbnZhciBFVkVOVF9TVVBQUkVTU0lPTiA9IHtcbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbmFibGVkIHN0YXR1cyBvZiBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBiZWZvcmVcbiAgICogdGhlIHJlY29uY2lsaWF0aW9uLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBjdXJyZW50bHlFbmFibGVkID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmlzRW5hYmxlZCgpO1xuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICByZXR1cm4gY3VycmVudGx5RW5hYmxlZDtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBwcmV2aW91c2x5RW5hYmxlZCBFbmFibGVkIHN0YXR1cyBvZlxuICAgKiAgIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGJlZm9yZSB0aGUgcmVjb25jaWxpYXRpb24gb2NjdXJyZWQuIGBjbG9zZWBcbiAgICogICByZXN0b3JlcyB0aGUgcHJldmlvdXMgdmFsdWUuXG4gICAqL1xuICBjbG9zZTogZnVuY3Rpb24gKHByZXZpb3VzbHlFbmFibGVkKSB7XG4gICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnNldEVuYWJsZWQocHJldmlvdXNseUVuYWJsZWQpO1xuICB9XG59O1xuXG4vKipcbiAqIFByb3ZpZGVzIGEgcXVldWUgZm9yIGNvbGxlY3RpbmcgYGNvbXBvbmVudERpZE1vdW50YCBhbmRcbiAqIGBjb21wb25lbnREaWRVcGRhdGVgIGNhbGxiYWNrcyBkdXJpbmcgdGhlIHRoZSB0cmFuc2FjdGlvbi5cbiAqL1xudmFyIE9OX0RPTV9SRUFEWV9RVUVVRUlORyA9IHtcbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBpbnRlcm5hbCBgb25ET01SZWFkeWAgcXVldWUuXG4gICAqL1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkucmVzZXQoKTtcbiAgfSxcblxuICAvKipcbiAgICogQWZ0ZXIgRE9NIGlzIGZsdXNoZWQsIGludm9rZSBhbGwgcmVnaXN0ZXJlZCBgb25ET01SZWFkeWAgY2FsbGJhY2tzLlxuICAgKi9cbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5ub3RpZnlBbGwoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFeGVjdXRlZCB3aXRoaW4gdGhlIHNjb3BlIG9mIHRoZSBgVHJhbnNhY3Rpb25gIGluc3RhbmNlLiBDb25zaWRlciB0aGVzZSBhc1xuICogYmVpbmcgbWVtYmVyIG1ldGhvZHMsIGJ1dCB3aXRoIGFuIGltcGxpZWQgb3JkZXJpbmcgd2hpbGUgYmVpbmcgaXNvbGF0ZWQgZnJvbVxuICogZWFjaCBvdGhlci5cbiAqL1xudmFyIFRSQU5TQUNUSU9OX1dSQVBQRVJTID0gW1NFTEVDVElPTl9SRVNUT1JBVElPTiwgRVZFTlRfU1VQUFJFU1NJT04sIE9OX0RPTV9SRUFEWV9RVUVVRUlOR107XG5cbi8qKlxuICogQ3VycmVudGx5OlxuICogLSBUaGUgb3JkZXIgdGhhdCB0aGVzZSBhcmUgbGlzdGVkIGluIHRoZSB0cmFuc2FjdGlvbiBpcyBjcml0aWNhbDpcbiAqIC0gU3VwcHJlc3NlcyBldmVudHMuXG4gKiAtIFJlc3RvcmVzIHNlbGVjdGlvbiByYW5nZS5cbiAqXG4gKiBGdXR1cmU6XG4gKiAtIFJlc3RvcmUgZG9jdW1lbnQvb3ZlcmZsb3cgc2Nyb2xsIHBvc2l0aW9ucyB0aGF0IHdlcmUgdW5pbnRlbnRpb25hbGx5XG4gKiAgIG1vZGlmaWVkIHZpYSBET00gaW5zZXJ0aW9ucyBhYm92ZSB0aGUgdG9wIHZpZXdwb3J0IGJvdW5kYXJ5LlxuICogLSBJbXBsZW1lbnQvaW50ZWdyYXRlIHdpdGggY3VzdG9taXplZCBjb25zdHJhaW50IGJhc2VkIGxheW91dCBzeXN0ZW0gYW5kIGtlZXBcbiAqICAgdHJhY2sgb2Ygd2hpY2ggZGltZW5zaW9ucyBtdXN0IGJlIHJlbWVhc3VyZWQuXG4gKlxuICogQGNsYXNzIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb25cbiAqL1xuZnVuY3Rpb24gUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbihmb3JjZUhUTUwpIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xuICAvLyBPbmx5IHNlcnZlci1zaWRlIHJlbmRlcmluZyByZWFsbHkgbmVlZHMgdGhpcyBvcHRpb24gKHNlZVxuICAvLyBgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdgKSwgYnV0IHNlcnZlci1zaWRlIHVzZXNcbiAgLy8gYFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb25gIGluc3RlYWQuIFRoaXMgb3B0aW9uIGlzIGhlcmUgc28gdGhhdCBpdCdzXG4gIC8vIGFjY2Vzc2libGUgYW5kIGRlZmF1bHRzIHRvIGZhbHNlIHdoZW4gYFJlYWN0RE9NQ29tcG9uZW50YCBhbmRcbiAgLy8gYFJlYWN0VGV4dENvbXBvbmVudGAgY2hlY2tzIGl0IGluIGBtb3VudENvbXBvbmVudGAuYFxuICB0aGlzLnJlbmRlclRvU3RhdGljTWFya3VwID0gZmFsc2U7XG4gIHRoaXMucmVhY3RNb3VudFJlYWR5ID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQobnVsbCk7XG4gIHRoaXMudXNlQ3JlYXRlRWxlbWVudCA9ICFmb3JjZUhUTUwgJiYgUmVhY3RET01GZWF0dXJlRmxhZ3MudXNlQ3JlYXRlRWxlbWVudDtcbn1cblxudmFyIE1peGluID0ge1xuICAvKipcbiAgICogQHNlZSBUcmFuc2FjdGlvblxuICAgKiBAYWJzdHJhY3RcbiAgICogQGZpbmFsXG4gICAqIEByZXR1cm4ge2FycmF5PG9iamVjdD59IExpc3Qgb2Ygb3BlcmF0aW9uIHdyYXAgcHJvY2VkdXJlcy5cbiAgICogICBUT0RPOiBjb252ZXJ0IHRvIGFycmF5PFRyYW5zYWN0aW9uV3JhcHBlcj5cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gVFJBTlNBQ1RJT05fV1JBUFBFUlM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH0gVGhlIHF1ZXVlIHRvIGNvbGxlY3QgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcyB3aXRoLlxuICAgKi9cbiAgZ2V0UmVhY3RNb3VudFJlYWR5OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhY3RNb3VudFJlYWR5O1xuICB9LFxuXG4gIC8qKlxuICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLCBhbmQgd2lsbCBpbnZva2UgdGhpcyBiZWZvcmUgYWxsb3dpbmcgdGhpc1xuICAgKiBpbnN0YW5jZSB0byBiZSByZXVzZWQuXG4gICAqL1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHRoaXMucmVhY3RNb3VudFJlYWR5KTtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IG51bGw7XG4gIH1cbn07XG5cbmFzc2lnbihSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIE1peGluKTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVjb25jaWxlclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UmVmID0gcmVxdWlyZSgnLi9SZWFjdFJlZicpO1xuXG4vKipcbiAqIEhlbHBlciB0byBjYWxsIFJlYWN0UmVmLmF0dGFjaFJlZnMgd2l0aCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQsIHNwbGl0IG91dFxuICogdG8gYXZvaWQgYWxsb2NhdGlvbnMgaW4gdGhlIHRyYW5zYWN0aW9uIG1vdW50LXJlYWR5IHF1ZXVlLlxuICovXG5mdW5jdGlvbiBhdHRhY2hSZWZzKCkge1xuICBSZWFjdFJlZi5hdHRhY2hSZWZzKHRoaXMsIHRoaXMuX2N1cnJlbnRFbGVtZW50KTtcbn1cblxudmFyIFJlYWN0UmVjb25jaWxlciA9IHtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudCwgcmVuZGVycyBtYXJrdXAsIGFuZCByZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBSZW5kZXJlZCBtYXJrdXAgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgbWFya3VwID0gaW50ZXJuYWxJbnN0YW5jZS5tb3VudENvbXBvbmVudChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQucmVmICE9IG51bGwpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoYXR0YWNoUmVmcywgaW50ZXJuYWxJbnN0YW5jZSk7XG4gICAgfVxuICAgIHJldHVybiBtYXJrdXA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGFueSByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IGBtb3VudENvbXBvbmVudGAuXG4gICAqXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgUmVhY3RSZWYuZGV0YWNoUmVmcyhpbnRlcm5hbEluc3RhbmNlLCBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudCk7XG4gICAgaW50ZXJuYWxJbnN0YW5jZS51bm1vdW50Q29tcG9uZW50KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIGNvbXBvbmVudCB1c2luZyBhIG5ldyBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBwcmV2RWxlbWVudCA9IGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50O1xuXG4gICAgaWYgKG5leHRFbGVtZW50ID09PSBwcmV2RWxlbWVudCAmJiBjb250ZXh0ID09PSBpbnRlcm5hbEluc3RhbmNlLl9jb250ZXh0KSB7XG4gICAgICAvLyBTaW5jZSBlbGVtZW50cyBhcmUgaW1tdXRhYmxlIGFmdGVyIHRoZSBvd25lciBpcyByZW5kZXJlZCxcbiAgICAgIC8vIHdlIGNhbiBkbyBhIGNoZWFwIGlkZW50aXR5IGNvbXBhcmUgaGVyZSB0byBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhXG4gICAgICAvLyBzdXBlcmZsdW91cyByZWNvbmNpbGUuIEl0J3MgcG9zc2libGUgZm9yIHN0YXRlIHRvIGJlIG11dGFibGUgYnV0IHN1Y2hcbiAgICAgIC8vIGNoYW5nZSBzaG91bGQgdHJpZ2dlciBhbiB1cGRhdGUgb2YgdGhlIG93bmVyIHdoaWNoIHdvdWxkIHJlY3JlYXRlXG4gICAgICAvLyB0aGUgZWxlbWVudC4gV2UgZXhwbGljaXRseSBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBhbiBvd25lciBzaW5jZVxuICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgYW4gZWxlbWVudCBjcmVhdGVkIG91dHNpZGUgYSBjb21wb3NpdGUgdG8gYmVcbiAgICAgIC8vIGRlZXBseSBtdXRhdGVkIGFuZCByZXVzZWQuXG5cbiAgICAgIC8vIFRPRE86IEJhaWxpbmcgb3V0IGVhcmx5IGlzIGp1c3QgYSBwZXJmIG9wdGltaXphdGlvbiByaWdodD9cbiAgICAgIC8vIFRPRE86IFJlbW92aW5nIHRoZSByZXR1cm4gc3RhdGVtZW50IHNob3VsZCBhZmZlY3QgY29ycmVjdG5lc3M/XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlZnNDaGFuZ2VkID0gUmVhY3RSZWYuc2hvdWxkVXBkYXRlUmVmcyhwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpO1xuXG4gICAgaWYgKHJlZnNDaGFuZ2VkKSB7XG4gICAgICBSZWFjdFJlZi5kZXRhY2hSZWZzKGludGVybmFsSW5zdGFuY2UsIHByZXZFbGVtZW50KTtcbiAgICB9XG5cbiAgICBpbnRlcm5hbEluc3RhbmNlLnJlY2VpdmVDb21wb25lbnQobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblxuICAgIGlmIChyZWZzQ2hhbmdlZCAmJiBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudCAmJiBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5yZWYgIT0gbnVsbCkge1xuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShhdHRhY2hSZWZzLCBpbnRlcm5hbEluc3RhbmNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZsdXNoIGFueSBkaXJ0eSBjaGFuZ2VzIGluIGEgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwZXJmb3JtVXBkYXRlSWZOZWNlc3Nhcnk6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCB0cmFuc2FjdGlvbikge1xuICAgIGludGVybmFsSW5zdGFuY2UucGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5KHRyYW5zYWN0aW9uKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVjb25jaWxlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RSZWZcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdE93bmVyJyk7XG5cbnZhciBSZWFjdFJlZiA9IHt9O1xuXG5mdW5jdGlvbiBhdHRhY2hSZWYocmVmLCBjb21wb25lbnQsIG93bmVyKSB7XG4gIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmVmKGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBMZWdhY3kgcmVmXG4gICAgUmVhY3RPd25lci5hZGRDb21wb25lbnRBc1JlZlRvKGNvbXBvbmVudCwgcmVmLCBvd25lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGV0YWNoUmVmKHJlZiwgY29tcG9uZW50LCBvd25lcikge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJlZihudWxsKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBMZWdhY3kgcmVmXG4gICAgUmVhY3RPd25lci5yZW1vdmVDb21wb25lbnRBc1JlZkZyb20oY29tcG9uZW50LCByZWYsIG93bmVyKTtcbiAgfVxufVxuXG5SZWFjdFJlZi5hdHRhY2hSZWZzID0gZnVuY3Rpb24gKGluc3RhbmNlLCBlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZWYgPSBlbGVtZW50LnJlZjtcbiAgaWYgKHJlZiAhPSBudWxsKSB7XG4gICAgYXR0YWNoUmVmKHJlZiwgaW5zdGFuY2UsIGVsZW1lbnQuX293bmVyKTtcbiAgfVxufTtcblxuUmVhY3RSZWYuc2hvdWxkVXBkYXRlUmVmcyA9IGZ1bmN0aW9uIChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpIHtcbiAgLy8gSWYgZWl0aGVyIHRoZSBvd25lciBvciBhIGByZWZgIGhhcyBjaGFuZ2VkLCBtYWtlIHN1cmUgdGhlIG5ld2VzdCBvd25lclxuICAvLyBoYXMgc3RvcmVkIGEgcmVmZXJlbmNlIHRvIGB0aGlzYCwgYW5kIHRoZSBwcmV2aW91cyBvd25lciAoaWYgZGlmZmVyZW50KVxuICAvLyBoYXMgZm9yZ290dGVuIHRoZSByZWZlcmVuY2UgdG8gYHRoaXNgLiBXZSB1c2UgdGhlIGVsZW1lbnQgaW5zdGVhZFxuICAvLyBvZiB0aGUgcHVibGljIHRoaXMucHJvcHMgYmVjYXVzZSB0aGUgcG9zdCBwcm9jZXNzaW5nIGNhbm5vdCBkZXRlcm1pbmVcbiAgLy8gYSByZWYuIFRoZSByZWYgY29uY2VwdHVhbGx5IGxpdmVzIG9uIHRoZSBlbGVtZW50LlxuXG4gIC8vIFRPRE86IFNob3VsZCB0aGlzIGV2ZW4gYmUgcG9zc2libGU/IFRoZSBvd25lciBjYW5ub3QgY2hhbmdlIGJlY2F1c2VcbiAgLy8gaXQncyBmb3JiaWRkZW4gYnkgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQuIFRoZSByZWYgY2FuIGNoYW5nZVxuICAvLyBpZiB5b3Ugc3dhcCB0aGUga2V5cyBvZiBidXQgbm90IHRoZSByZWZzLiBSZWNvbnNpZGVyIHdoZXJlIHRoaXMgY2hlY2tcbiAgLy8gaXMgbWFkZS4gSXQgcHJvYmFibHkgYmVsb25ncyB3aGVyZSB0aGUga2V5IGNoZWNraW5nIGFuZFxuICAvLyBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50IGlzIGRvbmUuXG5cbiAgdmFyIHByZXZFbXB0eSA9IHByZXZFbGVtZW50ID09PSBudWxsIHx8IHByZXZFbGVtZW50ID09PSBmYWxzZTtcbiAgdmFyIG5leHRFbXB0eSA9IG5leHRFbGVtZW50ID09PSBudWxsIHx8IG5leHRFbGVtZW50ID09PSBmYWxzZTtcblxuICByZXR1cm4oXG4gICAgLy8gVGhpcyBoYXMgYSBmZXcgZmFsc2UgcG9zaXRpdmVzIHcvci90IGVtcHR5IGNvbXBvbmVudHMuXG4gICAgcHJldkVtcHR5IHx8IG5leHRFbXB0eSB8fCBuZXh0RWxlbWVudC5fb3duZXIgIT09IHByZXZFbGVtZW50Ll9vd25lciB8fCBuZXh0RWxlbWVudC5yZWYgIT09IHByZXZFbGVtZW50LnJlZlxuICApO1xufTtcblxuUmVhY3RSZWYuZGV0YWNoUmVmcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG4gIGlmIChyZWYgIT0gbnVsbCkge1xuICAgIGRldGFjaFJlZihyZWYsIGluc3RhbmNlLCBlbGVtZW50Ll9vd25lcik7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RSZWY7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Um9vdEluZGV4XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Um9vdEluZGV4SW5qZWN0aW9uID0ge1xuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2NyZWF0ZVJlYWN0Um9vdEluZGV4XG4gICAqL1xuICBpbmplY3RDcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKF9jcmVhdGVSZWFjdFJvb3RJbmRleCkge1xuICAgIFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4ID0gX2NyZWF0ZVJlYWN0Um9vdEluZGV4O1xuICB9XG59O1xuXG52YXIgUmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBudWxsLFxuICBpbmplY3Rpb246IFJlYWN0Um9vdEluZGV4SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Um9vdEluZGV4OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3lcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5ID0ge1xuICBpc0JhdGNoaW5nVXBkYXRlczogZmFsc2UsXG4gIGJhdGNoZWRVcGRhdGVzOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAvLyBEb24ndCBkbyBhbnl0aGluZyBoZXJlLiBEdXJpbmcgdGhlIHNlcnZlciByZW5kZXJpbmcgd2UgZG9uJ3Qgd2FudCB0b1xuICAgIC8vIHNjaGVkdWxlIGFueSB1cGRhdGVzLiBXZSB3aWxsIHNpbXBseSBpZ25vcmUgdGhlbS5cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3k7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFNlcnZlclJlbmRlcmluZ1xuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5ID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1hcmt1cENoZWNrc3VtID0gcmVxdWlyZSgnLi9SZWFjdE1hcmt1cENoZWNrc3VtJyk7XG52YXIgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5ID0gcmVxdWlyZSgnLi9SZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3knKTtcbnZhciBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIEhUTUwgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRvU3RyaW5nKGVsZW1lbnQpIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChlbGVtZW50KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW5kZXJUb1N0cmluZygpOiBZb3UgbXVzdCBwYXNzIGEgdmFsaWQgUmVhY3RFbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgdHJhbnNhY3Rpb247XG4gIHRyeSB7XG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdFJvb3RJRCgpO1xuICAgIHRyYW5zYWN0aW9uID0gUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5nZXRQb29sZWQoZmFsc2UpO1xuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uLnBlcmZvcm0oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChlbGVtZW50LCBudWxsKTtcbiAgICAgIHZhciBtYXJrdXAgPSBjb21wb25lbnRJbnN0YW5jZS5tb3VudENvbXBvbmVudChpZCwgdHJhbnNhY3Rpb24sIGVtcHR5T2JqZWN0KTtcbiAgICAgIHJldHVybiBSZWFjdE1hcmt1cENoZWNrc3VtLmFkZENoZWNrc3VtVG9NYXJrdXAobWFya3VwKTtcbiAgICB9LCBudWxsKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLnJlbGVhc2UodHJhbnNhY3Rpb24pO1xuICAgIC8vIFJldmVydCB0byB0aGUgRE9NIGJhdGNoaW5nIHN0cmF0ZWd5IHNpbmNlIHRoZXNlIHR3byByZW5kZXJlcnNcbiAgICAvLyBjdXJyZW50bHkgc2hhcmUgdGhlc2Ugc3RhdGVmdWwgbW9kdWxlcy5cbiAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgSFRNTCBtYXJrdXAsIHdpdGhvdXQgdGhlIGV4dHJhIFJlYWN0IElEIGFuZCBjaGVja3N1bVxuICogKGZvciBnZW5lcmF0aW5nIHN0YXRpYyBwYWdlcylcbiAqL1xuZnVuY3Rpb24gcmVuZGVyVG9TdGF0aWNNYXJrdXAoZWxlbWVudCkge1xuICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGVsZW1lbnQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3JlbmRlclRvU3RhdGljTWFya3VwKCk6IFlvdSBtdXN0IHBhc3MgYSB2YWxpZCBSZWFjdEVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIHZhciB0cmFuc2FjdGlvbjtcbiAgdHJ5IHtcbiAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5KTtcblxuICAgIHZhciBpZCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG4gICAgdHJhbnNhY3Rpb24gPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLmdldFBvb2xlZCh0cnVlKTtcblxuICAgIHJldHVybiB0cmFuc2FjdGlvbi5wZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoZWxlbWVudCwgbnVsbCk7XG4gICAgICByZXR1cm4gY29tcG9uZW50SW5zdGFuY2UubW91bnRDb21wb25lbnQoaWQsIHRyYW5zYWN0aW9uLCBlbXB0eU9iamVjdCk7XG4gICAgfSwgbnVsbCk7XG4gIH0gZmluYWxseSB7XG4gICAgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbiAgICAvLyBSZXZlcnQgdG8gdGhlIERPTSBiYXRjaGluZyBzdHJhdGVneSBzaW5jZSB0aGVzZSB0d28gcmVuZGVyZXJzXG4gICAgLy8gY3VycmVudGx5IHNoYXJlIHRoZXNlIHN0YXRlZnVsIG1vZHVsZXMuXG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW5kZXJUb1N0cmluZzogcmVuZGVyVG9TdHJpbmcsXG4gIHJlbmRlclRvU3RhdGljTWFya3VwOiByZW5kZXJUb1N0YXRpY01hcmt1cFxufTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvblxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBDYWxsYmFja1F1ZXVlID0gcmVxdWlyZSgnLi9DYWxsYmFja1F1ZXVlJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xuXG4vKipcbiAqIFByb3ZpZGVzIGEgYENhbGxiYWNrUXVldWVgIHF1ZXVlIGZvciBjb2xsZWN0aW5nIGBvbkRPTVJlYWR5YCBjYWxsYmFja3NcbiAqIGR1cmluZyB0aGUgcGVyZm9ybWluZyBvZiB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBPTl9ET01fUkVBRFlfUVVFVUVJTkcgPSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgaW50ZXJuYWwgYG9uRE9NUmVhZHlgIHF1ZXVlLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVhY3RNb3VudFJlYWR5LnJlc2V0KCk7XG4gIH0sXG5cbiAgY2xvc2U6IGVtcHR5RnVuY3Rpb25cbn07XG5cbi8qKlxuICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcbiAqIGJlaW5nIG1lbWJlciBtZXRob2RzLCBidXQgd2l0aCBhbiBpbXBsaWVkIG9yZGVyaW5nIHdoaWxlIGJlaW5nIGlzb2xhdGVkIGZyb21cbiAqIGVhY2ggb3RoZXIuXG4gKi9cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtPTl9ET01fUkVBRFlfUVVFVUVJTkddO1xuXG4vKipcbiAqIEBjbGFzcyBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHJlbmRlclRvU3RhdGljTWFya3VwXG4gKi9cbmZ1bmN0aW9uIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24ocmVuZGVyVG9TdGF0aWNNYXJrdXApIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xuICB0aGlzLnJlbmRlclRvU3RhdGljTWFya3VwID0gcmVuZGVyVG9TdGF0aWNNYXJrdXA7XG4gIHRoaXMucmVhY3RNb3VudFJlYWR5ID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQobnVsbCk7XG4gIHRoaXMudXNlQ3JlYXRlRWxlbWVudCA9IGZhbHNlO1xufVxuXG52YXIgTWl4aW4gPSB7XG4gIC8qKlxuICAgKiBAc2VlIFRyYW5zYWN0aW9uXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAZmluYWxcbiAgICogQHJldHVybiB7YXJyYXl9IEVtcHR5IGxpc3Qgb2Ygb3BlcmF0aW9uIHdyYXAgcHJvY2VkdXJlcy5cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gVFJBTlNBQ1RJT05fV1JBUFBFUlM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH0gVGhlIHF1ZXVlIHRvIGNvbGxlY3QgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcyB3aXRoLlxuICAgKi9cbiAgZ2V0UmVhY3RNb3VudFJlYWR5OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhY3RNb3VudFJlYWR5O1xuICB9LFxuXG4gIC8qKlxuICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLCBhbmQgd2lsbCBpbnZva2UgdGhpcyBiZWZvcmUgYWxsb3dpbmcgdGhpc1xuICAgKiBpbnN0YW5jZSB0byBiZSByZXVzZWQuXG4gICAqL1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHRoaXMucmVhY3RNb3VudFJlYWR5KTtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IG51bGw7XG4gIH1cbn07XG5cbmFzc2lnbihSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIE1peGluKTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFVwZGF0ZVF1ZXVlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSkge1xuICBSZWFjdFVwZGF0ZXMuZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbn1cblxuZnVuY3Rpb24gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7XG4gIHZhciBpbnRlcm5hbEluc3RhbmNlID0gUmVhY3RJbnN0YW5jZU1hcC5nZXQocHVibGljSW5zdGFuY2UpO1xuICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gT25seSB3YXJuIHdoZW4gd2UgaGF2ZSBhIGNhbGxlck5hbWUuIE90aGVyd2lzZSB3ZSBzaG91bGQgYmUgc2lsZW50LlxuICAgICAgLy8gV2UncmUgcHJvYmFibHkgY2FsbGluZyBmcm9tIGVucXVldWVDYWxsYmFjay4gV2UgZG9uJ3Qgd2FudCB0byB3YXJuXG4gICAgICAvLyB0aGVyZSBiZWNhdXNlIHdlIGFscmVhZHkgd2FybmVkIGZvciB0aGUgY29ycmVzcG9uZGluZyBsaWZlY3ljbGUgbWV0aG9kLlxuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNhbGxlck5hbWUsICclcyguLi4pOiBDYW4gb25seSB1cGRhdGUgYSBtb3VudGVkIG9yIG1vdW50aW5nIGNvbXBvbmVudC4gJyArICdUaGlzIHVzdWFsbHkgbWVhbnMgeW91IGNhbGxlZCAlcygpIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuICcgKyAnVGhpcyBpcyBhIG5vLW9wLiBQbGVhc2UgY2hlY2sgdGhlIGNvZGUgZm9yIHRoZSAlcyBjb21wb25lbnQuJywgY2FsbGVyTmFtZSwgY2FsbGVyTmFtZSwgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IuZGlzcGxheU5hbWUpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9PSBudWxsLCAnJXMoLi4uKTogQ2Fubm90IHVwZGF0ZSBkdXJpbmcgYW4gZXhpc3Rpbmcgc3RhdGUgdHJhbnNpdGlvbiAnICsgJyhzdWNoIGFzIHdpdGhpbiBgcmVuZGVyYCkuIFJlbmRlciBtZXRob2RzIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gJyArICdvZiBwcm9wcyBhbmQgc3RhdGUuJywgY2FsbGVyTmFtZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gaW50ZXJuYWxJbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBSZWFjdFVwZGF0ZVF1ZXVlIGFsbG93cyBmb3Igc3RhdGUgdXBkYXRlcyB0byBiZSBzY2hlZHVsZWQgaW50byBhIGxhdGVyXG4gKiByZWNvbmNpbGlhdGlvbiBzdGVwLlxuICovXG52YXIgUmVhY3RVcGRhdGVRdWV1ZSA9IHtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB3ZSB3YW50IHRvIHRlc3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNNb3VudGVkOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIG93bmVyID0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudDtcbiAgICAgIGlmIChvd25lciAhPT0gbnVsbCkge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIsICclcyBpcyBhY2Nlc3NpbmcgaXNNb3VudGVkIGluc2lkZSBpdHMgcmVuZGVyKCkgZnVuY3Rpb24uICcgKyAncmVuZGVyKCkgc2hvdWxkIGJlIGEgcHVyZSBmdW5jdGlvbiBvZiBwcm9wcyBhbmQgc3RhdGUuIEl0IHNob3VsZCAnICsgJ25ldmVyIGFjY2VzcyBzb21ldGhpbmcgdGhhdCByZXF1aXJlcyBzdGFsZSBkYXRhIGZyb20gdGhlIHByZXZpb3VzICcgKyAncmVuZGVyLCBzdWNoIGFzIHJlZnMuIE1vdmUgdGhpcyBsb2dpYyB0byBjb21wb25lbnREaWRNb3VudCBhbmQgJyArICdjb21wb25lbnREaWRVcGRhdGUgaW5zdGVhZC4nLCBvd25lci5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICAgIG93bmVyLl93YXJuZWRBYm91dFJlZnNJblJlbmRlciA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gUmVhY3RJbnN0YW5jZU1hcC5nZXQocHVibGljSW5zdGFuY2UpO1xuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICAvLyBEdXJpbmcgY29tcG9uZW50V2lsbE1vdW50IGFuZCByZW5kZXIgdGhpcyB3aWxsIHN0aWxsIGJlIG51bGwgYnV0IGFmdGVyXG4gICAgICAvLyB0aGF0IHdpbGwgYWx3YXlzIHJlbmRlciB0byBzb21ldGhpbmcuIEF0IGxlYXN0IGZvciBub3cuIFNvIHdlIGNhbiB1c2VcbiAgICAgIC8vIHRoaXMgaGFjay5cbiAgICAgIHJldHVybiAhIWludGVybmFsSW5zdGFuY2UuX3JlbmRlcmVkQ29tcG9uZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBFbnF1ZXVlIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGFmdGVyIGFsbCB0aGUgcGVuZGluZyB1cGRhdGVzXG4gICAqIGhhdmUgcHJvY2Vzc2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0byB1c2UgYXMgYHRoaXNgIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgc3RhdGUgaXMgdXBkYXRlZC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlQ2FsbGJhY2s6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY2FsbGJhY2spIHtcbiAgICAhKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZW5xdWV1ZUNhbGxiYWNrKC4uLik6IFlvdSBjYWxsZWQgYHNldFByb3BzYCwgYHJlcGxhY2VQcm9wc2AsICcgKyAnYHNldFN0YXRlYCwgYHJlcGxhY2VTdGF0ZWAsIG9yIGBmb3JjZVVwZGF0ZWAgd2l0aCBhIGNhbGxiYWNrIHRoYXQgJyArICdpc25cXCd0IGNhbGxhYmxlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSk7XG5cbiAgICAvLyBQcmV2aW91c2x5IHdlIHdvdWxkIHRocm93IGFuIGVycm9yIGlmIHdlIGRpZG4ndCBoYXZlIGFuIGludGVybmFsXG4gICAgLy8gaW5zdGFuY2UuIFNpbmNlIHdlIHdhbnQgdG8gbWFrZSBpdCBhIG5vLW9wIGluc3RlYWQsIHdlIG1pcnJvciB0aGUgc2FtZVxuICAgIC8vIGJlaGF2aW9yIHdlIGhhdmUgaW4gb3RoZXIgZW5xdWV1ZSogbWV0aG9kcy5cbiAgICAvLyBXZSBhbHNvIG5lZWQgdG8gaWdub3JlIGNhbGxiYWNrcyBpbiBjb21wb25lbnRXaWxsTW91bnQuIFNlZVxuICAgIC8vIGVucXVldWVVcGRhdGVzLlxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MpIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MgPSBbY2FsbGJhY2tdO1xuICAgIH1cbiAgICAvLyBUT0RPOiBUaGUgY2FsbGJhY2sgaGVyZSBpcyBpZ25vcmVkIHdoZW4gc2V0U3RhdGUgaXMgY2FsbGVkIGZyb21cbiAgICAvLyBjb21wb25lbnRXaWxsTW91bnQuIEVpdGhlciBmaXggaXQgb3IgZGlzYWxsb3cgZG9pbmcgc28gY29tcGxldGVseSBpblxuICAgIC8vIGZhdm9yIG9mIGdldEluaXRpYWxTdGF0ZS4gQWx0ZXJuYXRpdmVseSwgd2UgY2FuIGRpc2FsbG93XG4gICAgLy8gY29tcG9uZW50V2lsbE1vdW50IGR1cmluZyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICBlbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIGNhbGxiYWNrKSB7XG4gICAgISh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2VucXVldWVDYWxsYmFjayguLi4pOiBZb3UgY2FsbGVkIGBzZXRQcm9wc2AsIGByZXBsYWNlUHJvcHNgLCAnICsgJ2BzZXRTdGF0ZWAsIGByZXBsYWNlU3RhdGVgLCBvciBgZm9yY2VVcGRhdGVgIHdpdGggYSBjYWxsYmFjayB0aGF0ICcgKyAnaXNuXFwndCBjYWxsYWJsZS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MpIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MgPSBbY2FsbGJhY2tdO1xuICAgIH1cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG4gICAqIGNlcnRhaW50eSB0aGF0IHdlIGFyZSAqKm5vdCoqIGluIGEgRE9NIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG4gICAqIGNvbXBvbmVudCdzIHN0YXRlIGhhcyBjaGFuZ2VkIGJ1dCBgc2V0U3RhdGVgIHdhcyBub3QgY2FsbGVkLlxuICAgKlxuICAgKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG4gICAqIGBjb21wb25lbnRXaWxsVXBkYXRlYCBhbmQgYGNvbXBvbmVudERpZFVwZGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVGb3JjZVVwZGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdmb3JjZVVwZGF0ZScpO1xuXG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gdHJ1ZTtcblxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgc3RhdGUuIEFsd2F5cyB1c2UgdGhpcyBvciBgc2V0U3RhdGVgIHRvIG11dGF0ZSBzdGF0ZS5cbiAgICogWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICAgKlxuICAgKiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCBgdGhpcy5zdGF0ZWAgd2lsbCBiZSBpbW1lZGlhdGVseSB1cGRhdGVkLCBzb1xuICAgKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBsZXRlU3RhdGUgTmV4dCBzdGF0ZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNvbXBsZXRlU3RhdGUpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VTdGF0ZScpO1xuXG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgPSBbY29tcGxldGVTdGF0ZV07XG4gICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IHRydWU7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBzdGF0ZS4gVGhpcyBvbmx5IGV4aXN0cyBiZWNhdXNlIF9wZW5kaW5nU3RhdGUgaXNcbiAgICogaW50ZXJuYWwuIFRoaXMgcHJvdmlkZXMgYSBtZXJnaW5nIHN0cmF0ZWd5IHRoYXQgaXMgbm90IGF2YWlsYWJsZSB0byBkZWVwXG4gICAqIHByb3BlcnRpZXMgd2hpY2ggaXMgY29uZnVzaW5nLiBUT0RPOiBFeHBvc2UgcGVuZGluZ1N0YXRlIG9yIGRvbid0IHVzZSBpdFxuICAgKiBkdXJpbmcgdGhlIG1lcmdlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxTdGF0ZSBOZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVNldFN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxTdGF0ZSkge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAnc2V0U3RhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBxdWV1ZSA9IGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdTdGF0ZVF1ZXVlIHx8IChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IFtdKTtcbiAgICBxdWV1ZS5wdXNoKHBhcnRpYWxTdGF0ZSk7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3NldFByb3BzJyk7XG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVNldFByb3BzSW50ZXJuYWwoaW50ZXJuYWxJbnN0YW5jZSwgcGFydGlhbFByb3BzKTtcbiAgfSxcblxuICBlbnF1ZXVlU2V0UHJvcHNJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHBhcnRpYWxQcm9wcykge1xuICAgIHZhciB0b3BMZXZlbFdyYXBwZXIgPSBpbnRlcm5hbEluc3RhbmNlLl90b3BMZXZlbFdyYXBwZXI7XG4gICAgIXRvcExldmVsV3JhcHBlciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdzZXRQcm9wcyguLi4pOiBZb3UgY2FsbGVkIGBzZXRQcm9wc2Agb24gYSAnICsgJ2NvbXBvbmVudCB3aXRoIGEgcGFyZW50LiBUaGlzIGlzIGFuIGFudGktcGF0dGVybiBzaW5jZSBwcm9wcyB3aWxsICcgKyAnZ2V0IHJlYWN0aXZlbHkgdXBkYXRlZCB3aGVuIHJlbmRlcmVkLiBJbnN0ZWFkLCBjaGFuZ2UgdGhlIG93bmVyXFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCB0byBwYXNzIHRoZSBjb3JyZWN0IHZhbHVlIGFzIHByb3BzIHRvIHRoZSBjb21wb25lbnQgJyArICd3aGVyZSBpdCBpcyBjcmVhdGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIE1lcmdlIHdpdGggdGhlIHBlbmRpbmcgZWxlbWVudCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSB3aXRoIGV4aXN0aW5nXG4gICAgLy8gZWxlbWVudCBwcm9wcy5cbiAgICB2YXIgd3JhcEVsZW1lbnQgPSB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50IHx8IHRvcExldmVsV3JhcHBlci5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIGVsZW1lbnQgPSB3cmFwRWxlbWVudC5wcm9wcztcbiAgICB2YXIgcHJvcHMgPSBhc3NpZ24oe30sIGVsZW1lbnQucHJvcHMsIHBhcnRpYWxQcm9wcyk7XG4gICAgdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyh3cmFwRWxlbWVudCwgUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKGVsZW1lbnQsIHByb3BzKSk7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKHRvcExldmVsV3JhcHBlcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgTmV3IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlUHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcHJvcHMpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VQcm9wcycpO1xuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbChpbnRlcm5hbEluc3RhbmNlLCBwcm9wcyk7XG4gIH0sXG5cbiAgZW5xdWV1ZVJlcGxhY2VQcm9wc0ludGVybmFsOiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgcHJvcHMpIHtcbiAgICB2YXIgdG9wTGV2ZWxXcmFwcGVyID0gaW50ZXJuYWxJbnN0YW5jZS5fdG9wTGV2ZWxXcmFwcGVyO1xuICAgICF0b3BMZXZlbFdyYXBwZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVwbGFjZVByb3BzKC4uLik6IFlvdSBjYWxsZWQgYHJlcGxhY2VQcm9wc2Agb24gYSAnICsgJ2NvbXBvbmVudCB3aXRoIGEgcGFyZW50LiBUaGlzIGlzIGFuIGFudGktcGF0dGVybiBzaW5jZSBwcm9wcyB3aWxsICcgKyAnZ2V0IHJlYWN0aXZlbHkgdXBkYXRlZCB3aGVuIHJlbmRlcmVkLiBJbnN0ZWFkLCBjaGFuZ2UgdGhlIG93bmVyXFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCB0byBwYXNzIHRoZSBjb3JyZWN0IHZhbHVlIGFzIHByb3BzIHRvIHRoZSBjb21wb25lbnQgJyArICd3aGVyZSBpdCBpcyBjcmVhdGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIE1lcmdlIHdpdGggdGhlIHBlbmRpbmcgZWxlbWVudCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSB3aXRoIGV4aXN0aW5nXG4gICAgLy8gZWxlbWVudCBwcm9wcy5cbiAgICB2YXIgd3JhcEVsZW1lbnQgPSB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50IHx8IHRvcExldmVsV3JhcHBlci5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIGVsZW1lbnQgPSB3cmFwRWxlbWVudC5wcm9wcztcbiAgICB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKHdyYXBFbGVtZW50LCBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMoZWxlbWVudCwgcHJvcHMpKTtcblxuICAgIGVucXVldWVVcGRhdGUodG9wTGV2ZWxXcmFwcGVyKTtcbiAgfSxcblxuICBlbnF1ZXVlRWxlbWVudEludGVybmFsOiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgbmV3RWxlbWVudCkge1xuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdFbGVtZW50ID0gbmV3RWxlbWVudDtcbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RVcGRhdGVRdWV1ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RVcGRhdGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vVHJhbnNhY3Rpb24nKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgZGlydHlDb21wb25lbnRzID0gW107XG52YXIgYXNhcENhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xudmFyIGFzYXBFbnF1ZXVlZCA9IGZhbHNlO1xuXG52YXIgYmF0Y2hpbmdTdHJhdGVneSA9IG51bGw7XG5cbmZ1bmN0aW9uIGVuc3VyZUluamVjdGVkKCkge1xuICAhKFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uICYmIGJhdGNoaW5nU3RyYXRlZ3kpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBpbmplY3QgYSByZWNvbmNpbGUgdHJhbnNhY3Rpb24gY2xhc3MgYW5kIGJhdGNoaW5nICcgKyAnc3RyYXRlZ3knKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbnZhciBORVNURURfVVBEQVRFUyA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoID0gZGlydHlDb21wb25lbnRzLmxlbmd0aDtcbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggIT09IGRpcnR5Q29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIEFkZGl0aW9uYWwgdXBkYXRlcyB3ZXJlIGVucXVldWVkIGJ5IGNvbXBvbmVudERpZFVwZGF0ZSBoYW5kbGVycyBvclxuICAgICAgLy8gc2ltaWxhcjsgYmVmb3JlIG91ciBvd24gVVBEQVRFX1FVRVVFSU5HIHdyYXBwZXIgY2xvc2VzLCB3ZSB3YW50IHRvIHJ1blxuICAgICAgLy8gdGhlc2UgbmV3IHVwZGF0ZXMgc28gdGhhdCBpZiBBJ3MgY29tcG9uZW50RGlkVXBkYXRlIGNhbGxzIHNldFN0YXRlIG9uXG4gICAgICAvLyBCLCBCIHdpbGwgdXBkYXRlIGJlZm9yZSB0aGUgY2FsbGJhY2sgQSdzIHVwZGF0ZXIgcHJvdmlkZWQgd2hlbiBjYWxsaW5nXG4gICAgICAvLyBzZXRTdGF0ZS5cbiAgICAgIGRpcnR5Q29tcG9uZW50cy5zcGxpY2UoMCwgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGgpO1xuICAgICAgZmx1c2hCYXRjaGVkVXBkYXRlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBVUERBVEVfUVVFVUVJTkcgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxiYWNrUXVldWUucmVzZXQoKTtcbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxiYWNrUXVldWUubm90aWZ5QWxsKCk7XG4gIH1cbn07XG5cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtORVNURURfVVBEQVRFUywgVVBEQVRFX1FVRVVFSU5HXTtcblxuZnVuY3Rpb24gUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbigpIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xuICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IG51bGw7XG4gIHRoaXMuY2FsbGJhY2tRdWV1ZSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKCk7XG4gIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5nZXRQb29sZWQoIC8qIGZvcmNlSFRNTCAqL2ZhbHNlKTtcbn1cblxuYXNzaWduKFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ucHJvdG90eXBlLCBUcmFuc2FjdGlvbi5NaXhpbiwge1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IG51bGw7XG4gICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHRoaXMuY2FsbGJhY2tRdWV1ZSk7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlID0gbnVsbDtcbiAgICBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5yZWxlYXNlKHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuICAgIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24gPSBudWxsO1xuICB9LFxuXG4gIHBlcmZvcm06IGZ1bmN0aW9uIChtZXRob2QsIHNjb3BlLCBhKSB7XG4gICAgLy8gRXNzZW50aWFsbHkgY2FsbHMgYHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24ucGVyZm9ybShtZXRob2QsIHNjb3BlLCBhKWBcbiAgICAvLyB3aXRoIHRoaXMgdHJhbnNhY3Rpb24ncyB3cmFwcGVycyBhcm91bmQgaXQuXG4gICAgcmV0dXJuIFRyYW5zYWN0aW9uLk1peGluLnBlcmZvcm0uY2FsbCh0aGlzLCB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLnBlcmZvcm0sIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24sIG1ldGhvZCwgc2NvcGUsIGEpO1xuICB9XG59KTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24pO1xuXG5mdW5jdGlvbiBiYXRjaGVkVXBkYXRlcyhjYWxsYmFjaywgYSwgYiwgYywgZCwgZSkge1xuICBlbnN1cmVJbmplY3RlZCgpO1xuICBiYXRjaGluZ1N0cmF0ZWd5LmJhdGNoZWRVcGRhdGVzKGNhbGxiYWNrLCBhLCBiLCBjLCBkLCBlKTtcbn1cblxuLyoqXG4gKiBBcnJheSBjb21wYXJhdG9yIGZvciBSZWFjdENvbXBvbmVudHMgYnkgbW91bnQgb3JkZXJpbmcuXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gYzEgZmlyc3QgY29tcG9uZW50IHlvdSdyZSBjb21wYXJpbmdcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGMyIHNlY29uZCBjb21wb25lbnQgeW91J3JlIGNvbXBhcmluZ1xuICogQHJldHVybiB7bnVtYmVyfSBSZXR1cm4gdmFsdWUgdXNhYmxlIGJ5IEFycmF5LnByb3RvdHlwZS5zb3J0KCkuXG4gKi9cbmZ1bmN0aW9uIG1vdW50T3JkZXJDb21wYXJhdG9yKGMxLCBjMikge1xuICByZXR1cm4gYzEuX21vdW50T3JkZXIgLSBjMi5fbW91bnRPcmRlcjtcbn1cblxuZnVuY3Rpb24gcnVuQmF0Y2hlZFVwZGF0ZXModHJhbnNhY3Rpb24pIHtcbiAgdmFyIGxlbiA9IHRyYW5zYWN0aW9uLmRpcnR5Q29tcG9uZW50c0xlbmd0aDtcbiAgIShsZW4gPT09IGRpcnR5Q29tcG9uZW50cy5sZW5ndGgpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V4cGVjdGVkIGZsdXNoIHRyYW5zYWN0aW9uXFwncyBzdG9yZWQgZGlydHktY29tcG9uZW50cyBsZW5ndGggKCVzKSB0byAnICsgJ21hdGNoIGRpcnR5LWNvbXBvbmVudHMgYXJyYXkgbGVuZ3RoICglcykuJywgbGVuLCBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgLy8gU2luY2UgcmVjb25jaWxpbmcgYSBjb21wb25lbnQgaGlnaGVyIGluIHRoZSBvd25lciBoaWVyYXJjaHkgdXN1YWxseSAobm90XG4gIC8vIGFsd2F5cyAtLSBzZWUgc2hvdWxkQ29tcG9uZW50VXBkYXRlKCkpIHdpbGwgcmVjb25jaWxlIGNoaWxkcmVuLCByZWNvbmNpbGVcbiAgLy8gdGhlbSBiZWZvcmUgdGhlaXIgY2hpbGRyZW4gYnkgc29ydGluZyB0aGUgYXJyYXkuXG4gIGRpcnR5Q29tcG9uZW50cy5zb3J0KG1vdW50T3JkZXJDb21wYXJhdG9yKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgLy8gSWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGJlZm9yZSBwZW5kaW5nIGNoYW5nZXMgYXBwbHksIGl0IHdpbGwgc3RpbGxcbiAgICAvLyBiZSBoZXJlLCBidXQgd2UgYXNzdW1lIHRoYXQgaXQgaGFzIGNsZWFyZWQgaXRzIF9wZW5kaW5nQ2FsbGJhY2tzIGFuZFxuICAgIC8vIHRoYXQgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5IGlzIGEgbm9vcC5cbiAgICB2YXIgY29tcG9uZW50ID0gZGlydHlDb21wb25lbnRzW2ldO1xuXG4gICAgLy8gSWYgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5IGhhcHBlbnMgdG8gZW5xdWV1ZSBhbnkgbmV3IHVwZGF0ZXMsIHdlXG4gICAgLy8gc2hvdWxkbid0IGV4ZWN1dGUgdGhlIGNhbGxiYWNrcyB1bnRpbCB0aGUgbmV4dCByZW5kZXIgaGFwcGVucywgc29cbiAgICAvLyBzdGFzaCB0aGUgY2FsbGJhY2tzIGZpcnN0XG4gICAgdmFyIGNhbGxiYWNrcyA9IGNvbXBvbmVudC5fcGVuZGluZ0NhbGxiYWNrcztcbiAgICBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuXG4gICAgUmVhY3RSZWNvbmNpbGVyLnBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeShjb21wb25lbnQsIHRyYW5zYWN0aW9uLnJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblxuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2FsbGJhY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uLmNhbGxiYWNrUXVldWUuZW5xdWV1ZShjYWxsYmFja3Nbal0sIGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxudmFyIGZsdXNoQmF0Y2hlZFVwZGF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ncyB3cmFwcGVycyB3aWxsIGNsZWFyIHRoZSBkaXJ0eUNvbXBvbmVudHNcbiAgLy8gYXJyYXkgYW5kIHBlcmZvcm0gYW55IHVwZGF0ZXMgZW5xdWV1ZWQgYnkgbW91bnQtcmVhZHkgaGFuZGxlcnMgKGkuZS4sXG4gIC8vIGNvbXBvbmVudERpZFVwZGF0ZSkgYnV0IHdlIG5lZWQgdG8gY2hlY2sgaGVyZSB0b28gaW4gb3JkZXIgdG8gY2F0Y2hcbiAgLy8gdXBkYXRlcyBlbnF1ZXVlZCBieSBzZXRTdGF0ZSBjYWxsYmFja3MgYW5kIGFzYXAgY2FsbHMuXG4gIHdoaWxlIChkaXJ0eUNvbXBvbmVudHMubGVuZ3RoIHx8IGFzYXBFbnF1ZXVlZCkge1xuICAgIGlmIChkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICB2YXIgdHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uLmdldFBvb2xlZCgpO1xuICAgICAgdHJhbnNhY3Rpb24ucGVyZm9ybShydW5CYXRjaGVkVXBkYXRlcywgbnVsbCwgdHJhbnNhY3Rpb24pO1xuICAgICAgUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoYXNhcEVucXVldWVkKSB7XG4gICAgICBhc2FwRW5xdWV1ZWQgPSBmYWxzZTtcbiAgICAgIHZhciBxdWV1ZSA9IGFzYXBDYWxsYmFja1F1ZXVlO1xuICAgICAgYXNhcENhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuICAgICAgcXVldWUubm90aWZ5QWxsKCk7XG4gICAgICBDYWxsYmFja1F1ZXVlLnJlbGVhc2UocXVldWUpO1xuICAgIH1cbiAgfVxufTtcbmZsdXNoQmF0Y2hlZFVwZGF0ZXMgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3RVcGRhdGVzJywgJ2ZsdXNoQmF0Y2hlZFVwZGF0ZXMnLCBmbHVzaEJhdGNoZWRVcGRhdGVzKTtcblxuLyoqXG4gKiBNYXJrIGEgY29tcG9uZW50IGFzIG5lZWRpbmcgYSByZXJlbmRlciwgYWRkaW5nIGFuIG9wdGlvbmFsIGNhbGxiYWNrIHRvIGFcbiAqIGxpc3Qgb2YgZnVuY3Rpb25zIHdoaWNoIHdpbGwgYmUgZXhlY3V0ZWQgb25jZSB0aGUgcmVyZW5kZXIgb2NjdXJzLlxuICovXG5mdW5jdGlvbiBlbnF1ZXVlVXBkYXRlKGNvbXBvbmVudCkge1xuICBlbnN1cmVJbmplY3RlZCgpO1xuXG4gIC8vIFZhcmlvdXMgcGFydHMgb2Ygb3VyIGNvZGUgKHN1Y2ggYXMgUmVhY3RDb21wb3NpdGVDb21wb25lbnQnc1xuICAvLyBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KSBhc3N1bWUgdGhhdCBjYWxscyB0byByZW5kZXIgYXJlbid0IG5lc3RlZDtcbiAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLiAoVGhpcyBpcyBjYWxsZWQgYnkgZWFjaCB0b3AtbGV2ZWwgdXBkYXRlXG4gIC8vIGZ1bmN0aW9uLCBsaWtlIHNldFByb3BzLCBzZXRTdGF0ZSwgZm9yY2VVcGRhdGUsIGV0Yy47IGNyZWF0aW9uIGFuZFxuICAvLyBkZXN0cnVjdGlvbiBvZiB0b3AtbGV2ZWwgY29tcG9uZW50cyBpcyBndWFyZGVkIGluIFJlYWN0TW91bnQuKVxuXG4gIGlmICghYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcykge1xuICAgIGJhdGNoaW5nU3RyYXRlZ3kuYmF0Y2hlZFVwZGF0ZXMoZW5xdWV1ZVVwZGF0ZSwgY29tcG9uZW50KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBkaXJ0eUNvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xufVxuXG4vKipcbiAqIEVucXVldWUgYSBjYWxsYmFjayB0byBiZSBydW4gYXQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBiYXRjaGluZyBjeWNsZS4gVGhyb3dzXG4gKiBpZiBubyB1cGRhdGVzIGFyZSBjdXJyZW50bHkgYmVpbmcgcGVyZm9ybWVkLlxuICovXG5mdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICFiYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlcy5hc2FwOiBDYW5cXCd0IGVucXVldWUgYW4gYXNhcCBjYWxsYmFjayBpbiBhIGNvbnRleHQgd2hlcmUnICsgJ3VwZGF0ZXMgYXJlIG5vdCBiZWluZyBiYXRjaGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgYXNhcENhbGxiYWNrUXVldWUuZW5xdWV1ZShjYWxsYmFjaywgY29udGV4dCk7XG4gIGFzYXBFbnF1ZXVlZCA9IHRydWU7XG59XG5cbnZhciBSZWFjdFVwZGF0ZXNJbmplY3Rpb24gPSB7XG4gIGluamVjdFJlY29uY2lsZVRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoUmVjb25jaWxlVHJhbnNhY3Rpb24pIHtcbiAgICAhUmVjb25jaWxlVHJhbnNhY3Rpb24gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RVcGRhdGVzOiBtdXN0IHByb3ZpZGUgYSByZWNvbmNpbGUgdHJhbnNhY3Rpb24gY2xhc3MnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24gPSBSZWNvbmNpbGVUcmFuc2FjdGlvbjtcbiAgfSxcblxuICBpbmplY3RCYXRjaGluZ1N0cmF0ZWd5OiBmdW5jdGlvbiAoX2JhdGNoaW5nU3RyYXRlZ3kpIHtcbiAgICAhX2JhdGNoaW5nU3RyYXRlZ3kgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RVcGRhdGVzOiBtdXN0IHByb3ZpZGUgYSBiYXRjaGluZyBzdHJhdGVneScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBfYmF0Y2hpbmdTdHJhdGVneS5iYXRjaGVkVXBkYXRlcyA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RVcGRhdGVzOiBtdXN0IHByb3ZpZGUgYSBiYXRjaGVkVXBkYXRlcygpIGZ1bmN0aW9uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICEodHlwZW9mIF9iYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID09PSAnYm9vbGVhbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGFuIGlzQmF0Y2hpbmdVcGRhdGVzIGJvb2xlYW4gYXR0cmlidXRlJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGJhdGNoaW5nU3RyYXRlZ3kgPSBfYmF0Y2hpbmdTdHJhdGVneTtcbiAgfVxufTtcblxudmFyIFJlYWN0VXBkYXRlcyA9IHtcbiAgLyoqXG4gICAqIFJlYWN0IHJlZmVyZW5jZXMgYFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb25gIHVzaW5nIHRoaXMgcHJvcGVydHkgaW4gb3JkZXJcbiAgICogdG8gYWxsb3cgZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjogbnVsbCxcblxuICBiYXRjaGVkVXBkYXRlczogYmF0Y2hlZFVwZGF0ZXMsXG4gIGVucXVldWVVcGRhdGU6IGVucXVldWVVcGRhdGUsXG4gIGZsdXNoQmF0Y2hlZFVwZGF0ZXM6IGZsdXNoQmF0Y2hlZFVwZGF0ZXMsXG4gIGluamVjdGlvbjogUmVhY3RVcGRhdGVzSW5qZWN0aW9uLFxuICBhc2FwOiBhc2FwXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0VXBkYXRlczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RWZXJzaW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICcwLjE0LjknOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTVkdET01Qcm9wZXJ0eUNvbmZpZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xuXG52YXIgTVVTVF9VU0VfQVRUUklCVVRFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURTtcblxudmFyIE5TID0ge1xuICB4bGluazogJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLFxuICB4bWw6ICdodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2UnXG59O1xuXG52YXIgU1ZHRE9NUHJvcGVydHlDb25maWcgPSB7XG4gIFByb3BlcnRpZXM6IHtcbiAgICBjbGlwUGF0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGN4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgY3k6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZHg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZpbGw6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmaWxsT3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZvbnRGYW1pbHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb250U2l6ZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZ4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZnk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBncmFkaWVudFRyYW5zZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGdyYWRpZW50VW5pdHM6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJFbmQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJNaWQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJTdGFydDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG9mZnNldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBwYXR0ZXJuQ29udGVudFVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcGF0dGVyblVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcG9pbnRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbzogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHJ5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3ByZWFkTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3RvcENvbG9yOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3RvcE9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VEYXNoYXJyYXk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VMaW5lY2FwOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlT3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0cm9rZVdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdGV4dEFuY2hvcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHRyYW5zZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHZlcnNpb246IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB2aWV3Qm94OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeDE6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4MjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0FjdHVhdGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0FyY3JvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0hyZWY6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1JvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1Nob3c6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1RpdGxlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtUeXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeG1sQmFzZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhtbExhbmc6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bWxTcGFjZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHkxOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeTI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB5OiBNVVNUX1VTRV9BVFRSSUJVVEVcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXNwYWNlczoge1xuICAgIHhsaW5rQWN0dWF0ZTogTlMueGxpbmssXG4gICAgeGxpbmtBcmNyb2xlOiBOUy54bGluayxcbiAgICB4bGlua0hyZWY6IE5TLnhsaW5rLFxuICAgIHhsaW5rUm9sZTogTlMueGxpbmssXG4gICAgeGxpbmtTaG93OiBOUy54bGluayxcbiAgICB4bGlua1RpdGxlOiBOUy54bGluayxcbiAgICB4bGlua1R5cGU6IE5TLnhsaW5rLFxuICAgIHhtbEJhc2U6IE5TLnhtbCxcbiAgICB4bWxMYW5nOiBOUy54bWwsXG4gICAgeG1sU3BhY2U6IE5TLnhtbFxuICB9LFxuICBET01BdHRyaWJ1dGVOYW1lczoge1xuICAgIGNsaXBQYXRoOiAnY2xpcC1wYXRoJyxcbiAgICBmaWxsT3BhY2l0eTogJ2ZpbGwtb3BhY2l0eScsXG4gICAgZm9udEZhbWlseTogJ2ZvbnQtZmFtaWx5JyxcbiAgICBmb250U2l6ZTogJ2ZvbnQtc2l6ZScsXG4gICAgZ3JhZGllbnRUcmFuc2Zvcm06ICdncmFkaWVudFRyYW5zZm9ybScsXG4gICAgZ3JhZGllbnRVbml0czogJ2dyYWRpZW50VW5pdHMnLFxuICAgIG1hcmtlckVuZDogJ21hcmtlci1lbmQnLFxuICAgIG1hcmtlck1pZDogJ21hcmtlci1taWQnLFxuICAgIG1hcmtlclN0YXJ0OiAnbWFya2VyLXN0YXJ0JyxcbiAgICBwYXR0ZXJuQ29udGVudFVuaXRzOiAncGF0dGVybkNvbnRlbnRVbml0cycsXG4gICAgcGF0dGVyblVuaXRzOiAncGF0dGVyblVuaXRzJyxcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiAncHJlc2VydmVBc3BlY3RSYXRpbycsXG4gICAgc3ByZWFkTWV0aG9kOiAnc3ByZWFkTWV0aG9kJyxcbiAgICBzdG9wQ29sb3I6ICdzdG9wLWNvbG9yJyxcbiAgICBzdG9wT3BhY2l0eTogJ3N0b3Atb3BhY2l0eScsXG4gICAgc3Ryb2tlRGFzaGFycmF5OiAnc3Ryb2tlLWRhc2hhcnJheScsXG4gICAgc3Ryb2tlTGluZWNhcDogJ3N0cm9rZS1saW5lY2FwJyxcbiAgICBzdHJva2VPcGFjaXR5OiAnc3Ryb2tlLW9wYWNpdHknLFxuICAgIHN0cm9rZVdpZHRoOiAnc3Ryb2tlLXdpZHRoJyxcbiAgICB0ZXh0QW5jaG9yOiAndGV4dC1hbmNob3InLFxuICAgIHZpZXdCb3g6ICd2aWV3Qm94JyxcbiAgICB4bGlua0FjdHVhdGU6ICd4bGluazphY3R1YXRlJyxcbiAgICB4bGlua0FyY3JvbGU6ICd4bGluazphcmNyb2xlJyxcbiAgICB4bGlua0hyZWY6ICd4bGluazpocmVmJyxcbiAgICB4bGlua1JvbGU6ICd4bGluazpyb2xlJyxcbiAgICB4bGlua1Nob3c6ICd4bGluazpzaG93JyxcbiAgICB4bGlua1RpdGxlOiAneGxpbms6dGl0bGUnLFxuICAgIHhsaW5rVHlwZTogJ3hsaW5rOnR5cGUnLFxuICAgIHhtbEJhc2U6ICd4bWw6YmFzZScsXG4gICAgeG1sTGFuZzogJ3htbDpsYW5nJyxcbiAgICB4bWxTcGFjZTogJ3htbDpzcGFjZSdcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTVkdET01Qcm9wZXJ0eUNvbmZpZzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU2VsZWN0RXZlbnRQbHVnaW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBFdmVudFByb3BhZ2F0b3JzID0gcmVxdWlyZSgnLi9FdmVudFByb3BhZ2F0b3JzJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0SW5wdXRTZWxlY3Rpb24nKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEFjdGl2ZUVsZW1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9nZXRBY3RpdmVFbGVtZW50Jyk7XG52YXIgaXNUZXh0SW5wdXRFbGVtZW50ID0gcmVxdWlyZSgnLi9pc1RleHRJbnB1dEVsZW1lbnQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG52YXIgc2hhbGxvd0VxdWFsID0gcmVxdWlyZSgnZmJqcy9saWIvc2hhbGxvd0VxdWFsJyk7XG5cbnZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblxudmFyIHNraXBTZWxlY3Rpb25DaGFuZ2VFdmVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudE1vZGUgPD0gMTE7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBzZWxlY3Q6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNlbGVjdDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU2VsZWN0Q2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51LCB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzLCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXAsIHRvcExldmVsVHlwZXMudG9wU2VsZWN0aW9uQ2hhbmdlXVxuICB9XG59O1xuXG52YXIgYWN0aXZlRWxlbWVudCA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbnZhciBsYXN0U2VsZWN0aW9uID0gbnVsbDtcbnZhciBtb3VzZURvd24gPSBmYWxzZTtcblxuLy8gVHJhY2sgd2hldGhlciBhIGxpc3RlbmVyIGV4aXN0cyBmb3IgdGhpcyBwbHVnaW4uIElmIG5vbmUgZXhpc3QsIHdlIGRvXG4vLyBub3QgZXh0cmFjdCBldmVudHMuXG52YXIgaGFzTGlzdGVuZXIgPSBmYWxzZTtcbnZhciBPTl9TRUxFQ1RfS0VZID0ga2V5T2YoeyBvblNlbGVjdDogbnVsbCB9KTtcblxuLyoqXG4gKiBHZXQgYW4gb2JqZWN0IHdoaWNoIGlzIGEgdW5pcXVlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAqXG4gKiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgbm90IGJlIGNvbnNpc3RlbnQgYWNyb3NzIG5vZGVzIG9yIGJyb3dzZXJzLCBidXRcbiAqIHR3byBpZGVudGljYWwgc2VsZWN0aW9ucyBvbiB0aGUgc2FtZSBub2RlIHdpbGwgcmV0dXJuIGlkZW50aWNhbCBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24obm9kZSkge1xuICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBub2RlICYmIFJlYWN0SW5wdXRTZWxlY3Rpb24uaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKG5vZGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBub2RlLnNlbGVjdGlvblN0YXJ0LFxuICAgICAgZW5kOiBub2RlLnNlbGVjdGlvbkVuZFxuICAgIH07XG4gIH0gZWxzZSBpZiAod2luZG93LmdldFNlbGVjdGlvbikge1xuICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFuY2hvck5vZGU6IHNlbGVjdGlvbi5hbmNob3JOb2RlLFxuICAgICAgYW5jaG9yT2Zmc2V0OiBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LFxuICAgICAgZm9jdXNOb2RlOiBzZWxlY3Rpb24uZm9jdXNOb2RlLFxuICAgICAgZm9jdXNPZmZzZXQ6IHNlbGVjdGlvbi5mb2N1c09mZnNldFxuICAgIH07XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7XG4gICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcmVudEVsZW1lbnQ6IHJhbmdlLnBhcmVudEVsZW1lbnQoKSxcbiAgICAgIHRleHQ6IHJhbmdlLnRleHQsXG4gICAgICB0b3A6IHJhbmdlLmJvdW5kaW5nVG9wLFxuICAgICAgbGVmdDogcmFuZ2UuYm91bmRpbmdMZWZ0XG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFBvbGwgc2VsZWN0aW9uIHRvIHNlZSB3aGV0aGVyIGl0J3MgY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4gez9TeW50aGV0aWNFdmVudH1cbiAqL1xuZnVuY3Rpb24gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIC8vIEVuc3VyZSB3ZSBoYXZlIHRoZSByaWdodCBlbGVtZW50LCBhbmQgdGhhdCB0aGUgdXNlciBpcyBub3QgZHJhZ2dpbmcgYVxuICAvLyBzZWxlY3Rpb24gKHRoaXMgbWF0Y2hlcyBuYXRpdmUgYHNlbGVjdGAgZXZlbnQgYmVoYXZpb3IpLiBJbiBIVE1MNSwgc2VsZWN0XG4gIC8vIGZpcmVzIG9ubHkgb24gaW5wdXQgYW5kIHRleHRhcmVhIHRodXMgaWYgdGhlcmUncyBubyBmb2N1c2VkIGVsZW1lbnQgd2VcbiAgLy8gd29uJ3QgZGlzcGF0Y2guXG4gIGlmIChtb3VzZURvd24gfHwgYWN0aXZlRWxlbWVudCA9PSBudWxsIHx8IGFjdGl2ZUVsZW1lbnQgIT09IGdldEFjdGl2ZUVsZW1lbnQoKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gT25seSBmaXJlIHdoZW4gc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkLlxuICB2YXIgY3VycmVudFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbihhY3RpdmVFbGVtZW50KTtcbiAgaWYgKCFsYXN0U2VsZWN0aW9uIHx8ICFzaGFsbG93RXF1YWwobGFzdFNlbGVjdGlvbiwgY3VycmVudFNlbGVjdGlvbikpIHtcbiAgICBsYXN0U2VsZWN0aW9uID0gY3VycmVudFNlbGVjdGlvbjtcblxuICAgIHZhciBzeW50aGV0aWNFdmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLnNlbGVjdCwgYWN0aXZlRWxlbWVudElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gICAgc3ludGhldGljRXZlbnQudHlwZSA9ICdzZWxlY3QnO1xuICAgIHN5bnRoZXRpY0V2ZW50LnRhcmdldCA9IGFjdGl2ZUVsZW1lbnQ7XG5cbiAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoc3ludGhldGljRXZlbnQpO1xuXG4gICAgcmV0dXJuIHN5bnRoZXRpY0V2ZW50O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVGhpcyBwbHVnaW4gY3JlYXRlcyBhbiBgb25TZWxlY3RgIGV2ZW50IHRoYXQgbm9ybWFsaXplcyBzZWxlY3QgZXZlbnRzXG4gKiBhY3Jvc3MgZm9ybSBlbGVtZW50cy5cbiAqXG4gKiBTdXBwb3J0ZWQgZWxlbWVudHMgYXJlOlxuICogLSBpbnB1dCAoc2VlIGBpc1RleHRJbnB1dEVsZW1lbnRgKVxuICogLSB0ZXh0YXJlYVxuICogLSBjb250ZW50RWRpdGFibGVcbiAqXG4gKiBUaGlzIGRpZmZlcnMgZnJvbSBuYXRpdmUgYnJvd3NlciBpbXBsZW1lbnRhdGlvbnMgaW4gdGhlIGZvbGxvd2luZyB3YXlzOlxuICogLSBGaXJlcyBvbiBjb250ZW50RWRpdGFibGUgZmllbGRzIGFzIHdlbGwgYXMgaW5wdXRzLlxuICogLSBGaXJlcyBmb3IgY29sbGFwc2VkIHNlbGVjdGlvbi5cbiAqIC0gRmlyZXMgYWZ0ZXIgdXNlciBpbnB1dC5cbiAqL1xudmFyIFNlbGVjdEV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIGlmICghaGFzTGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgICAvLyBUcmFjayB0aGUgaW5wdXQgbm9kZSB0aGF0IGhhcyBmb2N1cy5cbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BGb2N1czpcbiAgICAgICAgaWYgKGlzVGV4dElucHV0RWxlbWVudCh0b3BMZXZlbFRhcmdldCkgfHwgdG9wTGV2ZWxUYXJnZXQuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICBhY3RpdmVFbGVtZW50ID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgICAgICAgYWN0aXZlRWxlbWVudElEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICAgICAgICBsYXN0U2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbiAgICAgICAgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAvLyBEb24ndCBmaXJlIHRoZSBldmVudCB3aGlsZSB0aGUgdXNlciBpcyBkcmFnZ2luZy4gVGhpcyBtYXRjaGVzIHRoZVxuICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBuYXRpdmUgc2VsZWN0IGV2ZW50LlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICAgICAgbW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29udGV4dE1lbnU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VVcDpcbiAgICAgICAgbW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3RTZWxlY3RFdmVudChuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gICAgICAvLyBDaHJvbWUgYW5kIElFIGZpcmUgbm9uLXN0YW5kYXJkIGV2ZW50IHdoZW4gc2VsZWN0aW9uIGlzIGNoYW5nZWQgKGFuZFxuICAgICAgLy8gc29tZXRpbWVzIHdoZW4gaXQgaGFzbid0KS4gSUUncyBldmVudCBmaXJlcyBvdXQgb2Ygb3JkZXIgd2l0aCByZXNwZWN0XG4gICAgICAvLyB0byBrZXkgYW5kIGlucHV0IGV2ZW50cyBvbiBkZWxldGlvbiwgc28gd2UgZGlzY2FyZCBpdC5cbiAgICAgIC8vXG4gICAgICAvLyBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCBzZWxlY3Rpb25jaGFuZ2UsIHNvIGNoZWNrIHNlbGVjdGlvbiBzdGF0dXNcbiAgICAgIC8vIGFmdGVyIGVhY2gga2V5IGVudHJ5LiBUaGUgc2VsZWN0aW9uIGNoYW5nZXMgYWZ0ZXIga2V5ZG93biBhbmQgYmVmb3JlXG4gICAgICAvLyBrZXl1cCwgYnV0IHdlIGNoZWNrIG9uIGtleWRvd24gYXMgd2VsbCBpbiB0aGUgY2FzZSBvZiBob2xkaW5nIGRvd24gYVxuICAgICAgLy8ga2V5LCB3aGVuIG11bHRpcGxlIGtleWRvd24gZXZlbnRzIGFyZSBmaXJlZCBidXQgb25seSBvbmUga2V5dXAgaXMuXG4gICAgICAvLyBUaGlzIGlzIGFsc28gb3VyIGFwcHJvYWNoIGZvciBJRSBoYW5kbGluZywgZm9yIHRoZSByZWFzb24gYWJvdmUuXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2VsZWN0aW9uQ2hhbmdlOlxuICAgICAgICBpZiAoc2tpcFNlbGVjdGlvbkNoYW5nZUV2ZW50KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuICAgICAgICByZXR1cm4gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICBkaWRQdXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lcikge1xuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9TRUxFQ1RfS0VZKSB7XG4gICAgICBoYXNMaXN0ZW5lciA9IHRydWU7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbGVjdEV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTZXJ2ZXJSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU2l6ZSBvZiB0aGUgcmVhY3RSb290IElEIHNwYWNlLiBXZSBnZW5lcmF0ZSByYW5kb20gbnVtYmVycyBmb3IgUmVhY3Qgcm9vdFxuICogSURzIGFuZCBpZiB0aGVyZSdzIGEgY29sbGlzaW9uIHRoZSBldmVudHMgYW5kIERPTSB1cGRhdGUgc3lzdGVtIHdpbGxcbiAqIGdldCBjb25mdXNlZC4gSW4gdGhlIGZ1dHVyZSB3ZSBuZWVkIGEgd2F5IHRvIGdlbmVyYXRlIEdVSURzIGJ1dCBmb3JcbiAqIG5vdyB0aGlzIHdpbGwgd29yayBvbiBhIHNtYWxsZXIgc2NhbGUuXG4gKi9cbnZhciBHTE9CQUxfTU9VTlRfUE9JTlRfTUFYID0gTWF0aC5wb3coMiwgNTMpO1xuXG52YXIgU2VydmVyUmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogR0xPQkFMX01PVU5UX1BPSU5UX01BWCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2VydmVyUmVhY3RSb290SW5kZXg7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFNpbXBsZUV2ZW50UGx1Z2luXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRMaXN0ZW5lciA9IHJlcXVpcmUoJ2ZianMvbGliL0V2ZW50TGlzdGVuZXInKTtcbnZhciBFdmVudFByb3BhZ2F0b3JzID0gcmVxdWlyZSgnLi9FdmVudFByb3BhZ2F0b3JzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNDbGlwYm9hcmRFdmVudCcpO1xudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xudmFyIFN5bnRoZXRpY0ZvY3VzRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0ZvY3VzRXZlbnQnKTtcbnZhciBTeW50aGV0aWNLZXlib2FyZEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNLZXlib2FyZEV2ZW50Jyk7XG52YXIgU3ludGhldGljTW91c2VFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljTW91c2VFdmVudCcpO1xudmFyIFN5bnRoZXRpY0RyYWdFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRHJhZ0V2ZW50Jyk7XG52YXIgU3ludGhldGljVG91Y2hFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVG91Y2hFdmVudCcpO1xudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcbnZhciBTeW50aGV0aWNXaGVlbEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNXaGVlbEV2ZW50Jyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIGdldEV2ZW50Q2hhckNvZGUgPSByZXF1aXJlKCcuL2dldEV2ZW50Q2hhckNvZGUnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbnZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblxudmFyIGV2ZW50VHlwZXMgPSB7XG4gIGFib3J0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25BYm9ydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQWJvcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBibHVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25CbHVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25CbHVyQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY2FuUGxheToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2FuUGxheTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2FuUGxheUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNhblBsYXlUaHJvdWdoOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DYW5QbGF5VGhyb3VnaDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2hDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjbGljazoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2xpY2s6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNsaWNrQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY29udGV4dE1lbnU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbnRleHRNZW51OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNvcHk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvcHk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvcHlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjdXQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkN1dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ3V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZG91YmxlQ2xpY2s6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRvdWJsZUNsaWNrOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Eb3VibGVDbGlja0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWc6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWc6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnRW5kOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0VudGVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnRW50ZXI6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdFbnRlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdFeGl0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnRXhpdDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0V4aXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnTGVhdmU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdMZWF2ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0xlYXZlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ092ZXI6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdPdmVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnT3ZlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdTdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ1N0YXJ0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcm9wOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ecm9wOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Ecm9wQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHVyYXRpb25DaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkR1cmF0aW9uQ2hhbmdlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVtcHRpZWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkVtcHRpZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVtcHRpZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlbmNyeXB0ZWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkVuY3J5cHRlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRW5jcnlwdGVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZW5kZWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkVuZGVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25FbmRlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVycm9yOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FcnJvcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRXJyb3JDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBmb2N1czoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRm9jdXM6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkZvY3VzQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgaW5wdXQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbklucHV0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25JbnB1dENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGtleURvd246IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleURvd246IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbktleURvd25DYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBrZXlQcmVzczoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uS2V5UHJlc3M6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbktleVByZXNzQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAga2V5VXA6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleVVwOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlVcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkxvYWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkZWREYXRhOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkZWREYXRhOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkZWREYXRhQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbG9hZGVkTWV0YWRhdGE6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWRlZE1ldGFkYXRhOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWRTdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTG9hZFN0YXJ0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICAvLyBOb3RlOiBXZSBkbyBub3QgYWxsb3cgbGlzdGVuaW5nIHRvIG1vdXNlT3ZlciBldmVudHMuIEluc3RlYWQsIHVzZSB0aGVcbiAgLy8gb25Nb3VzZUVudGVyL29uTW91c2VMZWF2ZSBjcmVhdGVkIGJ5IGBFbnRlckxlYXZlRXZlbnRQbHVnaW5gLlxuICBtb3VzZURvd246IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlRG93bjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VEb3duQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VNb3ZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU1vdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlTW92ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlT3V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU91dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VPdXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBtb3VzZU92ZXI6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlT3ZlcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VPdmVyQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VVcDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VVcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VVcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBhc3RlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QYXN0ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUGFzdGVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwYXVzZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGF1c2U6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBhdXNlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcGxheToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGxheTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUGxheUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBsYXlpbmc6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBsYXlpbmc6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBsYXlpbmdDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwcm9ncmVzczoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUHJvZ3Jlc3M6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblByb2dyZXNzQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcmF0ZUNoYW5nZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUmF0ZUNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUmF0ZUNoYW5nZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHJlc2V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25SZXNldDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUmVzZXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzY3JvbGw6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNjcm9sbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU2Nyb2xsQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc2Vla2VkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWVrZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNlZWtlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHNlZWtpbmc6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNlZWtpbmc6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNlZWtpbmdDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzdGFsbGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdGFsbGVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdGFsbGVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc3VibWl0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdWJtaXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblN1Ym1pdENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHN1c3BlbmQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblN1c3BlbmQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblN1c3BlbmRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0aW1lVXBkYXRlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25UaW1lVXBkYXRlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25UaW1lVXBkYXRlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hDYW5jZWw6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoQ2FuY2VsOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Ub3VjaENhbmNlbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaEVuZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hFbmRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0b3VjaE1vdmU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoTW92ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hNb3ZlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hTdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hTdGFydENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHZvbHVtZUNoYW5nZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVm9sdW1lQ2hhbmdlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Wb2x1bWVDaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB3YWl0aW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25XYWl0aW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25XYWl0aW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgd2hlZWw6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbldoZWVsOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25XaGVlbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH1cbn07XG5cbnZhciB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWcgPSB7XG4gIHRvcEFib3J0OiBldmVudFR5cGVzLmFib3J0LFxuICB0b3BCbHVyOiBldmVudFR5cGVzLmJsdXIsXG4gIHRvcENhblBsYXk6IGV2ZW50VHlwZXMuY2FuUGxheSxcbiAgdG9wQ2FuUGxheVRocm91Z2g6IGV2ZW50VHlwZXMuY2FuUGxheVRocm91Z2gsXG4gIHRvcENsaWNrOiBldmVudFR5cGVzLmNsaWNrLFxuICB0b3BDb250ZXh0TWVudTogZXZlbnRUeXBlcy5jb250ZXh0TWVudSxcbiAgdG9wQ29weTogZXZlbnRUeXBlcy5jb3B5LFxuICB0b3BDdXQ6IGV2ZW50VHlwZXMuY3V0LFxuICB0b3BEb3VibGVDbGljazogZXZlbnRUeXBlcy5kb3VibGVDbGljayxcbiAgdG9wRHJhZzogZXZlbnRUeXBlcy5kcmFnLFxuICB0b3BEcmFnRW5kOiBldmVudFR5cGVzLmRyYWdFbmQsXG4gIHRvcERyYWdFbnRlcjogZXZlbnRUeXBlcy5kcmFnRW50ZXIsXG4gIHRvcERyYWdFeGl0OiBldmVudFR5cGVzLmRyYWdFeGl0LFxuICB0b3BEcmFnTGVhdmU6IGV2ZW50VHlwZXMuZHJhZ0xlYXZlLFxuICB0b3BEcmFnT3ZlcjogZXZlbnRUeXBlcy5kcmFnT3ZlcixcbiAgdG9wRHJhZ1N0YXJ0OiBldmVudFR5cGVzLmRyYWdTdGFydCxcbiAgdG9wRHJvcDogZXZlbnRUeXBlcy5kcm9wLFxuICB0b3BEdXJhdGlvbkNoYW5nZTogZXZlbnRUeXBlcy5kdXJhdGlvbkNoYW5nZSxcbiAgdG9wRW1wdGllZDogZXZlbnRUeXBlcy5lbXB0aWVkLFxuICB0b3BFbmNyeXB0ZWQ6IGV2ZW50VHlwZXMuZW5jcnlwdGVkLFxuICB0b3BFbmRlZDogZXZlbnRUeXBlcy5lbmRlZCxcbiAgdG9wRXJyb3I6IGV2ZW50VHlwZXMuZXJyb3IsXG4gIHRvcEZvY3VzOiBldmVudFR5cGVzLmZvY3VzLFxuICB0b3BJbnB1dDogZXZlbnRUeXBlcy5pbnB1dCxcbiAgdG9wS2V5RG93bjogZXZlbnRUeXBlcy5rZXlEb3duLFxuICB0b3BLZXlQcmVzczogZXZlbnRUeXBlcy5rZXlQcmVzcyxcbiAgdG9wS2V5VXA6IGV2ZW50VHlwZXMua2V5VXAsXG4gIHRvcExvYWQ6IGV2ZW50VHlwZXMubG9hZCxcbiAgdG9wTG9hZGVkRGF0YTogZXZlbnRUeXBlcy5sb2FkZWREYXRhLFxuICB0b3BMb2FkZWRNZXRhZGF0YTogZXZlbnRUeXBlcy5sb2FkZWRNZXRhZGF0YSxcbiAgdG9wTG9hZFN0YXJ0OiBldmVudFR5cGVzLmxvYWRTdGFydCxcbiAgdG9wTW91c2VEb3duOiBldmVudFR5cGVzLm1vdXNlRG93bixcbiAgdG9wTW91c2VNb3ZlOiBldmVudFR5cGVzLm1vdXNlTW92ZSxcbiAgdG9wTW91c2VPdXQ6IGV2ZW50VHlwZXMubW91c2VPdXQsXG4gIHRvcE1vdXNlT3ZlcjogZXZlbnRUeXBlcy5tb3VzZU92ZXIsXG4gIHRvcE1vdXNlVXA6IGV2ZW50VHlwZXMubW91c2VVcCxcbiAgdG9wUGFzdGU6IGV2ZW50VHlwZXMucGFzdGUsXG4gIHRvcFBhdXNlOiBldmVudFR5cGVzLnBhdXNlLFxuICB0b3BQbGF5OiBldmVudFR5cGVzLnBsYXksXG4gIHRvcFBsYXlpbmc6IGV2ZW50VHlwZXMucGxheWluZyxcbiAgdG9wUHJvZ3Jlc3M6IGV2ZW50VHlwZXMucHJvZ3Jlc3MsXG4gIHRvcFJhdGVDaGFuZ2U6IGV2ZW50VHlwZXMucmF0ZUNoYW5nZSxcbiAgdG9wUmVzZXQ6IGV2ZW50VHlwZXMucmVzZXQsXG4gIHRvcFNjcm9sbDogZXZlbnRUeXBlcy5zY3JvbGwsXG4gIHRvcFNlZWtlZDogZXZlbnRUeXBlcy5zZWVrZWQsXG4gIHRvcFNlZWtpbmc6IGV2ZW50VHlwZXMuc2Vla2luZyxcbiAgdG9wU3RhbGxlZDogZXZlbnRUeXBlcy5zdGFsbGVkLFxuICB0b3BTdWJtaXQ6IGV2ZW50VHlwZXMuc3VibWl0LFxuICB0b3BTdXNwZW5kOiBldmVudFR5cGVzLnN1c3BlbmQsXG4gIHRvcFRpbWVVcGRhdGU6IGV2ZW50VHlwZXMudGltZVVwZGF0ZSxcbiAgdG9wVG91Y2hDYW5jZWw6IGV2ZW50VHlwZXMudG91Y2hDYW5jZWwsXG4gIHRvcFRvdWNoRW5kOiBldmVudFR5cGVzLnRvdWNoRW5kLFxuICB0b3BUb3VjaE1vdmU6IGV2ZW50VHlwZXMudG91Y2hNb3ZlLFxuICB0b3BUb3VjaFN0YXJ0OiBldmVudFR5cGVzLnRvdWNoU3RhcnQsXG4gIHRvcFZvbHVtZUNoYW5nZTogZXZlbnRUeXBlcy52b2x1bWVDaGFuZ2UsXG4gIHRvcFdhaXRpbmc6IGV2ZW50VHlwZXMud2FpdGluZyxcbiAgdG9wV2hlZWw6IGV2ZW50VHlwZXMud2hlZWxcbn07XG5cbmZvciAodmFyIHR5cGUgaW4gdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnKSB7XG4gIHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZ1t0eXBlXS5kZXBlbmRlbmNpZXMgPSBbdHlwZV07XG59XG5cbnZhciBPTl9DTElDS19LRVkgPSBrZXlPZih7IG9uQ2xpY2s6IG51bGwgfSk7XG52YXIgb25DbGlja0xpc3RlbmVycyA9IHt9O1xuXG52YXIgU2ltcGxlRXZlbnRQbHVnaW4gPSB7XG5cbiAgZXZlbnRUeXBlczogZXZlbnRUeXBlcyxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHN9XG4gICAqL1xuICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gICAgdmFyIGRpc3BhdGNoQ29uZmlnID0gdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnW3RvcExldmVsVHlwZV07XG4gICAgaWYgKCFkaXNwYXRjaENvbmZpZykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBFdmVudENvbnN0cnVjdG9yO1xuICAgIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQWJvcnQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2FuUGxheTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDYW5QbGF5VGhyb3VnaDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEdXJhdGlvbkNoYW5nZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbXB0aWVkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEVuY3J5cHRlZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmRlZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFcnJvcjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BJbnB1dDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BMb2FkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRlZERhdGE6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZGVkTWV0YWRhdGE6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZFN0YXJ0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhdXNlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBsYXk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGxheWluZzpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQcm9ncmVzczpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BSYXRlQ2hhbmdlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFJlc2V0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNlZWtlZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTZWVraW5nOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN0YWxsZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU3VibWl0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN1c3BlbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGltZVVwZGF0ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BWb2x1bWVDaGFuZ2U6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wV2FpdGluZzpcbiAgICAgICAgLy8gSFRNTCBFdmVudHNcbiAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmRleC5odG1sI2V2ZW50cy0wXG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgICAgIC8vIEZpcmVGb3ggY3JlYXRlcyBhIGtleXByZXNzIGV2ZW50IGZvciBmdW5jdGlvbiBrZXlzIHRvby4gVGhpcyByZW1vdmVzXG4gICAgICAgIC8vIHRoZSB1bndhbnRlZCBrZXlwcmVzcyBldmVudHMuIEVudGVyIGlzIGhvd2V2ZXIgYm90aCBwcmludGFibGUgYW5kXG4gICAgICAgIC8vIG5vbi1wcmludGFibGUuIE9uZSB3b3VsZCBleHBlY3QgVGFiIHRvIGJlIGFzIHdlbGwgKGJ1dCBpdCBpc24ndCkuXG4gICAgICAgIGlmIChnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KSA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5RG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0tleWJvYXJkRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEJsdXI6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRm9jdXM6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNGb2N1c0V2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDbGljazpcbiAgICAgICAgLy8gRmlyZWZveCBjcmVhdGVzIGEgY2xpY2sgZXZlbnQgb24gcmlnaHQgbW91c2UgY2xpY2tzLiBUaGlzIHJlbW92ZXMgdGhlXG4gICAgICAgIC8vIHVud2FudGVkIGNsaWNrIGV2ZW50cy5cbiAgICAgICAgaWYgKG5hdGl2ZUV2ZW50LmJ1dHRvbiA9PT0gMikge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29udGV4dE1lbnU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRG91YmxlQ2xpY2s6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlTW92ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXI6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VVcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY01vdXNlRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWc6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0VuZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnRW50ZXI6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0V4aXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0xlYXZlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdPdmVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdTdGFydDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcm9wOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRHJhZ0V2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaENhbmNlbDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaEVuZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaE1vdmU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hTdGFydDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1RvdWNoRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNjcm9sbDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1VJRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFdoZWVsOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljV2hlZWxFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29weTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGFzdGU6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNDbGlwYm9hcmRFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgICFFdmVudENvbnN0cnVjdG9yID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1NpbXBsZUV2ZW50UGx1Z2luOiBVbmhhbmRsZWQgZXZlbnQgdHlwZSwgYCVzYC4nLCB0b3BMZXZlbFR5cGUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgZXZlbnQgPSBFdmVudENvbnN0cnVjdG9yLmdldFBvb2xlZChkaXNwYXRjaENvbmZpZywgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuICAgIHJldHVybiBldmVudDtcbiAgfSxcblxuICBkaWRQdXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lcikge1xuICAgIC8vIE1vYmlsZSBTYWZhcmkgZG9lcyBub3QgZmlyZSBwcm9wZXJseSBidWJibGUgY2xpY2sgZXZlbnRzIG9uXG4gICAgLy8gbm9uLWludGVyYWN0aXZlIGVsZW1lbnRzLCB3aGljaCBtZWFucyBkZWxlZ2F0ZWQgY2xpY2sgbGlzdGVuZXJzIGRvIG5vdFxuICAgIC8vIGZpcmUuIFRoZSB3b3JrYXJvdW5kIGZvciB0aGlzIGJ1ZyBpbnZvbHZlcyBhdHRhY2hpbmcgYW4gZW1wdHkgY2xpY2tcbiAgICAvLyBsaXN0ZW5lciBvbiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWUgPT09IE9OX0NMSUNLX0tFWSkge1xuICAgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaWQpO1xuICAgICAgaWYgKCFvbkNsaWNrTGlzdGVuZXJzW2lkXSkge1xuICAgICAgICBvbkNsaWNrTGlzdGVuZXJzW2lkXSA9IEV2ZW50TGlzdGVuZXIubGlzdGVuKG5vZGUsICdjbGljaycsIGVtcHR5RnVuY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB3aWxsRGVsZXRlTGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9DTElDS19LRVkpIHtcbiAgICAgIG9uQ2xpY2tMaXN0ZW5lcnNbaWRdLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIG9uQ2xpY2tMaXN0ZW5lcnNbaWRdO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpbXBsZUV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNDbGlwYm9hcmRFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2NsaXBib2FyZC1hcGlzL1xuICovXG52YXIgQ2xpcGJvYXJkRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGNsaXBib2FyZERhdGE6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAnY2xpcGJvYXJkRGF0YScgaW4gZXZlbnQgPyBldmVudC5jbGlwYm9hcmREYXRhIDogd2luZG93LmNsaXBib2FyZERhdGE7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljQ2xpcGJvYXJkRXZlbnQsIENsaXBib2FyZEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNDbGlwYm9hcmRFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljQ29tcG9zaXRpb25FdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWNvbXBvc2l0aW9uZXZlbnRzXG4gKi9cbnZhciBDb21wb3NpdGlvbkV2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljQ29tcG9zaXRpb25FdmVudCwgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljQ29tcG9zaXRpb25FdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljRHJhZ0V2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIERyYWdFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBEcmFnRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGRhdGFUcmFuc2ZlcjogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljRHJhZ0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY01vdXNlRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY01vdXNlRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0RyYWdFdmVudCwgRHJhZ0V2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNEcmFnRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0V2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHR5cGU6IG51bGwsXG4gIHRhcmdldDogbnVsbCxcbiAgLy8gY3VycmVudFRhcmdldCBpcyBzZXQgd2hlbiBkaXNwYXRjaGluZzsgbm8gdXNlIGluIGNvcHlpbmcgaXQgaGVyZVxuICBjdXJyZW50VGFyZ2V0OiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCxcbiAgZXZlbnRQaGFzZTogbnVsbCxcbiAgYnViYmxlczogbnVsbCxcbiAgY2FuY2VsYWJsZTogbnVsbCxcbiAgdGltZVN0YW1wOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQudGltZVN0YW1wIHx8IERhdGUubm93KCk7XG4gIH0sXG4gIGRlZmF1bHRQcmV2ZW50ZWQ6IG51bGwsXG4gIGlzVHJ1c3RlZDogbnVsbFxufTtcblxuLyoqXG4gKiBTeW50aGV0aWMgZXZlbnRzIGFyZSBkaXNwYXRjaGVkIGJ5IGV2ZW50IHBsdWdpbnMsIHR5cGljYWxseSBpbiByZXNwb25zZSB0byBhXG4gKiB0b3AtbGV2ZWwgZXZlbnQgZGVsZWdhdGlvbiBoYW5kbGVyLlxuICpcbiAqIFRoZXNlIHN5c3RlbXMgc2hvdWxkIGdlbmVyYWxseSB1c2UgcG9vbGluZyB0byByZWR1Y2UgdGhlIGZyZXF1ZW5jeSBvZiBnYXJiYWdlXG4gKiBjb2xsZWN0aW9uLiBUaGUgc3lzdGVtIHNob3VsZCBjaGVjayBgaXNQZXJzaXN0ZW50YCB0byBkZXRlcm1pbmUgd2hldGhlciB0aGVcbiAqIGV2ZW50IHNob3VsZCBiZSByZWxlYXNlZCBpbnRvIHRoZSBwb29sIGFmdGVyIGJlaW5nIGRpc3BhdGNoZWQuIFVzZXJzIHRoYXRcbiAqIG5lZWQgYSBwZXJzaXN0ZWQgZXZlbnQgc2hvdWxkIGludm9rZSBgcGVyc2lzdGAuXG4gKlxuICogU3ludGhldGljIGV2ZW50cyAoYW5kIHN1YmNsYXNzZXMpIGltcGxlbWVudCB0aGUgRE9NIExldmVsIDMgRXZlbnRzIEFQSSBieVxuICogbm9ybWFsaXppbmcgYnJvd3NlciBxdWlya3MuIFN1YmNsYXNzZXMgZG8gbm90IG5lY2Vzc2FyaWx5IGhhdmUgdG8gaW1wbGVtZW50IGFcbiAqIERPTSBpbnRlcmZhY2U7IGN1c3RvbSBhcHBsaWNhdGlvbi1zcGVjaWZpYyBldmVudHMgY2FuIGFsc28gc3ViY2xhc3MgdGhpcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIHRoaXMuZGlzcGF0Y2hDb25maWcgPSBkaXNwYXRjaENvbmZpZztcbiAgdGhpcy5kaXNwYXRjaE1hcmtlciA9IGRpc3BhdGNoTWFya2VyO1xuICB0aGlzLm5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQ7XG5cbiAgdmFyIEludGVyZmFjZSA9IHRoaXMuY29uc3RydWN0b3IuSW50ZXJmYWNlO1xuICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcbiAgICBpZiAoIUludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgbm9ybWFsaXplID0gSW50ZXJmYWNlW3Byb3BOYW1lXTtcbiAgICBpZiAobm9ybWFsaXplKSB7XG4gICAgICB0aGlzW3Byb3BOYW1lXSA9IG5vcm1hbGl6ZShuYXRpdmVFdmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ3RhcmdldCcpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBuYXRpdmVFdmVudFRhcmdldDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNbcHJvcE5hbWVdID0gbmF0aXZlRXZlbnRbcHJvcE5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBkZWZhdWx0UHJldmVudGVkID0gbmF0aXZlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCAhPSBudWxsID8gbmF0aXZlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCA6IG5hdGl2ZUV2ZW50LnJldHVyblZhbHVlID09PSBmYWxzZTtcbiAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlO1xuICB9XG4gIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2U7XG59XG5cbmFzc2lnbihTeW50aGV0aWNFdmVudC5wcm90b3R5cGUsIHtcblxuICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgdmFyIGV2ZW50ID0gdGhpcy5uYXRpdmVFdmVudDtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZXZlbnQsICdUaGlzIHN5bnRoZXRpYyBldmVudCBpcyByZXVzZWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIElmIHlvdVxcJ3JlICcgKyAnc2VlaW5nIHRoaXMsIHlvdVxcJ3JlIGNhbGxpbmcgYHByZXZlbnREZWZhdWx0YCBvbiBhICcgKyAncmVsZWFzZWQvbnVsbGlmaWVkIHN5bnRoZXRpYyBldmVudC4gVGhpcyBpcyBhIG5vLW9wLiBTZWUgJyArICdodHRwczovL2ZiLm1lL3JlYWN0LWV2ZW50LXBvb2xpbmcgZm9yIG1vcmUgaW5mb3JtYXRpb24uJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghZXZlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV2ZW50ID0gdGhpcy5uYXRpdmVFdmVudDtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZXZlbnQsICdUaGlzIHN5bnRoZXRpYyBldmVudCBpcyByZXVzZWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIElmIHlvdVxcJ3JlICcgKyAnc2VlaW5nIHRoaXMsIHlvdVxcJ3JlIGNhbGxpbmcgYHN0b3BQcm9wYWdhdGlvbmAgb24gYSAnICsgJ3JlbGVhc2VkL251bGxpZmllZCBzeW50aGV0aWMgZXZlbnQuIFRoaXMgaXMgYSBuby1vcC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1ldmVudC1wb29saW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogV2UgcmVsZWFzZSBhbGwgZGlzcGF0Y2hlZCBgU3ludGhldGljRXZlbnRgcyBhZnRlciBlYWNoIGV2ZW50IGxvb3AsIGFkZGluZ1xuICAgKiB0aGVtIGJhY2sgaW50byB0aGUgcG9vbC4gVGhpcyBhbGxvd3MgYSB3YXkgdG8gaG9sZCBvbnRvIGEgcmVmZXJlbmNlIHRoYXRcbiAgICogd29uJ3QgYmUgYWRkZWQgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgKi9cbiAgcGVyc2lzdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaXNQZXJzaXN0ZW50ID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGlzIGV2ZW50IHNob3VsZCBiZSByZWxlYXNlZCBiYWNrIGludG8gdGhlIHBvb2wuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhpcyBzaG91bGQgbm90IGJlIHJlbGVhc2VkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBpc1BlcnNpc3RlbnQ6IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgYGRlc3RydWN0b3JgIG9uIGVhY2ggaW5zdGFuY2UgaXQgcmVsZWFzZXMuXG4gICAqL1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIEludGVyZmFjZSA9IHRoaXMuY29uc3RydWN0b3IuSW50ZXJmYWNlO1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIEludGVyZmFjZSkge1xuICAgICAgdGhpc1twcm9wTmFtZV0gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmRpc3BhdGNoQ29uZmlnID0gbnVsbDtcbiAgICB0aGlzLmRpc3BhdGNoTWFya2VyID0gbnVsbDtcbiAgICB0aGlzLm5hdGl2ZUV2ZW50ID0gbnVsbDtcbiAgfVxuXG59KTtcblxuU3ludGhldGljRXZlbnQuSW50ZXJmYWNlID0gRXZlbnRJbnRlcmZhY2U7XG5cbi8qKlxuICogSGVscGVyIHRvIHJlZHVjZSBib2lsZXJwbGF0ZSB3aGVuIGNyZWF0aW5nIHN1YmNsYXNzZXMuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gQ2xhc3NcbiAqIEBwYXJhbSB7P29iamVjdH0gSW50ZXJmYWNlXG4gKi9cblN5bnRoZXRpY0V2ZW50LmF1Z21lbnRDbGFzcyA9IGZ1bmN0aW9uIChDbGFzcywgSW50ZXJmYWNlKSB7XG4gIHZhciBTdXBlciA9IHRoaXM7XG5cbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgYXNzaWduKHByb3RvdHlwZSwgQ2xhc3MucHJvdG90eXBlKTtcbiAgQ2xhc3MucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICBDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDbGFzcztcblxuICBDbGFzcy5JbnRlcmZhY2UgPSBhc3NpZ24oe30sIFN1cGVyLkludGVyZmFjZSwgSW50ZXJmYWNlKTtcbiAgQ2xhc3MuYXVnbWVudENsYXNzID0gU3VwZXIuYXVnbWVudENsYXNzO1xuXG4gIFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhDbGFzcywgUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyKTtcbn07XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhTeW50aGV0aWNFdmVudCwgUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljRm9jdXNFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBGb2N1c0V2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEZvY3VzRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHJlbGF0ZWRUYXJnZXQ6IG51bGxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0ZvY3VzRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljVUlFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljVUlFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljRm9jdXNFdmVudCwgRm9jdXNFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRm9jdXNFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljSW5wdXRFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMTMxMTA1XG4gKiAgICAgIC8jZXZlbnRzLWlucHV0ZXZlbnRzXG4gKi9cbnZhciBJbnB1dEV2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNJbnB1dEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljSW5wdXRFdmVudCwgSW5wdXRFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljSW5wdXRFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljS2V5Ym9hcmRFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG5cbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG52YXIgZ2V0RXZlbnRLZXkgPSByZXF1aXJlKCcuL2dldEV2ZW50S2V5Jyk7XG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEtleWJvYXJkRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgS2V5Ym9hcmRFdmVudEludGVyZmFjZSA9IHtcbiAga2V5OiBnZXRFdmVudEtleSxcbiAgbG9jYXRpb246IG51bGwsXG4gIGN0cmxLZXk6IG51bGwsXG4gIHNoaWZ0S2V5OiBudWxsLFxuICBhbHRLZXk6IG51bGwsXG4gIG1ldGFLZXk6IG51bGwsXG4gIHJlcGVhdDogbnVsbCxcbiAgbG9jYWxlOiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUsXG4gIC8vIExlZ2FjeSBJbnRlcmZhY2VcbiAgY2hhckNvZGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIGBjaGFyQ29kZWAgaXMgdGhlIHJlc3VsdCBvZiBhIEtleVByZXNzIGV2ZW50IGFuZCByZXByZXNlbnRzIHRoZSB2YWx1ZSBvZlxuICAgIC8vIHRoZSBhY3R1YWwgcHJpbnRhYmxlIGNoYXJhY3Rlci5cblxuICAgIC8vIEtleVByZXNzIGlzIGRlcHJlY2F0ZWQsIGJ1dCBpdHMgcmVwbGFjZW1lbnQgaXMgbm90IHlldCBmaW5hbCBhbmQgbm90XG4gICAgLy8gaW1wbGVtZW50ZWQgaW4gYW55IG1ham9yIGJyb3dzZXIuIE9ubHkgS2V5UHJlc3MgaGFzIGNoYXJDb2RlLlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gZ2V0RXZlbnRDaGFyQ29kZShldmVudCk7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9LFxuICBrZXlDb2RlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBga2V5Q29kZWAgaXMgdGhlIHJlc3VsdCBvZiBhIEtleURvd24vVXAgZXZlbnQgYW5kIHJlcHJlc2VudHMgdGhlIHZhbHVlIG9mXG4gICAgLy8gcGh5c2ljYWwga2V5Ym9hcmQga2V5LlxuXG4gICAgLy8gVGhlIGFjdHVhbCBtZWFuaW5nIG9mIHRoZSB2YWx1ZSBkZXBlbmRzIG9uIHRoZSB1c2Vycycga2V5Ym9hcmQgbGF5b3V0XG4gICAgLy8gd2hpY2ggY2Fubm90IGJlIGRldGVjdGVkLiBBc3N1bWluZyB0aGF0IGl0IGlzIGEgVVMga2V5Ym9hcmQgbGF5b3V0XG4gICAgLy8gcHJvdmlkZXMgYSBzdXJwcmlzaW5nbHkgYWNjdXJhdGUgbWFwcGluZyBmb3IgVVMgYW5kIEV1cm9wZWFuIHVzZXJzLlxuICAgIC8vIER1ZSB0byB0aGlzLCBpdCBpcyBsZWZ0IHRvIHRoZSB1c2VyIHRvIGltcGxlbWVudCBhdCB0aGlzIHRpbWUuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJyB8fCBldmVudC50eXBlID09PSAna2V5dXAnKSB7XG4gICAgICByZXR1cm4gZXZlbnQua2V5Q29kZTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH0sXG4gIHdoaWNoOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBgd2hpY2hgIGlzIGFuIGFsaWFzIGZvciBlaXRoZXIgYGtleUNvZGVgIG9yIGBjaGFyQ29kZWAgZGVwZW5kaW5nIG9uIHRoZVxuICAgIC8vIHR5cGUgb2YgdGhlIGV2ZW50LlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gZ2V0RXZlbnRDaGFyQ29kZShldmVudCk7XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgICAgcmV0dXJuIGV2ZW50LmtleUNvZGU7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNLZXlib2FyZEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0tleWJvYXJkRXZlbnQsIEtleWJvYXJkRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0tleWJvYXJkRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY01vdXNlRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xudmFyIFZpZXdwb3J0TWV0cmljcyA9IHJlcXVpcmUoJy4vVmlld3BvcnRNZXRyaWNzJyk7XG5cbnZhciBnZXRFdmVudE1vZGlmaWVyU3RhdGUgPSByZXF1aXJlKCcuL2dldEV2ZW50TW9kaWZpZXJTdGF0ZScpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgTW91c2VFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBNb3VzZUV2ZW50SW50ZXJmYWNlID0ge1xuICBzY3JlZW5YOiBudWxsLFxuICBzY3JlZW5ZOiBudWxsLFxuICBjbGllbnRYOiBudWxsLFxuICBjbGllbnRZOiBudWxsLFxuICBjdHJsS2V5OiBudWxsLFxuICBzaGlmdEtleTogbnVsbCxcbiAgYWx0S2V5OiBudWxsLFxuICBtZXRhS2V5OiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUsXG4gIGJ1dHRvbjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gV2Via2l0LCBGaXJlZm94LCBJRTkrXG4gICAgLy8gd2hpY2g6ICAxIDIgM1xuICAgIC8vIGJ1dHRvbjogMCAxIDIgKHN0YW5kYXJkKVxuICAgIHZhciBidXR0b24gPSBldmVudC5idXR0b247XG4gICAgaWYgKCd3aGljaCcgaW4gZXZlbnQpIHtcbiAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIC8vIElFPDlcbiAgICAvLyB3aGljaDogIHVuZGVmaW5lZFxuICAgIC8vIGJ1dHRvbjogMCAwIDBcbiAgICAvLyBidXR0b246IDEgNCAyIChvbm1vdXNldXApXG4gICAgcmV0dXJuIGJ1dHRvbiA9PT0gMiA/IDIgOiBidXR0b24gPT09IDQgPyAxIDogMDtcbiAgfSxcbiAgYnV0dG9uczogbnVsbCxcbiAgcmVsYXRlZFRhcmdldDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgKGV2ZW50LmZyb21FbGVtZW50ID09PSBldmVudC5zcmNFbGVtZW50ID8gZXZlbnQudG9FbGVtZW50IDogZXZlbnQuZnJvbUVsZW1lbnQpO1xuICB9LFxuICAvLyBcIlByb3ByaWV0YXJ5XCIgSW50ZXJmYWNlLlxuICBwYWdlWDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdwYWdlWCcgaW4gZXZlbnQgPyBldmVudC5wYWdlWCA6IGV2ZW50LmNsaWVudFggKyBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbExlZnQ7XG4gIH0sXG4gIHBhZ2VZOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gJ3BhZ2VZJyBpbiBldmVudCA/IGV2ZW50LnBhZ2VZIDogZXZlbnQuY2xpZW50WSArIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsVG9wO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNNb3VzZUV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY01vdXNlRXZlbnQsIE1vdXNlRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY01vdXNlRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY1RvdWNoRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIFRvdWNoRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvdG91Y2gtZXZlbnRzL1xuICovXG52YXIgVG91Y2hFdmVudEludGVyZmFjZSA9IHtcbiAgdG91Y2hlczogbnVsbCxcbiAgdGFyZ2V0VG91Y2hlczogbnVsbCxcbiAgY2hhbmdlZFRvdWNoZXM6IG51bGwsXG4gIGFsdEtleTogbnVsbCxcbiAgbWV0YUtleTogbnVsbCxcbiAgY3RybEtleTogbnVsbCxcbiAgc2hpZnRLZXk6IG51bGwsXG4gIGdldE1vZGlmaWVyU3RhdGU6IGdldEV2ZW50TW9kaWZpZXJTdGF0ZVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljVG91Y2hFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNUb3VjaEV2ZW50LCBUb3VjaEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNUb3VjaEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNVSUV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2dldEV2ZW50VGFyZ2V0Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBVSUV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIFVJRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC52aWV3KSB7XG4gICAgICByZXR1cm4gZXZlbnQudmlldztcbiAgICB9XG5cbiAgICB2YXIgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgIGlmICh0YXJnZXQgIT0gbnVsbCAmJiB0YXJnZXQud2luZG93ID09PSB0YXJnZXQpIHtcbiAgICAgIC8vIHRhcmdldCBpcyBhIHdpbmRvdyBvYmplY3RcbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgdmFyIGRvYyA9IHRhcmdldC5vd25lckRvY3VtZW50O1xuICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgd2h5IGBvd25lckRvY3VtZW50YCBpcyBzb21ldGltZXMgdW5kZWZpbmVkIGluIElFOC5cbiAgICBpZiAoZG9jKSB7XG4gICAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICB9LFxuICBkZXRhaWw6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC5kZXRhaWwgfHwgMDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY1VJRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY0V2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNVSUV2ZW50LCBVSUV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNVSUV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNXaGVlbEV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIFdoZWVsRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgV2hlZWxFdmVudEludGVyZmFjZSA9IHtcbiAgZGVsdGFYOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gJ2RlbHRhWCcgaW4gZXZlbnQgPyBldmVudC5kZWx0YVggOlxuICAgIC8vIEZhbGxiYWNrIHRvIGB3aGVlbERlbHRhWGAgZm9yIFdlYmtpdCBhbmQgbm9ybWFsaXplIChyaWdodCBpcyBwb3NpdGl2ZSkuXG4gICAgJ3doZWVsRGVsdGFYJyBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhWCA6IDA7XG4gIH0sXG4gIGRlbHRhWTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdkZWx0YVknIGluIGV2ZW50ID8gZXZlbnQuZGVsdGFZIDpcbiAgICAvLyBGYWxsYmFjayB0byBgd2hlZWxEZWx0YVlgIGZvciBXZWJraXQgYW5kIG5vcm1hbGl6ZSAoZG93biBpcyBwb3NpdGl2ZSkuXG4gICAgJ3doZWVsRGVsdGFZJyBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhWSA6XG4gICAgLy8gRmFsbGJhY2sgdG8gYHdoZWVsRGVsdGFgIGZvciBJRTw5IGFuZCBub3JtYWxpemUgKGRvd24gaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhJyBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhIDogMDtcbiAgfSxcbiAgZGVsdGFaOiBudWxsLFxuXG4gIC8vIEJyb3dzZXJzIHdpdGhvdXQgXCJkZWx0YU1vZGVcIiBpcyByZXBvcnRpbmcgaW4gcmF3IHdoZWVsIGRlbHRhIHdoZXJlIG9uZVxuICAvLyBub3RjaCBvbiB0aGUgc2Nyb2xsIGlzIGFsd2F5cyArLy0gMTIwLCByb3VnaGx5IGVxdWl2YWxlbnQgdG8gcGl4ZWxzLlxuICAvLyBBIGdvb2QgYXBwcm94aW1hdGlvbiBvZiBET01fREVMVEFfTElORSAoMSkgaXMgNSUgb2Ygdmlld3BvcnQgc2l6ZSBvclxuICAvLyB+NDAgcGl4ZWxzLCBmb3IgRE9NX0RFTFRBX1NDUkVFTiAoMikgaXQgaXMgODcuNSUgb2Ygdmlld3BvcnQgc2l6ZS5cbiAgZGVsdGFNb2RlOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNNb3VzZUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNXaGVlbEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY01vdXNlRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY01vdXNlRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY1doZWVsRXZlbnQsIFdoZWVsRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY1doZWVsRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFRyYW5zYWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogYFRyYW5zYWN0aW9uYCBjcmVhdGVzIGEgYmxhY2sgYm94IHRoYXQgaXMgYWJsZSB0byB3cmFwIGFueSBtZXRob2Qgc3VjaCB0aGF0XG4gKiBjZXJ0YWluIGludmFyaWFudHMgYXJlIG1haW50YWluZWQgYmVmb3JlIGFuZCBhZnRlciB0aGUgbWV0aG9kIGlzIGludm9rZWRcbiAqIChFdmVuIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gd2hpbGUgaW52b2tpbmcgdGhlIHdyYXBwZWQgbWV0aG9kKS4gV2hvZXZlclxuICogaW5zdGFudGlhdGVzIGEgdHJhbnNhY3Rpb24gY2FuIHByb3ZpZGUgZW5mb3JjZXJzIG9mIHRoZSBpbnZhcmlhbnRzIGF0XG4gKiBjcmVhdGlvbiB0aW1lLiBUaGUgYFRyYW5zYWN0aW9uYCBjbGFzcyBpdHNlbGYgd2lsbCBzdXBwbHkgb25lIGFkZGl0aW9uYWxcbiAqIGF1dG9tYXRpYyBpbnZhcmlhbnQgZm9yIHlvdSAtIHRoZSBpbnZhcmlhbnQgdGhhdCBhbnkgdHJhbnNhY3Rpb24gaW5zdGFuY2VcbiAqIHNob3VsZCBub3QgYmUgcnVuIHdoaWxlIGl0IGlzIGFscmVhZHkgYmVpbmcgcnVuLiBZb3Ugd291bGQgdHlwaWNhbGx5IGNyZWF0ZSBhXG4gKiBzaW5nbGUgaW5zdGFuY2Ugb2YgYSBgVHJhbnNhY3Rpb25gIGZvciByZXVzZSBtdWx0aXBsZSB0aW1lcywgdGhhdCBwb3RlbnRpYWxseVxuICogaXMgdXNlZCB0byB3cmFwIHNldmVyYWwgZGlmZmVyZW50IG1ldGhvZHMuIFdyYXBwZXJzIGFyZSBleHRyZW1lbHkgc2ltcGxlIC1cbiAqIHRoZXkgb25seSByZXF1aXJlIGltcGxlbWVudGluZyB0d28gbWV0aG9kcy5cbiAqXG4gKiA8cHJlPlxuICogICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXJzIChpbmplY3RlZCBhdCBjcmVhdGlvbiB0aW1lKVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tK1xuICogICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgIHYgICAgICAgIHwgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgICAgKy0tLS0tLS0tLS0tLS0tLSsgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgICstLXwgICAgd3JhcHBlcjEgICB8LS0tfC0tLS0rICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICArLS0tLS0tLS0tLS0tLS0tKyAgIHYgICAgfCAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgICAgICArLS0tLS0tLS0tLS0tLSsgIHwgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICstLS0tfCAgIHdyYXBwZXIyICB8LS0tLS0tLS0rICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICAgICB8ICAgICstLS0tLS0tLS0tLS0tKyAgfCAgICAgfCAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgfCAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHYgICAgIHYgICAgICAgICAgICAgICAgICAgICB2ICAgICB2ICAgfCB3cmFwcGVyXG4gKiAgICAgICAgICAgICAgICAgICAgfCArLS0tKyArLS0tKyAgICstLS0tLS0tLS0rICAgKy0tLSsgKy0tLSsgfCBpbnZhcmlhbnRzXG4gKiBwZXJmb3JtKGFueU1ldGhvZCkgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfCBtYWludGFpbmVkXG4gKiArLS0tLS0tLS0tLS0tLS0tLS0+fC18LS0tfC18LS0tfC0tPnxhbnlNZXRob2R8LS0tfC0tLXwtfC0tLXwtfC0tLS0tLS0tPlxuICogICAgICAgICAgICAgICAgICAgIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHxcbiAqICAgICAgICAgICAgICAgICAgICB8IHwgICB8IHwgICB8ICAgfCAgICAgICAgIHwgICB8ICAgfCB8ICAgfCB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuICogICAgICAgICAgICAgICAgICAgIHwgKy0tLSsgKy0tLSsgICArLS0tLS0tLS0tKyAgICstLS0rICstLS0rIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICBpbml0aWFsaXplICAgICAgICAgICAgICAgICAgICBjbG9zZSAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogPC9wcmU+XG4gKlxuICogVXNlIGNhc2VzOlxuICogLSBQcmVzZXJ2aW5nIHRoZSBpbnB1dCBzZWxlY3Rpb24gcmFuZ2VzIGJlZm9yZS9hZnRlciByZWNvbmNpbGlhdGlvbi5cbiAqICAgUmVzdG9yaW5nIHNlbGVjdGlvbiBldmVuIGluIHRoZSBldmVudCBvZiBhbiB1bmV4cGVjdGVkIGVycm9yLlxuICogLSBEZWFjdGl2YXRpbmcgZXZlbnRzIHdoaWxlIHJlYXJyYW5naW5nIHRoZSBET00sIHByZXZlbnRpbmcgYmx1cnMvZm9jdXNlcyxcbiAqICAgd2hpbGUgZ3VhcmFudGVlaW5nIHRoYXQgYWZ0ZXJ3YXJkcywgdGhlIGV2ZW50IHN5c3RlbSBpcyByZWFjdGl2YXRlZC5cbiAqIC0gRmx1c2hpbmcgYSBxdWV1ZSBvZiBjb2xsZWN0ZWQgRE9NIG11dGF0aW9ucyB0byB0aGUgbWFpbiBVSSB0aHJlYWQgYWZ0ZXIgYVxuICogICByZWNvbmNpbGlhdGlvbiB0YWtlcyBwbGFjZSBpbiBhIHdvcmtlciB0aHJlYWQuXG4gKiAtIEludm9raW5nIGFueSBjb2xsZWN0ZWQgYGNvbXBvbmVudERpZFVwZGF0ZWAgY2FsbGJhY2tzIGFmdGVyIHJlbmRlcmluZyBuZXdcbiAqICAgY29udGVudC5cbiAqIC0gKEZ1dHVyZSB1c2UgY2FzZSk6IFdyYXBwaW5nIHBhcnRpY3VsYXIgZmx1c2hlcyBvZiB0aGUgYFJlYWN0V29ya2VyYCBxdWV1ZVxuICogICB0byBwcmVzZXJ2ZSB0aGUgYHNjcm9sbFRvcGAgKGFuIGF1dG9tYXRpYyBzY3JvbGwgYXdhcmUgRE9NKS5cbiAqIC0gKEZ1dHVyZSB1c2UgY2FzZSk6IExheW91dCBjYWxjdWxhdGlvbnMgYmVmb3JlIGFuZCBhZnRlciBET00gdXBkYXRlcy5cbiAqXG4gKiBUcmFuc2FjdGlvbmFsIHBsdWdpbiBBUEk6XG4gKiAtIEEgbW9kdWxlIHRoYXQgaGFzIGFuIGBpbml0aWFsaXplYCBtZXRob2QgdGhhdCByZXR1cm5zIGFueSBwcmVjb21wdXRhdGlvbi5cbiAqIC0gYW5kIGEgYGNsb3NlYCBtZXRob2QgdGhhdCBhY2NlcHRzIHRoZSBwcmVjb21wdXRhdGlvbi4gYGNsb3NlYCBpcyBpbnZva2VkXG4gKiAgIHdoZW4gdGhlIHdyYXBwZWQgcHJvY2VzcyBpcyBjb21wbGV0ZWQsIG9yIGhhcyBmYWlsZWQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxUcmFuc2FjdGlvbmFsV3JhcHBlcj59IHRyYW5zYWN0aW9uV3JhcHBlciBXcmFwcGVyIG1vZHVsZXNcbiAqIHRoYXQgaW1wbGVtZW50IGBpbml0aWFsaXplYCBhbmQgYGNsb3NlYC5cbiAqIEByZXR1cm4ge1RyYW5zYWN0aW9ufSBTaW5nbGUgdHJhbnNhY3Rpb24gZm9yIHJldXNlIGluIHRocmVhZC5cbiAqXG4gKiBAY2xhc3MgVHJhbnNhY3Rpb25cbiAqL1xudmFyIE1peGluID0ge1xuICAvKipcbiAgICogU2V0cyB1cCB0aGlzIGluc3RhbmNlIHNvIHRoYXQgaXQgaXMgcHJlcGFyZWQgZm9yIGNvbGxlY3RpbmcgbWV0cmljcy4gRG9lc1xuICAgKiBzbyBzdWNoIHRoYXQgdGhpcyBzZXR1cCBtZXRob2QgbWF5IGJlIHVzZWQgb24gYW4gaW5zdGFuY2UgdGhhdCBpcyBhbHJlYWR5XG4gICAqIGluaXRpYWxpemVkLCBpbiBhIHdheSB0aGF0IGRvZXMgbm90IGNvbnN1bWUgYWRkaXRpb25hbCBtZW1vcnkgdXBvbiByZXVzZS5cbiAgICogVGhhdCBjYW4gYmUgdXNlZnVsIGlmIHlvdSBkZWNpZGUgdG8gbWFrZSB5b3VyIHN1YmNsYXNzIG9mIHRoaXMgbWl4aW4gYVxuICAgKiBcIlBvb2xlZENsYXNzXCIuXG4gICAqL1xuICByZWluaXRpYWxpemVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMuZ2V0VHJhbnNhY3Rpb25XcmFwcGVycygpO1xuICAgIGlmICh0aGlzLndyYXBwZXJJbml0RGF0YSkge1xuICAgICAgdGhpcy53cmFwcGVySW5pdERhdGEubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53cmFwcGVySW5pdERhdGEgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5faXNJblRyYW5zYWN0aW9uID0gZmFsc2U7XG4gIH0sXG5cbiAgX2lzSW5UcmFuc2FjdGlvbjogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtBcnJheTxUcmFuc2FjdGlvbldyYXBwZXI+fSBBcnJheSBvZiB0cmFuc2FjdGlvbiB3cmFwcGVycy5cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IG51bGwsXG5cbiAgaXNJblRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5faXNJblRyYW5zYWN0aW9uO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyB0aGUgZnVuY3Rpb24gd2l0aGluIGEgc2FmZXR5IHdpbmRvdy4gVXNlIHRoaXMgZm9yIHRoZSB0b3AgbGV2ZWxcbiAgICogbWV0aG9kcyB0aGF0IHJlc3VsdCBpbiBsYXJnZSBhbW91bnRzIG9mIGNvbXB1dGF0aW9uL211dGF0aW9ucyB0aGF0IHdvdWxkXG4gICAqIG5lZWQgdG8gYmUgc2FmZXR5IGNoZWNrZWQuIFRoZSBvcHRpb25hbCBhcmd1bWVudHMgaGVscHMgcHJldmVudCB0aGUgbmVlZFxuICAgKiB0byBiaW5kIGluIG1hbnkgY2FzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZW1iZXIgb2Ygc2NvcGUgdG8gY2FsbC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHNjb3BlIFNjb3BlIHRvIGludm9rZSBmcm9tLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBhIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gYiBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGMgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBkIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gZSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGYgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKlxuICAgKiBAcmV0dXJuIHsqfSBSZXR1cm4gdmFsdWUgZnJvbSBgbWV0aG9kYC5cbiAgICovXG4gIHBlcmZvcm06IGZ1bmN0aW9uIChtZXRob2QsIHNjb3BlLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgISF0aGlzLmlzSW5UcmFuc2FjdGlvbigpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyYW5zYWN0aW9uLnBlcmZvcm0oLi4uKTogQ2Fubm90IGluaXRpYWxpemUgYSB0cmFuc2FjdGlvbiB3aGVuIHRoZXJlICcgKyAnaXMgYWxyZWFkeSBhbiBvdXRzdGFuZGluZyB0cmFuc2FjdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGVycm9yVGhyb3duO1xuICAgIHZhciByZXQ7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoXG4gICAgICAvLyBlcnJvclRocm93biBzZXQgdG8gdHJ1ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBmYWxzZSBhZnRlciBjYWxsaW5nXG4gICAgICAvLyBjbG9zZSAtLSBpZiBpdCdzIHN0aWxsIHNldCB0byB0cnVlIGluIHRoZSBmaW5hbGx5IGJsb2NrLCBpdCBtZWFuc1xuICAgICAgLy8gb25lIG9mIHRoZXNlIGNhbGxzIHRocmV3LlxuICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdGhpcy5pbml0aWFsaXplQWxsKDApO1xuICAgICAgcmV0ID0gbWV0aG9kLmNhbGwoc2NvcGUsIGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgLy8gSWYgYG1ldGhvZGAgdGhyb3dzLCBwcmVmZXIgdG8gc2hvdyB0aGF0IHN0YWNrIHRyYWNlIG92ZXIgYW55IHRocm93blxuICAgICAgICAgIC8vIGJ5IGludm9raW5nIGBjbG9zZUFsbGAuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGwoMCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpbmNlIGBtZXRob2RgIGRpZG4ndCB0aHJvdywgd2UgZG9uJ3Qgd2FudCB0byBzaWxlbmNlIHRoZSBleGNlcHRpb25cbiAgICAgICAgICAvLyBoZXJlLlxuICAgICAgICAgIHRoaXMuY2xvc2VBbGwoMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9LFxuXG4gIGluaXRpYWxpemVBbGw6IGZ1bmN0aW9uIChzdGFydEluZGV4KSB7XG4gICAgdmFyIHRyYW5zYWN0aW9uV3JhcHBlcnMgPSB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnM7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPCB0cmFuc2FjdGlvbldyYXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgd3JhcHBlciA9IHRyYW5zYWN0aW9uV3JhcHBlcnNbaV07XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoIHRoZVxuICAgICAgICAvLyBPQlNFUlZFRF9FUlJPUiBzdGF0ZSBiZWZvcmUgb3ZlcndyaXRpbmcgaXQgd2l0aCB0aGUgcmVhbCByZXR1cm4gdmFsdWVcbiAgICAgICAgLy8gb2YgaW5pdGlhbGl6ZSAtLSBpZiBpdCdzIHN0aWxsIHNldCB0byBPQlNFUlZFRF9FUlJPUiBpbiB0aGUgZmluYWxseVxuICAgICAgICAvLyBibG9jaywgaXQgbWVhbnMgd3JhcHBlci5pbml0aWFsaXplIHRocmV3LlxuICAgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SO1xuICAgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9IHdyYXBwZXIuaW5pdGlhbGl6ZSA/IHdyYXBwZXIuaW5pdGlhbGl6ZS5jYWxsKHRoaXMpIDogbnVsbDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmICh0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9PT0gVHJhbnNhY3Rpb24uT0JTRVJWRURfRVJST1IpIHtcbiAgICAgICAgICAvLyBUaGUgaW5pdGlhbGl6ZXIgZm9yIHdyYXBwZXIgaSB0aHJldyBhbiBlcnJvcjsgaW5pdGlhbGl6ZSB0aGVcbiAgICAgICAgICAvLyByZW1haW5pbmcgd3JhcHBlcnMgYnV0IHNpbGVuY2UgYW55IGV4Y2VwdGlvbnMgZnJvbSB0aGVtIHRvIGVuc3VyZVxuICAgICAgICAgIC8vIHRoYXQgdGhlIGZpcnN0IGVycm9yIGlzIHRoZSBvbmUgdG8gYnViYmxlIHVwLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVBbGwoaSArIDEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlcyBlYWNoIG9mIGB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnMuY2xvc2VbaV1gIGZ1bmN0aW9ucywgcGFzc2luZyBpbnRvXG4gICAqIHRoZW0gdGhlIHJlc3BlY3RpdmUgcmV0dXJuIHZhbHVlcyBvZiBgdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzLmluaXRbaV1gXG4gICAqIChgY2xvc2VgcnMgdGhhdCBjb3JyZXNwb25kIHRvIGluaXRpYWxpemVycyB0aGF0IGZhaWxlZCB3aWxsIG5vdCBiZVxuICAgKiBpbnZva2VkKS5cbiAgICovXG4gIGNsb3NlQWxsOiBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgICF0aGlzLmlzSW5UcmFuc2FjdGlvbigpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyYW5zYWN0aW9uLmNsb3NlQWxsKCk6IENhbm5vdCBjbG9zZSB0cmFuc2FjdGlvbiB3aGVuIG5vbmUgYXJlIG9wZW4uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciB0cmFuc2FjdGlvbldyYXBwZXJzID0gdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdyYXBwZXIgPSB0cmFuc2FjdGlvbldyYXBwZXJzW2ldO1xuICAgICAgdmFyIGluaXREYXRhID0gdGhpcy53cmFwcGVySW5pdERhdGFbaV07XG4gICAgICB2YXIgZXJyb3JUaHJvd247XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoXG4gICAgICAgIC8vIGVycm9yVGhyb3duIHNldCB0byB0cnVlIGJlZm9yZSBzZXR0aW5nIGl0IHRvIGZhbHNlIGFmdGVyIGNhbGxpbmdcbiAgICAgICAgLy8gY2xvc2UgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gdHJ1ZSBpbiB0aGUgZmluYWxseSBibG9jaywgaXQgbWVhbnNcbiAgICAgICAgLy8gd3JhcHBlci5jbG9zZSB0aHJldy5cbiAgICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICBpZiAoaW5pdERhdGEgIT09IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SICYmIHdyYXBwZXIuY2xvc2UpIHtcbiAgICAgICAgICB3cmFwcGVyLmNsb3NlLmNhbGwodGhpcywgaW5pdERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAvLyBUaGUgY2xvc2VyIGZvciB3cmFwcGVyIGkgdGhyZXcgYW4gZXJyb3I7IGNsb3NlIHRoZSByZW1haW5pbmdcbiAgICAgICAgICAvLyB3cmFwcGVycyBidXQgc2lsZW5jZSBhbnkgZXhjZXB0aW9ucyBmcm9tIHRoZW0gdG8gZW5zdXJlIHRoYXQgdGhlXG4gICAgICAgICAgLy8gZmlyc3QgZXJyb3IgaXMgdGhlIG9uZSB0byBidWJibGUgdXAuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGwoaSArIDEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy53cmFwcGVySW5pdERhdGEubGVuZ3RoID0gMDtcbiAgfVxufTtcblxudmFyIFRyYW5zYWN0aW9uID0ge1xuXG4gIE1peGluOiBNaXhpbixcblxuICAvKipcbiAgICogVG9rZW4gdG8gbG9vayBmb3IgdG8gZGV0ZXJtaW5lIGlmIGFuIGVycm9yIG9jY3VycmVkLlxuICAgKi9cbiAgT0JTRVJWRURfRVJST1I6IHt9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFZpZXdwb3J0TWV0cmljc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFZpZXdwb3J0TWV0cmljcyA9IHtcblxuICBjdXJyZW50U2Nyb2xsTGVmdDogMCxcblxuICBjdXJyZW50U2Nyb2xsVG9wOiAwLFxuXG4gIHJlZnJlc2hTY3JvbGxWYWx1ZXM6IGZ1bmN0aW9uIChzY3JvbGxQb3NpdGlvbikge1xuICAgIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsTGVmdCA9IHNjcm9sbFBvc2l0aW9uLng7XG4gICAgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxUb3AgPSBzY3JvbGxQb3NpdGlvbi55O1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVmlld3BvcnRNZXRyaWNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBhY2N1bXVsYXRlSW50b1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqXG4gKiBBY2N1bXVsYXRlcyBpdGVtcyB0aGF0IG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGludG8gdGhlIGZpcnN0IG9uZS4gVGhpc1xuICogaXMgdXNlZCB0byBjb25zZXJ2ZSBtZW1vcnkgYnkgYXZvaWRpbmcgYXJyYXkgYWxsb2NhdGlvbnMsIGFuZCB0aHVzIHNhY3JpZmljZXNcbiAqIEFQSSBjbGVhbm5lc3MuIFNpbmNlIGBjdXJyZW50YCBjYW4gYmUgbnVsbCBiZWZvcmUgYmVpbmcgcGFzc2VkIGluIGFuZCBub3RcbiAqIG51bGwgYWZ0ZXIgdGhpcyBmdW5jdGlvbiwgbWFrZSBzdXJlIHRvIGFzc2lnbiBpdCBiYWNrIHRvIGBjdXJyZW50YDpcbiAqXG4gKiBgYSA9IGFjY3VtdWxhdGVJbnRvKGEsIGIpO2BcbiAqXG4gKiBUaGlzIEFQSSBzaG91bGQgYmUgc3BhcmluZ2x5IHVzZWQuIFRyeSBgYWNjdW11bGF0ZWAgZm9yIHNvbWV0aGluZyBjbGVhbmVyLlxuICpcbiAqIEByZXR1cm4geyp8YXJyYXk8Kj59IEFuIGFjY3VtdWxhdGlvbiBvZiBpdGVtcy5cbiAqL1xuXG5mdW5jdGlvbiBhY2N1bXVsYXRlSW50byhjdXJyZW50LCBuZXh0KSB7XG4gICEobmV4dCAhPSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdhY2N1bXVsYXRlSW50byguLi4pOiBBY2N1bXVsYXRlZCBpdGVtcyBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIC8vIEJvdGggYXJlIG5vdCBlbXB0eS4gV2FybmluZzogTmV2ZXIgY2FsbCB4LmNvbmNhdCh5KSB3aGVuIHlvdSBhcmUgbm90XG4gIC8vIGNlcnRhaW4gdGhhdCB4IGlzIGFuIEFycmF5ICh4IGNvdWxkIGJlIGEgc3RyaW5nIHdpdGggY29uY2F0IG1ldGhvZCkuXG4gIHZhciBjdXJyZW50SXNBcnJheSA9IEFycmF5LmlzQXJyYXkoY3VycmVudCk7XG4gIHZhciBuZXh0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkobmV4dCk7XG5cbiAgaWYgKGN1cnJlbnRJc0FycmF5ICYmIG5leHRJc0FycmF5KSB7XG4gICAgY3VycmVudC5wdXNoLmFwcGx5KGN1cnJlbnQsIG5leHQpO1xuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgaWYgKGN1cnJlbnRJc0FycmF5KSB7XG4gICAgY3VycmVudC5wdXNoKG5leHQpO1xuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgaWYgKG5leHRJc0FycmF5KSB7XG4gICAgLy8gQSBiaXQgdG9vIGRhbmdlcm91cyB0byBtdXRhdGUgYG5leHRgLlxuICAgIHJldHVybiBbY3VycmVudF0uY29uY2F0KG5leHQpO1xuICB9XG5cbiAgcmV0dXJuIFtjdXJyZW50LCBuZXh0XTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhY2N1bXVsYXRlSW50bzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgYWRsZXIzMlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIE1PRCA9IDY1NTIxO1xuXG4vLyBhZGxlcjMyIGlzIG5vdCBjcnlwdG9ncmFwaGljYWxseSBzdHJvbmcsIGFuZCBpcyBvbmx5IHVzZWQgdG8gc2FuaXR5IGNoZWNrIHRoYXRcbi8vIG1hcmt1cCBnZW5lcmF0ZWQgb24gdGhlIHNlcnZlciBtYXRjaGVzIHRoZSBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSBjbGllbnQuXG4vLyBUaGlzIGltcGxlbWVudGF0aW9uIChhIG1vZGlmaWVkIHZlcnNpb24gb2YgdGhlIFNoZWV0SlMgdmVyc2lvbikgaGFzIGJlZW4gb3B0aW1pemVkXG4vLyBmb3Igb3VyIHVzZSBjYXNlLCBhdCB0aGUgZXhwZW5zZSBvZiBjb25mb3JtaW5nIHRvIHRoZSBhZGxlcjMyIHNwZWNpZmljYXRpb25cbi8vIGZvciBub24tYXNjaWkgaW5wdXRzLlxuZnVuY3Rpb24gYWRsZXIzMihkYXRhKSB7XG4gIHZhciBhID0gMTtcbiAgdmFyIGIgPSAwO1xuICB2YXIgaSA9IDA7XG4gIHZhciBsID0gZGF0YS5sZW5ndGg7XG4gIHZhciBtID0gbCAmIH4weDM7XG4gIHdoaWxlIChpIDwgbSkge1xuICAgIGZvciAoOyBpIDwgTWF0aC5taW4oaSArIDQwOTYsIG0pOyBpICs9IDQpIHtcbiAgICAgIGIgKz0gKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkpKSArIChhICs9IGRhdGEuY2hhckNvZGVBdChpICsgMSkpICsgKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkgKyAyKSkgKyAoYSArPSBkYXRhLmNoYXJDb2RlQXQoaSArIDMpKTtcbiAgICB9XG4gICAgYSAlPSBNT0Q7XG4gICAgYiAlPSBNT0Q7XG4gIH1cbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBiICs9IGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIGEgJT0gTU9EO1xuICBiICU9IE1PRDtcbiAgcmV0dXJuIGEgfCBiIDw8IDE2O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFkbGVyMzI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNhbkRlZmluZVByb3BlcnR5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSBmYWxzZTtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHRyeSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAneCcsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7fSB9KTtcbiAgICBjYW5EZWZpbmVQcm9wZXJ0eSA9IHRydWU7XG4gIH0gY2F0Y2ggKHgpIHtcbiAgICAvLyBJRSB3aWxsIGZhaWwgb24gZGVmaW5lUHJvcGVydHlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbkRlZmluZVByb3BlcnR5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBkYW5nZXJvdXNTdHlsZVZhbHVlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENTU1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eScpO1xuXG52YXIgaXNVbml0bGVzc051bWJlciA9IENTU1Byb3BlcnR5LmlzVW5pdGxlc3NOdW1iZXI7XG5cbi8qKlxuICogQ29udmVydCBhIHZhbHVlIGludG8gdGhlIHByb3BlciBjc3Mgd3JpdGFibGUgdmFsdWUuIFRoZSBzdHlsZSBuYW1lIGBuYW1lYFxuICogc2hvdWxkIGJlIGxvZ2ljYWwgKG5vIGh5cGhlbnMpLCBhcyBzcGVjaWZpZWRcbiAqIGluIGBDU1NQcm9wZXJ0eS5pc1VuaXRsZXNzTnVtYmVyYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBDU1MgcHJvcGVydHkgbmFtZSBzdWNoIGFzIGB0b3BNYXJnaW5gLlxuICogQHBhcmFtIHsqfSB2YWx1ZSBDU1MgcHJvcGVydHkgdmFsdWUgc3VjaCBhcyBgMTBweGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5vcm1hbGl6ZWQgc3R5bGUgdmFsdWUgd2l0aCBkaW1lbnNpb25zIGFwcGxpZWQuXG4gKi9cbmZ1bmN0aW9uIGRhbmdlcm91c1N0eWxlVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgLy8gTm90ZSB0aGF0IHdlJ3ZlIHJlbW92ZWQgZXNjYXBlVGV4dEZvckJyb3dzZXIoKSBjYWxscyBoZXJlIHNpbmNlIHRoZVxuICAvLyB3aG9sZSBzdHJpbmcgd2lsbCBiZSBlc2NhcGVkIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBpbmplY3RlZCBpbnRvXG4gIC8vIHRoZSBtYXJrdXAuIElmIHlvdSBwcm92aWRlIHVuc2FmZSB1c2VyIGRhdGEgaGVyZSB0aGV5IGNhbiBpbmplY3RcbiAgLy8gYXJiaXRyYXJ5IENTUyB3aGljaCBtYXkgYmUgcHJvYmxlbWF0aWMgKEkgY291bGRuJ3QgcmVwcm8gdGhpcyk6XG4gIC8vIGh0dHBzOi8vd3d3Lm93YXNwLm9yZy9pbmRleC5waHAvWFNTX0ZpbHRlcl9FdmFzaW9uX0NoZWF0X1NoZWV0XG4gIC8vIGh0dHA6Ly93d3cudGhlc3Bhbm5lci5jby51ay8yMDA3LzExLzI2L3VsdGltYXRlLXhzcy1jc3MtaW5qZWN0aW9uL1xuICAvLyBUaGlzIGlzIG5vdCBhbiBYU1MgaG9sZSBidXQgaW5zdGVhZCBhIHBvdGVudGlhbCBDU1MgaW5qZWN0aW9uIGlzc3VlXG4gIC8vIHdoaWNoIGhhcyBsZWFkIHRvIGEgZ3JlYXRlciBkaXNjdXNzaW9uIGFib3V0IGhvdyB3ZSdyZSBnb2luZyB0b1xuICAvLyB0cnVzdCBVUkxzIG1vdmluZyBmb3J3YXJkLiBTZWUgIzIxMTU5MDFcblxuICB2YXIgaXNFbXB0eSA9IHZhbHVlID09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfHwgdmFsdWUgPT09ICcnO1xuICBpZiAoaXNFbXB0eSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHZhciBpc05vbk51bWVyaWMgPSBpc05hTih2YWx1ZSk7XG4gIGlmIChpc05vbk51bWVyaWMgfHwgdmFsdWUgPT09IDAgfHwgaXNVbml0bGVzc051bWJlci5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBpc1VuaXRsZXNzTnVtYmVyW25hbWVdKSB7XG4gICAgcmV0dXJuICcnICsgdmFsdWU7IC8vIGNhc3QgdG8gc3RyaW5nXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICB9XG4gIHJldHVybiB2YWx1ZSArICdweCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZGVwcmVjYXRlZFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogVGhpcyB3aWxsIGxvZyBhIHNpbmdsZSBkZXByZWNhdGlvbiBub3RpY2UgcGVyIGZ1bmN0aW9uIGFuZCBmb3J3YXJkIHRoZSBjYWxsXG4gKiBvbiB0byB0aGUgbmV3IEFQSS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IG5ld01vZHVsZSBUaGUgbW9kdWxlIHRoYXQgZm4gd2lsbCBleGlzdCBpblxuICogQHBhcmFtIHtzdHJpbmd9IG5ld1BhY2thZ2UgVGhlIG1vZHVsZSB0aGF0IGZuIHdpbGwgZXhpc3QgaW5cbiAqIEBwYXJhbSB7Kn0gY3R4IFRoZSBjb250ZXh0IHRoaXMgZm9yd2FyZGVkIGNhbGwgc2hvdWxkIHJ1biBpblxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGZvcndhcmQgb24gdG9cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgZnVuY3Rpb24gdGhhdCB3aWxsIHdhcm4gb25jZSBhbmQgdGhlbiBjYWxsIGZuXG4gKi9cbmZ1bmN0aW9uIGRlcHJlY2F0ZWQoZm5OYW1lLCBuZXdNb2R1bGUsIG5ld1BhY2thZ2UsIGN0eCwgZm4pIHtcbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBuZXdGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHdhcm5lZCxcbiAgICAgIC8vIFJlcXVpcmUgZXhhbXBsZXMgaW4gdGhpcyBzdHJpbmcgbXVzdCBiZSBzcGxpdCB0byBwcmV2ZW50IFJlYWN0J3NcbiAgICAgIC8vIGJ1aWxkIHRvb2xzIGZyb20gbWlzdGFraW5nIHRoZW0gZm9yIHJlYWwgcmVxdWlyZXMuXG4gICAgICAvLyBPdGhlcndpc2UgdGhlIGJ1aWxkIHRvb2xzIHdpbGwgYXR0ZW1wdCB0byBidWlsZCBhICclcycgbW9kdWxlLlxuICAgICAgJ1JlYWN0LiVzIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJXMuJXMgZnJvbSByZXF1aXJlJyArICcoXFwnJXNcXCcpICcgKyAnaW5zdGVhZC4nLCBmbk5hbWUsIG5ld01vZHVsZSwgZm5OYW1lLCBuZXdQYWNrYWdlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgICByZXR1cm4gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUgYWxsIHByb3BlcnRpZXMgb2YgdGhlIG9yaWdpbmFsIGZuIGFyZSBjb3BpZWQgb3Zlci5cbiAgICAvLyBJbiBwYXJ0aWN1bGFyLCB0aGlzIGlzIG5lZWRlZCB0byBzdXBwb3J0IFByb3BUeXBlc1xuICAgIHJldHVybiBhc3NpZ24obmV3Rm4sIGZuKTtcbiAgfVxuXG4gIHJldHVybiBmbjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGVkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFU0NBUEVfTE9PS1VQID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc+JzogJyZndDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gICdcXCcnOiAnJiN4Mjc7J1xufTtcblxudmFyIEVTQ0FQRV9SRUdFWCA9IC9bJj48XCInXS9nO1xuXG5mdW5jdGlvbiBlc2NhcGVyKG1hdGNoKSB7XG4gIHJldHVybiBFU0NBUEVfTE9PS1VQW21hdGNoXTtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIHRleHQgdG8gcHJldmVudCBzY3JpcHRpbmcgYXR0YWNrcy5cbiAqXG4gKiBAcGFyYW0geyp9IHRleHQgVGV4dCB2YWx1ZSB0byBlc2NhcGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIGVzY2FwZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZShFU0NBUEVfUkVHRVgsIGVzY2FwZXIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZmluZERPTU5vZGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR8RE9NRWxlbWVudH0gY29tcG9uZW50T3JFbGVtZW50XG4gKiBAcmV0dXJuIHs/RE9NRWxlbWVudH0gVGhlIHJvb3Qgbm9kZSBvZiB0aGlzIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRET01Ob2RlKGNvbXBvbmVudE9yRWxlbWVudCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG4gICAgaWYgKG93bmVyICE9PSBudWxsKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIsICclcyBpcyBhY2Nlc3NpbmcgZ2V0RE9NTm9kZSBvciBmaW5kRE9NTm9kZSBpbnNpZGUgaXRzIHJlbmRlcigpLiAnICsgJ3JlbmRlcigpIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gb2YgcHJvcHMgYW5kIHN0YXRlLiBJdCBzaG91bGQgJyArICduZXZlciBhY2Nlc3Mgc29tZXRoaW5nIHRoYXQgcmVxdWlyZXMgc3RhbGUgZGF0YSBmcm9tIHRoZSBwcmV2aW91cyAnICsgJ3JlbmRlciwgc3VjaCBhcyByZWZzLiBNb3ZlIHRoaXMgbG9naWMgdG8gY29tcG9uZW50RGlkTW91bnQgYW5kICcgKyAnY29tcG9uZW50RGlkVXBkYXRlIGluc3RlYWQuJywgb3duZXIuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgb3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGNvbXBvbmVudE9yRWxlbWVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGNvbXBvbmVudE9yRWxlbWVudC5ub2RlVHlwZSA9PT0gMSkge1xuICAgIHJldHVybiBjb21wb25lbnRPckVsZW1lbnQ7XG4gIH1cbiAgaWYgKFJlYWN0SW5zdGFuY2VNYXAuaGFzKGNvbXBvbmVudE9yRWxlbWVudCkpIHtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5nZXROb2RlRnJvbUluc3RhbmNlKGNvbXBvbmVudE9yRWxlbWVudCk7XG4gIH1cbiAgIShjb21wb25lbnRPckVsZW1lbnQucmVuZGVyID09IG51bGwgfHwgdHlwZW9mIGNvbXBvbmVudE9yRWxlbWVudC5yZW5kZXIgIT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRET01Ob2RlIHdhcyBjYWxsZWQgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbGVtZW50IGFwcGVhcnMgdG8gYmUgbmVpdGhlciBSZWFjdENvbXBvbmVudCBub3IgRE9NTm9kZSAoa2V5czogJXMpJywgT2JqZWN0LmtleXMoY29tcG9uZW50T3JFbGVtZW50KSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZpbmRET01Ob2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBmbGF0dGVuQ2hpbGRyZW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB0cmF2ZXJzZUFsbENoaWxkcmVuID0gcmVxdWlyZSgnLi90cmF2ZXJzZUFsbENoaWxkcmVuJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0cmF2ZXJzZUNvbnRleHQgQ29udGV4dCBwYXNzZWQgdGhyb3VnaCB0cmF2ZXJzYWwuXG4gKiBAcGFyYW0gez9SZWFjdENvbXBvbmVudH0gY2hpbGQgUmVhY3QgY2hpbGQgY29tcG9uZW50LlxuICogQHBhcmFtIHshc3RyaW5nfSBuYW1lIFN0cmluZyBuYW1lIG9mIGtleSBwYXRoIHRvIGNoaWxkLlxuICovXG5mdW5jdGlvbiBmbGF0dGVuU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkLCBuYW1lKSB7XG4gIC8vIFdlIGZvdW5kIGEgY29tcG9uZW50IGluc3RhbmNlLlxuICB2YXIgcmVzdWx0ID0gdHJhdmVyc2VDb250ZXh0O1xuICB2YXIga2V5VW5pcXVlID0gcmVzdWx0W25hbWVdID09PSB1bmRlZmluZWQ7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoa2V5VW5pcXVlLCAnZmxhdHRlbkNoaWxkcmVuKC4uLik6IEVuY291bnRlcmVkIHR3byBjaGlsZHJlbiB3aXRoIHRoZSBzYW1lIGtleSwgJyArICdgJXNgLiBDaGlsZCBrZXlzIG11c3QgYmUgdW5pcXVlOyB3aGVuIHR3byBjaGlsZHJlbiBzaGFyZSBhIGtleSwgb25seSAnICsgJ3RoZSBmaXJzdCBjaGlsZCB3aWxsIGJlIHVzZWQuJywgbmFtZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGtleVVuaXF1ZSAmJiBjaGlsZCAhPSBudWxsKSB7XG4gICAgcmVzdWx0W25hbWVdID0gY2hpbGQ7XG4gIH1cbn1cblxuLyoqXG4gKiBGbGF0dGVucyBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAuIEFueSBudWxsXG4gKiBjaGlsZHJlbiB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIG9iamVjdC5cbiAqIEByZXR1cm4geyFvYmplY3R9IGZsYXR0ZW5lZCBjaGlsZHJlbiBrZXllZCBieSBuYW1lLlxuICovXG5mdW5jdGlvbiBmbGF0dGVuQ2hpbGRyZW4oY2hpbGRyZW4pIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHt9O1xuICB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBmbGF0dGVuU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmbGF0dGVuQ2hpbGRyZW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGZvckVhY2hBY2N1bXVsYXRlZFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW0ge2FycmF5fSBhcnIgYW4gXCJhY2N1bXVsYXRpb25cIiBvZiBpdGVtcyB3aGljaCBpcyBlaXRoZXIgYW4gQXJyYXkgb3JcbiAqIGEgc2luZ2xlIGl0ZW0uIFVzZWZ1bCB3aGVuIHBhaXJlZCB3aXRoIHRoZSBgYWNjdW11bGF0ZWAgbW9kdWxlLiBUaGlzIGlzIGFcbiAqIHNpbXBsZSB1dGlsaXR5IHRoYXQgYWxsb3dzIHVzIHRvIHJlYXNvbiBhYm91dCBhIGNvbGxlY3Rpb24gb2YgaXRlbXMsIGJ1dFxuICogaGFuZGxpbmcgdGhlIGNhc2Ugd2hlbiB0aGVyZSBpcyBleGFjdGx5IG9uZSBpdGVtIChhbmQgd2UgZG8gbm90IG5lZWQgdG9cbiAqIGFsbG9jYXRlIGFuIGFycmF5KS5cbiAqL1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IGZ1bmN0aW9uIChhcnIsIGNiLCBzY29wZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgYXJyLmZvckVhY2goY2IsIHNjb3BlKTtcbiAgfSBlbHNlIGlmIChhcnIpIHtcbiAgICBjYi5jYWxsKHNjb3BlLCBhcnIpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZvckVhY2hBY2N1bXVsYXRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRDaGFyQ29kZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogYGNoYXJDb2RlYCByZXByZXNlbnRzIHRoZSBhY3R1YWwgXCJjaGFyYWN0ZXIgY29kZVwiIGFuZCBpcyBzYWZlIHRvIHVzZSB3aXRoXG4gKiBgU3RyaW5nLmZyb21DaGFyQ29kZWAuIEFzIHN1Y2gsIG9ubHkga2V5cyB0aGF0IGNvcnJlc3BvbmQgdG8gcHJpbnRhYmxlXG4gKiBjaGFyYWN0ZXJzIHByb2R1Y2UgYSB2YWxpZCBgY2hhckNvZGVgLCB0aGUgb25seSBleGNlcHRpb24gdG8gdGhpcyBpcyBFbnRlci5cbiAqIFRoZSBUYWIta2V5IGlzIGNvbnNpZGVyZWQgbm9uLXByaW50YWJsZSBhbmQgZG9lcyBub3QgaGF2ZSBhIGBjaGFyQ29kZWAsXG4gKiBwcmVzdW1hYmx5IGJlY2F1c2UgaXQgZG9lcyBub3QgcHJvZHVjZSBhIHRhYi1jaGFyYWN0ZXIgaW4gYnJvd3NlcnMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBOb3JtYWxpemVkIGBjaGFyQ29kZWAgcHJvcGVydHkuXG4gKi9cbmZ1bmN0aW9uIGdldEV2ZW50Q2hhckNvZGUobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGNoYXJDb2RlO1xuICB2YXIga2V5Q29kZSA9IG5hdGl2ZUV2ZW50LmtleUNvZGU7XG5cbiAgaWYgKCdjaGFyQ29kZScgaW4gbmF0aXZlRXZlbnQpIHtcbiAgICBjaGFyQ29kZSA9IG5hdGl2ZUV2ZW50LmNoYXJDb2RlO1xuXG4gICAgLy8gRkYgZG9lcyBub3Qgc2V0IGBjaGFyQ29kZWAgZm9yIHRoZSBFbnRlci1rZXksIGNoZWNrIGFnYWluc3QgYGtleUNvZGVgLlxuICAgIGlmIChjaGFyQ29kZSA9PT0gMCAmJiBrZXlDb2RlID09PSAxMykge1xuICAgICAgY2hhckNvZGUgPSAxMztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSUU4IGRvZXMgbm90IGltcGxlbWVudCBgY2hhckNvZGVgLCBidXQgYGtleUNvZGVgIGhhcyB0aGUgY29ycmVjdCB2YWx1ZS5cbiAgICBjaGFyQ29kZSA9IGtleUNvZGU7XG4gIH1cblxuICAvLyBTb21lIG5vbi1wcmludGFibGUga2V5cyBhcmUgcmVwb3J0ZWQgaW4gYGNoYXJDb2RlYC9ga2V5Q29kZWAsIGRpc2NhcmQgdGhlbS5cbiAgLy8gTXVzdCBub3QgZGlzY2FyZCB0aGUgKG5vbi0pcHJpbnRhYmxlIEVudGVyLWtleS5cbiAgaWYgKGNoYXJDb2RlID49IDMyIHx8IGNoYXJDb2RlID09PSAxMykge1xuICAgIHJldHVybiBjaGFyQ29kZTtcbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50Q2hhckNvZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50S2V5XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGdldEV2ZW50Q2hhckNvZGUgPSByZXF1aXJlKCcuL2dldEV2ZW50Q2hhckNvZGUnKTtcblxuLyoqXG4gKiBOb3JtYWxpemF0aW9uIG9mIGRlcHJlY2F0ZWQgSFRNTDUgYGtleWAgdmFsdWVzXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50I0tleV9uYW1lc1xuICovXG52YXIgbm9ybWFsaXplS2V5ID0ge1xuICAnRXNjJzogJ0VzY2FwZScsXG4gICdTcGFjZWJhcic6ICcgJyxcbiAgJ0xlZnQnOiAnQXJyb3dMZWZ0JyxcbiAgJ1VwJzogJ0Fycm93VXAnLFxuICAnUmlnaHQnOiAnQXJyb3dSaWdodCcsXG4gICdEb3duJzogJ0Fycm93RG93bicsXG4gICdEZWwnOiAnRGVsZXRlJyxcbiAgJ1dpbic6ICdPUycsXG4gICdNZW51JzogJ0NvbnRleHRNZW51JyxcbiAgJ0FwcHMnOiAnQ29udGV4dE1lbnUnLFxuICAnU2Nyb2xsJzogJ1Njcm9sbExvY2snLFxuICAnTW96UHJpbnRhYmxlS2V5JzogJ1VuaWRlbnRpZmllZCdcbn07XG5cbi8qKlxuICogVHJhbnNsYXRpb24gZnJvbSBsZWdhY3kgYGtleUNvZGVgIHRvIEhUTUw1IGBrZXlgXG4gKiBPbmx5IHNwZWNpYWwga2V5cyBzdXBwb3J0ZWQsIGFsbCBvdGhlcnMgZGVwZW5kIG9uIGtleWJvYXJkIGxheW91dCBvciBicm93c2VyXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50I0tleV9uYW1lc1xuICovXG52YXIgdHJhbnNsYXRlVG9LZXkgPSB7XG4gIDg6ICdCYWNrc3BhY2UnLFxuICA5OiAnVGFiJyxcbiAgMTI6ICdDbGVhcicsXG4gIDEzOiAnRW50ZXInLFxuICAxNjogJ1NoaWZ0JyxcbiAgMTc6ICdDb250cm9sJyxcbiAgMTg6ICdBbHQnLFxuICAxOTogJ1BhdXNlJyxcbiAgMjA6ICdDYXBzTG9jaycsXG4gIDI3OiAnRXNjYXBlJyxcbiAgMzI6ICcgJyxcbiAgMzM6ICdQYWdlVXAnLFxuICAzNDogJ1BhZ2VEb3duJyxcbiAgMzU6ICdFbmQnLFxuICAzNjogJ0hvbWUnLFxuICAzNzogJ0Fycm93TGVmdCcsXG4gIDM4OiAnQXJyb3dVcCcsXG4gIDM5OiAnQXJyb3dSaWdodCcsXG4gIDQwOiAnQXJyb3dEb3duJyxcbiAgNDU6ICdJbnNlcnQnLFxuICA0NjogJ0RlbGV0ZScsXG4gIDExMjogJ0YxJywgMTEzOiAnRjInLCAxMTQ6ICdGMycsIDExNTogJ0Y0JywgMTE2OiAnRjUnLCAxMTc6ICdGNicsXG4gIDExODogJ0Y3JywgMTE5OiAnRjgnLCAxMjA6ICdGOScsIDEyMTogJ0YxMCcsIDEyMjogJ0YxMScsIDEyMzogJ0YxMicsXG4gIDE0NDogJ051bUxvY2snLFxuICAxNDU6ICdTY3JvbGxMb2NrJyxcbiAgMjI0OiAnTWV0YSdcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7c3RyaW5nfSBOb3JtYWxpemVkIGBrZXlgIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBnZXRFdmVudEtleShuYXRpdmVFdmVudCkge1xuICBpZiAobmF0aXZlRXZlbnQua2V5KSB7XG4gICAgLy8gTm9ybWFsaXplIGluY29uc2lzdGVudCB2YWx1ZXMgcmVwb3J0ZWQgYnkgYnJvd3NlcnMgZHVlIHRvXG4gICAgLy8gaW1wbGVtZW50YXRpb25zIG9mIGEgd29ya2luZyBkcmFmdCBzcGVjaWZpY2F0aW9uLlxuXG4gICAgLy8gRmlyZUZveCBpbXBsZW1lbnRzIGBrZXlgIGJ1dCByZXR1cm5zIGBNb3pQcmludGFibGVLZXlgIGZvciBhbGxcbiAgICAvLyBwcmludGFibGUgY2hhcmFjdGVycyAobm9ybWFsaXplZCB0byBgVW5pZGVudGlmaWVkYCksIGlnbm9yZSBpdC5cbiAgICB2YXIga2V5ID0gbm9ybWFsaXplS2V5W25hdGl2ZUV2ZW50LmtleV0gfHwgbmF0aXZlRXZlbnQua2V5O1xuICAgIGlmIChrZXkgIT09ICdVbmlkZW50aWZpZWQnKSB7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgfVxuXG4gIC8vIEJyb3dzZXIgZG9lcyBub3QgaW1wbGVtZW50IGBrZXlgLCBwb2x5ZmlsbCBhcyBtdWNoIG9mIGl0IGFzIHdlIGNhbi5cbiAgaWYgKG5hdGl2ZUV2ZW50LnR5cGUgPT09ICdrZXlwcmVzcycpIHtcbiAgICB2YXIgY2hhckNvZGUgPSBnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KTtcblxuICAgIC8vIFRoZSBlbnRlci1rZXkgaXMgdGVjaG5pY2FsbHkgYm90aCBwcmludGFibGUgYW5kIG5vbi1wcmludGFibGUgYW5kIGNhblxuICAgIC8vIHRodXMgYmUgY2FwdHVyZWQgYnkgYGtleXByZXNzYCwgbm8gb3RoZXIgbm9uLXByaW50YWJsZSBrZXkgc2hvdWxkLlxuICAgIHJldHVybiBjaGFyQ29kZSA9PT0gMTMgPyAnRW50ZXInIDogU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gIH1cbiAgaWYgKG5hdGl2ZUV2ZW50LnR5cGUgPT09ICdrZXlkb3duJyB8fCBuYXRpdmVFdmVudC50eXBlID09PSAna2V5dXAnKSB7XG4gICAgLy8gV2hpbGUgdXNlciBrZXlib2FyZCBsYXlvdXQgZGV0ZXJtaW5lcyB0aGUgYWN0dWFsIG1lYW5pbmcgb2YgZWFjaFxuICAgIC8vIGBrZXlDb2RlYCB2YWx1ZSwgYWxtb3N0IGFsbCBmdW5jdGlvbiBrZXlzIGhhdmUgYSB1bml2ZXJzYWwgdmFsdWUuXG4gICAgcmV0dXJuIHRyYW5zbGF0ZVRvS2V5W25hdGl2ZUV2ZW50LmtleUNvZGVdIHx8ICdVbmlkZW50aWZpZWQnO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudEtleTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRNb2RpZmllclN0YXRlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBUcmFuc2xhdGlvbiBmcm9tIG1vZGlmaWVyIGtleSB0byB0aGUgYXNzb2NpYXRlZCBwcm9wZXJ0eSBpbiB0aGUgZXZlbnQuXG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8ja2V5cy1Nb2RpZmllcnNcbiAqL1xuXG52YXIgbW9kaWZpZXJLZXlUb1Byb3AgPSB7XG4gICdBbHQnOiAnYWx0S2V5JyxcbiAgJ0NvbnRyb2wnOiAnY3RybEtleScsXG4gICdNZXRhJzogJ21ldGFLZXknLFxuICAnU2hpZnQnOiAnc2hpZnRLZXknXG59O1xuXG4vLyBJRTggZG9lcyBub3QgaW1wbGVtZW50IGdldE1vZGlmaWVyU3RhdGUgc28gd2Ugc2ltcGx5IG1hcCBpdCB0byB0aGUgb25seVxuLy8gbW9kaWZpZXIga2V5cyBleHBvc2VkIGJ5IHRoZSBldmVudCBpdHNlbGYsIGRvZXMgbm90IHN1cHBvcnQgTG9jay1rZXlzLlxuLy8gQ3VycmVudGx5LCBhbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IENocm9tZSBzZWVtcyB0byBzdXBwb3J0IExvY2sta2V5cy5cbmZ1bmN0aW9uIG1vZGlmaWVyU3RhdGVHZXR0ZXIoa2V5QXJnKSB7XG4gIHZhciBzeW50aGV0aWNFdmVudCA9IHRoaXM7XG4gIHZhciBuYXRpdmVFdmVudCA9IHN5bnRoZXRpY0V2ZW50Lm5hdGl2ZUV2ZW50O1xuICBpZiAobmF0aXZlRXZlbnQuZ2V0TW9kaWZpZXJTdGF0ZSkge1xuICAgIHJldHVybiBuYXRpdmVFdmVudC5nZXRNb2RpZmllclN0YXRlKGtleUFyZyk7XG4gIH1cbiAgdmFyIGtleVByb3AgPSBtb2RpZmllcktleVRvUHJvcFtrZXlBcmddO1xuICByZXR1cm4ga2V5UHJvcCA/ICEhbmF0aXZlRXZlbnRba2V5UHJvcF0gOiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRNb2RpZmllclN0YXRlKG5hdGl2ZUV2ZW50KSB7XG4gIHJldHVybiBtb2RpZmllclN0YXRlR2V0dGVyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50TW9kaWZpZXJTdGF0ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRUYXJnZXRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdldHMgdGhlIHRhcmdldCBub2RlIGZyb20gYSBuYXRpdmUgYnJvd3NlciBldmVudCBieSBhY2NvdW50aW5nIGZvclxuICogaW5jb25zaXN0ZW5jaWVzIGluIGJyb3dzZXIgRE9NIEFQSXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7RE9NRXZlbnRUYXJnZXR9IFRhcmdldCBub2RlLlxuICovXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkge1xuICB2YXIgdGFyZ2V0ID0gbmF0aXZlRXZlbnQudGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnNyY0VsZW1lbnQgfHwgd2luZG93O1xuICAvLyBTYWZhcmkgbWF5IGZpcmUgZXZlbnRzIG9uIHRleHQgbm9kZXMgKE5vZGUuVEVYVF9OT0RFIGlzIDMpLlxuICAvLyBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbFxuICByZXR1cm4gdGFyZ2V0Lm5vZGVUeXBlID09PSAzID8gdGFyZ2V0LnBhcmVudE5vZGUgOiB0YXJnZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRUYXJnZXQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEl0ZXJhdG9yRm5cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgU3ltYm9sICovXG52YXIgSVRFUkFUT1JfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3I7XG52YXIgRkFVWF9JVEVSQVRPUl9TWU1CT0wgPSAnQEBpdGVyYXRvcic7IC8vIEJlZm9yZSBTeW1ib2wgc3BlYy5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpdGVyYXRvciBtZXRob2QgZnVuY3Rpb24gY29udGFpbmVkIG9uIHRoZSBpdGVyYWJsZSBvYmplY3QuXG4gKlxuICogQmUgc3VyZSB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGl0ZXJhYmxlIGFzIGNvbnRleHQ6XG4gKlxuICogICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihteUl0ZXJhYmxlKTtcbiAqICAgICBpZiAoaXRlcmF0b3JGbikge1xuICogICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG15SXRlcmFibGUpO1xuICogICAgICAgLi4uXG4gKiAgICAgfVxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gbWF5YmVJdGVyYWJsZVxuICogQHJldHVybiB7P2Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHtcbiAgdmFyIGl0ZXJhdG9yRm4gPSBtYXliZUl0ZXJhYmxlICYmIChJVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtJVEVSQVRPUl9TWU1CT0xdIHx8IG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdKTtcbiAgaWYgKHR5cGVvZiBpdGVyYXRvckZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm47XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRJdGVyYXRvckZuOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdpdmVuIGFueSBub2RlIHJldHVybiB0aGUgZmlyc3QgbGVhZiBub2RlIHdpdGhvdXQgY2hpbGRyZW4uXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtET01FbGVtZW50fERPTVRleHROb2RlfVxuICovXG5mdW5jdGlvbiBnZXRMZWFmTm9kZShub2RlKSB7XG4gIHdoaWxlIChub2RlICYmIG5vZGUuZmlyc3RDaGlsZCkge1xuICAgIG5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbi8qKlxuICogR2V0IHRoZSBuZXh0IHNpYmxpbmcgd2l0aGluIGEgY29udGFpbmVyLiBUaGlzIHdpbGwgd2FsayB1cCB0aGVcbiAqIERPTSBpZiBhIG5vZGUncyBzaWJsaW5ncyBoYXZlIGJlZW4gZXhoYXVzdGVkLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHJldHVybiB7P0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9XG4gKi9cbmZ1bmN0aW9uIGdldFNpYmxpbmdOb2RlKG5vZGUpIHtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBpZiAobm9kZS5uZXh0U2libGluZykge1xuICAgICAgcmV0dXJuIG5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgb2JqZWN0IGRlc2NyaWJpbmcgdGhlIG5vZGVzIHdoaWNoIGNvbnRhaW4gY2hhcmFjdGVycyBhdCBvZmZzZXQuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSByb290XG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0XG4gKiBAcmV0dXJuIHs/b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0KHJvb3QsIG9mZnNldCkge1xuICB2YXIgbm9kZSA9IGdldExlYWZOb2RlKHJvb3QpO1xuICB2YXIgbm9kZVN0YXJ0ID0gMDtcbiAgdmFyIG5vZGVFbmQgPSAwO1xuXG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIG5vZGVFbmQgPSBub2RlU3RhcnQgKyBub2RlLnRleHRDb250ZW50Lmxlbmd0aDtcblxuICAgICAgaWYgKG5vZGVTdGFydCA8PSBvZmZzZXQgJiYgbm9kZUVuZCA+PSBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgIG9mZnNldDogb2Zmc2V0IC0gbm9kZVN0YXJ0XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG5vZGVTdGFydCA9IG5vZGVFbmQ7XG4gICAgfVxuXG4gICAgbm9kZSA9IGdldExlYWZOb2RlKGdldFNpYmxpbmdOb2RlKG5vZGUpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldFRleHRDb250ZW50QWNjZXNzb3JcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBjb250ZW50S2V5ID0gbnVsbDtcblxuLyoqXG4gKiBHZXRzIHRoZSBrZXkgdXNlZCB0byBhY2Nlc3MgdGV4dCBjb250ZW50IG9uIGEgRE9NIG5vZGUuXG4gKlxuICogQHJldHVybiB7P3N0cmluZ30gS2V5IHVzZWQgdG8gYWNjZXNzIHRleHQgY29udGVudC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXRUZXh0Q29udGVudEFjY2Vzc29yKCkge1xuICBpZiAoIWNvbnRlbnRLZXkgJiYgRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gICAgLy8gUHJlZmVyIHRleHRDb250ZW50IHRvIGlubmVyVGV4dCBiZWNhdXNlIG1hbnkgYnJvd3NlcnMgc3VwcG9ydCBib3RoIGJ1dFxuICAgIC8vIFNWRyA8dGV4dD4gZWxlbWVudHMgZG9uJ3Qgc3VwcG9ydCBpbm5lclRleHQgZXZlbiB3aGVuIDxkaXY+IGRvZXMuXG4gICAgY29udGVudEtleSA9ICd0ZXh0Q29udGVudCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ID8gJ3RleHRDb250ZW50JyA6ICdpbm5lclRleHQnO1xuICB9XG4gIHJldHVybiBjb250ZW50S2V5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFRleHRDb250ZW50QWNjZXNzb3I7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudCcpO1xudmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdE5hdGl2ZUNvbXBvbmVudCcpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLy8gVG8gYXZvaWQgYSBjeWNsaWMgZGVwZW5kZW5jeSwgd2UgY3JlYXRlIHRoZSBmaW5hbCBjbGFzcyBpbiB0aGlzIG1vZHVsZVxudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50V3JhcHBlciA9IGZ1bmN0aW9uICgpIHt9O1xuYXNzaWduKFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50V3JhcHBlci5wcm90b3R5cGUsIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50Lk1peGluLCB7XG4gIF9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50OiBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50XG59KTtcblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSB7XG4gIGlmIChvd25lcikge1xuICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHR5cGUgcmVmZXJlbmNlIGlzIGEga25vd24gaW50ZXJuYWwgdHlwZS4gSS5lLiBub3QgYSB1c2VyXG4gKiBwcm92aWRlZCBjb21wb3NpdGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0eXBlXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhpcyBpcyBhIHZhbGlkIGludGVybmFsIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGlzSW50ZXJuYWxDb21wb25lbnRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHR5cGUucHJvdG90eXBlLm1vdW50Q29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZS5yZWNlaXZlQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgUmVhY3ROb2RlLCBjcmVhdGUgYW4gaW5zdGFuY2UgdGhhdCB3aWxsIGFjdHVhbGx5IGJlIG1vdW50ZWQuXG4gKlxuICogQHBhcmFtIHtSZWFjdE5vZGV9IG5vZGVcbiAqIEByZXR1cm4ge29iamVjdH0gQSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGVsZW1lbnQncyBjb25zdHJ1Y3Rvci5cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZnVuY3Rpb24gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChub2RlKSB7XG4gIHZhciBpbnN0YW5jZTtcblxuICBpZiAobm9kZSA9PT0gbnVsbCB8fCBub2RlID09PSBmYWxzZSkge1xuICAgIGluc3RhbmNlID0gbmV3IFJlYWN0RW1wdHlDb21wb25lbnQoaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBub2RlO1xuICAgICEoZWxlbWVudCAmJiAodHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZWxlbWVudC50eXBlID09PSAnc3RyaW5nJykpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0VsZW1lbnQgdHlwZSBpcyBpbnZhbGlkOiBleHBlY3RlZCBhIHN0cmluZyAoZm9yIGJ1aWx0LWluIGNvbXBvbmVudHMpICcgKyAnb3IgYSBjbGFzcy9mdW5jdGlvbiAoZm9yIGNvbXBvc2l0ZSBjb21wb25lbnRzKSBidXQgZ290OiAlcy4lcycsIGVsZW1lbnQudHlwZSA9PSBudWxsID8gZWxlbWVudC50eXBlIDogdHlwZW9mIGVsZW1lbnQudHlwZSwgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGVsZW1lbnQuX293bmVyKSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gU3BlY2lhbCBjYXNlIHN0cmluZyB2YWx1ZXNcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGluc3RhbmNlID0gUmVhY3ROYXRpdmVDb21wb25lbnQuY3JlYXRlSW50ZXJuYWxDb21wb25lbnQoZWxlbWVudCk7XG4gICAgfSBlbHNlIGlmIChpc0ludGVybmFsQ29tcG9uZW50VHlwZShlbGVtZW50LnR5cGUpKSB7XG4gICAgICAvLyBUaGlzIGlzIHRlbXBvcmFyaWx5IGF2YWlsYWJsZSBmb3IgY3VzdG9tIGNvbXBvbmVudHMgdGhhdCBhcmUgbm90IHN0cmluZ1xuICAgICAgLy8gcmVwcmVzZW50YXRpb25zLiBJLmUuIEFSVC4gT25jZSB0aG9zZSBhcmUgdXBkYXRlZCB0byB1c2UgdGhlIHN0cmluZ1xuICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdlIGNhbiBkcm9wIHRoaXMgY29kZSBwYXRoLlxuICAgICAgaW5zdGFuY2UgPSBuZXcgZWxlbWVudC50eXBlKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZSA9IG5ldyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIoKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBub2RlID09PSAnbnVtYmVyJykge1xuICAgIGluc3RhbmNlID0gUmVhY3ROYXRpdmVDb21wb25lbnQuY3JlYXRlSW5zdGFuY2VGb3JUZXh0KG5vZGUpO1xuICB9IGVsc2Uge1xuICAgICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbmNvdW50ZXJlZCBpbnZhbGlkIFJlYWN0IG5vZGUgb2YgdHlwZSAlcycsIHR5cGVvZiBub2RlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0YW5jZS5jb25zdHJ1Y3QgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGluc3RhbmNlLm1vdW50Q29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS5yZWNlaXZlQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS51bm1vdW50Q29tcG9uZW50ID09PSAnZnVuY3Rpb24nLCAnT25seSBSZWFjdCBDb21wb25lbnRzIGNhbiBiZSBtb3VudGVkLicpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgLy8gU2V0cyB1cCB0aGUgaW5zdGFuY2UuIFRoaXMgY2FuIHByb2JhYmx5IGp1c3QgbW92ZSBpbnRvIHRoZSBjb25zdHJ1Y3RvciBub3cuXG4gIGluc3RhbmNlLmNvbnN0cnVjdChub2RlKTtcblxuICAvLyBUaGVzZSB0d28gZmllbGRzIGFyZSB1c2VkIGJ5IHRoZSBET00gYW5kIEFSVCBkaWZmaW5nIGFsZ29yaXRobXNcbiAgLy8gcmVzcGVjdGl2ZWx5LiBJbnN0ZWFkIG9mIHVzaW5nIGV4cGFuZG9zIG9uIGNvbXBvbmVudHMsIHdlIHNob3VsZCBiZVxuICAvLyBzdG9yaW5nIHRoZSBzdGF0ZSBuZWVkZWQgYnkgdGhlIGRpZmZpbmcgYWxnb3JpdGhtcyBlbHNld2hlcmUuXG4gIGluc3RhbmNlLl9tb3VudEluZGV4ID0gMDtcbiAgaW5zdGFuY2UuX21vdW50SW1hZ2UgPSBudWxsO1xuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaW5zdGFuY2UuX2lzT3duZXJOZWNlc3NhcnkgPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIEludGVybmFsIGluc3RhbmNlcyBzaG91bGQgZnVsbHkgY29uc3RydWN0ZWQgYXQgdGhpcyBwb2ludCwgc28gdGhleSBzaG91bGRcbiAgLy8gbm90IGdldCBhbnkgbmV3IGZpZWxkcyBhZGRlZCB0byB0aGVtIGF0IHRoaXMgcG9pbnQuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucykge1xuICAgICAgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKGluc3RhbmNlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNFdmVudFN1cHBvcnRlZFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIHVzZUhhc0ZlYXR1cmU7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIHVzZUhhc0ZlYXR1cmUgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbiAmJiBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlICYmXG4gIC8vIGFsd2F5cyByZXR1cm5zIHRydWUgaW4gbmV3ZXIgYnJvd3NlcnMgYXMgcGVyIHRoZSBzdGFuZGFyZC5cbiAgLy8gQHNlZSBodHRwOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWRvbWltcGxlbWVudGF0aW9uLWhhc2ZlYXR1cmVcbiAgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnJywgJycpICE9PSB0cnVlO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhbiBldmVudCBpcyBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgZXhlY3V0aW9uIGVudmlyb25tZW50LlxuICpcbiAqIE5PVEU6IFRoaXMgd2lsbCBub3Qgd29yayBjb3JyZWN0bHkgZm9yIG5vbi1nZW5lcmljIGV2ZW50cyBzdWNoIGFzIGBjaGFuZ2VgLFxuICogYHJlc2V0YCwgYGxvYWRgLCBgZXJyb3JgLCBhbmQgYHNlbGVjdGAuXG4gKlxuICogQm9ycm93cyBmcm9tIE1vZGVybml6ci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lU3VmZml4IEV2ZW50IG5hbWUsIGUuZy4gXCJjbGlja1wiLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gY2FwdHVyZSBDaGVjayBpZiB0aGUgY2FwdHVyZSBwaGFzZSBpcyBzdXBwb3J0ZWQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBzdXBwb3J0ZWQuXG4gKiBAaW50ZXJuYWxcbiAqIEBsaWNlbnNlIE1vZGVybml6ciAzLjAuMHByZSAoQ3VzdG9tIEJ1aWxkKSB8IE1JVFxuICovXG5mdW5jdGlvbiBpc0V2ZW50U3VwcG9ydGVkKGV2ZW50TmFtZVN1ZmZpeCwgY2FwdHVyZSkge1xuICBpZiAoIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSB8fCBjYXB0dXJlICYmICEoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGRvY3VtZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBldmVudE5hbWUgPSAnb24nICsgZXZlbnROYW1lU3VmZml4O1xuICB2YXIgaXNTdXBwb3J0ZWQgPSAoZXZlbnROYW1lIGluIGRvY3VtZW50KTtcblxuICBpZiAoIWlzU3VwcG9ydGVkKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShldmVudE5hbWUsICdyZXR1cm47Jyk7XG4gICAgaXNTdXBwb3J0ZWQgPSB0eXBlb2YgZWxlbWVudFtldmVudE5hbWVdID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgaWYgKCFpc1N1cHBvcnRlZCAmJiB1c2VIYXNGZWF0dXJlICYmIGV2ZW50TmFtZVN1ZmZpeCA9PT0gJ3doZWVsJykge1xuICAgIC8vIFRoaXMgaXMgdGhlIG9ubHkgd2F5IHRvIHRlc3Qgc3VwcG9ydCBmb3IgdGhlIGB3aGVlbGAgZXZlbnQgaW4gSUU5Ky5cbiAgICBpc1N1cHBvcnRlZCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJ0V2ZW50cy53aGVlbCcsICczLjAnKTtcbiAgfVxuXG4gIHJldHVybiBpc1N1cHBvcnRlZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0V2ZW50U3VwcG9ydGVkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpc1RleHRJbnB1dEVsZW1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHNlZSBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS90aGUtaW5wdXQtZWxlbWVudC5odG1sI2lucHV0LXR5cGUtYXR0ci1zdW1tYXJ5XG4gKi9cbnZhciBzdXBwb3J0ZWRJbnB1dFR5cGVzID0ge1xuICAnY29sb3InOiB0cnVlLFxuICAnZGF0ZSc6IHRydWUsXG4gICdkYXRldGltZSc6IHRydWUsXG4gICdkYXRldGltZS1sb2NhbCc6IHRydWUsXG4gICdlbWFpbCc6IHRydWUsXG4gICdtb250aCc6IHRydWUsXG4gICdudW1iZXInOiB0cnVlLFxuICAncGFzc3dvcmQnOiB0cnVlLFxuICAncmFuZ2UnOiB0cnVlLFxuICAnc2VhcmNoJzogdHJ1ZSxcbiAgJ3RlbCc6IHRydWUsXG4gICd0ZXh0JzogdHJ1ZSxcbiAgJ3RpbWUnOiB0cnVlLFxuICAndXJsJzogdHJ1ZSxcbiAgJ3dlZWsnOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBpc1RleHRJbnB1dEVsZW1lbnQoZWxlbSkge1xuICB2YXIgbm9kZU5hbWUgPSBlbGVtICYmIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gbm9kZU5hbWUgJiYgKG5vZGVOYW1lID09PSAnaW5wdXQnICYmIHN1cHBvcnRlZElucHV0VHlwZXNbZWxlbS50eXBlXSB8fCBub2RlTmFtZSA9PT0gJ3RleHRhcmVhJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUZXh0SW5wdXRFbGVtZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBvbmx5Q2hpbGRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IGNoaWxkIGluIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiBhbmQgdmVyaWZpZXMgdGhhdCB0aGVyZVxuICogaXMgb25seSBvbmUgY2hpbGQgaW4gdGhlIGNvbGxlY3Rpb24uIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHRoaXNcbiAqIGZ1bmN0aW9uIGFzc3VtZXMgdGhhdCBhIHNpbmdsZSBjaGlsZCBnZXRzIHBhc3NlZCB3aXRob3V0IGEgd3JhcHBlciwgYnV0IHRoZVxuICogcHVycG9zZSBvZiB0aGlzIGhlbHBlciBmdW5jdGlvbiBpcyB0byBhYnN0cmFjdCBhd2F5IHRoZSBwYXJ0aWN1bGFyIHN0cnVjdHVyZVxuICogb2YgY2hpbGRyZW4uXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBjaGlsZHJlbiBDaGlsZCBjb2xsZWN0aW9uIHN0cnVjdHVyZS5cbiAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSBUaGUgZmlyc3QgYW5kIG9ubHkgYFJlYWN0Q29tcG9uZW50YCBjb250YWluZWQgaW4gdGhlXG4gKiBzdHJ1Y3R1cmUuXG4gKi9cbmZ1bmN0aW9uIG9ubHlDaGlsZChjaGlsZHJlbikge1xuICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdvbmx5Q2hpbGQgbXVzdCBiZSBwYXNzZWQgYSBjaGlsZHJlbiB3aXRoIGV4YWN0bHkgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9ubHlDaGlsZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xuXG4vKipcbiAqIEVzY2FwZXMgYXR0cmlidXRlIHZhbHVlIHRvIHByZXZlbnQgc2NyaXB0aW5nIGF0dGFja3MuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBlc2NhcGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIGVzY2FwZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSkge1xuICByZXR1cm4gJ1wiJyArIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlcih2YWx1ZSkgKyAnXCInO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiogQHByb3ZpZGVzTW9kdWxlIHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNb3VudC5yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2V0SW5uZXJIVE1MXG4gKi9cblxuLyogZ2xvYmFscyBNU0FwcCAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBXSElURVNQQUNFX1RFU1QgPSAvXlsgXFxyXFxuXFx0XFxmXS87XG52YXIgTk9OVklTSUJMRV9URVNUID0gLzwoIS0tfGxpbmt8bm9zY3JpcHR8bWV0YXxzY3JpcHR8c3R5bGUpWyBcXHJcXG5cXHRcXGZcXC8+XS87XG5cbi8qKlxuICogU2V0IHRoZSBpbm5lckhUTUwgcHJvcGVydHkgb2YgYSBub2RlLCBlbnN1cmluZyB0aGF0IHdoaXRlc3BhY2UgaXMgcHJlc2VydmVkXG4gKiBldmVuIGluIElFOC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBodG1sXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIHNldElubmVySFRNTCA9IGZ1bmN0aW9uIChub2RlLCBodG1sKSB7XG4gIG5vZGUuaW5uZXJIVE1MID0gaHRtbDtcbn07XG5cbi8vIFdpbjggYXBwczogQWxsb3cgYWxsIGh0bWwgdG8gYmUgaW5zZXJ0ZWRcbmlmICh0eXBlb2YgTVNBcHAgIT09ICd1bmRlZmluZWQnICYmIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKSB7XG4gIHNldElubmVySFRNTCA9IGZ1bmN0aW9uIChub2RlLCBodG1sKSB7XG4gICAgTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuICAgIH0pO1xuICB9O1xufVxuXG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIC8vIElFODogV2hlbiB1cGRhdGluZyBhIGp1c3QgY3JlYXRlZCBub2RlIHdpdGggaW5uZXJIVE1MIG9ubHkgbGVhZGluZ1xuICAvLyB3aGl0ZXNwYWNlIGlzIHJlbW92ZWQuIFdoZW4gdXBkYXRpbmcgYW4gZXhpc3Rpbmcgbm9kZSB3aXRoIGlubmVySFRNTFxuICAvLyB3aGl0ZXNwYWNlIGluIHJvb3QgVGV4dE5vZGVzIGlzIGFsc28gY29sbGFwc2VkLlxuICAvLyBAc2VlIHF1aXJrc21vZGUub3JnL2J1Z3JlcG9ydHMvYXJjaGl2ZXMvMjAwNC8xMS9pbm5lcmh0bWxfYW5kX3QuaHRtbFxuXG4gIC8vIEZlYXR1cmUgZGV0ZWN0aW9uOyBvbmx5IElFOCBpcyBrbm93biB0byBiZWhhdmUgaW1wcm9wZXJseSBsaWtlIHRoaXMuXG4gIHZhciB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0ZXN0RWxlbWVudC5pbm5lckhUTUwgPSAnICc7XG4gIGlmICh0ZXN0RWxlbWVudC5pbm5lckhUTUwgPT09ICcnKSB7XG4gICAgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUsIGh0bWwpIHtcbiAgICAgIC8vIE1hZ2ljIHRoZW9yeTogSUU4IHN1cHBvc2VkbHkgZGlmZmVyZW50aWF0ZXMgYmV0d2VlbiBhZGRlZCBhbmQgdXBkYXRlZFxuICAgICAgLy8gbm9kZXMgd2hlbiBwcm9jZXNzaW5nIGlubmVySFRNTCwgaW5uZXJIVE1MIG9uIHVwZGF0ZWQgbm9kZXMgc3VmZmVyc1xuICAgICAgLy8gZnJvbSB3b3JzZSB3aGl0ZXNwYWNlIGJlaGF2aW9yLiBSZS1hZGRpbmcgYSBub2RlIGxpa2UgdGhpcyB0cmlnZ2Vyc1xuICAgICAgLy8gdGhlIGluaXRpYWwgYW5kIG1vcmUgZmF2b3JhYmxlIHdoaXRlc3BhY2UgYmVoYXZpb3IuXG4gICAgICAvLyBUT0RPOiBXaGF0IHRvIGRvIG9uIGEgZGV0YWNoZWQgbm9kZT9cbiAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChub2RlLCBub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgYWxzbyBpbXBsZW1lbnQgYSB3b3JrYXJvdW5kIGZvciBub24tdmlzaWJsZSB0YWdzIGRpc2FwcGVhcmluZyBpbnRvXG4gICAgICAvLyB0aGluIGFpciBvbiBJRTgsIHRoaXMgb25seSBoYXBwZW5zIGlmIHRoZXJlIGlzIG5vIHZpc2libGUgdGV4dFxuICAgICAgLy8gaW4tZnJvbnQgb2YgdGhlIG5vbi12aXNpYmxlIHRhZ3MuIFBpZ2d5YmFjayBvbiB0aGUgd2hpdGVzcGFjZSBmaXhcbiAgICAgIC8vIGFuZCBzaW1wbHkgY2hlY2sgaWYgYW55IG5vbi12aXNpYmxlIHRhZ3MgYXBwZWFyIGluIHRoZSBzb3VyY2UuXG4gICAgICBpZiAoV0hJVEVTUEFDRV9URVNULnRlc3QoaHRtbCkgfHwgaHRtbFswXSA9PT0gJzwnICYmIE5PTlZJU0lCTEVfVEVTVC50ZXN0KGh0bWwpKSB7XG4gICAgICAgIC8vIFJlY292ZXIgbGVhZGluZyB3aGl0ZXNwYWNlIGJ5IHRlbXBvcmFyaWx5IHByZXBlbmRpbmcgYW55IGNoYXJhY3Rlci5cbiAgICAgICAgLy8gXFx1RkVGRiBoYXMgdGhlIHBvdGVudGlhbCBhZHZhbnRhZ2Ugb2YgYmVpbmcgemVyby13aWR0aC9pbnZpc2libGUuXG4gICAgICAgIC8vIFVnbGlmeUpTIGRyb3BzIFUrRkVGRiBjaGFycyB3aGVuIHBhcnNpbmcsIHNvIHVzZSBTdHJpbmcuZnJvbUNoYXJDb2RlXG4gICAgICAgIC8vIGluIGhvcGVzIHRoYXQgdGhpcyBpcyBwcmVzZXJ2ZWQgZXZlbiBpZiBcIlxcdUZFRkZcIiBpcyB0cmFuc2Zvcm1lZCB0b1xuICAgICAgICAvLyB0aGUgYWN0dWFsIFVuaWNvZGUgY2hhcmFjdGVyIChieSBCYWJlbCwgZm9yIGV4YW1wbGUpLlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWlzaG9vL1VnbGlmeUpTMi9ibG9iL3YyLjQuMjAvbGliL3BhcnNlLmpzI0wyMTZcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkVGRikgKyBodG1sO1xuXG4gICAgICAgIC8vIGRlbGV0ZURhdGEgbGVhdmVzIGFuIGVtcHR5IGBUZXh0Tm9kZWAgd2hpY2ggb2Zmc2V0cyB0aGUgaW5kZXggb2YgYWxsXG4gICAgICAgIC8vIGNoaWxkcmVuLiBEZWZpbml0ZWx5IHdhbnQgdG8gYXZvaWQgdGhpcy5cbiAgICAgICAgdmFyIHRleHROb2RlID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICBpZiAodGV4dE5vZGUuZGF0YS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBub2RlLnJlbW92ZUNoaWxkKHRleHROb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZXh0Tm9kZS5kZWxldGVEYXRhKDAsIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldElubmVySFRNTDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2V0VGV4dENvbnRlbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXInKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xuXG4vKipcbiAqIFNldCB0aGUgdGV4dENvbnRlbnQgcHJvcGVydHkgb2YgYSBub2RlLCBlbnN1cmluZyB0aGF0IHdoaXRlc3BhY2UgaXMgcHJlc2VydmVkXG4gKiBldmVuIGluIElFOC4gaW5uZXJUZXh0IGlzIGEgcG9vciBzdWJzdGl0dXRlIGZvciB0ZXh0Q29udGVudCBhbmQsIGFtb25nIG1hbnlcbiAqIGlzc3VlcywgaW5zZXJ0cyA8YnI+IGluc3RlYWQgb2YgdGhlIGxpdGVyYWwgbmV3bGluZSBjaGFycy4gaW5uZXJIVE1MIGJlaGF2ZXNcbiAqIGFzIGl0IHNob3VsZC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIHNldFRleHRDb250ZW50ID0gZnVuY3Rpb24gKG5vZGUsIHRleHQpIHtcbiAgbm9kZS50ZXh0Q29udGVudCA9IHRleHQ7XG59O1xuXG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIGlmICghKCd0ZXh0Q29udGVudCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkge1xuICAgIHNldFRleHRDb250ZW50ID0gZnVuY3Rpb24gKG5vZGUsIHRleHQpIHtcbiAgICAgIHNldElubmVySFRNTChub2RlLCBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodGV4dCkpO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRUZXh0Q29udGVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdpdmVuIGEgYHByZXZFbGVtZW50YCBhbmQgYG5leHRFbGVtZW50YCwgZGV0ZXJtaW5lcyBpZiB0aGUgZXhpc3RpbmdcbiAqIGluc3RhbmNlIHNob3VsZCBiZSB1cGRhdGVkIGFzIG9wcG9zZWQgdG8gYmVpbmcgZGVzdHJveWVkIG9yIHJlcGxhY2VkIGJ5IGEgbmV3XG4gKiBpbnN0YW5jZS4gQm90aCBhcmd1bWVudHMgYXJlIGVsZW1lbnRzLiBUaGlzIGVuc3VyZXMgdGhhdCB0aGlzIGxvZ2ljIGNhblxuICogb3BlcmF0ZSBvbiBzdGF0ZWxlc3MgdHJlZXMgd2l0aG91dCBhbnkgYmFja2luZyBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IHByZXZFbGVtZW50XG4gKiBAcGFyYW0gez9vYmplY3R9IG5leHRFbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBleGlzdGluZyBpbnN0YW5jZSBzaG91bGQgYmUgdXBkYXRlZC5cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSB7XG4gIHZhciBwcmV2RW1wdHkgPSBwcmV2RWxlbWVudCA9PT0gbnVsbCB8fCBwcmV2RWxlbWVudCA9PT0gZmFsc2U7XG4gIHZhciBuZXh0RW1wdHkgPSBuZXh0RWxlbWVudCA9PT0gbnVsbCB8fCBuZXh0RWxlbWVudCA9PT0gZmFsc2U7XG4gIGlmIChwcmV2RW1wdHkgfHwgbmV4dEVtcHR5KSB7XG4gICAgcmV0dXJuIHByZXZFbXB0eSA9PT0gbmV4dEVtcHR5O1xuICB9XG5cbiAgdmFyIHByZXZUeXBlID0gdHlwZW9mIHByZXZFbGVtZW50O1xuICB2YXIgbmV4dFR5cGUgPSB0eXBlb2YgbmV4dEVsZW1lbnQ7XG4gIGlmIChwcmV2VHlwZSA9PT0gJ3N0cmluZycgfHwgcHJldlR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIG5leHRUeXBlID09PSAnc3RyaW5nJyB8fCBuZXh0VHlwZSA9PT0gJ251bWJlcic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5leHRUeXBlID09PSAnb2JqZWN0JyAmJiBwcmV2RWxlbWVudC50eXBlID09PSBuZXh0RWxlbWVudC50eXBlICYmIHByZXZFbGVtZW50LmtleSA9PT0gbmV4dEVsZW1lbnQua2V5O1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdHJhdmVyc2VBbGxDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG5cbnZhciBnZXRJdGVyYXRvckZuID0gcmVxdWlyZSgnLi9nZXRJdGVyYXRvckZuJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIFNFUEFSQVRPUiA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLlNFUEFSQVRPUjtcbnZhciBTVUJTRVBBUkFUT1IgPSAnOic7XG5cbi8qKlxuICogVE9ETzogVGVzdCB0aGF0IGEgc2luZ2xlIGNoaWxkIGFuZCBhbiBhcnJheSB3aXRoIG9uZSBpdGVtIGhhdmUgdGhlIHNhbWUga2V5XG4gKiBwYXR0ZXJuLlxuICovXG5cbnZhciB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyTG9va3VwID0ge1xuICAnPSc6ICc9MCcsXG4gICcuJzogJz0xJyxcbiAgJzonOiAnPTInXG59O1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvWz0uOl0vZztcblxudmFyIGRpZFdhcm5BYm91dE1hcHMgPSBmYWxzZTtcblxuZnVuY3Rpb24gdXNlclByb3ZpZGVkS2V5RXNjYXBlcihtYXRjaCkge1xuICByZXR1cm4gdXNlclByb3ZpZGVkS2V5RXNjYXBlckxvb2t1cFttYXRjaF07XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBrZXkgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyBhIGNvbXBvbmVudCB3aXRoaW4gYSBzZXQuXG4gKlxuICogQHBhcmFtIHsqfSBjb21wb25lbnQgQSBjb21wb25lbnQgdGhhdCBjb3VsZCBjb250YWluIGEgbWFudWFsIGtleS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCB0aGF0IGlzIHVzZWQgaWYgYSBtYW51YWwga2V5IGlzIG5vdCBwcm92aWRlZC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50S2V5KGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQua2V5ICE9IG51bGwpIHtcbiAgICAvLyBFeHBsaWNpdCBrZXlcbiAgICByZXR1cm4gd3JhcFVzZXJQcm92aWRlZEtleShjb21wb25lbnQua2V5KTtcbiAgfVxuICAvLyBJbXBsaWNpdCBrZXkgZGV0ZXJtaW5lZCBieSB0aGUgaW5kZXggaW4gdGhlIHNldFxuICByZXR1cm4gaW5kZXgudG9TdHJpbmcoMzYpO1xufVxuXG4vKipcbiAqIEVzY2FwZSBhIGNvbXBvbmVudCBrZXkgc28gdGhhdCBpdCBpcyBzYWZlIHRvIHVzZSBpbiBhIHJlYWN0aWQuXG4gKlxuICogQHBhcmFtIHsqfSB0ZXh0IENvbXBvbmVudCBrZXkgdG8gYmUgZXNjYXBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gQW4gZXNjYXBlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZVVzZXJQcm92aWRlZEtleSh0ZXh0KSB7XG4gIHJldHVybiAoJycgKyB0ZXh0KS5yZXBsYWNlKHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LCB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyKTtcbn1cblxuLyoqXG4gKiBXcmFwIGEgYGtleWAgdmFsdWUgZXhwbGljaXRseSBwcm92aWRlZCBieSB0aGUgdXNlciB0byBkaXN0aW5ndWlzaCBpdCBmcm9tXG4gKiBpbXBsaWNpdGx5LWdlbmVyYXRlZCBrZXlzIGdlbmVyYXRlZCBieSBhIGNvbXBvbmVudCdzIGluZGV4IGluIGl0cyBwYXJlbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBWYWx1ZSBvZiBhIHVzZXItcHJvdmlkZWQgYGtleWAgYXR0cmlidXRlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHdyYXBVc2VyUHJvdmlkZWRLZXkoa2V5KSB7XG4gIHJldHVybiAnJCcgKyBlc2NhcGVVc2VyUHJvdmlkZWRLZXkoa2V5KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZVNvRmFyIE5hbWUgb2YgdGhlIGtleSBwYXRoIHNvIGZhci5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayB0byBpbnZva2Ugd2l0aCBlYWNoIGNoaWxkIGZvdW5kLlxuICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IFVzZWQgdG8gcGFzcyBpbmZvcm1hdGlvbiB0aHJvdWdob3V0IHRoZSB0cmF2ZXJzYWxcbiAqIHByb2Nlc3MuXG4gKiBAcmV0dXJuIHshbnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIGluIHRoaXMgc3VidHJlZS5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGRyZW4sIG5hbWVTb0ZhciwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiBjaGlsZHJlbjtcblxuICBpZiAodHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgLy8gQWxsIG9mIHRoZSBhYm92ZSBhcmUgcGVyY2VpdmVkIGFzIG51bGwuXG4gICAgY2hpbGRyZW4gPSBudWxsO1xuICB9XG5cbiAgaWYgKGNoaWxkcmVuID09PSBudWxsIHx8IHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpIHtcbiAgICBjYWxsYmFjayh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkcmVuLFxuICAgIC8vIElmIGl0J3MgdGhlIG9ubHkgY2hpbGQsIHRyZWF0IHRoZSBuYW1lIGFzIGlmIGl0IHdhcyB3cmFwcGVkIGluIGFuIGFycmF5XG4gICAgLy8gc28gdGhhdCBpdCdzIGNvbnNpc3RlbnQgaWYgdGhlIG51bWJlciBvZiBjaGlsZHJlbiBncm93cy5cbiAgICBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkcmVuLCAwKSA6IG5hbWVTb0Zhcik7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICB2YXIgY2hpbGQ7XG4gIHZhciBuZXh0TmFtZTtcbiAgdmFyIHN1YnRyZWVDb3VudCA9IDA7IC8vIENvdW50IG9mIGNoaWxkcmVuIGZvdW5kIGluIHRoZSBjdXJyZW50IHN1YnRyZWUuXG4gIHZhciBuZXh0TmFtZVByZWZpeCA9IG5hbWVTb0ZhciA9PT0gJycgPyBTRVBBUkFUT1IgOiBuYW1lU29GYXIgKyBTVUJTRVBBUkFUT1I7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyBnZXRDb21wb25lbnRLZXkoY2hpbGQsIGkpO1xuICAgICAgc3VidHJlZUNvdW50ICs9IHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkLCBuZXh0TmFtZSwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihjaGlsZHJlbik7XG4gICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChjaGlsZHJlbik7XG4gICAgICB2YXIgc3RlcDtcbiAgICAgIGlmIChpdGVyYXRvckZuICE9PSBjaGlsZHJlbi5lbnRyaWVzKSB7XG4gICAgICAgIHZhciBpaSA9IDA7XG4gICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICBjaGlsZCA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIGdldENvbXBvbmVudEtleShjaGlsZCwgaWkrKyk7XG4gICAgICAgICAgc3VidHJlZUNvdW50ICs9IHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkLCBuZXh0TmFtZSwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZGlkV2FybkFib3V0TWFwcywgJ1VzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHlldCBmdWxseSBzdXBwb3J0ZWQuIEl0IGlzIGFuICcgKyAnZXhwZXJpbWVudGFsIGZlYXR1cmUgdGhhdCBtaWdodCBiZSByZW1vdmVkLiBDb252ZXJ0IGl0IHRvIGEgJyArICdzZXF1ZW5jZSAvIGl0ZXJhYmxlIG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBkaWRXYXJuQWJvdXRNYXBzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cbiAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICBjaGlsZCA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIHdyYXBVc2VyUHJvdmlkZWRLZXkoZW50cnlbMF0pICsgU1VCU0VQQVJBVE9SICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCAwKTtcbiAgICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBhZGRlbmR1bSA9ICcnO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgYWRkZW5kdW0gPSAnIElmIHlvdSBtZWFudCB0byByZW5kZXIgYSBjb2xsZWN0aW9uIG9mIGNoaWxkcmVuLCB1c2UgYW4gYXJyYXkgJyArICdpbnN0ZWFkIG9yIHdyYXAgdGhlIG9iamVjdCB1c2luZyBjcmVhdGVGcmFnbWVudChvYmplY3QpIGZyb20gdGhlICcgKyAnUmVhY3QgYWRkLW9ucy4nO1xuICAgICAgICBpZiAoY2hpbGRyZW4uX2lzUmVhY3RFbGVtZW50KSB7XG4gICAgICAgICAgYWRkZW5kdW0gPSAnIEl0IGxvb2tzIGxpa2UgeW91XFwncmUgdXNpbmcgYW4gZWxlbWVudCBjcmVhdGVkIGJ5IGEgZGlmZmVyZW50ICcgKyAndmVyc2lvbiBvZiBSZWFjdC4gTWFrZSBzdXJlIHRvIHVzZSBvbmx5IG9uZSBjb3B5IG9mIFJlYWN0Lic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQpIHtcbiAgICAgICAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICBhZGRlbmR1bSArPSAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgY2hpbGRyZW5TdHJpbmcgPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgICAgIWZhbHNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ09iamVjdHMgYXJlIG5vdCB2YWxpZCBhcyBhIFJlYWN0IGNoaWxkIChmb3VuZDogJXMpLiVzJywgY2hpbGRyZW5TdHJpbmcgPT09ICdbb2JqZWN0IE9iamVjdF0nID8gJ29iamVjdCB3aXRoIGtleXMgeycgKyBPYmplY3Qua2V5cyhjaGlsZHJlbikuam9pbignLCAnKSArICd9JyA6IGNoaWxkcmVuU3RyaW5nLCBhZGRlbmR1bSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdWJ0cmVlQ291bnQ7XG59XG5cbi8qKlxuICogVHJhdmVyc2VzIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCwgYnV0XG4gKiBtaWdodCBhbHNvIGJlIHNwZWNpZmllZCB0aHJvdWdoIGF0dHJpYnV0ZXM6XG4gKlxuICogLSBgdHJhdmVyc2VBbGxDaGlsZHJlbih0aGlzLnByb3BzLmNoaWxkcmVuLCAuLi4pYFxuICogLSBgdHJhdmVyc2VBbGxDaGlsZHJlbih0aGlzLnByb3BzLmxlZnRQYW5lbENoaWxkcmVuLCAuLi4pYFxuICpcbiAqIFRoZSBgdHJhdmVyc2VDb250ZXh0YCBpcyBhbiBvcHRpb25hbCBhcmd1bWVudCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZVxuICogZW50aXJlIHRyYXZlcnNhbC4gSXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgYWNjdW11bGF0aW9ucyBvciBhbnl0aGluZyBlbHNlIHRoYXRcbiAqIHRoZSBjYWxsYmFjayBtaWdodCBmaW5kIHJlbGV2YW50LlxuICpcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgb2JqZWN0LlxuICogQHBhcmFtIHshZnVuY3Rpb259IGNhbGxiYWNrIFRvIGludm9rZSB1cG9uIHRyYXZlcnNpbmcgZWFjaCBjaGlsZC5cbiAqIEBwYXJhbSB7Pyp9IHRyYXZlcnNlQ29udGV4dCBDb250ZXh0IGZvciB0cmF2ZXJzYWwuXG4gKiBAcmV0dXJuIHshbnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIGluIHRoaXMgc3VidHJlZS5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCkge1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCAnJywgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJhdmVyc2VBbGxDaGlsZHJlbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHZhbGlkYXRlRE9NTmVzdGluZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IGVtcHR5RnVuY3Rpb247XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8vIFRoaXMgdmFsaWRhdGlvbiBjb2RlIHdhcyB3cml0dGVuIGJhc2VkIG9uIHRoZSBIVE1MNSBwYXJzaW5nIHNwZWM6XG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2hhcy1hbi1lbGVtZW50LWluLXNjb3BlXG4gIC8vXG4gIC8vIE5vdGU6IHRoaXMgZG9lcyBub3QgY2F0Y2ggYWxsIGludmFsaWQgbmVzdGluZywgbm9yIGRvZXMgaXQgdHJ5IHRvIChhcyBpdCdzXG4gIC8vIG5vdCBjbGVhciB3aGF0IHByYWN0aWNhbCBiZW5lZml0IGRvaW5nIHNvIHByb3ZpZGVzKTsgaW5zdGVhZCwgd2Ugd2FybiBvbmx5XG4gIC8vIGZvciBjYXNlcyB3aGVyZSB0aGUgcGFyc2VyIHdpbGwgZ2l2ZSBhIHBhcnNlIHRyZWUgZGlmZmVyaW5nIGZyb20gd2hhdCBSZWFjdFxuICAvLyBpbnRlbmRlZC4gRm9yIGV4YW1wbGUsIDxiPjxkaXY+PC9kaXY+PC9iPiBpcyBpbnZhbGlkIGJ1dCB3ZSBkb24ndCB3YXJuXG4gIC8vIGJlY2F1c2UgaXQgc3RpbGwgcGFyc2VzIGNvcnJlY3RseTsgd2UgZG8gd2FybiBmb3Igb3RoZXIgY2FzZXMgbGlrZSBuZXN0ZWRcbiAgLy8gPHA+IHRhZ3Mgd2hlcmUgdGhlIGJlZ2lubmluZyBvZiB0aGUgc2Vjb25kIGVsZW1lbnQgaW1wbGljaXRseSBjbG9zZXMgdGhlXG4gIC8vIGZpcnN0LCBjYXVzaW5nIGEgY29uZnVzaW5nIG1lc3MuXG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjc3BlY2lhbFxuICB2YXIgc3BlY2lhbFRhZ3MgPSBbJ2FkZHJlc3MnLCAnYXBwbGV0JywgJ2FyZWEnLCAnYXJ0aWNsZScsICdhc2lkZScsICdiYXNlJywgJ2Jhc2Vmb250JywgJ2Jnc291bmQnLCAnYmxvY2txdW90ZScsICdib2R5JywgJ2JyJywgJ2J1dHRvbicsICdjYXB0aW9uJywgJ2NlbnRlcicsICdjb2wnLCAnY29sZ3JvdXAnLCAnZGQnLCAnZGV0YWlscycsICdkaXInLCAnZGl2JywgJ2RsJywgJ2R0JywgJ2VtYmVkJywgJ2ZpZWxkc2V0JywgJ2ZpZ2NhcHRpb24nLCAnZmlndXJlJywgJ2Zvb3RlcicsICdmb3JtJywgJ2ZyYW1lJywgJ2ZyYW1lc2V0JywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JywgJ2hlYWQnLCAnaGVhZGVyJywgJ2hncm91cCcsICdocicsICdodG1sJywgJ2lmcmFtZScsICdpbWcnLCAnaW5wdXQnLCAnaXNpbmRleCcsICdsaScsICdsaW5rJywgJ2xpc3RpbmcnLCAnbWFpbicsICdtYXJxdWVlJywgJ21lbnUnLCAnbWVudWl0ZW0nLCAnbWV0YScsICduYXYnLCAnbm9lbWJlZCcsICdub2ZyYW1lcycsICdub3NjcmlwdCcsICdvYmplY3QnLCAnb2wnLCAncCcsICdwYXJhbScsICdwbGFpbnRleHQnLCAncHJlJywgJ3NjcmlwdCcsICdzZWN0aW9uJywgJ3NlbGVjdCcsICdzb3VyY2UnLCAnc3R5bGUnLCAnc3VtbWFyeScsICd0YWJsZScsICd0Ym9keScsICd0ZCcsICd0ZW1wbGF0ZScsICd0ZXh0YXJlYScsICd0Zm9vdCcsICd0aCcsICd0aGVhZCcsICd0aXRsZScsICd0cicsICd0cmFjaycsICd1bCcsICd3YnInLCAneG1wJ107XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaGFzLWFuLWVsZW1lbnQtaW4tc2NvcGVcbiAgdmFyIGluU2NvcGVUYWdzID0gWydhcHBsZXQnLCAnY2FwdGlvbicsICdodG1sJywgJ3RhYmxlJywgJ3RkJywgJ3RoJywgJ21hcnF1ZWUnLCAnb2JqZWN0JywgJ3RlbXBsYXRlJyxcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNodG1sLWludGVncmF0aW9uLXBvaW50XG4gIC8vIFRPRE86IERpc3Rpbmd1aXNoIGJ5IG5hbWVzcGFjZSBoZXJlIC0tIGZvciA8dGl0bGU+LCBpbmNsdWRpbmcgaXQgaGVyZVxuICAvLyBlcnJzIG9uIHRoZSBzaWRlIG9mIGZld2VyIHdhcm5pbmdzXG4gICdmb3JlaWduT2JqZWN0JywgJ2Rlc2MnLCAndGl0bGUnXTtcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1idXR0b24tc2NvcGVcbiAgdmFyIGJ1dHRvblNjb3BlVGFncyA9IGluU2NvcGVUYWdzLmNvbmNhdChbJ2J1dHRvbiddKTtcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNnZW5lcmF0ZS1pbXBsaWVkLWVuZC10YWdzXG4gIHZhciBpbXBsaWVkRW5kVGFncyA9IFsnZGQnLCAnZHQnLCAnbGknLCAnb3B0aW9uJywgJ29wdGdyb3VwJywgJ3AnLCAncnAnLCAncnQnXTtcblxuICB2YXIgZW1wdHlBbmNlc3RvckluZm8gPSB7XG4gICAgcGFyZW50VGFnOiBudWxsLFxuXG4gICAgZm9ybVRhZzogbnVsbCxcbiAgICBhVGFnSW5TY29wZTogbnVsbCxcbiAgICBidXR0b25UYWdJblNjb3BlOiBudWxsLFxuICAgIG5vYnJUYWdJblNjb3BlOiBudWxsLFxuICAgIHBUYWdJbkJ1dHRvblNjb3BlOiBudWxsLFxuXG4gICAgbGlzdEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbCxcbiAgICBkbEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbFxuICB9O1xuXG4gIHZhciB1cGRhdGVkQW5jZXN0b3JJbmZvID0gZnVuY3Rpb24gKG9sZEluZm8sIHRhZywgaW5zdGFuY2UpIHtcbiAgICB2YXIgYW5jZXN0b3JJbmZvID0gYXNzaWduKHt9LCBvbGRJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvKTtcbiAgICB2YXIgaW5mbyA9IHsgdGFnOiB0YWcsIGluc3RhbmNlOiBpbnN0YW5jZSB9O1xuXG4gICAgaWYgKGluU2NvcGVUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IG51bGw7XG4gICAgICBhbmNlc3RvckluZm8uYnV0dG9uVGFnSW5TY29wZSA9IG51bGw7XG4gICAgICBhbmNlc3RvckluZm8ubm9iclRhZ0luU2NvcGUgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoYnV0dG9uU2NvcGVUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VlIHJ1bGVzIGZvciAnbGknLCAnZGQnLCAnZHQnIHN0YXJ0IHRhZ3MgaW5cbiAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG4gICAgaWYgKHNwZWNpYWxUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEgJiYgdGFnICE9PSAnYWRkcmVzcycgJiYgdGFnICE9PSAnZGl2JyAmJiB0YWcgIT09ICdwJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3NpbmcgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcbiAgICB9XG5cbiAgICBhbmNlc3RvckluZm8ucGFyZW50VGFnID0gaW5mbztcblxuICAgIGlmICh0YWcgPT09ICdmb3JtJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmZvcm1UYWcgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnYScpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdidXR0b24nKSB7XG4gICAgICBhbmNlc3RvckluZm8uYnV0dG9uVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdub2JyJykge1xuICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ3AnKSB7XG4gICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnbGknKSB7XG4gICAgICBhbmNlc3RvckluZm8ubGlzdEl0ZW1UYWdBdXRvY2xvc2luZyA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdkZCcgfHwgdGFnID09PSAnZHQnKSB7XG4gICAgICBhbmNlc3RvckluZm8uZGxJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvO1xuICAgIH1cblxuICAgIHJldHVybiBhbmNlc3RvckluZm87XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlclxuICAgKi9cbiAgdmFyIGlzVGFnVmFsaWRXaXRoUGFyZW50ID0gZnVuY3Rpb24gKHRhZywgcGFyZW50VGFnKSB7XG4gICAgLy8gRmlyc3QsIGxldCdzIGNoZWNrIGlmIHdlJ3JlIGluIGFuIHVudXN1YWwgcGFyc2luZyBtb2RlLi4uXG4gICAgc3dpdGNoIChwYXJlbnRUYWcpIHtcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnNlbGVjdFxuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ29wdGlvbicgfHwgdGFnID09PSAnb3B0Z3JvdXAnIHx8IHRhZyA9PT0gJyN0ZXh0JztcbiAgICAgIGNhc2UgJ29wdGdyb3VwJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ29wdGlvbicgfHwgdGFnID09PSAnI3RleHQnO1xuICAgICAgLy8gU3RyaWN0bHkgc3BlYWtpbmcsIHNlZWluZyBhbiA8b3B0aW9uPiBkb2Vzbid0IG1lYW4gd2UncmUgaW4gYSA8c2VsZWN0PlxuICAgICAgLy8gYnV0XG4gICAgICBjYXNlICdvcHRpb24nOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnI3RleHQnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW50ZFxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluY2FwdGlvblxuICAgICAgLy8gTm8gc3BlY2lhbCBiZWhhdmlvciBzaW5jZSB0aGVzZSBydWxlcyBmYWxsIGJhY2sgdG8gXCJpbiBib2R5XCIgbW9kZSBmb3JcbiAgICAgIC8vIGFsbCBleGNlcHQgc3BlY2lhbCB0YWJsZSBub2RlcyB3aGljaCBjYXVzZSBiYWQgcGFyc2luZyBiZWhhdmlvciBhbnl3YXkuXG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRyXG4gICAgICBjYXNlICd0cic6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICd0aCcgfHwgdGFnID09PSAndGQnIHx8IHRhZyA9PT0gJ3N0eWxlJyB8fCB0YWcgPT09ICdzY3JpcHQnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGJvZHlcbiAgICAgIGNhc2UgJ3Rib2R5JzpcbiAgICAgIGNhc2UgJ3RoZWFkJzpcbiAgICAgIGNhc2UgJ3Rmb290JzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ3RyJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmNvbGdyb3VwXG4gICAgICBjYXNlICdjb2xncm91cCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdjb2wnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGFibGVcbiAgICAgIGNhc2UgJ3RhYmxlJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ2NhcHRpb24nIHx8IHRhZyA9PT0gJ2NvbGdyb3VwJyB8fCB0YWcgPT09ICd0Ym9keScgfHwgdGFnID09PSAndGZvb3QnIHx8IHRhZyA9PT0gJ3RoZWFkJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmhlYWRcbiAgICAgIGNhc2UgJ2hlYWQnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnYmFzZScgfHwgdGFnID09PSAnYmFzZWZvbnQnIHx8IHRhZyA9PT0gJ2Jnc291bmQnIHx8IHRhZyA9PT0gJ2xpbmsnIHx8IHRhZyA9PT0gJ21ldGEnIHx8IHRhZyA9PT0gJ3RpdGxlJyB8fCB0YWcgPT09ICdub3NjcmlwdCcgfHwgdGFnID09PSAnbm9mcmFtZXMnIHx8IHRhZyA9PT0gJ3N0eWxlJyB8fCB0YWcgPT09ICdzY3JpcHQnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2VtYW50aWNzLmh0bWwjdGhlLWh0bWwtZWxlbWVudFxuICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdoZWFkJyB8fCB0YWcgPT09ICdib2R5JztcbiAgICB9XG5cbiAgICAvLyBQcm9iYWJseSBpbiB0aGUgXCJpbiBib2R5XCIgcGFyc2luZyBtb2RlLCBzbyB3ZSBvdXRsYXcgb25seSB0YWcgY29tYm9zXG4gICAgLy8gd2hlcmUgdGhlIHBhcnNpbmcgcnVsZXMgY2F1c2UgaW1wbGljaXQgb3BlbnMgb3IgY2xvc2VzIHRvIGJlIGFkZGVkLlxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmJvZHlcbiAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgY2FzZSAnaDEnOlxuICAgICAgY2FzZSAnaDInOlxuICAgICAgY2FzZSAnaDMnOlxuICAgICAgY2FzZSAnaDQnOlxuICAgICAgY2FzZSAnaDUnOlxuICAgICAgY2FzZSAnaDYnOlxuICAgICAgICByZXR1cm4gcGFyZW50VGFnICE9PSAnaDEnICYmIHBhcmVudFRhZyAhPT0gJ2gyJyAmJiBwYXJlbnRUYWcgIT09ICdoMycgJiYgcGFyZW50VGFnICE9PSAnaDQnICYmIHBhcmVudFRhZyAhPT0gJ2g1JyAmJiBwYXJlbnRUYWcgIT09ICdoNic7XG5cbiAgICAgIGNhc2UgJ3JwJzpcbiAgICAgIGNhc2UgJ3J0JzpcbiAgICAgICAgcmV0dXJuIGltcGxpZWRFbmRUYWdzLmluZGV4T2YocGFyZW50VGFnKSA9PT0gLTE7XG5cbiAgICAgIGNhc2UgJ2NhcHRpb24nOlxuICAgICAgY2FzZSAnY29sJzpcbiAgICAgIGNhc2UgJ2NvbGdyb3VwJzpcbiAgICAgIGNhc2UgJ2ZyYW1lJzpcbiAgICAgIGNhc2UgJ2hlYWQnOlxuICAgICAgY2FzZSAndGJvZHknOlxuICAgICAgY2FzZSAndGQnOlxuICAgICAgY2FzZSAndGZvb3QnOlxuICAgICAgY2FzZSAndGgnOlxuICAgICAgY2FzZSAndGhlYWQnOlxuICAgICAgY2FzZSAndHInOlxuICAgICAgICAvLyBUaGVzZSB0YWdzIGFyZSBvbmx5IHZhbGlkIHdpdGggYSBmZXcgcGFyZW50cyB0aGF0IGhhdmUgc3BlY2lhbCBjaGlsZFxuICAgICAgICAvLyBwYXJzaW5nIHJ1bGVzIC0tIGlmIHdlJ3JlIGRvd24gaGVyZSwgdGhlbiBub25lIG9mIHRob3NlIG1hdGNoZWQgYW5kXG4gICAgICAgIC8vIHNvIHdlIGFsbG93IGl0IG9ubHkgaWYgd2UgZG9uJ3Qga25vdyB3aGF0IHRoZSBwYXJlbnQgaXMsIGFzIGFsbCBvdGhlclxuICAgICAgICAvLyBjYXNlcyBhcmUgaW52YWxpZC5cbiAgICAgICAgcmV0dXJuIHBhcmVudFRhZyA9PSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXJcbiAgICovXG4gIHZhciBmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnID0gZnVuY3Rpb24gKHRhZywgYW5jZXN0b3JJbmZvKSB7XG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgJ2FkZHJlc3MnOlxuICAgICAgY2FzZSAnYXJ0aWNsZSc6XG4gICAgICBjYXNlICdhc2lkZSc6XG4gICAgICBjYXNlICdibG9ja3F1b3RlJzpcbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICBjYXNlICdkZXRhaWxzJzpcbiAgICAgIGNhc2UgJ2RpYWxvZyc6XG4gICAgICBjYXNlICdkaXInOlxuICAgICAgY2FzZSAnZGl2JzpcbiAgICAgIGNhc2UgJ2RsJzpcbiAgICAgIGNhc2UgJ2ZpZWxkc2V0JzpcbiAgICAgIGNhc2UgJ2ZpZ2NhcHRpb24nOlxuICAgICAgY2FzZSAnZmlndXJlJzpcbiAgICAgIGNhc2UgJ2Zvb3Rlcic6XG4gICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgY2FzZSAnaGdyb3VwJzpcbiAgICAgIGNhc2UgJ21haW4nOlxuICAgICAgY2FzZSAnbWVudSc6XG4gICAgICBjYXNlICduYXYnOlxuICAgICAgY2FzZSAnb2wnOlxuICAgICAgY2FzZSAncCc6XG4gICAgICBjYXNlICdzZWN0aW9uJzpcbiAgICAgIGNhc2UgJ3N1bW1hcnknOlxuICAgICAgY2FzZSAndWwnOlxuXG4gICAgICBjYXNlICdwcmUnOlxuICAgICAgY2FzZSAnbGlzdGluZyc6XG5cbiAgICAgIGNhc2UgJ3RhYmxlJzpcblxuICAgICAgY2FzZSAnaHInOlxuXG4gICAgICBjYXNlICd4bXAnOlxuXG4gICAgICBjYXNlICdoMSc6XG4gICAgICBjYXNlICdoMic6XG4gICAgICBjYXNlICdoMyc6XG4gICAgICBjYXNlICdoNCc6XG4gICAgICBjYXNlICdoNSc6XG4gICAgICBjYXNlICdoNic6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGU7XG5cbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmZvcm1UYWcgfHwgYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlO1xuXG4gICAgICBjYXNlICdsaSc6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ubGlzdEl0ZW1UYWdBdXRvY2xvc2luZztcblxuICAgICAgY2FzZSAnZGQnOlxuICAgICAgY2FzZSAnZHQnOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nO1xuXG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGU7XG5cbiAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAvLyBTcGVjIHNheXMgc29tZXRoaW5nIGFib3V0IHN0b3JpbmcgYSBsaXN0IG9mIG1hcmtlcnMsIGJ1dCBpdCBzb3VuZHNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byB0aGlzIGNoZWNrLlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmFUYWdJblNjb3BlO1xuXG4gICAgICBjYXNlICdub2JyJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5ub2JyVGFnSW5TY29wZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR2l2ZW4gYSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCBpbnN0YW5jZSwgcmV0dXJuIGEgbGlzdCBvZiBpdHMgcmVjdXJzaXZlXG4gICAqIG93bmVycywgc3RhcnRpbmcgYXQgdGhlIHJvb3QgYW5kIGVuZGluZyB3aXRoIHRoZSBpbnN0YW5jZSBpdHNlbGYuXG4gICAqL1xuICB2YXIgZmluZE93bmVyU3RhY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHN0YWNrID0gW107XG4gICAgLyplc2xpbnQtZGlzYWJsZSBzcGFjZS1hZnRlci1rZXl3b3JkcyAqL1xuICAgIGRvIHtcbiAgICAgIC8qZXNsaW50LWVuYWJsZSBzcGFjZS1hZnRlci1rZXl3b3JkcyAqL1xuICAgICAgc3RhY2sucHVzaChpbnN0YW5jZSk7XG4gICAgfSB3aGlsZSAoaW5zdGFuY2UgPSBpbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyKTtcbiAgICBzdGFjay5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIHN0YWNrO1xuICB9O1xuXG4gIHZhciBkaWRXYXJuID0ge307XG5cbiAgdmFsaWRhdGVET01OZXN0aW5nID0gZnVuY3Rpb24gKGNoaWxkVGFnLCBjaGlsZEluc3RhbmNlLCBhbmNlc3RvckluZm8pIHtcbiAgICBhbmNlc3RvckluZm8gPSBhbmNlc3RvckluZm8gfHwgZW1wdHlBbmNlc3RvckluZm87XG4gICAgdmFyIHBhcmVudEluZm8gPSBhbmNlc3RvckluZm8ucGFyZW50VGFnO1xuICAgIHZhciBwYXJlbnRUYWcgPSBwYXJlbnRJbmZvICYmIHBhcmVudEluZm8udGFnO1xuXG4gICAgdmFyIGludmFsaWRQYXJlbnQgPSBpc1RhZ1ZhbGlkV2l0aFBhcmVudChjaGlsZFRhZywgcGFyZW50VGFnKSA/IG51bGwgOiBwYXJlbnRJbmZvO1xuICAgIHZhciBpbnZhbGlkQW5jZXN0b3IgPSBpbnZhbGlkUGFyZW50ID8gbnVsbCA6IGZpbmRJbnZhbGlkQW5jZXN0b3JGb3JUYWcoY2hpbGRUYWcsIGFuY2VzdG9ySW5mbyk7XG4gICAgdmFyIHByb2JsZW1hdGljID0gaW52YWxpZFBhcmVudCB8fCBpbnZhbGlkQW5jZXN0b3I7XG5cbiAgICBpZiAocHJvYmxlbWF0aWMpIHtcbiAgICAgIHZhciBhbmNlc3RvclRhZyA9IHByb2JsZW1hdGljLnRhZztcbiAgICAgIHZhciBhbmNlc3Rvckluc3RhbmNlID0gcHJvYmxlbWF0aWMuaW5zdGFuY2U7XG5cbiAgICAgIHZhciBjaGlsZE93bmVyID0gY2hpbGRJbnN0YW5jZSAmJiBjaGlsZEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lciA9IGFuY2VzdG9ySW5zdGFuY2UgJiYgYW5jZXN0b3JJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuXG4gICAgICB2YXIgY2hpbGRPd25lcnMgPSBmaW5kT3duZXJTdGFjayhjaGlsZE93bmVyKTtcbiAgICAgIHZhciBhbmNlc3Rvck93bmVycyA9IGZpbmRPd25lclN0YWNrKGFuY2VzdG9yT3duZXIpO1xuXG4gICAgICB2YXIgbWluU3RhY2tMZW4gPSBNYXRoLm1pbihjaGlsZE93bmVycy5sZW5ndGgsIGFuY2VzdG9yT3duZXJzLmxlbmd0aCk7XG4gICAgICB2YXIgaTtcblxuICAgICAgdmFyIGRlZXBlc3RDb21tb24gPSAtMTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtaW5TdGFja0xlbjsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZE93bmVyc1tpXSA9PT0gYW5jZXN0b3JPd25lcnNbaV0pIHtcbiAgICAgICAgICBkZWVwZXN0Q29tbW9uID0gaTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgVU5LTk9XTiA9ICcodW5rbm93biknO1xuICAgICAgdmFyIGNoaWxkT3duZXJOYW1lcyA9IGNoaWxkT3duZXJzLnNsaWNlKGRlZXBlc3RDb21tb24gKyAxKS5tYXAoZnVuY3Rpb24gKGluc3QpIHtcbiAgICAgICAgcmV0dXJuIGluc3QuZ2V0TmFtZSgpIHx8IFVOS05PV047XG4gICAgICB9KTtcbiAgICAgIHZhciBhbmNlc3Rvck93bmVyTmFtZXMgPSBhbmNlc3Rvck93bmVycy5zbGljZShkZWVwZXN0Q29tbW9uICsgMSkubWFwKGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICAgIHJldHVybiBpbnN0LmdldE5hbWUoKSB8fCBVTktOT1dOO1xuICAgICAgfSk7XG4gICAgICB2YXIgb3duZXJJbmZvID0gW10uY29uY2F0KFxuICAgICAgLy8gSWYgdGhlIHBhcmVudCBhbmQgY2hpbGQgaW5zdGFuY2VzIGhhdmUgYSBjb21tb24gb3duZXIgYW5jZXN0b3IsIHN0YXJ0XG4gICAgICAvLyB3aXRoIHRoYXQgLS0gb3RoZXJ3aXNlIHdlIGp1c3Qgc3RhcnQgd2l0aCB0aGUgcGFyZW50J3Mgb3duZXJzLlxuICAgICAgZGVlcGVzdENvbW1vbiAhPT0gLTEgPyBjaGlsZE93bmVyc1tkZWVwZXN0Q29tbW9uXS5nZXROYW1lKCkgfHwgVU5LTk9XTiA6IFtdLCBhbmNlc3Rvck93bmVyTmFtZXMsIGFuY2VzdG9yVGFnLFxuICAgICAgLy8gSWYgd2UncmUgd2FybmluZyBhYm91dCBhbiBpbnZhbGlkIChub24tcGFyZW50KSBhbmNlc3RyeSwgYWRkICcuLi4nXG4gICAgICBpbnZhbGlkQW5jZXN0b3IgPyBbJy4uLiddIDogW10sIGNoaWxkT3duZXJOYW1lcywgY2hpbGRUYWcpLmpvaW4oJyA+ICcpO1xuXG4gICAgICB2YXIgd2FybktleSA9ICEhaW52YWxpZFBhcmVudCArICd8JyArIGNoaWxkVGFnICsgJ3wnICsgYW5jZXN0b3JUYWcgKyAnfCcgKyBvd25lckluZm87XG4gICAgICBpZiAoZGlkV2Fyblt3YXJuS2V5XSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkaWRXYXJuW3dhcm5LZXldID0gdHJ1ZTtcblxuICAgICAgaWYgKGludmFsaWRQYXJlbnQpIHtcbiAgICAgICAgdmFyIGluZm8gPSAnJztcbiAgICAgICAgaWYgKGFuY2VzdG9yVGFnID09PSAndGFibGUnICYmIGNoaWxkVGFnID09PSAndHInKSB7XG4gICAgICAgICAgaW5mbyArPSAnIEFkZCBhIDx0Ym9keT4gdG8geW91ciBjb2RlIHRvIG1hdGNoIHRoZSBET00gdHJlZSBnZW5lcmF0ZWQgYnkgJyArICd0aGUgYnJvd3Nlci4nO1xuICAgICAgICB9XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGNoaWxkIG9mIDwlcz4uICcgKyAnU2VlICVzLiVzJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8sIGluZm8pIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICd2YWxpZGF0ZURPTU5lc3RpbmcoLi4uKTogPCVzPiBjYW5ub3QgYXBwZWFyIGFzIGEgZGVzY2VuZGFudCBvZiAnICsgJzwlcz4uIFNlZSAlcy4nLCBjaGlsZFRhZywgYW5jZXN0b3JUYWcsIG93bmVySW5mbykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5ID0gJ19fdmFsaWRhdGVET01OZXN0aW5nX2FuY2VzdG9ySW5mbyQnICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG5cbiAgdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8gPSB1cGRhdGVkQW5jZXN0b3JJbmZvO1xuXG4gIC8vIEZvciB0ZXN0aW5nXG4gIHZhbGlkYXRlRE9NTmVzdGluZy5pc1RhZ1ZhbGlkSW5Db250ZXh0ID0gZnVuY3Rpb24gKHRhZywgYW5jZXN0b3JJbmZvKSB7XG4gICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvO1xuICAgIHZhciBwYXJlbnRJbmZvID0gYW5jZXN0b3JJbmZvLnBhcmVudFRhZztcbiAgICB2YXIgcGFyZW50VGFnID0gcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZztcbiAgICByZXR1cm4gaXNUYWdWYWxpZFdpdGhQYXJlbnQodGFnLCBwYXJlbnRUYWcpICYmICFmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnKHRhZywgYW5jZXN0b3JJbmZvKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0ZURPTU5lc3Rpbmc7IiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL1JlYWN0Jyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHNoYWxsb3dcblxuZnVuY3Rpb24gc2hhbGxvdyhhLCBiLCBjb21wYXJlKSB7XG4gIHZhciBhSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYSlcbiAgdmFyIGJJc0FycmF5ID0gQXJyYXkuaXNBcnJheShiKVxuXG4gIGlmIChhSXNBcnJheSAhPT0gYklzQXJyYXkpIHJldHVybiBmYWxzZVxuXG4gIHZhciBhVHlwZW9mID0gdHlwZW9mIGFcbiAgdmFyIGJUeXBlb2YgPSB0eXBlb2YgYlxuXG4gIGlmIChhVHlwZW9mICE9PSBiVHlwZW9mKSByZXR1cm4gZmFsc2VcbiAgaWYgKGZsYXQoYVR5cGVvZikpIHJldHVybiBjb21wYXJlXG4gICAgPyBjb21wYXJlKGEsIGIpXG4gICAgOiBhID09PSBiXG5cbiAgcmV0dXJuIGFJc0FycmF5XG4gICAgPyBzaGFsbG93QXJyYXkoYSwgYiwgY29tcGFyZSlcbiAgICA6IHNoYWxsb3dPYmplY3QoYSwgYiwgY29tcGFyZSlcbn1cblxuZnVuY3Rpb24gc2hhbGxvd0FycmF5KGEsIGIsIGNvbXBhcmUpIHtcbiAgdmFyIGwgPSBhLmxlbmd0aFxuICBpZiAobCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZVxuXG4gIGlmIChjb21wYXJlKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspXG4gICAgICBpZiAoIWNvbXBhcmUoYVtpXSwgYltpXSkpIHJldHVybiBmYWxzZVxuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpZiAoYVtpXSAhPT0gYltpXSkgcmV0dXJuIGZhbHNlXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWVcbn1cblxuZnVuY3Rpb24gc2hhbGxvd09iamVjdChhLCBiLCBjb21wYXJlKSB7XG4gIHZhciBrYSA9IDBcbiAgdmFyIGtiID0gMFxuXG4gIGlmIChjb21wYXJlKSB7XG4gICAgZm9yICh2YXIga2V5IGluIGEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXG4gICAgICAgICFjb21wYXJlKGFba2V5XSwgYltrZXldKVxuICAgICAgKSByZXR1cm4gZmFsc2VcblxuICAgICAga2ErK1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gYSkge1xuICAgICAgaWYgKFxuICAgICAgICBhLmhhc093blByb3BlcnR5KGtleSkgJiZcbiAgICAgICAgYVtrZXldICE9PSBiW2tleV1cbiAgICAgICkgcmV0dXJuIGZhbHNlXG5cbiAgICAgIGthKytcbiAgICB9XG4gIH1cblxuICBmb3IgKHZhciBrZXkgaW4gYikge1xuICAgIGlmIChiLmhhc093blByb3BlcnR5KGtleSkpIGtiKytcbiAgfVxuXG4gIHJldHVybiBrYSA9PT0ga2Jcbn1cblxuZnVuY3Rpb24gZmxhdCh0eXBlKSB7XG4gIHJldHVybiAoXG4gICAgdHlwZSAhPT0gJ2Z1bmN0aW9uJyAmJlxuICAgIHR5cGUgIT09ICdvYmplY3QnXG4gIClcbn1cbiIsIi8vICAgICBVbmRlcnNjb3JlLmpzIDEuOS4xXG4vLyAgICAgaHR0cDovL3VuZGVyc2NvcmVqcy5vcmdcbi8vICAgICAoYykgMjAwOS0yMDE4IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4vLyAgICAgVW5kZXJzY29yZSBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cblxuKGZ1bmN0aW9uKCkge1xuXG4gIC8vIEJhc2VsaW5lIHNldHVwXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gRXN0YWJsaXNoIHRoZSByb290IG9iamVjdCwgYHdpbmRvd2AgKGBzZWxmYCkgaW4gdGhlIGJyb3dzZXIsIGBnbG9iYWxgXG4gIC8vIG9uIHRoZSBzZXJ2ZXIsIG9yIGB0aGlzYCBpbiBzb21lIHZpcnR1YWwgbWFjaGluZXMuIFdlIHVzZSBgc2VsZmBcbiAgLy8gaW5zdGVhZCBvZiBgd2luZG93YCBmb3IgYFdlYldvcmtlcmAgc3VwcG9ydC5cbiAgdmFyIHJvb3QgPSB0eXBlb2Ygc2VsZiA9PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGYgJiYgc2VsZiB8fFxuICAgICAgICAgICAgdHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWwgJiYgZ2xvYmFsIHx8XG4gICAgICAgICAgICB0aGlzIHx8XG4gICAgICAgICAgICB7fTtcblxuICAvLyBTYXZlIHRoZSBwcmV2aW91cyB2YWx1ZSBvZiB0aGUgYF9gIHZhcmlhYmxlLlxuICB2YXIgcHJldmlvdXNVbmRlcnNjb3JlID0gcm9vdC5fO1xuXG4gIC8vIFNhdmUgYnl0ZXMgaW4gdGhlIG1pbmlmaWVkIChidXQgbm90IGd6aXBwZWQpIHZlcnNpb246XG4gIHZhciBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLCBPYmpQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG4gIHZhciBTeW1ib2xQcm90byA9IHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnID8gU3ltYm9sLnByb3RvdHlwZSA6IG51bGw7XG5cbiAgLy8gQ3JlYXRlIHF1aWNrIHJlZmVyZW5jZSB2YXJpYWJsZXMgZm9yIHNwZWVkIGFjY2VzcyB0byBjb3JlIHByb3RvdHlwZXMuXG4gIHZhciBwdXNoID0gQXJyYXlQcm90by5wdXNoLFxuICAgICAgc2xpY2UgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgICAgdG9TdHJpbmcgPSBPYmpQcm90by50b1N0cmluZyxcbiAgICAgIGhhc093blByb3BlcnR5ID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlXG4gIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuICB2YXIgbmF0aXZlSXNBcnJheSA9IEFycmF5LmlzQXJyYXksXG4gICAgICBuYXRpdmVLZXlzID0gT2JqZWN0LmtleXMsXG4gICAgICBuYXRpdmVDcmVhdGUgPSBPYmplY3QuY3JlYXRlO1xuXG4gIC8vIE5ha2VkIGZ1bmN0aW9uIHJlZmVyZW5jZSBmb3Igc3Vycm9nYXRlLXByb3RvdHlwZS1zd2FwcGluZy5cbiAgdmFyIEN0b3IgPSBmdW5jdGlvbigpe307XG5cbiAgLy8gQ3JlYXRlIGEgc2FmZSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0IGZvciB1c2UgYmVsb3cuXG4gIHZhciBfID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIF8pIHJldHVybiBvYmo7XG4gICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIF8pKSByZXR1cm4gbmV3IF8ob2JqKTtcbiAgICB0aGlzLl93cmFwcGVkID0gb2JqO1xuICB9O1xuXG4gIC8vIEV4cG9ydCB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yICoqTm9kZS5qcyoqLCB3aXRoXG4gIC8vIGJhY2t3YXJkcy1jb21wYXRpYmlsaXR5IGZvciB0aGVpciBvbGQgbW9kdWxlIEFQSS4gSWYgd2UncmUgaW5cbiAgLy8gdGhlIGJyb3dzZXIsIGFkZCBgX2AgYXMgYSBnbG9iYWwgb2JqZWN0LlxuICAvLyAoYG5vZGVUeXBlYCBpcyBjaGVja2VkIHRvIGVuc3VyZSB0aGF0IGBtb2R1bGVgXG4gIC8vIGFuZCBgZXhwb3J0c2AgYXJlIG5vdCBIVE1MIGVsZW1lbnRzLilcbiAgaWYgKHR5cGVvZiBleHBvcnRzICE9ICd1bmRlZmluZWQnICYmICFleHBvcnRzLm5vZGVUeXBlKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gXztcbiAgICB9XG4gICAgZXhwb3J0cy5fID0gXztcbiAgfSBlbHNlIHtcbiAgICByb290Ll8gPSBfO1xuICB9XG5cbiAgLy8gQ3VycmVudCB2ZXJzaW9uLlxuICBfLlZFUlNJT04gPSAnMS45LjEnO1xuXG4gIC8vIEludGVybmFsIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhbiBlZmZpY2llbnQgKGZvciBjdXJyZW50IGVuZ2luZXMpIHZlcnNpb25cbiAgLy8gb2YgdGhlIHBhc3NlZC1pbiBjYWxsYmFjaywgdG8gYmUgcmVwZWF0ZWRseSBhcHBsaWVkIGluIG90aGVyIFVuZGVyc2NvcmVcbiAgLy8gZnVuY3Rpb25zLlxuICB2YXIgb3B0aW1pemVDYiA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQsIGFyZ0NvdW50KSB7XG4gICAgaWYgKGNvbnRleHQgPT09IHZvaWQgMCkgcmV0dXJuIGZ1bmM7XG4gICAgc3dpdGNoIChhcmdDb3VudCA9PSBudWxsID8gMyA6IGFyZ0NvdW50KSB7XG4gICAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlKTtcbiAgICAgIH07XG4gICAgICAvLyBUaGUgMi1hcmd1bWVudCBjYXNlIGlzIG9taXR0ZWQgYmVjYXVzZSB3ZeKAmXJlIG5vdCB1c2luZyBpdC5cbiAgICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbik7XG4gICAgICB9O1xuICAgICAgY2FzZSA0OiByZXR1cm4gZnVuY3Rpb24oYWNjdW11bGF0b3IsIHZhbHVlLCBpbmRleCwgY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gZnVuYy5jYWxsKGNvbnRleHQsIGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoY29udGV4dCwgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIHZhciBidWlsdGluSXRlcmF0ZWU7XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgY2FsbGJhY2tzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdG8gZWFjaFxuICAvLyBlbGVtZW50IGluIGEgY29sbGVjdGlvbiwgcmV0dXJuaW5nIHRoZSBkZXNpcmVkIHJlc3VsdCDigJQgZWl0aGVyIGBpZGVudGl0eWAsXG4gIC8vIGFuIGFyYml0cmFyeSBjYWxsYmFjaywgYSBwcm9wZXJ0eSBtYXRjaGVyLCBvciBhIHByb3BlcnR5IGFjY2Vzc29yLlxuICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAoXy5pdGVyYXRlZSAhPT0gYnVpbHRpbkl0ZXJhdGVlKSByZXR1cm4gXy5pdGVyYXRlZSh2YWx1ZSwgY29udGV4dCk7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHJldHVybiBfLmlkZW50aXR5O1xuICAgIGlmIChfLmlzRnVuY3Rpb24odmFsdWUpKSByZXR1cm4gb3B0aW1pemVDYih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpO1xuICAgIGlmIChfLmlzT2JqZWN0KHZhbHVlKSAmJiAhXy5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIF8ubWF0Y2hlcih2YWx1ZSk7XG4gICAgcmV0dXJuIF8ucHJvcGVydHkodmFsdWUpO1xuICB9O1xuXG4gIC8vIEV4dGVybmFsIHdyYXBwZXIgZm9yIG91ciBjYWxsYmFjayBnZW5lcmF0b3IuIFVzZXJzIG1heSBjdXN0b21pemVcbiAgLy8gYF8uaXRlcmF0ZWVgIGlmIHRoZXkgd2FudCBhZGRpdGlvbmFsIHByZWRpY2F0ZS9pdGVyYXRlZSBzaG9ydGhhbmQgc3R5bGVzLlxuICAvLyBUaGlzIGFic3RyYWN0aW9uIGhpZGVzIHRoZSBpbnRlcm5hbC1vbmx5IGFyZ0NvdW50IGFyZ3VtZW50LlxuICBfLml0ZXJhdGVlID0gYnVpbHRpbkl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGNvbnRleHQpIHtcbiAgICByZXR1cm4gY2IodmFsdWUsIGNvbnRleHQsIEluZmluaXR5KTtcbiAgfTtcblxuICAvLyBTb21lIGZ1bmN0aW9ucyB0YWtlIGEgdmFyaWFibGUgbnVtYmVyIG9mIGFyZ3VtZW50cywgb3IgYSBmZXcgZXhwZWN0ZWRcbiAgLy8gYXJndW1lbnRzIGF0IHRoZSBiZWdpbm5pbmcgYW5kIHRoZW4gYSB2YXJpYWJsZSBudW1iZXIgb2YgdmFsdWVzIHRvIG9wZXJhdGVcbiAgLy8gb24uIFRoaXMgaGVscGVyIGFjY3VtdWxhdGVzIGFsbCByZW1haW5pbmcgYXJndW1lbnRzIHBhc3QgdGhlIGZ1bmN0aW9u4oCZc1xuICAvLyBhcmd1bWVudCBsZW5ndGggKG9yIGFuIGV4cGxpY2l0IGBzdGFydEluZGV4YCksIGludG8gYW4gYXJyYXkgdGhhdCBiZWNvbWVzXG4gIC8vIHRoZSBsYXN0IGFyZ3VtZW50LiBTaW1pbGFyIHRvIEVTNuKAmXMgXCJyZXN0IHBhcmFtZXRlclwiLlxuICB2YXIgcmVzdEFyZ3VtZW50cyA9IGZ1bmN0aW9uKGZ1bmMsIHN0YXJ0SW5kZXgpIHtcbiAgICBzdGFydEluZGV4ID0gc3RhcnRJbmRleCA9PSBudWxsID8gZnVuYy5sZW5ndGggLSAxIDogK3N0YXJ0SW5kZXg7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KGFyZ3VtZW50cy5sZW5ndGggLSBzdGFydEluZGV4LCAwKSxcbiAgICAgICAgICByZXN0ID0gQXJyYXkobGVuZ3RoKSxcbiAgICAgICAgICBpbmRleCA9IDA7XG4gICAgICBmb3IgKDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgcmVzdFtpbmRleF0gPSBhcmd1bWVudHNbaW5kZXggKyBzdGFydEluZGV4XTtcbiAgICAgIH1cbiAgICAgIHN3aXRjaCAoc3RhcnRJbmRleCkge1xuICAgICAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpcywgcmVzdCk7XG4gICAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmd1bWVudHNbMF0sIHJlc3QpO1xuICAgICAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJndW1lbnRzWzBdLCBhcmd1bWVudHNbMV0sIHJlc3QpO1xuICAgICAgfVxuICAgICAgdmFyIGFyZ3MgPSBBcnJheShzdGFydEluZGV4ICsgMSk7XG4gICAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBzdGFydEluZGV4OyBpbmRleCsrKSB7XG4gICAgICAgIGFyZ3NbaW5kZXhdID0gYXJndW1lbnRzW2luZGV4XTtcbiAgICAgIH1cbiAgICAgIGFyZ3Nbc3RhcnRJbmRleF0gPSByZXN0O1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBbiBpbnRlcm5hbCBmdW5jdGlvbiBmb3IgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IHRoYXQgaW5oZXJpdHMgZnJvbSBhbm90aGVyLlxuICB2YXIgYmFzZUNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSkge1xuICAgIGlmICghXy5pc09iamVjdChwcm90b3R5cGUpKSByZXR1cm4ge307XG4gICAgaWYgKG5hdGl2ZUNyZWF0ZSkgcmV0dXJuIG5hdGl2ZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIEN0b3IucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICAgIHZhciByZXN1bHQgPSBuZXcgQ3RvcjtcbiAgICBDdG9yLnByb3RvdHlwZSA9IG51bGw7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICB2YXIgc2hhbGxvd1Byb3BlcnR5ID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiA9PSBudWxsID8gdm9pZCAwIDogb2JqW2tleV07XG4gICAgfTtcbiAgfTtcblxuICB2YXIgaGFzID0gZnVuY3Rpb24ob2JqLCBwYXRoKSB7XG4gICAgcmV0dXJuIG9iaiAhPSBudWxsICYmIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBwYXRoKTtcbiAgfVxuXG4gIHZhciBkZWVwR2V0ID0gZnVuY3Rpb24ob2JqLCBwYXRoKSB7XG4gICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIG9iaiA9IG9ialtwYXRoW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIGxlbmd0aCA/IG9iaiA6IHZvaWQgMDtcbiAgfTtcblxuICAvLyBIZWxwZXIgZm9yIGNvbGxlY3Rpb24gbWV0aG9kcyB0byBkZXRlcm1pbmUgd2hldGhlciBhIGNvbGxlY3Rpb25cbiAgLy8gc2hvdWxkIGJlIGl0ZXJhdGVkIGFzIGFuIGFycmF5IG9yIGFzIGFuIG9iamVjdC5cbiAgLy8gUmVsYXRlZDogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGhcbiAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTRcbiAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gIHZhciBnZXRMZW5ndGggPSBzaGFsbG93UHJvcGVydHkoJ2xlbmd0aCcpO1xuICB2YXIgaXNBcnJheUxpa2UgPSBmdW5jdGlvbihjb2xsZWN0aW9uKSB7XG4gICAgdmFyIGxlbmd0aCA9IGdldExlbmd0aChjb2xsZWN0aW9uKTtcbiAgICByZXR1cm4gdHlwZW9mIGxlbmd0aCA9PSAnbnVtYmVyJyAmJiBsZW5ndGggPj0gMCAmJiBsZW5ndGggPD0gTUFYX0FSUkFZX0lOREVYO1xuICB9O1xuXG4gIC8vIENvbGxlY3Rpb24gRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gVGhlIGNvcm5lcnN0b25lLCBhbiBgZWFjaGAgaW1wbGVtZW50YXRpb24sIGFrYSBgZm9yRWFjaGAuXG4gIC8vIEhhbmRsZXMgcmF3IG9iamVjdHMgaW4gYWRkaXRpb24gdG8gYXJyYXktbGlrZXMuIFRyZWF0cyBhbGxcbiAgLy8gc3BhcnNlIGFycmF5LWxpa2VzIGFzIGlmIHRoZXkgd2VyZSBkZW5zZS5cbiAgXy5lYWNoID0gXy5mb3JFYWNoID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgdmFyIGksIGxlbmd0aDtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSkge1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGl0ZXJhdGVlKG9ialtpXSwgaSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGtleXMgPSBfLmtleXMob2JqKTtcbiAgICAgIGZvciAoaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2tleXNbaV1dLCBrZXlzW2ldLCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgcmVzdWx0cyBvZiBhcHBseWluZyB0aGUgaXRlcmF0ZWUgdG8gZWFjaCBlbGVtZW50LlxuICBfLm1hcCA9IF8uY29sbGVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICBsZW5ndGggPSAoa2V5cyB8fCBvYmopLmxlbmd0aCxcbiAgICAgICAgcmVzdWx0cyA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIHJlc3VsdHNbaW5kZXhdID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBDcmVhdGUgYSByZWR1Y2luZyBmdW5jdGlvbiBpdGVyYXRpbmcgbGVmdCBvciByaWdodC5cbiAgdmFyIGNyZWF0ZVJlZHVjZSA9IGZ1bmN0aW9uKGRpcikge1xuICAgIC8vIFdyYXAgY29kZSB0aGF0IHJlYXNzaWducyBhcmd1bWVudCB2YXJpYWJsZXMgaW4gYSBzZXBhcmF0ZSBmdW5jdGlvbiB0aGFuXG4gICAgLy8gdGhlIG9uZSB0aGF0IGFjY2Vzc2VzIGBhcmd1bWVudHMubGVuZ3RoYCB0byBhdm9pZCBhIHBlcmYgaGl0LiAoIzE5OTEpXG4gICAgdmFyIHJlZHVjZXIgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBtZW1vLCBpbml0aWFsKSB7XG4gICAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgaWYgKCFpbml0aWFsKSB7XG4gICAgICAgIG1lbW8gPSBvYmpba2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXhdO1xuICAgICAgICBpbmRleCArPSBkaXI7XG4gICAgICB9XG4gICAgICBmb3IgKDsgaW5kZXggPj0gMCAmJiBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gZGlyKSB7XG4gICAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICAgIG1lbW8gPSBpdGVyYXRlZShtZW1vLCBvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWVtbztcbiAgICB9O1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGNvbnRleHQpIHtcbiAgICAgIHZhciBpbml0aWFsID0gYXJndW1lbnRzLmxlbmd0aCA+PSAzO1xuICAgICAgcmV0dXJuIHJlZHVjZXIob2JqLCBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0LCA0KSwgbWVtbywgaW5pdGlhbCk7XG4gICAgfTtcbiAgfTtcblxuICAvLyAqKlJlZHVjZSoqIGJ1aWxkcyB1cCBhIHNpbmdsZSByZXN1bHQgZnJvbSBhIGxpc3Qgb2YgdmFsdWVzLCBha2EgYGluamVjdGAsXG4gIC8vIG9yIGBmb2xkbGAuXG4gIF8ucmVkdWNlID0gXy5mb2xkbCA9IF8uaW5qZWN0ID0gY3JlYXRlUmVkdWNlKDEpO1xuXG4gIC8vIFRoZSByaWdodC1hc3NvY2lhdGl2ZSB2ZXJzaW9uIG9mIHJlZHVjZSwgYWxzbyBrbm93biBhcyBgZm9sZHJgLlxuICBfLnJlZHVjZVJpZ2h0ID0gXy5mb2xkciA9IGNyZWF0ZVJlZHVjZSgtMSk7XG5cbiAgLy8gUmV0dXJuIHRoZSBmaXJzdCB2YWx1ZSB3aGljaCBwYXNzZXMgYSB0cnV0aCB0ZXN0LiBBbGlhc2VkIGFzIGBkZXRlY3RgLlxuICBfLmZpbmQgPSBfLmRldGVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgdmFyIGtleUZpbmRlciA9IGlzQXJyYXlMaWtlKG9iaikgPyBfLmZpbmRJbmRleCA6IF8uZmluZEtleTtcbiAgICB2YXIga2V5ID0ga2V5RmluZGVyKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICBpZiAoa2V5ICE9PSB2b2lkIDAgJiYga2V5ICE9PSAtMSkgcmV0dXJuIG9ialtrZXldO1xuICB9O1xuXG4gIC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIHRoYXQgcGFzcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYHNlbGVjdGAuXG4gIF8uZmlsdGVyID0gXy5zZWxlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHRzID0gW107XG4gICAgcHJlZGljYXRlID0gY2IocHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIGlmIChwcmVkaWNhdGUodmFsdWUsIGluZGV4LCBsaXN0KSkgcmVzdWx0cy5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBmb3Igd2hpY2ggYSB0cnV0aCB0ZXN0IGZhaWxzLlxuICBfLnJlamVjdCA9IGZ1bmN0aW9uKG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5uZWdhdGUoY2IocHJlZGljYXRlKSksIGNvbnRleHQpO1xuICB9O1xuXG4gIC8vIERldGVybWluZSB3aGV0aGVyIGFsbCBvZiB0aGUgZWxlbWVudHMgbWF0Y2ggYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBhbGxgLlxuICBfLmV2ZXJ5ID0gXy5hbGwgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIGlmICghcHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaW4gdGhlIG9iamVjdCBtYXRjaGVzIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYW55YC5cbiAgXy5zb21lID0gXy5hbnkgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgdmFyIGtleXMgPSAhaXNBcnJheUxpa2Uob2JqKSAmJiBfLmtleXMob2JqKSxcbiAgICAgICAgbGVuZ3RoID0gKGtleXMgfHwgb2JqKS5sZW5ndGg7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleDtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIC8vIERldGVybWluZSBpZiB0aGUgYXJyYXkgb3Igb2JqZWN0IGNvbnRhaW5zIGEgZ2l2ZW4gaXRlbSAodXNpbmcgYD09PWApLlxuICAvLyBBbGlhc2VkIGFzIGBpbmNsdWRlc2AgYW5kIGBpbmNsdWRlYC5cbiAgXy5jb250YWlucyA9IF8uaW5jbHVkZXMgPSBfLmluY2x1ZGUgPSBmdW5jdGlvbihvYmosIGl0ZW0sIGZyb21JbmRleCwgZ3VhcmQpIHtcbiAgICBpZiAoIWlzQXJyYXlMaWtlKG9iaikpIG9iaiA9IF8udmFsdWVzKG9iaik7XG4gICAgaWYgKHR5cGVvZiBmcm9tSW5kZXggIT0gJ251bWJlcicgfHwgZ3VhcmQpIGZyb21JbmRleCA9IDA7XG4gICAgcmV0dXJuIF8uaW5kZXhPZihvYmosIGl0ZW0sIGZyb21JbmRleCkgPj0gMDtcbiAgfTtcblxuICAvLyBJbnZva2UgYSBtZXRob2QgKHdpdGggYXJndW1lbnRzKSBvbiBldmVyeSBpdGVtIGluIGEgY29sbGVjdGlvbi5cbiAgXy5pbnZva2UgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKG9iaiwgcGF0aCwgYXJncykge1xuICAgIHZhciBjb250ZXh0UGF0aCwgZnVuYztcbiAgICBpZiAoXy5pc0Z1bmN0aW9uKHBhdGgpKSB7XG4gICAgICBmdW5jID0gcGF0aDtcbiAgICB9IGVsc2UgaWYgKF8uaXNBcnJheShwYXRoKSkge1xuICAgICAgY29udGV4dFBhdGggPSBwYXRoLnNsaWNlKDAsIC0xKTtcbiAgICAgIHBhdGggPSBwYXRoW3BhdGgubGVuZ3RoIC0gMV07XG4gICAgfVxuICAgIHJldHVybiBfLm1hcChvYmosIGZ1bmN0aW9uKGNvbnRleHQpIHtcbiAgICAgIHZhciBtZXRob2QgPSBmdW5jO1xuICAgICAgaWYgKCFtZXRob2QpIHtcbiAgICAgICAgaWYgKGNvbnRleHRQYXRoICYmIGNvbnRleHRQYXRoLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnRleHQgPSBkZWVwR2V0KGNvbnRleHQsIGNvbnRleHRQYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29udGV4dCA9PSBudWxsKSByZXR1cm4gdm9pZCAwO1xuICAgICAgICBtZXRob2QgPSBjb250ZXh0W3BhdGhdO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1ldGhvZCA9PSBudWxsID8gbWV0aG9kIDogbWV0aG9kLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH0pO1xuICB9KTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBtYXBgOiBmZXRjaGluZyBhIHByb3BlcnR5LlxuICBfLnBsdWNrID0gZnVuY3Rpb24ob2JqLCBrZXkpIHtcbiAgICByZXR1cm4gXy5tYXAob2JqLCBfLnByb3BlcnR5KGtleSkpO1xuICB9O1xuXG4gIC8vIENvbnZlbmllbmNlIHZlcnNpb24gb2YgYSBjb21tb24gdXNlIGNhc2Ugb2YgYGZpbHRlcmA6IHNlbGVjdGluZyBvbmx5IG9iamVjdHNcbiAgLy8gY29udGFpbmluZyBzcGVjaWZpYyBga2V5OnZhbHVlYCBwYWlycy5cbiAgXy53aGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaW5kYDogZ2V0dGluZyB0aGUgZmlyc3Qgb2JqZWN0XG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uZmluZFdoZXJlID0gZnVuY3Rpb24ob2JqLCBhdHRycykge1xuICAgIHJldHVybiBfLmZpbmQob2JqLCBfLm1hdGNoZXIoYXR0cnMpKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG1heGltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG4gIF8ubWF4ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSAtSW5maW5pdHksIGxhc3RDb21wdXRlZCA9IC1JbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsIHx8IHR5cGVvZiBpdGVyYXRlZSA9PSAnbnVtYmVyJyAmJiB0eXBlb2Ygb2JqWzBdICE9ICdvYmplY3QnICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlID4gcmVzdWx0KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2LCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHYsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkID4gbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSAtSW5maW5pdHkgJiYgcmVzdWx0ID09PSAtSW5maW5pdHkpIHtcbiAgICAgICAgICByZXN1bHQgPSB2O1xuICAgICAgICAgIGxhc3RDb21wdXRlZCA9IGNvbXB1dGVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG1pbmltdW0gZWxlbWVudCAob3IgZWxlbWVudC1iYXNlZCBjb21wdXRhdGlvbikuXG4gIF8ubWluID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciByZXN1bHQgPSBJbmZpbml0eSwgbGFzdENvbXB1dGVkID0gSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCB8fCB0eXBlb2YgaXRlcmF0ZWUgPT0gJ251bWJlcicgJiYgdHlwZW9mIG9ialswXSAhPSAnb2JqZWN0JyAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSA8IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odiwgaW5kZXgsIGxpc3QpIHtcbiAgICAgICAgY29tcHV0ZWQgPSBpdGVyYXRlZSh2LCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA8IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gSW5maW5pdHkgJiYgcmVzdWx0ID09PSBJbmZpbml0eSkge1xuICAgICAgICAgIHJlc3VsdCA9IHY7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFNodWZmbGUgYSBjb2xsZWN0aW9uLlxuICBfLnNodWZmbGUgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gXy5zYW1wbGUob2JqLCBJbmZpbml0eSk7XG4gIH07XG5cbiAgLy8gU2FtcGxlICoqbioqIHJhbmRvbSB2YWx1ZXMgZnJvbSBhIGNvbGxlY3Rpb24gdXNpbmcgdGhlIG1vZGVybiB2ZXJzaW9uIG9mIHRoZVxuICAvLyBbRmlzaGVyLVlhdGVzIHNodWZmbGVdKGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRmlzaGVy4oCTWWF0ZXNfc2h1ZmZsZSkuXG4gIC8vIElmICoqbioqIGlzIG5vdCBzcGVjaWZpZWQsIHJldHVybnMgYSBzaW5nbGUgcmFuZG9tIGVsZW1lbnQuXG4gIC8vIFRoZSBpbnRlcm5hbCBgZ3VhcmRgIGFyZ3VtZW50IGFsbG93cyBpdCB0byB3b3JrIHdpdGggYG1hcGAuXG4gIF8uc2FtcGxlID0gZnVuY3Rpb24ob2JqLCBuLCBndWFyZCkge1xuICAgIGlmIChuID09IG51bGwgfHwgZ3VhcmQpIHtcbiAgICAgIGlmICghaXNBcnJheUxpa2Uob2JqKSkgb2JqID0gXy52YWx1ZXMob2JqKTtcbiAgICAgIHJldHVybiBvYmpbXy5yYW5kb20ob2JqLmxlbmd0aCAtIDEpXTtcbiAgICB9XG4gICAgdmFyIHNhbXBsZSA9IGlzQXJyYXlMaWtlKG9iaikgPyBfLmNsb25lKG9iaikgOiBfLnZhbHVlcyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBnZXRMZW5ndGgoc2FtcGxlKTtcbiAgICBuID0gTWF0aC5tYXgoTWF0aC5taW4obiwgbGVuZ3RoKSwgMCk7XG4gICAgdmFyIGxhc3QgPSBsZW5ndGggLSAxO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBuOyBpbmRleCsrKSB7XG4gICAgICB2YXIgcmFuZCA9IF8ucmFuZG9tKGluZGV4LCBsYXN0KTtcbiAgICAgIHZhciB0ZW1wID0gc2FtcGxlW2luZGV4XTtcbiAgICAgIHNhbXBsZVtpbmRleF0gPSBzYW1wbGVbcmFuZF07XG4gICAgICBzYW1wbGVbcmFuZF0gPSB0ZW1wO1xuICAgIH1cbiAgICByZXR1cm4gc2FtcGxlLnNsaWNlKDAsIG4pO1xuICB9O1xuXG4gIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRlZS5cbiAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIGluZGV4ID0gMDtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICByZXR1cm4gXy5wbHVjayhfLm1hcChvYmosIGZ1bmN0aW9uKHZhbHVlLCBrZXksIGxpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgaW5kZXg6IGluZGV4KyssXG4gICAgICAgIGNyaXRlcmlhOiBpdGVyYXRlZSh2YWx1ZSwga2V5LCBsaXN0KVxuICAgICAgfTtcbiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7XG4gICAgICB2YXIgYiA9IHJpZ2h0LmNyaXRlcmlhO1xuICAgICAgaWYgKGEgIT09IGIpIHtcbiAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7XG4gICAgICAgIGlmIChhIDwgYiB8fCBiID09PSB2b2lkIDApIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7XG4gICAgfSksICd2YWx1ZScpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSBcImdyb3VwIGJ5XCIgb3BlcmF0aW9ucy5cbiAgdmFyIGdyb3VwID0gZnVuY3Rpb24oYmVoYXZpb3IsIHBhcnRpdGlvbikge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcmVzdWx0ID0gcGFydGl0aW9uID8gW1tdLCBbXV0gOiB7fTtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4KSB7XG4gICAgICAgIHZhciBrZXkgPSBpdGVyYXRlZSh2YWx1ZSwgaW5kZXgsIG9iaik7XG4gICAgICAgIGJlaGF2aW9yKHJlc3VsdCwgdmFsdWUsIGtleSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBHcm91cHMgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbi4gUGFzcyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlXG4gIC8vIHRvIGdyb3VwIGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgY3JpdGVyaW9uLlxuICBfLmdyb3VwQnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoaGFzKHJlc3VsdCwga2V5KSkgcmVzdWx0W2tleV0ucHVzaCh2YWx1ZSk7IGVsc2UgcmVzdWx0W2tleV0gPSBbdmFsdWVdO1xuICB9KTtcblxuICAvLyBJbmRleGVzIHRoZSBvYmplY3QncyB2YWx1ZXMgYnkgYSBjcml0ZXJpb24sIHNpbWlsYXIgdG8gYGdyb3VwQnlgLCBidXQgZm9yXG4gIC8vIHdoZW4geW91IGtub3cgdGhhdCB5b3VyIGluZGV4IHZhbHVlcyB3aWxsIGJlIHVuaXF1ZS5cbiAgXy5pbmRleEJ5ID0gZ3JvdXAoZnVuY3Rpb24ocmVzdWx0LCB2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0W2tleV0gPSB2YWx1ZTtcbiAgfSk7XG5cbiAgLy8gQ291bnRzIGluc3RhbmNlcyBvZiBhbiBvYmplY3QgdGhhdCBncm91cCBieSBhIGNlcnRhaW4gY3JpdGVyaW9uLiBQYXNzXG4gIC8vIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGUgdG8gY291bnQgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuICAvLyBjcml0ZXJpb24uXG4gIF8uY291bnRCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChoYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XSsrOyBlbHNlIHJlc3VsdFtrZXldID0gMTtcbiAgfSk7XG5cbiAgdmFyIHJlU3RyU3ltYm9sID0gL1teXFx1ZDgwMC1cXHVkZmZmXXxbXFx1ZDgwMC1cXHVkYmZmXVtcXHVkYzAwLVxcdWRmZmZdfFtcXHVkODAwLVxcdWRmZmZdL2c7XG4gIC8vIFNhZmVseSBjcmVhdGUgYSByZWFsLCBsaXZlIGFycmF5IGZyb20gYW55dGhpbmcgaXRlcmFibGUuXG4gIF8udG9BcnJheSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmICghb2JqKSByZXR1cm4gW107XG4gICAgaWYgKF8uaXNBcnJheShvYmopKSByZXR1cm4gc2xpY2UuY2FsbChvYmopO1xuICAgIGlmIChfLmlzU3RyaW5nKG9iaikpIHtcbiAgICAgIC8vIEtlZXAgc3Vycm9nYXRlIHBhaXIgY2hhcmFjdGVycyB0b2dldGhlclxuICAgICAgcmV0dXJuIG9iai5tYXRjaChyZVN0clN5bWJvbCk7XG4gICAgfVxuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSByZXR1cm4gXy5tYXAob2JqLCBfLmlkZW50aXR5KTtcbiAgICByZXR1cm4gXy52YWx1ZXMob2JqKTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIG51bWJlciBvZiBlbGVtZW50cyBpbiBhbiBvYmplY3QuXG4gIF8uc2l6ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iaikgPyBvYmoubGVuZ3RoIDogXy5rZXlzKG9iaikubGVuZ3RoO1xuICB9O1xuXG4gIC8vIFNwbGl0IGEgY29sbGVjdGlvbiBpbnRvIHR3byBhcnJheXM6IG9uZSB3aG9zZSBlbGVtZW50cyBhbGwgc2F0aXNmeSB0aGUgZ2l2ZW5cbiAgLy8gcHJlZGljYXRlLCBhbmQgb25lIHdob3NlIGVsZW1lbnRzIGFsbCBkbyBub3Qgc2F0aXNmeSB0aGUgcHJlZGljYXRlLlxuICBfLnBhcnRpdGlvbiA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIHBhc3MpIHtcbiAgICByZXN1bHRbcGFzcyA/IDAgOiAxXS5wdXNoKHZhbHVlKTtcbiAgfSwgdHJ1ZSk7XG5cbiAgLy8gQXJyYXkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEdldCB0aGUgZmlyc3QgZWxlbWVudCBvZiBhbiBhcnJheS4gUGFzc2luZyAqKm4qKiB3aWxsIHJldHVybiB0aGUgZmlyc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LiBBbGlhc2VkIGFzIGBoZWFkYCBhbmQgYHRha2VgLiBUaGUgKipndWFyZCoqIGNoZWNrXG4gIC8vIGFsbG93cyBpdCB0byB3b3JrIHdpdGggYF8ubWFwYC5cbiAgXy5maXJzdCA9IF8uaGVhZCA9IF8udGFrZSA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIGlmIChhcnJheSA9PSBudWxsIHx8IGFycmF5Lmxlbmd0aCA8IDEpIHJldHVybiBuID09IG51bGwgPyB2b2lkIDAgOiBbXTtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbMF07XG4gICAgcmV0dXJuIF8uaW5pdGlhbChhcnJheSwgYXJyYXkubGVuZ3RoIC0gbik7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEVzcGVjaWFsbHkgdXNlZnVsIG9uXG4gIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluXG4gIC8vIHRoZSBhcnJheSwgZXhjbHVkaW5nIHRoZSBsYXN0IE4uXG4gIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSAobiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pKSk7XG4gIH07XG5cbiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCB8fCBhcnJheS5sZW5ndGggPCAxKSByZXR1cm4gbiA9PSBudWxsID8gdm9pZCAwIDogW107XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xuICAgIHJldHVybiBfLnJlc3QoYXJyYXksIE1hdGgubWF4KDAsIGFycmF5Lmxlbmd0aCAtIG4pKTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGV2ZXJ5dGhpbmcgYnV0IHRoZSBmaXJzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEFsaWFzZWQgYXMgYHRhaWxgIGFuZCBgZHJvcGAuXG4gIC8vIEVzcGVjaWFsbHkgdXNlZnVsIG9uIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nIGFuICoqbioqIHdpbGwgcmV0dXJuXG4gIC8vIHRoZSByZXN0IE4gdmFsdWVzIGluIHRoZSBhcnJheS5cbiAgXy5yZXN0ID0gXy50YWlsID0gXy5kcm9wID0gZnVuY3Rpb24oYXJyYXksIG4sIGd1YXJkKSB7XG4gICAgcmV0dXJuIHNsaWNlLmNhbGwoYXJyYXksIG4gPT0gbnVsbCB8fCBndWFyZCA/IDEgOiBuKTtcbiAgfTtcblxuICAvLyBUcmltIG91dCBhbGwgZmFsc3kgdmFsdWVzIGZyb20gYW4gYXJyYXkuXG4gIF8uY29tcGFjdCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKGFycmF5LCBCb29sZWFuKTtcbiAgfTtcblxuICAvLyBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiBhIHJlY3Vyc2l2ZSBgZmxhdHRlbmAgZnVuY3Rpb24uXG4gIHZhciBmbGF0dGVuID0gZnVuY3Rpb24oaW5wdXQsIHNoYWxsb3csIHN0cmljdCwgb3V0cHV0KSB7XG4gICAgb3V0cHV0ID0gb3V0cHV0IHx8IFtdO1xuICAgIHZhciBpZHggPSBvdXRwdXQubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoaW5wdXQpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGlucHV0W2ldO1xuICAgICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSAmJiAoXy5pc0FycmF5KHZhbHVlKSB8fCBfLmlzQXJndW1lbnRzKHZhbHVlKSkpIHtcbiAgICAgICAgLy8gRmxhdHRlbiBjdXJyZW50IGxldmVsIG9mIGFycmF5IG9yIGFyZ3VtZW50cyBvYmplY3QuXG4gICAgICAgIGlmIChzaGFsbG93KSB7XG4gICAgICAgICAgdmFyIGogPSAwLCBsZW4gPSB2YWx1ZS5sZW5ndGg7XG4gICAgICAgICAgd2hpbGUgKGogPCBsZW4pIG91dHB1dFtpZHgrK10gPSB2YWx1ZVtqKytdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZsYXR0ZW4odmFsdWUsIHNoYWxsb3csIHN0cmljdCwgb3V0cHV0KTtcbiAgICAgICAgICBpZHggPSBvdXRwdXQubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFzdHJpY3QpIHtcbiAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9O1xuXG4gIC8vIEZsYXR0ZW4gb3V0IGFuIGFycmF5LCBlaXRoZXIgcmVjdXJzaXZlbHkgKGJ5IGRlZmF1bHQpLCBvciBqdXN0IG9uZSBsZXZlbC5cbiAgXy5mbGF0dGVuID0gZnVuY3Rpb24oYXJyYXksIHNoYWxsb3cpIHtcbiAgICByZXR1cm4gZmxhdHRlbihhcnJheSwgc2hhbGxvdywgZmFsc2UpO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIHZlcnNpb24gb2YgdGhlIGFycmF5IHRoYXQgZG9lcyBub3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIHZhbHVlKHMpLlxuICBfLndpdGhvdXQgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGFycmF5LCBvdGhlckFycmF5cykge1xuICAgIHJldHVybiBfLmRpZmZlcmVuY2UoYXJyYXksIG90aGVyQXJyYXlzKTtcbiAgfSk7XG5cbiAgLy8gUHJvZHVjZSBhIGR1cGxpY2F0ZS1mcmVlIHZlcnNpb24gb2YgdGhlIGFycmF5LiBJZiB0aGUgYXJyYXkgaGFzIGFscmVhZHlcbiAgLy8gYmVlbiBzb3J0ZWQsIHlvdSBoYXZlIHRoZSBvcHRpb24gb2YgdXNpbmcgYSBmYXN0ZXIgYWxnb3JpdGhtLlxuICAvLyBUaGUgZmFzdGVyIGFsZ29yaXRobSB3aWxsIG5vdCB3b3JrIHdpdGggYW4gaXRlcmF0ZWUgaWYgdGhlIGl0ZXJhdGVlXG4gIC8vIGlzIG5vdCBhIG9uZS10by1vbmUgZnVuY3Rpb24sIHNvIHByb3ZpZGluZyBhbiBpdGVyYXRlZSB3aWxsIGRpc2FibGVcbiAgLy8gdGhlIGZhc3RlciBhbGdvcml0aG0uXG4gIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuXG4gIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmICghXy5pc0Jvb2xlYW4oaXNTb3J0ZWQpKSB7XG4gICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7XG4gICAgICBpdGVyYXRlZSA9IGlzU29ydGVkO1xuICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldLFxuICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7XG4gICAgICBpZiAoaXNTb3J0ZWQgJiYgIWl0ZXJhdGVlKSB7XG4gICAgICAgIGlmICghaSB8fCBzZWVuICE9PSBjb21wdXRlZCkgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICBzZWVuID0gY29tcHV0ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGl0ZXJhdGVlKSB7XG4gICAgICAgIGlmICghXy5jb250YWlucyhzZWVuLCBjb21wdXRlZCkpIHtcbiAgICAgICAgICBzZWVuLnB1c2goY29tcHV0ZWQpO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICghXy5jb250YWlucyhyZXN1bHQsIHZhbHVlKSkge1xuICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIHRoZSB1bmlvbjogZWFjaCBkaXN0aW5jdCBlbGVtZW50IGZyb20gYWxsIG9mXG4gIC8vIHRoZSBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLnVuaW9uID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihhcnJheXMpIHtcbiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJyYXlzLCB0cnVlLCB0cnVlKSk7XG4gIH0pO1xuXG4gIC8vIFByb2R1Y2UgYW4gYXJyYXkgdGhhdCBjb250YWlucyBldmVyeSBpdGVtIHNoYXJlZCBiZXR3ZWVuIGFsbCB0aGVcbiAgLy8gcGFzc2VkLWluIGFycmF5cy5cbiAgXy5pbnRlcnNlY3Rpb24gPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgYXJnc0xlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGl0ZW0gPSBhcnJheVtpXTtcbiAgICAgIGlmIChfLmNvbnRhaW5zKHJlc3VsdCwgaXRlbSkpIGNvbnRpbnVlO1xuICAgICAgdmFyIGo7XG4gICAgICBmb3IgKGogPSAxOyBqIDwgYXJnc0xlbmd0aDsgaisrKSB7XG4gICAgICAgIGlmICghXy5jb250YWlucyhhcmd1bWVudHNbal0sIGl0ZW0pKSBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChqID09PSBhcmdzTGVuZ3RoKSByZXN1bHQucHVzaChpdGVtKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBUYWtlIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gb25lIGFycmF5IGFuZCBhIG51bWJlciBvZiBvdGhlciBhcnJheXMuXG4gIC8vIE9ubHkgdGhlIGVsZW1lbnRzIHByZXNlbnQgaW4ganVzdCB0aGUgZmlyc3QgYXJyYXkgd2lsbCByZW1haW4uXG4gIF8uZGlmZmVyZW5jZSA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oYXJyYXksIHJlc3QpIHtcbiAgICByZXN0ID0gZmxhdHRlbihyZXN0LCB0cnVlLCB0cnVlKTtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAgIHJldHVybiAhXy5jb250YWlucyhyZXN0LCB2YWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIC8vIENvbXBsZW1lbnQgb2YgXy56aXAuIFVuemlwIGFjY2VwdHMgYW4gYXJyYXkgb2YgYXJyYXlzIGFuZCBncm91cHNcbiAgLy8gZWFjaCBhcnJheSdzIGVsZW1lbnRzIG9uIHNoYXJlZCBpbmRpY2VzLlxuICBfLnVuemlwID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICB2YXIgbGVuZ3RoID0gYXJyYXkgJiYgXy5tYXgoYXJyYXksIGdldExlbmd0aCkubGVuZ3RoIHx8IDA7XG4gICAgdmFyIHJlc3VsdCA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICByZXN1bHRbaW5kZXhdID0gXy5wbHVjayhhcnJheSwgaW5kZXgpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFppcCB0b2dldGhlciBtdWx0aXBsZSBsaXN0cyBpbnRvIGEgc2luZ2xlIGFycmF5IC0tIGVsZW1lbnRzIHRoYXQgc2hhcmVcbiAgLy8gYW4gaW5kZXggZ28gdG9nZXRoZXIuXG4gIF8uemlwID0gcmVzdEFyZ3VtZW50cyhfLnVuemlwKTtcblxuICAvLyBDb252ZXJ0cyBsaXN0cyBpbnRvIG9iamVjdHMuIFBhc3MgZWl0aGVyIGEgc2luZ2xlIGFycmF5IG9mIGBba2V5LCB2YWx1ZV1gXG4gIC8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZlxuICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuIFBhc3NpbmcgYnkgcGFpcnMgaXMgdGhlIHJldmVyc2Ugb2YgXy5wYWlycy5cbiAgXy5vYmplY3QgPSBmdW5jdGlvbihsaXN0LCB2YWx1ZXMpIHtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChsaXN0KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodmFsdWVzKSB7XG4gICAgICAgIHJlc3VsdFtsaXN0W2ldXSA9IHZhbHVlc1tpXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc3VsdFtsaXN0W2ldWzBdXSA9IGxpc3RbaV1bMV07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gR2VuZXJhdG9yIGZ1bmN0aW9uIHRvIGNyZWF0ZSB0aGUgZmluZEluZGV4IGFuZCBmaW5kTGFzdEluZGV4IGZ1bmN0aW9ucy5cbiAgdmFyIGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyID0gZnVuY3Rpb24oZGlyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGluZGV4IG9uIGFuIGFycmF5LWxpa2UgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdC5cbiAgXy5maW5kSW5kZXggPSBjcmVhdGVQcmVkaWNhdGVJbmRleEZpbmRlcigxKTtcbiAgXy5maW5kTGFzdEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoLTEpO1xuXG4gIC8vIFVzZSBhIGNvbXBhcmF0b3IgZnVuY3Rpb24gdG8gZmlndXJlIG91dCB0aGUgc21hbGxlc3QgaW5kZXggYXQgd2hpY2hcbiAgLy8gYW4gb2JqZWN0IHNob3VsZCBiZSBpbnNlcnRlZCBzbyBhcyB0byBtYWludGFpbiBvcmRlci4gVXNlcyBiaW5hcnkgc2VhcmNoLlxuICBfLnNvcnRlZEluZGV4ID0gZnVuY3Rpb24oYXJyYXksIG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0LCAxKTtcbiAgICB2YXIgdmFsdWUgPSBpdGVyYXRlZShvYmopO1xuICAgIHZhciBsb3cgPSAwLCBoaWdoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgICAgdmFyIG1pZCA9IE1hdGguZmxvb3IoKGxvdyArIGhpZ2gpIC8gMik7XG4gICAgICBpZiAoaXRlcmF0ZWUoYXJyYXlbbWlkXSkgPCB2YWx1ZSkgbG93ID0gbWlkICsgMTsgZWxzZSBoaWdoID0gbWlkO1xuICAgIH1cbiAgICByZXR1cm4gbG93O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGluZGV4T2YgYW5kIGxhc3RJbmRleE9mIGZ1bmN0aW9ucy5cbiAgdmFyIGNyZWF0ZUluZGV4RmluZGVyID0gZnVuY3Rpb24oZGlyLCBwcmVkaWNhdGVGaW5kLCBzb3J0ZWRJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7XG4gICAgICB2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICAgIGkgPSBpZHggPj0gMCA/IGlkeCA6IE1hdGgubWF4KGlkeCArIGxlbmd0aCwgaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGVuZ3RoID0gaWR4ID49IDAgPyBNYXRoLm1pbihpZHggKyAxLCBsZW5ndGgpIDogaWR4ICsgbGVuZ3RoICsgMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzb3J0ZWRJbmRleCAmJiBpZHggJiYgbGVuZ3RoKSB7XG4gICAgICAgIGlkeCA9IHNvcnRlZEluZGV4KGFycmF5LCBpdGVtKTtcbiAgICAgICAgcmV0dXJuIGFycmF5W2lkeF0gPT09IGl0ZW0gPyBpZHggOiAtMTtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtICE9PSBpdGVtKSB7XG4gICAgICAgIGlkeCA9IHByZWRpY2F0ZUZpbmQoc2xpY2UuY2FsbChhcnJheSwgaSwgbGVuZ3RoKSwgXy5pc05hTik7XG4gICAgICAgIHJldHVybiBpZHggPj0gMCA/IGlkeCArIGkgOiAtMTtcbiAgICAgIH1cbiAgICAgIGZvciAoaWR4ID0gZGlyID4gMCA/IGkgOiBsZW5ndGggLSAxOyBpZHggPj0gMCAmJiBpZHggPCBsZW5ndGg7IGlkeCArPSBkaXIpIHtcbiAgICAgICAgaWYgKGFycmF5W2lkeF0gPT09IGl0ZW0pIHJldHVybiBpZHg7XG4gICAgICB9XG4gICAgICByZXR1cm4gLTE7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksXG4gIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuXG4gIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYFxuICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLlxuICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7XG4gIF8ubGFzdEluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigtMSwgXy5maW5kTGFzdEluZGV4KTtcblxuICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG4gIC8vIHRoZSBuYXRpdmUgUHl0aG9uIGByYW5nZSgpYCBmdW5jdGlvbi4gU2VlXG4gIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG4gIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICAgIGlmIChzdG9wID09IG51bGwpIHtcbiAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBpZiAoIXN0ZXApIHtcbiAgICAgIHN0ZXAgPSBzdG9wIDwgc3RhcnQgPyAtMSA6IDE7XG4gICAgfVxuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTtcbiAgICB2YXIgcmFuZ2UgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkge1xuICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICAvLyBDaHVuayBhIHNpbmdsZSBhcnJheSBpbnRvIG11bHRpcGxlIGFycmF5cywgZWFjaCBjb250YWluaW5nIGBjb3VudGAgb3IgZmV3ZXJcbiAgLy8gaXRlbXMuXG4gIF8uY2h1bmsgPSBmdW5jdGlvbihhcnJheSwgY291bnQpIHtcbiAgICBpZiAoY291bnQgPT0gbnVsbCB8fCBjb3VudCA8IDEpIHJldHVybiBbXTtcbiAgICB2YXIgcmVzdWx0ID0gW107XG4gICAgdmFyIGkgPSAwLCBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHNsaWNlLmNhbGwoYXJyYXksIGksIGkgKz0gY291bnQpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvclxuICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHMuXG4gIHZhciBleGVjdXRlQm91bmQgPSBmdW5jdGlvbihzb3VyY2VGdW5jLCBib3VuZEZ1bmMsIGNvbnRleHQsIGNhbGxpbmdDb250ZXh0LCBhcmdzKSB7XG4gICAgaWYgKCEoY2FsbGluZ0NvbnRleHQgaW5zdGFuY2VvZiBib3VuZEZ1bmMpKSByZXR1cm4gc291cmNlRnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICB2YXIgc2VsZiA9IGJhc2VDcmVhdGUoc291cmNlRnVuYy5wcm90b3R5cGUpO1xuICAgIHZhciByZXN1bHQgPSBzb3VyY2VGdW5jLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgIGlmIChfLmlzT2JqZWN0KHJlc3VsdCkpIHJldHVybiByZXN1bHQ7XG4gICAgcmV0dXJuIHNlbGY7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgZnVuY3Rpb24gYm91bmQgdG8gYSBnaXZlbiBvYmplY3QgKGFzc2lnbmluZyBgdGhpc2AsIGFuZCBhcmd1bWVudHMsXG4gIC8vIG9wdGlvbmFsbHkpLiBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgRnVuY3Rpb24uYmluZGAgaWZcbiAgLy8gYXZhaWxhYmxlLlxuICBfLmJpbmQgPSByZXN0QXJndW1lbnRzKGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQsIGFyZ3MpIHtcbiAgICBpZiAoIV8uaXNGdW5jdGlvbihmdW5jKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignQmluZCBtdXN0IGJlIGNhbGxlZCBvbiBhIGZ1bmN0aW9uJyk7XG4gICAgdmFyIGJvdW5kID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihjYWxsQXJncykge1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgY29udGV4dCwgdGhpcywgYXJncy5jb25jYXQoY2FsbEFyZ3MpKTtcbiAgICB9KTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH0pO1xuXG4gIC8vIFBhcnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIGJ5IGNyZWF0aW5nIGEgdmVyc2lvbiB0aGF0IGhhcyBoYWQgc29tZSBvZiBpdHNcbiAgLy8gYXJndW1lbnRzIHByZS1maWxsZWQsIHdpdGhvdXQgY2hhbmdpbmcgaXRzIGR5bmFtaWMgYHRoaXNgIGNvbnRleHQuIF8gYWN0c1xuICAvLyBhcyBhIHBsYWNlaG9sZGVyIGJ5IGRlZmF1bHQsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmVcbiAgLy8gcHJlLWZpbGxlZC4gU2V0IGBfLnBhcnRpYWwucGxhY2Vob2xkZXJgIGZvciBhIGN1c3RvbSBwbGFjZWhvbGRlciBhcmd1bWVudC5cbiAgXy5wYXJ0aWFsID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihmdW5jLCBib3VuZEFyZ3MpIHtcbiAgICB2YXIgcGxhY2Vob2xkZXIgPSBfLnBhcnRpYWwucGxhY2Vob2xkZXI7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLCBsZW5ndGggPSBib3VuZEFyZ3MubGVuZ3RoO1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcmdzW2ldID0gYm91bmRBcmdzW2ldID09PSBwbGFjZWhvbGRlciA/IGFyZ3VtZW50c1twb3NpdGlvbisrXSA6IGJvdW5kQXJnc1tpXTtcbiAgICAgIH1cbiAgICAgIHdoaWxlIChwb3NpdGlvbiA8IGFyZ3VtZW50cy5sZW5ndGgpIGFyZ3MucHVzaChhcmd1bWVudHNbcG9zaXRpb24rK10pO1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgdGhpcywgdGhpcywgYXJncyk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH0pO1xuXG4gIF8ucGFydGlhbC5wbGFjZWhvbGRlciA9IF87XG5cbiAgLy8gQmluZCBhIG51bWJlciBvZiBhbiBvYmplY3QncyBtZXRob2RzIHRvIHRoYXQgb2JqZWN0LiBSZW1haW5pbmcgYXJndW1lbnRzXG4gIC8vIGFyZSB0aGUgbWV0aG9kIG5hbWVzIHRvIGJlIGJvdW5kLiBVc2VmdWwgZm9yIGVuc3VyaW5nIHRoYXQgYWxsIGNhbGxiYWNrc1xuICAvLyBkZWZpbmVkIG9uIGFuIG9iamVjdCBiZWxvbmcgdG8gaXQuXG4gIF8uYmluZEFsbCA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAga2V5cyA9IGZsYXR0ZW4oa2V5cywgZmFsc2UsIGZhbHNlKTtcbiAgICB2YXIgaW5kZXggPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAoaW5kZXggPCAxKSB0aHJvdyBuZXcgRXJyb3IoJ2JpbmRBbGwgbXVzdCBiZSBwYXNzZWQgZnVuY3Rpb24gbmFtZXMnKTtcbiAgICB3aGlsZSAoaW5kZXgtLSkge1xuICAgICAgdmFyIGtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7XG4gICAgfVxuICB9KTtcblxuICAvLyBNZW1vaXplIGFuIGV4cGVuc2l2ZSBmdW5jdGlvbiBieSBzdG9yaW5nIGl0cyByZXN1bHRzLlxuICBfLm1lbW9pemUgPSBmdW5jdGlvbihmdW5jLCBoYXNoZXIpIHtcbiAgICB2YXIgbWVtb2l6ZSA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgdmFyIGNhY2hlID0gbWVtb2l6ZS5jYWNoZTtcbiAgICAgIHZhciBhZGRyZXNzID0gJycgKyAoaGFzaGVyID8gaGFzaGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgOiBrZXkpO1xuICAgICAgaWYgKCFoYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBjYWNoZVthZGRyZXNzXTtcbiAgICB9O1xuICAgIG1lbW9pemUuY2FjaGUgPSB7fTtcbiAgICByZXR1cm4gbWVtb2l6ZTtcbiAgfTtcblxuICAvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzXG4gIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cbiAgXy5kZWxheSA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24oZnVuYywgd2FpdCwgYXJncykge1xuICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH0pO1xuXG4gIC8vIERlZmVycyBhIGZ1bmN0aW9uLCBzY2hlZHVsaW5nIGl0IHRvIHJ1biBhZnRlciB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhc1xuICAvLyBjbGVhcmVkLlxuICBfLmRlZmVyID0gXy5wYXJ0aWFsKF8uZGVsYXksIF8sIDEpO1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuICAvLyBkdXJpbmcgYSBnaXZlbiB3aW5kb3cgb2YgdGltZS4gTm9ybWFsbHksIHRoZSB0aHJvdHRsZWQgZnVuY3Rpb24gd2lsbCBydW5cbiAgLy8gYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuICAvLyBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuICAvLyBge2xlYWRpbmc6IGZhbHNlfWAuIFRvIGRpc2FibGUgZXhlY3V0aW9uIG9uIHRoZSB0cmFpbGluZyBlZGdlLCBkaXR0by5cbiAgXy50aHJvdHRsZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgICB2YXIgdGltZW91dCwgY29udGV4dCwgYXJncywgcmVzdWx0O1xuICAgIHZhciBwcmV2aW91cyA9IDA7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBfLm5vdygpO1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfTtcblxuICAgIHZhciB0aHJvdHRsZWQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBub3cgPSBfLm5vdygpO1xuICAgICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcbiAgICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgIGlmIChyZW1haW5pbmcgPD0gMCB8fCByZW1haW5pbmcgPiB3YWl0KSB7XG4gICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH07XG5cbiAgICB0aHJvdHRsZWQuY2FuY2VsID0gZnVuY3Rpb24oKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICBwcmV2aW91cyA9IDA7XG4gICAgICB0aW1lb3V0ID0gY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG5cbiAgICByZXR1cm4gdGhyb3R0bGVkO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgYXMgbG9uZyBhcyBpdCBjb250aW51ZXMgdG8gYmUgaW52b2tlZCwgd2lsbCBub3RcbiAgLy8gYmUgdHJpZ2dlcmVkLiBUaGUgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgYWZ0ZXIgaXQgc3RvcHMgYmVpbmcgY2FsbGVkIGZvclxuICAvLyBOIG1pbGxpc2Vjb25kcy4gSWYgYGltbWVkaWF0ZWAgaXMgcGFzc2VkLCB0cmlnZ2VyIHRoZSBmdW5jdGlvbiBvbiB0aGVcbiAgLy8gbGVhZGluZyBlZGdlLCBpbnN0ZWFkIG9mIHRoZSB0cmFpbGluZy5cbiAgXy5kZWJvdW5jZSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgIHZhciB0aW1lb3V0LCByZXN1bHQ7XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbihjb250ZXh0LCBhcmdzKSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIGlmIChhcmdzKSByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIH07XG5cbiAgICB2YXIgZGVib3VuY2VkID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihhcmdzKSB7XG4gICAgICBpZiAodGltZW91dCkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgICB2YXIgY2FsbE5vdyA9ICF0aW1lb3V0O1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICAgIGlmIChjYWxsTm93KSByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZW91dCA9IF8uZGVsYXkobGF0ZXIsIHdhaXQsIHRoaXMsIGFyZ3MpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgZGVib3VuY2VkLmNhbmNlbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgfTtcblxuICAgIHJldHVybiBkZWJvdW5jZWQ7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgZnVuY3Rpb24gcGFzc2VkIGFzIGFuIGFyZ3VtZW50IHRvIHRoZSBzZWNvbmQsXG4gIC8vIGFsbG93aW5nIHlvdSB0byBhZGp1c3QgYXJndW1lbnRzLCBydW4gY29kZSBiZWZvcmUgYW5kIGFmdGVyLCBhbmRcbiAgLy8gY29uZGl0aW9uYWxseSBleGVjdXRlIHRoZSBvcmlnaW5hbCBmdW5jdGlvbi5cbiAgXy53cmFwID0gZnVuY3Rpb24oZnVuYywgd3JhcHBlcikge1xuICAgIHJldHVybiBfLnBhcnRpYWwod3JhcHBlciwgZnVuYyk7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIG5lZ2F0ZWQgdmVyc2lvbiBvZiB0aGUgcGFzc2VkLWluIHByZWRpY2F0ZS5cbiAgXy5uZWdhdGUgPSBmdW5jdGlvbihwcmVkaWNhdGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gIXByZWRpY2F0ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgdGhlIGNvbXBvc2l0aW9uIG9mIGEgbGlzdCBvZiBmdW5jdGlvbnMsIGVhY2hcbiAgLy8gY29uc3VtaW5nIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgZm9sbG93cy5cbiAgXy5jb21wb3NlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdmFyIHN0YXJ0ID0gYXJncy5sZW5ndGggLSAxO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBpID0gc3RhcnQ7XG4gICAgICB2YXIgcmVzdWx0ID0gYXJnc1tzdGFydF0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHdoaWxlIChpLS0pIHJlc3VsdCA9IGFyZ3NbaV0uY2FsbCh0aGlzLCByZXN1bHQpO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCBvbiBhbmQgYWZ0ZXIgdGhlIE50aCBjYWxsLlxuICBfLmFmdGVyID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IHdpbGwgb25seSBiZSBleGVjdXRlZCB1cCB0byAoYnV0IG5vdCBpbmNsdWRpbmcpIHRoZSBOdGggY2FsbC5cbiAgXy5iZWZvcmUgPSBmdW5jdGlvbih0aW1lcywgZnVuYykge1xuICAgIHZhciBtZW1vO1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIGlmICgtLXRpbWVzID4gMCkge1xuICAgICAgICBtZW1vID0gZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgfVxuICAgICAgaWYgKHRpbWVzIDw9IDEpIGZ1bmMgPSBudWxsO1xuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGF0IG1vc3Qgb25lIHRpbWUsIG5vIG1hdHRlciBob3dcbiAgLy8gb2Z0ZW4geW91IGNhbGwgaXQuIFVzZWZ1bCBmb3IgbGF6eSBpbml0aWFsaXphdGlvbi5cbiAgXy5vbmNlID0gXy5wYXJ0aWFsKF8uYmVmb3JlLCAyKTtcblxuICBfLnJlc3RBcmd1bWVudHMgPSByZXN0QXJndW1lbnRzO1xuXG4gIC8vIE9iamVjdCBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEtleXMgaW4gSUUgPCA5IHRoYXQgd29uJ3QgYmUgaXRlcmF0ZWQgYnkgYGZvciBrZXkgaW4gLi4uYCBhbmQgdGh1cyBtaXNzZWQuXG4gIHZhciBoYXNFbnVtQnVnID0gIXt0b1N0cmluZzogbnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoJ3RvU3RyaW5nJyk7XG4gIHZhciBub25FbnVtZXJhYmxlUHJvcHMgPSBbJ3ZhbHVlT2YnLCAnaXNQcm90b3R5cGVPZicsICd0b1N0cmluZycsXG4gICAgJ3Byb3BlcnR5SXNFbnVtZXJhYmxlJywgJ2hhc093blByb3BlcnR5JywgJ3RvTG9jYWxlU3RyaW5nJ107XG5cbiAgdmFyIGNvbGxlY3ROb25FbnVtUHJvcHMgPSBmdW5jdGlvbihvYmosIGtleXMpIHtcbiAgICB2YXIgbm9uRW51bUlkeCA9IG5vbkVudW1lcmFibGVQcm9wcy5sZW5ndGg7XG4gICAgdmFyIGNvbnN0cnVjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuICAgIHZhciBwcm90byA9IF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlIHx8IE9ialByb3RvO1xuXG4gICAgLy8gQ29uc3RydWN0b3IgaXMgYSBzcGVjaWFsIGNhc2UuXG4gICAgdmFyIHByb3AgPSAnY29uc3RydWN0b3InO1xuICAgIGlmIChoYXMob2JqLCBwcm9wKSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkga2V5cy5wdXNoKHByb3ApO1xuXG4gICAgd2hpbGUgKG5vbkVudW1JZHgtLSkge1xuICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtcbiAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7XG4gICAgICAgIGtleXMucHVzaChwcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIG5hbWVzIG9mIGFuIG9iamVjdCdzIG93biBwcm9wZXJ0aWVzLlxuICAvLyBEZWxlZ2F0ZXMgdG8gKipFQ01BU2NyaXB0IDUqKidzIG5hdGl2ZSBgT2JqZWN0LmtleXNgLlxuICBfLmtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIGlmIChuYXRpdmVLZXlzKSByZXR1cm4gbmF0aXZlS2V5cyhvYmopO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikgaWYgKGhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuICBfLmFsbEtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlc1tpXSA9IG9ialtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdC5cbiAgLy8gSW4gY29udHJhc3QgdG8gXy5tYXAgaXQgcmV0dXJucyBhbiBvYmplY3QuXG4gIF8ubWFwT2JqZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoLFxuICAgICAgICByZXN1bHRzID0ge307XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgdmFyIGN1cnJlbnRLZXkgPSBrZXlzW2luZGV4XTtcbiAgICAgIHJlc3VsdHNbY3VycmVudEtleV0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENvbnZlcnQgYW4gb2JqZWN0IGludG8gYSBsaXN0IG9mIGBba2V5LCB2YWx1ZV1gIHBhaXJzLlxuICAvLyBUaGUgb3Bwb3NpdGUgb2YgXy5vYmplY3QuXG4gIF8ucGFpcnMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgcGFpcnMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07XG4gICAgfVxuICAgIHJldHVybiBwYWlycztcbiAgfTtcblxuICAvLyBJbnZlcnQgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiBhbiBvYmplY3QuIFRoZSB2YWx1ZXMgbXVzdCBiZSBzZXJpYWxpemFibGUuXG4gIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdFtvYmpba2V5c1tpXV1dID0ga2V5c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG4gIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgLlxuICBfLmZ1bmN0aW9ucyA9IF8ubWV0aG9kcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBuYW1lcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgIGlmIChfLmlzRnVuY3Rpb24ob2JqW2tleV0pKSBuYW1lcy5wdXNoKGtleSk7XG4gICAgfVxuICAgIHJldHVybiBuYW1lcy5zb3J0KCk7XG4gIH07XG5cbiAgLy8gQW4gaW50ZXJuYWwgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGFzc2lnbmVyIGZ1bmN0aW9ucy5cbiAgdmFyIGNyZWF0ZUFzc2lnbmVyID0gZnVuY3Rpb24oa2V5c0Z1bmMsIGRlZmF1bHRzKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpZiAoZGVmYXVsdHMpIG9iaiA9IE9iamVjdChvYmopO1xuICAgICAgaWYgKGxlbmd0aCA8IDIgfHwgb2JqID09IG51bGwpIHJldHVybiBvYmo7XG4gICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdLFxuICAgICAgICAgICAga2V5cyA9IGtleXNGdW5jKHNvdXJjZSksXG4gICAgICAgICAgICBsID0ga2V5cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgaWYgKCFkZWZhdWx0cyB8fCBvYmpba2V5XSA9PT0gdm9pZCAwKSBvYmpba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gb2JqO1xuICAgIH07XG4gIH07XG5cbiAgLy8gRXh0ZW5kIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBwcm9wZXJ0aWVzIGluIHBhc3NlZC1pbiBvYmplY3QocykuXG4gIF8uZXh0ZW5kID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzKTtcblxuICAvLyBBc3NpZ25zIGEgZ2l2ZW4gb2JqZWN0IHdpdGggYWxsIHRoZSBvd24gcHJvcGVydGllcyBpbiB0aGUgcGFzc2VkLWluIG9iamVjdChzKS5cbiAgLy8gKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9hc3NpZ24pXG4gIF8uZXh0ZW5kT3duID0gXy5hc3NpZ24gPSBjcmVhdGVBc3NpZ25lcihfLmtleXMpO1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGtleSBvbiBhbiBvYmplY3QgdGhhdCBwYXNzZXMgYSBwcmVkaWNhdGUgdGVzdC5cbiAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTtcbiAgICB9XG4gIH07XG5cbiAgLy8gSW50ZXJuYWwgcGljayBoZWxwZXIgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGlmIGBvYmpgIGhhcyBrZXkgYGtleWAuXG4gIHZhciBrZXlJbk9iaiA9IGZ1bmN0aW9uKHZhbHVlLCBrZXksIG9iaikge1xuICAgIHJldHVybiBrZXkgaW4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCBvbmx5IGNvbnRhaW5pbmcgdGhlIHdoaXRlbGlzdGVkIHByb3BlcnRpZXMuXG4gIF8ucGljayA9IHJlc3RBcmd1bWVudHMoZnVuY3Rpb24ob2JqLCBrZXlzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9LCBpdGVyYXRlZSA9IGtleXNbMF07XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKSB7XG4gICAgICBpZiAoa2V5cy5sZW5ndGggPiAxKSBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGtleXNbMV0pO1xuICAgICAga2V5cyA9IF8uYWxsS2V5cyhvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGtleUluT2JqO1xuICAgICAga2V5cyA9IGZsYXR0ZW4oa2V5cywgZmFsc2UsIGZhbHNlKTtcbiAgICAgIG9iaiA9IE9iamVjdChvYmopO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICB2YXIgdmFsdWUgPSBvYmpba2V5XTtcbiAgICAgIGlmIChpdGVyYXRlZSh2YWx1ZSwga2V5LCBvYmopKSByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcblxuICAvLyBSZXR1cm4gYSBjb3B5IG9mIHRoZSBvYmplY3Qgd2l0aG91dCB0aGUgYmxhY2tsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5vbWl0ID0gcmVzdEFyZ3VtZW50cyhmdW5jdGlvbihvYmosIGtleXMpIHtcbiAgICB2YXIgaXRlcmF0ZWUgPSBrZXlzWzBdLCBjb250ZXh0O1xuICAgIGlmIChfLmlzRnVuY3Rpb24oaXRlcmF0ZWUpKSB7XG4gICAgICBpdGVyYXRlZSA9IF8ubmVnYXRlKGl0ZXJhdGVlKTtcbiAgICAgIGlmIChrZXlzLmxlbmd0aCA+IDEpIGNvbnRleHQgPSBrZXlzWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBrZXlzID0gXy5tYXAoZmxhdHRlbihrZXlzLCBmYWxzZSwgZmFsc2UpLCBTdHJpbmcpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiAhXy5jb250YWlucyhrZXlzLCBrZXkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgfSk7XG5cbiAgLy8gRmlsbCBpbiBhIGdpdmVuIG9iamVjdCB3aXRoIGRlZmF1bHQgcHJvcGVydGllcy5cbiAgXy5kZWZhdWx0cyA9IGNyZWF0ZUFzc2lnbmVyKF8uYWxsS2V5cywgdHJ1ZSk7XG5cbiAgLy8gQ3JlYXRlcyBhbiBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIHRoZSBnaXZlbiBwcm90b3R5cGUgb2JqZWN0LlxuICAvLyBJZiBhZGRpdGlvbmFsIHByb3BlcnRpZXMgYXJlIHByb3ZpZGVkIHRoZW4gdGhleSB3aWxsIGJlIGFkZGVkIHRvIHRoZVxuICAvLyBjcmVhdGVkIG9iamVjdC5cbiAgXy5jcmVhdGUgPSBmdW5jdGlvbihwcm90b3R5cGUsIHByb3BzKSB7XG4gICAgdmFyIHJlc3VsdCA9IGJhc2VDcmVhdGUocHJvdG90eXBlKTtcbiAgICBpZiAocHJvcHMpIF8uZXh0ZW5kT3duKHJlc3VsdCwgcHJvcHMpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gQ3JlYXRlIGEgKHNoYWxsb3ctY2xvbmVkKSBkdXBsaWNhdGUgb2YgYW4gb2JqZWN0LlxuICBfLmNsb25lID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBvYmo7XG4gICAgcmV0dXJuIF8uaXNBcnJheShvYmopID8gb2JqLnNsaWNlKCkgOiBfLmV4dGVuZCh7fSwgb2JqKTtcbiAgfTtcblxuICAvLyBJbnZva2VzIGludGVyY2VwdG9yIHdpdGggdGhlIG9iaiwgYW5kIHRoZW4gcmV0dXJucyBvYmouXG4gIC8vIFRoZSBwcmltYXJ5IHB1cnBvc2Ugb2YgdGhpcyBtZXRob2QgaXMgdG8gXCJ0YXAgaW50b1wiIGEgbWV0aG9kIGNoYWluLCBpblxuICAvLyBvcmRlciB0byBwZXJmb3JtIG9wZXJhdGlvbnMgb24gaW50ZXJtZWRpYXRlIHJlc3VsdHMgd2l0aGluIHRoZSBjaGFpbi5cbiAgXy50YXAgPSBmdW5jdGlvbihvYmosIGludGVyY2VwdG9yKSB7XG4gICAgaW50ZXJjZXB0b3Iob2JqKTtcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuXG4gIC8vIFJldHVybnMgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmlzTWF0Y2ggPSBmdW5jdGlvbihvYmplY3QsIGF0dHJzKSB7XG4gICAgdmFyIGtleXMgPSBfLmtleXMoYXR0cnMpLCBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHJldHVybiAhbGVuZ3RoO1xuICAgIHZhciBvYmogPSBPYmplY3Qob2JqZWN0KTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChhdHRyc1trZXldICE9PSBvYmpba2V5XSB8fCAhKGtleSBpbiBvYmopKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG5cbiAgLy8gSW50ZXJuYWwgcmVjdXJzaXZlIGNvbXBhcmlzb24gZnVuY3Rpb24gZm9yIGBpc0VxdWFsYC5cbiAgdmFyIGVxLCBkZWVwRXE7XG4gIGVxID0gZnVuY3Rpb24oYSwgYiwgYVN0YWNrLCBiU3RhY2spIHtcbiAgICAvLyBJZGVudGljYWwgb2JqZWN0cyBhcmUgZXF1YWwuIGAwID09PSAtMGAsIGJ1dCB0aGV5IGFyZW4ndCBpZGVudGljYWwuXG4gICAgLy8gU2VlIHRoZSBbSGFybW9ueSBgZWdhbGAgcHJvcG9zYWxdKGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPWhhcm1vbnk6ZWdhbCkuXG4gICAgaWYgKGEgPT09IGIpIHJldHVybiBhICE9PSAwIHx8IDEgLyBhID09PSAxIC8gYjtcbiAgICAvLyBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgb25seSBlcXVhbCB0byBpdHNlbGYgKHN0cmljdCBjb21wYXJpc29uKS5cbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIC8vIGBOYU5gcyBhcmUgZXF1aXZhbGVudCwgYnV0IG5vbi1yZWZsZXhpdmUuXG4gICAgaWYgKGEgIT09IGEpIHJldHVybiBiICE9PSBiO1xuICAgIC8vIEV4aGF1c3QgcHJpbWl0aXZlIGNoZWNrc1xuICAgIHZhciB0eXBlID0gdHlwZW9mIGE7XG4gICAgaWYgKHR5cGUgIT09ICdmdW5jdGlvbicgJiYgdHlwZSAhPT0gJ29iamVjdCcgJiYgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gZGVlcEVxKGEsIGIsIGFTdGFjaywgYlN0YWNrKTtcbiAgfTtcblxuICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLlxuICBkZWVwRXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykge1xuICAgIC8vIFVud3JhcCBhbnkgd3JhcHBlZCBvYmplY3RzLlxuICAgIGlmIChhIGluc3RhbmNlb2YgXykgYSA9IGEuX3dyYXBwZWQ7XG4gICAgaWYgKGIgaW5zdGFuY2VvZiBfKSBiID0gYi5fd3JhcHBlZDtcbiAgICAvLyBDb21wYXJlIGBbW0NsYXNzXV1gIG5hbWVzLlxuICAgIHZhciBjbGFzc05hbWUgPSB0b1N0cmluZy5jYWxsKGEpO1xuICAgIGlmIChjbGFzc05hbWUgIT09IHRvU3RyaW5nLmNhbGwoYikpIHJldHVybiBmYWxzZTtcbiAgICBzd2l0Y2ggKGNsYXNzTmFtZSkge1xuICAgICAgLy8gU3RyaW5ncywgbnVtYmVycywgcmVndWxhciBleHByZXNzaW9ucywgZGF0ZXMsIGFuZCBib29sZWFucyBhcmUgY29tcGFyZWQgYnkgdmFsdWUuXG4gICAgICBjYXNlICdbb2JqZWN0IFJlZ0V4cF0nOlxuICAgICAgLy8gUmVnRXhwcyBhcmUgY29lcmNlZCB0byBzdHJpbmdzIGZvciBjb21wYXJpc29uIChOb3RlOiAnJyArIC9hL2kgPT09ICcvYS9pJylcbiAgICAgIGNhc2UgJ1tvYmplY3QgU3RyaW5nXSc6XG4gICAgICAgIC8vIFByaW1pdGl2ZXMgYW5kIHRoZWlyIGNvcnJlc3BvbmRpbmcgb2JqZWN0IHdyYXBwZXJzIGFyZSBlcXVpdmFsZW50OyB0aHVzLCBgXCI1XCJgIGlzXG4gICAgICAgIC8vIGVxdWl2YWxlbnQgdG8gYG5ldyBTdHJpbmcoXCI1XCIpYC5cbiAgICAgICAgcmV0dXJuICcnICsgYSA9PT0gJycgKyBiO1xuICAgICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgICAgLy8gYE5hTmBzIGFyZSBlcXVpdmFsZW50LCBidXQgbm9uLXJlZmxleGl2ZS5cbiAgICAgICAgLy8gT2JqZWN0KE5hTikgaXMgZXF1aXZhbGVudCB0byBOYU4uXG4gICAgICAgIGlmICgrYSAhPT0gK2EpIHJldHVybiArYiAhPT0gK2I7XG4gICAgICAgIC8vIEFuIGBlZ2FsYCBjb21wYXJpc29uIGlzIHBlcmZvcm1lZCBmb3Igb3RoZXIgbnVtZXJpYyB2YWx1ZXMuXG4gICAgICAgIHJldHVybiArYSA9PT0gMCA/IDEgLyArYSA9PT0gMSAvIGIgOiArYSA9PT0gK2I7XG4gICAgICBjYXNlICdbb2JqZWN0IERhdGVdJzpcbiAgICAgIGNhc2UgJ1tvYmplY3QgQm9vbGVhbl0nOlxuICAgICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWVyaWMgcHJpbWl0aXZlIHZhbHVlcy4gRGF0ZXMgYXJlIGNvbXBhcmVkIGJ5IHRoZWlyXG4gICAgICAgIC8vIG1pbGxpc2Vjb25kIHJlcHJlc2VudGF0aW9ucy4gTm90ZSB0aGF0IGludmFsaWQgZGF0ZXMgd2l0aCBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnNcbiAgICAgICAgLy8gb2YgYE5hTmAgYXJlIG5vdCBlcXVpdmFsZW50LlxuICAgICAgICByZXR1cm4gK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBTeW1ib2xdJzpcbiAgICAgICAgcmV0dXJuIFN5bWJvbFByb3RvLnZhbHVlT2YuY2FsbChhKSA9PT0gU3ltYm9sUHJvdG8udmFsdWVPZi5jYWxsKGIpO1xuICAgIH1cblxuICAgIHZhciBhcmVBcnJheXMgPSBjbGFzc05hbWUgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgaWYgKCFhcmVBcnJheXMpIHtcbiAgICAgIGlmICh0eXBlb2YgYSAhPSAnb2JqZWN0JyB8fCB0eXBlb2YgYiAhPSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBPYmplY3RzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWl2YWxlbnQsIGJ1dCBgT2JqZWN0YHMgb3IgYEFycmF5YHNcbiAgICAgIC8vIGZyb20gZGlmZmVyZW50IGZyYW1lcyBhcmUuXG4gICAgICB2YXIgYUN0b3IgPSBhLmNvbnN0cnVjdG9yLCBiQ3RvciA9IGIuY29uc3RydWN0b3I7XG4gICAgICBpZiAoYUN0b3IgIT09IGJDdG9yICYmICEoXy5pc0Z1bmN0aW9uKGFDdG9yKSAmJiBhQ3RvciBpbnN0YW5jZW9mIGFDdG9yICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5pc0Z1bmN0aW9uKGJDdG9yKSAmJiBiQ3RvciBpbnN0YW5jZW9mIGJDdG9yKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAmJiAoJ2NvbnN0cnVjdG9yJyBpbiBhICYmICdjb25zdHJ1Y3RvcicgaW4gYikpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBBc3N1bWUgZXF1YWxpdHkgZm9yIGN5Y2xpYyBzdHJ1Y3R1cmVzLiBUaGUgYWxnb3JpdGhtIGZvciBkZXRlY3RpbmcgY3ljbGljXG4gICAgLy8gc3RydWN0dXJlcyBpcyBhZGFwdGVkIGZyb20gRVMgNS4xIHNlY3Rpb24gMTUuMTIuMywgYWJzdHJhY3Qgb3BlcmF0aW9uIGBKT2AuXG5cbiAgICAvLyBJbml0aWFsaXppbmcgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgLy8gSXQncyBkb25lIGhlcmUgc2luY2Ugd2Ugb25seSBuZWVkIHRoZW0gZm9yIG9iamVjdHMgYW5kIGFycmF5cyBjb21wYXJpc29uLlxuICAgIGFTdGFjayA9IGFTdGFjayB8fCBbXTtcbiAgICBiU3RhY2sgPSBiU3RhY2sgfHwgW107XG4gICAgdmFyIGxlbmd0aCA9IGFTdGFjay5sZW5ndGg7XG4gICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAvLyBMaW5lYXIgc2VhcmNoLiBQZXJmb3JtYW5jZSBpcyBpbnZlcnNlbHkgcHJvcG9ydGlvbmFsIHRvIHRoZSBudW1iZXIgb2ZcbiAgICAgIC8vIHVuaXF1ZSBuZXN0ZWQgc3RydWN0dXJlcy5cbiAgICAgIGlmIChhU3RhY2tbbGVuZ3RoXSA9PT0gYSkgcmV0dXJuIGJTdGFja1tsZW5ndGhdID09PSBiO1xuICAgIH1cblxuICAgIC8vIEFkZCB0aGUgZmlyc3Qgb2JqZWN0IHRvIHRoZSBzdGFjayBvZiB0cmF2ZXJzZWQgb2JqZWN0cy5cbiAgICBhU3RhY2sucHVzaChhKTtcbiAgICBiU3RhY2sucHVzaChiKTtcblxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyBhbmQgYXJyYXlzLlxuICAgIGlmIChhcmVBcnJheXMpIHtcbiAgICAgIC8vIENvbXBhcmUgYXJyYXkgbGVuZ3RocyB0byBkZXRlcm1pbmUgaWYgYSBkZWVwIGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5LlxuICAgICAgbGVuZ3RoID0gYS5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gRGVlcCBjb21wYXJlIHRoZSBjb250ZW50cywgaWdub3Jpbmcgbm9uLW51bWVyaWMgcHJvcGVydGllcy5cbiAgICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBpZiAoIWVxKGFbbGVuZ3RoXSwgYltsZW5ndGhdLCBhU3RhY2ssIGJTdGFjaykpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRGVlcCBjb21wYXJlIG9iamVjdHMuXG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhhKSwga2V5O1xuICAgICAgbGVuZ3RoID0ga2V5cy5sZW5ndGg7XG4gICAgICAvLyBFbnN1cmUgdGhhdCBib3RoIG9iamVjdHMgY29udGFpbiB0aGUgc2FtZSBudW1iZXIgb2YgcHJvcGVydGllcyBiZWZvcmUgY29tcGFyaW5nIGRlZXAgZXF1YWxpdHkuXG4gICAgICBpZiAoXy5rZXlzKGIpLmxlbmd0aCAhPT0gbGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgLy8gRGVlcCBjb21wYXJlIGVhY2ggbWVtYmVyXG4gICAgICAgIGtleSA9IGtleXNbbGVuZ3RoXTtcbiAgICAgICAgaWYgKCEoaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnBvcCgpO1xuICAgIGJTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cbiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBlcShhLCBiKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT9cbiAgLy8gQW4gXCJlbXB0eVwiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy5cbiAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50P1xuICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuICBfLmlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IsIGlzTWFwLCBpc1dlYWtNYXAsIGlzU2V0LCBpc1dlYWtTZXQuXG4gIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJywgJ1N5bWJvbCcsICdNYXAnLCAnV2Vha01hcCcsICdTZXQnLCAnV2Vha1NldCddLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgX1snaXMnICsgbmFtZV0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0ICcgKyBuYW1lICsgJ10nO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIERlZmluZSBhIGZhbGxiYWNrIHZlcnNpb24gb2YgdGhlIG1ldGhvZCBpbiBicm93c2VycyAoYWhlbSwgSUUgPCA5KSwgd2hlcmVcbiAgLy8gdGhlcmUgaXNuJ3QgYW55IGluc3BlY3RhYmxlIFwiQXJndW1lbnRzXCIgdHlwZS5cbiAgaWYgKCFfLmlzQXJndW1lbnRzKGFyZ3VtZW50cykpIHtcbiAgICBfLmlzQXJndW1lbnRzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gaGFzKG9iaiwgJ2NhbGxlZScpO1xuICAgIH07XG4gIH1cblxuICAvLyBPcHRpbWl6ZSBgaXNGdW5jdGlvbmAgaWYgYXBwcm9wcmlhdGUuIFdvcmsgYXJvdW5kIHNvbWUgdHlwZW9mIGJ1Z3MgaW4gb2xkIHY4LFxuICAvLyBJRSAxMSAoIzE2MjEpLCBTYWZhcmkgOCAoIzE5MjkpLCBhbmQgUGhhbnRvbUpTICgjMjIzNikuXG4gIHZhciBub2RlbGlzdCA9IHJvb3QuZG9jdW1lbnQgJiYgcm9vdC5kb2N1bWVudC5jaGlsZE5vZGVzO1xuICBpZiAodHlwZW9mIC8uLyAhPSAnZnVuY3Rpb24nICYmIHR5cGVvZiBJbnQ4QXJyYXkgIT0gJ29iamVjdCcgJiYgdHlwZW9mIG5vZGVsaXN0ICE9ICdmdW5jdGlvbicpIHtcbiAgICBfLmlzRnVuY3Rpb24gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09ICdmdW5jdGlvbicgfHwgZmFsc2U7XG4gICAgfTtcbiAgfVxuXG4gIC8vIElzIGEgZ2l2ZW4gb2JqZWN0IGEgZmluaXRlIG51bWJlcj9cbiAgXy5pc0Zpbml0ZSA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiAhXy5pc1N5bWJvbChvYmopICYmIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gP1xuICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBpc05hTihvYmopO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgYSBib29sZWFuP1xuICBfLmlzQm9vbGVhbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHRydWUgfHwgb2JqID09PSBmYWxzZSB8fCB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEJvb2xlYW5dJztcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGVxdWFsIHRvIG51bGw/XG4gIF8uaXNOdWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gbnVsbDtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhcmlhYmxlIHVuZGVmaW5lZD9cbiAgXy5pc1VuZGVmaW5lZCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT09IHZvaWQgMDtcbiAgfTtcblxuICAvLyBTaG9ydGN1dCBmdW5jdGlvbiBmb3IgY2hlY2tpbmcgaWYgYW4gb2JqZWN0IGhhcyBhIGdpdmVuIHByb3BlcnR5IGRpcmVjdGx5XG4gIC8vIG9uIGl0c2VsZiAoaW4gb3RoZXIgd29yZHMsIG5vdCBvbiBhIHByb3RvdHlwZSkuXG4gIF8uaGFzID0gZnVuY3Rpb24ob2JqLCBwYXRoKSB7XG4gICAgaWYgKCFfLmlzQXJyYXkocGF0aCkpIHtcbiAgICAgIHJldHVybiBoYXMob2JqLCBwYXRoKTtcbiAgICB9XG4gICAgdmFyIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBwYXRoW2ldO1xuICAgICAgaWYgKG9iaiA9PSBudWxsIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBvYmogPSBvYmpba2V5XTtcbiAgICB9XG4gICAgcmV0dXJuICEhbGVuZ3RoO1xuICB9O1xuXG4gIC8vIFV0aWxpdHkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gUnVuIFVuZGVyc2NvcmUuanMgaW4gKm5vQ29uZmxpY3QqIG1vZGUsIHJldHVybmluZyB0aGUgYF9gIHZhcmlhYmxlIHRvIGl0c1xuICAvLyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8ubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuXyA9IHByZXZpb3VzVW5kZXJzY29yZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvLyBLZWVwIHRoZSBpZGVudGl0eSBmdW5jdGlvbiBhcm91bmQgZm9yIGRlZmF1bHQgaXRlcmF0ZWVzLlxuICBfLmlkZW50aXR5ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgLy8gUHJlZGljYXRlLWdlbmVyYXRpbmcgZnVuY3Rpb25zLiBPZnRlbiB1c2VmdWwgb3V0c2lkZSBvZiBVbmRlcnNjb3JlLlxuICBfLmNvbnN0YW50ID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfTtcbiAgfTtcblxuICBfLm5vb3AgPSBmdW5jdGlvbigpe307XG5cbiAgLy8gQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQsIHdoZW4gcGFzc2VkIGFuIG9iamVjdCwgd2lsbCB0cmF2ZXJzZSB0aGF0IG9iamVjdOKAmXNcbiAgLy8gcHJvcGVydGllcyBkb3duIHRoZSBnaXZlbiBgcGF0aGAsIHNwZWNpZmllZCBhcyBhbiBhcnJheSBvZiBrZXlzIG9yIGluZGV4ZXMuXG4gIF8ucHJvcGVydHkgPSBmdW5jdGlvbihwYXRoKSB7XG4gICAgaWYgKCFfLmlzQXJyYXkocGF0aCkpIHtcbiAgICAgIHJldHVybiBzaGFsbG93UHJvcGVydHkocGF0aCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBkZWVwR2V0KG9iaiwgcGF0aCk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZXMgYSBmdW5jdGlvbiBmb3IgYSBnaXZlbiBvYmplY3QgdGhhdCByZXR1cm5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIGlmIChvYmogPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCl7fTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHBhdGgpIHtcbiAgICAgIHJldHVybiAhXy5pc0FycmF5KHBhdGgpID8gb2JqW3BhdGhdIDogZGVlcEdldChvYmosIHBhdGgpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mXG4gIC8vIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLm1hdGNoZXIgPSBfLm1hdGNoZXMgPSBmdW5jdGlvbihhdHRycykge1xuICAgIGF0dHJzID0gXy5leHRlbmRPd24oe30sIGF0dHJzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5pc01hdGNoKG9iaiwgYXR0cnMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG4gIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBhY2N1bSA9IEFycmF5KE1hdGgubWF4KDAsIG4pKTtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpO1xuICAgIHJldHVybiBhY2N1bTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4IChpbmNsdXNpdmUpLlxuICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgaWYgKG1heCA9PSBudWxsKSB7XG4gICAgICBtYXggPSBtaW47XG4gICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgfTtcblxuICAvLyBBIChwb3NzaWJseSBmYXN0ZXIpIHdheSB0byBnZXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFzIGFuIGludGVnZXIuXG4gIF8ubm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9O1xuXG4gIC8vIExpc3Qgb2YgSFRNTCBlbnRpdGllcyBmb3IgZXNjYXBpbmcuXG4gIHZhciBlc2NhcGVNYXAgPSB7XG4gICAgJyYnOiAnJmFtcDsnLFxuICAgICc8JzogJyZsdDsnLFxuICAgICc+JzogJyZndDsnLFxuICAgICdcIic6ICcmcXVvdDsnLFxuICAgIFwiJ1wiOiAnJiN4Mjc7JyxcbiAgICAnYCc6ICcmI3g2MDsnXG4gIH07XG4gIHZhciB1bmVzY2FwZU1hcCA9IF8uaW52ZXJ0KGVzY2FwZU1hcCk7XG5cbiAgLy8gRnVuY3Rpb25zIGZvciBlc2NhcGluZyBhbmQgdW5lc2NhcGluZyBzdHJpbmdzIHRvL2Zyb20gSFRNTCBpbnRlcnBvbGF0aW9uLlxuICB2YXIgY3JlYXRlRXNjYXBlciA9IGZ1bmN0aW9uKG1hcCkge1xuICAgIHZhciBlc2NhcGVyID0gZnVuY3Rpb24obWF0Y2gpIHtcbiAgICAgIHJldHVybiBtYXBbbWF0Y2hdO1xuICAgIH07XG4gICAgLy8gUmVnZXhlcyBmb3IgaWRlbnRpZnlpbmcgYSBrZXkgdGhhdCBuZWVkcyB0byBiZSBlc2NhcGVkLlxuICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJztcbiAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpO1xuICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7XG4gICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBfLmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTtcbiAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApO1xuXG4gIC8vIFRyYXZlcnNlcyB0aGUgY2hpbGRyZW4gb2YgYG9iamAgYWxvbmcgYHBhdGhgLiBJZiBhIGNoaWxkIGlzIGEgZnVuY3Rpb24sIGl0XG4gIC8vIGlzIGludm9rZWQgd2l0aCBpdHMgcGFyZW50IGFzIGNvbnRleHQuIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaW5hbFxuICAvLyBjaGlsZCwgb3IgYGZhbGxiYWNrYCBpZiBhbnkgY2hpbGQgaXMgdW5kZWZpbmVkLlxuICBfLnJlc3VsdCA9IGZ1bmN0aW9uKG9iaiwgcGF0aCwgZmFsbGJhY2spIHtcbiAgICBpZiAoIV8uaXNBcnJheShwYXRoKSkgcGF0aCA9IFtwYXRoXTtcbiAgICB2YXIgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG4gICAgaWYgKCFsZW5ndGgpIHtcbiAgICAgIHJldHVybiBfLmlzRnVuY3Rpb24oZmFsbGJhY2spID8gZmFsbGJhY2suY2FsbChvYmopIDogZmFsbGJhY2s7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwcm9wID0gb2JqID09IG51bGwgPyB2b2lkIDAgOiBvYmpbcGF0aFtpXV07XG4gICAgICBpZiAocHJvcCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHByb3AgPSBmYWxsYmFjaztcbiAgICAgICAgaSA9IGxlbmd0aDsgLy8gRW5zdXJlIHdlIGRvbid0IGNvbnRpbnVlIGl0ZXJhdGluZy5cbiAgICAgIH1cbiAgICAgIG9iaiA9IF8uaXNGdW5jdGlvbihwcm9wKSA/IHByb3AuY2FsbChvYmopIDogcHJvcDtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfTtcblxuICAvLyBHZW5lcmF0ZSBhIHVuaXF1ZSBpbnRlZ2VyIGlkICh1bmlxdWUgd2l0aGluIHRoZSBlbnRpcmUgY2xpZW50IHNlc3Npb24pLlxuICAvLyBVc2VmdWwgZm9yIHRlbXBvcmFyeSBET00gaWRzLlxuICB2YXIgaWRDb3VudGVyID0gMDtcbiAgXy51bmlxdWVJZCA9IGZ1bmN0aW9uKHByZWZpeCkge1xuICAgIHZhciBpZCA9ICsraWRDb3VudGVyICsgJyc7XG4gICAgcmV0dXJuIHByZWZpeCA/IHByZWZpeCArIGlkIDogaWQ7XG4gIH07XG5cbiAgLy8gQnkgZGVmYXVsdCwgVW5kZXJzY29yZSB1c2VzIEVSQi1zdHlsZSB0ZW1wbGF0ZSBkZWxpbWl0ZXJzLCBjaGFuZ2UgdGhlXG4gIC8vIGZvbGxvd2luZyB0ZW1wbGF0ZSBzZXR0aW5ncyB0byB1c2UgYWx0ZXJuYXRpdmUgZGVsaW1pdGVycy5cbiAgXy50ZW1wbGF0ZVNldHRpbmdzID0ge1xuICAgIGV2YWx1YXRlOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgIGludGVycG9sYXRlOiAvPCU9KFtcXHNcXFNdKz8pJT4vZyxcbiAgICBlc2NhcGU6IC88JS0oW1xcc1xcU10rPyklPi9nXG4gIH07XG5cbiAgLy8gV2hlbiBjdXN0b21pemluZyBgdGVtcGxhdGVTZXR0aW5nc2AsIGlmIHlvdSBkb24ndCB3YW50IHRvIGRlZmluZSBhblxuICAvLyBpbnRlcnBvbGF0aW9uLCBldmFsdWF0aW9uIG9yIGVzY2FwaW5nIHJlZ2V4LCB3ZSBuZWVkIG9uZSB0aGF0IGlzXG4gIC8vIGd1YXJhbnRlZWQgbm90IHRvIG1hdGNoLlxuICB2YXIgbm9NYXRjaCA9IC8oLileLztcblxuICAvLyBDZXJ0YWluIGNoYXJhY3RlcnMgbmVlZCB0byBiZSBlc2NhcGVkIHNvIHRoYXQgdGhleSBjYW4gYmUgcHV0IGludG8gYVxuICAvLyBzdHJpbmcgbGl0ZXJhbC5cbiAgdmFyIGVzY2FwZXMgPSB7XG4gICAgXCInXCI6IFwiJ1wiLFxuICAgICdcXFxcJzogJ1xcXFwnLFxuICAgICdcXHInOiAncicsXG4gICAgJ1xcbic6ICduJyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgdmFyIGVzY2FwZVJlZ0V4cCA9IC9cXFxcfCd8XFxyfFxcbnxcXHUyMDI4fFxcdTIwMjkvZztcblxuICB2YXIgZXNjYXBlQ2hhciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgcmV0dXJuICdcXFxcJyArIGVzY2FwZXNbbWF0Y2hdO1xuICB9O1xuXG4gIC8vIEphdmFTY3JpcHQgbWljcm8tdGVtcGxhdGluZywgc2ltaWxhciB0byBKb2huIFJlc2lnJ3MgaW1wbGVtZW50YXRpb24uXG4gIC8vIFVuZGVyc2NvcmUgdGVtcGxhdGluZyBoYW5kbGVzIGFyYml0cmFyeSBkZWxpbWl0ZXJzLCBwcmVzZXJ2ZXMgd2hpdGVzcGFjZSxcbiAgLy8gYW5kIGNvcnJlY3RseSBlc2NhcGVzIHF1b3RlcyB3aXRoaW4gaW50ZXJwb2xhdGVkIGNvZGUuXG4gIC8vIE5COiBgb2xkU2V0dGluZ3NgIG9ubHkgZXhpc3RzIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgXy50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHRleHQsIHNldHRpbmdzLCBvbGRTZXR0aW5ncykge1xuICAgIGlmICghc2V0dGluZ3MgJiYgb2xkU2V0dGluZ3MpIHNldHRpbmdzID0gb2xkU2V0dGluZ3M7XG4gICAgc2V0dGluZ3MgPSBfLmRlZmF1bHRzKHt9LCBzZXR0aW5ncywgXy50ZW1wbGF0ZVNldHRpbmdzKTtcblxuICAgIC8vIENvbWJpbmUgZGVsaW1pdGVycyBpbnRvIG9uZSByZWd1bGFyIGV4cHJlc3Npb24gdmlhIGFsdGVybmF0aW9uLlxuICAgIHZhciBtYXRjaGVyID0gUmVnRXhwKFtcbiAgICAgIChzZXR0aW5ncy5lc2NhcGUgfHwgbm9NYXRjaCkuc291cmNlLFxuICAgICAgKHNldHRpbmdzLmludGVycG9sYXRlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5ldmFsdWF0ZSB8fCBub01hdGNoKS5zb3VyY2VcbiAgICBdLmpvaW4oJ3wnKSArICd8JCcsICdnJyk7XG5cbiAgICAvLyBDb21waWxlIHRoZSB0ZW1wbGF0ZSBzb3VyY2UsIGVzY2FwaW5nIHN0cmluZyBsaXRlcmFscyBhcHByb3ByaWF0ZWx5LlxuICAgIHZhciBpbmRleCA9IDA7XG4gICAgdmFyIHNvdXJjZSA9IFwiX19wKz0nXCI7XG4gICAgdGV4dC5yZXBsYWNlKG1hdGNoZXIsIGZ1bmN0aW9uKG1hdGNoLCBlc2NhcGUsIGludGVycG9sYXRlLCBldmFsdWF0ZSwgb2Zmc2V0KSB7XG4gICAgICBzb3VyY2UgKz0gdGV4dC5zbGljZShpbmRleCwgb2Zmc2V0KS5yZXBsYWNlKGVzY2FwZVJlZ0V4cCwgZXNjYXBlQ2hhcik7XG4gICAgICBpbmRleCA9IG9mZnNldCArIG1hdGNoLmxlbmd0aDtcblxuICAgICAgaWYgKGVzY2FwZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGVzY2FwZSArIFwiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChpbnRlcnBvbGF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInK1xcbigoX190PShcIiArIGludGVycG9sYXRlICsgXCIpKT09bnVsbD8nJzpfX3QpK1xcbidcIjtcbiAgICAgIH0gZWxzZSBpZiAoZXZhbHVhdGUpIHtcbiAgICAgICAgc291cmNlICs9IFwiJztcXG5cIiArIGV2YWx1YXRlICsgXCJcXG5fX3ArPSdcIjtcbiAgICAgIH1cblxuICAgICAgLy8gQWRvYmUgVk1zIG5lZWQgdGhlIG1hdGNoIHJldHVybmVkIHRvIHByb2R1Y2UgdGhlIGNvcnJlY3Qgb2Zmc2V0LlxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0pO1xuICAgIHNvdXJjZSArPSBcIic7XFxuXCI7XG5cbiAgICAvLyBJZiBhIHZhcmlhYmxlIGlzIG5vdCBzcGVjaWZpZWQsIHBsYWNlIGRhdGEgdmFsdWVzIGluIGxvY2FsIHNjb3BlLlxuICAgIGlmICghc2V0dGluZ3MudmFyaWFibGUpIHNvdXJjZSA9ICd3aXRoKG9ianx8e30pe1xcbicgKyBzb3VyY2UgKyAnfVxcbic7XG5cbiAgICBzb3VyY2UgPSBcInZhciBfX3QsX19wPScnLF9faj1BcnJheS5wcm90b3R5cGUuam9pbixcIiArXG4gICAgICBcInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XFxuXCIgK1xuICAgICAgc291cmNlICsgJ3JldHVybiBfX3A7XFxuJztcblxuICAgIHZhciByZW5kZXI7XG4gICAgdHJ5IHtcbiAgICAgIHJlbmRlciA9IG5ldyBGdW5jdGlvbihzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJywgJ18nLCBzb3VyY2UpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGUuc291cmNlID0gc291cmNlO1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG5cbiAgICB2YXIgdGVtcGxhdGUgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICByZXR1cm4gcmVuZGVyLmNhbGwodGhpcywgZGF0YSwgXyk7XG4gICAgfTtcblxuICAgIC8vIFByb3ZpZGUgdGhlIGNvbXBpbGVkIHNvdXJjZSBhcyBhIGNvbnZlbmllbmNlIGZvciBwcmVjb21waWxhdGlvbi5cbiAgICB2YXIgYXJndW1lbnQgPSBzZXR0aW5ncy52YXJpYWJsZSB8fCAnb2JqJztcbiAgICB0ZW1wbGF0ZS5zb3VyY2UgPSAnZnVuY3Rpb24oJyArIGFyZ3VtZW50ICsgJyl7XFxuJyArIHNvdXJjZSArICd9JztcblxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfTtcblxuICAvLyBBZGQgYSBcImNoYWluXCIgZnVuY3Rpb24uIFN0YXJ0IGNoYWluaW5nIGEgd3JhcHBlZCBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5jaGFpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBpbnN0YW5jZSA9IF8ob2JqKTtcbiAgICBpbnN0YW5jZS5fY2hhaW4gPSB0cnVlO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfTtcblxuICAvLyBPT1BcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG4gIC8vIElmIFVuZGVyc2NvcmUgaXMgY2FsbGVkIGFzIGEgZnVuY3Rpb24sIGl0IHJldHVybnMgYSB3cmFwcGVkIG9iamVjdCB0aGF0XG4gIC8vIGNhbiBiZSB1c2VkIE9PLXN0eWxlLiBUaGlzIHdyYXBwZXIgaG9sZHMgYWx0ZXJlZCB2ZXJzaW9ucyBvZiBhbGwgdGhlXG4gIC8vIHVuZGVyc2NvcmUgZnVuY3Rpb25zLiBXcmFwcGVkIG9iamVjdHMgbWF5IGJlIGNoYWluZWQuXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnRpbnVlIGNoYWluaW5nIGludGVybWVkaWF0ZSByZXN1bHRzLlxuICB2YXIgY2hhaW5SZXN1bHQgPSBmdW5jdGlvbihpbnN0YW5jZSwgb2JqKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLl9jaGFpbiA/IF8ob2JqKS5jaGFpbigpIDogb2JqO1xuICB9O1xuXG4gIC8vIEFkZCB5b3VyIG93biBjdXN0b20gZnVuY3Rpb25zIHRvIHRoZSBVbmRlcnNjb3JlIG9iamVjdC5cbiAgXy5taXhpbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIF8uZWFjaChfLmZ1bmN0aW9ucyhvYmopLCBmdW5jdGlvbihuYW1lKSB7XG4gICAgICB2YXIgZnVuYyA9IF9bbmFtZV0gPSBvYmpbbmFtZV07XG4gICAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgYXJncyA9IFt0aGlzLl93cmFwcGVkXTtcbiAgICAgICAgcHVzaC5hcHBseShhcmdzLCBhcmd1bWVudHMpO1xuICAgICAgICByZXR1cm4gY2hhaW5SZXN1bHQodGhpcywgZnVuYy5hcHBseShfLCBhcmdzKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICAgIHJldHVybiBfO1xuICB9O1xuXG4gIC8vIEFkZCBhbGwgb2YgdGhlIFVuZGVyc2NvcmUgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgXy5taXhpbihfKTtcblxuICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDtcbiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoKG5hbWUgPT09ICdzaGlmdCcgfHwgbmFtZSA9PT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07XG4gICAgICByZXR1cm4gY2hhaW5SZXN1bHQodGhpcywgb2JqKTtcbiAgICB9O1xuICB9KTtcblxuICAvLyBBZGQgYWxsIGFjY2Vzc29yIEFycmF5IGZ1bmN0aW9ucyB0byB0aGUgd3JhcHBlci5cbiAgXy5lYWNoKFsnY29uY2F0JywgJ2pvaW4nLCAnc2xpY2UnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gY2hhaW5SZXN1bHQodGhpcywgbWV0aG9kLmFwcGx5KHRoaXMuX3dyYXBwZWQsIGFyZ3VtZW50cykpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIEV4dHJhY3RzIHRoZSByZXN1bHQgZnJvbSBhIHdyYXBwZWQgYW5kIGNoYWluZWQgb2JqZWN0LlxuICBfLnByb3RvdHlwZS52YWx1ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIFByb3ZpZGUgdW53cmFwcGluZyBwcm94eSBmb3Igc29tZSBtZXRob2RzIHVzZWQgaW4gZW5naW5lIG9wZXJhdGlvbnNcbiAgLy8gc3VjaCBhcyBhcml0aG1ldGljIGFuZCBKU09OIHN0cmluZ2lmaWNhdGlvbi5cbiAgXy5wcm90b3R5cGUudmFsdWVPZiA9IF8ucHJvdG90eXBlLnRvSlNPTiA9IF8ucHJvdG90eXBlLnZhbHVlO1xuXG4gIF8ucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIFN0cmluZyh0aGlzLl93cmFwcGVkKTtcbiAgfTtcblxuICAvLyBBTUQgcmVnaXN0cmF0aW9uIGhhcHBlbnMgYXQgdGhlIGVuZCBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIEFNRCBsb2FkZXJzXG4gIC8vIHRoYXQgbWF5IG5vdCBlbmZvcmNlIG5leHQtdHVybiBzZW1hbnRpY3Mgb24gbW9kdWxlcy4gRXZlbiB0aG91Z2ggZ2VuZXJhbFxuICAvLyBwcmFjdGljZSBmb3IgQU1EIHJlZ2lzdHJhdGlvbiBpcyB0byBiZSBhbm9ueW1vdXMsIHVuZGVyc2NvcmUgcmVnaXN0ZXJzXG4gIC8vIGFzIGEgbmFtZWQgbW9kdWxlIGJlY2F1c2UsIGxpa2UgalF1ZXJ5LCBpdCBpcyBhIGJhc2UgbGlicmFyeSB0aGF0IGlzXG4gIC8vIHBvcHVsYXIgZW5vdWdoIHRvIGJlIGJ1bmRsZWQgaW4gYSB0aGlyZCBwYXJ0eSBsaWIsIGJ1dCBub3QgYmUgcGFydCBvZlxuICAvLyBhbiBBTUQgbG9hZCByZXF1ZXN0LiBUaG9zZSBjYXNlcyBjb3VsZCBnZW5lcmF0ZSBhbiBlcnJvciB3aGVuIGFuXG4gIC8vIGFub255bW91cyBkZWZpbmUoKSBpcyBjYWxsZWQgb3V0c2lkZSBvZiBhIGxvYWRlciByZXF1ZXN0LlxuICBpZiAodHlwZW9mIGRlZmluZSA9PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoJ3VuZGVyc2NvcmUnLCBbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxufSgpKTtcbiIsIiFmdW5jdGlvbigpe1xuICB2YXIgZDMgPSB7dmVyc2lvbjogXCIzLjUuMTdcIn07IC8vIHNlbXZlclxudmFyIGQzX2RvY3VtZW50ID0gdGhpcy5kb2N1bWVudDtcblxuZnVuY3Rpb24gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGVcbiAgICAgICYmIChub2RlLm93bmVyRG9jdW1lbnQgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgIHx8IG5vZGUuZG9jdW1lbnQgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZSkuZG9jdW1lbnRFbGVtZW50OyAvLyBub2RlIGlzIGEgRG9jdW1lbnRcbn1cblxuZnVuY3Rpb24gZDNfd2luZG93KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGVcbiAgICAgICYmICgobm9kZS5vd25lckRvY3VtZW50ICYmIG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgICB8fCBub2RlLmRlZmF1bHRWaWV3KTsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG5mdW5jdGlvbiBkM19pZGVudGl0eShkKSB7XG4gIHJldHVybiBkO1xufVxuLy8gQ29waWVzIGEgdmFyaWFibGUgbnVtYmVyIG9mIG1ldGhvZHMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0LlxuZDMucmViaW5kID0gZnVuY3Rpb24odGFyZ2V0LCBzb3VyY2UpIHtcbiAgdmFyIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aCwgbWV0aG9kO1xuICB3aGlsZSAoKytpIDwgbikgdGFyZ2V0W21ldGhvZCA9IGFyZ3VtZW50c1tpXV0gPSBkM19yZWJpbmQodGFyZ2V0LCBzb3VyY2UsIHNvdXJjZVttZXRob2RdKTtcbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbi8vIE1ldGhvZCBpcyBhc3N1bWVkIHRvIGJlIGEgc3RhbmRhcmQgRDMgZ2V0dGVyLXNldHRlcjpcbi8vIElmIHBhc3NlZCB3aXRoIG5vIGFyZ3VtZW50cywgZ2V0cyB0aGUgdmFsdWUuXG4vLyBJZiBwYXNzZWQgd2l0aCBhcmd1bWVudHMsIHNldHMgdGhlIHZhbHVlIGFuZCByZXR1cm5zIHRoZSB0YXJnZXQuXG5mdW5jdGlvbiBkM19yZWJpbmQodGFyZ2V0LCBzb3VyY2UsIG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gbWV0aG9kLmFwcGx5KHNvdXJjZSwgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdmFsdWUgPT09IHNvdXJjZSA/IHRhcmdldCA6IHZhbHVlO1xuICB9O1xufVxuZnVuY3Rpb24gZDNfdmVuZG9yU3ltYm9sKG9iamVjdCwgbmFtZSkge1xuICBpZiAobmFtZSBpbiBvYmplY3QpIHJldHVybiBuYW1lO1xuICBuYW1lID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gZDNfdmVuZG9yUHJlZml4ZXMubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgdmFyIHByZWZpeE5hbWUgPSBkM192ZW5kb3JQcmVmaXhlc1tpXSArIG5hbWU7XG4gICAgaWYgKHByZWZpeE5hbWUgaW4gb2JqZWN0KSByZXR1cm4gcHJlZml4TmFtZTtcbiAgfVxufVxuXG52YXIgZDNfdmVuZG9yUHJlZml4ZXMgPSBbXCJ3ZWJraXRcIiwgXCJtc1wiLCBcIm1velwiLCBcIk1velwiLCBcIm9cIiwgXCJPXCJdO1xuZnVuY3Rpb24gZDNfY2xhc3MoY3RvciwgcHJvcGVydGllcykge1xuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdG9yLnByb3RvdHlwZSwga2V5LCB7XG4gICAgICB2YWx1ZTogcHJvcGVydGllc1trZXldLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxufVxuXG5kMy5tYXAgPSBmdW5jdGlvbihvYmplY3QsIGYpIHtcbiAgdmFyIG1hcCA9IG5ldyBkM19NYXA7XG4gIGlmIChvYmplY3QgaW5zdGFuY2VvZiBkM19NYXApIHtcbiAgICBvYmplY3QuZm9yRWFjaChmdW5jdGlvbihrZXksIHZhbHVlKSB7IG1hcC5zZXQoa2V5LCB2YWx1ZSk7IH0pO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xuICAgIHZhciBpID0gLTEsXG4gICAgICAgIG4gPSBvYmplY3QubGVuZ3RoLFxuICAgICAgICBvO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB3aGlsZSAoKytpIDwgbikgbWFwLnNldChpLCBvYmplY3RbaV0pO1xuICAgIGVsc2Ugd2hpbGUgKCsraSA8IG4pIG1hcC5zZXQoZi5jYWxsKG9iamVjdCwgbyA9IG9iamVjdFtpXSwgaSksIG8pO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIG1hcC5zZXQoa2V5LCBvYmplY3Rba2V5XSk7XG4gIH1cbiAgcmV0dXJuIG1hcDtcbn07XG5cbmZ1bmN0aW9uIGQzX01hcCgpIHtcbiAgdGhpcy5fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxudmFyIGQzX21hcF9wcm90byA9IFwiX19wcm90b19fXCIsXG4gICAgZDNfbWFwX3plcm8gPSBcIlxcMFwiO1xuXG5kM19jbGFzcyhkM19NYXAsIHtcbiAgaGFzOiBkM19tYXBfaGFzLFxuICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkpXTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX1tkM19tYXBfZXNjYXBlKGtleSldID0gdmFsdWU7XG4gIH0sXG4gIHJlbW92ZTogZDNfbWFwX3JlbW92ZSxcbiAga2V5czogZDNfbWFwX2tleXMsXG4gIHZhbHVlczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHZhbHVlcy5wdXNoKHRoaXMuX1trZXldKTtcbiAgICByZXR1cm4gdmFsdWVzO1xuICB9LFxuICBlbnRyaWVzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZW50cmllcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGVudHJpZXMucHVzaCh7a2V5OiBkM19tYXBfdW5lc2NhcGUoa2V5KSwgdmFsdWU6IHRoaXMuX1trZXldfSk7XG4gICAgcmV0dXJuIGVudHJpZXM7XG4gIH0sXG4gIHNpemU6IGQzX21hcF9zaXplLFxuICBlbXB0eTogZDNfbWFwX2VtcHR5LFxuICBmb3JFYWNoOiBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgZi5jYWxsKHRoaXMsIGQzX21hcF91bmVzY2FwZShrZXkpLCB0aGlzLl9ba2V5XSk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBkM19tYXBfZXNjYXBlKGtleSkge1xuICByZXR1cm4gKGtleSArPSBcIlwiKSA9PT0gZDNfbWFwX3Byb3RvIHx8IGtleVswXSA9PT0gZDNfbWFwX3plcm8gPyBkM19tYXBfemVybyArIGtleSA6IGtleTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX3VuZXNjYXBlKGtleSkge1xuICByZXR1cm4gKGtleSArPSBcIlwiKVswXSA9PT0gZDNfbWFwX3plcm8gPyBrZXkuc2xpY2UoMSkgOiBrZXk7XG59XG5cbmZ1bmN0aW9uIGQzX21hcF9oYXMoa2V5KSB7XG4gIHJldHVybiBkM19tYXBfZXNjYXBlKGtleSkgaW4gdGhpcy5fO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfcmVtb3ZlKGtleSkge1xuICByZXR1cm4gKGtleSA9IGQzX21hcF9lc2NhcGUoa2V5KSkgaW4gdGhpcy5fICYmIGRlbGV0ZSB0aGlzLl9ba2V5XTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX2tleXMoKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGtleXMucHVzaChkM19tYXBfdW5lc2NhcGUoa2V5KSk7XG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfc2l6ZSgpIHtcbiAgdmFyIHNpemUgPSAwO1xuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSArK3NpemU7XG4gIHJldHVybiBzaXplO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfZW1wdHkoKSB7XG4gIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG52YXIgZDNfYXJyYXlTbGljZSA9IFtdLnNsaWNlLFxuICAgIGQzX2FycmF5ID0gZnVuY3Rpb24obGlzdCkgeyByZXR1cm4gZDNfYXJyYXlTbGljZS5jYWxsKGxpc3QpOyB9OyAvLyBjb252ZXJzaW9uIGZvciBOb2RlTGlzdHNcbmZ1bmN0aW9uIGQzX25vb3AoKSB7fVxuXG5kMy5kaXNwYXRjaCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGlzcGF0Y2ggPSBuZXcgZDNfZGlzcGF0Y2gsXG4gICAgICBpID0gLTEsXG4gICAgICBuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IG4pIGRpc3BhdGNoW2FyZ3VtZW50c1tpXV0gPSBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCk7XG4gIHJldHVybiBkaXNwYXRjaDtcbn07XG5cbmZ1bmN0aW9uIGQzX2Rpc3BhdGNoKCkge31cblxuZDNfZGlzcGF0Y2gucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGkgPSB0eXBlLmluZGV4T2YoXCIuXCIpLFxuICAgICAgbmFtZSA9IFwiXCI7XG5cbiAgLy8gRXh0cmFjdCBvcHRpb25hbCBuYW1lc3BhY2UsIGUuZy4sIFwiY2xpY2suZm9vXCJcbiAgaWYgKGkgPj0gMCkge1xuICAgIG5hbWUgPSB0eXBlLnNsaWNlKGkgKyAxKTtcbiAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBpKTtcbiAgfVxuXG4gIGlmICh0eXBlKSByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDJcbiAgICAgID8gdGhpc1t0eXBlXS5vbihuYW1lKVxuICAgICAgOiB0aGlzW3R5cGVdLm9uKG5hbWUsIGxpc3RlbmVyKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSBmb3IgKHR5cGUgaW4gdGhpcykge1xuICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHRoaXNbdHlwZV0ub24obmFtZSwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5mdW5jdGlvbiBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCkge1xuICB2YXIgbGlzdGVuZXJzID0gW10sXG4gICAgICBsaXN0ZW5lckJ5TmFtZSA9IG5ldyBkM19NYXA7XG5cbiAgZnVuY3Rpb24gZXZlbnQoKSB7XG4gICAgdmFyIHogPSBsaXN0ZW5lcnMsIC8vIGRlZmVuc2l2ZSByZWZlcmVuY2VcbiAgICAgICAgaSA9IC0xLFxuICAgICAgICBuID0gei5sZW5ndGgsXG4gICAgICAgIGw7XG4gICAgd2hpbGUgKCsraSA8IG4pIGlmIChsID0geltpXS5vbikgbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiBkaXNwYXRjaDtcbiAgfVxuXG4gIGV2ZW50Lm9uID0gZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgICB2YXIgbCA9IGxpc3RlbmVyQnlOYW1lLmdldChuYW1lKSxcbiAgICAgICAgaTtcblxuICAgIC8vIHJldHVybiB0aGUgY3VycmVudCBsaXN0ZW5lciwgaWYgYW55XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gbCAmJiBsLm9uO1xuXG4gICAgLy8gcmVtb3ZlIHRoZSBvbGQgbGlzdGVuZXIsIGlmIGFueSAod2l0aCBjb3B5LW9uLXdyaXRlKVxuICAgIGlmIChsKSB7XG4gICAgICBsLm9uID0gbnVsbDtcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5zbGljZSgwLCBpID0gbGlzdGVuZXJzLmluZGV4T2YobCkpLmNvbmNhdChsaXN0ZW5lcnMuc2xpY2UoaSArIDEpKTtcbiAgICAgIGxpc3RlbmVyQnlOYW1lLnJlbW92ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgdGhlIG5ldyBsaXN0ZW5lciwgaWYgYW55XG4gICAgaWYgKGxpc3RlbmVyKSBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lckJ5TmFtZS5zZXQobmFtZSwge29uOiBsaXN0ZW5lcn0pKTtcblxuICAgIHJldHVybiBkaXNwYXRjaDtcbiAgfTtcblxuICByZXR1cm4gZXZlbnQ7XG59XG5cbmQzLmV2ZW50ID0gbnVsbDtcblxuZnVuY3Rpb24gZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpIHtcbiAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gZDNfZXZlbnRTb3VyY2UoKSB7XG4gIHZhciBlID0gZDMuZXZlbnQsIHM7XG4gIHdoaWxlIChzID0gZS5zb3VyY2VFdmVudCkgZSA9IHM7XG4gIHJldHVybiBlO1xufVxuXG4vLyBMaWtlIGQzLmRpc3BhdGNoLCBidXQgZm9yIGN1c3RvbSBldmVudHMgYWJzdHJhY3RpbmcgbmF0aXZlIFVJIGV2ZW50cy4gVGhlc2Vcbi8vIGV2ZW50cyBoYXZlIGEgdGFyZ2V0IGNvbXBvbmVudCAoc3VjaCBhcyBhIGJydXNoKSwgYSB0YXJnZXQgZWxlbWVudCAoc3VjaCBhc1xuLy8gdGhlIHN2ZzpnIGVsZW1lbnQgY29udGFpbmluZyB0aGUgYnJ1c2gpIGFuZCB0aGUgc3RhbmRhcmQgYXJndW1lbnRzIGBkYCAodGhlXG4vLyB0YXJnZXQgZWxlbWVudCdzIGRhdGEpIGFuZCBgaWAgKHRoZSBzZWxlY3Rpb24gaW5kZXggb2YgdGhlIHRhcmdldCBlbGVtZW50KS5cbmZ1bmN0aW9uIGQzX2V2ZW50RGlzcGF0Y2godGFyZ2V0KSB7XG4gIHZhciBkaXNwYXRjaCA9IG5ldyBkM19kaXNwYXRjaCxcbiAgICAgIGkgPSAwLFxuICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraSA8IG4pIGRpc3BhdGNoW2FyZ3VtZW50c1tpXV0gPSBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCk7XG5cbiAgLy8gQ3JlYXRlcyBhIGRpc3BhdGNoIGNvbnRleHQgZm9yIHRoZSBzcGVjaWZpZWQgYHRoaXpgICh0eXBpY2FsbHksIHRoZSB0YXJnZXRcbiAgLy8gRE9NIGVsZW1lbnQgdGhhdCByZWNlaXZlZCB0aGUgc291cmNlIGV2ZW50KSBhbmQgYGFyZ3VtZW50emAgKHR5cGljYWxseSwgdGhlXG4gIC8vIGRhdGEgYGRgIGFuZCBpbmRleCBgaWAgb2YgdGhlIHRhcmdldCBlbGVtZW50KS4gVGhlIHJldHVybmVkIGZ1bmN0aW9uIGNhbiBiZVxuICAvLyB1c2VkIHRvIGRpc3BhdGNoIGFuIGV2ZW50IHRvIGFueSByZWdpc3RlcmVkIGxpc3RlbmVyczsgdGhlIGZ1bmN0aW9uIHRha2VzIGFcbiAgLy8gc2luZ2xlIGFyZ3VtZW50IGFzIGlucHV0LCBiZWluZyB0aGUgZXZlbnQgdG8gZGlzcGF0Y2guIFRoZSBldmVudCBtdXN0IGhhdmVcbiAgLy8gYSBcInR5cGVcIiBhdHRyaWJ1dGUgd2hpY2ggY29ycmVzcG9uZHMgdG8gYSB0eXBlIHJlZ2lzdGVyZWQgaW4gdGhlXG4gIC8vIGNvbnN0cnVjdG9yLiBUaGlzIGNvbnRleHQgd2lsbCBhdXRvbWF0aWNhbGx5IHBvcHVsYXRlIHRoZSBcInNvdXJjZUV2ZW50XCIgYW5kXG4gIC8vIFwidGFyZ2V0XCIgYXR0cmlidXRlcyBvZiB0aGUgZXZlbnQsIGFzIHdlbGwgYXMgc2V0dGluZyB0aGUgYGQzLmV2ZW50YCBnbG9iYWxcbiAgLy8gZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgbm90aWZpY2F0aW9uLlxuICBkaXNwYXRjaC5vZiA9IGZ1bmN0aW9uKHRoaXosIGFyZ3VtZW50eikge1xuICAgIHJldHVybiBmdW5jdGlvbihlMSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGUwID1cbiAgICAgICAgZTEuc291cmNlRXZlbnQgPSBkMy5ldmVudDtcbiAgICAgICAgZTEudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBkMy5ldmVudCA9IGUxO1xuICAgICAgICBkaXNwYXRjaFtlMS50eXBlXS5hcHBseSh0aGl6LCBhcmd1bWVudHopO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZDMuZXZlbnQgPSBlMDtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBkaXNwYXRjaDtcbn1cbmQzLnJlcXVvdGUgPSBmdW5jdGlvbihzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoZDNfcmVxdW90ZV9yZSwgXCJcXFxcJCZcIik7XG59O1xuXG52YXIgZDNfcmVxdW90ZV9yZSA9IC9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZztcbnZhciBkM19zdWJjbGFzcyA9IHt9Ll9fcHJvdG9fXz9cblxuLy8gVW50aWwgRUNNQVNjcmlwdCBzdXBwb3J0cyBhcnJheSBzdWJjbGFzc2luZywgcHJvdG90eXBlIGluamVjdGlvbiB3b3JrcyB3ZWxsLlxuZnVuY3Rpb24ob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbn06XG5cbi8vIEFuZCBpZiB5b3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IF9fcHJvdG9fXywgd2UnbGwgdXNlIGRpcmVjdCBleHRlbnNpb24uXG5mdW5jdGlvbihvYmplY3QsIHByb3RvdHlwZSkge1xuICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwcm90b3R5cGUpIG9iamVjdFtwcm9wZXJ0eV0gPSBwcm90b3R5cGVbcHJvcGVydHldO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uKGdyb3Vwcykge1xuICBkM19zdWJjbGFzcyhncm91cHMsIGQzX3NlbGVjdGlvblByb3RvdHlwZSk7XG4gIHJldHVybiBncm91cHM7XG59XG5cbnZhciBkM19zZWxlY3QgPSBmdW5jdGlvbihzLCBuKSB7IHJldHVybiBuLnF1ZXJ5U2VsZWN0b3Iocyk7IH0sXG4gICAgZDNfc2VsZWN0QWxsID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gbi5xdWVyeVNlbGVjdG9yQWxsKHMpOyB9LFxuICAgIGQzX3NlbGVjdE1hdGNoZXMgPSBmdW5jdGlvbihuLCBzKSB7XG4gICAgICB2YXIgZDNfc2VsZWN0TWF0Y2hlciA9IG4ubWF0Y2hlcyB8fCBuW2QzX3ZlbmRvclN5bWJvbChuLCBcIm1hdGNoZXNTZWxlY3RvclwiKV07XG4gICAgICBkM19zZWxlY3RNYXRjaGVzID0gZnVuY3Rpb24obiwgcykge1xuICAgICAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlci5jYWxsKG4sIHMpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBkM19zZWxlY3RNYXRjaGVzKG4sIHMpO1xuICAgIH07XG5cbi8vIFByZWZlciBTaXp6bGUsIGlmIGF2YWlsYWJsZS5cbmlmICh0eXBlb2YgU2l6emxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgZDNfc2VsZWN0ID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gU2l6emxlKHMsIG4pWzBdIHx8IG51bGw7IH07XG4gIGQzX3NlbGVjdEFsbCA9IFNpenpsZTtcbiAgZDNfc2VsZWN0TWF0Y2hlcyA9IFNpenpsZS5tYXRjaGVzU2VsZWN0b3I7XG59XG5cbmQzLnNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZDMuc2VsZWN0KGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG59O1xuXG52YXIgZDNfc2VsZWN0aW9uUHJvdG90eXBlID0gZDMuc2VsZWN0aW9uLnByb3RvdHlwZSA9IFtdO1xuXG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIHN1Ym5vZGUsXG4gICAgICBncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgc2VsZWN0b3IgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSAoZ3JvdXAgPSB0aGlzW2pdKS5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChzdWJub2RlID0gc2VsZWN0b3IuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBqKSk7XG4gICAgICAgIGlmIChzdWJub2RlICYmIFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdChzZWxlY3RvciwgdGhpcyk7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3RBbGwgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgc2VsZWN0b3IgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IC0xLCBuID0gZ3JvdXAubGVuZ3RoOyArK2kgPCBuOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IGQzX2FycmF5KHNlbGVjdG9yLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpKTtcbiAgICAgICAgc3ViZ3JvdXAucGFyZW50Tm9kZSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NlbGVjdG9yQWxsKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdEFsbChzZWxlY3RvciwgdGhpcyk7XG4gIH07XG59XG52YXIgZDNfbnNYaHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG52YXIgZDNfbnNQcmVmaXggPSB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogZDNfbnNYaHRtbCxcbiAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICB4bWw6IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCIsXG4gIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCJcbn07XG5cbmQzLm5zID0ge1xuICBwcmVmaXg6IGQzX25zUHJlZml4LFxuICBxdWFsaWZ5OiBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGkgPSBuYW1lLmluZGV4T2YoXCI6XCIpLCBwcmVmaXggPSBuYW1lO1xuICAgIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgICByZXR1cm4gZDNfbnNQcmVmaXguaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogZDNfbnNQcmVmaXhbcHJlZml4XSwgbG9jYWw6IG5hbWV9IDogbmFtZTtcbiAgfVxufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmF0dHIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcblxuICAgIC8vIEZvciBhdHRyKHN0cmluZyksIHJldHVybiB0aGUgYXR0cmlidXRlIHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgICBuYW1lID0gZDMubnMucXVhbGlmeShuYW1lKTtcbiAgICAgIHJldHVybiBuYW1lLmxvY2FsXG4gICAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwpXG4gICAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBGb3IgYXR0cihvYmplY3QpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGUgbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGVcbiAgICAvLyBhdHRyaWJ1dGVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlIGZ1bmN0aW9ucyB0aGF0IGFyZVxuICAgIC8vIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9hdHRyKHZhbHVlLCBuYW1lW3ZhbHVlXSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fYXR0cihuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2F0dHIobmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSk7XG5cbiAgLy8gRm9yIGF0dHIoc3RyaW5nLCBudWxsKSwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIGF0dHJOdWxsKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIGF0dHJOdWxsTlMoKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgfVxuXG4gIC8vIEZvciBhdHRyKHN0cmluZywgc3RyaW5nKSwgc2V0IHRoZSBhdHRyaWJ1dGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIGF0dHJDb25zdGFudCgpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsLCB2YWx1ZSk7XG4gIH1cblxuICAvLyBGb3IgYXR0cihzdHJpbmcsIGZ1bmN0aW9uKSwgZXZhbHVhdGUgdGhlIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBzZXRcbiAgLy8gb3IgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgYXMgYXBwcm9wcmlhdGUuXG4gIGZ1bmN0aW9uIGF0dHJGdW5jdGlvbigpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB4KTtcbiAgfVxuICBmdW5jdGlvbiBhdHRyRnVuY3Rpb25OUygpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgICBlbHNlIHRoaXMuc2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCwgeCk7XG4gIH1cblxuICByZXR1cm4gdmFsdWUgPT0gbnVsbFxuICAgICAgPyAobmFtZS5sb2NhbCA/IGF0dHJOdWxsTlMgOiBhdHRyTnVsbCkgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbilcbiAgICAgIDogKG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpO1xufVxuZnVuY3Rpb24gZDNfY29sbGFwc2Uocykge1xuICByZXR1cm4gcy50cmltKCkucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5jbGFzc2VkID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cbiAgICAvLyBGb3IgY2xhc3NlZChzdHJpbmcpLCByZXR1cm4gdHJ1ZSBvbmx5IGlmIHRoZSBmaXJzdCBub2RlIGhhcyB0aGUgc3BlY2lmaWVkXG4gICAgLy8gY2xhc3Mgb3IgY2xhc3Nlcy4gTm90ZSB0aGF0IGV2ZW4gaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgRE9NVG9rZW5MaXN0LCBpdFxuICAgIC8vIHByb2JhYmx5IGRvZXNuJ3Qgc3VwcG9ydCBpdCBvbiBTVkcgZWxlbWVudHMgKHdoaWNoIGNhbiBiZSBhbmltYXRlZCkuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpLFxuICAgICAgICAgIG4gPSAobmFtZSA9IGQzX3NlbGVjdGlvbl9jbGFzc2VzKG5hbWUpKS5sZW5ndGgsXG4gICAgICAgICAgaSA9IC0xO1xuICAgICAgaWYgKHZhbHVlID0gbm9kZS5jbGFzc0xpc3QpIHtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICghdmFsdWUuY29udGFpbnMobmFtZVtpXSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICghZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lW2ldKS50ZXN0KHZhbHVlKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRm9yIGNsYXNzZWQob2JqZWN0KSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIG5hbWVzIG9mIGNsYXNzZXMgdG8gYWRkIG9yXG4gICAgLy8gcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZSBmdW5jdGlvbnMgdGhhdCBhcmUgZXZhbHVhdGVkIGZvciBlYWNoIGVsZW1lbnQuXG4gICAgZm9yICh2YWx1ZSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2NsYXNzZWQodmFsdWUsIG5hbWVbdmFsdWVdKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGJvdGggYSBuYW1lIGFuZCBhIHZhbHVlIGFyZSBzcGVjaWZpZWQsIGFuZCBhcmUgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fY2xhc3NlZChuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lKSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKFwiKD86XnxcXFxccyspXCIgKyBkMy5yZXF1b3RlKG5hbWUpICsgXCIoPzpcXFxccyt8JClcIiwgXCJnXCIpO1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlcyhuYW1lKSB7XG4gIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbi8vIE11bHRpcGxlIGNsYXNzIG5hbWVzIGFyZSBhbGxvd2VkIChlLmcuLCBcImZvbyBiYXJcIikuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZChuYW1lLCB2YWx1ZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkubWFwKGQzX3NlbGVjdGlvbl9jbGFzc2VkTmFtZSk7XG4gIHZhciBuID0gbmFtZS5sZW5ndGg7XG5cbiAgZnVuY3Rpb24gY2xhc3NlZENvbnN0YW50KCkge1xuICAgIHZhciBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8IG4pIG5hbWVbaV0odGhpcywgdmFsdWUpO1xuICB9XG5cbiAgLy8gV2hlbiB0aGUgdmFsdWUgaXMgYSBmdW5jdGlvbiwgdGhlIGZ1bmN0aW9uIGlzIHN0aWxsIGV2YWx1YXRlZCBvbmx5IG9uY2UgcGVyXG4gIC8vIGVsZW1lbnQgZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgY2xhc3MgbmFtZXMuXG4gIGZ1bmN0aW9uIGNsYXNzZWRGdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IC0xLCB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB3aGlsZSAoKytpIDwgbikgbmFtZVtpXSh0aGlzLCB4KTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBjbGFzc2VkRnVuY3Rpb25cbiAgICAgIDogY2xhc3NlZENvbnN0YW50O1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZE5hbWUobmFtZSkge1xuICB2YXIgcmUgPSBkM19zZWxlY3Rpb25fY2xhc3NlZFJlKG5hbWUpO1xuICByZXR1cm4gZnVuY3Rpb24obm9kZSwgdmFsdWUpIHtcbiAgICBpZiAoYyA9IG5vZGUuY2xhc3NMaXN0KSByZXR1cm4gdmFsdWUgPyBjLmFkZChuYW1lKSA6IGMucmVtb3ZlKG5hbWUpO1xuICAgIHZhciBjID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmUubGFzdEluZGV4ID0gMDtcbiAgICAgIGlmICghcmUudGVzdChjKSkgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBkM19jb2xsYXBzZShjICsgXCIgXCIgKyBuYW1lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZDNfY29sbGFwc2UoYy5yZXBsYWNlKHJlLCBcIiBcIikpKTtcbiAgICB9XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zdHlsZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChuIDwgMykge1xuXG4gICAgLy8gRm9yIHN0eWxlKG9iamVjdCkgb3Igc3R5bGUob2JqZWN0LCBzdHJpbmcpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGVcbiAgICAvLyBuYW1lcyBhbmQgdmFsdWVzIG9mIHRoZSBhdHRyaWJ1dGVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlXG4gICAgLy8gZnVuY3Rpb25zIHRoYXQgYXJlIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LiBUaGUgb3B0aW9uYWwgc3RyaW5nXG4gICAgLy8gc3BlY2lmaWVzIHRoZSBwcmlvcml0eS5cbiAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGlmIChuIDwgMikgdmFsdWUgPSBcIlwiO1xuICAgICAgZm9yIChwcmlvcml0eSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3N0eWxlKHByaW9yaXR5LCBuYW1lW3ByaW9yaXR5XSwgdmFsdWUpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEZvciBzdHlsZShzdHJpbmcpLCByZXR1cm4gdGhlIGNvbXB1dGVkIHN0eWxlIHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAobiA8IDIpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgICByZXR1cm4gZDNfd2luZG93KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBGb3Igc3R5bGUoc3RyaW5nLCBzdHJpbmcpIG9yIHN0eWxlKHN0cmluZywgZnVuY3Rpb24pLCB1c2UgdGhlIGRlZmF1bHRcbiAgICAvLyBwcmlvcml0eS4gVGhlIHByaW9yaXR5IGlzIGlnbm9yZWQgZm9yIHN0eWxlKHN0cmluZywgbnVsbCkuXG4gICAgcHJpb3JpdHkgPSBcIlwiO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBhIG5hbWUsIHZhbHVlIGFuZCBwcmlvcml0eSBhcmUgc3BlY2lmaWVkLCBhbmQgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fc3R5bGUobmFtZSwgdmFsdWUsIHByaW9yaXR5KSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fc3R5bGUobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIG51bGwpIG9yIHN0eWxlKG5hbWUsIG51bGwsIHByaW9yaXR5KSwgcmVtb3ZlIHRoZSBzdHlsZVxuICAvLyBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS4gVGhlIHByaW9yaXR5IGlzIGlnbm9yZWQuXG4gIGZ1bmN0aW9uIHN0eWxlTnVsbCgpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIHN0cmluZykgb3Igc3R5bGUobmFtZSwgc3RyaW5nLCBwcmlvcml0eSksIHNldCB0aGUgc3R5bGVcbiAgLy8gcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJpb3JpdHkuXG4gIGZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQoKSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpO1xuICB9XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIGZ1bmN0aW9uKSBvciBzdHlsZShuYW1lLCBmdW5jdGlvbiwgcHJpb3JpdHkpLCBldmFsdWF0ZSB0aGVcbiAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCwgYW5kIHNldCBvciByZW1vdmUgdGhlIHN0eWxlIHByb3BlcnR5IGFzXG4gIC8vIGFwcHJvcHJpYXRlLiBXaGVuIHNldHRpbmcsIHVzZSB0aGUgc3BlY2lmaWVkIHByaW9yaXR5LlxuICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKCkge1xuICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoeCA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB4LCBwcmlvcml0eSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWUgPT0gbnVsbFxuICAgICAgPyBzdHlsZU51bGwgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gc3R5bGVGdW5jdGlvbiA6IHN0eWxlQ29uc3RhbnQpO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUucHJvcGVydHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcblxuICAgIC8vIEZvciBwcm9wZXJ0eShzdHJpbmcpLCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHJldHVybiB0aGlzLm5vZGUoKVtuYW1lXTtcblxuICAgIC8vIEZvciBwcm9wZXJ0eShvYmplY3QpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGUgbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGVcbiAgICAvLyBwcm9wZXJ0aWVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlIGZ1bmN0aW9ucyB0aGF0IGFyZVxuICAgIC8vIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9wcm9wZXJ0eSh2YWx1ZSwgbmFtZVt2YWx1ZV0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgYm90aCBhIG5hbWUgYW5kIGEgdmFsdWUgYXJlIHNwZWNpZmllZCwgYW5kIGFyZSBoYW5kbGVkIGFzIGJlbG93LlxuICByZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9wcm9wZXJ0eShuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3Byb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG5cbiAgLy8gRm9yIHByb3BlcnR5KG5hbWUsIG51bGwpLCByZW1vdmUgdGhlIHByb3BlcnR5IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICBmdW5jdGlvbiBwcm9wZXJ0eU51bGwoKSB7XG4gICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gIH1cblxuICAvLyBGb3IgcHJvcGVydHkobmFtZSwgc3RyaW5nKSwgc2V0IHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS5cbiAgZnVuY3Rpb24gcHJvcGVydHlDb25zdGFudCgpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH1cblxuICAvLyBGb3IgcHJvcGVydHkobmFtZSwgZnVuY3Rpb24pLCBldmFsdWF0ZSB0aGUgZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCwgYW5kXG4gIC8vIHNldCBvciByZW1vdmUgdGhlIHByb3BlcnR5IGFzIGFwcHJvcHJpYXRlLlxuICBmdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKCkge1xuICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoeCA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB4O1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICAgID8gcHJvcGVydHlOdWxsIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHByb3BlcnR5RnVuY3Rpb24gOiBwcm9wZXJ0eUNvbnN0YW50KTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZnVuY3Rpb24oKSB7IHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2OyB9IDogdmFsdWUgPT0gbnVsbFxuICAgICAgPyBmdW5jdGlvbigpIHsgdGhpcy50ZXh0Q29udGVudCA9IFwiXCI7IH1cbiAgICAgIDogZnVuY3Rpb24oKSB7IHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTsgfSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuaHRtbCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBmdW5jdGlvbigpIHsgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB0aGlzLmlubmVySFRNTCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2OyB9IDogdmFsdWUgPT0gbnVsbFxuICAgICAgPyBmdW5jdGlvbigpIHsgdGhpcy5pbm5lckhUTUwgPSBcIlwiOyB9XG4gICAgICA6IGZ1bmN0aW9uKCkgeyB0aGlzLmlubmVySFRNTCA9IHZhbHVlOyB9KVxuICAgICAgOiB0aGlzLm5vZGUoKS5pbm5lckhUTUw7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NyZWF0b3IobmFtZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmRDaGlsZChuYW1lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpIHtcblxuICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICBuYW1lc3BhY2UgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gbmFtZXNwYWNlID09PSBkM19uc1hodG1sICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkkgPT09IGQzX25zWGh0bWxcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpXG4gICAgICAgIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgbmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVOUygpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZVxuICAgICAgOiAobmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSkpLmxvY2FsID8gY3JlYXRlTlNcbiAgICAgIDogY3JlYXRlO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIG5hbWUgPSBkM19zZWxlY3Rpb25fY3JlYXRvcihuYW1lKTtcbiAgYmVmb3JlID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUobmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBiZWZvcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBudWxsKTtcbiAgfSk7XG59O1xuXG4vLyBUT0RPIHJlbW92ZShzZWxlY3Rvcik/XG4vLyBUT0RPIHJlbW92ZShub2RlKT9cbi8vIFRPRE8gcmVtb3ZlKGZ1bmN0aW9uKT9cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25SZW1vdmUpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uUmVtb3ZlKCkge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG59XG5cbmQzLnNldCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gIHZhciBzZXQgPSBuZXcgZDNfU2V0O1xuICBpZiAoYXJyYXkpIGZvciAodmFyIGkgPSAwLCBuID0gYXJyYXkubGVuZ3RoOyBpIDwgbjsgKytpKSBzZXQuYWRkKGFycmF5W2ldKTtcbiAgcmV0dXJuIHNldDtcbn07XG5cbmZ1bmN0aW9uIGQzX1NldCgpIHtcbiAgdGhpcy5fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxuZDNfY2xhc3MoZDNfU2V0LCB7XG4gIGhhczogZDNfbWFwX2hhcyxcbiAgYWRkOiBmdW5jdGlvbihrZXkpIHtcbiAgICB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkgKz0gXCJcIildID0gdHJ1ZTtcbiAgICByZXR1cm4ga2V5O1xuICB9LFxuICByZW1vdmU6IGQzX21hcF9yZW1vdmUsXG4gIHZhbHVlczogZDNfbWFwX2tleXMsXG4gIHNpemU6IGQzX21hcF9zaXplLFxuICBlbXB0eTogZDNfbWFwX2VtcHR5LFxuICBmb3JFYWNoOiBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgZi5jYWxsKHRoaXMsIGQzX21hcF91bmVzY2FwZShrZXkpKTtcbiAgfVxufSk7XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICB2YXIgaSA9IC0xLFxuICAgICAgbiA9IHRoaXMubGVuZ3RoLFxuICAgICAgZ3JvdXAsXG4gICAgICBub2RlO1xuXG4gIC8vIElmIG5vIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBmaXJzdCB2YWx1ZS5cbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgdmFsdWUgPSBuZXcgQXJyYXkobiA9IChncm91cCA9IHRoaXNbMF0pLmxlbmd0aCk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgdmFsdWVbaV0gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBiaW5kKGdyb3VwLCBncm91cERhdGEpIHtcbiAgICB2YXIgaSxcbiAgICAgICAgbiA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgbSA9IGdyb3VwRGF0YS5sZW5ndGgsXG4gICAgICAgIG4wID0gTWF0aC5taW4obiwgbSksXG4gICAgICAgIHVwZGF0ZU5vZGVzID0gbmV3IEFycmF5KG0pLFxuICAgICAgICBlbnRlck5vZGVzID0gbmV3IEFycmF5KG0pLFxuICAgICAgICBleGl0Tm9kZXMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIG5vZGUsXG4gICAgICAgIG5vZGVEYXRhO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgdmFyIG5vZGVCeUtleVZhbHVlID0gbmV3IGQzX01hcCxcbiAgICAgICAgICBrZXlWYWx1ZXMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgICAga2V5VmFsdWU7XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBuOykge1xuICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgICAgaWYgKG5vZGVCeUtleVZhbHVlLmhhcyhrZXlWYWx1ZSA9IGtleS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGkpKSkge1xuICAgICAgICAgICAgZXhpdE5vZGVzW2ldID0gbm9kZTsgLy8gZHVwbGljYXRlIHNlbGVjdGlvbiBrZXlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZUJ5S2V5VmFsdWUuc2V0KGtleVZhbHVlLCBub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gLTE7ICsraSA8IG07KSB7XG4gICAgICAgIGlmICghKG5vZGUgPSBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWUgPSBrZXkuY2FsbChncm91cERhdGEsIG5vZGVEYXRhID0gZ3JvdXBEYXRhW2ldLCBpKSkpKSB7XG4gICAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShub2RlRGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZSAhPT0gdHJ1ZSkgeyAvLyBubyBkdXBsaWNhdGUgZGF0YSBrZXlcbiAgICAgICAgICB1cGRhdGVOb2Rlc1tpXSA9IG5vZGU7XG4gICAgICAgICAgbm9kZS5fX2RhdGFfXyA9IG5vZGVEYXRhO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBuOykge1xuICAgICAgICBpZiAoaSBpbiBrZXlWYWx1ZXMgJiYgbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlc1tpXSkgIT09IHRydWUpIHtcbiAgICAgICAgICBleGl0Tm9kZXNbaV0gPSBncm91cFtpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjA7KSB7XG4gICAgICAgIG5vZGUgPSBncm91cFtpXTtcbiAgICAgICAgbm9kZURhdGEgPSBncm91cERhdGFbaV07XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5fX2RhdGFfXyA9IG5vZGVEYXRhO1xuICAgICAgICAgIHVwZGF0ZU5vZGVzW2ldID0gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnRlck5vZGVzW2ldID0gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKG5vZGVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yICg7IGkgPCBtOyArK2kpIHtcbiAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShncm91cERhdGFbaV0pO1xuICAgICAgfVxuICAgICAgZm9yICg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgZXhpdE5vZGVzW2ldID0gZ3JvdXBbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZW50ZXJOb2Rlcy51cGRhdGVcbiAgICAgICAgPSB1cGRhdGVOb2RlcztcblxuICAgIGVudGVyTm9kZXMucGFyZW50Tm9kZVxuICAgICAgICA9IHVwZGF0ZU5vZGVzLnBhcmVudE5vZGVcbiAgICAgICAgPSBleGl0Tm9kZXMucGFyZW50Tm9kZVxuICAgICAgICA9IGdyb3VwLnBhcmVudE5vZGU7XG5cbiAgICBlbnRlci5wdXNoKGVudGVyTm9kZXMpO1xuICAgIHVwZGF0ZS5wdXNoKHVwZGF0ZU5vZGVzKTtcbiAgICBleGl0LnB1c2goZXhpdE5vZGVzKTtcbiAgfVxuXG4gIHZhciBlbnRlciA9IGQzX3NlbGVjdGlvbl9lbnRlcihbXSksXG4gICAgICB1cGRhdGUgPSBkM19zZWxlY3Rpb24oW10pLFxuICAgICAgZXhpdCA9IGQzX3NlbGVjdGlvbihbXSk7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGJpbmQoZ3JvdXAgPSB0aGlzW2ldLCB2YWx1ZS5jYWxsKGdyb3VwLCBncm91cC5wYXJlbnROb2RlLl9fZGF0YV9fLCBpKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBiaW5kKGdyb3VwID0gdGhpc1tpXSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZS5lbnRlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZW50ZXI7IH07XG4gIHVwZGF0ZS5leGl0ID0gZnVuY3Rpb24oKSB7IHJldHVybiBleGl0OyB9O1xuICByZXR1cm4gdXBkYXRlO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKGRhdGEpIHtcbiAgcmV0dXJuIHtfX2RhdGFfXzogZGF0YX07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXR1bSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIpO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKGZpbHRlcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkM19zZWxlY3Rpb25fZmlsdGVyKGZpbHRlcik7XG5cbiAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSAoZ3JvdXAgPSB0aGlzW2pdKS5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgZmlsdGVyLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZDNfc2VsZWN0aW9uKHN1Ymdyb3Vwcyk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fZmlsdGVyKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlcyh0aGlzLCBzZWxlY3Rvcik7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5vcmRlciA9IGZ1bmN0aW9uKCkge1xuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSBncm91cC5sZW5ndGggLSAxLCBuZXh0ID0gZ3JvdXBbaV0sIG5vZGU7IC0taSA+PSAwOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBub2RlLm5leHRTaWJsaW5nKSBuZXh0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHQpO1xuICAgICAgICBuZXh0ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuZDMuYXNjZW5kaW5nID0gZDNfYXNjZW5kaW5nO1xuXG5mdW5jdGlvbiBkM19hc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24oY29tcGFyYXRvcikge1xuICBjb21wYXJhdG9yID0gZDNfc2VsZWN0aW9uX3NvcnRDb21wYXJhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykgdGhpc1tqXS5zb3J0KGNvbXBhcmF0b3IpO1xuICByZXR1cm4gdGhpcy5vcmRlcigpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NvcnRDb21wYXJhdG9yKGNvbXBhcmF0b3IpIHtcbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSBjb21wYXJhdG9yID0gZDNfYXNjZW5kaW5nO1xuICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJhdG9yKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICByZXR1cm4gZDNfc2VsZWN0aW9uX2VhY2godGhpcywgZnVuY3Rpb24obm9kZSwgaSwgaikge1xuICAgIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaik7XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VhY2goZ3JvdXBzLCBjYWxsYmFjaykge1xuICBmb3IgKHZhciBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyBpKyspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrKG5vZGUsIGksIGopO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ3JvdXBzO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBhcmdzID0gZDNfYXJyYXkoYXJndW1lbnRzKTtcbiAgY2FsbGJhY2suYXBwbHkoYXJnc1swXSA9IHRoaXMsIGFyZ3MpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gIXRoaXMubm9kZSgpO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHZhciBub2RlID0gZ3JvdXBbaV07XG4gICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIG4gPSAwO1xuICBkM19zZWxlY3Rpb25fZWFjaCh0aGlzLCBmdW5jdGlvbigpIHsgKytuOyB9KTtcbiAgcmV0dXJuIG47XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fZW50ZXIoc2VsZWN0aW9uKSB7XG4gIGQzX3N1YmNsYXNzKHNlbGVjdGlvbiwgZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlKTtcbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cblxudmFyIGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZSA9IFtdO1xuXG5kMy5zZWxlY3Rpb24uZW50ZXIgPSBkM19zZWxlY3Rpb25fZW50ZXI7XG5kMy5zZWxlY3Rpb24uZW50ZXIucHJvdG90eXBlID0gZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlO1xuXG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuYXBwZW5kID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLmFwcGVuZDtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5lbXB0eSA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eTtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5ub2RlID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGU7XG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuY2FsbCA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5jYWxsO1xuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLnNpemUgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUuc2l6ZTtcblxuXG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBzdWJub2RlLFxuICAgICAgdXBncm91cCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICB1cGdyb3VwID0gKGdyb3VwID0gdGhpc1tqXSkudXBkYXRlO1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSBncm91cC5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaCh1cGdyb3VwW2ldID0gc3Vibm9kZSA9IHNlbGVjdG9yLmNhbGwoZ3JvdXAucGFyZW50Tm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpO1xuICAgICAgICBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIGJlZm9yZSA9IGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZSh0aGlzKTtcbiAgcmV0dXJuIGQzX3NlbGVjdGlvblByb3RvdHlwZS5pbnNlcnQuY2FsbCh0aGlzLCBuYW1lLCBiZWZvcmUpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VudGVySW5zZXJ0QmVmb3JlKGVudGVyKSB7XG4gIHZhciBpMCwgajA7XG4gIHJldHVybiBmdW5jdGlvbihkLCBpLCBqKSB7XG4gICAgdmFyIGdyb3VwID0gZW50ZXJbal0udXBkYXRlLFxuICAgICAgICBuID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgICBub2RlO1xuICAgIGlmIChqICE9IGowKSBqMCA9IGosIGkwID0gMDtcbiAgICBpZiAoaSA+PSBpMCkgaTAgPSBpICsgMTtcbiAgICB3aGlsZSAoIShub2RlID0gZ3JvdXBbaTBdKSAmJiArK2kwIDwgbik7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG59XG5cbi8vIFRPRE8gZmFzdCBzaW5nbGV0b24gaW1wbGVtZW50YXRpb24/XG5kMy5zZWxlY3QgPSBmdW5jdGlvbihub2RlKSB7XG4gIHZhciBncm91cDtcbiAgaWYgKHR5cGVvZiBub2RlID09PSBcInN0cmluZ1wiKSB7XG4gICAgZ3JvdXAgPSBbZDNfc2VsZWN0KG5vZGUsIGQzX2RvY3VtZW50KV07XG4gICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgfSBlbHNlIHtcbiAgICBncm91cCA9IFtub2RlXTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpO1xuICB9XG4gIHJldHVybiBkM19zZWxlY3Rpb24oW2dyb3VwXSk7XG59O1xuXG5kMy5zZWxlY3RBbGwgPSBmdW5jdGlvbihub2Rlcykge1xuICB2YXIgZ3JvdXA7XG4gIGlmICh0eXBlb2Ygbm9kZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBncm91cCA9IGQzX2FycmF5KGQzX3NlbGVjdEFsbChub2RlcywgZDNfZG9jdW1lbnQpKTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gZDNfZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIGdyb3VwID0gZDNfYXJyYXkobm9kZXMpO1xuICAgIGdyb3VwLnBhcmVudE5vZGUgPSBudWxsO1xuICB9XG4gIHJldHVybiBkM19zZWxlY3Rpb24oW2dyb3VwXSk7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSkge1xuICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChuIDwgMykge1xuXG4gICAgLy8gRm9yIG9uKG9iamVjdCkgb3Igb24ob2JqZWN0LCBib29sZWFuKSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIGV2ZW50XG4gICAgLy8gdHlwZXMgYW5kIGxpc3RlbmVycyB0byBhZGQgb3IgcmVtb3ZlLiBUaGUgb3B0aW9uYWwgYm9vbGVhbiBzcGVjaWZpZXNcbiAgICAvLyB3aGV0aGVyIHRoZSBsaXN0ZW5lciBjYXB0dXJlcyBldmVudHMuXG4gICAgaWYgKHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAobiA8IDIpIGxpc3RlbmVyID0gZmFsc2U7XG4gICAgICBmb3IgKGNhcHR1cmUgaW4gdHlwZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9vbihjYXB0dXJlLCB0eXBlW2NhcHR1cmVdLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gRm9yIG9uKHN0cmluZyksIHJldHVybiB0aGUgbGlzdGVuZXIgZm9yIHRoZSBmaXJzdCBub2RlLlxuICAgIGlmIChuIDwgMikgcmV0dXJuIChuID0gdGhpcy5ub2RlKClbXCJfX29uXCIgKyB0eXBlXSkgJiYgbi5fO1xuXG4gICAgLy8gRm9yIG9uKHN0cmluZywgZnVuY3Rpb24pLCB1c2UgdGhlIGRlZmF1bHQgY2FwdHVyZS5cbiAgICBjYXB0dXJlID0gZmFsc2U7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGEgdHlwZSwgbGlzdGVuZXIgYW5kIGNhcHR1cmUgYXJlIHNwZWNpZmllZCwgYW5kIGhhbmRsZWQgYXMgYmVsb3cuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX29uKHR5cGUsIGxpc3RlbmVyLCBjYXB0dXJlKSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fb24odHlwZSwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcbiAgdmFyIG5hbWUgPSBcIl9fb25cIiArIHR5cGUsXG4gICAgICBpID0gdHlwZS5pbmRleE9mKFwiLlwiKSxcbiAgICAgIHdyYXAgPSBkM19zZWxlY3Rpb25fb25MaXN0ZW5lcjtcblxuICBpZiAoaSA+IDApIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGkpO1xuICB2YXIgZmlsdGVyID0gZDNfc2VsZWN0aW9uX29uRmlsdGVycy5nZXQodHlwZSk7XG4gIGlmIChmaWx0ZXIpIHR5cGUgPSBmaWx0ZXIsIHdyYXAgPSBkM19zZWxlY3Rpb25fb25GaWx0ZXI7XG5cbiAgZnVuY3Rpb24gb25SZW1vdmUoKSB7XG4gICAgdmFyIGwgPSB0aGlzW25hbWVdO1xuICAgIGlmIChsKSB7XG4gICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbCwgbC4kKTtcbiAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQWRkKCkge1xuICAgIHZhciBsID0gd3JhcChsaXN0ZW5lciwgZDNfYXJyYXkoYXJndW1lbnRzKSk7XG4gICAgb25SZW1vdmUuY2FsbCh0aGlzKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgdGhpc1tuYW1lXSA9IGwsIGwuJCA9IGNhcHR1cmUpO1xuICAgIGwuXyA9IGxpc3RlbmVyO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQWxsKCkge1xuICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJeX19vbihbXi5dKylcIiArIGQzLnJlcXVvdGUodHlwZSkgKyBcIiRcIiksXG4gICAgICAgIG1hdGNoO1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgaWYgKG1hdGNoID0gbmFtZS5tYXRjaChyZSkpIHtcbiAgICAgICAgdmFyIGwgPSB0aGlzW25hbWVdO1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobWF0Y2hbMV0sIGwsIGwuJCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpXG4gICAgICA/IGxpc3RlbmVyID8gb25BZGQgOiBvblJlbW92ZVxuICAgICAgOiBsaXN0ZW5lciA/IGQzX25vb3AgOiByZW1vdmVBbGw7XG59XG5cbnZhciBkM19zZWxlY3Rpb25fb25GaWx0ZXJzID0gZDMubWFwKHtcbiAgbW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcbiAgbW91c2VsZWF2ZTogXCJtb3VzZW91dFwiXG59KTtcblxuaWYgKGQzX2RvY3VtZW50KSB7XG4gIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgaWYgKFwib25cIiArIGsgaW4gZDNfZG9jdW1lbnQpIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMucmVtb3ZlKGspO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXIobGlzdGVuZXIsIGFyZ3VtZW50eikge1xuICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgIHZhciBvID0gZDMuZXZlbnQ7IC8vIEV2ZW50cyBjYW4gYmUgcmVlbnRyYW50IChlLmcuLCBmb2N1cykuXG4gICAgZDMuZXZlbnQgPSBlO1xuICAgIGFyZ3VtZW50elswXSA9IHRoaXMuX19kYXRhX187XG4gICAgdHJ5IHtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50eik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGQzLmV2ZW50ID0gbztcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9vbkZpbHRlcihsaXN0ZW5lciwgYXJndW1lbnR6KSB7XG4gIHZhciBsID0gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXIobGlzdGVuZXIsIGFyZ3VtZW50eik7XG4gIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMsIHJlbGF0ZWQgPSBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgaWYgKCFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0YXJnZXQgJiYgIShyZWxhdGVkLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRhcmdldCkgJiA4KSkpIHtcbiAgICAgIGwuY2FsbCh0YXJnZXQsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGQzX2V2ZW50X2RyYWdTZWxlY3QsXG4gICAgZDNfZXZlbnRfZHJhZ0lkID0gMDtcblxuZnVuY3Rpb24gZDNfZXZlbnRfZHJhZ1N1cHByZXNzKG5vZGUpIHtcbiAgdmFyIG5hbWUgPSBcIi5kcmFnc3VwcHJlc3MtXCIgKyArK2QzX2V2ZW50X2RyYWdJZCxcbiAgICAgIGNsaWNrID0gXCJjbGlja1wiICsgbmFtZSxcbiAgICAgIHcgPSBkMy5zZWxlY3QoZDNfd2luZG93KG5vZGUpKVxuICAgICAgICAgIC5vbihcInRvdWNobW92ZVwiICsgbmFtZSwgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdClcbiAgICAgICAgICAub24oXCJkcmFnc3RhcnRcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpXG4gICAgICAgICAgLm9uKFwic2VsZWN0c3RhcnRcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpO1xuXG4gIGlmIChkM19ldmVudF9kcmFnU2VsZWN0ID09IG51bGwpIHtcbiAgICBkM19ldmVudF9kcmFnU2VsZWN0ID0gXCJvbnNlbGVjdHN0YXJ0XCIgaW4gbm9kZSA/IGZhbHNlXG4gICAgICAgIDogZDNfdmVuZG9yU3ltYm9sKG5vZGUuc3R5bGUsIFwidXNlclNlbGVjdFwiKTtcbiAgfVxuXG4gIGlmIChkM19ldmVudF9kcmFnU2VsZWN0KSB7XG4gICAgdmFyIHN0eWxlID0gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpLnN0eWxlLFxuICAgICAgICBzZWxlY3QgPSBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XTtcbiAgICBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XSA9IFwibm9uZVwiO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHN1cHByZXNzQ2xpY2spIHtcbiAgICB3Lm9uKG5hbWUsIG51bGwpO1xuICAgIGlmIChkM19ldmVudF9kcmFnU2VsZWN0KSBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XSA9IHNlbGVjdDtcbiAgICBpZiAoc3VwcHJlc3NDbGljaykgeyAvLyBzdXBwcmVzcyB0aGUgbmV4dCBjbGljaywgYnV0IG9ubHkgaWYgaXTigJlzIGltbWVkaWF0ZVxuICAgICAgdmFyIG9mZiA9IGZ1bmN0aW9uKCkgeyB3Lm9uKGNsaWNrLCBudWxsKTsgfTtcbiAgICAgIHcub24oY2xpY2ssIGZ1bmN0aW9uKCkgeyBkM19ldmVudFByZXZlbnREZWZhdWx0KCk7IG9mZigpOyB9LCB0cnVlKTtcbiAgICAgIHNldFRpbWVvdXQob2ZmLCAwKTtcbiAgICB9XG4gIH07XG59XG5cbmQzLm1vdXNlID0gZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gIHJldHVybiBkM19tb3VzZVBvaW50KGNvbnRhaW5lciwgZDNfZXZlbnRTb3VyY2UoKSk7XG59O1xuXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDQwODNcbnZhciBkM19tb3VzZV9idWc0NDA4MyA9IHRoaXMubmF2aWdhdG9yICYmIC9XZWJLaXQvLnRlc3QodGhpcy5uYXZpZ2F0b3IudXNlckFnZW50KSA/IC0xIDogMDtcblxuZnVuY3Rpb24gZDNfbW91c2VQb2ludChjb250YWluZXIsIGUpIHtcbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMpIGUgPSBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICB2YXIgc3ZnID0gY29udGFpbmVyLm93bmVyU1ZHRWxlbWVudCB8fCBjb250YWluZXI7XG4gIGlmIChzdmcuY3JlYXRlU1ZHUG9pbnQpIHtcbiAgICB2YXIgcG9pbnQgPSBzdmcuY3JlYXRlU1ZHUG9pbnQoKTtcbiAgICBpZiAoZDNfbW91c2VfYnVnNDQwODMgPCAwKSB7XG4gICAgICB2YXIgd2luZG93ID0gZDNfd2luZG93KGNvbnRhaW5lcik7XG4gICAgICBpZiAod2luZG93LnNjcm9sbFggfHwgd2luZG93LnNjcm9sbFkpIHtcbiAgICAgICAgc3ZnID0gZDMuc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIikuc3R5bGUoe1xuICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIlxuICAgICAgICB9LCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgdmFyIGN0bSA9IHN2Z1swXVswXS5nZXRTY3JlZW5DVE0oKTtcbiAgICAgICAgZDNfbW91c2VfYnVnNDQwODMgPSAhKGN0bS5mIHx8IGN0bS5lKTtcbiAgICAgICAgc3ZnLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZDNfbW91c2VfYnVnNDQwODMpIHBvaW50LnggPSBlLnBhZ2VYLCBwb2ludC55ID0gZS5wYWdlWTtcbiAgICBlbHNlIHBvaW50LnggPSBlLmNsaWVudFgsIHBvaW50LnkgPSBlLmNsaWVudFk7XG4gICAgcG9pbnQgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0oY29udGFpbmVyLmdldFNjcmVlbkNUTSgpLmludmVyc2UoKSk7XG4gICAgcmV0dXJuIFtwb2ludC54LCBwb2ludC55XTtcbiAgfVxuICB2YXIgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIFtlLmNsaWVudFggLSByZWN0LmxlZnQgLSBjb250YWluZXIuY2xpZW50TGVmdCwgZS5jbGllbnRZIC0gcmVjdC50b3AgLSBjb250YWluZXIuY2xpZW50VG9wXTtcbn07XG5cbmQzLnRvdWNoID0gZnVuY3Rpb24oY29udGFpbmVyLCB0b3VjaGVzLCBpZGVudGlmaWVyKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgaWRlbnRpZmllciA9IHRvdWNoZXMsIHRvdWNoZXMgPSBkM19ldmVudFNvdXJjZSgpLmNoYW5nZWRUb3VjaGVzO1xuICBpZiAodG91Y2hlcykgZm9yICh2YXIgaSA9IDAsIG4gPSB0b3VjaGVzLmxlbmd0aCwgdG91Y2g7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoKHRvdWNoID0gdG91Y2hlc1tpXSkuaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmV0dXJuIGQzX21vdXNlUG9pbnQoY29udGFpbmVyLCB0b3VjaCk7XG4gICAgfVxuICB9XG59O1xuZDMuYmVoYXZpb3IgPSB7fTtcblxuZDMuYmVoYXZpb3IuZHJhZyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZXZlbnQgPSBkM19ldmVudERpc3BhdGNoKGRyYWcsIFwiZHJhZ1wiLCBcImRyYWdzdGFydFwiLCBcImRyYWdlbmRcIiksXG4gICAgICBvcmlnaW4gPSBudWxsLFxuICAgICAgbW91c2Vkb3duID0gZHJhZ3N0YXJ0KGQzX25vb3AsIGQzLm1vdXNlLCBkM193aW5kb3csIFwibW91c2Vtb3ZlXCIsIFwibW91c2V1cFwiKSxcbiAgICAgIHRvdWNoc3RhcnQgPSBkcmFnc3RhcnQoZDNfYmVoYXZpb3JfZHJhZ1RvdWNoSWQsIGQzLnRvdWNoLCBkM19pZGVudGl0eSwgXCJ0b3VjaG1vdmVcIiwgXCJ0b3VjaGVuZFwiKTtcblxuICBmdW5jdGlvbiBkcmFnKCkge1xuICAgIHRoaXMub24oXCJtb3VzZWRvd24uZHJhZ1wiLCBtb3VzZWRvd24pXG4gICAgICAgIC5vbihcInRvdWNoc3RhcnQuZHJhZ1wiLCB0b3VjaHN0YXJ0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWdzdGFydChpZCwgcG9zaXRpb24sIHN1YmplY3QsIG1vdmUsIGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICB0YXJnZXQgPSBkMy5ldmVudC50YXJnZXQuY29ycmVzcG9uZGluZ0VsZW1lbnQgfHwgZDMuZXZlbnQudGFyZ2V0LFxuICAgICAgICAgIHBhcmVudCA9IHRoYXQucGFyZW50Tm9kZSxcbiAgICAgICAgICBkaXNwYXRjaCA9IGV2ZW50Lm9mKHRoYXQsIGFyZ3VtZW50cyksXG4gICAgICAgICAgZHJhZ2dlZCA9IDAsXG4gICAgICAgICAgZHJhZ0lkID0gaWQoKSxcbiAgICAgICAgICBkcmFnTmFtZSA9IFwiLmRyYWdcIiArIChkcmFnSWQgPT0gbnVsbCA/IFwiXCIgOiBcIi1cIiArIGRyYWdJZCksXG4gICAgICAgICAgZHJhZ09mZnNldCxcbiAgICAgICAgICBkcmFnU3ViamVjdCA9IGQzLnNlbGVjdChzdWJqZWN0KHRhcmdldCkpLm9uKG1vdmUgKyBkcmFnTmFtZSwgbW92ZWQpLm9uKGVuZCArIGRyYWdOYW1lLCBlbmRlZCksXG4gICAgICAgICAgZHJhZ1Jlc3RvcmUgPSBkM19ldmVudF9kcmFnU3VwcHJlc3ModGFyZ2V0KSxcbiAgICAgICAgICBwb3NpdGlvbjAgPSBwb3NpdGlvbihwYXJlbnQsIGRyYWdJZCk7XG5cbiAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgZHJhZ09mZnNldCA9IG9yaWdpbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgICAgICBkcmFnT2Zmc2V0ID0gW2RyYWdPZmZzZXQueCAtIHBvc2l0aW9uMFswXSwgZHJhZ09mZnNldC55IC0gcG9zaXRpb24wWzFdXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdPZmZzZXQgPSBbMCwgMF07XG4gICAgICB9XG5cbiAgICAgIGRpc3BhdGNoKHt0eXBlOiBcImRyYWdzdGFydFwifSk7XG5cbiAgICAgIGZ1bmN0aW9uIG1vdmVkKCkge1xuICAgICAgICB2YXIgcG9zaXRpb24xID0gcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpLCBkeCwgZHk7XG4gICAgICAgIGlmICghcG9zaXRpb24xKSByZXR1cm47IC8vIHRoaXMgdG91Y2ggZGlkbuKAmXQgbW92ZVxuXG4gICAgICAgIGR4ID0gcG9zaXRpb24xWzBdIC0gcG9zaXRpb24wWzBdO1xuICAgICAgICBkeSA9IHBvc2l0aW9uMVsxXSAtIHBvc2l0aW9uMFsxXTtcbiAgICAgICAgZHJhZ2dlZCB8PSBkeCB8IGR5O1xuICAgICAgICBwb3NpdGlvbjAgPSBwb3NpdGlvbjE7XG5cbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiZHJhZ1wiLFxuICAgICAgICAgIHg6IHBvc2l0aW9uMVswXSArIGRyYWdPZmZzZXRbMF0sXG4gICAgICAgICAgeTogcG9zaXRpb24xWzFdICsgZHJhZ09mZnNldFsxXSxcbiAgICAgICAgICBkeDogZHgsXG4gICAgICAgICAgZHk6IGR5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBlbmRlZCgpIHtcbiAgICAgICAgaWYgKCFwb3NpdGlvbihwYXJlbnQsIGRyYWdJZCkpIHJldHVybjsgLy8gdGhpcyB0b3VjaCBkaWRu4oCZdCBlbmRcbiAgICAgICAgZHJhZ1N1YmplY3Qub24obW92ZSArIGRyYWdOYW1lLCBudWxsKS5vbihlbmQgKyBkcmFnTmFtZSwgbnVsbCk7XG4gICAgICAgIGRyYWdSZXN0b3JlKGRyYWdnZWQpO1xuICAgICAgICBkaXNwYXRjaCh7dHlwZTogXCJkcmFnZW5kXCJ9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZHJhZy5vcmlnaW4gPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb3JpZ2luO1xuICAgIG9yaWdpbiA9IHg7XG4gICAgcmV0dXJuIGRyYWc7XG4gIH07XG5cbiAgcmV0dXJuIGQzLnJlYmluZChkcmFnLCBldmVudCwgXCJvblwiKTtcbn07XG5cbi8vIFdoaWxlIGl0IGlzIHBvc3NpYmxlIHRvIHJlY2VpdmUgYSB0b3VjaHN0YXJ0IGV2ZW50IHdpdGggbW9yZSB0aGFuIG9uZSBjaGFuZ2VkXG4vLyB0b3VjaCwgdGhlIGV2ZW50IGlzIG9ubHkgc2hhcmVkIGJ5IHRvdWNoZXMgb24gdGhlIHNhbWUgdGFyZ2V0OyBmb3IgbmV3XG4vLyB0b3VjaGVzIHRhcmdldHRpbmcgZGlmZmVyZW50IGVsZW1lbnRzLCBtdWx0aXBsZSB0b3VjaHN0YXJ0IGV2ZW50cyBhcmVcbi8vIHJlY2VpdmVkIGV2ZW4gd2hlbiB0aGUgdG91Y2hlcyBzdGFydCBzaW11bHRhbmVvdXNseS4gU2luY2UgbXVsdGlwbGUgdG91Y2hlc1xuLy8gY2Fubm90IG1vdmUgdGhlIHNhbWUgdGFyZ2V0IHRvIGRpZmZlcmVudCBsb2NhdGlvbnMgY29uY3VycmVudGx5IHdpdGhvdXRcbi8vIHRlYXJpbmcgdGhlIGZhYnJpYyBvZiBzcGFjZXRpbWUsIHdlIGFsbG93IHRoZSBmaXJzdCB0b3VjaCB0byB3aW4uXG5mdW5jdGlvbiBkM19iZWhhdmlvcl9kcmFnVG91Y2hJZCgpIHtcbiAgcmV0dXJuIGQzLmV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXI7XG59XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgdGhpcy5kMyA9IGQzLCBkZWZpbmUoZDMpO1xuICBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IGQzO1xuICBlbHNlIHRoaXMuZDMgPSBkMztcbn0oKTtcbiIsIi8qKlxuICogQWJzdHJhY3RGaWxlIGlzIGFuIGFic3RyYWN0IHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZS4gVGhlcmUgYXJlIHR3byBpbXBsZW1lbnRhdGlvbjpcbiAqIDEuIFJlbW90ZUZpbGUgIC0gcmVwcmVzZW50YXRpb24gb2YgYSBmaWxlIG9uIGEgcmVtb3RlIHNlcnZlciB3aGljaCBjYW4gYmVcbiAqIGZldGNoZWQgaW4gY2h1bmtzLCBlLmcuIHVzaW5nIGEgUmFuZ2UgcmVxdWVzdC5cbiAqIDIuIExvY2FsU3RyaW5nRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSB0aGF0IHdhcyBjcmVhdGVkIGZyb20gaW5wdXQgc3RyaW5nLiBcbiAqIFVzZWQgZm9yIHRlc3RpbmcgYW5kIHNtYWxsIGlucHV0IGZpbGVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vL2ltcG9ydCBRIGZyb20gJ3EnO1xuXG5jbGFzcyBBYnN0cmFjdEZpbGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvL2hvdyB0byBwcmV2ZW50IGluc3RhbnRhdGlvbiBvZiB0aGlzIGNsYXNzPz8/XG4gICAgLy90aGlzIGNvZGUgZG9lc24ndCBwYXNzIG5wbSBydW4gZmxvd1xuLy8gICAgaWYgKG5ldy50YXJnZXQgPT09IEFic3RyYWN0RmlsZSkgeyBcbi8vICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb25zdHJ1Y3QgQWJzdHJhY3RGaWxlIGluc3RhbmNlcyBkaXJlY3RseVwiKTtcbi8vICAgIH1cbiAgfVxuXG4gIGdldEJ5dGVzKHN0YXJ0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTpPYmplY3Qgey8vOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIGdldEJ5dGVzIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJlYWQgdGhlIGVudGlyZSBmaWxlIC0tIG5vdCByZWNvbW1lbmRlZCBmb3IgbGFyZ2UgZmlsZXMhXG4gIGdldEFsbCgpOk9iamVjdCB7Ly86IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0QWxsIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJlYWRzIHRoZSBlbnRpcmUgZmlsZSBhcyBhIHN0cmluZyAobm90IGFuIEFycmF5QnVmZmVyKS5cbiAgLy8gVGhpcyBkb2VzIG5vdCB1c2UgdGhlIGNhY2hlLlxuICBnZXRBbGxTdHJpbmcoKTpPYmplY3Qgey8vOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk1ldGhvZCBnZXRBbGxTdHJpbmcgaXMgbm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHJlbW90ZSBmaWxlLlxuICBnZXRTaXplKCk6T2JqZWN0IHsvLzogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0U2l6ZSBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBYnN0cmFjdEZpbGU7XG4iLCIvKipcbiAqIEludGVyZmFjZSBmb3IgYWxpZ25tZW50cywgc2hhcmVkIGJldHdlZW4gQkFNIGFuZCBHQTRHSCBiYWNrZW5kcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcbiBcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgdHlwZSBDb250aWdJbnRlcnZhbCBmcm9tICcuL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDb3ZlcmFnZUNvdW50fSBmcm9tICcuL3Zpei9waWxldXB1dGlscyc7XG5cbi8vIFwiQ0lHQVJcIiBvcGVyYXRpb25zIGV4cHJlc3MgaG93IGEgc2VxdWVuY2UgYWxpZ25zIHRvIHRoZSByZWZlcmVuY2U6IGRvZXMgaXRcbi8vIGhhdmUgaW5zZXJ0aW9ucz8gZGVsZXRpb25zPyBGb3IgbW9yZSBiYWNrZ3JvdW5kLCBzZWUgdGhlIFNBTS9CQU0gcGFwZXIuXG5leHBvcnQgdHlwZSBDaWdhclN5bWJvbCA9ICdNJ3wnSSd8J0QnfCdOJ3wnUyd8J0gnfCdQJ3wnPSd8J1gnO1xuZXhwb3J0IHR5cGUgQ2lnYXJPcCA9IHtcbiAgb3A6IENpZ2FyU3ltYm9sO1xuICBsZW5ndGg6IG51bWJlclxufVxuXG4vLyBjb252ZXJ0cyBhIHN0cmluZyBpbnRvIGEgU3RyYW5kIGVsZW1lbnQuIE11c3QgYmUgJysnIG9yICctJy4gQW55IG90aGVyXG4vLyBzdHJpbmdzIHdpbGwgYmUgY29udmVydGVkIHRvICcuJy5cbmZ1bmN0aW9uIHN0clRvU3RyYW5kKHN0cjogc3RyaW5nKTogU3RyYW5kIHtcbiAgcmV0dXJuIHN0ciAmJiBzdHIgPT0gJysnID8gJysnIDogKHN0ciAmJiBzdHIgPT0gJy0nID8gJy0nIDogJy4nKTsgLy8gZWl0aGVyICssIC0gb3IgLlxufVxuXG5leHBvcnQgdHlwZSBTdHJhbmQgPSAnLScgfCAnKycgfCAnLic7XG5cbi8vIGNvbnZlcnRzIGEgR0E0R0ggU3RyYW5kIHRvIGEgc3RyaW5nIG9mICBnYTRnaC5Db21tb24uc3RyYW5kLlBPU19TVFJBTkQsXG4vLyBORUdfU1RSQU5ELCBvciBTVFJBTkRfVU5TUEVDSUZJRUQgdG8gU3RyYW5kIHR5cGUuXG5mdW5jdGlvbiBnYTRnaFN0cmFuZFRvU3RyYW5kKHN0cjogc3RyaW5nKTogU3RyYW5kIHtcbiAgcmV0dXJuIHN0ciAmJiBzdHIgPT0gJ1BPU19TVFJBTkQnID8gJysnIDogKHN0ciAmJiBzdHIgPT0gJ05FR19TVFJBTkQnID8gJy0nIDogJy4nKTsgLy8gZWl0aGVyICssIC0gb3IgLlxufVxuXG4vLyBidWlsZHMgYSBjaWdhclN0cmluZyBzdHJpbmcgdGhhdCBpcyB1c2VmdWwgdG8gdXNlcnMuXG5mdW5jdGlvbiBtYWtlQ2lnYXJTdHJpbmcoY2lnYXJPcHM6IEFycmF5PENpZ2FyT3A+KSB7XG4gIHJldHVybiBjaWdhck9wcy5tYXAoKHtvcCwgbGVuZ3RofSkgPT4gbGVuZ3RoICsgb3ApLmpvaW4oJycpO1xufVxuXG5leHBvcnQgdHlwZSBNYXRlUHJvcGVydGllcyA9IHtcbiAgcmVmOiA/c3RyaW5nO1xuICBwb3M6IG51bWJlcjtcbiAgc3RyYW5kOiBTdHJhbmQ7XG59XG5cbmV4cG9ydCB0eXBlIEFsaWdubWVudCA9IHtcbiAgcG9zOiBudW1iZXI7XG4gIHJlZjogc3RyaW5nO1xuICBuYW1lOiBzdHJpbmc7XG4gIGNpZ2FyT3BzOiBDaWdhck9wW107XG5cbiAgZ2V0S2V5KCk6IHN0cmluZztcbiAgZ2V0U3RyYW5kKCk6IFN0cmFuZDtcbiAgZ2V0UXVhbGl0eVNjb3JlcygpOiBudW1iZXJbXTtcbiAgZ2V0U2VxdWVuY2UoKTogc3RyaW5nO1xuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBpbnRlcnNlY3RzKGludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbjtcbiAgZ2V0UmVmZXJlbmNlTGVuZ3RoKCk6IG51bWJlcjtcbiAgZ2V0TWF0ZVByb3BlcnRpZXMoKTogP01hdGVQcm9wZXJ0aWVzO1xuICBnZXRJbmZlcnJlZEluc2VydFNpemUoKTogbnVtYmVyO1xuICBnZXRDb3ZlcmFnZShyZWZlcmVuY2VTb3VyY2U6IE9iamVjdCk6IENvdmVyYWdlQ291bnQ7XG4gIGRlYnVnU3RyaW5nKCk6IHN0cmluZzsgXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgc3RyVG9TdHJhbmQsXG4gIGdhNGdoU3RyYW5kVG9TdHJhbmQsXG4gIG1ha2VDaWdhclN0cmluZ1xufTsiLCIvKiBAZmxvdyAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi9JbnRlcnZhbCc7XG5pbXBvcnQge2ZsYXRNYXB9IGZyb20gJy4vdXRpbHMnO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGNsb3NlZCBpbnRlcnZhbCBvbiB0aGUgZ2Vub21lOiBjb250aWc6c3RhcnQtc3RvcC5cbiAqXG4gKiBUaGUgY29udGlnIG1heSBiZSBlaXRoZXIgYSBzdHJpbmcgKFwiY2hyMjJcIikgb3IgYSBudW1iZXIgKGluIGNhc2UgdGhlIGNvbnRpZ3NcbiAqIGFyZSBpbmRleGVkLCBmb3IgZXhhbXBsZSkuXG4gKi9cbmNsYXNzIENvbnRpZ0ludGVydmFsPFQ6IChudW1iZXJ8c3RyaW5nKT4ge1xuICBjb250aWc6IFQ7XG4gIGludGVydmFsOiBJbnRlcnZhbDtcblxuICBjb25zdHJ1Y3Rvcihjb250aWc6IFQsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcikge1xuICAgIHRoaXMuY29udGlnID0gY29udGlnO1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSB0aGVzZSBnZXR0ZXIgbWV0aG9kcyAmIHN3aXRjaCB0byBCYWJlbC5cbiAgc3RhcnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5zdGFydDtcbiAgfVxuICBzdG9wKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwuc3RvcDtcbiAgfVxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5sZW5ndGgoKTtcbiAgfVxuXG4gIC8vIEludGVyc2VjdHMgZnVuY3Rpb24sIGFsbG93aW5nIGZvciAnY2hyMTcnIHZzLiAnMTcnLXN0eWxlIG1pc21hdGNoZXMuXG4gIGludGVyc2VjdHMob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNock9uQ29udGlnKG90aGVyLmNvbnRpZykgJiZcbiAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwuaW50ZXJzZWN0cyhvdGhlci5pbnRlcnZhbCkpO1xuICB9XG5cbiAgY29udGFpbnNJbnRlcnZhbChvdGhlcjogQ29udGlnSW50ZXJ2YWw8VD4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY2hyT25Db250aWcob3RoZXIuY29udGlnKSAmJlxuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWluc0ludGVydmFsKG90aGVyLmludGVydmFsKSk7XG4gIH1cblxuICBpc0FkamFjZW50VG8ob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNock9uQ29udGlnKG90aGVyLmNvbnRpZykgJiZcbiAgICAgICAgICAgICh0aGlzLnN0YXJ0KCkgPT0gMSArIG90aGVyLnN0b3AoKSB8fFxuICAgICAgICAgICAgIHRoaXMuc3RvcCgpICsgMSA9PSBvdGhlci5zdGFydCgpKSk7XG4gIH1cblxuICBpc0NvdmVyZWRCeShpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPFQ+W10pOiBib29sZWFuIHtcbiAgICB2YXIgaXZzID0gaW50ZXJ2YWxzLmZpbHRlcihpdiA9PiB0aGlzLmNock9uQ29udGlnKGl2LmNvbnRpZykpXG4gICAgICAgICAgICAgICAgICAgICAgIC5tYXAoaXYgPT4gaXYuaW50ZXJ2YWwpO1xuICAgIHJldHVybiB0aGlzLmludGVydmFsLmlzQ292ZXJlZEJ5KGl2cyk7XG4gIH1cblxuICBjb250YWluc0xvY3VzKGNvbnRpZzogVCwgcG9zaXRpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNock9uQ29udGlnKGNvbnRpZykgJiZcbiAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWlucyhwb3NpdGlvbik7XG4gIH1cblxuICAvLyBJcyB0aGlzIHJlYWQgb24gdGhlIGdpdmVuIGNvbnRpZz8gKGFsbG93aW5nIGZvciBjaHIxNyB2cyAxNy1zdHlsZSBtaXNtYXRjaGVzKVxuICBjaHJPbkNvbnRpZyhjb250aWc6IFQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY29udGlnID09PSBjb250aWcgfHxcbiAgICAgICAgICAgIHRoaXMuY29udGlnID09PSAnY2hyJyArIGNvbnRpZyB8fFxuICAgICAgICAgICAgJ2NocicgKyB0aGlzLmNvbnRpZyA9PT0gY29udGlnKTtcbiAgfVxuXG4gIGNsb25lKCk6IENvbnRpZ0ludGVydmFsPFQ+IHtcbiAgICByZXR1cm4gbmV3IENvbnRpZ0ludGVydmFsKHRoaXMuY29udGlnLCB0aGlzLmludGVydmFsLnN0YXJ0LCB0aGlzLmludGVydmFsLnN0b3ApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNpbWlsYXIgdG8gSW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscywgYnV0IG9ubHkgY29uc2lkZXJzIHRob3NlIGludGVydmFsc1xuICAgKiBvbiB0aGUgc2FtZSBjb250aWcgYXMgdGhpcyBvbmUuXG4gICAqL1xuICBjb21wbGVtZW50SW50ZXJ2YWxzKGludGVydmFsczogQ29udGlnSW50ZXJ2YWw8VD5bXSk6IENvbnRpZ0ludGVydmFsPFQ+W10ge1xuICAgIHJldHVybiB0aGlzLmludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoXG4gICAgICAgIGZsYXRNYXAoaW50ZXJ2YWxzLCBjaSA9PiB0aGlzLmNock9uQ29udGlnKGNpLmNvbnRpZykgPyBbY2kuaW50ZXJ2YWxdIDogW10pKVxuICAgICAgICAubWFwKGl2ID0+IG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgaXYuc3RhcnQsIGl2LnN0b3ApKTtcbiAgfVxuXG4gIC8qXG4gIFRoaXMgbWV0aG9kIGRvZXNuJ3QgdHlwZWNoZWNrLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2Zsb3cvaXNzdWVzLzM4OFxuICBpc0FmdGVySW50ZXJ2YWwob3RoZXI6IENvbnRpZ0ludGVydmFsKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA+IG90aGVyLmNvbnRpZyB8fFxuICAgICAgICAgICAgKHRoaXMuY29udGlnID09PSBvdGhlci5jb250aWcgJiYgdGhpcy5zdGFydCgpID4gb3RoZXIuc3RhcnQoKSkpO1xuICB9XG4gICovXG5cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5jb250aWd9OiR7dGhpcy5zdGFydCgpfS0ke3RoaXMuc3RvcCgpfWA7XG4gIH1cblxuICB0b0dlbm9tZVJhbmdlKCk6IEdlbm9tZVJhbmdlIHtcbiAgICBpZiAoISh0eXBlb2YgdGhpcy5jb250aWcgPT09ICdzdHJpbmcnIHx8IHRoaXMuY29udGlnIGluc3RhbmNlb2YgU3RyaW5nKSkge1xuICAgICAgdGhyb3cgJ0Nhbm5vdCBjb252ZXJ0IG51bWVyaWMgQ29udGlnSW50ZXJ2YWwgdG8gR2Vub21lUmFuZ2UnO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiB0aGlzLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0KCksXG4gICAgICBzdG9wOiB0aGlzLnN0b3AoKVxuICAgIH07XG4gIH1cblxuICByb3VuZChzaXplOiBudW1iZXIsIHplcm9CYXNlZDogYm9vbGVhbik6IENvbnRpZ0ludGVydmFsPFQ+IHtcbiAgICB2YXIgbmV3SW50ZXJ2YWwgPSB0aGlzLmludGVydmFsLnJvdW5kKHNpemUsIHplcm9CYXNlZCk7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgbmV3SW50ZXJ2YWwuc3RhcnQsIG5ld0ludGVydmFsLnN0b3ApO1xuICB9XG5cbiAgLy8gQ29tcGFyYXRvciBmb3IgdXNlIHdpdGggQXJyYXkucHJvdG90eXBlLnNvcnRcbiAgc3RhdGljIGNvbXBhcmU8VDogKHN0cmluZ3xudW1iZXIpPihhOiBDb250aWdJbnRlcnZhbDxUPiwgYjogQ29udGlnSW50ZXJ2YWw8VD4pOiBudW1iZXIge1xuICAgIGlmIChhLmNvbnRpZy50b1N0cmluZygpID4gYi5jb250aWcudG9TdHJpbmcoKSkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYS5jb250aWcudG9TdHJpbmcoKSA8IGIuY29udGlnLnRvU3RyaW5nKCkpIHtcbiAgICAgIHJldHVybiArMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGEuc3RhcnQoKSAtIGIuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBTb3J0IGFuIGFycmF5IG9mIGludGVydmFscyAmIGNvYWxlc2NlIGFkamFjZW50L292ZXJsYXBwaW5nIHJhbmdlcy5cbiAgLy8gTkI6IHRoaXMgbWF5IHJlLW9yZGVyIHRoZSBpbnRlcnZhbHMgcGFyYW1ldGVyXG4gIHN0YXRpYyBjb2FsZXNjZTxUOiAoc3RyaW5nfG51bWJlcik+KGludGVydmFsczogQ29udGlnSW50ZXJ2YWw8VD5bXSk6IENvbnRpZ0ludGVydmFsPFQ+W10ge1xuICAgIGludGVydmFscy5zb3J0KENvbnRpZ0ludGVydmFsLmNvbXBhcmUpO1xuXG4gICAgdmFyIHJzID0gW107XG4gICAgaW50ZXJ2YWxzLmZvckVhY2gociA9PiB7XG4gICAgICBpZiAocnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJzLnB1c2gocik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGxhc3RSID0gcnNbcnMubGVuZ3RoIC0gMV07XG4gICAgICBpZiAoci5pbnRlcnNlY3RzKGxhc3RSKSB8fCByLmlzQWRqYWNlbnRUbyhsYXN0UikpIHtcbiAgICAgICAgbGFzdFIgPSByc1tycy5sZW5ndGggLSAxXSA9IGxhc3RSLmNsb25lKCk7XG4gICAgICAgIGxhc3RSLmludGVydmFsLnN0b3AgPSBNYXRoLm1heChyLmludGVydmFsLnN0b3AsIGxhc3RSLmludGVydmFsLnN0b3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnMucHVzaChyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIHN0YXRpYyBmcm9tR2Vub21lUmFuZ2UocmFuZ2U6IEdlbm9tZVJhbmdlKTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcudG9TdHJpbmcoKSwgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQ29udGlnSW50ZXJ2YWw7XG4iLCIvKipcbiAqIENvbnRyb2xzIGZvciB6b29taW5nIHRvIHBhcnRpY3VsYXIgcmFuZ2VzIG9mIHRoZSBnZW5vbWUuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZSwgUGFydGlhbEdlbm9tZVJhbmdlfSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IHtSZWFjdH0gZnJvbSAnLi9TaGltRGVwZW5kZW5jaWVzJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi9JbnRlcnZhbCc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHJhbmdlOiA/R2Vub21lUmFuZ2U7XG4gIGNvbnRpZ0xpc3Q6IHN0cmluZ1tdO1xuICBvbkNoYW5nZTogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSk9PnZvaWQ7XG59O1xuXG50eXBlIFN0YXRlID0ge1xuICAvLyB0aGUgYmFzZSBudW1iZXIgdG8gYmUgdXNlZCBmb3IgYWJzb2x1dGUgem9vbVxuICAvLyBuZXcgcmFuZ2VzIGJlY29tZSAyKmRlZmF1bHRIYWxmSW50ZXJ2YWwqKnpvb21MZXZlbCArIDFcbiAgLy8gaGFsZiBpbnRlcnZhbCBpcyBzaW1wbHkgdGhlIHNwYW4gY3V0IGluIGhhbGYgYW5kIGV4Y2x1ZGluZyB0aGUgY2VudGVyXG4gIGRlZmF1bHRIYWxmSW50ZXJ2YWw6IG51bWJlcjtcbn07XG5cbmNsYXNzIENvbnRyb2xzIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiBTdGF0ZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7ZGVmYXVsdEhhbGZJbnRlcnZhbDoyfTtcbiAgfVxuXG4gIG1ha2VSYW5nZSgpOiBHZW5vbWVSYW5nZSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRpZzogdGhpcy5yZWZzLmNvbnRpZy52YWx1ZSxcbiAgICAgIHN0YXJ0OiBOdW1iZXIodGhpcy5yZWZzLnN0YXJ0LnZhbHVlKSxcbiAgICAgIHN0b3A6IE51bWJlcih0aGlzLnJlZnMuc3RvcC52YWx1ZSlcbiAgICB9O1xuICB9XG5cbiAgY29tcGxldGVSYW5nZShyYW5nZTogP1BhcnRpYWxHZW5vbWVSYW5nZSk6IEdlbm9tZVJhbmdlIHtcbiAgICByYW5nZSA9IHJhbmdlIHx8IHt9O1xuICAgIGlmIChyYW5nZS5zdGFydCAmJiByYW5nZS5zdG9wID09PSB1bmRlZmluZWQpIHtcbiAgICAgIC8vIENvbnN0cnVjdCBhIHJhbmdlIGNlbnRlcmVkIGFyb3VuZCBhIHZhbHVlLiBUaGlzIG1hdGNoZXMgSUdWLlxuICAgICAgcmFuZ2Uuc3RvcCA9IHJhbmdlLnN0YXJ0ICsgMjA7XG4gICAgICByYW5nZS5zdGFydCAtPSAyMDtcbiAgICB9XG5cbiAgICBpZiAocmFuZ2UuY29udGlnKSB7XG4gICAgICAvLyBUaGVyZSBhcmUgbWFqb3IgcGVyZm9ybWFuY2UgaXNzdWVzIHdpdGggaGF2aW5nIGEgJ2NocicgbWlzbWF0Y2ggaW4gdGhlXG4gICAgICAvLyBnbG9iYWwgbG9jYXRpb24gb2JqZWN0LlxuICAgICAgY29uc3QgY29udGlnID0gcmFuZ2UuY29udGlnO1xuICAgICAgdmFyIGFsdENvbnRpZyA9IF8uZmluZCh0aGlzLnByb3BzLmNvbnRpZ0xpc3QsIHJlZiA9PiB1dGlscy5pc0Nock1hdGNoKGNvbnRpZywgcmVmKSk7XG4gICAgICBpZiAoYWx0Q29udGlnKSByYW5nZS5jb250aWcgPSBhbHRDb250aWc7XG4gICAgfVxuXG4gICAgcmV0dXJuIChfLmV4dGVuZChfLmNsb25lKHRoaXMucHJvcHMucmFuZ2UpLCByYW5nZSkgOiBhbnkpO1xuICB9XG5cbiAgaGFuZGxlQ29udGlnQ2hhbmdlKGU6IFN5bnRoZXRpY0V2ZW50PD4pIHtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHRoaXMuY29tcGxldGVSYW5nZSh7Y29udGlnOiB0aGlzLnJlZnMuY29udGlnLnZhbHVlfSkpO1xuICB9XG5cbiAgaGFuZGxlRm9ybVN1Ym1pdChlOiBTeW50aGV0aWNFdmVudDw+KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHZhciByYW5nZSA9IHRoaXMuY29tcGxldGVSYW5nZSh1dGlscy5wYXJzZVJhbmdlKHRoaXMucmVmcy5wb3NpdGlvbi52YWx1ZSkpO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2UocmFuZ2UpO1xuICAgIHRoaXMudXBkYXRlU2xpZGVyKG5ldyBJbnRlcnZhbChyYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCkpO1xuICB9XG5cbiAgaGFuZGxlU2xpZGVyT25JbnB1dCgpe1xuICAgIC8vIHZhbHVlIGlzIGEgc3RyaW5nLCB3YW50IHZhbHVlQXNOdW1iZXJcbiAgICAvLyBzbGlkZXIgaGFzIG5lZ2F0aXZlIHZhbHVlcyB0byByZXZlcnNlIGl0cyBkaXJlY3Rpb24gc28gd2UgbmVlZCB0byBuZWdhdGVcbiAgICB0aGlzLnpvb21BYnMoLXRoaXMucmVmcy5zbGlkZXIudmFsdWVBc051bWJlcik7XG4gIH1cblxuICAvLyBTZXRzIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0IGVsZW1lbnRzIHRvIG1hdGNoIGBwcm9wcy5yYW5nZWAuXG4gIHVwZGF0ZVJhbmdlVUkoKSB7XG4gICAgY29uc3QgciA9IHRoaXMucHJvcHMucmFuZ2U7XG4gICAgaWYgKCFyKSByZXR1cm47XG5cbiAgICB0aGlzLnJlZnMucG9zaXRpb24udmFsdWUgPSB1dGlscy5mb3JtYXRJbnRlcnZhbChuZXcgSW50ZXJ2YWwoci5zdGFydCwgci5zdG9wKSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5jb250aWdMaXN0KSB7XG4gICAgICB2YXIgY29udGlnSWR4ID0gdGhpcy5wcm9wcy5jb250aWdMaXN0LmluZGV4T2Yoci5jb250aWcpO1xuICAgICAgdGhpcy5yZWZzLmNvbnRpZy5zZWxlY3RlZEluZGV4ID0gY29udGlnSWR4O1xuICAgIH1cbiAgfVxuXG4gIHpvb21JbihlOiBhbnkpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy56b29tQnlGYWN0b3IoMC41KTtcbiAgfVxuXG4gIHpvb21PdXQoZTogYW55KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuem9vbUJ5RmFjdG9yKDIuMCk7XG4gIH1cblxuICAvLyBVcGRhdGVzIHRoZSByYW5nZSB1c2luZyBhYnNTY2FsZVJhbmdlIGFuZCBhIGdpdmVuIHpvb20gbGV2ZWxcbiAgLy8gQWJzIG9yIGFic29sdXRlIGJlY2F1c2UgaXQgZG9lc24ndCByZWx5IG9uIHNjYWxpbmcgdGhlIGN1cnJlbnQgcmFuZ2VcbiAgem9vbUFicyhsZXZlbDogbnVtYmVyKSB7XG4gICAgdmFyIHIgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGlmICghcikgcmV0dXJuO1xuXG4gICAgdmFyIGl2ID0gdXRpbHMuYWJzU2NhbGVSYW5nZShuZXcgSW50ZXJ2YWwoci5zdGFydCwgci5zdG9wKSwgbGV2ZWwsIHRoaXMuc3RhdGUuZGVmYXVsdEhhbGZJbnRlcnZhbCk7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh7XG4gICAgICBjb250aWc6IHIuY29udGlnLFxuICAgICAgc3RhcnQ6IGl2LnN0YXJ0LFxuICAgICAgc3RvcDogaXYuc3RvcFxuICAgIH0pO1xuICB9XG5cbiAgem9vbUJ5RmFjdG9yKGZhY3RvcjogbnVtYmVyKSB7XG4gICAgdmFyIHIgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGlmICghcikgcmV0dXJuO1xuXG4gICAgdmFyIGl2ID0gdXRpbHMuc2NhbGVSYW5nZShuZXcgSW50ZXJ2YWwoci5zdGFydCwgci5zdG9wKSwgZmFjdG9yKTtcbiAgICB0aGlzLnByb3BzLm9uQ2hhbmdlKHtcbiAgICAgIGNvbnRpZzogci5jb250aWcsXG4gICAgICBzdGFydDogaXYuc3RhcnQsXG4gICAgICBzdG9wOiBpdi5zdG9wXG4gICAgfSk7XG4gICAgdGhpcy51cGRhdGVTbGlkZXIoaXYpO1xuICB9XG5cbiAgLy8gVG8gYmUgdXNlZCBpZiB0aGUgcmFuZ2UgY2hhbmdlcyB0aHJvdWdoIGEgY29udHJvbCBiZXNpZGVzIHRoZSBzbGlkZXJcbiAgLy8gU2xpZGVyIHZhbHVlIGlzIGNoYW5nZWQgdG8gcm91Z2hseSByZWZsZWN0IHRoZSBuZXcgcmFuZ2VcbiAgdXBkYXRlU2xpZGVyKG5ld0ludGVydmFsOiBJbnRlcnZhbCkge1xuICAgIHZhciBuZXdTcGFuID0gKG5ld0ludGVydmFsLnN0b3AgLSBuZXdJbnRlcnZhbC5zdGFydCk7XG4gICAgdGhpcy5yZWZzLnNsaWRlci52YWx1ZUFzTnVtYmVyID0gTWF0aC5jZWlsKC1NYXRoLmxvZzIobmV3U3BhbikgKyAxKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHZhciBjb250aWdPcHRpb25zID0gdGhpcy5wcm9wcy5jb250aWdMaXN0XG4gICAgICAgID8gdGhpcy5wcm9wcy5jb250aWdMaXN0Lm1hcCgoY29udGlnLCBpKSA9PiA8b3B0aW9uIGtleT17aX0+e2NvbnRpZ308L29wdGlvbj4pXG4gICAgICAgIDogbnVsbDtcblxuICAgIC8vIE5vdGU6IGlucHV0IHZhbHVlcyBhcmUgc2V0IGluIGNvbXBvbmVudERpZFVwZGF0ZS5cbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gY2xhc3NOYW1lPSdjb250cm9scycgb25TdWJtaXQ9e3RoaXMuaGFuZGxlRm9ybVN1Ym1pdC5iaW5kKHRoaXMpfT5cbiAgICAgICAgPHNlbGVjdCByZWY9J2NvbnRpZycgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ29udGlnQ2hhbmdlLmJpbmQodGhpcyl9PlxuICAgICAgICAgIHtjb250aWdPcHRpb25zfVxuICAgICAgICA8L3NlbGVjdD57JyAnfVxuICAgICAgICA8aW5wdXQgcmVmPSdwb3NpdGlvbicgdHlwZT0ndGV4dCcgLz57JyAnfVxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuLXN1Ym1pdCcgb25DbGljaz17dGhpcy5oYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyl9PkdvPC9idXR0b24+eycgJ31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3pvb20tY29udHJvbHMnPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1vdXQnIG9uQ2xpY2s9e3RoaXMuem9vbU91dC5iaW5kKHRoaXMpfT48L2J1dHRvbj57JyAnfVxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1pbicgb25DbGljaz17dGhpcy56b29tSW4uYmluZCh0aGlzKX0+PC9idXR0b24+XG4gICAgICAgICAgPGlucHV0IGNsYXNzTmFtZT0nem9vbS1zbGlkZXInIHJlZiA9J3NsaWRlcicgdHlwZT1cInJhbmdlXCIgbWluPVwiLTE1XCIgbWF4PVwiMFwiIG9uSW5wdXQ9e3RoaXMuaGFuZGxlU2xpZGVyT25JbnB1dC5iaW5kKHRoaXMpfSBjbGFzcz1cInNsaWRlclwiPjwvaW5wdXQ+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBPYmplY3QpIHtcbiAgICBpZiAoIV8uaXNFcXVhbChwcmV2UHJvcHMucmFuZ2UsIHRoaXMucHJvcHMucmFuZ2UpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2xzO1xuIiwiLyoqXG4gKiBUaGlzIHNlcnZlcyBhcyBhIGJyaWRnZSBiZXR3ZWVuIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnQgYW5kIHRoZVxuICogcGlsZXVwLmpzIEFsaWdubWVudCB0eXBlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Q2lnYXJPcCwgTWF0ZVByb3BlcnRpZXMsIFN0cmFuZH0gZnJvbSAnLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHttYWtlQ2lnYXJTdHJpbmd9IGZyb20gJy4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIHtDb3ZlcmFnZUNvdW50fSBmcm9tICcuL3Zpei9waWxldXB1dGlscyc7XG5pbXBvcnQge2dldE9wSW5mb30gZnJvbSAnLi92aXovcGlsZXVwdXRpbHMnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgU2FtUmVhZCBmcm9tICcuL2RhdGEvU2FtUmVhZCc7XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2E0Z2gvZ2E0Z2gtc2NoZW1hcy9ibG9iL21hc3Rlci9zcmMvbWFpbi9wcm90by9nYTRnaC9yZWFkcy5wcm90b1xuLy8gRGF0YSBjYW4gYmUgcXVlcmllZCBhdCBodHRwOi8vMWtnLmdhNGdoLm9yZy9yZWFkcy9zZWFyY2hcbnZhciBPUF9NQVAgPSB7XG4gIEFMSUdOTUVOVF9NQVRDSDogJ00nLFxuICBJTlNFUlQ6ICdJJyxcbiAgREVMRVRFOiAnRCcsXG4gIFNLSVA6ICdOJyxcbiAgQ0xJUF9TT0ZUOiAnUycsXG4gIENMSVBfSEFSRDogJ0gnLFxuICBQQUQ6ICdQJyxcbiAgU0VRVUVOQ0VfTUFUQ0g6ICc9JyxcbiAgU0VRVUVOQ0VfTUlTTUFUQ0g6ICdYJ1xufTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGFjdHMgYXMgYSBicmlkZ2UgYmV0d2VlbiBvcmcuZ2E0Z2guR0FSZWFkQWxpZ25tZW50IGFuZCB0aGVcbiAqIHBpbGV1cC5qcyBBbGlnbm1lbnQgdHlwZS5cbiAqL1xuY2xhc3MgR0E0R0hBbGlnbm1lbnQgLyogaW1wbGVtZW50cyBBbGlnbm1lbnQgKi8ge1xuICBwb3M6IG51bWJlcjtcbiAgcmVmOiBzdHJpbmc7XG4gIGFsaWdubWVudDogT2JqZWN0O1xuICBuYW1lOiBzdHJpbmc7XG4gIGNpZ2FyT3BzOiBDaWdhck9wW107XG4gIF9pbnRlcnZhbDogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcblxuICAvLyBhbGlnbm1lbnQgZm9sbG93cyBvcmcuZ2E0Z2guR0FSZWFkQWxpZ25tZW50XG4gIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nYTRnaC9nYTRnaC1zY2hlbWFzL2Jsb2IvbWFzdGVyL3NyYy9tYWluL3Byb3RvL2dhNGdoL3JlYWRzLnByb3RvXG4gIGNvbnN0cnVjdG9yKGFsaWdubWVudDogT2JqZWN0KSB7XG4gICAgdGhpcy5hbGlnbm1lbnQgPSBhbGlnbm1lbnQ7XG4gICAgdGhpcy5wb3MgPSBwYXJzZUludChhbGlnbm1lbnQuYWxpZ25tZW50LnBvc2l0aW9uLnBvc2l0aW9uKTtcbiAgICB0aGlzLnJlZiA9IGFsaWdubWVudC5hbGlnbm1lbnQucG9zaXRpb24ucmVmZXJlbmNlTmFtZTtcbiAgICB0aGlzLm5hbWUgPSBhbGlnbm1lbnQuZnJhZ21lbnROYW1lO1xuXG4gICAgdGhpcy5jaWdhck9wcyA9IGFsaWdubWVudC5hbGlnbm1lbnQuY2lnYXIubWFwKFxuICAgICAgICAoe29wZXJhdGlvbiwgb3BlcmF0aW9uTGVuZ3RoOiBsZW5ndGh9KSA9PiAoeyBvcDogT1BfTUFQW29wZXJhdGlvbl0sIGxlbmd0aDogcGFyc2VJbnQobGVuZ3RoKX0pXG4gICAgKTtcbiAgICB0aGlzLl9pbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLnJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyArIHRoaXMuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgLSAxKTtcbiAgfVxuXG4gIGdldEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBHQTRHSEFsaWdubWVudC5rZXlGcm9tR0E0R0hSZXNwb25zZSh0aGlzLmFsaWdubWVudCk7XG4gIH1cblxuICBnZXRTdHJhbmQoKTogU3RyYW5kIHtcbiAgICByZXR1cm4gdGhpcy5hbGlnbm1lbnQuYWxpZ25tZW50LnBvc2l0aW9uLnN0cmFuZCA9PSAnTkVHX1NUUkFORCcgPyAnLScgOiAnKyc7XG4gIH1cblxuICBnZXRRdWFsaXR5U2NvcmVzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5hbGlnbm1lbnQuYWxpZ25lZFF1YWxpdHk7XG4gIH1cblxuICBnZXRTZXF1ZW5jZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmFsaWdubWVudC5hbGlnbmVkU2VxdWVuY2U7XG4gIH1cblxuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJ2YWw7XG4gIH1cblxuICBpbnRlcnNlY3RzKGludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGludGVydmFsLmludGVyc2VjdHModGhpcy5nZXRJbnRlcnZhbCgpKTtcbiAgfVxuXG4gIGdldFJlZmVyZW5jZUxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiBTYW1SZWFkLnJlZmVyZW5jZUxlbmd0aEZyb21PcHModGhpcy5jaWdhck9wcyk7XG4gIH1cblxuICBnZXRNYXRlUHJvcGVydGllcygpOiA/TWF0ZVByb3BlcnRpZXMge1xuICAgIHZhciBuZXh0ID0gdGhpcy5hbGlnbm1lbnQubmV4dE1hdGVQb3NpdGlvbjtcbiAgICByZXR1cm4gbmV4dCAmJiB7XG4gICAgICByZWY6IG5leHQucmVmZXJlbmNlTmFtZSxcbiAgICAgIHBvczogcGFyc2VJbnQobmV4dC5wb3NpdGlvbiksXG4gICAgICBzdHJhbmQ6IG5leHQuc3RyYW5kID09ICdORUdfU1RSQU5EJyA/ICctJyA6ICcrJ1xuICAgIH07XG4gIH1cblxuICBnZXRJbmZlcnJlZEluc2VydFNpemUoKTogbnVtYmVyIHtcbiAgICAvLyBUT0RPOiBTQU0vQkFNIHdyaXRlcyB0aGlzIGV4cGxpY2l0bHkuIERvZXMgR0E0R0ggcmVhbGx5IG5vdD9cbiAgICB2YXIgbSA9IHRoaXMuZ2V0TWF0ZVByb3BlcnRpZXMoKTtcbiAgICBpZiAobSAmJiBtLnJlZiA9PSB0aGlzLnJlZikge1xuICAgICAgdmFyIHN0YXJ0MSA9IHRoaXMuX2ludGVydmFsLnN0YXJ0KCksXG4gICAgICAgICAgc3RvcDEgPSB0aGlzLl9pbnRlcnZhbC5zdG9wKCksXG4gICAgICAgICAgc3RhcnQyID0gbS5wb3MsXG4gICAgICAgICAgc3RvcDIgPSBzdGFydDIgKyB0aGlzLmdldFNlcXVlbmNlKCkubGVuZ3RoO1xuICAgICAgcmV0dXJuIE1hdGgubWF4KHN0b3AxLCBzdG9wMikgLSBNYXRoLm1pbihzdGFydDEsIHN0YXJ0Mik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuICBkZWJ1Z1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgTmFtZTogJHt0aGlzLm5hbWV9XG4gICAgUG9zaXRpb246ICR7dGhpcy5wb3MudG9TdHJpbmcoKX1cbiAgICBDSUdBUjogJHttYWtlQ2lnYXJTdHJpbmcodGhpcy5jaWdhck9wcyl9XG4gICAgU2VxdWVuY2U6ICR7dGhpcy5hbGlnbm1lbnQuYWxpZ25lZFNlcXVlbmNlfVxuICAgIFF1YWxpdHk6ICAke3RoaXMuYWxpZ25tZW50LmFsaWduZWRRdWFsaXR5fSBgO1xuICB9XG5cbiAgZ2V0Q292ZXJhZ2UocmVmZXJlbmNlU291cmNlOiBPYmplY3QpOiBDb3ZlcmFnZUNvdW50IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmFuZ2U6IHRoaXMuZ2V0SW50ZXJ2YWwoKSxcbiAgICAgIG9wSW5mbzogZ2V0T3BJbmZvKHRoaXMsIHJlZmVyZW5jZVNvdXJjZSlcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGlzIGV4cG9zZWQgYXMgYSBzdGF0aWMgbWV0aG9kIHRvIGZhY2lsaXRhdGUgYW4gb3B0aW1pemF0aW9uIGluIEdBNEdIQWxpZ25tZW50U291cmNlLlxuICBzdGF0aWMga2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50OiBPYmplY3QpOiBzdHJpbmcge1xuICAgIC8vIHRoaXMuYWxpZ25tZW50LmlkIHdvdWxkIGJlIGFwcGVhbGluZyBoZXJlLCBidXQgaXQncyBub3QgYWN0dWFsbHkgdW5pcXVlIVxuICAgIHJldHVybiBhbGlnbm1lbnQuZnJhZ21lbnROYW1lICsgJzonICsgYWxpZ25tZW50LnJlYWROdW1iZXI7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHQTRHSEFsaWdubWVudDtcbiIsIi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY2xvc2VkIG51bWVyaWMgaW50ZXJ2YWwsIFtzdGFydCwgc3RvcF0uXG4gKlxuICogQGZsb3dcbiAqL1xuXG5cInVzZSBzdHJpY3RcIjtcblxuY2xhc3MgSW50ZXJ2YWwge1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG5cbiAgLy8gUmVwcmVzZW50cyBbc3RhcnQsIHN0b3BdIC0tIGJvdGggZW5kcyBhcmUgaW5jbHVzaXZlLlxuICAvLyBJZiBzdG9wIDwgc3RhcnQsIHRoZW4gdGhpcyBpcyBhbiBlbXB0eSBpbnRlcnZhbC5cbiAgY29uc3RydWN0b3Ioc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuc3RvcCA9IHN0b3A7XG4gIH1cblxuICAvLyBUT0RPOiBtYWtlIHRoaXMgYSBnZXR0ZXIgbWV0aG9kICYgc3dpdGNoIHRvIEJhYmVsLlxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgdGhpcy5zdG9wIC0gdGhpcy5zdGFydCArIDEpO1xuICB9XG5cbiAgaW50ZXJzZWN0KG90aGVyOiBJbnRlcnZhbCk6IEludGVydmFsIHtcbiAgICByZXR1cm4gbmV3IEludGVydmFsKE1hdGgubWF4KHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgubWluKHRoaXMuc3RvcCwgb3RoZXIuc3RvcCkpO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhvdGhlcjogSW50ZXJ2YWwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydCA8PSBvdGhlci5zdG9wICYmIG90aGVyLnN0YXJ0IDw9IHRoaXMuc3RvcDtcbiAgfVxuXG4gIGNvbnRhaW5zKHZhbHVlOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdmFsdWUgPj0gdGhpcy5zdGFydCAmJiB2YWx1ZSA8PSB0aGlzLnN0b3A7XG4gIH1cblxuICBjb250YWluc0ludGVydmFsKG90aGVyOiBJbnRlcnZhbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0YXJ0KSAmJiB0aGlzLmNvbnRhaW5zKG90aGVyLnN0b3ApO1xuICB9XG5cbiAgLy8gUm91bmRzIHRoZSBpbnRlcnZhbCB0byB0aGUgbmVhcmVzdCBtdWx0aXBsZXMgb2Ygc2l6ZS5cbiAgLy8gT3B0aW9uYWwgbWluaW11bSBwYXJhbWV0ZXIgZGV0ZXJtaW5lcyB0aGUgbG93ZXN0XG4gIC8vIHBvc3NpYmxlIHZhbHVlIGZvciB0aGUgc3RhcnQgb2YgdGhlIHJlc3VsdGluZyBJbnRlcnZhbC5cbiAgcm91bmQoc2l6ZTogbnVtYmVyLCB6ZXJvQmFzZWQ6IGJvb2xlYW4pOiBJbnRlcnZhbCB7XG4gICAgdmFyIG1pbmltdW0gPSB6ZXJvQmFzZWQgPyAwIDogMTtcbiAgICB2YXIgcm91bmREb3duID0geCA9PiB4IC0geCAlIHNpemU7XG4gICAgdmFyIG5ld1N0YXJ0ID0gTWF0aC5tYXgobWluaW11bSwgcm91bmREb3duKHRoaXMuc3RhcnQpKSxcbiAgICAgICAgbmV3U3RvcCA9IHJvdW5kRG93bih0aGlzLnN0b3AgKyBzaXplIC0gMSk7XG5cbiAgICByZXR1cm4gbmV3IEludGVydmFsKG5ld1N0YXJ0LCBuZXdTdG9wKTtcbiAgfVxuXG4gIGNsb25lKCk6IEludGVydmFsIHtcbiAgICByZXR1cm4gbmV3IEludGVydmFsKHRoaXMuc3RhcnQsIHRoaXMuc3RvcCk7XG4gIH1cblxuICAvKipcbiAgICogSXMgdGhpcyBJbnRlcnZhbCBlbnRpcmVseSBjb3ZlcmVkIGJ5IHRoZSB1bmlvbiBvZiB0aGUgcmFuZ2VzP1xuICAgKiBUaGUgcmFuZ2VzIHBhcmFtZXRlciBtdXN0IGJlIHNvcnRlZCBieSByYW5nZS5zdGFydFxuICAgKi9cbiAgaXNDb3ZlcmVkQnkocmFuZ2VzOiBJbnRlcnZhbFtdKTogYm9vbGVhbiB7XG4gICAgdmFyIHJlbWFpbmluZyA9IHRoaXMuY2xvbmUoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJhbmdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHIgPSByYW5nZXNbaV07XG4gICAgICBpZiAoaSAmJiByLnN0YXJ0IDwgcmFuZ2VzW2kgLSAxXS5zdGFydCkge1xuICAgICAgICB0aHJvdyAnaXNDb3ZlcmVkQnkgbXVzdCBiZSBjYWxsZWQgd2l0aCBzb3J0ZWQgcmFuZ2VzJztcbiAgICAgIH1cbiAgICAgIGlmIChyLnN0YXJ0ID4gcmVtYWluaW5nLnN0YXJ0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTsgIC8vIEEgcG9zaXRpb24gaGFzIGJlZW4gbWlzc2VkIGFuZCB0aGVyZSdzIG5vIGdvaW5nIGJhY2suXG4gICAgICB9XG4gICAgICByZW1haW5pbmcuc3RhcnQgPSBNYXRoLm1heChyZW1haW5pbmcuc3RhcnQsIHIuc3RvcCArIDEpO1xuICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGgoKSA8PSAwKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgc3ViaW50ZXJ2YWxzIHdoaWNoIGFyZSBub3QgaW4gYG90aGVyYC5cbiAgICogVGhpcyBjYW4geWllbGQgZWl0aGVyIHplcm8sIG9uZSBvciB0d28gSW50ZXJ2YWxzLlxuICAgKi9cbiAgc3VidHJhY3Qob3RoZXI6IEludGVydmFsKTogSW50ZXJ2YWxbXSB7XG4gICAgaWYgKCF0aGlzLmludGVyc2VjdHMob3RoZXIpKSB7XG4gICAgICByZXR1cm4gW3RoaXNdOyAgLy8gdW5hZmZlY3RlZCBieSB0aGlzIHJhbmdlXG4gICAgfSBlbHNlIGlmICh0aGlzLmNvbnRhaW5zSW50ZXJ2YWwob3RoZXIpKSB7XG4gICAgICAvLyByZXR1cm4gdGhlIGJpdCBiZWZvcmUgYW5kIHRoZSBiaXQgYWZ0ZXJcbiAgICAgIHJldHVybiBbbmV3IEludGVydmFsKHRoaXMuc3RhcnQsIG90aGVyLnN0YXJ0IC0gMSksXG4gICAgICAgICAgICAgIG5ldyBJbnRlcnZhbChvdGhlci5zdG9wICsgMSwgdGhpcy5zdG9wKV0uZmlsdGVyKHggPT4geC5sZW5ndGgoKSA+IDApO1xuICAgIH0gZWxzZSBpZiAob3RoZXIuY29udGFpbnNJbnRlcnZhbCh0aGlzKSkge1xuICAgICAgcmV0dXJuIFtdOyAgLy8gaXQncyBiZWVuIGNvbXBsZXRlbHkgb2JsaXRlcmF0ZWRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gaXQgb3ZlcmxhcHMgb25lIGVuZFxuICAgICAgaWYgKG90aGVyLnN0YXJ0IDwgdGhpcy5zdGFydCkge1xuICAgICAgICByZXR1cm4gW25ldyBJbnRlcnZhbChvdGhlci5zdG9wICsgMSwgdGhpcy5zdG9wKV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gW25ldyBJbnRlcnZhbCh0aGlzLnN0YXJ0LCBvdGhlci5zdGFydCAtIDEpXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZCB0aGUgZGlzam9pbnQgc3ViaW50ZXJ2YWxzIG5vdCBjb3ZlcmVkIGJ5IGFueSBpbnRlcnZhbCBpbiB0aGUgbGlzdC5cbiAgICpcbiAgICogSWYgY29tcCA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMocmFuZ2VzKSwgdGhlbiB0aGlzIGd1YXJhbnRlZXMgdGhhdDpcbiAgICogLSBjb21wIHVuaW9uIHJhbmdlcyA9IGludGVydmFsXG4gICAqIC0gYSBpbnQgYiA9IDAgZm9yYWxsIGEgXFxpbiBjb21wLCBiIGluIHJhbmdlc1xuICAgKlxuICAgKiAoVGhlIGlucHV0IHJhbmdlcyBuZWVkIG5vdCBiZSBkaXNqb2ludC4pXG4gICAqL1xuICBjb21wbGVtZW50SW50ZXJ2YWxzKHJhbmdlczogSW50ZXJ2YWxbXSk6IEludGVydmFsW10ge1xuICAgIHZhciBjb21wcyA9IFt0aGlzXTtcbiAgICByYW5nZXMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICB2YXIgbmV3Q29tcHMgPSBbXTtcbiAgICAgIGNvbXBzLmZvckVhY2goaXYgPT4ge1xuICAgICAgICBuZXdDb21wcyA9IG5ld0NvbXBzLmNvbmNhdChpdi5zdWJ0cmFjdChyYW5nZSkpO1xuICAgICAgfSk7XG4gICAgICBjb21wcyA9IG5ld0NvbXBzO1xuICAgIH0pO1xuICAgIHJldHVybiBjb21wcztcbiAgfVxuXG4gIHN0YXRpYyBpbnRlcnNlY3RBbGwoaW50ZXJ2YWxzOiBBcnJheTxJbnRlcnZhbD4pOiBJbnRlcnZhbCB7XG4gICAgaWYgKCFpbnRlcnZhbHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWVkIHRvIGludGVyc2VjdCB6ZXJvIGludGVydmFscycpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gaW50ZXJ2YWxzWzBdLmNsb25lKCk7XG4gICAgaW50ZXJ2YWxzLnNsaWNlKDEpLmZvckVhY2goZnVuY3Rpb24oe3N0YXJ0LCBzdG9wfSkge1xuICAgICAgcmVzdWx0LnN0YXJ0ID0gTWF0aC5tYXgoc3RhcnQsIHJlc3VsdC5zdGFydCk7XG4gICAgICByZXN1bHQuc3RvcCA9IE1hdGgubWluKHN0b3AsIHJlc3VsdC5zdG9wKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gUmV0dXJucyBhbiBpbnRlcnZhbCB3aGljaCBjb250YWlucyBhbGwgdGhlIGdpdmVuIGludGVydmFscy5cbiAgc3RhdGljIGJvdW5kaW5nSW50ZXJ2YWwoaW50ZXJ2YWxzOiBBcnJheTxJbnRlcnZhbD4pOiBJbnRlcnZhbCB7XG4gICAgaWYgKCFpbnRlcnZhbHMubGVuZ3RoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWVkIHRvIGJvdW5kIHplcm8gaW50ZXJ2YWxzJyk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBpbnRlcnZhbHNbMF0uY2xvbmUoKTtcbiAgICBpbnRlcnZhbHMuc2xpY2UoMSkuZm9yRWFjaChmdW5jdGlvbih7c3RhcnQsIHN0b3B9KSB7XG4gICAgICByZXN1bHQuc3RhcnQgPSBNYXRoLm1pbihzdGFydCwgcmVzdWx0LnN0YXJ0KTtcbiAgICAgIHJlc3VsdC5zdG9wID0gTWF0aC5tYXgoc3RvcCwgcmVzdWx0LnN0b3ApO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgWyR7dGhpcy5zdGFydH0sICR7dGhpcy5zdG9wfV1gO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gSW50ZXJ2YWw7XG4iLCIvKipcbiAqIExvY2FsU3RyaW5nRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSB0aGF0IHdhcyBjcmVhdGVkIGZyb20gaW5wdXQgc3RyaW5nLiBVc2VkIGZvciB0ZXN0aW5nIGFuZCBzbWFsbCBpbnB1dCBmaWxlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgQWJzdHJhY3RGaWxlIGZyb20gJy4vQWJzdHJhY3RGaWxlJztcblxuY2xhc3MgTG9jYWxTdHJpbmdGaWxlIGV4dGVuZHMgQWJzdHJhY3RGaWxlIHtcbiAgZmlsZUxlbmd0aDogbnVtYmVyO1xuICBjb250ZW50OiBzdHJpbmc7ICAvL2NvbnRlbnQgb2YgdGhpcyBcIkZpbGVcIlxuICBidWZmZXI6IEFycmF5QnVmZmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRlbnQ6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5maWxlTGVuZ3RoID0gY29udGVudC5sZW5ndGg7ICBcbiAgICB0aGlzLmJ1ZmZlciA9IG5ldyBBcnJheUJ1ZmZlcihjb250ZW50Lmxlbmd0aCk7IC8vIDIgYnl0ZXMgZm9yIGVhY2ggY2hhclxuICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cbiAgICB2YXIgYnVmVmlldyA9IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyKTtcbiAgICBmb3IgKHZhciBpPTA7IGkgPCB0aGlzLmZpbGVMZW5ndGg7IGkrKykge1xuICAgICAgYnVmVmlld1tpXSA9IGNvbnRlbnQuY2hhckNvZGVBdChpKTtcbiAgICB9XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFEuUHJvbWlzZTw/QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAobGVuZ3RoIDwgMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgYnl0ZXMgKCR7bGVuZ3RofSlgKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgcmVtb3RlIGZpbGUgbGVuZ3RoIGlzIGtub3duLCBjbGFtcCB0aGUgcmVxdWVzdCB0byBmaXQgd2l0aGluIGl0LlxuICAgIHZhciBzdG9wID0gc3RhcnQgKyBsZW5ndGggLSAxO1xuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHN0b3AgPSBNYXRoLm1pbih0aGlzLmZpbGVMZW5ndGggLSAxLCBzdG9wKTtcbiAgICB9XG5cbiAgICAvLyBGaXJzdCBjaGVjayB0aGUgY2FjaGUuXG4gICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKHN0YXJ0LCBzdG9wKTtcbiAgICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPD9BcnJheUJ1ZmZlcj4ge1xuICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKDAsIHRoaXMuZmlsZUxlbmd0aCAtIDEpO1xuICAgcmV0dXJuIFEud2hlbihidWYpO1xuICB9XG5cbiAgLy8gUmVhZHMgdGhlIGVudGlyZSBmaWxlIGFzIGEgc3RyaW5nIChub3QgYW4gQXJyYXlCdWZmZXIpLlxuICAvLyBUaGlzIGRvZXMgbm90IHVzZSB0aGUgY2FjaGUuXG4gIGdldEFsbFN0cmluZygpOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgcmV0dXJuIFEud2hlbih0aGlzLmNvbnRlbnQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHJlbW90ZSBmaWxlLlxuICBnZXRTaXplKCk6IFEuUHJvbWlzZTxudW1iZXI+IHtcbiAgICByZXR1cm4gUS53aGVuKHRoaXMuZmlsZUxlbmd0aCk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3AgKyAxKTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gTG9jYWxTdHJpbmdGaWxlO1xuIiwiLyoqXG4gKiBBIGdlbmVyaWMgbWVudSwgaW50ZW5kZWQgdG8gYmUgdXNlZCBmb3IgYm90aCB0b2dnbGluZyBvcHRpb25zIGFuZCBpbnZva2luZyBjb21tYW5kcy5cbiAqXG4gKiBVc2FnZTpcbiAqXG4gKiB2YXIgaXRlbXMgPSBbXG4gKiAgIHtrZXk6ICdhJywgbGFiZWw6ICdJdGVtIEEnLCBjaGVja2VkOiB0cnVlfSxcbiAqICAge2tleTogJ2InLCBsYWJlbDogJ0l0ZW0gQid9LFxuICogICAnLScsXG4gKiAgIHtrZXk6ICdyYW5kb20nLCBsYWJlbDogJ1BpY2sgUmFuZG9tJ31cbiAqIF07XG4gKiA8TWVudSBoZWFkZXI9XCJIZWFkZXJcIiBpdGVtcz17aXRlbXN9IG9uU2VsZWN0PXtzZWxlY3RIYW5kbGVyfSAvPlxuICpcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge1JlYWN0fSBmcm9tICcuL1NoaW1EZXBlbmRlbmNpZXMnO1xuXG50eXBlIE1lbnVJdGVtID0ge1xuICBrZXk6IHN0cmluZztcbiAgbGFiZWw6IHN0cmluZztcbiAgY2hlY2tlZD86IGJvb2xlYW47XG59O1xuXG50eXBlIFByb3BzID0ge1xuICBoZWFkZXI6IHN0cmluZztcbiAgaXRlbXM6IEFycmF5PE1lbnVJdGVtfCctJz47XG4gIG9uU2VsZWN0OiAoa2V5OiBzdHJpbmcpID0+IHZvaWQ7XG59O1xuXG5jbGFzcyBNZW51IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzPiB7XG4gIHByb3BzOiBQcm9wcztcblxuICBjbGlja0hhbmRsZXIoaWR4OiBudW1iZXIsIGU6IFN5bnRoZXRpY01vdXNlRXZlbnQ8Pikge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaXRlbSA9IHRoaXMucHJvcHMuaXRlbXNbaWR4XTtcbiAgICBpZiAodHlwZW9mKGl0ZW0pID09ICdzdHJpbmcnKSByZXR1cm47ICAvLyBmb3IgZmxvd1xuICAgIHRoaXMucHJvcHMub25TZWxlY3QoaXRlbS5rZXkpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgdmFyIG1ha2VIYW5kbGVyID0gaSA9PiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMsIGkpO1xuICAgIHZhciBlbHMgPSBbXTtcbiAgICBpZiAodGhpcy5wcm9wcy5oZWFkZXIpIHtcbiAgICAgIGVscy5wdXNoKDxkaXYga2V5PSdoZWFkZXInIGNsYXNzTmFtZT0nbWVudS1oZWFkZXInPnt0aGlzLnByb3BzLmhlYWRlcn08L2Rpdj4pO1xuICAgIH1cbiAgICBlbHMgPSBlbHMuY29uY2F0KHRoaXMucHJvcHMuaXRlbXMubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICBpZiAodHlwZW9mKGl0ZW0pID09PSAnc3RyaW5nJykgeyAgLy8gd291bGQgcHJlZmVyIFwiPT0gJy0nXCIsIHNlZSBmbG93IzEwNjZcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtc2VwYXJhdG9yJyAvPjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaGVja0NsYXNzID0gJ2NoZWNrJyArIChpdGVtLmNoZWNrZWQgPyAnIGNoZWNrZWQnIDogJycpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtaXRlbScgb25DbGljaz17bWFrZUhhbmRsZXIoaSl9PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjaGVja0NsYXNzfT48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21lbnUtaXRlbS1sYWJlbCc+e2l0ZW0ubGFiZWx9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudSc+XG4gICAgICAgIHtlbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWVudTtcbiIsIi8qKlxuICogUmVtb3RlRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSBvbiBhIHJlbW90ZSBzZXJ2ZXIgd2hpY2ggY2FuIGJlXG4gKiBmZXRjaGVkIGluIGNodW5rcywgZS5nLiB1c2luZyBhIFJhbmdlIHJlcXVlc3QuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IEFic3RyYWN0RmlsZSBmcm9tICcuL0Fic3RyYWN0RmlsZSc7XG5cbnR5cGUgQ2h1bmsgPSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgLy8gVE9ETyhkYW52ayk6IHByaW9yaXR5OiBudW1iZXI7XG59XG5cblxuY2xhc3MgUmVtb3RlRmlsZSBleHRlbmRzIEFic3RyYWN0RmlsZXtcbiAgdXJsOiBzdHJpbmc7XG4gIGZpbGVMZW5ndGg6IG51bWJlcjtcbiAgY2h1bmtzOiBBcnJheTxDaHVuaz47ICAvLyByZWdpb25zIG9mIGZpbGUgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBsb2FkZWQuXG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5maWxlTGVuZ3RoID0gLTE7ICAvLyB1bmtub3duXG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICByZXR1cm4gUS5yZWplY3QoYFJlcXVlc3RlZCA8MCBieXRlcyAoJHtsZW5ndGh9KSBmcm9tICR7dGhpcy51cmx9YCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHJlbW90ZSBmaWxlIGxlbmd0aCBpcyBrbm93biwgY2xhbXAgdGhlIHJlcXVlc3QgdG8gZml0IHdpdGhpbiBpdC5cbiAgICB2YXIgc3RvcCA9IHN0YXJ0ICsgbGVuZ3RoIC0gMTtcbiAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xKSB7XG4gICAgICBzdG9wID0gTWF0aC5taW4odGhpcy5maWxlTGVuZ3RoIC0gMSwgc3RvcCk7XG4gICAgfVxuXG4gICAgLy8gRmlyc3QgY2hlY2sgdGhlIGNhY2hlLlxuICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZShzdGFydCwgc3RvcCk7XG4gICAgaWYgKGJ1Zikge1xuICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IGhhbmRsZSBwYXJ0aWFsIG92ZXJsYXAgb2YgcmVxdWVzdCB3LyBjYWNoZS5cblxuICAgIC8vIE5lZWQgdG8gZmV0Y2ggZnJvbSB0aGUgbmV0d29yay5cbiAgICByZXR1cm4gdGhpcy5nZXRGcm9tTmV0d29yayhzdGFydCwgc3RvcCk7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgLy8gQ2hlY2sgY2FjaGUgaWYgZmlsZSBsZW5ndGggaXMgYXZhaWxhYmxlLlxuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZSgwLCB0aGlzLmZpbGVMZW5ndGggLSAxKTtcbiAgICAgIGlmIChidWYpIHtcbiAgICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbYnVmZmVyXSkgPT4ge1xuICAgICAgdGhpcy5maWxlTGVuZ3RoID0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICB0aGlzLmNodW5rcyA9IFt7c3RhcnQ6IDAsIHN0b3A6IHRoaXMuZmlsZUxlbmd0aCAtIDEsIGJ1ZmZlcn1dO1xuICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJlYWRzIHRoZSBlbnRpcmUgZmlsZSBhcyBhIHN0cmluZyAobm90IGFuIEFycmF5QnVmZmVyKS5cbiAgLy8gVGhpcyBkb2VzIG5vdCB1c2UgdGhlIGNhY2hlLlxuICBnZXRBbGxTdHJpbmcoKTogUS5Qcm9taXNlPHN0cmluZz4ge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbc3RyaW5nXSkgPT4ge1xuICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluIHRoZSByZW1vdGUgZmlsZS5cbiAgZ2V0U2l6ZSgpOiBRLlByb21pc2U8bnVtYmVyPiB7XG4gICAgaWYgKHRoaXMuZmlsZUxlbmd0aCAhPSAtMSkge1xuICAgICAgcmV0dXJuIFEud2hlbih0aGlzLmZpbGVMZW5ndGgpO1xuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignSEVBRCcsIHRoaXMudXJsKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIGV2ZW50LnRvdGFsIHdvdWxkIGJlIGJldHRlciwgc2VlIGZhY2Vib29rL2Zsb3cjMzU3XG4gICAgICB2YXIgbGVuID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LUxlbmd0aCcpO1xuICAgICAgaWYgKGxlbiAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGxlbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnUmVtb3RlIHJlc291cmNlIGhhcyB1bmtub3duIGxlbmd0aCc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2h1bmsgPSB0aGlzLmNodW5rc1tpXTtcbiAgICAgIGlmIChjaHVuay5zdGFydCA8PSBzdGFydCAmJiBjaHVuay5zdG9wID49IHN0b3ApIHtcbiAgICAgICAgcmV0dXJuIGNodW5rLmJ1ZmZlci5zbGljZShzdGFydCAtIGNodW5rLnN0YXJ0LCBzdG9wIC0gY2h1bmsuc3RhcnQgKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXRGcm9tTmV0d29yayhzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB2YXIgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0ICsgMTtcbiAgICBpZiAobGVuZ3RoID4gNTAwMDAwMDApIHtcbiAgICAgIHRocm93IGBNb25zdGVyIHJlcXVlc3Q6IFdvbid0IGZldGNoICR7bGVuZ3RofSBieXRlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMudXJsKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCBgYnl0ZXM9JHtzdGFydH0tJHtzdG9wfWApO1xuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZVhIUih4aHIpLnRoZW4oKFtidWZmZXJdKSA9PiB7XG4gICAgICAvLyBUaGUgYWN0dWFsIGxlbmd0aCBvZiB0aGUgcmVzcG9uc2UgbWF5IGJlIGxlc3MgdGhhbiByZXF1ZXN0ZWQgaWYgaXQnc1xuICAgICAgLy8gdG9vIHNob3J0LCBlLmcuIGlmIHdlIHJlcXVlc3QgYnl0ZXMgMC0xMDAwIG9mIGEgNTAwLWJ5dGUgZmlsZS5cbiAgICAgIHZhciBuZXdDaHVuayA9IHsgc3RhcnQsIHN0b3A6IHN0YXJ0ICsgYnVmZmVyLmJ5dGVMZW5ndGggLSAxLCBidWZmZXIgfTtcbiAgICAgIHRoaXMuY2h1bmtzLnB1c2gobmV3Q2h1bmspO1xuXG4gICAgICAvLyBSZWNvcmQgdGhlIGZ1bGwgZmlsZSBsZW5ndGggaWYgaXQncyBhdmFpbGFibGUuXG4gICAgICB2YXIgc2l6ZSA9IHRoaXMuX2dldExlbmd0aEZyb21Db250ZW50UmFuZ2UoeGhyKTtcbiAgICAgIGlmIChzaXplICE9PSBudWxsICYmIHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xICYmIHRoaXMuZmlsZUxlbmd0aCAhPSBzaXplKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBTaXplIG9mIHJlbW90ZSBmaWxlICR7dGhpcy51cmx9IGNoYW5nZWQgZnJvbSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5maWxlTGVuZ3RofSB0byAke3NpemV9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5maWxlTGVuZ3RoID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gV3JhcHBlciB0byBjb252ZXJ0IFhIUnMgdG8gUHJvbWlzZXMuXG4gIC8vIFRoZSBwcm9taXNlZCB2YWx1ZXMgYXJlIHRoZSByZXNwb25zZSAoZS5nLiBhbiBBcnJheUJ1ZmZlcikgYW5kIHRoZSBFdmVudC5cbiAgcHJvbWlzZVhIUih4aHI6IFhNTEh0dHBSZXF1ZXN0KTogUS5Qcm9taXNlPFthbnksIEV2ZW50XT4ge1xuICAgIHZhciB1cmwgPSB0aGlzLnVybDtcbiAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGBSZXF1ZXN0IGZvciAke3VybH0gZmFpbGVkIHdpdGggc3RhdHVzOiAke3RoaXMuc3RhdHVzfSAke3RoaXMuc3RhdHVzVGV4dH1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlZmVycmVkLnJlc29sdmUoW3RoaXMucmVzcG9uc2UsIGVdKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgfSk7XG4gICAgdGhpcy5udW1OZXR3b3JrUmVxdWVzdHMrKztcbiAgICB4aHIuc2VuZCgpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG5cbiAgLy8gQXR0ZW1wdGluZyB0byBhY2Nlc3MgQ29udGVudC1SYW5nZSBkaXJlY3RseSBtYXkgcmFpc2Ugc2VjdXJpdHkgZXJyb3JzLlxuICAvLyBUaGlzIGVuc3VyZXMgdGhlIGFjY2VzcyBpcyBzYWZlIGJlZm9yZSBtYWtpbmcgaXQuXG4gIF9nZXRMZW5ndGhGcm9tQ29udGVudFJhbmdlKHhocjogWE1MSHR0cFJlcXVlc3QpOiA/bnVtYmVyIHtcbiAgICBpZiAoIS9Db250ZW50LVJhbmdlL2kuZXhlYyh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudFJhbmdlID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LVJhbmdlJyk7XG4gICAgdmFyIG0gPSAvXFwvKFxcZCspJC8uZXhlYyhjb250ZW50UmFuZ2UpO1xuICAgIGlmIChtKSB7XG4gICAgICByZXR1cm4gTnVtYmVyKG1bMV0pO1xuICAgIH1cbiAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkIGltcHJvcGVyIENvbnRlbnQtUmFuZ2UgdmFsdWUgZm9yIGAgK1xuICAgICAgICAgICAgICAgICBgJHt0aGlzLnVybH06ICR7Y29udGVudFJhbmdlfWApO1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgY2xlYXJDYWNoZSgpIHtcbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVtb3RlRmlsZTtcbiIsIi8qKlxuICogUmVtb3RlUmVxdWVzdCBpcyBhIGdlbmVyaWMgZW5kcG9pbnQgZm9yIHNlcnZpbmcgaHR0cCByZXF1ZXN0cy4gUmVtb3RlUmVxdWVzdFxuICogaGFuZGxlcyBqc29uIGRhdGEsIHdoaWNoIGlzIHNwZWNpZmllZCBieSBnZW5vbWljIHJhbmdlIChjb250aWcsIHN0YXJ0LCBzdG9wKVxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5cbnZhciBNT05TVEVSX1JFUVVFU1QgPSA1MDAwMDAwO1xuXG5jbGFzcyBSZW1vdGVSZXF1ZXN0IHtcbiAgdXJsOiBzdHJpbmc7XG4gIGNhY2hlOiBPYmplY3Q7XG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHRoaXMuY2FjaGUgPSByZXF1aXJlKCdtZW1vcnktY2FjaGUnKTtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBnZXQoY29udGlnOiBzdHJpbmcsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcik6IFEuUHJvbWlzZTxPYmplY3Q+IHtcbiAgICB2YXIgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0O1xuICAgIGlmIChsZW5ndGggPD0gMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgaW50ZXJ2YWwgKCR7bGVuZ3RofSkgZnJvbSAke3RoaXMudXJsfWApO1xuICAgIH1cblxuICAgIC8vIEZpcnN0IGNoZWNrIHRoZSBjYWNoZS5cbiAgICB2YXIgY29udGlnSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBzdGFydCwgc3RvcCk7XG4gICAgdmFyIGJ1ZiA9IHRoaXMuY2FjaGUuZ2V0KGNvbnRpZ0ludGVydmFsKTtcbiAgICBpZiAoYnVmKSB7XG4gICAgICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gICAgfVxuXG4gICAgLy8gTmVlZCB0byBmZXRjaCBmcm9tIHRoZSBuZXR3b3JrLlxuICAgIHJldHVybiB0aGlzLmdldEZyb21OZXR3b3JrKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgbXVzdCBiZSBvZiBmb3JtIFwidXJsL2NvbnRpZz9zdGFydD1zdGFydCZlbmQ9c3RvcFwiXG4gICovXG4gIGdldEZyb21OZXR3b3JrKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIGxlbmd0aCA9IHN0b3AgLSBzdGFydDtcbiAgICBpZiAobGVuZ3RoID4gNTAwMDAwMCkge1xuICAgICAgdGhyb3cgYE1vbnN0ZXIgcmVxdWVzdDogV29uJ3QgZmV0Y2ggJHtsZW5ndGh9IHNpemVkIHJhbmdlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHZhciBlbmRwb2ludCA9IHRoaXMuZ2V0RW5kcG9pbnRGcm9tQ29udGlnKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICAgIHhoci5vcGVuKCdHRVQnLCBlbmRwb2ludCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKGpzb24gPT4ge1xuICAgICAgLy8gZXh0cmFjdCByZXNwb25zZSBmcm9tIHByb21pc2VcbiAgICAgIHZhciBidWZmZXIgPSBqc29uWzBdO1xuICAgICAgdmFyIGNvbnRpZ0ludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKGNvbnRpZywgc3RhcnQsIHN0b3ApO1xuICAgICAgdGhpcy5jYWNoZS5wdXQoY29udGlnSW50ZXJ2YWwsIGJ1ZmZlcik7XG4gICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0RW5kcG9pbnRGcm9tQ29udGlnKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLnVybH0vJHtjb250aWd9P3N0YXJ0PSR7c3RhcnR9JmVuZD0ke3N0b3B9YDtcbiAgfVxuXG4gIC8vIFdyYXBwZXIgdG8gY29udmVydCBYSFJzIHRvIFByb21pc2VzLlxuICAvLyBUaGUgcHJvbWlzZWQgdmFsdWVzIGFyZSB0aGUgcmVzcG9uc2UgKGUuZy4gYW4gQXJyYXlCdWZmZXIpIGFuZCB0aGUgRXZlbnQuXG4gIHByb21pc2VYSFIoeGhyOiBYTUxIdHRwUmVxdWVzdCk6IFEuUHJvbWlzZTxbYW55LCBFdmVudF0+IHtcbiAgICB2YXIgdXJsID0gdGhpcy51cmw7XG4gICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcigpO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKFt0aGlzLnJlc3BvbnNlLCBlXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICBkZWZlcnJlZC5yZWplY3QoYFJlcXVlc3QgZm9yICR7dXJsfSBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7dGhpcy5zdGF0dXN9ICR7dGhpcy5zdGF0dXNUZXh0fWApO1xuICAgIH0pO1xuICAgIHRoaXMubnVtTmV0d29ya1JlcXVlc3RzKys7XG4gICAgeGhyLnNlbmQoKTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgUmVtb3RlUmVxdWVzdCxcbiAgTU9OU1RFUl9SRVFVRVNUOiBNT05TVEVSX1JFUVVFU1Rcbn07XG4iLCIvKipcbiAqIFJvb3Qgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0cmVlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbGl6ZWRUcmFjaywgVml6V2l0aE9wdGlvbnN9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQge1JlYWN0fSBmcm9tICcuL1NoaW1EZXBlbmRlbmNpZXMnO1xuaW1wb3J0IENvbnRyb2xzIGZyb20gJy4vQ29udHJvbHMnO1xuaW1wb3J0IE1lbnUgZnJvbSAnLi9NZW51JztcbmltcG9ydCBWaXN1YWxpemF0aW9uV3JhcHBlciBmcm9tICcuL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcblxudHlwZSBQcm9wcyA9IHtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHRyYWNrczogVmlzdWFsaXplZFRyYWNrW107XG4gIGluaXRpYWxSYW5nZTogR2Vub21lUmFuZ2U7XG4gIGNvbnRyb2xzT2ZmPzogYm9vbGVhbjtcbn07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIGNvbnRpZ0xpc3Q6IHN0cmluZ1tdO1xuICByYW5nZTogP0dlbm9tZVJhbmdlO1xuICBzZXR0aW5nc01lbnVLZXk6ID9zdHJpbmc7XG4gIHVwZGF0ZVNpemU6IGJvb2xlYW47XG59O1xuXG5jbGFzcyBSb290IGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFByb3BzLCBTdGF0ZT4ge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiBTdGF0ZTtcbiAgdHJhY2tSZWFjdEVsZW1lbnRzOiBBcnJheTxPYmplY3Q+OyAvL2l0J3MgYW4gYXJyYXkgb2YgcmVhY3RlbGVtZW50IHRoYXQgYXJlIGNyZWF0ZWQgZm9yIHRyYWNrc1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGNvbnRpZ0xpc3Q6IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLmNvbnRpZ0xpc3QoKSxcbiAgICAgIHJhbmdlOiBudWxsLFxuICAgICAgdXBkYXRlU2l6ZTogZmFsc2UsXG4gICAgICBzZXR0aW5nc01lbnVLZXk6IG51bGxcbiAgICB9O1xuICAgIHRoaXMudHJhY2tSZWFjdEVsZW1lbnRzID0gW107XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignY29udGlncycsICgpID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICBjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCksXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5zdGF0ZS5yYW5nZSkge1xuICAgICAgdGhpcy5oYW5kbGVSYW5nZUNoYW5nZSh0aGlzLnByb3BzLmluaXRpYWxSYW5nZSk7XG4gICAgfVxuICAgIC8vIGluIGNhc2UgdGhlIGNvbnRpZ3MgY2FtZSBpbiBiZXR3ZWVuIGdldEluaXRpYWxTdGF0ZSgpIGFuZCBoZXJlLlxuICAgIHRoaXMuc2V0U3RhdGUoe2NvbnRpZ0xpc3Q6IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLmNvbnRpZ0xpc3QoKX0pO1xuICB9XG5cbiAgaGFuZGxlUmFuZ2VDaGFuZ2UobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgLy8gRG8gbm90IHByb3BhZ2F0ZSBuZWdhdGl2ZSByYW5nZXNcbiAgICBpZiAobmV3UmFuZ2Uuc3RhcnQgPCAwKSB7XG4gICAgICBuZXdSYW5nZS5zdGFydCA9IDA7XG4gICAgfVxuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm5vcm1hbGl6ZVJhbmdlKG5ld1JhbmdlKS50aGVuKHJhbmdlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3JhbmdlOiByYW5nZX0pO1xuXG4gICAgICAvLyBJbmZvcm0gYWxsIHRoZSBzb3VyY2VzIG9mIHRoZSByYW5nZSBjaGFuZ2UgKGluY2x1ZGluZyByZWZlcmVuY2VTb3VyY2UpLlxuICAgICAgdGhpcy5wcm9wcy50cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgIHRyYWNrLnNvdXJjZS5yYW5nZUNoYW5nZWQocmFuZ2UpO1xuICAgICAgfSk7XG4gICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgdG9nZ2xlU2V0dGluZ3NNZW51KGtleTogc3RyaW5nLCBlOiBTeW50aGV0aWNFdmVudDw+KSB7XG4gICAgaWYgKHRoaXMuc3RhdGUuc2V0dGluZ3NNZW51S2V5ID09IGtleSkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7c2V0dGluZ3NNZW51S2V5OiBudWxsfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleToga2V5fSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlU2VsZWN0T3B0aW9uKHRyYWNrS2V5OiBzdHJpbmcsIG9wdGlvbktleTogc3RyaW5nKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7c2V0dGluZ3NNZW51S2V5OiBudWxsfSk7XG4gICAgdmFyIHZpeiA9IHRoaXMucHJvcHMudHJhY2tzW051bWJlcih0cmFja0tleSldLnZpc3VhbGl6YXRpb247XG4gICAgdmFyIG9sZE9wdHMgPSB2aXoub3B0aW9ucztcbiAgICAvLyAkRmxvd0lnbm9yZTogVE9ETyByZW1vdmUgZmxvdyBzdXBwcmVzc2lvblxuICAgIHZhciBuZXdPcHRzID0gdml6LmNvbXBvbmVudC5oYW5kbGVTZWxlY3RPcHRpb24ob3B0aW9uS2V5LCBvbGRPcHRzKTtcbiAgICB2aXoub3B0aW9ucyA9IG5ld09wdHM7XG4gICAgaWYgKG5ld09wdHMgIT0gb2xkT3B0cykge1xuICAgICAgdGhpcy5mb3JjZVVwZGF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIG1ha2VEaXZGb3JUcmFjayhrZXk6IHN0cmluZywgdHJhY2s6IFZpc3VhbGl6ZWRUcmFjayk6IFJlYWN0JEVsZW1lbnQ8J2Rpdic+IHtcbiAgICAvL3RoaXMgc2hvdWxkIGJlIGltcHJvdmVkLCBidXQgSSBoYXZlIG5vIGlkZWEgaG93ICh3aGVuIHRyeWluZyB0b1xuICAgIC8vYWNjZXNzIHRoaXMudHJhY2tSZWFjdEVsZW1lbnRzIHdpdGggc3RyaW5nIGtleSwgZmxvdyBjb21wbGFpbnMpXG4gICAgdmFyIGludEtleSA9IHBhcnNlSW50KGtleSk7IFxuICAgIHZhciB0cmFja0VsID0gKFxuICAgICAgICA8VmlzdWFsaXphdGlvbldyYXBwZXIgdmlzdWFsaXphdGlvbj17dHJhY2sudmlzdWFsaXphdGlvbn1cbiAgICAgICAgICAgIHJhbmdlPXt0aGlzLnN0YXRlLnJhbmdlfVxuICAgICAgICAgICAgb25SYW5nZUNoYW5nZT17dGhpcy5oYW5kbGVSYW5nZUNoYW5nZS5iaW5kKHRoaXMpfVxuICAgICAgICAgICAgc291cmNlPXt0cmFjay5zb3VyY2V9XG4gICAgICAgICAgICBvcHRpb25zPXt0cmFjay50cmFjay5vcHRpb25zfVxuICAgICAgICAgICAgcmVmZXJlbmNlU291cmNlPXt0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZX1cbiAgICAgICAgICAgIHJlZiA9IHsoYzogUmVhY3QkRWxlbWVudFJlZjxPYmplY3Q+KSA9PiB7dGhpcy50cmFja1JlYWN0RWxlbWVudHNbaW50S2V5XT1jfX1cbiAgICAgICAgICAvPik7XG5cbiAgICB2YXIgdHJhY2tOYW1lID0gdHJhY2sudHJhY2submFtZSB8fCAnKHRyYWNrIG5hbWUpJztcblxuICAgIHZhciBnZWFySWNvbiA9IG51bGwsXG4gICAgICAgIHNldHRpbmdzTWVudSA9IG51bGw7XG4gICAgLy8gJEZsb3dJZ25vcmU6IFRPRE8gcmVtb3ZlIGZsb3cgc3VwcHJlc3Npb25cbiAgICBpZiAodHJhY2sudmlzdWFsaXphdGlvbi5jb21wb25lbnQuZ2V0T3B0aW9uc01lbnUpIHtcbiAgICAgIGdlYXJJY29uID0gKFxuICAgICAgICAgIDxzcGFuIHJlZj17J2dlYXItJyArIGtleX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9J2dlYXInXG4gICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy50b2dnbGVTZXR0aW5nc01lbnUuYmluZCh0aGlzLCBrZXkpfT5cbiAgICAgICAgICAgIOKamVxuICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuc2V0dGluZ3NNZW51S2V5ID09IGtleSkge1xuICAgICAgdmFyIGdlYXIgPSB0aGlzLnJlZnNbJ2dlYXItJyArIGtleV0sXG4gICAgICAgICAgZ2VhclggPSBnZWFyLm9mZnNldExlZnQsXG4gICAgICAgICAgZ2VhclcgPSBnZWFyLm9mZnNldFdpZHRoLFxuICAgICAgICAgIGdlYXJZID0gZ2Vhci5vZmZzZXRUb3A7XG5cbiAgICAgIHZhciBtZW51U3R5bGUgPSB7XG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICBsZWZ0OiAoZ2VhclggKyBnZWFyVykgKyAncHgnLFxuICAgICAgICB0b3A6IGdlYXJZICsgJ3B4J1xuICAgICAgfTtcbiAgICAgIC8vICRGbG93SWdub3JlOiBUT0RPIHJlbW92ZSBmbG93IHN1cHByZXNzaW9uXG4gICAgICB2YXIgaXRlbXMgPSB0cmFjay52aXN1YWxpemF0aW9uLmNvbXBvbmVudC5nZXRPcHRpb25zTWVudSh0cmFjay52aXN1YWxpemF0aW9uLm9wdGlvbnMpO1xuICAgICAgc2V0dGluZ3NNZW51ID0gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudS1jb250YWluZXInIHN0eWxlPXttZW51U3R5bGV9PlxuICAgICAgICAgIDxNZW51IGhlYWRlcj17dHJhY2tOYW1lfSBpdGVtcz17aXRlbXN9IG9uU2VsZWN0PXt0aGlzLmhhbmRsZVNlbGVjdE9wdGlvbi5iaW5kKHRoaXMsIGtleSl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgY2xhc3NOYW1lID0gWyd0cmFjaycsIHRyYWNrLnZpc3VhbGl6YXRpb24uY29tcG9uZW50LmRpc3BsYXlOYW1lIHx8ICcnLCB0cmFjay50cmFjay5jc3NDbGFzcyB8fCAnJ10uam9pbignICcpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYga2V5PXtrZXl9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWxhYmVsJz5cbiAgICAgICAgICA8c3Bhbj57dHJhY2tOYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8YnIvPlxuICAgICAgICAgIHtnZWFySWNvbn1cbiAgICAgICAgICB7c2V0dGluZ3NNZW51fVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWNvbnRlbnQnPlxuICAgICAgICAgIHt0cmFja0VsfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUT0RPOiB1c2UgYSBiZXR0ZXIga2V5IHRoYW4gaW5kZXguXG4gICAgdmFyIHRyYWNrRWxzID0gdGhpcy5wcm9wcy50cmFja3MubWFwKCh0LCBpKSA9PiB0aGlzLm1ha2VEaXZGb3JUcmFjaygnJytpLCB0KSk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwaWxldXAtcm9vdCc+XG4gICAgICB7XG4gICAgICAgIHRoaXMucHJvcHMuY29udHJvbHNPZmZcbiAgICAgICAgICA/IG51bGxcbiAgICAgICAgICA6IChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjayBjb250cm9scyc+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1sYWJlbCc+XG4gICAgICAgICAgICAgICAgJm5ic3A7XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0ndHJhY2stY29udGVudCc+XG4gICAgICAgICAgICAgICAgPENvbnRyb2xzIGNvbnRpZ0xpc3Q9e3RoaXMuc3RhdGUuY29udGlnTGlzdH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U9e3RoaXMuc3RhdGUucmFuZ2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVJhbmdlQ2hhbmdlLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKVxuICAgICAgfVxuICAgICAgICB7dHJhY2tFbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMsIHByZXZTdGF0ZTogT2JqZWN0KSB7XG4gICAgaWYgKHRoaXMuc3RhdGUudXBkYXRlU2l6ZSkge1xuICAgICAgZm9yICh2YXIgaT0wO2k8dGhpcy5wcm9wcy50cmFja3MubGVuZ3RoO2krKykge1xuICAgICAgICB0aGlzLnRyYWNrUmVhY3RFbGVtZW50c1tpXS5zZXRTdGF0ZSh7dXBkYXRlU2l6ZTp0aGlzLnN0YXRlLnVwZGF0ZVNpemV9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdGUudXBkYXRlU2l6ZT1mYWxzZTtcbiAgICB9XG4gIH1cblxufVxuUm9vdC5kaXNwbGF5TmFtZSA9ICdSb290JztcblxubW9kdWxlLmV4cG9ydHMgPSBSb290O1xuIiwiLyoqXG4gKiBBIHN0b3JlIGZvciBzZXF1ZW5jZXMuXG4gKlxuICogVGhpcyBpcyB1c2VkIHRvIHN0b3JlIGFuZCByZXRyaWV2ZSByZWZlcmVuY2UgZGF0YS5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuaW1wb3J0IHR5cGUgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQge2FsdENvbnRpZ05hbWV9IGZyb20gJy4vdXRpbHMnO1xuXG4vLyBTdG9yZSBzZXF1ZW5jZXMgb2YgdGhpcyBtYW55IGJhc2UgcGFpcnMgdG9nZXRoZXIgaW4gYSBzaW5nbGUgc3RyaW5nLlxuY29uc3QgQ0hVTktfU0laRSA9IDEwMDA7XG5cbnR5cGUgU2VxTWFwID0ge1trZXk6IG51bWJlcl06IHN0cmluZ307XG50eXBlIENodW5rV2l0aE9mZnNldCA9IHtcbiAgY2h1bmtTdGFydDogbnVtYmVyO1xuICBvZmZzZXQ6IG51bWJlcjtcbiAgbGVuZ3RoOiBudW1iZXI7XG59O1xuXG4vLyBUaGlzIGNsYXNzIHN0b3JlcyBzZXF1ZW5jZXMgZWZmaWNpZW50bHkuXG5jbGFzcyBTZXF1ZW5jZVN0b3JlIHtcbiAgLy8gY29udGlnIC0tPiBzdGFydCBvZiBjaHVuayAtLT4gc2VxdWVuY2Ugb2YgY2h1bmtcbiAgY29udGlnTWFwOiB7W2tleTogc3RyaW5nXTogU2VxTWFwfTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmNvbnRpZ01hcCA9IHt9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCBhIHJhbmdlIG9mIHRoZSBnZW5vbWUgdG8gdGhlIHBhcnRpY3VsYXIgc2VxdWVuY2UuXG4gICAqIFRoaXMgb3ZlcndyaXRlcyBhbnkgZXhpc3RpbmcgZGF0YS5cbiAgICovXG4gIHNldFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCBzZXF1ZW5jZTogc3RyaW5nKSB7XG4gICAgaWYgKHJhbmdlLmxlbmd0aCgpID09PSAwKSByZXR1cm47XG4gICAgaWYgKHJhbmdlLmxlbmd0aCgpICE9IHNlcXVlbmNlLmxlbmd0aCkge1xuICAgICAgdGhyb3cgJ3NldFJhbmdlIGxlbmd0aCBtaXNtYXRjaCc7XG4gICAgfVxuXG4gICAgdmFyIHNlcXMgPSB0aGlzLl9nZXRTZXF1ZW5jZXMocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoIXNlcXMpIHtcbiAgICAgIHNlcXMgPSB0aGlzLmNvbnRpZ01hcFtyYW5nZS5jb250aWddID0ge307XG4gICAgfVxuXG4gICAgZm9yICh2YXIgY2h1bmsgb2YgdGhpcy5fY2h1bmtGb3JJbnRlcnZhbChyYW5nZS5pbnRlcnZhbCkpIHtcbiAgICAgIHZhciBwb3MgPSBjaHVuay5jaHVua1N0YXJ0ICsgY2h1bmsub2Zmc2V0IC0gcmFuZ2Uuc3RhcnQoKTtcbiAgICAgIHRoaXMuX3NldENodW5rKHNlcXMsIGNodW5rLCBzZXF1ZW5jZS5zbGljZShwb3MsIHBvcyArIGNodW5rLmxlbmd0aCkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZSBhIHJhbmdlIG9mIHNlcXVlbmNlIGRhdGEuXG4gICAqIElmIGFueSBwb3J0aW9ucyBhcmUgdW5rbm93biwgdGhleSB3aWxsIGJlIHNldCB0byAnLicuXG4gICAqL1xuICBnZXRBc1N0cmluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgY29uc3Qgc2VxcyA9IHRoaXMuX2dldFNlcXVlbmNlcyhyYW5nZS5jb250aWcpO1xuICAgIGlmICghc2Vxcykge1xuICAgICAgcmV0dXJuICcuJy5yZXBlYXQocmFuZ2UubGVuZ3RoKCkpO1xuICAgIH1cblxuICAgIHZhciBjaHVua3MgPSB0aGlzLl9jaHVua0ZvckludGVydmFsKHJhbmdlLmludGVydmFsKTtcbiAgICB2YXIgcmVzdWx0ID0gJyc7XG4gICAgZm9yICh2YXIgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgICB2YXIgc2VxID0gc2Vxc1tjaHVuay5jaHVua1N0YXJ0XTtcbiAgICAgIGlmICghc2VxKSB7XG4gICAgICAgIHJlc3VsdCArPSAnLicucmVwZWF0KGNodW5rLmxlbmd0aCk7XG4gICAgICB9IGVsc2UgaWYgKGNodW5rLm9mZnNldCA9PT0gMCAmJiBjaHVuay5sZW5ndGggPT0gc2VxLmxlbmd0aCkge1xuICAgICAgICByZXN1bHQgKz0gc2VxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0ICs9IHNlcS5zbGljZShjaHVuay5vZmZzZXQsIGNodW5rLm9mZnNldCArIGNodW5rLmxlbmd0aCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBnZXRBc1N0cmluZygpLCBidXQgcmV0dXJucyBhIGxlc3MgZWZmaWNpZW50IG9iamVjdCByZXByZXNlbnRhdGlvbjpcbiAgICogeydjaHIxOjEwJzogJ0EnLCAnY2hyMToxMSc6ICdDJywgLi4ufVxuICAgKi9cbiAgZ2V0QXNPYmplY3RzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KToge1trZXk6c3RyaW5nXTogP3N0cmluZ30ge1xuICAgIHJldHVybiBfLm9iamVjdChfLm1hcCh0aGlzLmdldEFzU3RyaW5nKHJhbmdlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKGJhc2UsIGkpID0+IFtyYW5nZS5jb250aWcgKyAnOicgKyAocmFuZ2Uuc3RhcnQoKSArIGkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UgPT0gJy4nID8gbnVsbCA6IGJhc2VdKSk7XG4gIH1cblxuICAvLyBSZXRyaWV2ZSBhIGNodW5rIGZyb20gdGhlIHNlcXVlbmNlIG1hcC5cbiAgX2dldENodW5rKHNlcXM6IFNlcU1hcCwgc3RhcnQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgcmV0dXJuIHNlcXNbc3RhcnRdIHx8ICcuJy5yZXBlYXQoQ0hVTktfU0laRSk7XG4gIH1cblxuICAvLyBTcGxpdCBhbiBpbnRlcnZhbCBpbnRvIGNodW5rcyB3aGljaCBhbGlnbiB3aXRoIHRoZSBzdG9yZS5cbiAgX2NodW5rRm9ySW50ZXJ2YWwocmFuZ2U6IEludGVydmFsKTogQ2h1bmtXaXRoT2Zmc2V0W10ge1xuICAgIHZhciBvZmZzZXQgPSByYW5nZS5zdGFydCAlIENIVU5LX1NJWkUsXG4gICAgICAgIGNodW5rU3RhcnQgPSByYW5nZS5zdGFydCAtIG9mZnNldDtcbiAgICB2YXIgY2h1bmtzID0gW3tcbiAgICAgIGNodW5rU3RhcnQsXG4gICAgICBvZmZzZXQsXG4gICAgICBsZW5ndGg6IE1hdGgubWluKENIVU5LX1NJWkUgLSBvZmZzZXQsIHJhbmdlLmxlbmd0aCgpKVxuICAgIH1dO1xuICAgIGNodW5rU3RhcnQgKz0gQ0hVTktfU0laRTtcbiAgICBmb3IgKDsgY2h1bmtTdGFydCA8PSByYW5nZS5zdG9wOyBjaHVua1N0YXJ0ICs9IENIVU5LX1NJWkUpIHtcbiAgICAgIGNodW5rcy5wdXNoKHtcbiAgICAgICAgY2h1bmtTdGFydCxcbiAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICBsZW5ndGg6IE1hdGgubWluKENIVU5LX1NJWkUsIHJhbmdlLnN0b3AgLSBjaHVua1N0YXJ0ICsgMSlcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY2h1bmtzO1xuICB9XG5cbiAgLy8gU2V0IGEgKHN1YnNldCBvZiBhKSBjaHVuayB0byB0aGUgZ2l2ZW4gc2VxdWVuY2UuXG4gIF9zZXRDaHVuayhzZXFzOiBTZXFNYXAsIGNodW5rOiBDaHVua1dpdGhPZmZzZXQsIHNlcXVlbmNlOiBzdHJpbmcpIHtcbiAgICAvLyBGaXJzdDogdGhlIGVhc3kgY2FzZS4gVG90YWwgcmVwbGFjZW1lbnQuXG4gICAgaWYgKGNodW5rLm9mZnNldCA9PT0gMCAmJiBzZXF1ZW5jZS5sZW5ndGggPT0gQ0hVTktfU0laRSkge1xuICAgICAgc2Vxc1tjaHVuay5jaHVua1N0YXJ0XSA9IHNlcXVlbmNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFdlIG5lZWQgdG8gbWVyZ2UgdGhlIG5ldyBzZXF1ZW5jZSB3aXRoIHRoZSBvbGQuXG4gICAgdmFyIG9sZENodW5rID0gdGhpcy5fZ2V0Q2h1bmsoc2VxcywgY2h1bmsuY2h1bmtTdGFydCk7XG4gICAgc2Vxc1tjaHVuay5jaHVua1N0YXJ0XSA9IG9sZENodW5rLnNsaWNlKDAsIGNodW5rLm9mZnNldCkgK1xuICAgICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZSArXG4gICAgICAgICAgICAgICAgICAgICAgIG9sZENodW5rLnNsaWNlKGNodW5rLm9mZnNldCArIHNlcXVlbmNlLmxlbmd0aCk7XG4gIH1cblxuICAvLyBHZXQgdGhlIHNlcXVlbmNlcyBmb3IgYSBjb250aWcsIGFsbG93aW5nIGNoci0gbWlzbWF0Y2hlcy5cbiAgX2dldFNlcXVlbmNlcyhjb250aWc6IHN0cmluZyk6ID9TZXFNYXAge1xuICAgIHJldHVybiB0aGlzLmNvbnRpZ01hcFtjb250aWddIHx8XG4gICAgICAgICAgIHRoaXMuY29udGlnTWFwW2FsdENvbnRpZ05hbWUoY29udGlnKV0gfHxcbiAgICAgICAgICAgbnVsbDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlcXVlbmNlU3RvcmU7XG4iLCIvKipcclxuICogU2hpbSBEZXBlbmRlbmNpZXNcclxuICogQGZsb3dcclxuICovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmV4cG9ydCBjb25zdCBSZWFjdCA9ICh3aW5kb3cgJiYgd2luZG93LlJlYWN0KSB8fCAoZ2xvYmFsICYmIGdsb2JhbC5SZWFjdCkgfHwgcmVxdWlyZSgncmVhY3QnKTtcclxuZXhwb3J0IGNvbnN0IFJlYWN0RE9NID0gKHdpbmRvdyAmJiB3aW5kb3cuUmVhY3RET00pIHx8IChnbG9iYWwgJiYgZ2xvYmFsLlJlYWN0RE9NKSB8fCByZXF1aXJlKCdyZWFjdC1kb20nKTtcclxuIiwiLyoqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cblxuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlLCBWaXpXaXRoT3B0aW9uc30gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCB7UmVhY3QsIFJlYWN0RE9NfSBmcm9tICcuL1NoaW1EZXBlbmRlbmNpZXMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi92aXovZDN1dGlscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBkMyBmcm9tICcuLi9saWIvbWluaWQzJztcblxuZXhwb3J0IHR5cGUgVml6UHJvcHM8VDogYW55PiA9IHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHJhbmdlOiBHZW5vbWVSYW5nZTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHNvdXJjZTogVDtcbiAgb3B0aW9uczogYW55O1xufTtcblxudHlwZSBQcm9wcyA9IHtcbiAgcmFuZ2U6ID9HZW5vbWVSYW5nZTtcbiAgdmlzdWFsaXphdGlvbjogVml6V2l0aE9wdGlvbnM7XG4gIG9uUmFuZ2VDaGFuZ2U6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICBzb3VyY2U6IGFueTtcbiAgb3B0aW9uczogP09iamVjdDtcbn07XG5cbnR5cGUgU3RhdGUgPSB7XG4gIHdpZHRoOiBudW1iZXI7IFxuICBoZWlnaHQ6IG51bWJlcjsgXG4gIHVwZGF0ZVNpemU6IGJvb2xlYW47XG59O1xuXG5jbGFzcyBWaXN1YWxpemF0aW9uV3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxQcm9wcywgU3RhdGU+IHtcbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZTogU3RhdGU7XG4gIGhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG4gIG9uUmVzaXplTGlzdGVuZXI6IE9iamVjdDsgIC8vbGlzdGVuZXIgdGhhdCBoYW5kbGVzIHdpbmRvdy5vbnJlc2l6ZSBldmVudFxuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5oYXNEcmFnQmVlbkluaXRpYWxpemVkID0gZmFsc2U7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHVwZGF0ZVNpemU6IGZhbHNlLFxuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlU2l6ZSgpOiBhbnkge1xuICAgIHZhciB0aGlzTm9kZSA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpXG4gICAgaWYgKHRoaXNOb2RlICYmIHRoaXNOb2RlIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgdmFyIHBhcmVudERpdiA9IHRoaXNOb2RlLnBhcmVudE5vZGU7ICBcbiAgICAgIGlmIChwYXJlbnREaXYgJiYgcGFyZW50RGl2IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsgLy8gY2hlY2sgZm9yIGdldENvbnRleHRcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgICAgdXBkYXRlU2l6ZTogZmFsc2UsXG4gICAgICAgICAgd2lkdGg6IHBhcmVudERpdi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IHBhcmVudERpdi5vZmZzZXRIZWlnaHRcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKTogYW55IHtcbiAgICAvL2xvY2FsIGNvcHkgb2YgdGhlIGxpc3RlbmVyLCBzbyB3ZSBjYW4gcmVtb3ZlIGl0XG4gICAgLy93aGVuIHBpbGV1cCBpcyBkZXN0cm95ZWRcbiAgICB0aGlzLm9uUmVzaXplTGlzdGVuZXIgPSAoKSA9PiB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZUxpc3RlbmVyKTtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnJhbmdlICYmICF0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQpIHRoaXMuYWRkRHJhZ0ludGVyZmFjZSgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCk6IGFueSB7XG4gICAgaWYgKHRoaXMucHJvcHMucmFuZ2UgJiYgIXRoaXMuaGFzRHJhZ0JlZW5Jbml0aWFsaXplZCkgdGhpcy5hZGREcmFnSW50ZXJmYWNlKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpOiBhbnkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplTGlzdGVuZXIpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogKG51bTogbnVtYmVyKT0+bnVtYmVyIHtcbiAgICBpZiAoIXRoaXMucHJvcHMucmFuZ2UpIHJldHVybiB4ID0+IHg7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnN0YXRlLndpZHRoKTtcbiAgfVxuXG4gIGFkZERyYWdJbnRlcmZhY2UoKTogYW55IHtcbiAgICB0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBkaXYgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgb3JpZ2luYWxSYW5nZSwgb3JpZ2luYWxTY2FsZSwgZHg9MDtcbiAgICB2YXIgZHJhZ3N0YXJ0ZWQgPSAoKSA9PiB7XG4gICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGR4ID0gMDtcbiAgICAgIG9yaWdpbmFsUmFuZ2UgPSBfLmNsb25lKHRoaXMucHJvcHMucmFuZ2UpO1xuICAgICAgb3JpZ2luYWxTY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcbiAgICB9O1xuICAgIHZhciB1cGRhdGVSYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmICghb3JpZ2luYWxTY2FsZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIGlmICghb3JpZ2luYWxSYW5nZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIHZhciBuZXdTdGFydCA9IG9yaWdpbmFsU2NhbGUuaW52ZXJ0KC1keCksXG4gICAgICAgICAgaW50U3RhcnQgPSBNYXRoLnJvdW5kKG5ld1N0YXJ0KSxcbiAgICAgICAgICBvZmZzZXRQeCA9IG9yaWdpbmFsU2NhbGUobmV3U3RhcnQpIC0gb3JpZ2luYWxTY2FsZShpbnRTdGFydCk7XG5cbiAgICAgIHZhciBuZXdSYW5nZSA9IHtcbiAgICAgICAgY29udGlnOiBvcmlnaW5hbFJhbmdlLmNvbnRpZyxcbiAgICAgICAgc3RhcnQ6IGludFN0YXJ0LFxuICAgICAgICBzdG9wOiBpbnRTdGFydCArIChvcmlnaW5hbFJhbmdlLnN0b3AgLSBvcmlnaW5hbFJhbmdlLnN0YXJ0KSxcbiAgICAgICAgb2Zmc2V0UHg6IG9mZnNldFB4XG4gICAgICB9O1xuICAgICAgdGhpcy5wcm9wcy5vblJhbmdlQ2hhbmdlKG5ld1JhbmdlKTtcbiAgICB9O1xuICAgIHZhciBkcmFnbW92ZSA9ICgpID0+IHtcbiAgICAgIGR4ICs9IGQzLmV2ZW50LmR4OyAgLy8gdGhlc2UgYXJlIGludGVnZXJzLCBzbyBubyByb3VuZG9mZiBpc3N1ZXMuXG4gICAgICB1cGRhdGVSYW5nZSgpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gZHJhZ2VuZGVkKCkge1xuICAgICAgdXBkYXRlUmFuZ2UoKTtcbiAgICB9XG5cbiAgICB2YXIgZHJhZyA9IGQzLmJlaGF2aW9yLmRyYWcoKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGRyYWdzdGFydGVkKVxuICAgICAgICAub24oJ2RyYWcnLCBkcmFnbW92ZSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgZHJhZ2VuZGVkKTtcblxuICAgIGQzLnNlbGVjdChkaXYpLmNhbGwoZHJhZykub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IGFueSB7XG4gICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVcGRhdGUobmV4dFByb3BzOlByb3BzLCBuZXh0U3RhdGU6IE9iamVjdCkge1xuICAgIGlmIChuZXh0U3RhdGUudXBkYXRlU2l6ZSkge1xuICAgICAgdGhpcy51cGRhdGVTaXplKCk7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgY29uc3QgcmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMucHJvcHMudmlzdWFsaXphdGlvbi5jb21wb25lbnQ7XG4gICAgaWYgKCFyYW5nZSkge1xuICAgICAgaWYgKGNvbXBvbmVudC5kaXNwbGF5TmFtZSAhPSBudWxsKVxuICAgICAgICByZXR1cm4gPEVtcHR5VHJhY2sgY2xhc3NOYW1lPXtjb21wb25lbnQuZGlzcGxheU5hbWV9IC8+O1xuICAgICAgZWxzZVxuICAgICAgICByZXR1cm4gPEVtcHR5VHJhY2sgY2xhc3NOYW1lPSdFbXB0eVRyYWNrJyAvPjtcbiAgICB9XG5cbiAgICB2YXIgb3B0aW9ucyA9IF8uZXh0ZW5kKF8uY2xvbmUodGhpcy5wcm9wcy52aXN1YWxpemF0aW9uLm9wdGlvbnMpLHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICB2YXIgZWwgPSBSZWFjdC5jcmVhdGVFbGVtZW50KGNvbXBvbmVudCwgKHtcbiAgICAgIHJhbmdlOiByYW5nZSxcbiAgICAgIHNvdXJjZTogdGhpcy5wcm9wcy5zb3VyY2UsXG4gICAgICByZWZlcmVuY2VTb3VyY2U6IHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLFxuICAgICAgd2lkdGg6IHRoaXMuc3RhdGUud2lkdGgsXG4gICAgICBoZWlnaHQ6IHRoaXMuc3RhdGUuaGVpZ2h0LFxuICAgICAgb3B0aW9uczogb3B0aW9uc1xuICAgIH0gOiBWaXpQcm9wczxhbnk+KSk7XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J2RyYWctd3JhcHBlcic+e2VsfTwvZGl2PjtcbiAgfVxufVxuVmlzdWFsaXphdGlvbldyYXBwZXIuZGlzcGxheU5hbWUgPSAnVmlzdWFsaXphdGlvbldyYXBwZXInO1xuXG5cbnR5cGUgRW1wdHlUcmFja1Byb3BzID0ge2NsYXNzTmFtZTogc3RyaW5nfTtcbmNsYXNzIEVtcHR5VHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8RW1wdHlUcmFja1Byb3BzPiB7XG4gIHJlbmRlcigpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5jbGFzc05hbWUgKyAnIGVtcHR5JztcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+PC9kaXY+O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVmlzdWFsaXphdGlvbldyYXBwZXI7XG4iLCIvKipcbiAqIFBhcnNlciBmb3IgYmlnQmVkIGZvcm1hdC5cbiAqIEJhc2VkIG9uIFVDU0MncyBzcmMvaW5jL2JiaUZpbGUuaFxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgcGFrbyBmcm9tICdwYWtvL2xpYi9pbmZsYXRlJzsgIC8vIGZvciBnemlwIGluZmxhdGlvblxuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgYmJpIGZyb20gJy4vZm9ybWF0cy9iYmknO1xuXG5cbmZ1bmN0aW9uIHBhcnNlSGVhZGVyKGJ1ZmZlcikge1xuICAvLyBUT0RPOiBjaGVjayBFbmRpYW5uZXNzIHVzaW5nIG1hZ2ljLiBQb3NzaWJseSB1c2UgakRhdGFWaWV3LmxpdHRsZUVuZGlhblxuICAvLyB0byBmbGlwIHRoZSBlbmRpYW5uZXNzIGZvciBqQmluYXJ5IGNvbnN1bXB0aW9uLlxuICAvLyBOQjogZGFsbGlhbmNlIGRvZXNuJ3Qgc3VwcG9ydCBiaWcgZW5kaWFuIGZvcm1hdHMuXG4gIHJldHVybiBuZXcgakJpbmFyeShidWZmZXIsIGJiaS5UWVBFX1NFVCkucmVhZCgnSGVhZGVyJyk7XG5cbn1cblxuLy8gVGhlIFwiQ0lSXCIgdHJlZSBjb250YWlucyBhIG1hcHBpbmcgZnJvbSBzZXF1ZW5jZSAtPiBibG9jayBvZmZzZXRzLlxuLy8gSXQgc3RhbmRzIGZvciBcIkNocm9tb3NvbWUgSW5kZXggUiB0cmVlXCJcbmZ1bmN0aW9uIHBhcnNlQ2lyVHJlZShidWZmZXIpIHtcbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmJpLlRZUEVfU0VUKS5yZWFkKCdDaXJUcmVlJyk7XG59XG5cbi8vXG4vL0V4dHJhY3QgYSBtYXAgZnJvbSBjb250aWcgbmFtZSAtLT4gY29udGlnIElEIGZyb20gdGhlIGJpZ0JlZCBoZWFkZXIuXG4vL1xuZnVuY3Rpb24gZ2VuZXJhdGVDb250aWdNYXAoaGVhZGVyLCByZW1vdGVGaWxlKTogUS5Qcm9taXNlPHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0+IHtcbiAgcmV0dXJuIGdlbmVyYXRlQ29udGlnTWFwTm9kZXMoaGVhZGVyLmNocm9tb3NvbWVUcmVlLm5vZGVzLCBoZWFkZXIuY2hyb21vc29tZVRyZWUua2V5U2l6ZSwgcmVtb3RlRmlsZSk7XG59XG5cbi8vVHJhbnNmb3JtcyBub2RlcyBpbnRvIGNvbnRpZyBuYW1lIC0tPiBjb250aWcgSURcbmZ1bmN0aW9uIGdlbmVyYXRlQ29udGlnTWFwTm9kZXMobm9kZXMsIGtleVNpemUsIHJlbW90ZUZpbGUpOiBRLlByb21pc2U8eyBba2V5OiBzdHJpbmddOiBudW1iZXIgfT4ge1xuICBpZiAobm9kZXMuaXNMZWFmKSB7XG4gICAgcmV0dXJuIGdlbmVyYXRlQ29udGlnTWFwRnJvbUxlYWZOb2RlKG5vZGVzLmNvbnRlbnRzKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZ2VuZXJhdGVDb250aWdNYXBGcm9tTm9uTGVhZk5vZGUobm9kZXMuY29udGVudHMsIGtleVNpemUsIHJlbW90ZUZpbGUpO1xuICB9XG59XG5cbi8vVHJhbnNmb3JtcyBsZWFmIG5vZGVzIGludG8gY29udGlnIG5hbWUgLS0+IGNvbnRpZyBJRFxuZnVuY3Rpb24gZ2VuZXJhdGVDb250aWdNYXBGcm9tTGVhZk5vZGUobm9kZXMpOiBRLlByb21pc2U8eyBba2V5OiBzdHJpbmddOiBudW1iZXIgfT4ge1xuICBpZiAoIW5vZGVzKSB7XG4gICAgdGhyb3cgJ0ludmFsaWQgY2hyb21vc29tZSB0cmVlJztcbiAgfVxuICByZXR1cm4gUS5yZXNvbHZlKF8ub2JqZWN0KG5vZGVzLm1hcChmdW5jdGlvbiAoe2lkLCBrZXl9KSB7XG4gICAgLy8gcmVtb3ZlIHRyYWlsaW5nIG51bGxzIGZyb20gdGhlIGtleSBzdHJpbmdcbiAgICByZXR1cm4gW2tleS5yZXBsYWNlKC9cXDAuKi8sICcnKSwgaWRdO1xuICB9KSkpO1xufVxuXG4vL1RyYW5zZm9ybXMgbm9uIGxlYWYgbm9kZXMgaW50byBjb250aWcgbmFtZSAtLT4gY29udGlnIElELiBJdCByZXF1aXJlcyBmZXRjaGluZyBkYXRhIGZvciBhbGwgY2hpbGRyZW4gbm9kZXMuXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbnRpZ01hcEZyb21Ob25MZWFmTm9kZShub2Rlcywga2V5U2l6ZSwgcmVtb3RlRmlsZSk6IFEuUHJvbWlzZTx7IFtrZXk6IHN0cmluZ106IG51bWJlciB9PiB7XG4gIHJldHVybiBRLmFsbChub2Rlcy5tYXAoZnVuY3Rpb24gKHtrZXksIG9mZnNldH0pIHtcbiAgICByZXR1cm4gcmVtb3RlRmlsZS5nZXRCeXRlcyhvZmZzZXQsIDY0ICogMTAyNCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgcmV0dXJuIHBhcnNlTm9kZUxlYWYoYnVmZmVyLCBrZXlTaXplKTtcbiAgICB9KS50aGVuKGNoaWxkTm9kZURhdGEgPT4gZ2VuZXJhdGVDb250aWdNYXBOb2RlcyhjaGlsZE5vZGVEYXRhLCBrZXlTaXplLCByZW1vdGVGaWxlKSk7XG4gIH0pKS50aGVuKGRhdGEgPT4ge1xuICAgIHJldHVybiBfLnJlZHVjZShkYXRhLCBmdW5jdGlvbiAobWVtbywgaXRlbSkge1xuICAgICAgcmV0dXJuIF8uZXh0ZW5kKG1lbW8sIGl0ZW0pO1xuICAgIH0sIHt9KTtcbiAgfSk7XG59XG5cbi8vXG4vLyBQYXJzZSBDb250aWcgVHJlZSBOb2RlIGFzc3VtaW5nIHRoYXQgd2Uga25vdyB0aGUga2V5U2l6ZS4gVGhpcyBtZXRob2QgaXMgdXNlZCBmb3IgcmVjdXJzaXZlIHBhcnNpbmcgb2YgdGhlIHRyZWUuXG4vL1xuZnVuY3Rpb24gcGFyc2VOb2RlTGVhZihidWZmZXI6IEFycmF5QnVmZmVyLCBrZXlTaXplOiBudW1iZXIpIHtcbiAgLy91c2UgYSBjb3B5IG9mIHRoZSBnbG9iYWwgZGVmaW5pdGlvbiBhbmQgcmVwbGFjZSB2YXJpYWJsZSB3aXRoIGNvbnN0YW50ICh0aGlzIHZhcmlhYmxlIHdvdWxkIGJlIHVuYXZhaWxhYmxlIGhlcmUpXG4gIHZhciB0eXBlQ29weSA9IF8uZXh0ZW5kKHt9LCBiYmkuVFlQRV9TRVQpO1xuICB0eXBlQ29weVsnQlBsdXNUcmVlTm9kZSddWydjb250ZW50cyddWzFdWzJdWydrZXknXVsxXSA9IGtleVNpemU7XG4gIHR5cGVDb3B5WydCUGx1c1RyZWVOb2RlJ11bJ2NvbnRlbnRzJ11bMV1bM11bJ2tleSddWzFdID0ga2V5U2l6ZTtcbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgdHlwZUNvcHkpLnJlYWQoJ0JQbHVzVHJlZU5vZGUnKTtcbn1cblxuLy8gR2VuZXJhdGUgdGhlIHJldmVyc2UgbWFwIGZyb20gY29udGlnIElEIC0tPiBjb250aWcgbmFtZS5cbmZ1bmN0aW9uIHJldmVyc2VDb250aWdNYXAoY29udGlnTWFwOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9KTogQXJyYXk8c3RyaW5nPiB7XG4gIHZhciBhcnkgPSBbXTtcbiAgXy5lYWNoKGNvbnRpZ01hcCwgKGluZGV4LCBuYW1lKSA9PiB7XG4gICAgYXJ5W2luZGV4XSA9IG5hbWU7XG4gIH0pO1xuICByZXR1cm4gYXJ5O1xufVxuXG5cbmZ1bmN0aW9uIGV4dHJhY3RGZWF0dXJlc0Zyb21CbG9jayhidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFSYW5nZTogSW50ZXJ2YWwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2s6IExlYWZEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQ29tcHJlc3NlZDogYm9vbGVhbik6IENocklkQmVkUm93W10ge1xuICB2YXIgYmxvY2tPZmZzZXQgPSBibG9jay5vZmZzZXQgLSBkYXRhUmFuZ2Uuc3RhcnQsXG4gICAgICBibG9ja0xpbWl0ID0gYmxvY2tPZmZzZXQgKyBibG9jay5zaXplLFxuXG4gICAgICBibG9ja0J1ZmZlciA9XG4gICAgICAgIC8vIE5PVEU6IFwiKyAyXCIgc2tpcHMgb3ZlciB0d28gYnl0ZXMgb2YgZ3ppcCBoZWFkZXIgKDB4OGIxZiksIHdoaWNoIHBha28uaW5mbGF0ZVJhdyB3aWxsIG5vdCBoYW5kbGUuXG4gICAgICAgIGJ1ZmZlci5zbGljZShcbiAgICAgICAgICBibG9ja09mZnNldCArIChpc0NvbXByZXNzZWQgPyAyIDogMCksXG4gICAgICAgICAgYmxvY2tMaW1pdFxuICAgICAgICApO1xuXG4gIHZhciBpbmZsYXRlZEJ1ZmZlciA9XG4gICAgaXNDb21wcmVzc2VkID9cbiAgICAgIHBha28uaW5mbGF0ZVJhdyhuZXcgVWludDhBcnJheShibG9ja0J1ZmZlcikpIDpcbiAgICAgIGJsb2NrQnVmZmVyO1xuXG4gIHZhciBqYiA9IG5ldyBqQmluYXJ5KGluZmxhdGVkQnVmZmVyLCBiYmkuVFlQRV9TRVQpO1xuICAvLyBUT0RPOiBwYXJzZSBvbmx5IG9uZSBCZWRFbnRyeSBhdCBhIHRpbWUgJiB1c2UgYW4gaXRlcmF0b3IuXG4gIHJldHVybiBqYi5yZWFkKCdCZWRCbG9jaycpO1xufVxuXG5cbnR5cGUgQmVkUm93ID0ge1xuICAvLyBIYWxmLW9wZW4gaW50ZXJ2YWwgZm9yIHRoZSBCRUQgcm93LlxuICBjb250aWc6IHN0cmluZztcbiAgc3RhcnQ6IG51bWJlcjtcbiAgc3RvcDogbnVtYmVyO1xuICAvLyBSZW1haW5pbmcgZmllbGRzIGluIHRoZSBCRUQgcm93ICh0eXBpY2FsbHkgdGFiLWRlbGltaXRlZClcbiAgcmVzdDogc3RyaW5nO1xufVxuXG50eXBlIENocklkQmVkUm93ID0ge1xuICBjaHJJZDogbnVtYmVyO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7ICAvLyBub3RlOiBub3QgaW5jbHVzaXZlXG4gIHJlc3Q6IHN0cmluZztcbn1cblxuLy8gQWxsIGZlYXR1cmVzIGZvdW5kIGluIHJhbmdlLlxudHlwZSBCZWRCbG9jayA9IHtcbiAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIHJvd3M6IEJlZFJvd1tdO1xufVxuXG50eXBlIENocklkQmVkQmxvY2sgPSB7XG4gIHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+O1xuICByb3dzOiBDaHJJZEJlZFJvd1tdO1xufVxuXG4vLyBBIGNvcHkgb2YgTGVhZkRhdGEgZnJvbSBiYmkuanMuXG50eXBlIExlYWZEYXRhID0ge1xuICBzdGFydENocm9tSXg6IG51bWJlcjtcbiAgc3RhcnRCYXNlOiBudW1iZXI7XG4gIGVuZENocm9tSXg6IG51bWJlcjtcbiAgZW5kQmFzZTogbnVtYmVyO1xuICBvZmZzZXQ6IG51bWJlcjtcbiAgc2l6ZTogbnVtYmVyO1xufVxuXG4vLyBUaGlzIChpbnRlcm5hbCkgdmVyc2lvbiBvZiB0aGUgQmlnQmVkIGNsYXNzIGhhcyBubyBwcm9taXNlcyBmb3IgaGVhZGVycyxcbi8vIG9ubHkgaW1tZWRpYXRlIGRhdGEuIFRoaXMgZ3JlYXRseSBzaW1wbGlmaWVzIHdyaXRpbmcgbWV0aG9kcyBvbiBpdC5cbmNsYXNzIEltbWVkaWF0ZUJpZ0JlZCB7XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGhlYWRlcjogT2JqZWN0O1xuICBjaXJUcmVlOiBPYmplY3Q7XG4gIGNvbnRpZ01hcDoge1trZXk6c3RyaW5nXTogbnVtYmVyfTtcbiAgY2hySWRUb0NvbnRpZzogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZSwgaGVhZGVyLCBjaXJUcmVlLCBjb250aWdNYXA6IHtba2V5OnN0cmluZ106IG51bWJlcn0pIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHRoaXMuaGVhZGVyID0gaGVhZGVyO1xuICAgIHRoaXMuY2lyVHJlZSA9IGNpclRyZWU7XG4gICAgdGhpcy5jb250aWdNYXAgPSBjb250aWdNYXA7XG4gICAgdGhpcy5jaHJJZFRvQ29udGlnID0gcmV2ZXJzZUNvbnRpZ01hcChjb250aWdNYXApO1xuICB9XG5cbiAgLy8gTWFwIGNvbnRpZyBuYW1lIHRvIGNvbnRpZyBJRC4gTGVhZGluZyBcImNoclwiIGlzIG9wdGlvbmFsLiBUaHJvd3Mgb24gZmFpbHVyZS5cbiAgZ2V0Q29udGlnSWQoY29udGlnOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmIChjb250aWcgaW4gdGhpcy5jb250aWdNYXApIHJldHVybiB0aGlzLmNvbnRpZ01hcFtjb250aWddO1xuICAgIHZhciBjaHIgPSAnY2hyJyArIGNvbnRpZztcbiAgICBpZiAoY2hyIGluIHRoaXMuY29udGlnTWFwKSByZXR1cm4gdGhpcy5jb250aWdNYXBbY2hyXTtcbiAgICB0aHJvdyBgSW52YWxpZCBjb250aWcgJHtjb250aWd9YDtcbiAgfVxuXG4gIGdldENocklkSW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBDb250aWdJbnRlcnZhbDxudW1iZXI+IHtcbiAgICByZXR1cm4gbmV3IENvbnRpZ0ludGVydmFsKFxuICAgICAgICB0aGlzLmdldENvbnRpZ0lkKHJhbmdlLmNvbnRpZyksIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG4gIH1cblxuICBnZXRDb250aWdJbnRlcnZhbChyYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgIHRoaXMuY2hySWRUb0NvbnRpZ1tyYW5nZS5jb250aWddLCByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpO1xuICB9XG5cbiAgLy8gQmVkIGVudHJpZXMgaGF2ZSBhIGNocm9tb3NvbWUgSUQuIFRoaXMgY29udmVydHMgdGhhdCB0byBhIGNvbnRpZyBzdHJpbmcuXG4gIGF0dGFjaENvbnRpZ1RvQmVkUm93cyhiZWRzOiBDaHJJZEJlZFJvd1tdKTogQmVkUm93W10ge1xuICAgIHJldHVybiBiZWRzLm1hcChiZWQgPT4gKHtcbiAgICAgIGNvbnRpZzogdGhpcy5jaHJJZFRvQ29udGlnW2JlZC5jaHJJZF0sXG4gICAgICBzdGFydDogYmVkLnN0YXJ0LFxuICAgICAgc3RvcDogYmVkLnN0b3AsXG4gICAgICByZXN0OiBiZWQucmVzdFxuICAgIH0pKTtcbiAgfVxuXG4gIC8vIEZpbmQgYWxsIGJsb2NrcyBjb250YWluaW5nIGZlYXR1cmVzIHdoaWNoIGludGVyc2VjdCB3aXRoIGNvbnRpZ1JhbmdlLlxuICBmaW5kT3ZlcmxhcHBpbmdCbG9ja3MocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBBcnJheTxMZWFmRGF0YT4ge1xuICAgIC8vIERvIGEgcmVjdXJzaXZlIHNlYXJjaCB0aHJvdWdoIHRoZSBpbmRleCB0cmVlXG4gICAgdmFyIG1hdGNoaW5nQmxvY2tzID0gW107XG4gICAgdmFyIHR1cGxlUmFuZ2UgPSBbW3JhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKV0sXG4gICAgICAgICAgICAgICAgICAgICAgW3JhbmdlLmNvbnRpZywgcmFuZ2Uuc3RvcCgpXV07XG4gICAgdmFyIGZpbmQgPSBmdW5jdGlvbihub2RlKSB7XG4gICAgICBpZiAobm9kZS5jb250ZW50cykge1xuICAgICAgICBub2RlLmNvbnRlbnRzLmZvckVhY2goZmluZCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbm9kZVJhbmdlID1cbiAgICAgICAgICBbXG4gICAgICAgICAgICBbbm9kZS5zdGFydENocm9tSXgsIG5vZGUuc3RhcnRCYXNlXSxcbiAgICAgICAgICAgIFtub2RlLmVuZENocm9tSXgsIG5vZGUuZW5kQmFzZV1cbiAgICAgICAgICBdO1xuXG4gICAgICAgIGlmICh1dGlscy50dXBsZVJhbmdlT3ZlcmxhcHMobm9kZVJhbmdlLCB0dXBsZVJhbmdlKSkge1xuICAgICAgICAgIG1hdGNoaW5nQmxvY2tzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGZpbmQodGhpcy5jaXJUcmVlLmJsb2Nrcyk7XG5cbiAgICByZXR1cm4gbWF0Y2hpbmdCbG9ja3M7XG4gIH1cblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiBmb3IgZmV0Y2hpbmcgZmVhdHVyZXMgYnkgYmxvY2suXG4gIGZldGNoRmVhdHVyZXNCeUJsb2NrKHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogUS5Qcm9taXNlPENocklkQmVkQmxvY2tbXT4ge1xuICAgIHZhciBibG9ja3MgPSB0aGlzLmZpbmRPdmVybGFwcGluZ0Jsb2NrcyhyYW5nZSk7XG4gICAgaWYgKGJsb2Nrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBRLndoZW4oW10pO1xuICAgIH1cblxuICAgIC8vIEZpbmQgdGhlIHJhbmdlIGluIHRoZSBmaWxlIHdoaWNoIGNvbnRhaW5zIGFsbCByZWxldmFudCBibG9ja3MuXG4gICAgLy8gSW4gdGhlb3J5IHRoZXJlIGNvdWxkIGJlIGdhcHMgYmV0d2VlbiBibG9ja3MsIGJ1dCBpdCdzIGhhcmQgdG8gc2VlIGhvdy5cbiAgICB2YXIgYnl0ZVJhbmdlID0gSW50ZXJ2YWwuYm91bmRpbmdJbnRlcnZhbChcbiAgICAgICAgYmxvY2tzLm1hcChuID0+IG5ldyBJbnRlcnZhbCgrbi5vZmZzZXQsIG4ub2Zmc2V0K24uc2l6ZSkpKTtcblxuICAgIHZhciBpc0NvbXByZXNzZWQgPSAodGhpcy5oZWFkZXIudW5jb21wcmVzc0J1ZlNpemUgPiAwKTtcbiAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKGJ5dGVSYW5nZS5zdGFydCwgYnl0ZVJhbmdlLmxlbmd0aCgpKVxuICAgICAgICAudGhlbihidWZmZXIgPT4ge1xuICAgICAgICAgIHJldHVybiBibG9ja3MubWFwKGJsb2NrID0+IHtcbiAgICAgICAgICAgIHZhciBiZWRzID0gZXh0cmFjdEZlYXR1cmVzRnJvbUJsb2NrKGJ1ZmZlciwgYnl0ZVJhbmdlLCBibG9jaywgaXNDb21wcmVzc2VkKTtcbiAgICAgICAgICAgIGlmIChibG9jay5zdGFydENocm9tSXggIT0gYmxvY2suZW5kQ2hyb21JeCkge1xuICAgICAgICAgICAgICB0aHJvdyBgQ2FuJ3QgaGFuZGxlIGJsb2NrcyB3aGljaCBzcGFuIGNocm9tb3NvbWVzIWA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHJhbmdlOiBuZXcgQ29udGlnSW50ZXJ2YWwoYmxvY2suc3RhcnRDaHJvbUl4LCBibG9jay5zdGFydEJhc2UsIGJsb2NrLmVuZEJhc2UpLFxuICAgICAgICAgICAgICByb3dzOiBiZWRzXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgfVxuXG4gIC8vIFRPRE86IG1lcmdlIHRoaXMgaW50byBnZXRGZWF0dXJlc0luUmFuZ2VcbiAgLy8gRmV0Y2ggdGhlIHJlbGV2YW50IGJsb2NrcyBmcm9tIHRoZSBiaWdCZWQgZmlsZSBhbmQgZXh0cmFjdCB0aGUgZmVhdHVyZXNcbiAgLy8gd2hpY2ggb3ZlcmxhcCB0aGUgZ2l2ZW4gcmFuZ2UuXG4gIGZldGNoRmVhdHVyZXMoY29udGlnUmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8QmVkUm93W10+IHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaEZlYXR1cmVzQnlCbG9jayhjb250aWdSYW5nZSlcbiAgICAgICAgLnRoZW4oYmVkc0J5QmxvY2sgPT4ge1xuICAgICAgICAgIHZhciBiZWRzID0gXy5mbGF0dGVuKGJlZHNCeUJsb2NrLm1hcChiID0+IGIucm93cykpO1xuXG4gICAgICAgICAgYmVkcyA9IGJlZHMuZmlsdGVyKGZ1bmN0aW9uKGJlZCkge1xuICAgICAgICAgICAgLy8gTm90ZTogQkVEIGludGVydmFscyBhcmUgZXhwbGljaXRseSBoYWxmLW9wZW4uXG4gICAgICAgICAgICAvLyBUaGUgXCItIDFcIiBjb252ZXJ0cyB0aGVtIHRvIGNsb3NlZCBpbnRlcnZhbHMgZm9yIENvbnRpZ0ludGVydmFsLlxuICAgICAgICAgICAgdmFyIGJlZEludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKGJlZC5jaHJJZCwgYmVkLnN0YXJ0LCBiZWQuc3RvcCAtIDEpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRpZ1JhbmdlLmludGVyc2VjdHMoYmVkSW50ZXJ2YWwpO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoQ29udGlnVG9CZWRSb3dzKGJlZHMpO1xuICAgICAgICB9KTtcbiAgfVxuXG4gIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFEuUHJvbWlzZTxCZWRSb3dbXT4ge1xuICAgIHJldHVybiB0aGlzLmZldGNoRmVhdHVyZXModGhpcy5nZXRDaHJJZEludGVydmFsKHJhbmdlKSk7XG4gIH1cblxuICBnZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8QmVkQmxvY2tbXT4ge1xuICAgIHZhciBpbmRleFJhbmdlID0gdGhpcy5nZXRDaHJJZEludGVydmFsKHJhbmdlKTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaEZlYXR1cmVzQnlCbG9jayhpbmRleFJhbmdlKVxuICAgICAgICAudGhlbihmZWF0dXJlQmxvY2tzID0+IHtcbiAgICAgICAgICAvLyBDb252ZXJ0IGNocklkcyB0byBjb250aWcgc3RyaW5ncy5cbiAgICAgICAgICByZXR1cm4gZmVhdHVyZUJsb2Nrcy5tYXAoZmIgPT4gKHtcbiAgICAgICAgICAgIHJhbmdlOiB0aGlzLmdldENvbnRpZ0ludGVydmFsKGZiLnJhbmdlKSxcbiAgICAgICAgICAgIHJvd3M6IHRoaXMuYXR0YWNoQ29udGlnVG9CZWRSb3dzKGZiLnJvd3MpXG4gICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgfVxuXG59XG5cblxuY2xhc3MgQmlnQmVkIHtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGVhZGVyOiBRLlByb21pc2U8YW55PjtcbiAgY2lyVHJlZTogUS5Qcm9taXNlPGFueT47XG4gIGNvbnRpZ01hcDogUS5Qcm9taXNlPHtba2V5OnN0cmluZ106IG51bWJlcn0+O1xuICBpbW1lZGlhdGU6IFEuUHJvbWlzZTxJbW1lZGlhdGVCaWdCZWQ+O1xuXG4gIC8qKlxuICAgKiBQcmVwYXJlIHRvIHJlcXVlc3QgZmVhdHVyZXMgZnJvbSBhIHJlbW90ZSBiaWdCZWQgZmlsZS5cbiAgICogVGhlIHJlbW90ZSBzb3VyY2UgbXVzdCBzdXBwb3J0IEhUVFAgUmFuZ2UgaGVhZGVycy5cbiAgICogVGhpcyB3aWxsIGtpY2sgb2ZmIHNldmVyYWwgYXN5bmMgcmVxdWVzdHMgZm9yIHBvcnRpb25zIG9mIHRoZSBmaWxlLlxuICAgKi9cbiAgY29uc3RydWN0b3IodXJsOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSBuZXcgUmVtb3RlRmlsZSh1cmwpO1xuICAgIHRoaXMuaGVhZGVyID0gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKDAsIDY0KjEwMjQpLnRoZW4ocGFyc2VIZWFkZXIpO1xuICAgIHRoaXMuY29udGlnTWFwID0gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgcmV0dXJuIGdlbmVyYXRlQ29udGlnTWFwKGhlYWRlciwgdGhpcy5yZW1vdGVGaWxlKTtcbiAgICB9KTtcblxuICAgIC8vIE5leHQ6IGZldGNoIHRoZSBibG9jayBpbmRleCBhbmQgcGFyc2Ugb3V0IHRoZSBcIkNJUlwiIHRyZWUuXG4gICAgdGhpcy5jaXJUcmVlID0gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgLy8gem9vbUhlYWRlcnNbMF0uZGF0YU9mZnNldCBpcyB0aGUgbmV4dCBlbnRyeSBpbiB0aGUgZmlsZS5cbiAgICAgIC8vIFdlIGFzc3VtZSB0aGUgXCJjaXJUcmVlXCIgc2VjdGlvbiBnb2VzIGFsbCB0aGUgd2F5IHRvIHRoYXQgcG9pbnQuXG4gICAgICAvLyBMYWNraW5nIHpvb20gaGVhZGVycywgYXNzdW1lIGl0J3MgNGsuXG4gICAgICAvLyBUT0RPOiBmZXRjaCBtb3JlIHRoYW4gNGsgaWYgbmVjZXNzYXJ5XG4gICAgICB2YXIgc3RhcnQgPSBoZWFkZXIudW56b29tZWRJbmRleE9mZnNldCxcbiAgICAgICAgICB6b29tSGVhZGVyID0gaGVhZGVyLnpvb21IZWFkZXJzWzBdLFxuICAgICAgICAgIGxlbmd0aCA9IHpvb21IZWFkZXIgPyB6b29tSGVhZGVyLmRhdGFPZmZzZXQgLSBzdGFydCA6IDQwOTY7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKHN0YXJ0LCBsZW5ndGgpLnRoZW4ocGFyc2VDaXJUcmVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaW1tZWRpYXRlID0gUS5hbGwoW3RoaXMuaGVhZGVyLCB0aGlzLmNpclRyZWUsIHRoaXMuY29udGlnTWFwXSlcbiAgICAgICAgLnRoZW4oKFtoZWFkZXIsIGNpclRyZWUsIGNvbnRpZ01hcF0pID0+IHtcbiAgICAgICAgICB2YXIgY206IHtba2V5OnN0cmluZ106IG51bWJlcn0gPSBjb250aWdNYXA7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbW1lZGlhdGVCaWdCZWQodGhpcy5yZW1vdGVGaWxlLCBoZWFkZXIsIGNpclRyZWUsIGNtKTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyBCdWJibGUgdXAgZXJyb3JzXG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIEJFRCBlbnRyaWVzIHdoaWNoIG92ZXJsYXAgdGhlIHJhbmdlLlxuICAgKiBOb3RlOiB3aGlsZSB0aGUgcmVxdWVzdGVkIHJhbmdlIGlzIGluY2x1c2l2ZSBvbiBib3RoIGVuZHMsIHJhbmdlcyBpblxuICAgKiBiaWdCZWQgZm9ybWF0IGZpbGVzIGFyZSBoYWxmLW9wZW4gKGluY2x1c2l2ZSBhdCB0aGUgc3RhcnQsIGV4Y2x1c2l2ZSBhdFxuICAgKiB0aGUgZW5kKS5cbiAgICovXG4gIGdldEZlYXR1cmVzSW5SYW5nZShjb250aWc6IHN0cmluZywgc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogUS5Qcm9taXNlPEFycmF5PEJlZFJvdz4+IHtcbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBzdGFydCwgc3RvcCk7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZmVhdHVyZXMgaW4gYmxvY2tzIG92ZXJsYXBwaW5nIHRoZSBnaXZlbiByYW5nZS5cbiAgICogQmVjYXVzZSB0aGVzZSBmZWF0dXJlcyBtdXN0IGFsbCBiZSBmZXRjaGVkLCBkZWNvbXByZXNzZWQgYW5kIHBhcnNlZFxuICAgKiBhbnl3YXksIHRoaXMgY2FuIGJlIGhlbHBmdWwgZm9yIHVwc3RyZWFtIGNhY2hpbmcuXG4gICAqL1xuICBnZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8QXJyYXk8QmVkQmxvY2s+PiB7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZUJsb2Nrc092ZXJsYXBwaW5nKHJhbmdlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCaWdCZWQ7XG4iLCIvKipcbiAqIFRoaXMgY2xhc3MgcGFyc2VzIGFuZCByZXByZXNlbnRzIGEgc2luZ2xlIHJlYWQgaW4gYSBTQU0vQkFNIGZpbGUuXG4gKlxuICogVGhpcyBpcyB1c2VkIGluc3RlYWQgb2YgcGFyc2luZyBkaXJlY3RseSB2aWEgakJpbmFyeSBpbiBvcmRlciB0bzpcbiAqIC0gTWFrZSB0aGUgcGFyc2luZyBsYXp5IChmb3Igc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2Ugd2lucylcbiAqIC0gTWFrZSB0aGUgcmVzdWx0aW5nIG9iamVjdCBtb3JlIHByZWNpc2VseSB0eXBlZC5cbiAqXG4gKiBQYXJzaW5nIHJlYWRzIHVzaW5nIFNhbVJlYWQgaXMgfjItM3ggZmFzdGVyIHRoYW4gdXNpbmcgakJpbmFyeSBhbmRcbiAqIFRoaW5BbGlnbm1lbnQgZGlyZWN0bHkuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5pbXBvcnQgdHlwZSB7U3RyYW5kLCBDaWdhck9wLCBNYXRlUHJvcGVydGllc30gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB7bWFrZUNpZ2FyU3RyaW5nfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuXG5pbXBvcnQgakRhdGFWaWV3IGZyb20gJ2pkYXRhdmlldyc7XG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGJhbVR5cGVzIGZyb20gJy4vZm9ybWF0cy9iYW1UeXBlcyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IHR5cGUge0NvdmVyYWdlQ291bnR9IGZyb20gJy4uL3Zpei9waWxldXB1dGlscyc7XG5pbXBvcnQge2dldE9wSW5mb30gZnJvbSAnLi4vdml6L3BpbGV1cHV0aWxzJztcblxuLy8gVE9ETzogTWFrZSBtb3JlIGV4dGVuc2l2ZSB1c2Ugb2YgdGhlIGpCaW5hcnkgc3BlY3MuXG5cblxudmFyIENJR0FSX09QUyA9IFsnTScsICdJJywgJ0QnLCAnTicsICdTJywgJ0gnLCAnUCcsICc9JywgJ1gnXTtcblxudmFyIFNFUVVFTkNFX1ZBTFVFUyA9IFsnPScsICdBJywgJ0MnLCAnTScsICdHJywgJ1InLCAnUycsICdWJyxcbiAgICAgICAgICAgICAgICAgICAgICAgJ1QnLCAnVycsICdZJywgJ0gnLCAnSycsICdEJywgJ0InLCAnTiddO1xuXG5cbmZ1bmN0aW9uIHN0cmFuZEZsYWdUb1N0cmluZyhyZXZlcnNlU3RyYW5kOiBudW1iZXIpOiBTdHJhbmQge1xuICByZXR1cm4gcmV2ZXJzZVN0cmFuZCA/ICctJyA6ICcrJztcbn1cblxuXG5jbGFzcyBTYW1SZWFkIC8qIGltcGxlbWVudHMgQWxpZ25tZW50ICovIHtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgb2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0O1xuXG4gIHBvczogbnVtYmVyO1xuICByZWZJRDogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgbF9zZXE6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBjaWdhck9wczogQ2lnYXJPcFtdO1xuXG4gIC8vIGNhY2hlZCB2YWx1ZXNcbiAgX2Z1bGw6ID9PYmplY3Q7XG4gIF9zZXE6ID9zdHJpbmc7XG4gIF9pbnRlcnZhbDogP0NvbnRpZ0ludGVydmFsPHN0cmluZz47XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBidWZmZXIgY29udGFpbnMgdGhlIHJhdyBieXRlcyBvZiB0aGUgc2VyaWFsaXplZCBCQU0gcmVhZC4gSXQgbXVzdFxuICAgKiAgICAgY29udGFpbiBhdCBsZWFzdCBvbmUgZnVsbCByZWFkIChidXQgbWF5IGNvbnRhaW4gbW9yZSkuXG4gICAqIEBwYXJhbSBvZmZzZXQgcmVjb3JkcyB3aGVyZSB0aGlzIGFsaWdubWVudCBpcyBsb2NhdGVkIGluIHRoZSBCQU0gZmlsZS4gSXQnc1xuICAgKiAgICAgdXNlZnVsIGFzIGEgdW5pcXVlIElEIGZvciBhbGlnbm1lbnRzLlxuICAgKiBAcGFyYW0gcmVmIGlzIHRoZSBodW1hbi1yZWFkYWJsZSBuYW1lIG9mIHRoZSByZWZlcmVuY2UvY29udGlnICh0aGUgYmluYXJ5XG4gICAqICAgICBlbmNvZGluZyBvbmx5IGNvbnRhaW5zIGFuIElEKS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9mZnNldDogVmlydHVhbE9mZnNldCwgcmVmOiBzdHJpbmcpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcblxuICAgIC8vIEdvIGFoZWFkIGFuZCBwYXJzZSBhIGZldyBmaWVsZHMgaW1tZWRpYXRlbHkuXG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCk7XG4gICAgdGhpcy5yZWZJRCA9IGp2LmdldEludDMyKDApO1xuICAgIHRoaXMucmVmID0gcmVmO1xuICAgIHRoaXMucG9zID0ganYuZ2V0SW50MzIoNCk7XG4gICAgdGhpcy5sX3NlcSA9IGp2LmdldEludDMyKDE2KTtcbiAgICB0aGlzLmNpZ2FyT3BzID0gdGhpcy5fZ2V0Q2lnYXJPcHMoKTtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLl9nZXROYW1lKCk7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHZhciBzdG9wID0gdGhpcy5wb3MgKyB0aGlzLmxfc2VxO1xuICAgIHJldHVybiBgJHt0aGlzLnJlZn06JHsxK3RoaXMucG9zfS0ke3N0b3B9YDtcbiAgfVxuXG4gIF9nZXRKRGF0YVZpZXcoKTogakRhdGFWaWV3IHtcbiAgICB2YXIgYiA9IHRoaXMuYnVmZmVyO1xuICAgIHJldHVybiBuZXcgakRhdGFWaWV3KGIsIDAsIGIuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGlkZW50aWZpZXIgd2hpY2ggaXMgdW5pcXVlIHdpdGhpbiB0aGUgQkFNIGZpbGUuXG4gICAqL1xuICBnZXRLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXQudG9TdHJpbmcoKTtcbiAgfVxuXG4gIF9nZXROYW1lKCk6IHN0cmluZyB7XG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCk7XG4gICAgdmFyIGxfcmVhZF9uYW1lID0ganYuZ2V0VWludDgoOCk7XG4gICAganYuc2VlaygzMik7ICAvLyB0aGUgcmVhZC1uYW1lIHN0YXJ0cyBhdCBieXRlIDMyXG4gICAgcmV0dXJuIGp2LmdldFN0cmluZyhsX3JlYWRfbmFtZSAtIDEpOyAgLy8gaWdub3JlIG51bGwtdGVybWluYXRvclxuICB9XG5cbiAgZ2V0RmxhZygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nZXRKRGF0YVZpZXcoKS5nZXRVaW50MTYoMTQpO1xuICB9XG5cbiAgZ2V0SW5mZXJyZWRJbnNlcnRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEpEYXRhVmlldygpLmdldFVpbnQxNigyOCk7XG4gIH1cblxuICBnZXRTdHJhbmQoKTogU3RyYW5kIHtcbiAgICByZXR1cm4gc3RyYW5kRmxhZ1RvU3RyaW5nKHRoaXMuZ2V0RmxhZygpICYgYmFtVHlwZXMuRmxhZ3MuUkVBRF9TVFJBTkQpO1xuICB9XG5cbiAgLy8gVE9ETzogZ2V0IHJpZCBvZiB0aGlzOyBtb3ZlIGFsbCBtZXRob2RzIGludG8gU2FtUmVhZC5cbiAgZ2V0RnVsbCgpOiBPYmplY3Qge1xuICAgIGlmICh0aGlzLl9mdWxsKSByZXR1cm4gdGhpcy5fZnVsbDtcbiAgICB2YXIgamIgPSBuZXcgakJpbmFyeSh0aGlzLmJ1ZmZlciwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgIHZhciBmdWxsID0gamIucmVhZChiYW1UeXBlcy5UaGlja0FsaWdubWVudCwgMCk7XG4gICAgdGhpcy5fZnVsbCA9IGZ1bGw7XG4gICAgcmV0dXJuIGZ1bGw7XG4gIH1cblxuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHJldHVybiB0aGlzLl9pbnRlcnZhbDsgIC8vIHVzZSB0aGUgY2FjaGVcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5yZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyArIHRoaXMuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgLSAxKTtcbiAgICByZXR1cm4gaW50ZXJ2YWw7XG4gIH1cblxuICBpbnRlcnNlY3RzKGludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGludGVydmFsLmludGVyc2VjdHModGhpcy5nZXRJbnRlcnZhbCgpKTtcbiAgfVxuXG4gIF9nZXRDaWdhck9wcygpOiBDaWdhck9wW10ge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgcG9zID0gMzIgKyBsX3JlYWRfbmFtZSxcbiAgICAgICAgY2lnYXJfb3BzID0gbmV3IEFycmF5KG5fY2lnYXJfb3ApO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbl9jaWdhcl9vcDsgaSsrKSB7XG4gICAgICB2YXIgdiA9IGp2LmdldFVpbnQzMihwb3MgKyA0ICogaSk7XG4gICAgICBjaWdhcl9vcHNbaV0gPSB7XG4gICAgICAgIG9wOiBDSUdBUl9PUFNbdiAmIDB4Zl0sXG4gICAgICAgIGxlbmd0aDogdiA+PiA0XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gY2lnYXJfb3BzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgcGVyLWJhc2UgcXVhbGl0eSBzY29yZXMgZnJvbSAwLTI1NS5cbiAgICovXG4gIGdldFF1YWxpdHlTY29yZXMoKTogbnVtYmVyW10ge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgbF9zZXEgPSBqdi5nZXRJbnQzMigxNiksXG4gICAgICAgIHBvcyA9IDMyICsgbF9yZWFkX25hbWUgKyA0ICogbl9jaWdhcl9vcCArIE1hdGguY2VpbChsX3NlcSAvIDIpO1xuICAgIHJldHVybiBqdi5nZXRCeXRlcyhsX3NlcSwgcG9zLCB0cnVlIC8qIGxpdHRsZSBlbmRpYW4gKi8sIHRydWUgLyogdG9BcnJheSAqLyk7XG4gIH1cblxuICBnZXRDaWdhclN0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBtYWtlQ2lnYXJTdHJpbmcodGhpcy5jaWdhck9wcyk7XG4gIH1cblxuICBnZXRRdWFsUGhyZWQoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gbWFrZUFzY2lpUGhyZWQodGhpcy5nZXRRdWFsaXR5U2NvcmVzKCkpO1xuICB9XG5cbiAgZ2V0U2VxdWVuY2UoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5fc2VxKSByZXR1cm4gdGhpcy5fc2VxO1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgbF9zZXEgPSBqdi5nZXRJbnQzMigxNiksXG4gICAgICAgIHBvcyA9IDMyICsgbF9yZWFkX25hbWUgKyA0ICogbl9jaWdhcl9vcCxcbiAgICAgICAgYmFzZVBhaXJzID0gbmV3IEFycmF5KGxfc2VxKSxcbiAgICAgICAgbnVtQnl0ZXMgPSBNYXRoLmNlaWwobF9zZXEgLyAyKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykge1xuICAgICAgdmFyIGIgPSBqdi5nZXRVaW50OChwb3MgKyBpKTtcbiAgICAgIGJhc2VQYWlyc1syICogaV0gPSBTRVFVRU5DRV9WQUxVRVNbYiA+PiA0XTtcbiAgICAgIGlmICgyICogaSArIDEgPCBsX3NlcSkge1xuICAgICAgICBiYXNlUGFpcnNbMiAqIGkgKyAxXSA9IFNFUVVFTkNFX1ZBTFVFU1tiICYgMHhmXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2VxID0gYmFzZVBhaXJzLmpvaW4oJycpO1xuICAgIHRoaXMuX3NlcSA9IHNlcTtcbiAgICByZXR1cm4gc2VxO1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBhbGlnbm1lbnQgZnJvbSBmaXJzdCBhbGlnbmVkIHJlYWQgdG8gbGFzdCBhbGlnbmVkIHJlYWQuXG4gIGdldFJlZmVyZW5jZUxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiBTYW1SZWFkLnJlZmVyZW5jZUxlbmd0aEZyb21PcHModGhpcy5jaWdhck9wcyk7XG4gIH1cblxuICBnZXRDb3ZlcmFnZShyZWZlcmVuY2VTb3VyY2U6IE9iamVjdCk6IENvdmVyYWdlQ291bnQge1xuICAgIHJldHVybiB7XG4gICAgICByYW5nZTogdGhpcy5nZXRJbnRlcnZhbCgpLFxuICAgICAgb3BJbmZvOiBnZXRPcEluZm8odGhpcywgcmVmZXJlbmNlU291cmNlKVxuICAgIH07XG4gIH1cblxuICBnZXRNYXRlUHJvcGVydGllcygpOiA/TWF0ZVByb3BlcnRpZXMge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBmbGFnID0ganYuZ2V0VWludDE2KDE0KTtcbiAgICBpZiAoIShmbGFnICYgYmFtVHlwZXMuRmxhZ3MuUkVBRF9QQUlSRUQpKSByZXR1cm4gbnVsbDtcblxuICAgIHZhciBuZXh0UmVmSWQgPSBqdi5nZXRJbnQzMigyMCksXG4gICAgICAgIG5leHRQb3MgPSBqdi5nZXRJbnQzMigyNCksXG4gICAgICAgIG5leHRTdHJhbmQgPSBzdHJhbmRGbGFnVG9TdHJpbmcoZmxhZyAmIGJhbVR5cGVzLkZsYWdzLk1BVEVfU1RSQU5EKTtcblxuICAgIHJldHVybiB7XG4gICAgICAvLyBJZiB0aGUgbWF0ZSBpcyBvbiBhbm90aGVyIGNvbnRpZywgdGhlcmUncyBubyBlYXN5IHdheSB0byBnZXQgaXRzIHN0cmluZyBuYW1lLlxuICAgICAgcmVmOiBuZXh0UmVmSWQgPT0gdGhpcy5yZWZJRCA/IHRoaXMucmVmIDogbnVsbCxcbiAgICAgIHBvczogbmV4dFBvcyxcbiAgICAgIHN0cmFuZDogbmV4dFN0cmFuZFxuICAgIH07XG4gIH1cblxuICBkZWJ1Z1N0cmluZygpOiBzdHJpbmcge1xuICAgIHZhciBmID0gdGhpcy5nZXRGdWxsKCk7XG5cbiAgICByZXR1cm4gYE5hbWU6ICR7dGhpcy5uYW1lfVxuRkxBRzogJHt0aGlzLmdldEZsYWcoKX1cblBvc2l0aW9uOiAke3RoaXMuZ2V0SW50ZXJ2YWwoKS50b1N0cmluZygpfVxuQ0lHQVI6ICR7dGhpcy5nZXRDaWdhclN0cmluZygpfVxuU2VxdWVuY2U6ICR7Zi5zZXF9XG5RdWFsaXR5OiAgJHt0aGlzLmdldFF1YWxQaHJlZCgpfVxuVGFnczogJHtKU09OLnN0cmluZ2lmeShmLmF1eGlsaWFyeSwgbnVsbCwgJyAgJyl9XG4gICAgYDtcbiAgfVxuXG4gIHN0YXRpYyByZWZlcmVuY2VMZW5ndGhGcm9tT3BzKG9wczogQ2lnYXJPcFtdKTogbnVtYmVyIHtcbiAgICB2YXIgcmVmTGVuZ3RoID0gMDtcbiAgICBvcHMuZm9yRWFjaCgoe29wLCBsZW5ndGh9KSA9PiB7XG4gICAgICBzd2l0Y2ggKG9wKSB7XG4gICAgICAgIGNhc2UgJ00nOlxuICAgICAgICBjYXNlICdEJzpcbiAgICAgICAgY2FzZSAnTic6XG4gICAgICAgIGNhc2UgJz0nOlxuICAgICAgICBjYXNlICdYJzpcbiAgICAgICAgICByZWZMZW5ndGggKz0gbGVuZ3RoO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiByZWZMZW5ndGg7XG4gIH1cbn1cblxuLy8gQ29udmVydCBhbiBhcnJheSBvZiBQaHJlZCBzY29yZXMgdG8gYSBwcmludGFibGUgc3RyaW5nLlxuZnVuY3Rpb24gbWFrZUFzY2lpUGhyZWQocXVhbGl0aWVzOiBudW1iZXJbXSk6IHN0cmluZyB7XG4gIGlmIChxdWFsaXRpZXMubGVuZ3RoID09PSAwKSByZXR1cm4gJyc7XG4gIGlmIChfLmV2ZXJ5KHF1YWxpdGllcywgeCA9PiB4ID09IDI1NSkpIHJldHVybiAnKic7XG4gIHJldHVybiBxdWFsaXRpZXMubWFwKHEgPT4gU3RyaW5nLmZyb21DaGFyQ29kZSgzMyArIHEpKS5qb2luKCcnKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTYW1SZWFkO1xuIiwiLyoqXG4gKiBUaGlzIG1vZHVsZSBkZWZpbmVzIGEgcGFyc2VyIGZvciB0aGUgMmJpdCBmaWxlIGZvcm1hdC5cbiAqIFNlZSBodHRwOi8vZ2Vub21lLnVjc2MuZWR1L0ZBUS9GQVFmb3JtYXQuaHRtbCNmb3JtYXQ3XG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcblxuaW1wb3J0IHR3b0JpdFR5cGVzIGZyb20gJy4vZm9ybWF0cy90d29CaXRUeXBlcyc7XG5cbnZhciBCQVNFX1BBSVJTID0gW1xuICAnVCcsICAvLyAwPTAwXG4gICdDJywgIC8vIDE9MDFcbiAgJ0EnLCAgLy8gMj0xMFxuICAnRycgICAvLyAzPTExXG5dO1xuXG4vKipcbiAgVGhlIGZvbGxvd2luZyBjaHVuayBzaXplcyBhcmUgb3B0aW1pemVkIGFnYWluc3RcbiAgdGhlIGh1bWFuIHJlZmVyZW5jZSBnZW5vbWUgKGhnMTkuMmJpdCkuIEFzc3VtaW5nIHRoYXRcbiAgcGlsZXVwLmpzIGlzIG1vc3RseSBiZWluZyB1c2VkIGZvciBodW1hbiBnZW5vbWUsXG4gIGluY3JlYXNpbmcgdGhlIGZvbGxvd2luZyBudW1iZXJzIG1pZ2h0IGNhdXNlIG5vbm5lY2Vzc2FyeVxuICBuZXR3b3JrIHRyYWZmaWMgYW5kIG1pZ2h0IGFsc28gYnJlYWsgb3VyIHVuaXQgdGVzdHNcbiAgdGhhdCBtYWtlIHVzZSBvZiBtYXBwZWQgMmJpdCBmaWxlcy5cbiovXG52YXIgRklSU1RfSEVBREVSX0NIVU5LU0laRSA9IDE2ICogMTAyNCwgIC8vIDE2IEtCXG4gICAgRklSU1RfU0VRVUVOQ0VfQ0hVTktTSVpFID0gKDQgKiAxMDI0KSAtIDEsICAvLyB+IDRLQlxuICAgIE1BWF9DSFVOS1NJWkUgPSAxMDI0ICogMTAyNDsgIC8vIDEgTUJcblxudHlwZSBGaWxlSW5kZXhFbnRyeSA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICBvZmZzZXQ6IG51bWJlcjtcbn07XG5cbnR5cGUgU2VxdWVuY2VSZWNvcmQgPSB7XG4gIG51bUJhc2VzOiBudW1iZXI7XG4gIHVua25vd25CbG9ja1N0YXJ0czogQXJyYXk8bnVtYmVyPjsgIC8vIG5iIHRoZXNlIG51bWJlcnMgYXJlIDAtYmFzZWRcbiAgdW5rbm93bkJsb2NrTGVuZ3RoczogQXJyYXk8bnVtYmVyPjsgIC8vIFRPRE8oZGFudmspOiBhZGQgYW4gaW50ZXJ2YWwgdHlwZT9cbiAgbnVtTWFza0Jsb2NrczogbnVtYmVyO1xuICBtYXNrQmxvY2tTdGFydHM6IEFycmF5PG51bWJlcj47XG4gIG1hc2tCbG9ja0xlbmd0aHM6IEFycmF5PG51bWJlcj47XG4gIGRuYU9mZnNldEZyb21IZWFkZXI6IG51bWJlcjsgIC8vICMgb2YgYnl0ZXMgZnJvbSBzZXF1ZW5jZSBoZWFkZXIgdG8gcGFja2VkIEROQVxuICBvZmZzZXQ6IG51bWJlcjsgIC8vIGJ5dGVzIGZyb20gdGhlIHN0YXJ0IG9mIHRoZSBmaWxlIGF0IHdoaWNoIHRoaXMgZGF0YSBsaXZlcy5cbn1cblxudHlwZSBUd29CaXRIZWFkZXIgPSB7XG4gIHNlcXVlbmNlQ291bnQ6IG51bWJlcjtcbiAgc2VxdWVuY2VzOiBBcnJheTxGaWxlSW5kZXhFbnRyeT47XG59XG5cblxuLyoqXG4gKiBQYXJzZXMgYSBzaW5nbGUgU2VxdWVuY2VSZWNvcmQgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIEFycmF5QnVmZmVyLlxuICogZmlsZU9mZnNldCBpcyB0aGUgcG9zaXRpb24gb2YgdGhpcyBzZXF1ZW5jZSB3aXRoaW4gdGhlIDJiaXQgZmlsZS5cbiAqL1xuZnVuY3Rpb24gcGFyc2VTZXF1ZW5jZVJlY29yZChidWZmZXI6IEFycmF5QnVmZmVyLCBmaWxlT2Zmc2V0OiBudW1iZXIpOiBTZXF1ZW5jZVJlY29yZCB7XG4gIHZhciBqYiA9IG5ldyBqQmluYXJ5KGJ1ZmZlciwgdHdvQml0VHlwZXMuVFlQRV9TRVQpO1xuICB2YXIgaGVhZGVyID0gamIucmVhZCgnU2VxdWVuY2VSZWNvcmQnKTtcblxuICB2YXIgZG5hT2Zmc2V0ID0gamIudGVsbCgpICsgOCAqIGhlYWRlci5tYXNrQmxvY2tDb3VudCArIDQ7XG5cbiAgcmV0dXJuIHtcbiAgICBudW1CYXNlczogaGVhZGVyLmRuYVNpemUsXG4gICAgdW5rbm93bkJsb2NrU3RhcnRzOiBoZWFkZXIubkJsb2NrU3RhcnRzLFxuICAgIHVua25vd25CbG9ja0xlbmd0aHM6IGhlYWRlci5uQmxvY2tTaXplcyxcbiAgICBudW1NYXNrQmxvY2tzOiBoZWFkZXIubWFza0Jsb2NrQ291bnQsXG4gICAgbWFza0Jsb2NrU3RhcnRzOiBbXSxcbiAgICBtYXNrQmxvY2tMZW5ndGhzOiBbXSxcbiAgICBkbmFPZmZzZXRGcm9tSGVhZGVyOiBkbmFPZmZzZXQsXG4gICAgb2Zmc2V0OiBmaWxlT2Zmc2V0XG4gIH07XG59XG5cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXIoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IFR3b0JpdEhlYWRlciB7XG4gIHZhciBqYiA9IG5ldyBqQmluYXJ5KGJ1ZmZlciwgdHdvQml0VHlwZXMuVFlQRV9TRVQpO1xuICB2YXIgaGVhZGVyID0gamIucmVhZCgnSGVhZGVyJyk7XG5cbiAgcmV0dXJuIHtcbiAgICBzZXF1ZW5jZUNvdW50OiBoZWFkZXIuc2VxdWVuY2VDb3VudCxcbiAgICBzZXF1ZW5jZXM6IGhlYWRlci5zZXF1ZW5jZXNcbiAgfTtcbn1cblxuXG4vKipcbiAqIFJlYWQgMi1iaXQgZW5jb2RlZCBiYXNlIHBhaXJzIGZyb20gYSBEYXRhVmlldyBpbnRvIGFuIGFycmF5IG9mICdBJywgJ1QnLFxuICogJ0MnLCAnRycgc3RyaW5ncy5cbiAqIFRoZXNlIGFyZSByZXR1cm5lZCBhcyBhbiBhcnJheSAocmF0aGVyIHRoYW4gYSBzdHJpbmcpIHRvIGZhY2lsaXRhdGUgZnVydGhlclxuICogbW9kaWZpY2F0aW9uLlxuICovXG5mdW5jdGlvbiB1bnBhY2tETkEoZGF0YVZpZXc6IERhdGFWaWV3LCBzdGFydEJhc2VQYWlyOiBudW1iZXIsIG51bUJhc2VQYWlyczogbnVtYmVyKTogQXJyYXk8c3RyaW5nPiB7XG4gIC8vIFRPRE86IHVzZSBqQmluYXJ5IGJpdGZpZWxkIGZvciB0aGlzXG4gIHZhciBiYXNlUGFpcnM6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgYmFzZVBhaXJzLmxlbmd0aCA9IGRhdGFWaWV3LmJ5dGVMZW5ndGggKiA0OyAgLy8gcHJlLWFsbG9jYXRlXG4gIHZhciBiYXNlUGFpcklkeCA9IC1zdGFydEJhc2VQYWlyO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFWaWV3LmJ5dGVMZW5ndGg7IGkrKykge1xuICAgIHZhciBwYWNrZWQgPSBkYXRhVmlldy5nZXRVaW50OChpKTtcbiAgICBmb3IgKHZhciBzaGlmdCA9IDY7IHNoaWZ0ID49IDA7IHNoaWZ0IC09IDIpIHtcbiAgICAgIHZhciBicCA9IEJBU0VfUEFJUlNbKHBhY2tlZCA+PiBzaGlmdCkgJiAzXTtcbiAgICAgIGlmIChzdGFydEJhc2VQYWlyID49IDApIHtcbiAgICAgICAgYmFzZVBhaXJzW2Jhc2VQYWlySWR4XSA9IGJwO1xuICAgICAgfVxuICAgICAgYmFzZVBhaXJJZHgrKztcbiAgICB9XG4gIH1cbiAgLy8gUmVtb3ZlIGJhc2UgcGFpcnMgZnJvbSB0aGUgZW5kIGlmIHRoZSBzZXF1ZW5jZSB0ZXJtaW5hdGVkIG1pZC1ieXRlLlxuICBiYXNlUGFpcnMubGVuZ3RoID0gbnVtQmFzZVBhaXJzO1xuICByZXR1cm4gYmFzZVBhaXJzO1xufVxuXG4vKipcbiAqIENoYW5nZSBiYXNlIHBhaXJzIHRvICdOJyB3aGVyZSB0aGUgU2VxdWVuY2VSZWNvcmQgZGljdGF0ZXMuXG4gKiBUaGlzIG1vZGlmaWVzIHRoZSBiYXNlUGFpcnMgYXJyYXkgaW4tcGxhY2UuXG4gKi9cbmZ1bmN0aW9uIG1hcmtVbmtub3duRE5BKGJhc2VQYWlyczogQXJyYXk8c3RyaW5nPiwgZG5hU3RhcnRJbmRleDogbnVtYmVyLCBzZXF1ZW5jZTogU2VxdWVuY2VSZWNvcmQpOiBBcnJheTxzdHJpbmc+IHtcbiAgdmFyIGRuYVN0b3AgPSBkbmFTdGFydEluZGV4ICsgYmFzZVBhaXJzLmxlbmd0aCAtIDE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2VxdWVuY2UudW5rbm93bkJsb2NrU3RhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIG5TdGFydCA9IHNlcXVlbmNlLnVua25vd25CbG9ja1N0YXJ0c1tpXSxcbiAgICAgICAgbkxlbmd0aCA9IHNlcXVlbmNlLnVua25vd25CbG9ja0xlbmd0aHNbaV0sXG4gICAgICAgIG5TdG9wID0gblN0YXJ0ICsgbkxlbmd0aCAtIDEsXG4gICAgICAgIGludFN0YXJ0ID0gTWF0aC5tYXgoblN0YXJ0LCBkbmFTdGFydEluZGV4KSxcbiAgICAgICAgaW50U3RvcCA9IE1hdGgubWluKG5TdG9wLCBkbmFTdG9wKTtcbiAgICBpZiAoaW50U3RvcCA8IGludFN0YXJ0KSBjb250aW51ZTsgIC8vIG5vIG92ZXJsYXBcblxuICAgIGZvciAodmFyIGogPSBpbnRTdGFydDsgaiA8PSBpbnRTdG9wOyBqKyspIHtcbiAgICAgIGJhc2VQYWlyc1tqIC0gZG5hU3RhcnRJbmRleF0gPSAnTic7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJhc2VQYWlycztcbn1cblxuXG4vKipcbiAqIEFuIHVtYnJlbGxhIGVycm9yIHR5cGUgdG8gZGVzY3JpYmUgaXNzdWVzIHdpdGggcGFyc2luZyBhblxuICogaW5jb21wbGV0ZSBjaHVuayBvZiBkYXRhIHdpdGggSkJpbmFyeSdzIHJlYWQuIElmIHRoaXMgaXMgYmVpbmdcbiAqIHJhaXNlZCwgd2UgZWl0aGVyIG5lZWQgdG8gYXNrIGZvciBtb3JlIGRhdGEgKGEgYmlnZ2VyIGNodW5rKSBvclxuICogcmVwb3J0IHRvIHRoZSB1c2VyIHRoYXQgdGhlcmUgbWlnaHQgYmUgYSBwcm9ibGVtIHdpdGggdGhlIDJiaXRcbiAqIGZpbGUsIHNwZWNpZmljYWxseSB3aXRoIGl0cyBoZWFkZXIuXG4gKi9cbmZ1bmN0aW9uIEluY29tcGxldGVDaHVua0Vycm9yKG1lc3NhZ2UpIHtcbiAgICB0aGlzLm5hbWUgPSBcIkluY29tcGxldGVDaHVua0Vycm9yXCI7XG4gICAgdGhpcy5tZXNzYWdlID0gKG1lc3NhZ2UgfHwgXCJcIik7XG59XG5JbmNvbXBsZXRlQ2h1bmtFcnJvci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSwge1xuICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgIHZhbHVlOiBJbmNvbXBsZXRlQ2h1bmtFcnJvcixcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbn0pO1xuXG4vKipcbiAqIFdyYXBzIGEgcGFyc2luZyBhdHRlbXB0LCBjYXB0dXJlcyBlcnJvcnMgcmVsYXRlZCB0b1xuICogaW5jb21wbGV0ZSBkYXRhIGFuZCByZS10aHJvd3MgYSBzcGVjaWFsaXplZCBlcnJvcjpcbiAqIEluY29tcGxldGVDaHVua0Vycm9yLiBPdGhlcndpc2UsIHdoYXRldmVyIG90aGVyIGVycm9yXG4gKiBpcyBiZWluZyByYWlzZWQgZ2V0cyBlc2NhbGF0ZWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlV2l0aEV4Y2VwdGlvbihwYXJzZUZ1bmM6IEZ1bmN0aW9uKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHBhcnNlRnVuYygpO1xuICB9IGNhdGNoKGVycm9yKSB7XG4gICAgLy8gQ2hyb21lLWxpa2UgYnJvd3NlcnM6IFJhbmdlRXJyb3I7IERPTUV4Y2VwdGlvblxuICAgIGlmIChlcnJvci5uYW1lID09IFwiUmFuZ2VFcnJvclwiIHx8IGVycm9yLm5hbWUgPT0gXCJJTkRFWF9TSVpFX0VSUlwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBuYW1lOiAke2Vycm9yLm5hbWV9YCk7XG4gICAgICAgIHRocm93IG5ldyBJbmNvbXBsZXRlQ2h1bmtFcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRyeSBnZXR0aW5nIGEgYmlnZ2VyIGNodW5rIG9mIHRoZSByZW1vdGUgZmlsZVxuICogdW50aWwgdGhlIEluY29tcGxldGUgQ2h1bmsgRXJyb3IgaXMgcmVzb2x2ZWQuIFRoaXMgaXMgdXNlZnVsIHdoZW4gd2UgbmVlZCB0b1xuICogcGFyc2UgdGhlIGhlYWRlciwgYnV0IHdoZW4gd2UgZG9uJ3Qga25vdyB0aGUgc2l6ZSBvZiB0aGUgaGVhZGVyIHVwIGZyb250LlxuICogSWYgdGhlIGludGlhbCByZXF1ZXN0IHJldHVybnMgYW4gaW5jb21wbGV0ZSBoZWFkZXIgYW5kIGhlbmNlIHRoZVxuICogcGFyc2luZyBmYWlscywgd2UgbmV4dCB0cnkgZG91YmxpbmcgdGhlIHJlcXVlc3RlZCBzaXplLlxuICogVGhlIHNpemUgb2YgdGhlIHJlcXVlc3QgaXMgY2FwcGVkIHdpdGggYHVudGlsU2l6ZWAgc28gdGhhdFxuICogd2UgZG9uJ3Qgc3RhcnQgYXNraW5nIGZvciBNQnMgb2YgZGF0YSBmb3Igbm8gdXNlLlxuICogSW5zdGVhZCB3ZSB3ZSB0aHJvdyBhbiBlcnJvciBpZiB3ZSByZWFjaCB0aGUgY2FwLFxuICogcG90ZW50aWFsbHkgbWVhbmluZyBhIGNvcnJ1cHRlZCAyYml0IGZpbGUuXG4qL1xuZnVuY3Rpb24gcmV0cnlSZW1vdGVHZXQocmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgc3RhcnQ6IG51bWJlciwgc2l6ZTogbnVtYmVyLCB1bnRpbFNpemU6IG51bWJlciwgcHJvbWlzZWRGdW5jOiBGdW5jdGlvbikge1xuICByZXR1cm4gcmVtb3RlRmlsZS5nZXRCeXRlcyhzdGFydCwgc2l6ZSkudGhlbihwcm9taXNlZEZ1bmMpLmNhdGNoKGVycm9yID0+IHtcbiAgICBpZihlcnJvci5uYW1lID09IFwiSW5jb21wbGV0ZUNodW5rRXJyb3JcIikge1xuICAgICAgLy8gRG8gbm90IGF0dGVtcHQgdG8gZG93bmxvYWQgbW9yZSB0aGFuIGB1bnRpbFNpemVgXG4gICAgICBpZihzaXplID4gdW50aWxTaXplKSB7XG4gICAgICAgIHRocm93IGBDb3VsZG4ndCBwYXJzZSB0aGUgaGVhZGVyIGAgK1xuICAgICAgICAgICAgICBgZnJvbSB0aGUgZmlyc3QgJHtzaXplfSBieXRlcyBvZiB0aGUgZmlsZS4gYCArXG4gICAgICAgICAgICAgIGBDb3JydXB0ZWQgMmJpdCBmaWxlP2A7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0cnlSZW1vdGVHZXQocmVtb3RlRmlsZSwgc3RhcnQsIHNpemUqMiwgdW50aWxTaXplLCBwcm9taXNlZEZ1bmMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0pO1xufVxuXG5jbGFzcyBUd29CaXQge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBoZWFkZXI6IFEuUHJvbWlzZTxUd29CaXRIZWFkZXI+O1xuXG4gIGNvbnN0cnVjdG9yKHJlbW90ZUZpbGU6IFJlbW90ZUZpbGUpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHZhciBkZWZlcnJlZEhlYWRlciA9IFEuZGVmZXIoKTtcbiAgICB0aGlzLmhlYWRlciA9IGRlZmVycmVkSGVhZGVyLnByb21pc2U7XG4gICAgcmV0cnlSZW1vdGVHZXQoXG4gICAgICB0aGlzLnJlbW90ZUZpbGUsXG4gICAgICAwLCAgLy8gQmVnaW5uaW5nIG9mIHRoZSBmaWxlXG4gICAgICBGSVJTVF9IRUFERVJfQ0hVTktTSVpFLFxuICAgICAgTUFYX0NIVU5LU0laRSxcbiAgICAgIGJ1ZmZlciA9PiB7XG4gICAgICAgIHZhciBoZWFkZXIgPSBwYXJzZVdpdGhFeGNlcHRpb24oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBwYXJzZUhlYWRlcihidWZmZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgZGVmZXJyZWRIZWFkZXIucmVzb2x2ZShoZWFkZXIpO1xuICAgICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJhc2UgcGFpcnMgZm9yIGNvbnRpZzpzdGFydC1zdG9wLlxuICAgKiBUaGUgcmFuZ2UgaXMgaW5jbHVzaXZlIGFuZCB6ZXJvLWJhc2VkLlxuICAgKiBSZXR1cm5zIGVtcHR5IHN0cmluZyBpZiBubyBkYXRhIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHJhbmdlLlxuICAgKi9cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKHN0YXJ0ID4gc3RvcCkge1xuICAgICAgdGhyb3cgYFJlcXVlc3RlZCBhIDJiaXQgcmFuZ2Ugd2l0aCBzdGFydCA+IHN0b3AgKCR7c3RhcnR9LCAke3N0b3B9KWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dldFNlcXVlbmNlSGVhZGVyKGNvbnRpZykudGhlbihoZWFkZXIgPT4ge1xuICAgICAgdmFyIGRuYU9mZnNldCA9IGhlYWRlci5vZmZzZXQgKyBoZWFkZXIuZG5hT2Zmc2V0RnJvbUhlYWRlcjtcbiAgICAgIHZhciBvZmZzZXQgPSBNYXRoLmZsb29yKGRuYU9mZnNldCArIHN0YXJ0LzQpO1xuICAgICAgdmFyIGJ5dGVMZW5ndGggPSBNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCArIDEpIC8gNCkgKyAxO1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhvZmZzZXQsIGJ5dGVMZW5ndGgpLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBtYXJrVW5rbm93bkROQShcbiAgICAgICAgICAgIHVucGFja0ROQShkYXRhVmlldywgc3RhcnQgJSA0LCBzdG9wIC0gc3RhcnQgKyAxKSwgc3RhcnQsIGhlYWRlcilcbiAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgIH0pO1xuICAgIH0pLnRoZW4ocCA9PiB7XG4gICAgICByZXR1cm4gcDtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBsaXN0IG9mIGNvbnRpZyBuYW1lcy5cbiAgZ2V0Q29udGlnTGlzdCgpOiBRLlByb21pc2U8c3RyaW5nW10+IHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4gaGVhZGVyLnNlcXVlbmNlcy5tYXAoc2VxID0+IHNlcS5uYW1lKSk7XG4gIH1cblxuICBfZ2V0U2VxdWVuY2VIZWFkZXIoY29udGlnOiBzdHJpbmcpOiBRLlByb21pc2U8U2VxdWVuY2VSZWNvcmQ+IHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgdmFyIG1heWJlU2VxID0gXy5maW5kV2hlcmUoaGVhZGVyLnNlcXVlbmNlcywge25hbWU6IGNvbnRpZ30pIHx8XG4gICAgICAgICAgICAgICAgICAgICBfLmZpbmRXaGVyZShoZWFkZXIuc2VxdWVuY2VzLCB7bmFtZTogJ2NocicgKyBjb250aWd9KTtcbiAgICAgIGlmIChtYXliZVNlcSA9PT0gbnVsbCB8fCBtYXliZVNlcSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRocm93ICdJbnZhbGlkIGNvbnRpZzogJyArIGNvbnRpZztcbiAgICAgIH1cbiAgICAgIHZhciBzZXEgPSBtYXliZVNlcTsgIC8vIGZvciBmbG93LCBzZWUgZmFjZWJvb2svZmxvdyMyNjZcblxuICAgICAgcmV0dXJuIHJldHJ5UmVtb3RlR2V0KFxuICAgICAgICB0aGlzLnJlbW90ZUZpbGUsXG4gICAgICAgIHNlcS5vZmZzZXQsXG4gICAgICAgIEZJUlNUX1NFUVVFTkNFX0NIVU5LU0laRSxcbiAgICAgICAgTUFYX0NIVU5LU0laRSxcbiAgICAgICAgYnVmZmVyID0+IHtcbiAgICAgICAgICByZXR1cm4gcGFyc2VXaXRoRXhjZXB0aW9uKCgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZVNlcXVlbmNlUmVjb3JkKGJ1ZmZlciwgc2VxLm9mZnNldCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICk7XG4gICAgfSkudGhlbihwID0+IHtcbiAgICAgIHJldHVybiBwO1xuICAgIH0pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVHdvQml0O1xuIiwiLyoqXG4gKiBBIHZpcnR1YWwgb2Zmc2V0IGludG8gYSBCQU0gZmlsZS5cbiAqIFRoaXMgY29tYmluZXMgdGhlIG9mZnNldCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb21wcmVzc2lvbiBibG9jayB3aXRoIGFuXG4gKiBvZmZzZXQgaW50byB0aGUgaW5mbGF0ZWQgZGF0YS5cbiAqIFRoZXNlIGFyZSB1c3VhbGx5IHJlcHJlc2VudGVkIGFzIHVpbnQ2NHMsIHdoaWNoIGFyZSBhd2t3YXJkIHRvIHdvcmsgd2l0aCBpblxuICogSmF2YVNjcmlwdC5cbiAqIEBmbG93XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmNsYXNzIFZpcnR1YWxPZmZzZXQge1xuICBjb2Zmc2V0OiBudW1iZXI7XG4gIHVvZmZzZXQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihjb2Zmc2V0OiBudW1iZXIsIHVvZmZzZXQ6IG51bWJlcikge1xuICAgIHRoaXMuY29mZnNldCA9IGNvZmZzZXQ7XG4gICAgdGhpcy51b2Zmc2V0ID0gdW9mZnNldDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29mZnNldH06JHt0aGlzLnVvZmZzZXR9YDtcbiAgfVxuXG4gIGlzTGVzc1RoYW4ob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDwgb3RoZXIuY29mZnNldCB8fFxuICAgICAgICAgICAodGhpcy5jb2Zmc2V0ID09IG90aGVyLmNvZmZzZXQgJiZcbiAgICAgICAgICAgIHRoaXMudW9mZnNldCA8IG90aGVyLnVvZmZzZXQpO1xuICB9XG5cbiAgaXNMZXNzVGhhbk9yRXF1YWwob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDw9IG90aGVyLmNvZmZzZXQgfHxcbiAgICAgICAgICAgKHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgICB0aGlzLnVvZmZzZXQgPD0gb3RoZXIudW9mZnNldCk7XG4gIH1cblxuICBpc0VxdWFsKG90aGVyOiBWaXJ0dWFsT2Zmc2V0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgIHRoaXMudW9mZnNldCA9PSBvdGhlci51b2Zmc2V0O1xuICB9XG5cbiAgLy8gUmV0dXJucyA8MCBpZiB0aGlzIDwgb3RoZXIsIDAgaWYgdGhpcyA9PSBvdGhlciwgPjAgaWYgdGhpcyA+IG90aGVyLlxuICAvLyBVc2VmdWwgZm9yIHNvcnRpbmcuXG4gIGNvbXBhcmVUbyhvdGhlcjogVmlydHVhbE9mZnNldCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCAtIG90aGVyLmNvZmZzZXQgfHwgdGhpcy51b2Zmc2V0IC0gb3RoZXIudW9mZnNldDtcbiAgfVxuXG4gIGNsb25lKCk6IFZpcnR1YWxPZmZzZXQge1xuICAgIHJldHVybiBuZXcgVmlydHVhbE9mZnNldCh0aGlzLmNvZmZzZXQsIHRoaXMudW9mZnNldCk7XG4gIH1cblxuICAvLyBUaGlzIGlzIGEgZmFzdGVyIHN0YW5kLWluIGZvciBqQmluYXJ5LnJlYWQoJ1ZpcnR1YWxPZmZzZXQnKVxuICBzdGF0aWMgZnJvbUJsb2IodTg6IFVpbnQ4QXJyYXksIG9mZnNldD86IG51bWJlcik6IFZpcnR1YWxPZmZzZXQge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgIHZhciB1b2Zmc2V0ID0gdThbb2Zmc2V0ICAgIF0gK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgMV0gKiAyNTYsXG4gICAgICAgIGNvZmZzZXQgPSB1OFtvZmZzZXQgKyAyXSArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyAzXSAqIDI1NiArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyA0XSAqIDY1NTM2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDVdICogMTY3NzcyMTYgK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgNl0gKiA0Mjk0OTY3Mjk2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDddICogMTA5OTUxMTYyNzc3NjtcbiAgICByZXR1cm4gbmV3IFZpcnR1YWxPZmZzZXQoY29mZnNldCwgdW9mZnNldCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWaXJ0dWFsT2Zmc2V0O1xuIiwiLyoqXG4gKiBUb29scyBmb3Igd29ya2luZyB3aXRoIGluZGV4ZWQgQkFNIChCQUkpIGZpbGVzLlxuICogVGhlc2UgaGF2ZSBub3RoaW5nIHRvIHNheSBhYm91dCBwYXJzaW5nIHRoZSBCQU0gZmlsZSBpdHNlbGYuIEZvciB0aGF0LCBzZWVcbiAqIGJhbS5qcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDaHVua30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgYmFtVHlwZXMgZnJvbSAnLi9mb3JtYXRzL2JhbVR5cGVzJztcbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5cblxuLy8gSW4gdGhlIGV2ZW50IHRoYXQgaW5kZXggY2h1bmtzIGFyZW4ndCBhdmFpbGFibGUgZnJvbSBhbiBleHRlcm5hbCBzb3VyY2UsIGl0XG4vLyB3aW5kcyB1cCBzYXZpbmcgdGltZSB0byBkbyBhIGZhc3QgcGFzcyBvdmVyIHRoZSBkYXRhIHRvIGNvbXB1dGUgdGhlbS4gVGhpc1xuLy8gYWxsb3dzIHVzIHRvIHBhcnNlIGEgc2luZ2xlIGNvbnRpZyBhdCBhIHRpbWUgdXNpbmcgakJpbmFyeS5cbmZ1bmN0aW9uIGNvbXB1dGVJbmRleENodW5rcyhidWZmZXIpIHtcbiAgdmFyIEJMT0NLX1NJWkUgPSA2NTUzNjtcbiAgdmFyIHZpZXcgPSBuZXcgakRhdGFWaWV3KGJ1ZmZlciwgMCwgYnVmZmVyLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG5cbiAgdmFyIG1pbkJsb2NrSW5kZXggPSBJbmZpbml0eTtcbiAgdmFyIGNvbnRpZ1N0YXJ0T2Zmc2V0cyA9IFtdO1xuICB2aWV3LmdldEludDMyKCk7ICAvLyBtYWdpY1xuICB2YXIgbl9yZWYgPSB2aWV3LmdldEludDMyKCk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgbl9yZWY7IGorKykge1xuICAgIGNvbnRpZ1N0YXJ0T2Zmc2V0cy5wdXNoKHZpZXcudGVsbCgpKTtcbiAgICB2YXIgbl9iaW4gPSB2aWV3LmdldEludDMyKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2JpbjsgaSsrKSB7XG4gICAgICB2aWV3LmdldFVpbnQzMigpOyAgLy8gYmluIElEXG4gICAgICB2YXIgbl9jaHVuayA9IHZpZXcuZ2V0SW50MzIoKTtcbiAgICAgIHZpZXcuc2tpcChuX2NodW5rICogMTYpO1xuICAgIH1cbiAgICB2YXIgbl9pbnR2ID0gdmlldy5nZXRJbnQzMigpO1xuICAgIGlmIChuX2ludHYpIHtcbiAgICAgIHZhciBvZmZzZXQgPSBWaXJ0dWFsT2Zmc2V0LmZyb21CbG9iKHZpZXcuZ2V0Qnl0ZXMoOCksIDApLFxuICAgICAgICAgIGNvZmZzZXQgPSBvZmZzZXQuY29mZnNldCArIChvZmZzZXQudW9mZnNldCA/IEJMT0NLX1NJWkUgOiAwKTtcbiAgICAgIG1pbkJsb2NrSW5kZXggPSBjb2Zmc2V0ID8gTWF0aC5taW4oY29mZnNldCwgbWluQmxvY2tJbmRleCkgOiBCTE9DS19TSVpFO1xuICAgICAgdmlldy5za2lwKChuX2ludHYgLSAxKSAqIDgpO1xuICAgIH1cbiAgfVxuICBjb250aWdTdGFydE9mZnNldHMucHVzaCh2aWV3LnRlbGwoKSk7XG5cbiAgLy8gQXQgdGhpcyBwb2ludCwgYG1pbkJsb2NrSW5kZXhgIHNob3VsZCBiZSBub24tSW5maW5pdHkgKHNlZSAjNDA1ICYgIzQwNilcbiAgcmV0dXJuIHtcbiAgICBjaHVua3M6IF8uemlwKF8uaW5pdGlhbChjb250aWdTdGFydE9mZnNldHMpLCBfLnJlc3QoY29udGlnU3RhcnRPZmZzZXRzKSksXG4gICAgbWluQmxvY2tJbmRleFxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIHJlYWRDaHVua3MoYnVmKSB7XG4gIHJldHVybiBuZXcgakJpbmFyeShidWYsIGJhbVR5cGVzLlRZUEVfU0VUKS5yZWFkKCdDaHVua3NBcnJheScpO1xufVxuXG5mdW5jdGlvbiByZWFkSW50ZXJ2YWxzKGJsb2I6IFVpbnQ4QXJyYXkpIHtcbiAgdmFyIGludGVydmFscyA9IG5ldyBBcnJheShNYXRoLmZsb29yKGJsb2IubGVuZ3RoIC8gOCkpO1xuICBmb3IgKHZhciBwb3MgPSAwOyBwb3MgPCBibG9iLmxlbmd0aCAtIDc7IHBvcyArPSA4KSB7XG4gICAgaW50ZXJ2YWxzW3BvcyA+PiAzXSA9IFZpcnR1YWxPZmZzZXQuZnJvbUJsb2IoYmxvYiwgcG9zKTtcbiAgfVxuICByZXR1cm4gaW50ZXJ2YWxzO1xufVxuXG5mdW5jdGlvbiBkb0NodW5rc092ZXJsYXAoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0xlc3NUaGFuT3JFcXVhbChiLmNodW5rX2VuZCkgJiZcbiAgICAgICAgIGIuY2h1bmtfYmVnLmlzTGVzc1RoYW5PckVxdWFsKGEuY2h1bmtfZW5kKTtcbn1cblxuZnVuY3Rpb24gYXJlQ2h1bmtzQWRqYWNlbnQoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0VxdWFsKGIuY2h1bmtfZW5kKSB8fCBhLmNodW5rX2VuZC5pc0VxdWFsKGIuY2h1bmtfYmVnKTtcbn1cblxuLy8gVGhpcyBjb2FsZXNjZXMgYWRqYWNlbnQgJiBvdmVybGFwcGluZyBjaHVua3MgdG8gbWluaW1pemUgZmV0Y2hlcy5cbi8vIEl0IGFsc28gYXBwbGllcyB0aGUgXCJsaW5lYXIgb3B0aW1pemF0aW9uXCIsIHdoaWNoIGNhbiBncmVhdGx5IHJlZHVjZSB0aGVcbi8vIG51bWJlciBvZiBuZXR3b3JrIGZldGNoZXMgbmVlZGVkIHRvIGZ1bGZpbGwgYSByZXF1ZXN0LlxuZnVuY3Rpb24gb3B0aW1pemVDaHVua0xpc3QoY2h1bmtMaXN0OiBDaHVua1tdLCBtaW5pbXVtT2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogQ2h1bmtbXSB7XG4gIGNodW5rTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgdmFyIHJlc3VsdCA9IGEuY2h1bmtfYmVnLmNvbXBhcmVUbyhiLmNodW5rX2JlZyk7XG4gICAgaWYgKHJlc3VsdCA9PT0gMCkge1xuICAgICAgcmVzdWx0ID0gYS5jaHVua19lbmQuY29tcGFyZVRvKGIuY2h1bmtfZW5kKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgdmFyIG5ld0NodW5rcyA9IFtdO1xuICBjaHVua0xpc3QuZm9yRWFjaChjaHVuayA9PiB7XG4gICAgaWYgKGNodW5rLmNodW5rX2VuZC5pc0xlc3NUaGFuKG1pbmltdW1PZmZzZXQpKSB7XG4gICAgICByZXR1cm47ICAvLyBsaW5lYXIgaW5kZXggb3B0aW1pemF0aW9uXG4gICAgfVxuXG4gICAgaWYgKG5ld0NodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGFzdENodW5rID0gbmV3Q2h1bmtzW25ld0NodW5rcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWRvQ2h1bmtzT3ZlcmxhcChsYXN0Q2h1bmssIGNodW5rKSAmJlxuICAgICAgICAhYXJlQ2h1bmtzQWRqYWNlbnQobGFzdENodW5rLCBjaHVuaykpIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGxhc3RDaHVuay5jaHVua19lbmQuaXNMZXNzVGhhbihjaHVuay5jaHVua19lbmQpKSB7XG4gICAgICAgIGxhc3RDaHVuay5jaHVua19lbmQgPSBjaHVuay5jaHVua19lbmQ7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbmV3Q2h1bmtzO1xufVxuXG4vLyBUaGlzIHZlcnNpb24gb2YgQmFpRmlsZSBpcyBub3QgY29tcGxldGVseSBpbW1lZGlhdGUsIGJ1dCBpdCBkb2VzIGd1YXJhbnRlZVxuLy8gdGhhdCB0aGUgaW5kZXggY2h1bmtzIGFyZSBhdmFpbGFibGUuXG5jbGFzcyBJbW1lZGlhdGVCYWlGaWxlIHtcbiAgYnVmZmVyOiA/QXJyYXlCdWZmZXI7XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGluZGV4Q2h1bmtzOiBPYmplY3Q7XG4gIGluZGV4Q2FjaGU6IFEuUHJvbWlzZTxPYmplY3Q+W107ICAvLyByZWYgSUQgLT4gcGFyc2VkIEJhaUluZGV4XG4gIGludGVydmFsc0NhY2hlOiBBcnJheTw/VmlydHVhbE9mZnNldFtdPjsgIC8vIHJlZiBJRCAtPiBsaW5lYXIgaW5kZXhcblxuICBjb25zdHJ1Y3RvcihidWZmZXI6ID9BcnJheUJ1ZmZlciwgcmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIGlmIChidWZmZXIpIHtcbiAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBjb21wdXRlSW5kZXhDaHVua3MoYnVmZmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBpbmRleENodW5rcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93ICdXaXRob3V0IGluZGV4IGNodW5rcywgdGhlIGVudGlyZSBCQUkgYnVmZmVyIG11c3QgYmUgbG9hZGVkJztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbmRleENhY2hlID0gbmV3IEFycmF5KHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCk7XG4gICAgdGhpcy5pbnRlcnZhbHNDYWNoZSA9IG5ldyBBcnJheSh0aGlzLmluZGV4Q2h1bmtzLmNodW5rcy5sZW5ndGgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIGlmIChyYW5nZS5jb250aWcgPCAwIHx8IHJhbmdlLmNvbnRpZyA+IHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBJbnZhbGlkIGNvbnRpZyAke3JhbmdlLmNvbnRpZ31gKTtcbiAgICB9XG5cbiAgICB2YXIgYmlucyA9IHJlZzJiaW5zKHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSArIDEpO1xuXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhGb3JDb250aWcocmFuZ2UuY29udGlnKS50aGVuKGNvbnRpZ0luZGV4ID0+IHtcbiAgICAgIHZhciBjaHVua3MgPSBfLmNoYWluKGNvbnRpZ0luZGV4LmJpbnMpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYiA9PiBiaW5zLmluZGV4T2YoYi5iaW4pID49IDApXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYiA9PiByZWFkQ2h1bmtzKGIuY2h1bmtzKSlcbiAgICAgICAgICAgICAgICAgICAgLmZsYXR0ZW4oKVxuICAgICAgICAgICAgICAgICAgICAudmFsdWUoKTtcblxuICAgICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5nZXRJbnRlcnZhbHMoY29udGlnSW5kZXguaW50ZXJ2YWxzLCByYW5nZS5jb250aWcpO1xuICAgICAgdmFyIHN0YXJ0SWR4ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihyYW5nZS5zdGFydCgpIC8gMTYzODQpKTtcbiAgICAgIHZhciBtaW5pbXVtT2Zmc2V0ID0gbGluZWFySW5kZXhbc3RhcnRJZHhdO1xuXG4gICAgICBjaHVua3MgPSBvcHRpbWl6ZUNodW5rTGlzdChjaHVua3MsIG1pbmltdW1PZmZzZXQpO1xuXG4gICAgICByZXR1cm4gY2h1bmtzO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgYW5kIHBhcnNlIHRoZSBpbmRleCBmb3IgYSBwYXJ0aWN1bGFyIGNvbnRpZy5cbiAgaW5kZXhGb3JDb250aWcoY29udGlnOiBudW1iZXIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIHYgPSB0aGlzLmluZGV4Q2FjaGVbY29udGlnXTtcbiAgICBpZiAodikge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuXG4gICAgdmFyIFtzdGFydCwgc3RvcF0gPSB0aGlzLmluZGV4Q2h1bmtzLmNodW5rc1tjb250aWddO1xuICAgIHRoaXMuaW5kZXhDYWNoZVtjb250aWddID0gdGhpcy5nZXRTbGljZShzdGFydCwgc3RvcCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICByZXR1cm4gamIucmVhZCgnQmFpSW5kZXgnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5pbmRleENhY2hlW2NvbnRpZ107XG4gIH1cblxuICBnZXRTbGljZShzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAodGhpcy5idWZmZXIpIHtcbiAgICAgIHJldHVybiBRLndoZW4odGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3ApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhzdGFydCwgc3RvcCAtIHN0YXJ0ICsgMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FjaGVkIHdyYXBwZXIgYXJvdW5kIHJlYWRJbnRlcnZhbHMoKVxuICBnZXRJbnRlcnZhbHMoYmxvYjogVWludDhBcnJheSwgcmVmSWQ6IG51bWJlcik6IFZpcnR1YWxPZmZzZXRbXSB7XG4gICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5pbnRlcnZhbHNDYWNoZVtyZWZJZF07XG4gICAgaWYgKGxpbmVhckluZGV4KSB7XG4gICAgICByZXR1cm4gbGluZWFySW5kZXg7XG4gICAgfVxuICAgIGxpbmVhckluZGV4ID0gcmVhZEludGVydmFscyhibG9iKTtcbiAgICB0aGlzLmludGVydmFsc0NhY2hlW3JlZklkXSA9IGxpbmVhckluZGV4O1xuICAgIHJldHVybiBsaW5lYXJJbmRleDtcbiAgfVxufVxuXG5cbmNsYXNzIEJhaUZpbGUge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBpbW1lZGlhdGU6IFEuUHJvbWlzZTxJbW1lZGlhdGVCYWlGaWxlPjtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlOiBSZW1vdGVGaWxlLCBpbmRleENodW5rcz86IE9iamVjdCkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IFEud2hlbihuZXcgSW1tZWRpYXRlQmFpRmlsZShudWxsLCByZW1vdGVGaWxlLCBpbmRleENodW5rcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IHJlbW90ZUZpbGUuZ2V0QWxsKCkudGhlbihidWYgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEltbWVkaWF0ZUJhaUZpbGUoYnVmLCByZW1vdGVGaWxlLCBpbmRleENodW5rcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmdldENodW5rc0ZvckludGVydmFsKHJhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEhlYWRlclNpemUoKTogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmluZGV4Q2h1bmtzLm1pbkJsb2NrSW5kZXg7XG4gICAgfSk7XG4gIH1cbn1cblxuXG4vLyBUaGVzZSBmdW5jdGlvbnMgY29tZSBkaXJlY3RseSBmcm9tIHRoZSBTQU0gcGFwZXJcbi8vIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmIHNlY3Rpb24gNS4zXG5cbi8vIGNhbGN1bGF0ZSB0aGUgbGlzdCBvZiBiaW5zIHRoYXQgbWF5IG92ZXJsYXAgd2l0aCByZWdpb24gW2JlZyxlbmQpICh6ZXJvLWJhc2VkKVxuZnVuY3Rpb24gcmVnMmJpbnMoYmVnLCBlbmQpIHtcbiAgdmFyIGssIGxpc3QgPSBbXTtcbiAgLS1lbmQ7XG4gIGxpc3QucHVzaCgwKTtcbiAgZm9yIChrID0gICAgMSArIChiZWc+PjI2KTsgayA8PSAgICAxICsgKGVuZD4+MjYpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICAgOSArIChiZWc+PjIzKTsgayA8PSAgICA5ICsgKGVuZD4+MjMpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICA3MyArIChiZWc+PjIwKTsgayA8PSAgIDczICsgKGVuZD4+MjApOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gIDU4NSArIChiZWc+PjE3KTsgayA8PSAgNTg1ICsgKGVuZD4+MTcpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gNDY4MSArIChiZWc+PjE0KTsgayA8PSA0NjgxICsgKGVuZD4+MTQpOyArK2spIGxpc3QucHVzaChrKTtcbiAgcmV0dXJuIGxpc3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFpRmlsZTtcbiIsIi8qKlxuICogVG9vbHMgZm9yIHBhcnNpbmcgQkFNIGZpbGVzLlxuICogU2VlIGh0dHBzOi8vc2FtdG9vbHMuZ2l0aHViLmlvL2h0cy1zcGVjcy9TQU12MS5wZGZcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIHtDaHVuaywgSW5mbGF0ZWRCbG9ja30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5cbmltcG9ydCBiYW1UeXBlcyBmcm9tICcuL2Zvcm1hdHMvYmFtVHlwZXMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBCYWlGaWxlIGZyb20gJy4vYmFpJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgVmlydHVhbE9mZnNldCBmcm9tICcuL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IFNhbVJlYWQgZnJvbSAnLi9TYW1SZWFkJztcblxuXG4vKipcbiAqIFRoZSAnY29udGFpbmVkJyBwYXJhbWV0ZXIgY29udHJvbHMgd2hldGhlciB0aGUgYWxpZ25tZW50cyBtdXN0IGJlIGZ1bGx5XG4gKiBjb250YWluZWQgd2l0aGluIHRoZSByYW5nZSwgb3IgbmVlZCBvbmx5IG92ZXJsYXAgaXQuXG4gKi9cbmZ1bmN0aW9uIGlzQWxpZ25tZW50SW5SYW5nZShyZWFkOiBTYW1SZWFkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAvLyBUT0RPOiBVc2UgY2lnYXIuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgaW5zdGVhZCBvZiBsX3NlcSwgbGlrZSBodHNqZGsuIFxuICB2YXIgcmVhZFJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJlYWQucmVmSUQsIHJlYWQucG9zLCByZWFkLnBvcyArIHJlYWQubF9zZXEgLSAxKTtcbiAgaWYgKGNvbnRhaW5lZCkge1xuICAgIHJldHVybiBpZHhSYW5nZS5jb250YWluc0ludGVydmFsKHJlYWRSYW5nZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlYWRSYW5nZS5pbnRlcnNlY3RzKGlkeFJhbmdlKTtcbiAgfVxufVxuXG5cbnZhciBrTWF4RmV0Y2ggPSA2NTUzNiAqIDI7XG5cbi8vIFJlYWQgYSBzaW5nbGUgYWxpZ25tZW50XG5mdW5jdGlvbiByZWFkQWxpZ25tZW50KHZpZXc6IGpEYXRhVmlldywgcG9zOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogVmlydHVhbE9mZnNldCwgcmVmTmFtZTogc3RyaW5nKToge3JlYWQ6IFNhbVJlYWQsIHJlYWRMZW5ndGg6IG51bWJlciB9IHtcbiAgdmFyIHJlYWRMZW5ndGggPSB2aWV3LmdldEludDMyKHBvcyk7XG4gIHBvcyArPSA0O1xuXG4gIGlmIChwb3MgKyByZWFkTGVuZ3RoID4gdmlldy5ieXRlTGVuZ3RoKSB7XG4gICAgLy8gV2UgY2Fubm90IHJlcGxhY2Ugd2l0aCBhbiBlcnJvciBoZXJlLCBiZWNhdXNlIHByb21pc2UgZGVwZW5kcyBvbiByZXNwb25zZS5cbiAgICAvLyAkRmxvd0lnbm9yZTogVE9ETyByZW1vdmUgZmxvdyBzdXBwcmVzc2lvbi4gXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgcmVhZFNsaWNlID0gdmlldy5idWZmZXIuc2xpY2UocG9zLCBwb3MgKyByZWFkTGVuZ3RoKTtcblxuICB2YXIgcmVhZCA9IG5ldyBTYW1SZWFkKHJlYWRTbGljZSwgb2Zmc2V0LmNsb25lKCksIHJlZk5hbWUpO1xuICByZXR1cm4ge1xuICAgIHJlYWQsXG4gICAgcmVhZExlbmd0aDogNCArIHJlYWRMZW5ndGhcbiAgfTtcbn1cblxuLy8gVGhpcyB0cmFja3MgaG93IG1hbnkgYnl0ZXMgd2VyZSByZWFkLlxuZnVuY3Rpb24gcmVhZEFsaWdubWVudHNUb0VuZChidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWZOYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZWQ6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogVmlydHVhbE9mZnNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2tzOiBJbmZsYXRlZEJsb2NrW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudHM6IFNhbVJlYWRbXSkge1xuICAvLyBXZSB1c2UgakRhdGFWaWV3IGFuZCBBcnJheUJ1ZmZlciBkaXJlY3RseSBmb3IgYSBzcGVlZHVwIG92ZXIgakJpbmFyeS5cbiAgLy8gVGhpcyBwYXJzZXMgcmVhZHMgfjItM3ggZmFzdGVyIHRoYW4gdXNpbmcgVGhpbkFsaWdubWVudCBkaXJlY3RseS5cbiAgdmFyIGp2ID0gbmV3IGpEYXRhVmlldyhidWZmZXIsIDAsIGJ1ZmZlci5ieXRlTGVuZ3RoLCB0cnVlIC8qIGxpdHRsZSBlbmRpYW4gKi8pO1xuICB2YXIgc2hvdWxkQWJvcnQgPSBmYWxzZTtcbiAgdmFyIHBvcyA9IDA7XG4gIG9mZnNldCA9IG9mZnNldC5jbG9uZSgpO1xuICB2YXIgYmxvY2tJbmRleCA9IDA7XG4gIHRyeSB7XG4gICAgd2hpbGUgKHBvcyA8IGJ1ZmZlci5ieXRlTGVuZ3RoKSB7XG4gICAgICB2YXIgcmVhZERhdGEgPSByZWFkQWxpZ25tZW50KGp2LCBwb3MsIG9mZnNldCwgcmVmTmFtZSk7XG4gICAgICBpZiAoIXJlYWREYXRhKSBicmVhaztcblxuICAgICAgdmFyIHtyZWFkLCByZWFkTGVuZ3RofSA9IHJlYWREYXRhO1xuICAgICAgcG9zICs9IHJlYWRMZW5ndGg7XG4gICAgICBpZiAoaXNBbGlnbm1lbnRJblJhbmdlKHJlYWQsIGlkeFJhbmdlLCBjb250YWluZWQpKSB7XG4gICAgICAgIGFsaWdubWVudHMucHVzaChyZWFkKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWR2YW5jZSB0aGUgVmlydHVhbE9mZnNldCB0byByZWZsZWN0IHRoZSBuZXcgcG9zaXRpb25cbiAgICAgIG9mZnNldC51b2Zmc2V0ICs9IHJlYWRMZW5ndGg7XG4gICAgICB2YXIgYnVmTGVuID0gYmxvY2tzW2Jsb2NrSW5kZXhdLmJ1ZmZlci5ieXRlTGVuZ3RoO1xuICAgICAgaWYgKG9mZnNldC51b2Zmc2V0ID49IGJ1Zkxlbikge1xuICAgICAgICBvZmZzZXQudW9mZnNldCAtPSBidWZMZW47XG4gICAgICAgIG9mZnNldC5jb2Zmc2V0ICs9IGJsb2Nrc1tibG9ja0luZGV4XS5jb21wcmVzc2VkTGVuZ3RoO1xuICAgICAgICBibG9ja0luZGV4Kys7XG4gICAgICB9XG5cbiAgICAgIC8vIE9wdGltaXphdGlvbjogaWYgdGhlIGxhc3QgYWxpZ25tZW50IHN0YXJ0ZWQgYWZ0ZXIgdGhlIHJlcXVlc3RlZCByYW5nZSxcbiAgICAgIC8vIHRoZW4gbm8gb3RoZXIgY2h1bmtzIGNhbiBwb3NzaWJseSBjb250YWluIG1hdGNoaW5nIGFsaWdubWVudHMuXG4gICAgICAvLyBUT0RPOiB1c2UgY29udGlnSW50ZXJ2YWwuaXNBZnRlckludGVydmFsIHdoZW4gdGhhdCdzIHBvc3NpYmxlLlxuICAgICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJlYWQucmVmSUQsIHJlYWQucG9zLCByZWFkLnBvcyArIDEpO1xuICAgICAgaWYgKHJhbmdlLmNvbnRpZyA+IGlkeFJhbmdlLmNvbnRpZyB8fFxuICAgICAgICAgIChyYW5nZS5jb250aWcgPT0gaWR4UmFuZ2UuY29udGlnICYmIHJhbmdlLnN0YXJ0KCkgPiBpZHhSYW5nZS5zdG9wKCkpKSB7XG4gICAgICAgIHNob3VsZEFib3J0ID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIENvZGUgZ2V0cyBoZXJlIGlmIHRoZSBjb21wcmVzc2lvbiBibG9jayBlbmRlZCBleGFjdGx5IGF0IHRoZSBlbmQgb2ZcbiAgICAvLyBhbiBBbGlnbm1lbnQuXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBQYXJ0aWFsIHJlY29yZFxuICAgIGlmICghKGUgaW5zdGFuY2VvZiBSYW5nZUVycm9yKSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNob3VsZEFib3J0LFxuICAgIG5leHRPZmZzZXQ6IG9mZnNldFxuICB9O1xufVxuXG4vLyBGZXRjaCBhbGlnbm1lbnRzIGZyb20gdGhlIHJlbW90ZSBzb3VyY2UgYXQgdGhlIGxvY2F0aW9ucyBzcGVjaWZpZWQgYnkgQ2h1bmtzLlxuLy8gVGhpcyBjYW4gcG90ZW50aWFsbHkgcmVzdWx0IGluIG1hbnkgbmV0d29yayByZXF1ZXN0cy5cbi8vIFRoZSByZXR1cm5lZCBwcm9taXNlIGlzIGZ1bGZpbGxlZCBvbmNlIGl0IGNhbiBiZSBwcm92ZWQgdGhhdCBubyBtb3JlXG4vLyBhbGlnbm1lbnRzIG5lZWQgdG8gYmUgZmV0Y2hlZC5cbmZ1bmN0aW9uIGZldGNoQWxpZ25tZW50cyhyZW1vdGVGaWxlOiBSZW1vdGVGaWxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgIHJlZk5hbWU6IHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICBpZHhSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPixcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZWQ6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtzOiBDaHVua1tdKTogUS5Qcm9taXNlPFNhbVJlYWRbXT4ge1xuXG4gIHZhciBudW1SZXF1ZXN0cyA9IDAsXG4gICAgICBhbGlnbm1lbnRzID0gW10sXG4gICAgICBkZWZlcnJlZCA9IFEuZGVmZXIoKTtcblxuICBmdW5jdGlvbiBmZXRjaChjaHVua3M6IENodW5rW10pIHtcbiAgICBpZiAoY2h1bmtzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZGVmZXJyZWQucmVzb2x2ZShhbGlnbm1lbnRzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBOZXZlciBmZXRjaCBtb3JlIHRoYW4gMTI4ayBhdCBhIHRpbWUgLS0gdGhpcyByZWR1Y2VzIGNvbnRlbnRpb24gb24gdGhlXG4gICAgLy8gbWFpbiB0aHJlYWQgYW5kIGNhbiBhdm9pZCBzZW5kaW5nIHVubmVjZXNzYXJ5IGJ5dGVzIG92ZXIgdGhlIG5ldHdvcmsuXG4gICAgdmFyIGNodW5rID0gY2h1bmtzWzBdLFxuICAgICAgICBjaHVua19iZWcgPSBjaHVuay5jaHVua19iZWcuY29mZnNldCxcbiAgICAgICAgY2h1bmtfZW5kID0gY2h1bmsuY2h1bmtfZW5kLmNvZmZzZXQ7XG4gICAgdmFyIGJ5dGVzVG9GZXRjaCA9IE1hdGgubWluKGtNYXhGZXRjaCwgKGNodW5rX2VuZCArIDY1NTM2KSAtIGNodW5rX2JlZyk7XG4gICAgcmVtb3RlRmlsZS5nZXRCeXRlcyhjaHVua19iZWcsIGJ5dGVzVG9GZXRjaCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgbnVtUmVxdWVzdHMrKztcbiAgICAgIGRlZmVycmVkLm5vdGlmeSh7bnVtUmVxdWVzdHN9KTtcbiAgICAgIHZhciBjYWNoZUtleSA9IHtcbiAgICAgICAgZmlsZW5hbWU6IHJlbW90ZUZpbGUudXJsLFxuICAgICAgICBpbml0aWFsT2Zmc2V0OiBjaHVua19iZWdcbiAgICAgIH07XG4gICAgICB2YXIgYmxvY2tzID0gdXRpbHMuaW5mbGF0ZUNvbmNhdGVuYXRlZEd6aXAoYnVmZmVyLCBjaHVua19lbmQgLSBjaHVua19iZWcsIGNhY2hlS2V5KTtcblxuICAgICAgLy8gSWYgdGhlIGNodW5rIGhhc24ndCBiZWVuIGV4aGF1c3RlZCwgcmVzdW1lIGl0IGF0IGFuIGFwcHJvcHJpYXRlIHBsYWNlLlxuICAgICAgLy8gVGhlIGxhc3QgYmxvY2sgbmVlZHMgdG8gYmUgcmUtcmVhZCwgc2luY2UgaXQgbWF5IG5vdCBoYXZlIGJlZW4gZXhoYXVzdGVkLlxuICAgICAgdmFyIGxhc3RCbG9jayA9IGJsb2Nrc1tibG9ja3MubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgbGFzdEJ5dGUgPSBjaHVua19iZWcgKyBsYXN0QmxvY2sub2Zmc2V0IC0gMSxcbiAgICAgICAgICBuZXdDaHVuayA9IG51bGw7XG4gICAgICBpZiAoYmxvY2tzLmxlbmd0aCA+IDEgJiYgbGFzdEJ5dGUgPCBjaHVua19lbmQpIHtcbiAgICAgICAgbmV3Q2h1bmsgPSB7XG4gICAgICAgICAgY2h1bmtfYmVnOiBuZXcgVmlydHVhbE9mZnNldChsYXN0Qnl0ZSArIDEsIDApLFxuICAgICAgICAgIGNodW5rX2VuZDogY2h1bmsuY2h1bmtfZW5kXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHZhciBidWZmZXJzID0gYmxvY2tzLm1hcCh4ID0+IHguYnVmZmVyKTtcbiAgICAgIGJ1ZmZlcnNbMF0gPSBidWZmZXJzWzBdLnNsaWNlKGNodW5rLmNodW5rX2JlZy51b2Zmc2V0KTtcbiAgICAgIHZhciBkZWNvbXAgPSB1dGlscy5jb25jYXRBcnJheUJ1ZmZlcnMoYnVmZmVycyk7XG4gICAgICBpZiAoZGVjb21wLmJ5dGVMZW5ndGggPiAwKSB7XG4gICAgICAgIHZhciB7c2hvdWxkQWJvcnQsIG5leHRPZmZzZXR9ID1cbiAgICAgICAgICAgIHJlYWRBbGlnbm1lbnRzVG9FbmQoZGVjb21wLCByZWZOYW1lLCBpZHhSYW5nZSwgY29udGFpbmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVuay5jaHVua19iZWcsIGJsb2NrcywgYWxpZ25tZW50cyk7XG4gICAgICAgIGlmIChzaG91bGRBYm9ydCkge1xuICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoYWxpZ25tZW50cyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuZXdDaHVuaykge1xuICAgICAgICAgIG5ld0NodW5rLmNodW5rX2JlZyA9IG5leHRPZmZzZXQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0NodW5rID0gbnVsbDsgIC8vIFRoaXMgaXMgbW9zdCBsaWtlbHkgRU9GXG4gICAgICB9XG4gICAgICBmZXRjaCgobmV3Q2h1bmsgIT09IG51bGwgPyBbbmV3Q2h1bmtdIDogW10pLmNvbmNhdChfLnJlc3QoY2h1bmtzKSkpO1xuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2goY2h1bmtzKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbiBcbmNsYXNzIEJhbSB7XG4gIGluZGV4OiA/QmFpRmlsZTtcbiAgaGVhZGVyOiBRLlByb21pc2U8T2JqZWN0PjtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGFzSW5kZXhDaHVua3M6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZTogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgcmVtb3RlSW5kZXhGaWxlPzogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHRoaXMuaW5kZXggPSByZW1vdGVJbmRleEZpbGUgPyBuZXcgQmFpRmlsZShyZW1vdGVJbmRleEZpbGUsIGluZGV4Q2h1bmtzKSA6IG51bGw7XG4gICAgdGhpcy5oYXNJbmRleENodW5rcyA9ICEhaW5kZXhDaHVua3M7XG5cbiAgICB2YXIgc2l6ZVByb21pc2UgPSB0aGlzLmluZGV4ID8gdGhpcy5pbmRleC5nZXRIZWFkZXJTaXplKCkgOiBRLndoZW4oMiAqIDY1NTM1KTtcbiAgICB0aGlzLmhlYWRlciA9IHNpemVQcm9taXNlLnRoZW4oc2l6ZSA9PiB7XG4gICAgICB2YXIgZGVmID0gUS5kZWZlcigpO1xuICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBuZXh0IGV2ZW50IGxvb3AgdG8gZ2l2ZSBsaXN0ZW5lcnMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIuXG4gICAgICBRLndoZW4oKS50aGVuKCgpID0+IHsgZGVmLm5vdGlmeSh7c3RhdHVzOiAnRmV0Y2hpbmcgQkFNIGhlYWRlcid9KTsgfSk7XG4gICAgICB1dGlscy5waXBlUHJvbWlzZShcbiAgICAgICAgICBkZWYsXG4gICAgICAgICAgdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKDAsIHNpemUpLnRoZW4oYnVmID0+IHtcbiAgICAgICAgICAgIHZhciBkZWNvbXAgPSB1dGlscy5pbmZsYXRlR3ppcChidWYpO1xuICAgICAgICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoZGVjb21wLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICAgICAgICByZXR1cm4gamIucmVhZCgnQmFtSGVhZGVyJyk7XG4gICAgICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGRlZi5wcm9taXNlO1xuICAgIH0pO1xuICAgIHRoaXMuaGVhZGVyLmRvbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgZW50aXJlIEJBTSBmaWxlIGZyb20gdGhlIHJlbW90ZSBzb3VyY2UgYW5kIHBhcnNlcyBpdC5cbiAgICogU2luY2UgQkFNIGZpbGVzIGNhbiBiZSBlbm9ybW91cyAoaHVuZHJlZHMgb2YgR0IpLCB0aGlzIGlzIG9ubHkgcmVjb21tZW5kZWRcbiAgICogZm9yIHNtYWxsIHRlc3QgaW5wdXRzLlxuICAgKi9cbiAgcmVhZEFsbCgpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRBbGwoKS50aGVuKGJ1ZiA9PiB7XG4gICAgICB2YXIgZGVjb21wID0gdXRpbHMuaW5mbGF0ZUd6aXAoYnVmKTtcbiAgICAgIHZhciBqYiA9IG5ldyBqQmluYXJ5KGRlY29tcCwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgICAgdmFyIG8gPSBqYi5yZWFkKCdCYW1GaWxlJyk7XG4gICAgICAvLyBEbyBzb21lIG1pbGQgcmUtc2hhcGluZy5cbiAgICAgIHZhciB2byA9IG5ldyBWaXJ0dWFsT2Zmc2V0KDAsIDApO1xuICAgICAgdmFyIHNsaWNlID0gZnVuY3Rpb24odTg6IFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHU4LmJ1ZmZlci5zbGljZSh1OC5ieXRlT2Zmc2V0LCB1OC5ieXRlT2Zmc2V0ICsgdTguYnl0ZUxlbmd0aCAtIDEpO1xuICAgICAgfTtcbiAgICAgIG8uYWxpZ25tZW50cyA9IG8uYWxpZ25tZW50cy5tYXAoeCA9PiB7XG4gICAgICAgIHZhciByID0gbmV3IFNhbVJlYWQoc2xpY2UoeC5jb250ZW50cyksIHZvLCAnJyk7XG4gICAgICAgIGlmIChyLnJlZklEICE9IC0xKSB7XG4gICAgICAgICAgci5yZWYgPSBvLmhlYWRlci5yZWZlcmVuY2VzW3IucmVmSURdLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgc2luZ2xlIHJlYWQgYXQgdGhlIGdpdmVuIFZpcnR1YWxPZmZzZXQuXG4gICAqIFRoaXMgaXMgaW5zYW5lbHkgaW5lZmZpY2llbnQgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBvdXRzaWRlIG9mIHRlc3RpbmcuXG4gICAqL1xuICByZWFkQXRPZmZzZXQob2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogUS5Qcm9taXNlPFNhbVJlYWQ+IHtcbiAgICB2YXIgcmVhZFByb21pc2U6IFEuUHJvbWlzZTxTYW1SZWFkPiA9IHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhvZmZzZXQuY29mZnNldCwga01heEZldGNoKS50aGVuKGd6aXAgPT4ge1xuICAgICAgdmFyIGJ1ZjogQXJyYXlCdWZmZXIgPSB1dGlscy5pbmZsYXRlR3ppcChnemlwKTtcbiAgICAgIHZhciBqdiA9IG5ldyBqRGF0YVZpZXcoYnVmLCAwLCBidWYuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgICAgIHZhciByZWFkRGF0YSA9IHJlYWRBbGlnbm1lbnQoanYsIG9mZnNldC51b2Zmc2V0LCBvZmZzZXQsICcnKTtcblxuICAgICAgLy8gQXR0YWNoIHRoZSBodW1hbi1yZWFkYWJsZSByZWYgbmFtZVxuICAgICAgdmFyIHJlYWQ6IFNhbVJlYWQgPSByZWFkRGF0YS5yZWFkO1xuICAgICAgcmV0dXJuIHJlYWQ7XG4gICAgfSk7XG5cblxuICAgIHJldHVybiBRLmFsbChbcmVhZFByb21pc2UsIHRoaXMuaGVhZGVyXSlcbiAgICAudGhlbigoW3JlYWQsIGhlYWRlcl0pID0+IHtcbiAgICAgIHJlYWQucmVmID0gaGVhZGVyLnJlZmVyZW5jZXNbcmVhZC5yZWZJRF0ubmFtZTtcbiAgICAgIHJldHVybiByZWFkO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcCBhIGNvbnRpZyBuYW1lIHRvIGEgY29udGlnIGluZGV4IGFuZCBjYW5vbmljYWwgbmFtZS5cbiAgICovXG4gIGdldENvbnRpZ0luZGV4KGNvbnRpZ05hbWU6IHN0cmluZyk6IFEuUHJvbWlzZTx7aWR4OiBudW1iZXI7IG5hbWU6IHN0cmluZ30+IHtcbiAgICByZXR1cm4gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWFkZXIucmVmZXJlbmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmFtZSA9IGhlYWRlci5yZWZlcmVuY2VzW2ldLm5hbWU7XG4gICAgICAgIGlmIChuYW1lID09IGNvbnRpZ05hbWUgfHxcbiAgICAgICAgICAgIG5hbWUgPT0gJ2NocicgKyBjb250aWdOYW1lIHx8XG4gICAgICAgICAgICAnY2hyJyArIG5hbWUgPT0gY29udGlnTmFtZSkge1xuICAgICAgICAgIHJldHVybiB7aWR4OiBpLCBuYW1lOiBuYW1lfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhyb3cgYEludmFsaWQgY29udGlnIG5hbWU6ICR7Y29udGlnTmFtZX1gO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCB0aGUgYWxpZ25tZW50cyB3aGljaCBvdmVybGFwIGEgcmFuZ2UuXG4gICAqIFRoZSAnY29udGFpbmVkJyBwYXJhbWV0ZXIgY29udHJvbHMgd2hldGhlciB0aGUgYWxpZ25tZW50cyBtdXN0IGJlIGZ1bGx5XG4gICAqIGNvbnRhaW5lZCB3aXRoaW4gdGhlIHJhbmdlLCBvciBuZWVkIG9ubHkgb3ZlcmxhcCBpdC5cbiAgICovXG4gIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgb3B0X2NvbnRhaW5lZD86IGJvb2xlYW4pOiBRLlByb21pc2U8U2FtUmVhZFtdPiB7XG4gICAgdmFyIGNvbnRhaW5lZCA9IG9wdF9jb250YWluZWQgfHwgZmFsc2U7XG4gICAgaWYgKCF0aGlzLmluZGV4KSB7XG4gICAgICB0aHJvdyAnUmFuZ2Ugc2VhcmNoZXMgYXJlIG9ubHkgc3VwcG9ydGVkIG9uIEJBTXMgd2l0aCBCQUkgaW5kaWNlcy4nO1xuICAgIH1cbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4O1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29udGlnSW5kZXgocmFuZ2UuY29udGlnKS50aGVuKCh7aWR4LCBuYW1lfSkgPT4ge1xuICAgICAgdmFyIGRlZjogUS5EZWZlcnJlZDxTYW1SZWFkW10+ID0gUS5kZWZlcigpO1xuICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBuZXh0IGV2ZW50IGxvb3AgdG8gZ2l2ZSBsaXN0ZW5lcnMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIuXG4gICAgICBRLndoZW4oKS50aGVuKCgpID0+IHsgZGVmLm5vdGlmeSh7c3RhdHVzOiAnRmV0Y2hpbmcgQkFNIGluZGV4J30pOyB9KTtcblxuICAgICAgdmFyIGlkeFJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGlkeCwgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcblxuICAgICAgdmFyIHByb21pc2U6IFEuUHJvbWlzZTxTYW1SZWFkW10+ID0gaW5kZXguZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwoaWR4UmFuZ2UpLnRoZW4oY2h1bmtzID0+IHtcbiAgICAgICAgICByZXR1cm4gZmV0Y2hBbGlnbm1lbnRzKHRoaXMucmVtb3RlRmlsZSwgbmFtZSwgaWR4UmFuZ2UsIGNvbnRhaW5lZCwgY2h1bmtzKTtcbiAgICAgICAgfSkudGhlbihzYW1SZWFkcyA9PiB7XG4gICAgICAgICAgcmV0dXJuIHNhbVJlYWRzO1xuICAgICAgICB9KTtcblxuICAgICAgdXRpbHMucGlwZVByb21pc2UoZGVmLCBwcm9taXNlKTtcbiAgICAgICAgXG4gICAgICByZXR1cm4gZGVmLnByb21pc2U7XG4gICAgfSk7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEJhbTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcblxuY2xhc3MgQ29kaW5nSW50ZXJ2YWwgZXh0ZW5kcyBJbnRlcnZhbCB7XG4gIGlzQ29kaW5nOiBib29sZWFuO1xuICBjb25zdHJ1Y3RvcihzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIsIGlzQ29kaW5nOiBib29sZWFuKSB7XG4gICAgc3VwZXIoc3RhcnQsIHN0b3ApO1xuICAgIHRoaXMuaXNDb2RpbmcgPSBpc0NvZGluZztcbiAgfVxufVxuXG4vKipcbiAqIFNwbGl0IGV4b25zIHdoaWNoIGNyb3NzIHRoZSBjb2Rpbmcvbm9uLWNvZGluZyBib3VuZGFyeSBpbnRvIHB1cmVseSBjb2RpbmcgJlxuICogbm9uLWNvZGluZyBwYXJ0cy5cbiAqL1xuZnVuY3Rpb24gc3BsaXRDb2RpbmdFeG9ucyhleG9uczogSW50ZXJ2YWxbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY29kaW5nUmVnaW9uOiBJbnRlcnZhbCk6IENvZGluZ0ludGVydmFsW10ge1xuICByZXR1cm4gXy5mbGF0dGVuKGV4b25zLm1hcChleG9uID0+IHtcbiAgICAvLyBTcGVjaWFsIGNhc2U6IHRoZSBjb2RpbmcgcmVnaW9uIGlzIGVudGlyZWx5IGNvbnRhaW5lZCBieSB0aGlzIGV4b24uXG4gICAgaWYgKGV4b24uY29udGFpbnNJbnRlcnZhbChjb2RpbmdSZWdpb24pKSB7XG4gICAgICAvLyBzcGxpdCBpbnRvIHRocmVlIHBhcnRzLlxuICAgICAgcmV0dXJuIFtcbiAgICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoZXhvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0YXJ0IC0gMSwgZmFsc2UpLFxuICAgICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RhcnQsIGNvZGluZ1JlZ2lvbi5zdG9wLCB0cnVlKSxcbiAgICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoY29kaW5nUmVnaW9uLnN0b3AgKyAxLCBleG9uLnN0b3AsIGZhbHNlKVxuICAgICAgXS5maWx0ZXIoaW50ZXJ2YWwgPT4gaW50ZXJ2YWwuc3RhcnQgPD0gaW50ZXJ2YWwuc3RvcCk7XG4gICAgfVxuXG4gICAgdmFyIHN0YXJ0SXNDb2RpbmcgPSBjb2RpbmdSZWdpb24uY29udGFpbnMoZXhvbi5zdGFydCksXG4gICAgICAgIHN0b3BJc0NvZGluZyA9IGNvZGluZ1JlZ2lvbi5jb250YWlucyhleG9uLnN0b3ApO1xuICAgIGlmIChzdGFydElzQ29kaW5nID09IHN0b3BJc0NvZGluZykge1xuICAgICAgcmV0dXJuIFtuZXcgQ29kaW5nSW50ZXJ2YWwoZXhvbi5zdGFydCwgZXhvbi5zdG9wLCBzdGFydElzQ29kaW5nKV07XG4gICAgfSBlbHNlIGlmIChzdGFydElzQ29kaW5nKSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoZXhvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0b3AsIHRydWUpLFxuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoY29kaW5nUmVnaW9uLnN0b3AgKyAxLCBleG9uLnN0b3AsIGZhbHNlKVxuICAgICAgXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGV4b24uc3RhcnQsIGNvZGluZ1JlZ2lvbi5zdGFydCAtIDEsIGZhbHNlKSxcbiAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGNvZGluZ1JlZ2lvbi5zdGFydCwgZXhvbi5zdG9wLCB0cnVlKVxuICAgICAgXTtcbiAgICB9XG4gIH0pKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7c3BsaXRDb2RpbmdFeG9ucywgQ29kaW5nSW50ZXJ2YWx9O1xuIiwiLyoqXG4gKiBDbGFzcyBmb3IgcGFyc2luZyBmZWF0dXJlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDb3ZlcmFnZUNvdW50fSBmcm9tICcuLi92aXovcGlsZXVwdXRpbHMnO1xuXG5jbGFzcyBGZWF0dXJlIHtcbiAgaWQ6IHN0cmluZztcbiAgZmVhdHVyZVR5cGU6IHN0cmluZztcbiAgcG9zaXRpb246IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIHNjb3JlOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoZmVhdHVyZTogT2JqZWN0KSB7XG4gICAgdGhpcy5pZCA9IGZlYXR1cmUuaWQ7XG4gICAgdGhpcy5mZWF0dXJlVHlwZSA9IGZlYXR1cmUuZmVhdHVyZVR5cGU7XG4gICAgdGhpcy5wb3NpdGlvbiA9IGZlYXR1cmUucG9zaXRpb247XG4gICAgdGhpcy5zY29yZSA9IGZlYXR1cmUuc2NvcmU7XG4gIH1cblxuICBnZXRLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5pZDtcbiAgfVxuXG4gIGdldEludGVydmFsKCk6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uO1xuICB9XG5cbiAgZ2V0Q292ZXJhZ2UocmVmZXJlbmNlU291cmNlOiBPYmplY3QpOiBDb3ZlcmFnZUNvdW50IHtcbiAgICByZXR1cm4ge1xuICAgICAgcmFuZ2U6IHRoaXMuZ2V0SW50ZXJ2YWwoKSxcbiAgICAgIG9wSW5mbzogbnVsbFxuICAgIH07XG4gIH1cblxuXG4gIHN0YXRpYyBmcm9tR0E0R0goZ2E0Z2hGZWF0dXJlOiBPYmplY3QpOiBGZWF0dXJlIHtcbiAgICB2YXIgcG9zaXRpb24gPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2E0Z2hGZWF0dXJlLnJlZmVyZW5jZU5hbWUsIHBhcnNlSW50KGdhNGdoRmVhdHVyZS5zdGFydCksIHBhcnNlSW50KGdhNGdoRmVhdHVyZS5lbmQpKTtcbiAgICByZXR1cm4gbmV3IEZlYXR1cmUoXG4gICAge1xuICAgICAgaWQ6IGdhNGdoRmVhdHVyZS5pZCxcbiAgICAgIGZlYXR1cmVUeXBlOiBnYTRnaEZlYXR1cmUuZmVhdHVyZVR5cGUsXG4gICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICBzY29yZTogMTAwMFxuICAgIH0pO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiByYW5nZS5pbnRlcnNlY3RzKHRoaXMucG9zaXRpb24pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmVhdHVyZTtcbiIsIi8qKlxuICogQmluYXJ5IGZvcm1hdHMgZm9yIEJBTSBmaWxlcy5cbiAqIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmXG4gKiBAZmxvd1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IFZpcnR1YWxPZmZzZXQgZnJvbSAnLi4vVmlydHVhbE9mZnNldCc7XG5pbXBvcnQge251bGxTdHJpbmcsIHVpbnQ2NG5hdGl2ZX0gZnJvbSAnLi9oZWxwZXJzJztcblxudmFyIFNFUVVFTkNFX1ZBTFVFUyA9IFsnPScsICdBJywgJ0MnLCAnTScsICdHJywgJ1InLCAnUycsICdWJywgJ1QnLCAnVycsICdZJywgJ0gnLCAnSycsICdEJywgJ0InLCAnTiddO1xudmFyIENJR0FSX09QUyA9IFsnTScsICdJJywgJ0QnLCAnTicsICdTJywgJ0gnLCAnUCcsICc9JywgJ1gnXTtcblxuXG4vLyBDb3JlIGFsaWdubWVudCBmaWVsZHMgc2hhcmVkIGJldHdlZW4gQmFtQWxpZ25tZW50IGFuZCBUaGluQmFtQWxpZ25tZW50LlxuLy8gVE9ETzogZmlndXJlIG91dCB3aHkgakJpbmFyeSdzICdleHRlbmQnIHR5cGUgZG9lc24ndCB3b3JrIHdpdGggdGhpcyBpbiBUWVBFX1NFVC5cbnZhciBUaGluQWxpZ25tZW50ID0ge1xuICByZWZJRDogJ2ludDMyJywgICAgICAgIC8vIDBcbiAgcG9zOiAnaW50MzInLCAgICAgICAgICAvLyA0XG4gIGxfcmVhZF9uYW1lOiAndWludDgnLCAgLy8gOFxuICBNQVBROiAndWludDgnLCAgICAgICAgIC8vIDlcbiAgYmluOiAndWludDE2JywgICAgICAgICAvLyAxMFxuICBuX2NpZ2FyX29wOiAndWludDE2JywgIC8vIDEyXG4gIEZMQUc6ICd1aW50MTYnLCAgICAgICAgLy8gMTRcbiAgbF9zZXE6ICdpbnQzMicsICAgICAgICAvLyAxNlxuICBuZXh0X3JlZklEOiAnaW50MzInLCAgIC8vIDIwXG4gIG5leHRfcG9zOiAnaW50MzInLCAgICAgLy8gMjRcbiAgdGxlbjogJ2ludDMyJyAgICAgICAgICAvLyAyOFxuICAvLyBsZW5ndGggb2YgZml4ZWQtc2l6ZSBoZWFkZXIgPSAzMiBieXRlc1xufTtcblxudmFyIEZsYWdzID0ge1xuICBSRUFEX1BBSVJFRDogMHgxLFxuICBQUk9QRVJfUEFJUjogMHgyLFxuICBSRUFEX1VOTUFQUEVEOiAweDQsXG4gIE1BVEVfVU5NQVBQRUQ6IDB4OCxcbiAgUkVBRF9TVFJBTkQ6IDB4MTAsXG4gIE1BVEVfU1RSQU5EOiAweDIwLFxuICBGSVJTVF9PRl9QQUlSOiAweDQwLFxuICBTRUNPTkRfT0ZfUEFJUjogMHg4MCxcbiAgTk9UX1BSSU1BUllfQUxJR05NRU5UOiAweDEwMCxcbiAgUkVBRF9GQUlMU19WRU5ET1JfUVVBTElUWV9DSEVDSzogMHgyMDAsXG4gIERVUExJQ0FURV9SRUFEOiAweDQwMCxcbiAgU1VQUExFTUVOVEFSWV9BTElHTk1FTlQ6IDB4ODAwXG59O1xuXG52YXIgVGhpY2tBbGlnbm1lbnQgPSBfLmV4dGVuZChfLmNsb25lKFRoaW5BbGlnbm1lbnQpLCB7XG4gIHJlYWRfbmFtZTogW251bGxTdHJpbmcsICdsX3JlYWRfbmFtZSddLFxuICBjaWdhcjogWydhcnJheScsICdDaWdhck9wJywgJ25fY2lnYXJfb3AnXSxcbiAgc2VxOiBbJ0ZvdXJCaXRTZXF1ZW5jZScsICdsX3NlcSddLFxuICBxdWFsOiBbJ2FycmF5JywgJ3VpbnQ4JywgJ2xfc2VxJ10sICAvLyAyNTUgPSB1bmtub3duXG4gIGF1eGlsaWFyeTogWydhcnJheScsIHtcbiAgICB0YWc6IFsnc3RyaW5nJywgMl0sXG4gICAgdmFsX3R5cGU6ICdjaGFyJyxcbiAgICB2YWx1ZTogWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ0InLCB7XG4gICAgICAgICAgICAgdmFsX3R5cGU6ICdjaGFyJyxcbiAgICAgICAgICAgICBudW1fdmFsdWVzOiAnaW50MzInLFxuICAgICAgICAgICAgIHZhbHVlczogWydhcnJheScsICdBdXhpbGlhcnlWYWx1ZScsICdudW1fdmFsdWVzJ11cbiAgICAgICAgICAgIH0sICdBdXhpbGlhcnlWYWx1ZSddXG4gIH1dICAvLyBnb2VzIHVudGlsIHRoZSBlbmQgb2YgdGhlIGJsb2NrXG59KTtcblxudmFyIFRZUEVfU0VUOiBhbnkgPSB7XG4gICdqQmluYXJ5LmxpdHRsZUVuZGlhbic6IHRydWUsXG5cbiAgJ0JhbUhlYWRlcic6IHtcbiAgICBfbWFnaWM6IFsnY29uc3QnLCBbJ3N0cmluZycsIDRdLCAnQkFNXFx1MDAwMScsIHRydWVdLFxuICAgIGxfdGV4dDogJ2ludDMyJyxcbiAgICB0ZXh0OiBbJ3N0cmluZycsICdsX3RleHQnXSxcbiAgICBuX3JlZjogJ2ludDMyJyxcbiAgICByZWZlcmVuY2VzOiBbJ2FycmF5Jywge1xuICAgICAgbF9uYW1lOiAnaW50MzInLFxuICAgICAgbmFtZTogW251bGxTdHJpbmcsICdsX25hbWUnXSxcbiAgICAgIGxfcmVmOiAnaW50MzInXG4gICAgfSwgJ25fcmVmJ11cbiAgfSxcblxuICAnQmFtQWxpZ25tZW50Jzoge1xuICAgIGJsb2NrX3NpemU6ICdpbnQzMicsXG4gICAgY29udGVudHM6IFsnYmxvYicsICdibG9ja19zaXplJ11cbiAgfSxcblxuICAvLyBUT0RPOiBtYWtlIGEgXCJjYXNlXCIgY29uc3RydWN0IGZvciBqQmluYXJ5ICYgaW1wbGVtZW50IHRoZSByZXN0IG9mIHRoZXNlLlxuICAnQXV4aWxpYXJ5VmFsdWUnOlxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdBJywgJ2NoYXInLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdjJywgJ2ludDgnLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdDJywgJ3VpbnQ4JyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAncycsICdpbnQxNicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ1MnLCAndWludDE2JyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnaScsICdpbnQzMicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ0knLCAndWludDMyJyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnZicsICdmbG9hdDMyJyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnWicsICdzdHJpbmcwJyxcbiAgICAvLyBUT0RPOiAnSCcgPSBieXRlIGFycmF5IGluIGhleCBmb3JtYXRcbiAgICBbJ3NraXAnLCAwXV1dXV1dXV1dLFxuICBdLFxuXG4gIC8vIFwiQ0lHQVI6IG9wIGxlbjw8NHxvcC4g4oCYTUlETlNIUD1Y4oCZ4oaS4oCYMDEyMzQ1Njc44oCZXCJcbiAgLy8gVE9ETzogaXQgbWF5IGJlIHBvc3NpYmxlIHRvIHJlYWQgdGhpcyBkZWNsYXJhdGl2ZWx5IHdpdGggYSBiaXRmaWVsZCB0eXBlLlxuICAnQ2lnYXJPcCc6IGpCaW5hcnkuVGVtcGxhdGUoe1xuICAgIGJhc2VUeXBlOiAndWludDMyJyxcbiAgICByZWFkKGNvbnRleHQpIHtcbiAgICAgIHZhciB2ID0gdGhpcy5iYXNlUmVhZCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVuZ3RoOiB2ID4+IDQsXG4gICAgICAgIG9wOiBDSUdBUl9PUFNbdiAmIDB4Zl1cbiAgICAgIH07XG4gICAgfVxuICB9KSxcblxuICAvLyBcIjQtYml0IGVuY29kZWQgcmVhZDog4oCYPUFDTUdSU1ZUV1lIS0RCTuKAmeKGkiBbMCwgMTVdOyBvdGhlciBjaGFyYWN0ZXJzIG1hcHBlZFxuICAvLyB0byDigJhO4oCZOyBoaWdoIG55YmJsZSBmaXJzdCAoMXN0IGJhc2UgaW4gdGhlIGhpZ2hlc3QgNC1iaXQgb2YgdGhlIDFzdCBieXRlKVwiXG4gICdGb3VyQml0U2VxdWVuY2UnOiBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgICBzZXRQYXJhbXMobGVuZ3RoRmllbGQpIHtcbiAgICAgIHRoaXMubGVuZ3RoRmllbGQgPSBsZW5ndGhGaWVsZDtcbiAgICAgIHZhciBudW1CeXRlcyA9IGN0eCA9PiBNYXRoLmZsb29yKCgrY3R4W2xlbmd0aEZpZWxkXSArIDEpIC8gMik7XG4gICAgICB0aGlzLmJhc2VUeXBlID0gWydhcnJheScsICd1aW50OCcsIG51bUJ5dGVzXTtcbiAgICB9LFxuICAgIHJlYWQoY3R4KSB7XG4gICAgICB2YXIgbnVtQmFzZXMgPSArY3R4W3RoaXMubGVuZ3RoRmllbGRdO1xuICAgICAgdmFyIHZhbHMgPSB0aGlzLmJhc2VSZWFkKCk7XG4gICAgICByZXR1cm4gdmFscy5tYXAoKGIsIGkpID0+IHtcbiAgICAgICAgcmV0dXJuIFNFUVVFTkNFX1ZBTFVFU1tiID4+IDRdICtcbiAgICAgICAgICAgICAgICgyICogaSArIDEgPCBudW1CYXNlcyA/IFNFUVVFTkNFX1ZBTFVFU1tiICYgMHhmXSA6ICcnKTtcbiAgICAgIH0pLmpvaW4oJycpO1xuICAgIH1cbiAgfSksXG5cbiAgJ0JhbUZpbGUnOiB7XG4gICAgaGVhZGVyOiAnQmFtSGVhZGVyJyxcbiAgICBhbGlnbm1lbnRzOiBbJ2FycmF5JywgJ0JhbUFsaWdubWVudCddXG4gIH0sXG5cbiAgLy8gQkFJIGluZGV4IGZvcm1hdHNcbiAgLy8gU2VlIGh0dHBzOi8vc2FtdG9vbHMuZ2l0aHViLmlvL2h0cy1zcGVjcy9TQU12MS5wZGZcbiAgJ1ZpcnR1YWxPZmZzZXQnOiBqQmluYXJ5LlRlbXBsYXRlKHtcbiAgICBiYXNlVHlwZTogJ3VpbnQ2NCcsXG4gICAgcmVhZCgpIHtcbiAgICAgIC8vIFF1b3RoIEhlbmcgTGk6IHU2NCA9IGNvZmZzZXQ8PDE2fHVvZmZzZXRcbiAgICAgIHZhciB1NjQgPSB0aGlzLmJhc2VSZWFkKCk7XG4gICAgICByZXR1cm4gbmV3IFZpcnR1YWxPZmZzZXQoXG4gICAgICAgIC8vIG9mZnNldCBvZiBiZWdpbm5pbmcgb2YgZ3ppcCBibG9jayBpbiB0aGUgY29tcHJlc3NlZCBmaWxlLlxuICAgICAgICB1NjQuaGkgKiA2NTUzNiArICh1NjQubG8gPj4+IDE2KSxcbiAgICAgICAgLy8gb2Zmc2V0IG9mIGRhdGEgd2l0aGluIHRoZSBkZWNvbXByZXNzZWQgYmxvY2tcbiAgICAgICAgdTY0LmxvICYgMHhmZmZmXG4gICAgICApO1xuICAgIH1cbiAgfSksXG5cbiAgJ0NodW5rc0FycmF5JzogWydhcnJheScsIHtcbiAgICBjaHVua19iZWc6ICdWaXJ0dWFsT2Zmc2V0JyxcbiAgICBjaHVua19lbmQ6ICdWaXJ0dWFsT2Zmc2V0J1xuICB9XSxcblxuICAnSW50ZXJ2YWxzQXJyYXknOiBbJ2FycmF5JywgJ1ZpcnR1YWxPZmZzZXQnXSxcblxuICAnQmFpSW5kZXgnOiB7XG4gICAgbl9iaW46ICdpbnQzMicsXG4gICAgYmluczogWydhcnJheScsIHtcbiAgICAgIGJpbjogJ3VpbnQzMicsXG4gICAgICBuX2NodW5rOiAnaW50MzInLFxuICAgICAgY2h1bmtzOiBbJ2Jsb2InLCBjdHggPT4gMTYgKiBjdHgubl9jaHVua10sXG4gICAgICAvLyBQYXJzaW5nIGlzIGRlZmVycmVkIGFzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLiBUaGUgdHlwZSBpcyByZWFsbHk6XG4gICAgICAvLyBjaHVua3M6IFsnYXJyYXknLCB7XG4gICAgICAvLyAgIGNodW5rX2JlZzogJ1ZpcnR1YWxPZmZzZXQnLFxuICAgICAgLy8gICBjaHVua19lbmQ6ICdWaXJ0dWFsT2Zmc2V0J1xuICAgICAgLy8gfSwgJ25fY2h1bmsnXVxuICAgIH0sICduX2JpbiddLFxuICAgIG5faW50djogJ2ludDMyJyxcbiAgICBpbnRlcnZhbHM6IFsnYmxvYicsIGN0eCA9PiA4ICogY3R4Lm5faW50dl1cbiAgICAvLyBQYXJzaW5nIGlzIGRlZmVycmVkIGFzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLiBUaGUgdHlwZSBpcyByZWFsbHk6XG4gICAgLy8gaW50ZXJ2YWxzOiBbJ2FycmF5JywgJ1ZpcnR1YWxPZmZzZXQnLCAnbl9pbnR2J11cbiAgfSxcblxuICAnQmFpRmlsZSc6IHtcbiAgICBtYWdpYzogWydjb25zdCcsIFsnc3RyaW5nJywgNF0sICdCQUlcXHUwMDAxJ10sXG4gICAgbl9yZWY6ICdpbnQzMicsXG4gICAgaW5kaWNlczogWydhcnJheScsICdCYWlJbmRleCcsICduX3JlZiddLFxuICAgIG5fbm9fY29vcjogdWludDY0bmF0aXZlICAvLyBzcGVjIHNheXMgb3B0aW9uYWwsIGJ1dCBpdCdzIGFsd2F5cyB0aGVyZS5cbiAgfVxufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IHtUWVBFX1NFVCwgVGhpbkFsaWdubWVudCwgVGhpY2tBbGlnbm1lbnQsIEZsYWdzfTtcbiIsIi8qKlxuICogQkJJIGlzIHRoZSBzaGFyZWQgc3RydWN0dXJlIGJldHdlZW4gYmlnQmVkIGFuZCBiaWdXaWcuXG4gKiBUaGVzZSBzdHJ1Y3R1cmVzIGFyZSBiYXNlZCBvbiBVQ1NDJ3Mgc3JjL2luYy9iYmlGaWxlLmhcbiAqIEBmbG93XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQge3R5cGVBdE9mZnNldH0gZnJvbSAnLi9oZWxwZXJzJztcblxudmFyIFRZUEVfU0VUID0ge1xuICAnakJpbmFyeS5saXR0bGVFbmRpYW4nOiB0cnVlLFxuXG4gICdIZWFkZXInOiB7XG4gICAgX21hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4ODc4OUYyRUIsIHRydWVdLFxuICAgIHZlcnNpb246ICd1aW50MTYnLFxuICAgIHpvb21MZXZlbHM6ICd1aW50MTYnLFxuICAgIGNocm9tb3NvbWVUcmVlT2Zmc2V0OiAndWludDY0JyxcbiAgICB1bnpvb21lZERhdGFPZmZzZXQ6ICd1aW50NjQnLFxuICAgIHVuem9vbWVkSW5kZXhPZmZzZXQ6ICd1aW50NjQnLFxuICAgIGZpZWxkQ291bnQ6ICd1aW50MTYnLFxuICAgIGRlZmluZWRGaWVsZENvdW50OiAndWludDE2JyxcbiAgICAvLyAwIGlmIG5vIGF1dG9TcWwgaW5mb3JtYXRpb25cbiAgICBhdXRvU3FsT2Zmc2V0OiAndWludDY0JyxcbiAgICB0b3RhbFN1bW1hcnlPZmZzZXQ6ICd1aW50NjQnLFxuICAgIC8vIFNpemUgb2YgdW5jb21wcmVzc2lvbiBidWZmZXIuICAwIGlmIHVuY29tcHJlc3NlZC5cbiAgICB1bmNvbXByZXNzQnVmU2l6ZTogJ3VpbnQzMicsXG4gICAgLy8gT2Zmc2V0IHRvIGhlYWRlciBleHRlbnNpb24gMCBpZiBubyBzdWNoIGV4dGVuc2lvblxuICAgIC8vIFRPRE86IHN1cHBvcnQgZXh0ZW5kZWQgaGVhZGVycyAobm90IHVzZWQgaW4gZW5zR2VuZS5iYilcbiAgICBleHRlbnNpb25PZmZzZXQ6ICd1aW50NjQnLFxuICAgIHpvb21IZWFkZXJzOiBbJ2FycmF5JywgJ1pvb21IZWFkZXInLCAnem9vbUxldmVscyddLFxuXG4gICAgdG90YWxTdW1tYXJ5OiB0eXBlQXRPZmZzZXQoJ1RvdGFsU3VtbWFyeScsICd0b3RhbFN1bW1hcnlPZmZzZXQnKSxcbiAgICBjaHJvbW9zb21lVHJlZTogdHlwZUF0T2Zmc2V0KCdCUGx1c1RyZWUnLCAnY2hyb21vc29tZVRyZWVPZmZzZXQnKVxuICB9LFxuXG4gICdUb3RhbFN1bW1hcnknOiB7XG4gICAgYmFzZXNDb3ZlcmVkOiAndWludDY0JyxcbiAgICBtaW5WYWw6ICdmbG9hdDY0JywgICAgIC8vIGZvciBiaWdCZWQgbWluaW11bSBkZXB0aCBvZiBjb3ZlcmFnZVxuICAgIG1heFZhbDogJ2Zsb2F0NjQnLCAgICAgLy8gZm9yIGJpZ0JlZCBtYXhpbXVtIGRlcHRoIG9mIGNvdmVyYWdlXG4gICAgc3VtRGF0YTogJ2Zsb2F0NjQnLCAgICAvLyBmb3IgYmlnQmVkIHN1bSBvZiBjb3ZlcmFnZVxuICAgIHN1bVNxdWFyZWQ6ICdmbG9hdDY0JyAgLy8gZm9yIGJpZ0JlZCBzdW0gb2YgY292ZXJhZ2Ugc3F1YXJlZFxuICB9LFxuXG4gICdab29tSGVhZGVyJzoge1xuICAgIHJlZHVjdGlvbkxldmVsOiAndWludDMyJyxcbiAgICBfcmVzZXJ2ZWQ6ICd1aW50MzInLFxuICAgIGRhdGFPZmZzZXQ6ICd1aW50NjQnLFxuICAgIGluZGV4T2Zmc2V0OiAndWludDY0J1xuICB9LFxuXG4gICdCUGx1c1RyZWUnOiB7XG4gICAgbWFnaWM6IFsnY29uc3QnLCAndWludDMyJywgMHg3OENBOEM5MSwgdHJ1ZV0sXG4gICAgLy8gTnVtYmVyIG9mIGNoaWxkcmVuIHBlciBibG9jayAobm90IGJ5dGUgc2l6ZSBvZiBibG9jaylcbiAgICBibG9ja1NpemU6ICd1aW50MzInLFxuICAgIC8vIE51bWJlciBvZiBzaWduaWZpY2FudCBieXRlcyBpbiBrZXlcbiAgICBrZXlTaXplOiAndWludDMyJyxcbiAgICAvLyBOdW1iZXIgb2YgYnl0ZXMgaW4gdmFsdWVcbiAgICB2YWxTaXplOiAndWludDMyJyxcbiAgICAvLyBOdW1iZXIgb2YgaXRlbXMgaW4gaW5kZXhcbiAgICBpdGVtQ291bnQ6ICd1aW50NjQnLFxuICAgIF9yZXNlcnZlZDI6IFsnc2tpcCcsIDRdLFxuICAgIF9yZXNlcnZlZDM6IFsnc2tpcCcsIDRdLFxuICAgIG5vZGVzOiAnQlBsdXNUcmVlTm9kZScgIC8vIFsnYXJyYXknLCAnQlBsdXNUcmVlTm9kZScsICdpdGVtQ291bnQnXVxuICB9LFxuXG4gIC8vIFRPRE86IG5vbi1sZWFmIG5vZGVzIGFyZSBwb2ludGluZyBvbmx5IHRvIHRoZSBwbGFjZSBpbiBtZW1vcnksIG1heWJlIHRoZXJlIGlzIGEgYmV0dGVyIHdheSB0byBkbyBpdCB3aXRoIGpCaW5hcnlcbiAgLy8gIGluc3RlYWQgb2YgbWFudWFsbHkgcGFyc2luZyB0aGUgdHJlZSBsYXRlciBvbiAoY2hlY2sgZ2VuZXJhdGVDb250aWdNYXAgbWV0aG9kIGluIEJpZ0JlZClcbiAgJ0JQbHVzVHJlZU5vZGUnOiB7XG4gICAgaXNMZWFmOiAndWludDgnLCAgLy8gMSA9IHllcywgMCA9IG5vXG4gICAgX3Jlc2VydmVkOiAndWludDgnLFxuICAgIGNvdW50OiAndWludDE2JyxcbiAgICBjb250ZW50czogWydhcnJheScsIFsnaWYnLCAnaXNMZWFmJywge1xuICAgICAga2V5OiBbJ3N0cmluZycsICdrZXlTaXplJ10sXG4gICAgICAvLyBOb3RlOiBiaWdCZWQgYWxsb3dzIG1vcmUgZ2VuZXJhbCB2YWx1ZXM7IHRoaXMgaXMgd2hhdCBFbnNlbWJsIHVzZXMuXG4gICAgICAvLyB2YWx1ZTogWydzdHJpbmcnLCAndmFsU2l6ZSddXG4gICAgICBpZDogJ3VpbnQzMicsXG4gICAgICBzaXplOiAndWludDMyJ1xuICAgIH0sIHtcbiAgICAgIGtleTogWydzdHJpbmcnLCAna2V5U2l6ZSddLFxuICAgICAgb2Zmc2V0OiAndWludDY0J1xuICAgIH1dLCAnY291bnQnXVxuICB9LFxuXG4gICdDaXJUcmVlJzoge1xuICAgIF9tYWdpYzogWydjb25zdCcsICd1aW50MzInLCAweDI0NjhBQ0UwLCB0cnVlXSxcbiAgICBibG9ja1NpemU6ICd1aW50MzInLFxuICAgIGl0ZW1Db3VudDogJ3VpbnQ2NCcsXG4gICAgc3RhcnRDaHJvbUl4OiAndWludDMyJyxcbiAgICBzdGFydEJhc2U6ICd1aW50MzInLFxuICAgIGVuZENocm9tSXg6ICd1aW50MzInLFxuICAgIGVuZEJhc2U6ICd1aW50MzInLFxuICAgIGZpbGVTaXplOiAndWludDY0JyxcbiAgICBpdGVtc1BlclNsb3Q6ICd1aW50MzInLFxuICAgIF9yZXNlcnZlZDogWydza2lwJywgNF0sXG4gICAgYmxvY2tzOiAnQ2lyTm9kZSdcbiAgfSxcblxuICAnQ2lyTm9kZSc6IHtcbiAgICBpc0xlYWY6ICd1aW50OCcsICAvLyAxID0geWVzLCAwID0gbm9cbiAgICBfcmVzZXJ2ZWQ6ICd1aW50OCcsXG4gICAgY291bnQ6ICd1aW50MTYnLFxuICAgIGNvbnRlbnRzOiBbXG4gICAgICAnYXJyYXknLCBbXG4gICAgICAgICdpZicsICdpc0xlYWYnLCAnTGVhZkRhdGEnLCAnTm9uTGVhZkRhdGEnXG4gICAgICBdLFxuICAgICAgJ2NvdW50J1xuICAgIF1cbiAgfSxcblxuICAnTGVhZkRhdGEnOiB7XG4gICAgc3RhcnRDaHJvbUl4OiAndWludDMyJyxcbiAgICBzdGFydEJhc2U6ICd1aW50MzInLFxuICAgIGVuZENocm9tSXg6ICd1aW50MzInLFxuICAgIGVuZEJhc2U6ICd1aW50MzInLFxuICAgIG9mZnNldDogJ3VpbnQ2NCcsXG4gICAgc2l6ZTogJ3VpbnQ2NCdcbiAgfSxcblxuICAnTm9uTGVhZkRhdGEnOiB7XG4gICAgc3RhcnRDaHJvbUl4OiAndWludDMyJyxcbiAgICBzdGFydEJhc2U6ICd1aW50MzInLFxuICAgIGVuZENocm9tSXg6ICd1aW50MzInLFxuICAgIGVuZEJhc2U6ICd1aW50MzInLFxuICAgIG9mZnNldDogJ3VpbnQ2NCcsXG4gIH0sXG5cbiAgJ0JlZEVudHJ5Jzoge1xuICAgICdjaHJJZCc6ICd1aW50MzInLFxuICAgICdzdGFydCc6ICd1aW50MzInLFxuICAgICdzdG9wJzogJ3VpbnQzMicsXG4gICAgJ3Jlc3QnOiAnc3RyaW5nMCdcbiAgfSxcblxuICAnQmVkQmxvY2snOiBbJ2FycmF5JywgJ0JlZEVudHJ5J10sXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtUWVBFX1NFVH07XG4iLCIvKipcbiAqIEhlbHBlcnMgZm9yIHNwZWNpZnlpbmcgZmlsZSBmb3JtYXRzIHVzaW5nIGpCaW5hcnkuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBqQmluYXJ5IGZyb20gJ2piaW5hcnknO1xuXG4vLyBSZWFkIGEgakJpbmFyeSB0eXBlIGF0IGFuIG9mZnNldCBpbiB0aGUgYnVmZmVyIHNwZWNpZmllZCBieSBhbm90aGVyIGZpZWxkLlxuZnVuY3Rpb24gdHlwZUF0T2Zmc2V0KGJhc2VUeXBlOiBhbnksIG9mZnNldEZpZWxkTmFtZTogc3RyaW5nKTogYW55IHtcbiAgcmV0dXJuIGpCaW5hcnkuVGVtcGxhdGUoe1xuICAgICAgYmFzZVR5cGU6IGJhc2VUeXBlLFxuICAgICAgcmVhZDogZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICBpZiAoK2NvbnRleHRbb2Zmc2V0RmllbGROYW1lXSA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmJpbmFyeS5yZWFkKHRoaXMuYmFzZVR5cGUsICtjb250ZXh0W29mZnNldEZpZWxkTmFtZV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG59XG5cbi8vIEEgYmxvY2sgb2YgZml4ZWQgbGVuZ3RoIGNvbnRhaW5pbmcgc29tZSBvdGhlciB0eXBlLlxuLy8gVE9ETzogd3JpdGUgdGhpcyB1c2luZyAnYmluYXJ5JyB0eXBlIChsaWtlIG51bGxTdHJpbmcpLlxudmFyIHNpemVkQmxvY2sgPSBqQmluYXJ5LlR5cGUoe1xuICBwYXJhbXM6IFsnaXRlbVR5cGUnLCAnbGVuZ3RoRmllbGQnXSxcbiAgcmVzb2x2ZTogZnVuY3Rpb24oZ2V0VHlwZSkge1xuICAgIHRoaXMuaXRlbVR5cGUgPSBnZXRUeXBlKHRoaXMuaXRlbVR5cGUpO1xuICB9LFxuICByZWFkOiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuYmluYXJ5LnRlbGwoKTtcbiAgICB2YXIgbGVuID0gK2NvbnRleHRbdGhpcy5sZW5ndGhGaWVsZF07XG4gICAgdGhpcy5iaW5hcnkuc2tpcChsZW4pO1xuICAgIHJldHVybiB0aGlzLmJpbmFyeS5zbGljZShwb3MsIHBvcyArIGxlbikucmVhZCh0aGlzLml0ZW1UeXBlKTtcbiAgfVxufSk7XG5cbi8vIEEgZml4ZWQtbGVuZ3RoIHN0cmluZyBmaWVsZCB3aGljaCBpcyBhbHNvIG51bGwtdGVybWluYXRlZC5cbi8vIFRPRE86IHNob3VsZCBiZSBbc2l6ZWRCbG9jaywgJ3N0cmluZzAnLCBsZW5ndGhGaWVsZF1cbi8vIFRPRE86IGZpbGUgYSBidWcgdXBzdHJlYW0gb24gJ3N0cmluZzAnLCB3aGljaCBzaG91bGQgZG8gd2hhdCB0aGlzIGRvZXMuXG52YXIgbnVsbFN0cmluZyA9IGpCaW5hcnkuVGVtcGxhdGUoe1xuICBzZXRQYXJhbXMobGVuZ3RoRmllbGQpIHtcbiAgICB0aGlzLmJhc2VUeXBlID0gWydiaW5hcnknLCBsZW5ndGhGaWVsZF07XG4gIH0sXG4gIHJlYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlYWQoKS5yZWFkKCdzdHJpbmcwJyk7XG4gIH1cbn0pO1xuXG5cbi8vIExpa2UgJ3VpbnQ2NCcsIGJ1dCBhc3NlcnRzIHRoYXQgdGhlIG51bWJlciBpcyA8Ml41MyAoaS5lLiBmaXRzIHByZWNpc2VseSBpblxuLy8gYSBmbG9hdCkgYW5kIHJlYWRzIGl0IGFzIGEgcGxhaW4tb2xkLW51bWJlci4gVGhpcyBpcyBhIHBlcmZvcm1hbmNlIGFuZFxuLy8gZGVidWdnaW5nIHdpbiwgc2luY2UgcGxhaW4gbnVtYmVycyBzaG93IHVwIG1vcmUgbmljZWx5IGluIHRoZSBjb25zb2xlLlxudmFyIHVpbnQ2NG5hdGl2ZSA9IGpCaW5hcnkuVGVtcGxhdGUoe1xuICBiYXNlVHlwZTogJ3VpbnQ2NCcsXG4gIHJlYWQoKSB7XG4gICAgdmFyIG51bSA9IHRoaXMuYmFzZVJlYWQoKSxcbiAgICAgICAgdiA9ICtudW07XG4gICAgLy8gVGVzdCBmb3Igd3JhcGFyb3VuZCAmIHJvdW5kb2ZmXG4gICAgaWYgKHYgPCAwIHx8IDEgKyB2ID09IHYpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBOdW1iZXIgb3V0IG9mIHByZWNpc2UgZmxvYXRpbmcgcG9pbnQgcmFuZ2U6ICR7bnVtfWApO1xuICAgIH1cbiAgICByZXR1cm4gK251bTtcbiAgfVxufSk7XG5cblxuLy8gVHlwZSByZXR1cm5lZCBieSBsYXp5QXJyYXkgaGVscGVyLCBiZWxvdy5cbi8vIEhhcyBhIC5sZW5ndGggcHJvcGVydHksIGEgLmdldCgpIG1ldGhvZCBhbmQgYSAuZ2V0QWxsKCkgbWV0aG9kLlxuY2xhc3MgTGF6eUFycmF5IHtcbiAgYnl0ZXNQZXJJdGVtOiBudW1iZXI7XG4gIGpiOiBPYmplY3Q7XG4gIGl0ZW1UeXBlOiBPYmplY3Q7XG4gIGxlbmd0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGpiLCBieXRlc1Blckl0ZW06IG51bWJlciwgaXRlbVR5cGUpIHtcbiAgICB0aGlzLmJ5dGVzUGVySXRlbSA9IGJ5dGVzUGVySXRlbTtcbiAgICB0aGlzLmpiID0gamI7XG4gICAgdGhpcy5pdGVtVHlwZSA9IGl0ZW1UeXBlO1xuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5qYi52aWV3LmJ5dGVMZW5ndGggLyB0aGlzLmJ5dGVzUGVySXRlbTtcbiAgfVxuXG4gIGdldChpKSB7XG4gICAgdGhpcy5qYi5zZWVrKGkgKiB0aGlzLmJ5dGVzUGVySXRlbSk7XG4gICAgcmV0dXJuIHRoaXMuamIucmVhZCh0aGlzLml0ZW1UeXBlKTtcbiAgfVxuXG4gIGdldEFsbCgpIHtcbiAgICB0aGlzLmpiLnNlZWsoMCk7XG4gICAgcmV0dXJuIHRoaXMuamIucmVhZChbJ2FycmF5JywgdGhpcy5pdGVtVHlwZSwgdGhpcy5sZW5ndGhdKTtcbiAgfVxufVxuXG5cbi8vIExpa2UgakJpbmFyeSdzICdhcnJheScsIGJ1dCBkZWZlcnMgcGFyc2luZyBvZiBpdGVtcyB1bnRpbCB0aGV5IGFyZSBhY2Nlc3NlZC5cbi8vIFRoaXMgY2FuIHJlc3VsdCBpbiBhIGh1Z2Ugc3BlZWR1cCBmb3IgbGFyZ2UgYXJyYXlzLiBTZWUgTGF6eUFycmF5IGZvciB0aGVcbi8vIHJlc3VsdGluZyB0eXBlLlxudmFyIGxhenlBcnJheSA9IGpCaW5hcnkuVHlwZSh7XG4gIHBhcmFtczogWydpdGVtVHlwZScsICdieXRlc1Blckl0ZW0nLCAnbnVtSXRlbXMnXSxcbiAgcmVhZCgpIHtcbiAgICB2YXIgbnVtSXRlbXMgPSB0aGlzLnRvVmFsdWUodGhpcy5udW1JdGVtcyk7XG4gICAgdmFyIGJ5dGVzUGVySXRlbSA9IHRoaXMudG9WYWx1ZSh0aGlzLmJ5dGVzUGVySXRlbSk7XG4gICAgaWYgKG51bUl0ZW1zID09PSB1bmRlZmluZWQgfHwgYnl0ZXNQZXJJdGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93ICdieXRlc1Blckl0ZW0gYW5kIG51bUl0ZW1zIG11c3QgYmUgc2V0IGZvciBsYXp5QXJyYXknO1xuICAgIH1cbiAgICB2YXIgcG9zID0gdGhpcy5iaW5hcnkudGVsbCgpO1xuICAgIHZhciBsZW4gPSBudW1JdGVtcyAqIGJ5dGVzUGVySXRlbTtcbiAgICB2YXIgYnVmZmVyID0gdGhpcy5iaW5hcnkuc2xpY2UocG9zLCBwb3MgKyBsZW4pO1xuICAgIHRoaXMuYmluYXJ5LnNraXAobGVuKTtcbiAgICByZXR1cm4gbmV3IExhenlBcnJheShidWZmZXIsIGJ5dGVzUGVySXRlbSwgdGhpcy5pdGVtVHlwZSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHt0eXBlQXRPZmZzZXQsIHNpemVkQmxvY2ssIG51bGxTdHJpbmcsIHVpbnQ2NG5hdGl2ZSwgbGF6eUFycmF5fTtcbiIsIi8qKlxuICogVHdvQml0IGlzIGEgcGFja2VkIGdlbm9tZSBmb3JtYXQuXG4gKiBTZWUgaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9GQVEvRkFRZm9ybWF0Lmh0bWwjZm9ybWF0N1xuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBUWVBFX1NFVCA9IHtcbiAgJ2pCaW5hcnkubGl0dGxlRW5kaWFuJzogdHJ1ZSxcblxuICAnSGVhZGVyJzoge1xuICAgIG1hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4MUE0MTI3NDMsIHRydWVdLFxuICAgIHZlcnNpb246IFsnY29uc3QnLCAndWludDMyJywgMCwgdHJ1ZV0sXG4gICAgc2VxdWVuY2VDb3VudDogJ3VpbnQzMicsXG4gICAgcmVzZXJ2ZWQ6ICd1aW50MzInLFxuXG4gICAgc2VxdWVuY2VzOiBbJ2FycmF5JywgJ1NlcXVlbmNlSGVhZGVyJywgJ3NlcXVlbmNlQ291bnQnXVxuICB9LFxuXG4gICdTZXF1ZW5jZUhlYWRlcic6IHtcbiAgICBuYW1lU2l6ZTogJ3VpbnQ4JyxcbiAgICBuYW1lOiBbJ3N0cmluZycsICduYW1lU2l6ZSddLFxuICAgIG9mZnNldDogJ3VpbnQzMidcbiAgfSxcblxuICAnU2VxdWVuY2VSZWNvcmQnOiB7XG4gICAgZG5hU2l6ZTogJ3VpbnQzMicsXG4gICAgbkJsb2NrQ291bnQ6ICd1aW50MzInLFxuICAgIG5CbG9ja1N0YXJ0czogWydhcnJheScsICd1aW50MzInLCAnbkJsb2NrQ291bnQnXSxcbiAgICBuQmxvY2tTaXplczogWydhcnJheScsICd1aW50MzInLCAnbkJsb2NrQ291bnQnXSxcbiAgICAvLyBUaGUgbWFza3MgY2FuIGJlIHF1aXRlIGxhcmdlICh+Mk1CIGZvciBjaHIxKSBhbmQgd2UgbW9zdGx5IGRvbid0IGNhcmVcbiAgICAvLyBhYm91dCB0aGVtLiAgU28gd2UgaWdub3JlIHRoZW0sIGJ1dCB3ZSBkbyBuZWVkIHRvIGtub3cgdGhlaXIgbGVuZ3RoLlxuICAgIG1hc2tCbG9ja0NvdW50OiAndWludDMyJyxcbiAgICAvLyBtYXNrQmxvY2tTdGFydHM6IFsnYXJyYXknLCAndWludDMyJywgJ21hc2tCbG9ja0NvdW50J11cbiAgICAvLyBtYXNrQmxvY2tTaXplczogWydhcnJheScsICd1aW50MzInLCAnbWFza0Jsb2NrQ291bnQnXVxuICAgIC8vIHJlc2VydmVkOiAndWludDMyJ1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtUWVBFX1NFVH07XG4iLCIvKipcbiAqIENsYXNzIGZvciBwYXJzaW5nIGdlbmVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcblxuaW1wb3J0IHR5cGUge1N0cmFuZH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCAge2dhNGdoU3RyYW5kVG9TdHJhbmR9IGZyb20gICcuLi9BbGlnbm1lbnQnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuY2xhc3MgR2VuZSB7XG4gIHBvc2l0aW9uOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBpZDogc3RyaW5nOyAgLy8gdHJhbnNjcmlwdCBJRCwgZS5nLiBcIkVOU1QwMDAwMDI2OTMwNVwiXG4gIHNjb3JlOiBudW1iZXI7XG4gIHN0cmFuZDogU3RyYW5kO1xuICBjb2RpbmdSZWdpb246IEludGVydmFsOyAgLy8gbG9jdXMgb2YgY29kaW5nIHN0YXJ0XG4gIGV4b25zOiBBcnJheTxJbnRlcnZhbD47XG4gIGdlbmVJZDogc3RyaW5nOyAgLy8gZW5zZW1ibCBnZW5lIElEXG4gIG5hbWU6IHN0cmluZzsgIC8vIGh1bWFuLXJlYWRhYmxlIG5hbWUsIGUuZy4gXCJUUDUzXCJcblxuICBjb25zdHJ1Y3RvcihnZW5lOiBPYmplY3QpIHtcbiAgICB0aGlzLnBvc2l0aW9uID0gZ2VuZS5wb3NpdGlvbjtcbiAgICB0aGlzLmlkID0gIGdlbmUuaWQ7XG4gICAgdGhpcy5zY29yZSA9IGdlbmUuc2NvcmU7XG4gICAgdGhpcy5zdHJhbmQgPSBnZW5lLnN0cmFuZDtcbiAgICB0aGlzLmNvZGluZ1JlZ2lvbiA9IGdlbmUuY29kaW5nUmVnaW9uO1xuICAgIHRoaXMuZXhvbnMgPSBnZW5lLmV4b25zO1xuICAgIHRoaXMuZ2VuZUlkID0gZ2VuZS5nZW5lSWQ7XG4gICAgdGhpcy5uYW1lID0gZ2VuZS5uYW1lO1xuICB9XG5cbiAgZ2V0S2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuaWQ7XG4gIH1cblxuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tR0E0R0goZ2E0Z2hHZW5lOiBPYmplY3QpOiBHZW5lIHtcbiAgICB2YXIgcG9zaXRpb24gPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2E0Z2hHZW5lLnJlZmVyZW5jZU5hbWUsIHBhcnNlSW50KGdhNGdoR2VuZS5zdGFydCksIHBhcnNlSW50KGdhNGdoR2VuZS5lbmQpKTtcbiAgICB2YXIgc3RyYW5kID0gZ2E0Z2hTdHJhbmRUb1N0cmFuZChnYTRnaEdlbmUuc3RyYW5kKTtcblxuICAgIC8vIG1ha2UgYSB1bmlxdWUgaWQgZm9yIHRoaXMgR2VuZVxuICAgIHZhciBpZCA9IGdhNGdoR2VuZS5pZCAmJiBnYTRnaEdlbmUuaWQgIT0gXCJcIiA/IGdhNGdoR2VuZS5pZCA6IChnYTRnaEdlbmUuZ2VuZVN5bWJvbCAmJiBnYTRnaEdlbmUuZ2VuZVN5bWJvbCAhPSBcIlwiID8gZ2E0Z2hHZW5lLmdlbmVTeW1ib2wgOiBnYTRnaEdlbmUubmFtZSk7XG5cbiAgICB2YXIgYmxvY2tTdGFydHMgPSBnYTRnaEdlbmUuYXR0cmlidXRlcy5hdHRyLmJsb2NrU3RhcnRzO1xuICAgIHZhciBibG9ja1NpemVzID0gZ2E0Z2hHZW5lLmF0dHJpYnV0ZXMuYXR0ci5ibG9ja1NpemVzO1xuXG4gICAgLy8gcHJvY2VzcyBleG9ucywgaWYgYXZhaWxhYmxlXG4gICAgdmFyICBleG9ucyA9IFtdO1xuXG4gICAgaWYgKGJsb2NrU3RhcnRzICYmIGJsb2NrU2l6ZXMpIHtcbiAgICAgIGlmIChibG9ja1N0YXJ0cy52YWx1ZXMgJiYgYmxvY2tTaXplcy52YWx1ZXMpIHtcbiAgICAgICAgdmFyIGV4b25TdGFydHMgPSBfLm1hcChibG9ja1N0YXJ0cy52YWx1ZXNbMF0uc3RyaW5nVmFsdWUuc3BsaXQoJywnKSwgZiA9PiBwYXJzZUludChmKSk7XG4gICAgICAgIHZhciBleG9uTGVuZ3RocyA9IF8ubWFwKGJsb2NrU2l6ZXMudmFsdWVzWzBdLnN0cmluZ1ZhbHVlLnNwbGl0KCcsJyksIGYgPT4gcGFyc2VJbnQoZikpO1xuXG4gICAgICAgIGV4b25zID0gXy56aXAoZXhvblN0YXJ0cywgZXhvbkxlbmd0aHMpXG4gICAgICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oW3N0YXJ0LCBsZW5ndGhdKSB7XG4gICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnRlcnZhbChwb3NpdGlvbi5zdGFydCgpICsgc3RhcnQsIHBvc2l0aW9uLnN0YXJ0KCkgKyBzdGFydCArIGxlbmd0aCk7XG4gICAgICAgICAgICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0aGlja1N0YXJ0ID0gZ2E0Z2hHZW5lLmF0dHJpYnV0ZXMuYXR0ci50aGlja1N0YXJ0O1xuICAgIHZhciB0aGlja0VuZCA9IGdhNGdoR2VuZS5hdHRyaWJ1dGVzLmF0dHIudGhpY2tFbmQ7XG5cbiAgICB2YXIgY29kaW5nUmVnaW9uID0gbnVsbDtcblxuICAgIGlmICh0aGlja1N0YXJ0LnZhbHVlcyAmJiB0aGlja0VuZC52YWx1ZXMpIHtcbiAgICAgIGNvZGluZ1JlZ2lvbiA9IG5ldyBJbnRlcnZhbChwYXJzZUludCh0aGlja1N0YXJ0LnZhbHVlc1swXS5zdHJpbmdWYWx1ZSksXG4gICAgICAgICAgcGFyc2VJbnQodGhpY2tFbmQudmFsdWVzWzBdLnN0cmluZ1ZhbHVlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvZGluZ1JlZ2lvbiA9IG5ldyBJbnRlcnZhbChwb3NpdGlvbi5zdGFydCgpLCBwb3NpdGlvbi5lbmQoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBHZW5lKHtcbiAgICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICAgIGlkOiBpZCxcbiAgICAgIHNjb3JlOiAxMDAwLFxuICAgICAgc3RyYW5kOiBzdHJhbmQsXG4gICAgICBjb2RpbmdSZWdpb246IGNvZGluZ1JlZ2lvbixcbiAgICAgIGV4b25zOiBleG9ucyxcbiAgICAgIGdlbmVJZDogZ2E0Z2hHZW5lLmdlbmVTeW1ib2wsXG4gICAgICBuYW1lOiBnYTRnaEdlbmUubmFtZVxuICAgIH0pO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiByYW5nZS5pbnRlcnNlY3RzKHRoaXMucG9zaXRpb24pO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gR2VuZTtcbiIsIi8qKlxuICogR2VuZXJpYyBvYmplY3QgdGhhdCBjYW4gYmUgZGlzcGxheWVkLiBUaGlzIGNhbiBiZSBhIGdlbmUsIGZlYXR1cmUgb3IgdmFyaWFudCwgZXRjLlxuICogU2VlIC4uL3Zpei9HZW5lcmljRmVhdHVyZUNhY2hlLmpzXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbi8qanNoaW50IHVudXNlZDpmYWxzZSAqL1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuXG5jbGFzcyBHZW5lcmljRmVhdHVyZSB7XG4gIGlkOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBnRmVhdHVyZTogT2JqZWN0O1xuXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcsIHBvc2l0aW9uOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCBnZW5lcmljRmVhdHVyZTogT2JqZWN0KSB7XG4gICAgdGhpcy5pZCA9IGdlbmVyaWNGZWF0dXJlLmlkO1xuICAgIHRoaXMucG9zaXRpb24gPSBnZW5lcmljRmVhdHVyZS5wb3NpdGlvbjtcbiAgICB0aGlzLmdGZWF0dXJlID0gZ2VuZXJpY0ZlYXR1cmU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHZW5lcmljRmVhdHVyZTtcbiIsIi8qKlxuICogQ2xhc3MgZm9yIHBhcnNpbmcgdmFyaWFudHMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5cbmNsYXNzIFZhcmlhbnQge1xuICBjb250aWc6IHN0cmluZztcbiAgcG9zaXRpb246IG51bWJlcjtcbiAgcmVmOiBzdHJpbmc7XG4gIGFsdDogc3RyaW5nO1xuICBpZDogc3RyaW5nO1xuICAvL3RoaXMgaXMgdGhlIGJpZ2dlc3QgYWxsZWxlIGZyZXF1ZW5jeSBmb3Igc2luZ2xlIHZjZiBlbnRyeVxuICAvL3NpbmdsZSB2Y2YgZW50cnkgbWlnaHQgY29udGFpbiBtb3JlIHRoYW4gb25lIHZhcmlhbnQgbGlrZSB0aGUgZXhhbXBsZSBiZWxvd1xuICAvLzIwIDExMTA2OTYgcnM2MDQwMzU1IEEgRyxUIDY3IFBBU1MgTlM9MjtEUD0xMDtBRj0wLjMzMywwLjY2NztBQT1UO0RCXG4gIG1ham9yRnJlcXVlbmN5OiA/bnVtYmVyO1xuICAvL3RoaXMgaXMgdGhlIHNtYWxsZXN0IGFsbGVsIGZyZXF1ZW5jeSBmb3Igc2luZ2xlIHZjZiBlbnRyeVxuICBtaW5vckZyZXF1ZW5jeTogP251bWJlcjtcbiAgdmNmTGluZTogc3RyaW5nO1xuXG5cbiAgY29uc3RydWN0b3IodmFyaWFudDogT2JqZWN0KSB7XG4gICB0aGlzLmNvbnRpZyA9IHZhcmlhbnQuY29udGlnO1xuICAgdGhpcy5wb3NpdGlvbiA9IHBhcnNlSW50KHZhcmlhbnQucG9zaXRpb24pO1xuICAgdGhpcy5yZWYgPSB2YXJpYW50LnJlZjtcbiAgIHRoaXMuYWx0ID0gdmFyaWFudC5hbHQ7XG4gICB0aGlzLmlkID0gdmFyaWFudC5pZDtcbiAgIHRoaXMubWFqb3JGcmVxdWVuY3kgPSB2YXJpYW50Lm1ham9yRnJlcXVlbmN5O1xuICAgdGhpcy5taW5vckZyZXF1ZW5jeSA9IHZhcmlhbnQubWlub3JGcmVxdWVuY3k7XG4gICB0aGlzLnZjZkxpbmUgPSB2YXJpYW50LnZjZkxpbmU7XG4gIH1cblxuICBzdGF0aWMgZnJvbUdBNEdIKGdhNGdoVmFyaWFudDogT2JqZWN0KTogVmFyaWFudCB7XG4gICByZXR1cm4gbmV3IFZhcmlhbnQoXG4gICAge1xuICAgICBjb250aWc6IGdhNGdoVmFyaWFudC5yZWZlcmVuY2VOYW1lLFxuICAgICBwb3NpdGlvbjogcGFyc2VJbnQoZ2E0Z2hWYXJpYW50LnN0YXJ0KSxcbiAgICAgaWQ6IGdhNGdoVmFyaWFudC5pZCxcbiAgICAgcmVmOiBnYTRnaFZhcmlhbnQucmVmZXJlbmNlQmFzZXMsXG4gICAgIGFsdDogZ2E0Z2hWYXJpYW50LmFsdGVybmF0ZUJhc2VzLFxuICAgICBtYWpvckZyZXF1ZW5jeTogMCxcbiAgICAgbWlub3JGcmVxdWVuY3k6IDAsIC8vIFRPRE8gZXh0cmFjdCB0aGVzZVxuICAgICB2Y2ZMaW5lOiBcIlwiIC8vIFRPRE9cbiAgIH0pO1xuICB9XG5cbiAgaW50ZXJzZWN0cyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiByYW5nZS5pbnRlcnNlY3RzKG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgdGhpcy5wb3NpdGlvbiwgdGhpcy5wb3NpdGlvbiArIDEpKTtcbiAgfVxuXG59XG5cbi8vIEdBNEdIIEdlbm90eXBlIENhbGxcbmNsYXNzIENhbGwge1xuICBjYWxsU2V0TmFtZTogc3RyaW5nO1xuICBnZW5vdHlwZTogbnVtYmVyW107XG4gIGNhbGxTZXRJZDogc3RyaW5nO1xuICBwaGFzZXNldDogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKGNhbGxTZXROYW1lOiBzdHJpbmcsIGdlbm90eXBlOiBudW1iZXJbXSxcbiAgICAgIGNhbGxTZXRJZDogc3RyaW5nLCBwaGFzZXNldDogc3RyaW5nKSB7XG4gICAgICB0aGlzLmNhbGxTZXROYW1lID0gY2FsbFNldE5hbWU7XG4gICAgICB0aGlzLmdlbm90eXBlID0gZ2Vub3R5cGU7XG4gICAgICB0aGlzLmNhbGxTZXRJZCA9IGNhbGxTZXRJZDtcbiAgICAgIHRoaXMucGhhc2VzZXQgPSBwaGFzZXNldDtcbiAgfVxufVxuXG4vLyBob2xkcyB2YXJpYW50IGFuZCBnZW5vdHlwZSBzYW1wbGUgaWRzXG5jbGFzcyBWYXJpYW50Q29udGV4dCB7XG4gIHZhcmlhbnQ6IFZhcmlhbnQ7XG4gIGNhbGxzOiBDYWxsW107XG5cbiAgY29uc3RydWN0b3IodmFyaWFudDogT2JqZWN0LCBjYWxsczogQ2FsbFtdKSB7XG4gICAgdGhpcy52YXJpYW50ID0gdmFyaWFudDtcbiAgICB0aGlzLmNhbGxzID0gY2FsbHM7XG4gIH1cblxuICBpbnRlcnNlY3RzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgdmFyIHRoaXNSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLnZhcmlhbnQuY29udGlnLCB0aGlzLnZhcmlhbnQucG9zaXRpb24sIHRoaXMudmFyaWFudC5wb3NpdGlvbiArIDEpO1xuICAgIHJldHVybiByYW5nZS5pbnRlcnNlY3RzKHRoaXNSYW5nZSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIENhbGwsXG4gIFZhcmlhbnQsXG4gIFZhcmlhbnRDb250ZXh0XG59O1xuIiwiLyoqXG4gKiBGZXRjaGVyL3BhcnNlciBmb3IgVkNGIGZpbGVzLlxuICogVGhpcyBtYWtlcyB2ZXJ5IGxpdHRsZSBlZmZvcnQgdG8gcGFyc2Ugb3V0IGRldGFpbHMgZnJvbSBWQ0YgZW50cmllcy4gSXQganVzdFxuICogZXh0cmFjdHMgQ09OVElHLCBQT1NJVElPTiwgUkVGIGFuZCBBTFQuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBBYnN0cmFjdEZpbGUgZnJvbSAnLi4vQWJzdHJhY3RGaWxlJztcbmltcG9ydCB0eXBlIFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQge0NhbGwsIFZhcmlhbnQsIFZhcmlhbnRDb250ZXh0fSBmcm9tIFwiLi92YXJpYW50XCI7XG5cblxuLy8gVGhpcyBpcyBhIG1pbmltYWxseS1wYXJzZWQgbGluZSBmb3IgZmFjaWxpdGF0aW5nIGJpbmFyeSBzZWFyY2guXG50eXBlIExvY3VzTGluZSA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIGxpbmU6IHN0cmluZztcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFNhbXBsZXMoaGVhZGVyOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcblxuICB2YXIgbGluZSA9IF8uZmlsdGVyKGhlYWRlciwgaCA9PiBoLnN0YXJ0c1dpdGgoXCIjQ0hST01cIikpWzBdLnNwbGl0KCdcXHQnKTtcblxuICAvLyBkcm9wIGZpcnN0IDggdGl0bGVzLiBTZWUgdmNmIGhlYWRlciBzcGVjaWZpY2F0aW9uIDEuMzogaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1ZDRnY0LjIucGRmXG4gIHZhciBzYW1wbGVzID0gbGluZS5zcGxpY2UoOSk7XG5cbiAgcmV0dXJuIHNhbXBsZXM7XG59XG5cblxuZnVuY3Rpb24gZXh0cmFjdExvY3VzTGluZSh2Y2ZMaW5lOiBzdHJpbmcpOiBMb2N1c0xpbmUge1xuICB2YXIgdGFiMSA9IHZjZkxpbmUuaW5kZXhPZignXFx0JyksXG4gICAgICB0YWIyID0gdmNmTGluZS5pbmRleE9mKCdcXHQnLCB0YWIxICsgMSk7XG5cbiAgcmV0dXJuIHtcbiAgICBjb250aWc6IHZjZkxpbmUuc2xpY2UoMCwgdGFiMSksXG4gICAgcG9zaXRpb246IE51bWJlcih2Y2ZMaW5lLnNsaWNlKHRhYjEgKyAxLCB0YWIyKSksXG4gICAgbGluZTogdmNmTGluZVxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIGV4dHJhY3RWYXJpYW50Q29udGV4dChzYW1wbGVzOiBzdHJpbmdbXSwgdmNmTGluZTogc3RyaW5nKTogVmFyaWFudENvbnRleHQge1xuICB2YXIgcGFydHMgPSB2Y2ZMaW5lLnNwbGl0KCdcXHQnKTtcbiAgdmFyIG1heEZyZXF1ZW5jeSA9IG51bGw7XG4gIHZhciBtaW5GcmVxdWVuY3kgPSBudWxsO1xuICB2YXIgY2FsbHMgPSBbXTtcblxuICBpZiAocGFydHMubGVuZ3RoPj03KXtcbiAgICB2YXIgcGFyYW1zID0gcGFydHNbN10uc3BsaXQoJzsnKTsgLy8gcHJvY2VzcyBJTkZPIGZpZWxkXG4gICAgZm9yICh2YXIgaT0wO2k8cGFyYW1zLmxlbmd0aDtpKyspIHtcbiAgICAgIHZhciBwYXJhbSA9IHBhcmFtc1tpXTtcbiAgICAgIGlmIChwYXJhbS5zdGFydHNXaXRoKFwiQUY9XCIpKSB7XG4gICAgICAgIG1heEZyZXF1ZW5jeSA9IDAuMDtcbiAgICAgICAgbWluRnJlcXVlbmN5ID0gMS4wO1xuICAgICAgICB2YXIgZnJlcXVlbmNpZXNTdHJpbmdzID0gcGFyYW0uc3Vic3RyKDMpLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgZm9yICh2YXIgaj0wO2o8ZnJlcXVlbmNpZXNTdHJpbmdzLmxlbmd0aDtqKyspIHtcbiAgICAgICAgICB2YXIgY3VycmVudEZyZXF1ZW5jeSA9IHBhcnNlRmxvYXQoZnJlcXVlbmNpZXNTdHJpbmdzW2pdKTtcbiAgICAgICAgICBtYXhGcmVxdWVuY3kgPSBNYXRoLm1heChtYXhGcmVxdWVuY3ksIGN1cnJlbnRGcmVxdWVuY3kpO1xuICAgICAgICAgIG1pbkZyZXF1ZW5jeSA9IE1hdGgubWluKG1pbkZyZXF1ZW5jeSwgY3VycmVudEZyZXF1ZW5jeSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBwcm9jZXNzIGdlbm90eXBlIGluZm9ybWF0aW9uIGZvciBlYWNoIHNhbXBsZVxuICAgIGlmIChwYXJ0cy5sZW5ndGggPiA5KSB7XG4gICAgICB2YXIgc2FtcGxlX2kgPSAwOyAvLyBrZWVwcyB0cmFjayBvZiB3aGljaCBzYW1wbGUgd2UgYXJlIHByb2Nlc3NpbmdcbiAgICAgIGZvciAoaSA9IDk7IGkgPCBwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZ2Vub3R5cGUgPSBwYXJ0c1tpXS5zcGxpdCgnOicpWzBdLnNwbGl0KFwiL1wiKS5tYXAoaSA9PiBwYXJzZUludChpKSk7XG4gICAgICAgIC8vIFRPRE8gaXMgaXQgZXZlciBub3QgMj9cbiAgICAgICAgaWYgKGdlbm90eXBlLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgaWYgKHBhcnNlSW50KGdlbm90eXBlWzBdKSA9PSAxIHx8IHBhcnNlSW50KGdlbm90eXBlWzFdKSA9PSAxKSB7XG4gICAgICAgICAgICAvLyBUT0RPIGRvIHlvdSBoYXZlIHRvIG92ZXJ3cml0ZSB3aXRoIGNvbmNhdD9cbiAgICAgICAgICAgIHZhciBjYWxsID0gbmV3IENhbGwoc2FtcGxlc1tzYW1wbGVfaV0sIGdlbm90eXBlLFxuICAgICAgICAgICAgICAgIHNhbXBsZXNbc2FtcGxlX2ldLCBcIlRydWVcIik7IC8vIGN1cnJlbnRseSBub3QgZG9pbmcgYW55dGhpbmcgd2l0aCBwaGFzaW5nXG4gICAgICAgICAgICBjYWxscyA9IGNhbGxzLmNvbmNhdChjYWxsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2FtcGxlX2krKztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgdmFyIGNvbnRpZyA9IHBhcnRzWzBdO1xuICB2YXIgcG9zaXRpb24gPSBOdW1iZXIocGFydHNbMV0pO1xuXG4gIHJldHVybiBuZXcgVmFyaWFudENvbnRleHQobmV3IFZhcmlhbnQoe1xuICAgIGNvbnRpZzogY29udGlnLFxuICAgIHBvc2l0aW9uOiBwb3NpdGlvbixcbiAgICBpZDogcGFydHNbMl0sXG4gICAgcmVmOiBwYXJ0c1szXSxcbiAgICBhbHQ6IHBhcnRzWzRdLFxuICAgIG1ham9yRnJlcXVlbmN5OiBtYXhGcmVxdWVuY3ksXG4gICAgbWlub3JGcmVxdWVuY3k6IG1pbkZyZXF1ZW5jeSxcbiAgICB2Y2ZMaW5lLFxuICB9KSwgY2FsbHMpO1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBhcmVMb2N1c0xpbmUoYTogTG9jdXNMaW5lLCBiOiBMb2N1c0xpbmUpOiBudW1iZXIge1xuICAvLyBTb3J0IGxleGljb2dyYXBoaWNhbGx5IGJ5IGNvbnRpZywgdGhlbiBudW1lcmljYWxseSBieSBwb3NpdGlvbi5cbiAgaWYgKGEuY29udGlnIDwgYi5jb250aWcpIHtcbiAgICByZXR1cm4gLTE7XG4gIH0gZWxzZSBpZiAoYS5jb250aWcgPiBiLmNvbnRpZykge1xuICAgIHJldHVybiArMTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gYS5wb3NpdGlvbiAtIGIucG9zaXRpb247XG4gIH1cbn1cblxuXG4vLyAoYmFzZWQgb24gdW5kZXJzY29yZSBzb3VyY2UpXG5mdW5jdGlvbiBsb3dlc3RJbmRleDxUPihoYXlzdGFjazogVFtdLCBuZWVkbGU6IFQsIGNvbXBhcmU6IChhOiBULCBiOiBUKT0+bnVtYmVyKTogbnVtYmVyIHtcbiAgdmFyIGxvdyA9IDAsXG4gICAgICBoaWdoID0gaGF5c3RhY2subGVuZ3RoO1xuICB3aGlsZSAobG93IDwgaGlnaCkge1xuICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpLFxuICAgICAgICBjID0gY29tcGFyZShoYXlzdGFja1ttaWRdLCBuZWVkbGUpO1xuICAgIGlmIChjIDwgMCkge1xuICAgICAgbG93ID0gbWlkICsgMTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlnaCA9IG1pZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxvdztcbn1cblxuXG5jbGFzcyBJbW1lZGlhdGVWY2ZGaWxlIHtcbiAgbGluZXM6IExvY3VzTGluZVtdO1xuICBjb250aWdNYXA6IHtba2V5OnN0cmluZ106c3RyaW5nfTsgIC8vIGNhbm9uaWNhbCBtYXBcbiAgc2FtcGxlczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3Ioc2FtcGxlczogc3RyaW5nW10sIGxpbmVzOiBMb2N1c0xpbmVbXSkge1xuICAgIHRoaXMuc2FtcGxlcyA9IHNhbXBsZXM7XG4gICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuICAgIHRoaXMuY29udGlnTWFwID0gdGhpcy5leHRyYWN0Q29udGlncygpO1xuICB9XG5cbiAgZXh0cmFjdENvbnRpZ3MoKToge1trZXk6c3RyaW5nXTpzdHJpbmd9IHtcbiAgICB2YXIgY29udGlncyA9IFtdLFxuICAgICAgICBsYXN0Q29udGlnID0gJyc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICBpZiAobGluZS5jb250aWcgIT0gbGFzdENvbnRpZykge1xuICAgICAgICBjb250aWdzLnB1c2gobGluZS5jb250aWcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb250aWdNYXAgPSB7fTtcbiAgICBjb250aWdzLmZvckVhY2goY29udGlnID0+IHtcbiAgICAgIGlmIChjb250aWcuc2xpY2UoMCwgMykgPT0gJ2NocicpIHtcbiAgICAgICAgY29udGlnTWFwW2NvbnRpZy5zbGljZSg0KV0gPSBjb250aWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250aWdNYXBbJ2NocicgKyBjb250aWddID0gY29udGlnO1xuICAgICAgfVxuICAgICAgY29udGlnTWFwW2NvbnRpZ10gPSBjb250aWc7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbnRpZ01hcDtcbiAgfVxuXG4gIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFZhcmlhbnRDb250ZXh0W10ge1xuICAgIHZhciBsaW5lcyA9IHRoaXMubGluZXM7XG4gICAgdmFyIGNvbnRpZyA9IHRoaXMuY29udGlnTWFwW3JhbmdlLmNvbnRpZ107XG4gICAgaWYgKCFjb250aWcpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnRMb2N1cyA9IHtcbiAgICAgICAgY29udGlnOiBjb250aWcsXG4gICAgICAgIHBvc2l0aW9uOiByYW5nZS5zdGFydCgpLFxuICAgICAgICBsaW5lOiAnJ1xuICAgICAgfSxcbiAgICAgIGVuZExvY3VzID0ge1xuICAgICAgICBjb250aWc6IGNvbnRpZyxcbiAgICAgICAgcG9zaXRpb246IHJhbmdlLnN0b3AoKSxcbiAgICAgICAgbGluZTogJydcbiAgICAgIH07XG4gICAgdmFyIHN0YXJ0SW5kZXggPSBsb3dlc3RJbmRleChsaW5lcywgc3RhcnRMb2N1cywgY29tcGFyZUxvY3VzTGluZSk7XG5cbiAgICB2YXIgcmVzdWx0OiBMb2N1c0xpbmVbXSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNvbXBhcmVMb2N1c0xpbmUobGluZXNbaV0sIGVuZExvY3VzKSA+IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXN1bHQucHVzaChsaW5lc1tpXSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5tYXAobGluZSA9PiBleHRyYWN0VmFyaWFudENvbnRleHQodGhpcy5zYW1wbGVzLCBsaW5lLmxpbmUpKTtcbiAgfVxufVxuXG5cbmNsYXNzIFZjZkZpbGUge1xuICByZW1vdGVGaWxlOiBBYnN0cmFjdEZpbGU7XG4gIGltbWVkaWF0ZTogUS5Qcm9taXNlPEltbWVkaWF0ZVZjZkZpbGU+O1xuXG4gIGNvbnN0cnVjdG9yKHJlbW90ZUZpbGU6IEFic3RyYWN0RmlsZSkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG5cbiAgICB0aGlzLmltbWVkaWF0ZSA9IHRoaXMucmVtb3RlRmlsZS5nZXRBbGxTdHJpbmcoKS50aGVuKHR4dCA9PiB7XG4gICAgICAvLyBSdW5uaW5nIHRoaXMgb24gYSAxMk1CIHN0cmluZyB0YWtlcyB+ODBtcyBvbiBteSAyMDE0IE1hY2Jvb2sgUHJvXG4gICAgICB2YXIgdHh0TGluZXMgPSB0eHQuc3BsaXQoJ1xcbicpO1xuICAgICAgdmFyIGxpbmVzID0gIHR4dExpbmVzXG4gICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGxpbmUgPT4gKGxpbmUubGVuZ3RoICYmIGxpbmVbMF0gIT0gJyMnKSlcbiAgICAgICAgICAgICAgICAgICAgIC5tYXAoZXh0cmFjdExvY3VzTGluZSk7XG5cbiAgICAgIHZhciBoZWFkZXIgPSB0eHRMaW5lcy5maWx0ZXIobGluZSA9PiAobGluZS5sZW5ndGggJiYgbGluZVswXSA9PSAnIycpKTtcblxuICAgICAgdmFyIHNhbXBsZXMgPSBleHRyYWN0U2FtcGxlcyhoZWFkZXIpO1xuXG4gICAgICByZXR1cm4gW3NhbXBsZXMsIGxpbmVzXTtcbiAgICB9KS50aGVuKHJlc3VsdHMgPT4ge1xuICAgICAgdmFyIHNhbXBsZXMgPSByZXN1bHRzWzBdO1xuICAgICAgdmFyIGxpbmVzID0gcmVzdWx0c1sxXTtcbiAgICAgIC8vIFNvcnRpbmcgdGhpcyBzdHJ1Y3R1cmUgZnJvbSB0aGUgMTJNQiBWQ0YgZmlsZSB0YWtlcyB+NjBtc1xuICAgICAgbGluZXMuc29ydChjb21wYXJlTG9jdXNMaW5lKTtcbiAgICAgIHJldHVybiBuZXcgSW1tZWRpYXRlVmNmRmlsZShzYW1wbGVzLCBsaW5lcyk7XG4gICAgfSk7XG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgZ2V0Q2FsbE5hbWVzKCk6IFEuUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLnNhbXBsZXM7XG4gICAgfSk7XG4gIH1cblxuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8VmFyaWFudENvbnRleHRbXT4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmdldEZlYXR1cmVzSW5SYW5nZShyYW5nZSk7XG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIFZjZkZpbGVcbn07XG4iLCIvKipcbiAqIEEgZGF0YSBzb3VyY2Ugd2hpY2ggaW1wbGVtZW50cyBnZW5lcmljIEpTT04gcHJvdG9jb2wuXG4gKiBDdXJyZW50bHkgb25seSB1c2VkIHRvIGxvYWQgYWxpZ25tZW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0FsaWdubWVudH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIHtEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL0RhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBHQTRHSEFsaWdubWVudCBmcm9tICcuLi9HQTRHSEFsaWdubWVudCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZShqc29uOiBzdHJpbmcpOiBEYXRhU291cmNlPEFsaWdubWVudD4ge1xuXG4gIC8vIHBhcnNlIGpzb25cbiAgdmFyIHBhcnNlZEpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xuICB2YXIgcmVhZHM6IEFsaWdubWVudFtdID0gW107XG5cbiAgLy8gZmlsbCByZWFkcyB3aXRoIGpzb25cbiAgaWYgKCFfLmlzRW1wdHkocGFyc2VkSnNvbikpIHtcbiAgICAgIHJlYWRzID0gXy52YWx1ZXMocGFyc2VkSnNvbi5hbGlnbm1lbnRzKS5tYXAoYWxpZ25tZW50ID0+IG5ldyBHQTRHSEFsaWdubWVudChhbGlnbm1lbnQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmdlQ2hhbmdlZChuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAvLyBEYXRhIGlzIGFscmVhZHkgcGFyc2VkLCBzbyBpbW1lZGlhdGVseSByZXR1cm5cbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwobmV3UmFuZ2UuY29udGlnLCBuZXdSYW5nZS5zdGFydCwgbmV3UmFuZ2Uuc3RvcCk7XG4gICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBBbGlnbm1lbnRbXSB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuIFtdO1xuICAgIHZhciByID0gXy5maWx0ZXIocmVhZHMsIHJlYWQgPT4gcmVhZC5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKHN0cmluZywgYW55KSA9PiB7fVxuICB9O1xuICBfLmV4dGVuZChvLCBFdmVudHMpO1xuICByZXR1cm4gbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVxufTtcbiIsIi8qKlxuICogQSBkYXRhIHNvdXJjZSB3aGljaCBpbXBsZW1lbnRzIGdlbmVyaWMgSlNPTiBwcm90b2NvbC5cbiAqIEN1cnJlbnRseSBvbmx5IHVzZWQgdG8gbG9hZCBhbGlnbm1lbnRzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9EYXRhU291cmNlJztcbmltcG9ydCBGZWF0dXJlIGZyb20gJy4uL2RhdGEvZmVhdHVyZSc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5mdW5jdGlvbiBjcmVhdGUoanNvbjogc3RyaW5nKTogRGF0YVNvdXJjZTxGZWF0dXJlPiB7XG5cbiAgLy8gcGFyc2UganNvblxuICB2YXIgcGFyc2VkSnNvbiA9IEpTT04ucGFyc2UoanNvbik7XG4gIHZhciBmZWF0dXJlczogRmVhdHVyZVtdID0gW107XG5cbiAgLy8gZmlsbCBmZWF0dXJlcyB3aXRoIGpzb25cbiAgaWYgKCFfLmlzRW1wdHkocGFyc2VkSnNvbikpIHtcbiAgICAgIGZlYXR1cmVzID0gXy52YWx1ZXMocGFyc2VkSnNvbi5mZWF0dXJlcykubWFwKGZlYXR1cmUgPT4gRmVhdHVyZS5mcm9tR0E0R0goZmVhdHVyZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmFuZ2VDaGFuZ2VkKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIC8vIERhdGEgaXMgYWxyZWFkeSBwYXJzZWQsIHNvIGltbWVkaWF0ZWx5IHJldHVyblxuICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChuZXdSYW5nZS5jb250aWcsIG5ld1JhbmdlLnN0YXJ0LCBuZXdSYW5nZS5zdG9wKTtcbiAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IEZlYXR1cmVbXSB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuIFtdO1xuICAgIHZhciByID0gXy5maWx0ZXIoZmVhdHVyZXMsIGZlYXR1cmUgPT4gZmVhdHVyZS5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKHN0cmluZywgYW55KSA9PiB7fVxuICB9O1xuICBfLmV4dGVuZChvLCBFdmVudHMpO1xuICByZXR1cm4gbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVxufTtcbiIsIi8qKlxuICogQSBkYXRhIHNvdXJjZSB3aGljaCBpbXBsZW1lbnRzIGdlbmVyaWMgSlNPTiBwcm90b2NvbC5cbiAqIEN1cnJlbnRseSBvbmx5IHVzZWQgdG8gbG9hZCBhbGlnbm1lbnRzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7VmNmRGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9WY2ZEYXRhU291cmNlJztcbmltcG9ydCB7VmFyaWFudCwgVmFyaWFudENvbnRleHR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuXG5mdW5jdGlvbiBjcmVhdGUoanNvbjogc3RyaW5nKTogVmNmRGF0YVNvdXJjZSB7XG5cbiAgLy8gcGFyc2UganNvblxuICB2YXIgcGFyc2VkSnNvbiA9IEpTT04ucGFyc2UoanNvbik7XG4gIHZhciB2YXJpYW50czogVmFyaWFudENvbnRleHRbXSA9IFtdO1xuICB2YXIgY2FsbFNldE5hbWVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIC8vIGZpbGwgdmFyaWFudHMgd2l0aCBqc29uXG4gIGlmICghXy5pc0VtcHR5KHBhcnNlZEpzb24pKSB7XG4gICAgICB2YXJpYW50cyA9IF8udmFsdWVzKHBhcnNlZEpzb24udmFyaWFudHMpLm1hcCh2YXJpYW50ID0+IG5ldyBWYXJpYW50Q29udGV4dChWYXJpYW50LmZyb21HQTRHSCh2YXJpYW50KSx2YXJpYW50LmNhbGxzKSk7XG4gICAgICBjYWxsU2V0TmFtZXMgPSBfLm1hcCh2YXJpYW50c1swXS5jYWxscywgYyA9PiBjLmNhbGxTZXROYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmdlQ2hhbmdlZChuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAvLyBEYXRhIGlzIGFscmVhZHkgcGFyc2VkLCBzbyBpbW1lZGlhdGVseSByZXR1cm5cbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwobmV3UmFuZ2UuY29udGlnLCBuZXdSYW5nZS5zdGFydCwgbmV3UmFuZ2Uuc3RvcCk7XG4gICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICByZXR1cm47XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYXJpYW50c0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWYXJpYW50W10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih2YXJpYW50cywgdmFyaWFudCA9PiB2YXJpYW50LmludGVyc2VjdHMocmFuZ2UpKTtcbiAgICByZXR1cm4gXy5tYXAoZmlsdGVyZWQsIGYgPT4gZi52YXJpYW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEdlbm90eXBlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWYXJpYW50Q29udGV4dFtdIHtcbiAgICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcblxuICAgICAgcmV0dXJuIF8uZmlsdGVyKHZhcmlhbnRzLCB2YXJpYW50ID0+IHZhcmlhbnQuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2FsbE5hbWVzKCk6IFEuUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgICAgcmV0dXJuIFEucmVzb2x2ZShjYWxsU2V0TmFtZXMpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldFZhcmlhbnRzSW5SYW5nZSxcbiAgICBnZXRHZW5vdHlwZXNJblJhbmdlLFxuICAgIGdldENhbGxOYW1lcyxcblxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdHJpbmcsIGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTtcbiAgcmV0dXJuIG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIFRoaXMgZXhwb3NlcyB0aGUgbWFpbiBlbnRyeSBwb2ludCBpbnRvIHBpbGV1cC5qcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1RyYWNrLCBWaXN1YWxpemVkVHJhY2ssIFZpeldpdGhPcHRpb25zfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7QWxsZWxGcmVxdWVuY3lTdHJhdGVneX0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7U3RhdGV9IGZyb20gJy4vdHlwZXMnO1xuXG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge1JlYWN0LCBSZWFjdERPTX0gZnJvbSAnLi9TaGltRGVwZW5kZW5jaWVzJztcblxuLy8gRGF0YSBzb3VyY2VzXG5pbXBvcnQgVHdvQml0RGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgQmlnQmVkRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvQmlnQmVkRGF0YVNvdXJjZSc7XG5pbXBvcnQgVmNmRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQgQmFtRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvQmFtRGF0YVNvdXJjZSc7XG5pbXBvcnQgRW1wdHlTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0VtcHR5U291cmNlJztcblxuLy8gRGF0YSBzb3VyY2VzIGZyb20ganNvblxuaW1wb3J0IEdBNEdIQWxpZ25tZW50SnNvbiBmcm9tICcuL2pzb24vR0E0R0hBbGlnbm1lbnRKc29uJztcbmltcG9ydCBHQTRHSFZhcmlhbnRKc29uIGZyb20gJy4vanNvbi9HQTRHSFZhcmlhbnRKc29uJztcbmltcG9ydCBHQTRHSEZlYXR1cmVKc29uIGZyb20gJy4vanNvbi9HQTRHSEZlYXR1cmVKc29uJztcblxuLy8gR0E0R0ggc291cmNlc1xuaW1wb3J0IEdBNEdIQWxpZ25tZW50U291cmNlIGZyb20gJy4vc291cmNlcy9HQTRHSEFsaWdubWVudFNvdXJjZSc7XG5pbXBvcnQgR0E0R0hWYXJpYW50U291cmNlIGZyb20gJy4vc291cmNlcy9HQTRHSFZhcmlhbnRTb3VyY2UnO1xuaW1wb3J0IEdBNEdIRmVhdHVyZVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvR0E0R0hGZWF0dXJlU291cmNlJztcbmltcG9ydCBHQTRHSEdlbmVTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0dBNEdIR2VuZVNvdXJjZSc7XG5cbi8vIFZpc3VhbGl6YXRpb25zXG5pbXBvcnQgQ292ZXJhZ2VUcmFjayBmcm9tICcuL3Zpei9Db3ZlcmFnZVRyYWNrJztcbmltcG9ydCBHZW5vbWVUcmFjayBmcm9tICcuL3Zpei9HZW5vbWVUcmFjayc7XG5pbXBvcnQgR2VuZVRyYWNrIGZyb20gJy4vdml6L0dlbmVUcmFjayc7XG5pbXBvcnQgRmVhdHVyZVRyYWNrIGZyb20gJy4vdml6L0ZlYXR1cmVUcmFjayc7XG5pbXBvcnQgTG9jYXRpb25UcmFjayBmcm9tICcuL3Zpei9Mb2NhdGlvblRyYWNrJztcbmltcG9ydCBQaWxldXBUcmFjayBmcm9tICcuL3Zpei9QaWxldXBUcmFjayc7XG5pbXBvcnQgU2NhbGVUcmFjayBmcm9tICcuL3Zpei9TY2FsZVRyYWNrJztcbmltcG9ydCBWYXJpYW50VHJhY2sgZnJvbSAnLi92aXovVmFyaWFudFRyYWNrJztcbmltcG9ydCBHZW5vdHlwZVRyYWNrIGZyb20gJy4vdml6L0dlbm90eXBlVHJhY2snO1xuaW1wb3J0IFJvb3QgZnJvbSAnLi9Sb290JztcblxudHlwZSBHZW5vbWVSYW5nZSA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbn1cblxudHlwZSBQaWxldXAgPSB7XG4gIHNldFJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IHZvaWQ7XG4gIGdldFJhbmdlKCk6IEdlbm9tZVJhbmdlO1xuICBkZXN0cm95KCk6IHZvaWQ7XG59XG5cbnR5cGUgUGlsZXVwUGFyYW1zID0ge1xuICByYW5nZToge1xuICAgIGNvbnRpZzogc3RyaW5nLFxuICAgIHN0YXJ0OiBudW1iZXIsXG4gICAgc3RvcDogbnVtYmVyXG4gIH07XG4gIHRyYWNrczogVHJhY2tbXTtcbiAgY29udHJvbHNPZmY/OiBib29sZWFuO1xufVxuXG5mdW5jdGlvbiBmaW5kUmVmZXJlbmNlKHRyYWNrczogVmlzdWFsaXplZFRyYWNrW10pOiA/VmlzdWFsaXplZFRyYWNrIHtcbiAgcmV0dXJuIF8uZmluZCh0cmFja3MsIHQgPT4gISF0LnRyYWNrLmlzUmVmZXJlbmNlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlKGVsT3JJZDogc3RyaW5nfEVsZW1lbnQsIHBhcmFtczogUGlsZXVwUGFyYW1zKTogUGlsZXVwIHtcbiAgdmFyIGVsID0gdHlwZW9mKGVsT3JJZCkgPT0gJ3N0cmluZycgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlbE9ySWQpIDogZWxPcklkO1xuICBpZiAoIWVsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gY3JlYXRlIHBpbGV1cCB3aXRoIG5vbi1leGlzdGVudCBlbGVtZW50ICR7ZWxPcklkLnRvU3RyaW5nKCl9YCk7XG4gIH1cblxuICB2YXIgdml6VHJhY2tzID0gcGFyYW1zLnRyYWNrcy5tYXAoZnVuY3Rpb24odHJhY2s6IFRyYWNrKTogVmlzdWFsaXplZFRyYWNrIHtcbiAgICB2YXIgc291cmNlID0gdHJhY2suZGF0YSA/IHRyYWNrLmRhdGEgOiB0cmFjay52aXouY29tcG9uZW50LmRlZmF1bHRTb3VyY2U7XG4gICAgaWYoIXNvdXJjZSkge1xuICAgICAgdmFyIGRpc3BsYXlOYW1lID0gdHJhY2sudml6LmNvbXBvbmVudC5kaXNwbGF5TmFtZSAhPSBudWxsID8gdHJhY2sudml6LmNvbXBvbmVudC5kaXNwbGF5TmFtZSA6ICd0cmFjayc7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUcmFjayAnJHtkaXNwbGF5TmFtZX0nIGRvZXNuJ3QgaGF2ZSBhIGRlZmF1bHQgYCArXG4gICAgICAgIGBkYXRhIHNvdXJjZTsgeW91IG11c3Qgc3BlY2lmeSBvbmUgd2hlbiBpbml0aWFsaXppbmcgaXQuYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge3Zpc3VhbGl6YXRpb246IHRyYWNrLnZpeiwgc291cmNlLCB0cmFja307XG4gIH0pO1xuXG4gIHZhciByZWZlcmVuY2VUcmFjayA9IGZpbmRSZWZlcmVuY2Uodml6VHJhY2tzKTtcbiAgaWYgKCFyZWZlcmVuY2VUcmFjaykge1xuICAgIHRocm93IG5ldyBFcnJvcignWW91IG11c3QgaW5jbHVkZSBhdCBsZWFzdCBvbmUgdHJhY2sgd2l0aCB0eXBlPXJlZmVyZW5jZScpO1xuICB9XG5cbiAgdmFyIHJlYWN0RWxlbWVudCA9XG4gICAgICBSZWFjdERPTS5yZW5kZXIoPFJvb3QgcmVmZXJlbmNlU291cmNlPXtyZWZlcmVuY2VUcmFjay5zb3VyY2V9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2tzPXt2aXpUcmFja3N9IGNvbnRyb2xzT2ZmPXtwYXJhbXMuY29udHJvbHNPZmZ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFJhbmdlPXtwYXJhbXMucmFuZ2V9IC8+LCBlbCk7XG5cbiAgLy9pZiB0aGUgZWxlbWVudCBkb2Vzbid0IGJlbG9uZyB0byBkb2N1bWVudCBET00gb2JzZXJ2ZSBET00gdG8gZGV0ZWN0XG4gIC8vd2hlbiBpdCdzIGF0dGFjaGVkXG4gIHZhciBvYnNlcnZlciA9IG51bGw7XG4gIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgaWYgKCFib2R5KSB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gbWF0Y2g6IGRvY3VtZW50LmJvZHlcIik7XG5cbiAgaWYgKCFib2R5LmNvbnRhaW5zKGVsKSkge1xuICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7XG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaChmdW5jdGlvbihtdXRhdGlvbikge1xuICAgICAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ2NoaWxkTGlzdCcpIHtcbiAgICAgICAgICB2YXIgYWRkZWQ9IGZhbHNlO1xuICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgIC8vd2hlbiBhZGRlZCBlbGVtZW50IGlzIGVsZW1lbnQgd2hlcmUgd2UgdmlzdWFsaXplIHBpbGV1cFxuICAgICAgICAgICAgLy9vciBpdCBjb250YWlucyBlbGVtZW50IHdoZXJlIHdlIHZpc3VhbGl6ZSBwaWxldXBcbiAgICAgICAgICAgIC8vdGhlbiB3ZSB3aWxsIGhhdmUgdG8gdXBkYXRlIGNvbXBvbmVudFxuICAgICAgICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXNbaV09PT1lbCB8fCBtdXRhdGlvbi5hZGRlZE5vZGVzW2ldLmNvbnRhaW5zKGVsKSkge1xuICAgICAgICAgICAgICBhZGRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhZGRlZCkge1xuICAgICAgICAgICAgaWYgKHJlYWN0RWxlbWVudCkge1xuICAgICAgICAgICAgICByZWFjdEVsZW1lbnQuc2V0U3RhdGUoe3VwZGF0ZVNpemU6dHJ1ZX0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhyb3cgJ1JlYWN0RWxlbWVudCB3YXMgbm90IGluaXRpYWxpemVkIHByb3Blcmx5JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIC8vIGNvbmZpZ3VyYXRpb24gb2YgdGhlIG9ic2VydmVyOlxuICAgIHZhciBjb25maWcgPSB7YXR0cmlidXRlczogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBjaGFyYWN0ZXJEYXRhOiB0cnVlLCBzdWJ0cmVlOiB0cnVlfTtcblxuICAgIC8vIHN0YXJ0IG9ic2VydmluZyBkb2N1bWVudFxuICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQsIGNvbmZpZyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHNldFJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgaWYgKHJlYWN0RWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyAnQ2Fubm90IGNhbGwgc2V0UmFuZ2Ugb24gYSBkZXN0cm95ZWQgcGlsZXVwJztcbiAgICAgIH1cbiAgICAgIHJlYWN0RWxlbWVudC5oYW5kbGVSYW5nZUNoYW5nZShyYW5nZSk7XG4gICAgfSxcbiAgICBnZXRSYW5nZSgpOiBHZW5vbWVSYW5nZSB7XG4gICAgICBpZiAocmVhY3RFbGVtZW50ID09PSBudWxsKSB7XG4gICAgICAgIHRocm93ICdDYW5ub3QgY2FsbCBnZXRSYW5nZSBvbiBhIGRlc3Ryb3llZCBwaWxldXAnO1xuICAgICAgfVxuICAgICAgaWYgKHJlYWN0RWxlbWVudC5zdGF0ZS5yYW5nZSAhPSBudWxsKSB7XG4gICAgICAgIHJldHVybiBfLmNsb25lKHJlYWN0RWxlbWVudC5zdGF0ZS5yYW5nZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnQ2Fubm90IGNhbGwgc2V0UmFuZ2Ugb24gbm9uLWV4aXN0ZW50IHJhbmdlJztcbiAgICAgIH1cblxuICAgIH0sXG4gICAgZGVzdHJveSgpOiB2b2lkIHtcbiAgICAgIGlmICghdml6VHJhY2tzKSB7XG4gICAgICAgIHRocm93ICdDYW5ub3QgY2FsbCBkZXN0cm95KCkgdHdpY2Ugb24gdGhlIHNhbWUgcGlsZXVwJztcbiAgICAgIH1cbiAgICAgIHZpelRyYWNrcy5mb3JFYWNoKCh7c291cmNlfSkgPT4ge1xuICAgICAgICBzb3VyY2Uub2ZmKCk7XG4gICAgICB9KTtcbiAgICAgIFJlYWN0RE9NLnVubW91bnRDb21wb25lbnRBdE5vZGUoZWwpO1xuICAgICAgcmVhY3RFbGVtZW50ID0gbnVsbDtcbiAgICAgIHJlZmVyZW5jZVRyYWNrID0gbnVsbDtcbiAgICAgIHZpelRyYWNrcyA9IG51bGw7XG5cbiAgICAgIC8vIGRpc2Nvbm5lY3Qgb2JzZXJ2ZXIgaWYgaXQgd2FzIGNyZWF0ZWRcbiAgICAgIGlmIChvYnNlcnZlciAhPT0gbnVsbCAmJiBvYnNlcnZlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbnR5cGUgVml6T2JqZWN0ID0gKChvcHRpb25zOiA/T2JqZWN0KSA9PiBWaXpXaXRoT3B0aW9ucyk7XG5cbmZ1bmN0aW9uIG1ha2VWaXpPYmplY3QoY29tcG9uZW50OiBDbGFzczxSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8YW55PiwgU3RhdGU+Pik6IFZpek9iamVjdCB7XG4gIHJldHVybiBvcHRpb25zID0+IHtcbiAgICAvLyAkRmxvd0lnbm9yZTogVE9ETyByZW1vdmUgZmxvdyBzdXBwcmVzc2lvblxuICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50LmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICByZXR1cm4ge2NvbXBvbmVudCwgb3B0aW9uc307XG4gIH07XG59XG5cbnZhciBwaWxldXAgPSB7XG4gIGNyZWF0ZTogY3JlYXRlLFxuICBmb3JtYXRzOiB7XG4gICAgYmFtOiBCYW1EYXRhU291cmNlLmNyZWF0ZSxcbiAgICBhbGlnbm1lbnRKc29uOiBHQTRHSEFsaWdubWVudEpzb24uY3JlYXRlLFxuICAgIHZhcmlhbnRKc29uOiBHQTRHSFZhcmlhbnRKc29uLmNyZWF0ZSxcbiAgICBmZWF0dXJlSnNvbjogR0E0R0hGZWF0dXJlSnNvbi5jcmVhdGUsXG4gICAgdmNmOiBWY2ZEYXRhU291cmNlLmNyZWF0ZSxcbiAgICB0d29CaXQ6IFR3b0JpdERhdGFTb3VyY2UuY3JlYXRlLFxuICAgIGJpZ0JlZDogQmlnQmVkRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgR0FSZWFkQWxpZ25tZW50OiBHQTRHSEFsaWdubWVudFNvdXJjZS5jcmVhdGUsXG4gICAgR0FWYXJpYW50OiBHQTRHSFZhcmlhbnRTb3VyY2UuY3JlYXRlLFxuICAgIEdBRmVhdHVyZTogR0E0R0hGZWF0dXJlU291cmNlLmNyZWF0ZSxcbiAgICBHQUdlbmU6IEdBNEdIR2VuZVNvdXJjZS5jcmVhdGUsXG4gICAgZW1wdHk6IEVtcHR5U291cmNlLmNyZWF0ZVxuICB9LFxuICB2aXo6IHtcbiAgICBjb3ZlcmFnZTogbWFrZVZpek9iamVjdChDb3ZlcmFnZVRyYWNrKSxcbiAgICBnZW5vbWU6ICAgbWFrZVZpek9iamVjdChHZW5vbWVUcmFjayksXG4gICAgZ2VuZXM6ICAgIG1ha2VWaXpPYmplY3QoR2VuZVRyYWNrKSxcbiAgICBmZWF0dXJlczogbWFrZVZpek9iamVjdChGZWF0dXJlVHJhY2spLFxuICAgIGxvY2F0aW9uOiBtYWtlVml6T2JqZWN0KExvY2F0aW9uVHJhY2spLFxuICAgIHNjYWxlOiAgICBtYWtlVml6T2JqZWN0KFNjYWxlVHJhY2spLFxuICAgIHZhcmlhbnRzOiBtYWtlVml6T2JqZWN0KFZhcmlhbnRUcmFjayksXG4gICAgZ2Vub3R5cGVzOiBtYWtlVml6T2JqZWN0KEdlbm90eXBlVHJhY2spLFxuICAgIHBpbGV1cDogICBtYWtlVml6T2JqZWN0KFBpbGV1cFRyYWNrKVxuICB9LFxuICBlbnVtOiB7XG4gICAgdmFyaWFudHM6IHtcbiAgICAgIGFsbGVsRnJlcXVlbmN5U3RyYXRlZ3k6IEFsbGVsRnJlcXVlbmN5U3RyYXRlZ3ksXG4gICAgfSxcbiAgfSxcbiAgdmVyc2lvbjogJzAuNi4xMSdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcGlsZXVwO1xuXG4vLyBFeHBvcnQgYSBnbG9iYWwgdW50aWwgdGhlIGRpc3RyaWJ1dGVkIHBhY2thZ2Ugd29ya3Mgd2l0aCBDb21tb25KU1xuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9oYW1tZXJsYWIvcGlsZXVwLmpzL2lzc3Vlcy8xMzZcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cucGlsZXVwID0gcGlsZXVwO1xufVxuIiwiLyoqXG4gKiBMaWdodHdlaWdodCByZXBsYWNlbWVudCBmb3IgZDMuc2NhbGUubGluZWFyKCkuXG4gKiBUaGlzIG9ubHkgc3VwcG9ydHMgbnVtZXJpYyBzY2FsZXMsIGUuZy4gc2NhbGUucmFuZ2UoWydyZWQnLCAnYmx1ZSddKSBpcyBpbnZhbGlkLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBsaW5lYXIoKTogYW55IHtcbiAgdmFyIGNsYW1wZWQgPSBmYWxzZSxcbiAgICAgIGRvbWFpbiA9IFswLCAxXSxcbiAgICAgIHJhbmdlID0gWzAsIDFdO1xuXG4gIHZhciBtZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoY2xhbXBlZCkge1xuICAgICAgeCA9IE1hdGgubWF4KE1hdGgubWluKHgsIGRvbWFpblsxXSksIGRvbWFpblswXSk7XG4gICAgfVxuICAgIC8vIFRPRE86IGNvbXB1dGUgY29lZmZpY2llbnRzIG9uY2UuXG4gICAgcmV0dXJuICh4IC0gZG9tYWluWzBdKSAvIChkb21haW5bMV0gLSBkb21haW5bMF0pICogKHJhbmdlWzFdIC0gcmFuZ2VbMF0pICsgcmFuZ2VbMF07XG4gIH07XG5cbiAgbWUuY2xhbXAgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09IHVuZGVmaW5lZCkgcmV0dXJuIGNsYW1wZWQ7XG4gICAgY2xhbXBlZCA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLmRvbWFpbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZG9tYWluO1xuICAgIGRvbWFpbiA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLnJhbmdlID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSB1bmRlZmluZWQpIHJldHVybiByYW5nZTtcbiAgICByYW5nZSA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLmludmVydCA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoY2xhbXBlZCkge1xuICAgICAgdGhyb3cgYENhbid0IGludmVydCBhIGNsYW1wZWQgbGluZWFyIHNjYWxlLmA7XG4gICAgfVxuICAgIHJldHVybiAoeCAtIHJhbmdlWzBdKSAvIChyYW5nZVsxXSAtIHJhbmdlWzBdKSAqIChkb21haW5bMV0gLSBkb21haW5bMF0pICsgZG9tYWluWzBdO1xuICB9O1xuICBtZS5uaWNlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gVGhpcyBtZXRob2QgaXMgYWRhcHRlZCBkaXJlY3RseSBmcm9tIGQzJ3MgbGluZWFyIHNjYWxlIG5pY2UgbWV0aG9kLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWJvc3RvY2svZDMvYmxvYi81Yjk4MWExOGQvc3JjL3NjYWxlL2xpbmVhci5qcyNMOTQtTDExMlxuICAgIHZhciBtID0gMTA7XG4gICAgdmFyIGV4dGVudCA9IGRvbWFpbixcbiAgICAgICAgc3BhbiA9IE1hdGguYWJzKGV4dGVudFsxXSAtIGV4dGVudFswXSksXG4gICAgICAgIHN0ZXAgPSBNYXRoLnBvdygxMCwgTWF0aC5mbG9vcihNYXRoLmxvZyhzcGFuIC8gbSkgLyBNYXRoLkxOMTApKSxcbiAgICAgICAgZXJyID0gbSAvIHNwYW4gKiBzdGVwO1xuXG4gICAgLy8gRmlsdGVyIHRpY2tzIHRvIGdldCBjbG9zZXIgdG8gdGhlIGRlc2lyZWQgY291bnQuXG4gICAgaWYgKGVyciA8PSAwLjE1KSBzdGVwICo9IDEwO1xuICAgIGVsc2UgaWYgKGVyciA8PSAwLjM1KSBzdGVwICo9IDU7XG4gICAgZWxzZSBpZiAoZXJyIDw9IDAuNzUpIHN0ZXAgKj0gMjtcblxuICAgIHZhciBuaWNlID0ge1xuICAgICAgZmxvb3I6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIE1hdGguZmxvb3IoeCAvIHN0ZXApICogc3RlcDsgfSxcbiAgICAgIGNlaWw6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIE1hdGguY2VpbCh4IC8gc3RlcCkgKiBzdGVwOyB9XG4gICAgfTtcblxuICAgIHZhciBpMCA9IDAsXG4gICAgICAgIGkxID0gMSxcbiAgICAgICAgeDAgPSBkb21haW5baTBdLFxuICAgICAgICB4MSA9IGRvbWFpbltpMV0sXG4gICAgICAgIGR4O1xuXG4gICAgaWYgKHgxIDwgeDApIHtcbiAgICAgIGR4ID0gaTA7IGkwID0gaTE7IGkxID0gZHg7XG4gICAgICBkeCA9IHgwOyB4MCA9IHgxOyB4MSA9IGR4O1xuICAgIH1cblxuICAgIGRvbWFpbltpMF0gPSBuaWNlLmZsb29yKHgwKTtcbiAgICBkb21haW5baTFdID0gbmljZS5jZWlsKHgxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICByZXR1cm4gbWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBsaW5lYXIgfTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEJhbUZpbGUgZnJvbSAnLi4vZGF0YS9iYW0nO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHR5cGUge0FsaWdubWVudH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlICB7RGF0YVNvdXJjZX0gZnJvbSAnLi9EYXRhU291cmNlJztcbi8vIEdlbm9tZSByYW5nZXMgYXJlIHJvdW5kZWQgdG8gbXVsdGlwbGVzIG9mIHRoaXMgZm9yIGZldGNoaW5nLlxuLy8gVGhpcyByZWR1Y2VzIG5ldHdvcmsgYWN0aXZpdHkgd2hpbGUgZmV0Y2hpbmcuXG4vLyBUT0RPOiB0dW5lIHRoaXMgdmFsdWVcbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cblxuZnVuY3Rpb24gY3JlYXRlRnJvbUJhbUZpbGUocmVtb3RlU291cmNlOiBCYW1GaWxlKTogRGF0YVNvdXJjZTxBbGlnbm1lbnQ+IHtcbiAgdmFyIHJlYWRzOiB7W2tleTpzdHJpbmddOiBBbGlnbm1lbnR9ID0ge307XG5cbiAgLy8gTWFwcGluZyBmcm9tIGNvbnRpZyBuYW1lIHRvIGNhbm9uaWNhbCBjb250aWcgbmFtZS5cbiAgdmFyIGNvbnRpZ05hbWVzOiB7W2tleTpzdHJpbmddOiBzdHJpbmd9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRSZWFkKHJlYWQ6IEFsaWdubWVudCkge1xuICAgIHZhciBrZXkgPSByZWFkLmdldEtleSgpO1xuICAgIGlmICghcmVhZHNba2V5XSkge1xuICAgICAgcmVhZHNba2V5XSA9IHJlYWQ7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2F2ZUNvbnRpZ01hcHBpbmcoaGVhZGVyOiBPYmplY3QpIHtcbiAgICBoZWFkZXIucmVmZXJlbmNlcy5mb3JFYWNoKHJlZiA9PiB7XG4gICAgICB2YXIgbmFtZSA9IHJlZi5uYW1lO1xuICAgICAgY29udGlnTmFtZXNbbmFtZV0gPSBuYW1lO1xuICAgICAgY29udGlnTmFtZXNbJ2NocicgKyBuYW1lXSA9IG5hbWU7XG4gICAgICBpZiAobmFtZS5zbGljZSgwLCAzKSA9PSAnY2hyJykge1xuICAgICAgICBjb250aWdOYW1lc1tuYW1lLnNsaWNlKDMpXSA9IG5hbWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgcmVmc1Byb21pc2UgPSAhXy5pc0VtcHR5KGNvbnRpZ05hbWVzKSA/IFEud2hlbigpIDpcbiAgICAgICAgcmVtb3RlU291cmNlLmhlYWRlci50aGVuKHNhdmVDb250aWdNYXBwaW5nKTtcblxuICAgIC8vIEZvciBCQU1zIHdpdGhvdXQgaW5kZXggY2h1bmtzLCB3ZSBuZWVkIHRvIGZldGNoIHRoZSBlbnRpcmUgQkFJIGZpbGVcbiAgICAvLyBiZWZvcmUgd2UgY2FuIGtub3cgaG93IGxhcmdlIHRoZSBCQU0gaGVhZGVyIGlzLiBJZiB0aGUgaGVhZGVyIGlzXG4gICAgLy8gcGVuZGluZywgaXQncyBhbG1vc3QgY2VydGFpbmx5IGJlY2F1c2UgdGhlIEJBSSBmaWxlIGlzIGluIGZsaWdodC5cbiAgICBRLndoZW4oKS50aGVuKCgpID0+IHtcbiAgICAgIGlmIChyZWZzUHJvbWlzZS5pc1BlbmRpbmcoKSAmJiAhcmVtb3RlU291cmNlLmhhc0luZGV4Q2h1bmtzKSB7XG4gICAgICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywge1xuICAgICAgICAgIHN0YXR1czogJ0ZldGNoaW5nIEJBTSBpbmRleCAtLSB1c2UgaW5kZXggY2h1bmtzIHRvIHNwZWVkIHRoaXMgdXAnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLmRvbmUoKTtcblxuICAgIHJldHVybiByZWZzUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHZhciBjb250aWdOYW1lID0gY29udGlnTmFtZXNbcmFuZ2UuY29udGlnXTtcbiAgICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWdOYW1lLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaW50ZXJ2YWwgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGUuXG4gICAgICAvLyBJZiBub3QsIGltbWVkaWF0ZWx5IFwiY292ZXJcIiBpdCB0byBwcmV2ZW50IGR1cGxpY2F0ZSByZXF1ZXN0cy5cbiAgICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkge1xuICAgICAgICByZXR1cm4gUS53aGVuKCk7XG4gICAgICB9XG5cbiAgICAgIGludGVydmFsID0gaW50ZXJ2YWwucm91bmQoQkFTRV9QQUlSU19QRVJfRkVUQ0gsIFpFUk9fQkFTRUQpO1xuICAgICAgdmFyIG5ld1JhbmdlcyA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoY292ZXJlZFJhbmdlcyk7XG4gICAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICByZXR1cm4gUS5hbGwobmV3UmFuZ2VzLm1hcChyYW5nZSA9PlxuICAgICAgICAgIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2UpXG4gICAgICAgICAgICAucHJvZ3Jlc3MocHJvZ3Jlc3NFdmVudCA9PiB7XG4gICAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywgcHJvZ3Jlc3NFdmVudCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVhZHMgPT4ge1xuICAgICAgICAgICAgICByZWFkcy5mb3JFYWNoKHJlYWQgPT4gYWRkUmVhZChyZWFkKSk7XG4gICAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IEFsaWdubWVudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgaWYgKF8uaXNFbXB0eShjb250aWdOYW1lcykpIHJldHVybiBbXTtcblxuICAgIHZhciBjYW5vbmljYWxSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWdOYW1lc1tyYW5nZS5jb250aWddLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpO1xuXG4gICAgcmV0dXJuIF8uZmlsdGVyKHJlYWRzLCByZWFkID0+IHJlYWQuaW50ZXJzZWN0cyhjYW5vbmljYWxSYW5nZSkpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGZldGNoKG5ld1JhbmdlKS5kb25lKCk7XG4gICAgfSxcbiAgICBnZXRGZWF0dXJlc0luUmFuZ2UsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKHN0YXR1czogc3RyaW5nLCBwYXJhbTogYW55KSA9PiB7fVxuICB9O1xuICBfLmV4dGVuZChvLCBFdmVudHMpOyAgLy8gTWFrZSB0aGlzIGFuIGV2ZW50IGVtaXR0ZXJcblxuICByZXR1cm4gbztcbn1cblxudHlwZSBCYW1TcGVjID0ge1xuICB1cmw6IHN0cmluZztcbiAgaW5kZXhVcmw6IHN0cmluZztcbiAgaW5kZXhDaHVua3M/OiBPYmplY3Q7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShzcGVjOiBCYW1TcGVjKTogRGF0YVNvdXJjZTxBbGlnbm1lbnQ+IHtcbiAgdmFyIHVybCA9IHNwZWMudXJsO1xuICBpZiAoIXVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG4gIHZhciBpbmRleFVybCA9IHNwZWMuaW5kZXhVcmw7XG4gIGlmICghaW5kZXhVcmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgaW5kZXhVUkwgZnJvbSB0cmFjayBkYXRhOiAke0pTT04uc3RyaW5naWZ5KHNwZWMpfWApO1xuICB9XG5cbiAgLy8gVE9ETzogdGhpcyBpcyBvdmVybHkgcmVwZXRpdGl2ZSwgc2VlIGZsb3cgaXNzdWUgZmFjZWJvb2svZmxvdyM0MzdcbiAgdmFyIGJhbUZpbGUgPSBzcGVjLmluZGV4Q2h1bmtzID9cbiAgICAgIG5ldyBCYW1GaWxlKG5ldyBSZW1vdGVGaWxlKHVybCksIG5ldyBSZW1vdGVGaWxlKGluZGV4VXJsKSwgc3BlYy5pbmRleENodW5rcykgOlxuICAgICAgbmV3IEJhbUZpbGUobmV3IFJlbW90ZUZpbGUodXJsKSwgbmV3IFJlbW90ZUZpbGUoaW5kZXhVcmwpKTtcbiAgcmV0dXJuIGNyZWF0ZUZyb21CYW1GaWxlKGJhbUZpbGUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tQmFtRmlsZVxufTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtzdHJUb1N0cmFuZH0gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IEJpZ0JlZCBmcm9tICcuLi9kYXRhL0JpZ0JlZCc7XG5pbXBvcnQgR2VuZSBmcm9tICcuLi9kYXRhL2dlbmUnO1xuXG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi9EYXRhU291cmNlJztcblxuLy8gVGhlIGZpZWxkcyBhcmUgZGVzY3JpYmVkIGF0IGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdCNmb3JtYXQxXG4vLyBGaWVsZHMgNC0xMiBhcmUgb3B0aW9uYWxcbmZ1bmN0aW9uIHBhcnNlQmVkRmVhdHVyZShmKTogR2VuZSB7XG4gIHZhciBwb3NpdGlvbiA9IG5ldyBDb250aWdJbnRlcnZhbChmLmNvbnRpZywgZi5zdGFydCwgZi5zdG9wKSxcbiAgICAgIHggPSBmLnJlc3Quc3BsaXQoJ1xcdCcpO1xuXG4gIC8vIGlmIG5vIGlkLCBnZW5lcmF0ZSByYW5kb21seSBmb3IgdW5pcXVlIHN0b3JhZ2VcbiAgdmFyIGlkID0geFswXSA/IHhbMF0gOiBwb3NpdGlvbi50b1N0cmluZygpOyAvLyBlLmcuIEVOU1QwMDAwMDM1OTU5N1xuICB2YXIgc2NvcmUgPSB4WzFdID8gcGFyc2VJbnQoeFsxXSkgOiAxMDAwOyAvLyBudW1iZXIgZnJvbSAwLTEwMDBcbiAgdmFyIHN0cmFuZCA9ICBzdHJUb1N0cmFuZCh4WzJdKTsgLy8gZWl0aGVyICssIC0gb3IgLlxuICB2YXIgY29kaW5nUmVnaW9uID0gKHhbM10gJiYgeFs0XSkgPyBuZXcgSW50ZXJ2YWwoTnVtYmVyKHhbM10pLCBOdW1iZXIoeFs0XSkpIDpuZXcgSW50ZXJ2YWwoZi5zdGFydCwgZi5zdG9wKTtcbiAgdmFyIGdlbmVJZCA9ICB4WzldID8geFs5XSA6IGlkO1xuICB2YXIgbmFtZSA9ICB4WzEwXSA/IHhbMTBdIDogXCJcIjtcblxuICAvLyBwYXJzZSBleG9uc1xuICB2YXIgZXhvbnMgPSBbXTtcbiAgaWYgKHhbN10gJiYgeFs4XSkge1xuICAgIC8vIGV4b25zIGFycmF5cyBzb21ldGltZXMgaGF2ZSB0cmFpbGluZyBjb21tYXNcbiAgICB2YXIgZXhvbkxlbmd0aHMgPSB4WzddLnJlcGxhY2UoLywqJC8sICcnKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpLFxuICAgICAgZXhvblN0YXJ0cyA9IHhbOF0ucmVwbGFjZSgvLCokLywgJycpLnNwbGl0KCcsJykubWFwKE51bWJlcik7XG5cbiAgICBleG9ucyA9IF8uemlwKGV4b25TdGFydHMsIGV4b25MZW5ndGhzKVxuICAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oW3N0YXJ0LCBsZW5ndGhdKSB7XG4gICAgICAgICAgICAgICByZXR1cm4gbmV3IEludGVydmFsKGYuc3RhcnQgKyBzdGFydCwgZi5zdGFydCArIHN0YXJ0ICsgbGVuZ3RoKTtcbiAgICAgICAgICAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBuZXcgR2VuZSh7XG4gICAgcG9zaXRpb24sXG4gICAgaWQ6IGlkLFxuICAgIHNjb3JlOiBzY29yZSxcbiAgICBzdHJhbmQ6IHN0cmFuZCxcbiAgICBjb2RpbmdSZWdpb246IGNvZGluZ1JlZ2lvbixcbiAgICBnZW5lSWQ6IGdlbmVJZCxcbiAgICBuYW1lOiBuYW1lLFxuICAgIGV4b25zXG4gIH0pO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVGcm9tQmlnQmVkRmlsZShyZW1vdGVTb3VyY2U6IEJpZ0JlZCk6IERhdGFTb3VyY2U8R2VuZT4ge1xuICAvLyBDb2xsZWN0aW9uIG9mIGdlbmVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gbG9hZGVkLlxuICB2YXIgZ2VuZXM6IHtba2V5OnN0cmluZ106IEdlbmV9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBBcnJheTxDb250aWdJbnRlcnZhbDxzdHJpbmc+PiA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZEdlbmUobmV3R2VuZSkge1xuICAgIGlmICghZ2VuZXNbbmV3R2VuZS5pZF0pIHtcbiAgICAgIGdlbmVzW25ld0dlbmUuaWRdID0gbmV3R2VuZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBHZW5lW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIF8uZWFjaChnZW5lcywgZ2VuZSA9PiB7XG4gICAgICBpZiAocmFuZ2UuaW50ZXJzZWN0cyhnZW5lLnBvc2l0aW9uKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZ2VuZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGlzIGludGVydmFsIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLlxuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkge1xuICAgICAgcmV0dXJuIFEud2hlbigpO1xuICAgIH1cblxuICAgIGNvdmVyZWRSYW5nZXMucHVzaChpbnRlcnZhbCk7XG4gICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgcmV0dXJuIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcoaW50ZXJ2YWwpLnRoZW4oZmVhdHVyZUJsb2NrcyA9PiB7XG4gICAgICBmZWF0dXJlQmxvY2tzLmZvckVhY2goZmIgPT4ge1xuICAgICAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goZmIucmFuZ2UpO1xuICAgICAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG4gICAgICAgIHZhciBnZW5lcyA9IGZiLnJvd3MubWFwKHBhcnNlQmVkRmVhdHVyZSk7XG4gICAgICAgIGdlbmVzLmZvckVhY2goZ2VuZSA9PiBhZGRHZW5lKGdlbmUpKTtcbiAgICAgIH0pO1xuICAgICAgLy93ZSBoYXZlIG5ldyBkYXRhIGZyb20gb3VyIGludGVybmFsIGJsb2NrIHJhbmdlXG4gICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCBpbnRlcnZhbCk7XG4gICAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgZmV0Y2gobmV3UmFuZ2UpLmRvbmUoKTtcbiAgICB9LFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybDpzdHJpbmd9KTogRGF0YVNvdXJjZTxHZW5lPiB7XG4gIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgaWYgKCF1cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlRnJvbUJpZ0JlZEZpbGUobmV3IEJpZ0JlZCh1cmwpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgY3JlYXRlRnJvbUJpZ0JlZEZpbGVcbn07XG4iLCIvKlxuICogVGhpcyBpcyBhIGR1bW15IGRhdGEgc291cmNlIHRvIGJlIHVzZWQgYnkgdHJhY2tzIHRoYXQgZG8gbm90IGRlcGVuZCBvbiBkYXRhLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7R2Vub21lUmFuZ2V9IGZyb20gJy4uL3R5cGVzJztcblxudHlwZSBFbXB0eVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cbnZhciBjcmVhdGUgPSAoKTogRW1wdHlTb3VyY2UgPT4gKHtcbiAgcmFuZ2VDaGFuZ2VkOiAoKSA9PiB7fSxcbiAgb246ICgpID0+IHt9LFxuICBvZmY6ICgpID0+IHt9LFxuICB0cmlnZ2VyOiAoKSA9PiB7fVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIEEgZGF0YSBzb3VyY2Ugd2hpY2ggaW1wbGVtZW50cyB0aGUgR0E0R0ggcHJvdG9jb2wuXG4gKiBDdXJyZW50bHkgb25seSB1c2VkIHRvIGxvYWQgYWxpZ25tZW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgdHlwZSB7QWxpZ25tZW50fSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge0RhdGFTb3VyY2V9IGZyb20gJy4vRGF0YVNvdXJjZSc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBHQTRHSEFsaWdubWVudCBmcm9tICcuLi9HQTRHSEFsaWdubWVudCc7XG5cbnZhciBBTElHTk1FTlRTX1BFUl9SRVFVRVNUID0gMjAwOyAgLy8gVE9ETzogZXhwbGFpbiB0aGlzIGNob2ljZS5cbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cblxuLy8gR2Vub21lIHJhbmdlcyBhcmUgcm91bmRlZCB0byBtdWx0aXBsZXMgb2YgdGhpcyBmb3IgZmV0Y2hpbmcuXG4vLyBUaGlzIHJlZHVjZXMgbmV0d29yayBhY3Rpdml0eSB3aGlsZSBmZXRjaGluZy5cbi8vIFRPRE86IHR1bmUgdGhpcyB2YWx1ZSAtLSBzZXR0aW5nIGl0IGNsb3NlIHRvIHRoZSByZWFkIGxlbmd0aCB3aWxsIHJlc3VsdCBpblxuLy8gbG90cyBvZiByZWFkcyBiZWluZyBmZXRjaGVkIHR3aWNlLCBidXQgc2V0dGluZyBpdCB0b28gbGFyZ2Ugd2lsbCByZXN1bHQgaW5cbi8vIGJ1bGtpZXIgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG5cbnR5cGUgR0E0R0hTcGVjID0ge1xuICBlbmRwb2ludDogc3RyaW5nO1xuICByZWFkR3JvdXBJZDogc3RyaW5nO1xuICAvLyBIQUNLIGZvciBkZW1vLiBJZiBzZXQsIHdpbGwgYWx3YXlzIHVzZSB0aGlzIHJlZmVyZW5jZSBpZC5cbiAgLy8gVGhpcyBpcyBmb3IgZmV0Y2hpbmcgcmVmZXJlbmNlSWRzIHNwZWNpZmllZCBpbiBHQTRHSCByZWZlcmVuY2VcbiAgLy8gc2VydmVyXG4gIGZvcmNlZFJlZmVyZW5jZUlkOiA/c3RyaW5nO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKHNwZWM6IEdBNEdIU3BlYyk6IERhdGFTb3VyY2U8QWxpZ25tZW50PiB7XG4gIHZhciB1cmwgPSBzcGVjLmVuZHBvaW50ICsgJy9yZWFkcy9zZWFyY2gnO1xuXG4gIHZhciByZWFkczoge1trZXk6c3RyaW5nXTogQWxpZ25tZW50fSA9IHt9O1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlczogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPltdID0gW107XG5cbiAgZnVuY3Rpb24gYWRkUmVhZHNGcm9tUmVzcG9uc2UocmVzcG9uc2U6IE9iamVjdCkge1xuICAgIGlmIChyZXNwb25zZS5hbGlnbm1lbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmVzcG9uc2UuYWxpZ25tZW50cy5mb3JFYWNoKGFsaWdubWVudCA9PiB7XG4gICAgICAvLyBvcHRpbWl6YXRpb246IGRvbid0IGJvdGhlciBjb25zdHJ1Y3RpbmcgYSBHQTRHSEFsaWdubWVudCB1bmxlc3MgaXQncyBuZXcuXG4gICAgICB2YXIga2V5ID0gR0E0R0hBbGlnbm1lbnQua2V5RnJvbUdBNEdIUmVzcG9uc2UoYWxpZ25tZW50KTtcbiAgICAgIGlmIChrZXkgaW4gcmVhZHMpIHJldHVybjtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciBnYTRnaEFsaWdubWVudCA9IG5ldyBHQTRHSEFsaWdubWVudChhbGlnbm1lbnQpO1xuICAgICAgICByZWFkc1trZXldID0gZ2E0Z2hBbGlnbm1lbnQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIHNvbWV0aW1lcywgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIgZG9lcyBub3QgaGF2ZSBhbiBhbGlnbm1lbnQuXG4gICAgICAgIC8vIHRoaXMgd2lsbCBjYXRjaCBhbiBleGNlcHRpb24gaW4gdGhlIEdBNEdIQWxpZ25tZW50IGNvbnN0cnVjdG9yXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkgcmV0dXJuO1xuXG4gICAgaW50ZXJ2YWwgPSBpbnRlcnZhbC5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG5cbiAgICAvLyBzZWxlY3Qgb25seSBpbnRlcnZhbHMgbm90IHlldCBsb2FkZWQgaW50byBjb3ZlcmVkUmFuZ2Vzw59cbiAgICB2YXIgaW50ZXJ2YWxzID0gaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIC8vIFdlIFwiY292ZXJcIiB0aGUgaW50ZXJ2YWwgaW1tZWRpYXRlbHkgKGJlZm9yZSB0aGUgcmVhZHMgaGF2ZSBhcnJpdmVkKSB0b1xuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICBpbnRlcnZhbHMuZm9yRWFjaChpID0+IHtcbiAgICAgIGZldGNoQWxpZ25tZW50c0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hBbGlnbm1lbnRzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUb2tlbjogP3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtUmVxdWVzdHM6IG51bWJlcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBub3RpZnlGYWlsdXJlKHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0ICsgJyAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICBub3RpZnlGYWlsdXJlKCdFcnJvciBmcm9tIEdBNEdIIGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRSZWFkc0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaEFsaWdubWVudHNGb3JJbnRlcnZhbChyYW5nZSwgcmVzcG9uc2UubmV4dFBhZ2VUb2tlbiwgbnVtUmVxdWVzdHMgKyAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgbm90aWZ5RmFpbHVyZSgnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB0aGlzLnN0YXR1cyk7XG4gICAgfSk7XG5cbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHtudW1SZXF1ZXN0c30pO1xuICAgIC8vIGhhY2sgZm9yIERFTU8uIGZvcmNlIEdBNEdIIHJlZmVyZW5jZSBJRFxuICAgIHZhciBjb250aWcgPSByYW5nZS5jb250aWc7XG4gICAgaWYgKHNwZWMuZm9yY2VkUmVmZXJlbmNlSWQgIT09IHVuZGVmaW5lZClcbiAgICB7XG4gICAgICBjb250aWcgPSBzcGVjLmZvcmNlZFJlZmVyZW5jZUlkO1xuICAgIH1cbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwYWdlVG9rZW46IHBhZ2VUb2tlbixcbiAgICAgIHBhZ2VTaXplOiBBTElHTk1FTlRTX1BFUl9SRVFVRVNULFxuICAgICAgcmVhZEdyb3VwSWRzOiBbc3BlYy5yZWFkR3JvdXBJZF0sXG4gICAgICByZWZlcmVuY2VJZDogY29udGlnLFxuICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0KCksXG4gICAgICBlbmQ6IHJhbmdlLnN0b3AoKVxuICAgIH0pKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IEFsaWdubWVudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG5cbiAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG5cbiAgICByZXR1cm4gXy5maWx0ZXIocmVhZHMsIHJlYWQgPT4gcmVhZC5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdGF0dXM6IHN0cmluZywgcGFyYW06IGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgdGhlIEdBNEdIIEZlYXR1cmUgcHJvdG9jb2wuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHtFdmVudHN9IGZyb20gJ2JhY2tib25lJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuaW1wb3J0IHR5cGUge0RhdGFTb3VyY2V9IGZyb20gJy4vRGF0YVNvdXJjZSc7XG5pbXBvcnQgRmVhdHVyZSBmcm9tICcuLi9kYXRhL2ZlYXR1cmUnO1xuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG52YXIgRkVBVFVSRVNfUEVSX1JFUVVFU1QgPSA0MDA7XG52YXIgWkVST19CQVNFRCA9IGZhbHNlO1xuXG5leHBvcnQgdHlwZSBHQTRHSEZlYXR1cmVTcGVjID0ge1xuICBlbmRwb2ludDogc3RyaW5nO1xuICBmZWF0dXJlU2V0SWQ6IHN0cmluZztcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZShzcGVjOiBHQTRHSEZlYXR1cmVTcGVjKTogRGF0YVNvdXJjZTxGZWF0dXJlPiB7XG4gIHZhciB1cmwgPSBzcGVjLmVuZHBvaW50ICsgJy9mZWF0dXJlcy9zZWFyY2gnO1xuXG4gIHZhciBmZWF0dXJlczoge1trZXk6c3RyaW5nXTogRmVhdHVyZX0gPSB7fTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZEZlYXR1cmVzRnJvbVJlc3BvbnNlKHJlc3BvbnNlOiBPYmplY3QpIHtcbiAgICBpZiAocmVzcG9uc2UuZmVhdHVyZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHJlc3BvbnNlLmZlYXR1cmVzLmZvckVhY2goZ2E0Z2hGZWF0dXJlID0+IHtcbiAgICAgIHZhciBjb250aWdJbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChnYTRnaEZlYXR1cmUucmVmZXJlbmNlTmFtZSwgZ2E0Z2hGZWF0dXJlLnN0YXJ0LCBnYTRnaEZlYXR1cmUuZW5kKTtcblxuICAgICAgdmFyIGtleSA9IGdhNGdoRmVhdHVyZS5pZCArIGNvbnRpZ0ludGVydmFsLnRvU3RyaW5nKCk7XG4gICAgICBpZiAoa2V5IGluIGZlYXR1cmVzKSByZXR1cm47XG4gICAgICB2YXIgZmVhdHVyZSA9IEZlYXR1cmUuZnJvbUdBNEdIKGdhNGdoRmVhdHVyZSk7XG4gICAgICBmZWF0dXJlc1trZXldID0gZmVhdHVyZTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmdlQ2hhbmdlZChuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwobmV3UmFuZ2UuY29udGlnLCBuZXdSYW5nZS5zdGFydCwgbmV3UmFuZ2Uuc3RvcCk7XG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSByZXR1cm47XG5cbiAgICBpbnRlcnZhbCA9IGludGVydmFsLnJvdW5kKEJBU0VfUEFJUlNfUEVSX0ZFVENILCBaRVJPX0JBU0VEKTtcblxuICAgIC8vIHNlbGVjdCBvbmx5IGludGVydmFscyBub3QgeWV0IGxvYWRlZCBpbnRvIGNvdmVyZWRSYW5nZXPDn1xuICAgIHZhciBpbnRlcnZhbHMgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgLy8gV2UgXCJjb3ZlclwiIHRoZSBpbnRlcnZhbCBpbW1lZGlhdGVseSAoYmVmb3JlIHRoZSByZWFkcyBoYXZlIGFycml2ZWQpIHRvXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgbmV0d29yayByZXF1ZXN0cy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIGludGVydmFscy5mb3JFYWNoKGkgPT4ge1xuICAgICAgZmV0Y2hGZWF0dXJlc0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hGZWF0dXJlc0ZvckludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlVG9rZW46ID9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVJlcXVlc3RzOiBudW1iZXIpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgbm90aWZ5RmFpbHVyZSh0aGlzLnN0YXR1cyArICcgJyArIHRoaXMuc3RhdHVzVGV4dCArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgbm90aWZ5RmFpbHVyZSgnRXJyb3IgZnJvbSBHQTRHSCBGZWF0dXJlIGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRGZWF0dXJlc0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaEZlYXR1cmVzRm9ySW50ZXJ2YWwocmFuZ2UsIHJlc3BvbnNlLm5leHRQYWdlVG9rZW4sIG51bVJlcXVlc3RzICsgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIG5vdGlmeUZhaWx1cmUoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAnICsgdGhpcy5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCB7bnVtUmVxdWVzdHN9KTtcbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICBmZWF0dXJlU2V0SWQ6IHNwZWMuZmVhdHVyZVNldElkLFxuICAgICAgcGFnZVRva2VuOiBwYWdlVG9rZW4sXG4gICAgICBwYWdlU2l6ZTogRkVBVFVSRVNfUEVSX1JFUVVFU1QsXG4gICAgICByZWZlcmVuY2VOYW1lOiByYW5nZS5jb250aWcsXG4gICAgICBzdGFydDogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIGVuZDogcmFuZ2Uuc3RvcCgpXG4gICAgfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogRmVhdHVyZVtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgcmV0dXJuIF8uZmlsdGVyKGZlYXR1cmVzLCBmZWF0dXJlID0+IGZlYXR1cmUuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkLFxuICAgIGdldEZlYXR1cmVzSW5SYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuICByZXR1cm4gbztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZVxufTtcbiIsIi8qKlxuICogQSBkYXRhIHNvdXJjZSB3aGljaCByZWFkcyBnZW5lcyBmcm9tIGEgR0E0R0ggRmVhdHVyZSBwcm90b2NvbC5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IHR5cGUge0dBNEdIRmVhdHVyZVNwZWN9ICBmcm9tICcuL0dBNEdIRmVhdHVyZVNvdXJjZSc7XG5cbmltcG9ydCB0eXBlIHtEYXRhU291cmNlfSBmcm9tICcuL0RhdGFTb3VyY2UnO1xuaW1wb3J0IEdlbmUgZnJvbSAnLi4vZGF0YS9nZW5lJztcblxudmFyIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gMTAwO1xudmFyIEdFTkVTX1BFUl9SRVFVRVNUID0gNDAwO1xudmFyIFpFUk9fQkFTRUQgPSBmYWxzZTtcblxuXG5mdW5jdGlvbiBjcmVhdGUoc3BlYzogR0E0R0hGZWF0dXJlU3BlYyk6IERhdGFTb3VyY2U8R2VuZT4ge1xuICB2YXIgdXJsID0gc3BlYy5lbmRwb2ludCArICcvZmVhdHVyZXMvc2VhcmNoJztcblxuICB2YXIgZ2VuZXM6IHtba2V5OnN0cmluZ106IEdlbmV9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRGZWF0dXJlc0Zyb21SZXNwb25zZShyZXNwb25zZTogT2JqZWN0KSB7XG4gICAgaWYgKHJlc3BvbnNlLmZlYXR1cmVzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXNwb25zZS5mZWF0dXJlcy5mb3JFYWNoKGdhNGdoRmVhdHVyZSA9PiB7XG4gICAgICB2YXIgY29udGlnSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2E0Z2hGZWF0dXJlLnJlZmVyZW5jZU5hbWUsIGdhNGdoRmVhdHVyZS5zdGFydCwgZ2E0Z2hGZWF0dXJlLmVuZCk7XG5cbiAgICAgIHZhciBrZXkgPSBnYTRnaEZlYXR1cmUuaWQgKyBjb250aWdJbnRlcnZhbC50b1N0cmluZygpO1xuICAgICAgaWYgKGtleSBpbiBnZW5lcykgcmV0dXJuO1xuICAgICAgdmFyIGdlbmUgPSBHZW5lLmZyb21HQTRHSChnYTRnaEZlYXR1cmUpO1xuICAgICAgZ2VuZXNba2V5XSA9IGdlbmU7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkgcmV0dXJuO1xuXG4gICAgaW50ZXJ2YWwgPSBpbnRlcnZhbC5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG5cbiAgICAvLyBzZWxlY3Qgb25seSBpbnRlcnZhbHMgbm90IHlldCBsb2FkZWQgaW50byBjb3ZlcmVkUmFuZ2Vzw59cbiAgICB2YXIgaW50ZXJ2YWxzID0gaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIC8vIFdlIFwiY292ZXJcIiB0aGUgaW50ZXJ2YWwgaW1tZWRpYXRlbHkgKGJlZm9yZSB0aGUgcmVhZHMgaGF2ZSBhcnJpdmVkKSB0b1xuICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICBpbnRlcnZhbHMuZm9yRWFjaChpID0+IHtcbiAgICAgIGZldGNoRmVhdHVyZXNGb3JJbnRlcnZhbChpLCBudWxsLCAxKTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeUZhaWx1cmUobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgby50cmlnZ2VyKCduZXR3b3JrZmFpbHVyZScsIG1lc3NhZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaEZlYXR1cmVzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUb2tlbjogP3N0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtUmVxdWVzdHM6IG51bWJlcikge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignUE9TVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZTogYW55KSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBub3RpZnlGYWlsdXJlKHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0ICsgJyAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICBub3RpZnlGYWlsdXJlKCdFcnJvciBmcm9tIEdBNEdIIEZlYXR1cmUgZW5kcG9pbnQ6ICcgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGFkZEZlYXR1cmVzRnJvbVJlc3BvbnNlKHJlc3BvbnNlKTtcbiAgICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7ICAvLyBkaXNwbGF5IGRhdGEgYXMgaXQgY29tZXMgaW4uXG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm5leHRQYWdlVG9rZW4pIHtcbiAgICAgICAgICAgIGZldGNoRmVhdHVyZXNGb3JJbnRlcnZhbChyYW5nZSwgcmVzcG9uc2UubmV4dFBhZ2VUb2tlbiwgbnVtUmVxdWVzdHMgKyAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgbm90aWZ5RmFpbHVyZSgnUmVxdWVzdCBmYWlsZWQgd2l0aCBzdGF0dXM6ICcgKyB0aGlzLnN0YXR1cyk7XG4gICAgfSk7XG5cbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIHtudW1SZXF1ZXN0c30pO1xuICAgIHhoci5zZW5kKEpTT04uc3RyaW5naWZ5KHtcbiAgICAgIGZlYXR1cmVTZXRJZDogc3BlYy5mZWF0dXJlU2V0SWQsXG4gICAgICBwYWdlVG9rZW46IHBhZ2VUb2tlbixcbiAgICAgIHBhZ2VTaXplOiBHRU5FU19QRVJfUkVRVUVTVCxcbiAgICAgIHJlZmVyZW5jZU5hbWU6IHJhbmdlLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCgpLFxuICAgICAgZW5kOiByYW5nZS5zdG9wKClcbiAgICB9KSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBHZW5lW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICByZXR1cm4gXy5maWx0ZXIoZ2VuZXMsIGdlbmUgPT4gZ2VuZS5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6IChzdGF0dXM6IHN0cmluZywgcGFyYW06IGFueSkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlXG59O1xuIiwiLyoqXG4gKiBBIGRhdGEgc291cmNlIHdoaWNoIGltcGxlbWVudHMgdGhlIEdBNEdIIFZhcmlhbnQgcHJvdG9jb2wuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IHR5cGUge0dlbm9tZVJhbmdlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG5pbXBvcnQgdHlwZSB7VmNmRGF0YVNvdXJjZX0gZnJvbSAnLi9WY2ZEYXRhU291cmNlJztcbmltcG9ydCB7VmFyaWFudCwgVmFyaWFudENvbnRleHR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcbnZhciBWQVJJQU5UU19QRVJfUkVRVUVTVCA9IDQwMDtcbnZhciBaRVJPX0JBU0VEID0gZmFsc2U7XG5cbnR5cGUgR0E0R0hWYXJpYW50U3BlYyA9IHtcbiAgZW5kcG9pbnQ6IHN0cmluZztcbiAgdmFyaWFudFNldElkOiBzdHJpbmc7XG4gIGNhbGxTZXRJZHM6IHN0cmluZ1tdO1xuICBjYWxsU2V0TmFtZXM/OiBzdHJpbmdbXTsgLy8gb3B0aW9uYWwgcGFyYW1ldGVyIGZvciBkaXNwbGF5aW5nIGNhbGwgc2V0IG5hbWVzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2l0aG91dCB0aGlzIHBhcmFtZXRlciwgdXNlcnMgbXVzdCBtYWtlIGV4dHJhIGh0dHBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlcXVlc3QgZm9yIGNhbGwgc2V0IG5hbWVzIGZvciBHZW5vdHlwZSBUcmFjayBkaXNwbGF5XG59O1xuXG5mdW5jdGlvbiBjcmVhdGUoc3BlYzogR0E0R0hWYXJpYW50U3BlYyk6IFZjZkRhdGFTb3VyY2Uge1xuICB2YXIgdXJsID0gc3BlYy5lbmRwb2ludCArICcvdmFyaWFudHMvc2VhcmNoJztcblxuICB2YXIgdmFyaWFudHM6IHtba2V5OnN0cmluZ106IFZhcmlhbnRDb250ZXh0fSA9IHt9O1xuXG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRWYXJpYW50c0Zyb21SZXNwb25zZShyZXNwb25zZTogT2JqZWN0KSB7XG4gICAgaWYgKHJlc3BvbnNlLnZhcmlhbnRzID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICByZXNwb25zZS52YXJpYW50cy5mb3JFYWNoKGdhNGdoVmFyaWFudCA9PiB7XG4gICAgICB2YXIga2V5ID0gZ2E0Z2hWYXJpYW50LmlkO1xuICAgICAgaWYgKGtleSBpbiB2YXJpYW50cykgcmV0dXJuO1xuXG4gICAgICB2YXIgdmFyaWFudCA9IG5ldyBWYXJpYW50Q29udGV4dChWYXJpYW50LmZyb21HQTRHSChnYTRnaFZhcmlhbnQpLCBnYTRnaFZhcmlhbnQuY2FsbHMpO1xuICAgICAgdmFyaWFudHNba2V5XSA9IHZhcmlhbnQ7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiByYW5nZUNoYW5nZWQobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKG5ld1JhbmdlLmNvbnRpZywgbmV3UmFuZ2Uuc3RhcnQsIG5ld1JhbmdlLnN0b3ApO1xuXG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSByZXR1cm47XG5cbiAgICBpbnRlcnZhbCA9IGludGVydmFsLnJvdW5kKEJBU0VfUEFJUlNfUEVSX0ZFVENILCBaRVJPX0JBU0VEKTtcblxuICAgIC8vIHNlbGVjdCBvbmx5IGludGVydmFscyBub3QgeWV0IGxvYWRlZCBpbnRvIGNvdmVyZWRSYW5nZXPDn1xuICAgIHZhciBpbnRlcnZhbHMgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgLy8gV2UgXCJjb3ZlclwiIHRoZSBpbnRlcnZhbCBpbW1lZGlhdGVseSAoYmVmb3JlIHRoZSByZWFkcyBoYXZlIGFycml2ZWQpIHRvXG4gICAgLy8gcHJldmVudCBkdXBsaWNhdGUgbmV0d29yayByZXF1ZXN0cy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgIGludGVydmFscy5mb3JFYWNoKGkgPT4ge1xuICAgICAgZmV0Y2hWYXJpYW50c0ZvckludGVydmFsKGksIG51bGwsIDEgLyogZmlyc3QgcmVxdWVzdCAqLyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBub3RpZnlGYWlsdXJlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIG8udHJpZ2dlcignbmV0d29ya2ZhaWx1cmUnLCBtZXNzYWdlKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgY29uc29sZS53YXJuKG1lc3NhZ2UpO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2hWYXJpYW50c0ZvckludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlVG9rZW46ID9zdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bVJlcXVlc3RzOiBudW1iZXIpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ1BPU1QnLCB1cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKGU6IGFueSkge1xuICAgICAgdmFyIHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZTtcbiAgICAgIGlmICh0aGlzLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgbm90aWZ5RmFpbHVyZSh0aGlzLnN0YXR1cyArICcgJyArIHRoaXMuc3RhdHVzVGV4dCArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3JDb2RlKSB7XG4gICAgICAgICAgbm90aWZ5RmFpbHVyZSgnRXJyb3IgZnJvbSBHQTRHSCBWYXJpYW50IGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRWYXJpYW50c0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaFZhcmlhbnRzRm9ySW50ZXJ2YWwocmFuZ2UsIHJlc3BvbnNlLm5leHRQYWdlVG9rZW4sIG51bVJlcXVlc3RzICsgMSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBmdW5jdGlvbihlOiBhbnkpIHtcbiAgICAgIG5vdGlmeUZhaWx1cmUoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAnICsgdGhpcy5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCB7bnVtUmVxdWVzdHN9KTtcbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICB2YXJpYW50U2V0SWQ6IHNwZWMudmFyaWFudFNldElkLFxuICAgICAgcGFnZVRva2VuOiBwYWdlVG9rZW4sXG4gICAgICBwYWdlU2l6ZTogVkFSSUFOVFNfUEVSX1JFUVVFU1QsXG4gICAgICByZWZlcmVuY2VOYW1lOiByYW5nZS5jb250aWcsXG4gICAgICBjYWxsU2V0SWRzOiBzcGVjLmNhbGxTZXRJZHMsXG4gICAgICBzdGFydDogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIGVuZDogcmFuZ2Uuc3RvcCgpXG4gICAgfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFyaWFudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG5cbiAgICB2YXIgZmlsdGVyZWQgPSBfLmZpbHRlcih2YXJpYW50cywgdmFyaWFudCA9PiB2YXJpYW50LmludGVyc2VjdHMocmFuZ2UpKTtcbiAgICByZXR1cm4gXy5tYXAoZmlsdGVyZWQsIGYgPT4gZi52YXJpYW50KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEdlbm90eXBlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWYXJpYW50Q29udGV4dFtdIHtcbiAgICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcblxuICAgICAgcmV0dXJuIF8uZmlsdGVyKHZhcmlhbnRzLCB2YXJpYW50ID0+IHZhcmlhbnQuaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q2FsbE5hbWVzKCk6IFEuUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGlmIChzcGVjLmNhbGxTZXROYW1lcykge1xuICAgICAgcmV0dXJuIFEucmVzb2x2ZShzcGVjLmNhbGxTZXROYW1lcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBRLnJlc29sdmUoc3BlYy5jYWxsU2V0SWRzKTtcbiAgICB9XG5cbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZCxcbiAgICBnZXRWYXJpYW50c0luUmFuZ2UsXG4gICAgZ2V0R2Vub3R5cGVzSW5SYW5nZSxcbiAgICBnZXRDYWxsTmFtZXMsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKHN0YXR1czogc3RyaW5nLCBwYXJhbTogYW55KSA9PiB7fVxuICB9O1xuICBfLmV4dGVuZChvLCBFdmVudHMpOyAgLy8gTWFrZSB0aGlzIGFuIGV2ZW50IGVtaXR0ZXJcbiAgcmV0dXJuIG87XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIFRoZSBcImdsdWVcIiBiZXR3ZWVuIFR3b0JpdC5qcyBhbmQgR2Vub21lVHJhY2suanMuXG4gKlxuICogR2Vub21lVHJhY2sgaXMgcHVyZSB2aWV3IGNvZGUgLS0gaXQgcmVuZGVycyBkYXRhIHdoaWNoIGlzIGFscmVhZHkgaW4tbWVtb3J5XG4gKiBpbiB0aGUgYnJvd3Nlci5cbiAqXG4gKiBUd29CaXQgaXMgcHVyZWx5IGZvciBkYXRhIHBhcnNpbmcgYW5kIGZldGNoaW5nLiBJdCBvbmx5IGtub3dzIGhvdyB0byByZXR1cm5cbiAqIHByb21pc2VzIGZvciB2YXJpb3VzIGdlbm9tZSBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGNvZGUgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uIEl0IG1haW50YWlucyBhIGxvY2FsIHZlcnNpb24gb2ZcbiAqIHRoZSBkYXRhLCBmZXRjaGluZyByZW1vdGUgZGF0YSBhbmQgaW5mb3JtaW5nIHRoZSB2aWV3IHdoZW4gaXQgYmVjb21lc1xuICogYXZhaWxhYmxlLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBUd29CaXQgZnJvbSAnLi4vZGF0YS9Ud29CaXQnO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgU2VxdWVuY2VTdG9yZSBmcm9tICcuLi9TZXF1ZW5jZVN0b3JlJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cblxuLy8gUmVxdWVzdHMgZm9yIDJiaXQgcmFuZ2VzIGFyZSBleHBhbmRlZCB0byBiZWdpbiAmIGVuZCBhdCBtdWx0aXBsZXMgb2YgdGhpc1xuLy8gY29uc3RhbnQuIERvaW5nIHRoaXMgbWVhbnMgdGhhdCBwYW5uaW5nIHR5cGljYWxseSB3b24ndCByZXF1aXJlXG4vLyBhZGRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDAwMDtcblxudmFyIE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIID0gMTAwMDAwO1xudmFyIFpFUk9fQkFTRUQgPSB0cnVlO1xuXG5cblxuLy8gRmxvdyB0eXBlIGZvciBleHBvcnQuXG5leHBvcnQgdHlwZSBUd29CaXRTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgZ2V0UmFuZ2U6IChyYW5nZTogR2Vub21lUmFuZ2UpID0+IHtba2V5OnN0cmluZ106ID9zdHJpbmd9O1xuICBnZXRSYW5nZUFzU3RyaW5nOiAocmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiBzdHJpbmc7XG4gIGNvbnRpZ0xpc3Q6ICgpID0+IHN0cmluZ1tdO1xuICBub3JtYWxpemVSYW5nZTogKHJhbmdlOiBHZW5vbWVSYW5nZSkgPT4gUS5Qcm9taXNlPEdlbm9tZVJhbmdlPjtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb25jZTogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cblxudmFyIGNyZWF0ZUZyb21Ud29CaXRGaWxlID0gZnVuY3Rpb24ocmVtb3RlU291cmNlOiBUd29CaXQpOiBUd29CaXRTb3VyY2Uge1xuICAvLyBMb2NhbCBjYWNoZSBvZiBnZW5vbWljIGRhdGEuXG4gIHZhciBjb250aWdMaXN0ID0gW107XG4gIHZhciBzdG9yZSA9IG5ldyBTZXF1ZW5jZVN0b3JlKCk7XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzID0gKFtdOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10pO1xuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIHNwYW4gPSByYW5nZS5sZW5ndGgoKTtcbiAgICBpZiAoc3BhbiA+IE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIKSB7XG4gICAgICAvL2luZm9ybSB0aGF0IHdlIHdvbid0IGZldGNoIHRoZSBkYXRhXG4gICAgICBvLnRyaWdnZXIoJ25ld2RhdGFyZWZ1c2VkJywgcmFuZ2UpO1xuICAgICAgcmV0dXJuIFEud2hlbigpOyAgLy8gZW1wdHkgcHJvbWlzZVxuICAgIH1cbiAgICAvL25vdyB3ZSBjYW4gYWRkIHJlZ2lvbiB0byBjb3ZlcmVkIHJlZ2lvbnNcbiAgICAvL2RvaW5nIGl0IGVhcmxpZXIgd291bGQgcHJvdmlkZSBpbmNvbnNpc3RlbmN5XG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKHJhbmdlKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG5cbiAgICByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKVxuICAgICAgLnRoZW4obGV0dGVycyA9PiB7XG4gICAgICAgIGlmICghbGV0dGVycykgcmV0dXJuO1xuICAgICAgICBpZiAobGV0dGVycy5sZW5ndGggPCByYW5nZS5sZW5ndGgoKSkge1xuICAgICAgICAgIC8vIFByb2JhYmx5IGF0IEVPRlxuICAgICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0KCkgKyBsZXR0ZXJzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHN0b3JlLnNldFJhbmdlKHJhbmdlLCBsZXR0ZXJzKTtcbiAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgICB9KS5kb25lKCk7XG4gIH1cblxuICAvLyBUaGlzIGVpdGhlciBhZGRzIG9yIHJlbW92ZXMgYSAnY2hyJyBhcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVJhbmdlU3luYyhyYW5nZTogR2Vub21lUmFuZ2UpOiBHZW5vbWVSYW5nZSB7XG4gICAgaWYgKGNvbnRpZ0xpc3QuaW5kZXhPZihyYW5nZS5jb250aWcpID49IDApIHtcbiAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG4gICAgdmFyIGFsdENvbnRpZyA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoY29udGlnTGlzdC5pbmRleE9mKGFsdENvbnRpZykgPj0gMCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY29udGlnOiBhbHRDb250aWcsXG4gICAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCxcbiAgICAgICAgc3RvcDogcmFuZ2Uuc3RvcFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJhbmdlOyAgLy8gbGV0IGl0IGZhaWwgd2l0aCB0aGUgb3JpZ2luYWwgY29udGlnXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpOiBRLlByb21pc2U8R2Vub21lUmFuZ2U+IHtcbiAgICByZXR1cm4gY29udGlnUHJvbWlzZS50aGVuKCgpID0+IG5vcm1hbGl6ZVJhbmdlU3luYyhyYW5nZSkpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHtcImNocjEyOjEyM1wiIC0+IFwiW0FUQ0ddXCJ9IG1hcHBpbmcgZm9yIHRoZSByYW5nZS5cbiAgZnVuY3Rpb24gZ2V0UmFuZ2UocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgcmV0dXJuIHN0b3JlLmdldEFzT2JqZWN0cyhDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpKTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBzdHJpbmcgb2YgYmFzZSBwYWlycyBmb3IgdGhpcyByYW5nZS5cbiAgZnVuY3Rpb24gZ2V0UmFuZ2VBc1N0cmluZyhyYW5nZTogR2Vub21lUmFuZ2UpOiBzdHJpbmcge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiAnJztcbiAgICByZXR1cm4gc3RvcmUuZ2V0QXNTdHJpbmcoQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHJhbmdlKSk7XG4gIH1cblxuICAvLyBGZXRjaCB0aGUgY29udGlnIGxpc3QgaW1tZWRpYXRlbHkuXG4gIHZhciBjb250aWdQcm9taXNlID0gcmVtb3RlU291cmNlLmdldENvbnRpZ0xpc3QoKS50aGVuKGMgPT4ge1xuICAgIGNvbnRpZ0xpc3QgPSBjO1xuICAgIG8udHJpZ2dlcignY29udGlncycsIGNvbnRpZ0xpc3QpO1xuICAgIHJldHVybiBjO1xuICB9KTtcbiAgY29udGlnUHJvbWlzZS5kb25lKCk7XG5cbiAgdmFyIG8gPSB7XG4gICAgLy8gVGhlIHJhbmdlIGhlcmUgaXMgMC1iYXNlZCwgaW5jbHVzaXZlXG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIG5vcm1hbGl6ZVJhbmdlKG5ld1JhbmdlKS50aGVuKHIgPT4ge1xuICAgICAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoci5jb250aWcsIHIuc3RhcnQsIHIuc3RvcCk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICAgICAgaWYgKHJhbmdlLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgcmFuZ2UgPSByYW5nZS5yb3VuZChCQVNFX1BBSVJTX1BFUl9GRVRDSCwgWkVST19CQVNFRCk7XG4gICAgICAgIHZhciBuZXdSYW5nZXMgPSByYW5nZS5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICAgIGZvciAodmFyIG5ld1JhbmdlIG9mIG5ld1Jhbmdlcykge1xuICAgICAgICAgIGZldGNoKG5ld1JhbmdlKTtcbiAgICAgICAgfVxuICAgICAgfSkuZG9uZSgpO1xuICAgIH0sXG4gICAgLy8gVGhlIHJhbmdlcyBwYXNzZWQgdG8gdGhlc2UgbWV0aG9kcyBhcmUgMC1iYXNlZFxuICAgIGdldFJhbmdlLFxuICAgIGdldFJhbmdlQXNTdHJpbmcsXG4gICAgY29udGlnTGlzdDogKCkgPT4gY29udGlnTGlzdCxcbiAgICBub3JtYWxpemVSYW5nZSxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb25jZTogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKGRhdGE6IHt1cmw6c3RyaW5nfSk6IFR3b0JpdFNvdXJjZSB7XG4gIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgaWYgKCF1cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlRnJvbVR3b0JpdEZpbGUobmV3IFR3b0JpdChuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG59XG5cbi8vIEdldHRlci9zZXR0ZXIgZm9yIGJhc2UgcGFpcnMgcGVyIGZldGNoLlxuLy8gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB0ZXN0aW5nLlxuZnVuY3Rpb24gdGVzdEJhc2VQYWlyc1RvRmV0Y2gobnVtPzogbnVtYmVyKTogYW55IHtcbiAgaWYgKG51bSkge1xuICAgIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gbnVtO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBCQVNFX1BBSVJTX1BFUl9GRVRDSDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVHdvQml0RmlsZSxcbiAgdGVzdEJhc2VQYWlyc1RvRmV0Y2hcbn07XG4iLCIvKipcbiAqIENhY2hpbmcgJiBwcmVmZXRjaGluZyBmb3IgVkNGIHNvdXJjZXMuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5cbmltcG9ydCBFdmVudHMgZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCB0eXBlIHtHZW5vbWVSYW5nZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBSZW1vdGVGaWxlIGZyb20gJy4uL1JlbW90ZUZpbGUnO1xuaW1wb3J0IExvY2FsU3RyaW5nRmlsZSBmcm9tICcuLi9Mb2NhbFN0cmluZ0ZpbGUnO1xuLy8gcmVxdWlyZW1lbnQgZm9yIGpzaGludCB0byBwYXNzXG4vKiBleHBvcnRlZCBWYXJpYW50ICovXG5pbXBvcnQge1ZhcmlhbnQsIFZhcmlhbnRDb250ZXh0fSBmcm9tICcuLi9kYXRhL3ZhcmlhbnQnO1xuaW1wb3J0IHtWY2ZGaWxlfSBmcm9tICcuLi9kYXRhL3ZjZic7XG5cblxuZXhwb3J0IHR5cGUgVmNmRGF0YVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBnZXRWYXJpYW50c0luUmFuZ2U6IChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikgPT4gVmFyaWFudFtdO1xuICBnZXRHZW5vdHlwZXNJblJhbmdlOiAocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pID0+IFZhcmlhbnRDb250ZXh0W107XG4gIGdldENhbGxOYW1lczogKCkgPT4gUS5Qcm9taXNlPHN0cmluZ1tdPjtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufTtcblxuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG52YXIgWkVST19CQVNFRCA9IGZhbHNlO1xuXG5mdW5jdGlvbiB2YXJpYW50Q29udGV4dEtleSh2OiBWYXJpYW50Q29udGV4dCk6IHN0cmluZyB7XG4gIHJldHVybiBgJHt2LnZhcmlhbnQuY29udGlnfToke3YudmFyaWFudC5wb3NpdGlvbn1gO1xufVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21WY2ZGaWxlKHJlbW90ZVNvdXJjZTogVmNmRmlsZSk6IFZjZkRhdGFTb3VyY2Uge1xuICB2YXIgdmFyaWFudHM6IHtba2V5OiBzdHJpbmddOiBWYXJpYW50Q29udGV4dH0gPSB7fTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZFZhcmlhbnRDb250ZXh0KHY6IFZhcmlhbnRDb250ZXh0KSB7XG4gICAgdmFyIGtleSA9IHZhcmlhbnRDb250ZXh0S2V5KHYpO1xuICAgIGlmICghdmFyaWFudHNba2V5XSkge1xuICAgICAgdmFyaWFudHNba2V5XSA9IHY7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgIHJldHVybiBRLndoZW4oKTtcbiAgICB9XG5cbiAgICBpbnRlcnZhbCA9IGludGVydmFsLnJvdW5kKEJBU0VfUEFJUlNfUEVSX0ZFVENILCBaRVJPX0JBU0VEKTtcblxuICAgIC8vIFwiQ292ZXJcIiB0aGUgcmFuZ2UgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGUgZmV0Y2hlcy5cbiAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcbiAgICByZXR1cm4gcmVtb3RlU291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShpbnRlcnZhbCkudGhlbih2YXJpYW50cyA9PiB7XG4gICAgICB2YXJpYW50cy5mb3JFYWNoKHZhcmlhbnQgPT4gYWRkVmFyaWFudENvbnRleHQodmFyaWFudCkpO1xuICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgaW50ZXJ2YWwpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFyaWFudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107ICAvLyBYWFggd2h5IHdvdWxkIHRoaXMgaGFwcGVuP1xuICAgIHZhciBmaWx0ZXJlZCA9IF8uZmlsdGVyKHZhcmlhbnRzLCB2ID0+IHJhbmdlLmNvbnRhaW5zTG9jdXModi52YXJpYW50LmNvbnRpZywgdi52YXJpYW50LnBvc2l0aW9uKSk7XG4gICAgcmV0dXJuIF8ubWFwKGZpbHRlcmVkLCBmID0+IGYudmFyaWFudCk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHZW5vdHlwZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudENvbnRleHRbXSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKHZhcmlhbnRzLCB2ID0+IHJhbmdlLmNvbnRhaW5zTG9jdXModi52YXJpYW50LmNvbnRpZywgdi52YXJpYW50LnBvc2l0aW9uKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDYWxsTmFtZXMoKTogUS5Qcm9taXNlPHN0cmluZ1tdPiB7XG4gICAgcmV0dXJuIHJlbW90ZVNvdXJjZS5nZXRDYWxsTmFtZXMoKS50aGVuKHNhbXBsZXMgPT4ge1xuICAgICAgcmV0dXJuIHNhbXBsZXM7XG4gICAgfSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgZmV0Y2gobmV3UmFuZ2UpLmRvbmUoKTtcbiAgICB9LFxuICAgIGdldFZhcmlhbnRzSW5SYW5nZSxcbiAgICBnZXRHZW5vdHlwZXNJblJhbmdlLFxuICAgIGdldENhbGxOYW1lcyxcblxuICAgIC8vIFRoZXNlIGFyZSBoZXJlIHRvIG1ha2UgRmxvdyBoYXBweS5cbiAgICBvbjogKCkgPT4ge30sXG4gICAgb2ZmOiAoKSA9PiB7fSxcbiAgICB0cmlnZ2VyOiAoc3RhdHVzOiBzdHJpbmcsIHBhcmFtOiBhbnkpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybD86IHN0cmluZywgY29udGVudD86IHN0cmluZ30pOiBWY2ZEYXRhU291cmNlIHtcbiAgdmFyIHt1cmwsIGNvbnRlbnR9ID0gZGF0YTtcbiAgaWYgKHVybCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG4gIH0gZWxzZSBpZiAoY29udGVudCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgTG9jYWxTdHJpbmdGaWxlKGNvbnRlbnQpKSk7XG4gIH1cbiAgLy8gSWYgbm8gVVJMIG9yIGNvbnRlbnQgaXMgcGFzc2VkLCBmYWlsXG4gIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgb3IgY29udGVudCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVmNmRmlsZVxufTtcbiIsIi8qKlxuICogQ2VudHJhbCBjb2xsZWN0aW9uIG9mIHN0eWxpbmcgc2V0dGluZ3MuXG4gKiBVbnRpbCB3ZSBmaWd1cmUgb3V0IGEgYmV0dGVyIHN0b3J5IGFyb3VuZCBjYW52YXMgJiBDU1MsIHRoZXkgbGl2ZSBoZXJlLlxuICpcbiAqIEBmbG93XG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCBEaXNwbGF5TW9kZSBmcm9tICcuL3Zpei9EaXNwbGF5TW9kZSc7XG5cblxuLyoqXG4gKiBDb21wdXRlcyBzdHlsZXMgZm9yIGJhc2UgcGFpcnMgd2hpY2ggYXJlIHJlbmRlcmVkIGFzIGxldHRlcnMuXG4gICpcbiAqIEBwYXJhbSBtb2RlIERpc3BsYXlNb2RlIHRvIHJlbmRlciB0ZXh0LlxuICogQHBhcmFtIGZvbnRTaXplIGZvbnQgc2l6ZS5cbiAqL1xuZnVuY3Rpb24gVEVYVF9TVFlMRShtb2RlOiBudW1iZXIsIGZvbnRTaXplOiBudW1iZXIpOiBzdHJpbmcge1xuXG4gIGlmIChtb2RlID09IERpc3BsYXlNb2RlLkxPT1NFKSB7XG4gICAgcmV0dXJuICBgJHtmb250U2l6ZX1weCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYDtcbiAgfSBlbHNlIGlmIChtb2RlID09IERpc3BsYXlNb2RlLlRJR0hUKSB7XG4gICAgcmV0dXJuIGBib2xkICR7Zm9udFNpemV9cHggJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZmA7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGAke2ZvbnRTaXplfXB4YDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgVEVYVF9TVFlMRSxcblxuICAvLyBDb2xvcnMgZm9yIGluZGl2aWR1YWwgYmFzZSBwYWlyc1xuICBCQVNFX0NPTE9SUzoge1xuICAgICdBJzogJyMxODg3MTInLFxuICAgICdHJzogJyNDNDVDMTYnLFxuICAgICdDJzogJyMwNjAwRjknLFxuICAgICdUJzogJyNGNzAwMTYnLFxuICAgICdVJzogJyNGNzAwMTYnLFxuICAgICdOJzogJ2JsYWNrJ1xuICB9LFxuXG5cbiAgLy8gR2VuZSB0cmFja1xuICBHRU5FX0FSUk9XX1NJWkU6IDQsXG4gIEdFTkVfQ09MT1I6ICdibHVlJywgIC8vIGNvbG9yIG9mIHRoZSBnZW5lIGxpbmUsIGV4b25zLCB0ZXh0LCBldGMuXG4gIEdFTkVfQ09NUExFTUVOVF9DT0xPUjogJ3doaXRlJywgIC8vIGEgY29sb3IgdmlzaWJsZSBvbiB0b3Agb2YgR0VORV9DT0xPUlxuICBHRU5FX0ZPTlQ6IGAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgR0VORV9GT05UX1NJWkU6IDE2LFxuICBHRU5FX1RFWFRfUEFERElORzogNSwgIC8vIHNwYWNlIGJldHdlZW4gYm90dG9tIG9mIGNvZGluZyBleG9uICYgdG9wIG9mIGdlbmUgbmFtZVxuXG4gIC8vIFBpbGV1cCB0cmFja1xuICBBTElHTk1FTlRfQ09MT1I6ICcjYzhjOGM4JyxcbiAgQUxJR05NRU5UX01JTlVTX1NUUkFORF9DT0xPUjogJ3JnYigxNzYsIDE3NiwgMjM2KScsXG4gIEFMSUdOTUVOVF9QTFVTX1NUUkFORF9DT0xPUjogJ3JnYigyMzYsIDE3NiwgMTc2KScsXG4gIERFTEVURV9DT0xPUjogJ2JsYWNrJyxcbiAgSU5TRVJUX0NPTE9SOiAncmdiKDk3LCAwLCAyMTYpJyxcbiAgUkVBRF9TUEFDSU5HOiAyLCAvLyB2ZXJ0aWNhbCBzcGFjaW5nIGJldHdlZW4gcmVhZHNcbiAgUkVBRF9IRUlHSFQ6IDEzLCAvLyBIZWlnaHQgb2YgcmVhZFxuXG5cbiAgLy8gQ292ZXJhZ2UgdHJhY2tcbiAgQ09WRVJBR0VfRk9OVF9TVFlMRTogYGJvbGQgOXB4ICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBDT1ZFUkFHRV9GT05UX0NPTE9SOiAnYmxhY2snLFxuICBDT1ZFUkFHRV9USUNLX0xFTkdUSDogNSxcbiAgQ09WRVJBR0VfVEVYVF9QQURESU5HOiAzLCAgLy8gc3BhY2UgYmV0d2VlbiBheGlzIHRpY2tzIGFuZCB0ZXh0XG4gIENPVkVSQUdFX1RFWFRfWV9PRkZTRVQ6IDMsICAvLyBzbyB0aGF0IHRpY2tzIGFuZCB0ZXh0cyBhbGlnbiBiZXR0ZXJcbiAgQ09WRVJBR0VfQklOX0NPTE9SOiAnI2EwYTBhMCcsXG4gIENPVkVSQUdFX01JTl9CQVJfV0lEVEhfRk9SX0dBUDogOCwgIC8vIHNob3cgYSAxcHggZ2FwIGJldHdlZW4gYmFycyBhdCB0aGlzIHJlc29sdXRpb25cblxuICAvLyBTY2FsZSBUcmFja1xuICBTQ0FMRV9MSU5FX1BBRERJTkc6IDQwLCAgLy8gc3BhY2UgYmV0d2VlbiBtaWQgcG9pbnQgYW5kIGxlZnQvcmlnaHQgbGluZXNcbiAgU0NBTEVfRk9OVF9TVFlMRTogYGJvbGQgMTJweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgU0NBTEVfVEVYVF9ZX09GRlNFVDogNSwgIC8vIHNvIHRoYXQgbGluZXMgYW5kIHRoZSB0ZXh0IGFsaWduIGJldHRlclxuICBTQ0FMRV9GT05UX0NPTE9SOiAnYmxhY2snLFxuICBTQ0FMRV9BUlJPV19TSVpFOiA0LFxuXG4gIC8vIExvY2F0aW9uIHRyYWNrXG4gIExPQ19URVhUX1BBRERJTkc6IDUsICAvLyBzcGFjZSBiZXR3ZWVuIG1pZC1wb2ludCBsYWJlbCBhbmQgdGlja1xuICBMT0NfVElDS19MRU5HVEg6IDEwLFxuICBMT0NfVEVYVF9ZX09GRlNFVDogNSwgIC8vIHNvIHRoYXQgdGhlIGxpbmUgYW5kIHRoZSB0ZXh0IGFsaWduIGJldHRlclxuICBMT0NfRk9OVF9TVFlMRTogYDEzcHggJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZmAsXG4gIExPQ19GT05UX0NPTE9SOiAnYmxhY2snLFxuXG4gIC8vIFZhcmlhbnQgVHJhY2tcbiAgVkFSSUFOVF9TVFJPS0U6ICdibHVlJyxcbiAgVkFSSUFOVF9GSUxMOiAnI2RkZCcsXG4gIFZBUklBTlRfSEVJR0hUOiAxNCxcblxuICAvLyBHZW5vdHlwZSBUcmFja1xuICBHRU5PVFlQRV9TUEFDSU5HOiAxLFxuICBHRU5PVFlQRV9IRUlHSFQ6IDEwLFxuICBHRU5PVFlQRV9GSUxMX0hFVDogJyMwMDE1ZmYnLFxuICBHRU5PVFlQRV9GSUxMX0hPTTogJyMwMGYxZjknLFxuICBCQUNLR1JPVU5EX0ZJTEw6ICcjZjJmMmYyJyxcblxufTtcbiIsIi8qKlxuICogQ29tbW9uIHR5cGVzIHVzZWQgaW4gbWFueSBtb2R1bGVzLlxuICpcbiAqIEZsb3cgbWFrZXMgaXQgZGlmZmljdWx0IGZvciBhIG1vZHVsZSB0byBleHBvcnQgYm90aCBzeW1ib2xzIGFuZCB0eXBlcy4gVGhpc1xuICogbW9kdWxlIHNlcnZlcyBhcyBhIGR1bXBpbmcgZ3JvdW5kIGZvciB0eXBlcyB3aGljaCB3ZSdkIHJlYWxseSBsaWtlIHRvIGV4cG9ydFxuICogZnJvbSBvdGhlciBtb2R1bGVzLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gUHVibGljIEFQSVxuXG5pbXBvcnQge1JlYWN0fSBmcm9tICcuL1NoaW1EZXBlbmRlbmNpZXMnO1xuXG5leHBvcnQgY29uc3QgQWxsZWxGcmVxdWVuY3lTdHJhdGVneSA9IHtcbiAgTWlub3IgOiB7bmFtZTogXCJNaW5vclwifSxcbiAgTWFqb3IgOiB7bmFtZTogXCJNYWpvclwifSxcbn07XG5cblxuZXhwb3J0IHR5cGUgTmV0d29ya1N0YXR1cyA9IHtudW1SZXF1ZXN0cz86IG51bWJlciwgc3RhdHVzPzogc3RyaW5nfTtcblxuZXhwb3J0IHR5cGUgU3RhdGUgPSB7XG4gIG5ldHdvcmtTdGF0dXM6ID9OZXR3b3JrU3RhdHVzO1xufTtcblxuZXhwb3J0IHR5cGUgVml6V2l0aE9wdGlvbnMgPSB7XG4gIGNvbXBvbmVudDogQ2xhc3M8UmVhY3QuQ29tcG9uZW50PGFueSwgYW55Pj47XG4gIG9wdGlvbnM6ID9PYmplY3Q7XG59XG5cbmV4cG9ydCB0eXBlIFRyYWNrID0ge1xuICB2aXo6IFZpeldpdGhPcHRpb25zO1xuICBkYXRhOiBPYmplY3Q7ICAvLyBUaGlzIGlzIGEgRGF0YVNvdXJjZSBvYmplY3RcbiAgbmFtZT86IHN0cmluZztcbiAgY3NzQ2xhc3M/OiBzdHJpbmc7XG4gIGlzUmVmZXJlbmNlPzogYm9vbGVhbjtcbiAgb3B0aW9ucz86IE9iamVjdFxufVxuXG5leHBvcnQgdHlwZSBWaXN1YWxpemVkVHJhY2sgPSB7XG4gIHZpc3VhbGl6YXRpb246IFZpeldpdGhPcHRpb25zO1xuICBzb3VyY2U6IE9iamVjdDsgIC8vIGRhdGEgc291cmNlXG4gIHRyYWNrOiBUcmFjazsgIC8vIGZvciBjc3MgY2xhc3MgYW5kIG9wdGlvbnNcbn1cblxuZXhwb3J0IHR5cGUgR2Vub21lUmFuZ2UgPSB7XG4gIGNvbnRpZzogc3RyaW5nO1xuICBzdGFydDogbnVtYmVyOyAgLy8gaW5jbHVzaXZlXG4gIHN0b3A6IG51bWJlcjsgIC8vIGluY2x1c2l2ZVxufVxuXG5leHBvcnQgdHlwZSBQYXJ0aWFsR2Vub21lUmFuZ2UgPSB7XG4gIGNvbnRpZz86IHN0cmluZztcbiAgc3RhcnQ/OiBudW1iZXI7XG4gIHN0b3A/OiBudW1iZXI7XG59XG5cbi8vIEJBTS9CQUkgcGFyc2luZ1xuXG5pbXBvcnQgdHlwZSBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vZGF0YS9WaXJ0dWFsT2Zmc2V0JztcblxuZXhwb3J0IHR5cGUgQ2h1bmsgPSB7XG4gIGNodW5rX2JlZzogVmlydHVhbE9mZnNldDtcbiAgY2h1bmtfZW5kOiBWaXJ0dWFsT2Zmc2V0O1xufVxuXG4vLyBzcmMvdXRpbHMuanNcbmV4cG9ydCB0eXBlIEluZmxhdGVkQmxvY2sgPSB7XG4gIG9mZnNldDogbnVtYmVyO1xuICBjb21wcmVzc2VkTGVuZ3RoOiBudW1iZXI7XG4gIGJ1ZmZlcjogQXJyYXlCdWZmZXI7XG59XG4iLCIvKipcbiAqIEdyYWItYmFnIG9mIHV0aWxpdHkgZnVuY3Rpb25zLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7SW5mbGF0ZWRCbG9jaywgUGFydGlhbEdlbm9tZVJhbmdlfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB0eXBlIFEgZnJvbSAncSc7XG5cbmltcG9ydCBwYWtvIGZyb20gJ3Bha28vbGliL2luZmxhdGUnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuL0ludGVydmFsJztcblxuLy8gQ29tcGFyZSB0d28gdHVwbGVzIG9mIGVxdWFsIGxlbmd0aC4gSXMgdDEgPD0gdDI/XG4vLyBUT0RPOiBtYWtlIHRoaXMgdHVwbGVMZXNzT3JFcXVhbDxUPiAtLSBpdCB3b3JrcyB3aXRoIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIHRvby5cbmZ1bmN0aW9uIHR1cGxlTGVzc09yRXF1YWwodDE6IEFycmF5PG51bWJlcj4sIHQyOiBBcnJheTxudW1iZXI+KTogYm9vbGVhbiB7XG4gIGlmICh0MS5sZW5ndGggIT0gdDIubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoJ0NvbXBhcmluZyBub24tZXF1YWwgbGVuZ3RoIHR1cGxlcycpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHQxLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHQxW2ldID4gdDJbaV0pIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHQxW2ldIDwgdDJbaV0pIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gRG8gdHdvIHJhbmdlcyBvZiB0dXBsZXMgb3ZlcmxhcD9cbi8vIFRPRE86IG1ha2UgdGhpcyB0dXBsZVJhbmdlT3ZlcmxhcHM8VD4gLS0gaXQgd29ya3Mgd2l0aCBzdHJpbmdzIG9yIGJvb2xlYW5zLCB0b28uXG5mdW5jdGlvbiB0dXBsZVJhbmdlT3ZlcmxhcHModHVwbGVSYW5nZTE6IEFycmF5PEFycmF5PG51bWJlcj4+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR1cGxlUmFuZ2UyOiBBcnJheTxBcnJheTxudW1iZXI+Pik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgICAvLyBBcmUgdGhlIHJhbmdlcyBvdmVybGFwcGluZz9cbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMVswXSwgdHVwbGVSYW5nZTJbMV0pICYmXG4gICAgIHR1cGxlTGVzc09yRXF1YWwodHVwbGVSYW5nZTJbMF0sIHR1cGxlUmFuZ2UxWzFdKSAmJlxuICAgICAvLyAuLi4gYW5kIG5vbi1lbXB0eT9cbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMVswXSwgdHVwbGVSYW5nZTFbMV0pICYmXG4gICAgIHR1cGxlTGVzc09yRXF1YWwodHVwbGVSYW5nZTJbMF0sIHR1cGxlUmFuZ2UyWzFdKSk7XG59XG5cbi8vIFJldHVybiBhIG5ldyBBcnJheUJ1ZmZlciBieSBjb25jYXRlbmF0aW5nIGFuIGFycmF5IG9mIEFycmF5QnVmZmVycy5cbmZ1bmN0aW9uIGNvbmNhdEFycmF5QnVmZmVycyhidWZmZXJzOiBBcnJheUJ1ZmZlcltdKTogQXJyYXlCdWZmZXIge1xuICB2YXIgdG90YWxCeXRlcyA9IGJ1ZmZlcnMubWFwKGIgPT4gYi5ieXRlTGVuZ3RoKS5yZWR1Y2UoKGEsIGIpID0+IGEgKyBiLCAwKTtcbiAgdmFyIG91dHB1dCA9IG5ldyBVaW50OEFycmF5KHRvdGFsQnl0ZXMpO1xuICB2YXIgcG9zaXRpb24gPSAwO1xuICBidWZmZXJzLmZvckVhY2goYnVmID0+IHtcbiAgICBvdXRwdXQuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZiksIHBvc2l0aW9uKTtcbiAgICBwb3NpdGlvbiArPSBidWYuYnl0ZUxlbmd0aDtcbiAgfSk7XG4gIHJldHVybiBvdXRwdXQuYnVmZmVyO1xufVxuXG50eXBlIEluZmxhdGVDYWNoZUtleSA9IHtcbiAgZmlsZW5hbWU6IHN0cmluZztcbiAgaW5pdGlhbE9mZnNldDogbnVtYmVyO1xufVxuXG50eXBlIFBha29SZXN1bHQgPSB7XG4gIGVycjogbnVtYmVyO1xuICBtc2c6IHN0cmluZztcbiAgYnVmZmVyOiA/QXJyYXlCdWZmZXI7XG4gIHRvdGFsX2luOiBudW1iZXI7XG59XG52YXIgaW5mbGF0aW9uQ2FjaGU6IHtba2V5OiBzdHJpbmddOiBQYWtvUmVzdWx0fSA9IHt9O1xuXG4vLyBleHRyYWN0ZWQgZm9yIGNhY2hpbmdcbmZ1bmN0aW9uIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pOiBQYWtvUmVzdWx0IHtcbiAgdmFyIGluZmxhdG9yID0gbmV3IHBha28uSW5mbGF0ZSgpO1xuICBpbmZsYXRvci5wdXNoKGJ1ZmZlci5zbGljZShwb3NpdGlvbikpO1xuICByZXR1cm4ge1xuICAgIGVycjogaW5mbGF0b3IuZXJyLFxuICAgIG1zZzogaW5mbGF0b3IubXNnLFxuICAgIGJ1ZmZlcjogaW5mbGF0b3IucmVzdWx0ID8gaW5mbGF0b3IucmVzdWx0LmJ1ZmZlciA6IG51bGwsXG4gICAgdG90YWxfaW46IGluZmxhdG9yLnN0cm0udG90YWxfaW5cbiAgfTtcbn1cblxuZnVuY3Rpb24gY2FjaGVkSW5mbGF0ZU9uZShidWZmZXIsIHBvc2l0aW9uLCBjYWNoZT86IEluZmxhdGVDYWNoZUtleSkge1xuICBpZiAoIWNhY2hlKSB7XG4gICAgcmV0dXJuIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG4gIHZhciBjYWNoZUtleSA9IGNhY2hlLmZpbGVuYW1lICsgJzonICsgKGNhY2hlLmluaXRpYWxPZmZzZXQgKyBwb3NpdGlvbik7XG4gIHZhciB2ID0gaW5mbGF0aW9uQ2FjaGVbY2FjaGVLZXldO1xuICBpZiAodiAmJiAocG9zaXRpb24gKyB2LnRvdGFsX2luID4gYnVmZmVyLmJ5dGVMZW5ndGgpKSB7XG4gICAgLy8gSXQgc2hvdWxkIGZhaWwuXG4gICAgcmV0dXJuIF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKCF2KSB7XG4gICAgdiA9IF9pbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24pO1xuICB9XG4gIGlmICghdi5lcnIgJiYgdi5idWZmZXIpIHtcbiAgICBpbmZsYXRpb25DYWNoZVtjYWNoZUtleV0gPSB2O1xuICB9XG4gIHJldHVybiB2O1xufVxuXG4vKipcbiAqIEJBTSBmaWxlcyBhcmUgd3JpdHRlbiBpbiBcIkJHWkZcIiBmb3JtYXQsIHdoaWNoIGNvbnNpc3RzIG9mIG1hbnkgY29uY2F0ZW5hdGVkXG4gKiBnemlwIGJsb2Nrcy4gZ3VuemlwIGNvbmNhdGVuYXRlcyBhbGwgdGhlIGluZmxhdGVkIGJsb2NrcywgYnV0IHBha28gb25seVxuICogaW5mbGF0ZXMgb25lIGJsb2NrIGF0IGEgdGltZS4gVGhpcyB3cmFwcGVyIG1ha2VzIHBha28gYmVoYXZlIGxpa2UgZ3VuemlwLlxuICogSWYgc3BlY2lmaWVkLCBsYXN0QmxvY2tTdGFydCB3aWxsIHN0b3AgaW5mbGF0aW9uIGJlZm9yZSBhbGwgdGhlIGJsb2Nrc1xuICogaGF2ZSBiZWVuIHByb2Nlc3NlZC5cbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZUNvbmNhdGVuYXRlZEd6aXAoYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhc3RCbG9ja1N0YXJ0PzogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FjaGU/OiBJbmZsYXRlQ2FjaGVLZXkpOiBJbmZsYXRlZEJsb2NrW10ge1xuICB2YXIgcG9zaXRpb24gPSAwLFxuICAgICAgYmxvY2tzID0gW107XG4gIGlmIChsYXN0QmxvY2tTdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGFzdEJsb2NrU3RhcnQgPSBidWZmZXIuYnl0ZUxlbmd0aDtcbiAgfVxuICBkbyB7XG4gICAgdmFyIHJlc3VsdCA9IGNhY2hlZEluZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbiwgY2FjaGUpO1xuXG4gICAgaWYgKHJlc3VsdC5lcnIpIHtcbiAgICAgIHRocm93ICdHemlwIGVycm9yOiAnICsgcmVzdWx0Lm1zZztcbiAgICB9XG4gICAgaWYgKHJlc3VsdC5idWZmZXIpIHtcbiAgICAgIGJsb2Nrcy5wdXNoKHtcbiAgICAgICAgb2Zmc2V0OiBwb3NpdGlvbixcbiAgICAgICAgY29tcHJlc3NlZExlbmd0aDogcmVzdWx0LnRvdGFsX2luLFxuICAgICAgICBidWZmZXI6IHJlc3VsdC5idWZmZXJcbiAgICAgIH0pO1xuICAgIH1cbiAgICBwb3NpdGlvbiArPSByZXN1bHQudG90YWxfaW47XG4gIH0gd2hpbGUgKHBvc2l0aW9uIDw9IGxhc3RCbG9ja1N0YXJ0ICYmIHBvc2l0aW9uIDwgYnVmZmVyLmJ5dGVMZW5ndGgpO1xuICByZXR1cm4gYmxvY2tzO1xufVxuXG4vKipcbiAqIEluZmxhdGUgb25lIG9yIG1vcmUgZ3ppcCBibG9ja3MgaW4gdGhlIGJ1ZmZlci5cbiAqIFJldHVybnMgdGhlIGNvbmNhdGVuYXRpb24gb2YgYWxsIGluZmxhdGVkIGJsb2Nrcy5cbiAqIFRoaXMgbWlycm9ycyB0aGUgYmVoYXZpb3Igb2YgZ3ppcCgxKS5cbiAqL1xuZnVuY3Rpb24gaW5mbGF0ZUd6aXAoYnVmZmVyOiBBcnJheUJ1ZmZlcik6IEFycmF5QnVmZmVyIHtcbiAgcmV0dXJuIGNvbmNhdEFycmF5QnVmZmVycyhpbmZsYXRlQ29uY2F0ZW5hdGVkR3ppcChidWZmZXIpLm1hcCh4ID0+IHguYnVmZmVyKSk7XG59XG5cbi8vIEdpdmVuICdjaHI5JywgcmV0dXJuICc5Jy4gR2l2ZW4gJzknLCByZXR1cm4gJ2NocjknLlxuZnVuY3Rpb24gYWx0Q29udGlnTmFtZShjb250aWc6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmIChjb250aWcuc2xpY2UoMCwgMykgPT0gJ2NocicpIHtcbiAgICByZXR1cm4gY29udGlnLnNsaWNlKDMpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAnY2hyJyArIGNvbnRpZztcbiAgfVxufVxuXG4vLyBBcmUgdHdvIHN0cmluZ3MgZXF1YWwgbW9kdWxlIGEgJ2NocicgcHJlZml4P1xuLy8gZS5nLiBpc0Nock1hdGNoKCcxNycsICdjaHIxNycpID09IHRydWVcbmZ1bmN0aW9uIGlzQ2hyTWF0Y2goYTogc3RyaW5nLCBiOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIGEgPT0gYiB8fCAnY2hyJyArIGEgPT0gYiB8fCBhID09ICdjaHInICsgYjtcbn1cblxuLyoqXG4gKiBQaXBlIGFsbCBwcm9taXNlIGV2ZW50cyB0aHJvdWdoIGEgZGVmZXJyZWQgb2JqZWN0LlxuICogVGhpcyBpcyBzaW1pbGFyIHRvIGRlZmVycmVkLnJlc29sdmUocHJvbWlzZSksIGV4Y2VwdCB0aGF0IGl0IGFsbG93cyBwcm9ncmVzc1xuICogbm90aWZpY2F0aW9ucyBmcm9tIHRoZSBwcm9taXNlIHRvIGJ1YmJsZSB0aHJvdWdoLlxuICovXG5mdW5jdGlvbiBwaXBlUHJvbWlzZTxUPihkZWZlcnJlZDogUS5EZWZlcnJlZDxUPiwgcHJvbWlzZTogUS5Qcm9taXNlPFQ+KSB7XG4gIHByb21pc2UudGhlbihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG59XG5cbi8qKlxuICogU2NhbGUgdGhlIHJhbmdlIGJ5IGBmYWN0b3JgIGFib3V0IGl0cyBjZW50ZXIuXG4gKiBmYWN0b3IgMi4wIHdpbGwgcHJvZHVjZSBhIHJhbmdlIHdpdGggdHdpY2UgdGhlIHNwYW4sIDAuNSB3aXRoIGhhbGYuXG4gKiBBbiBpbnZhcmlhbnQgaXMgdGhhdCB0aGUgY2VudGVyIHZhbHVlIHdpbGwgYmUgaWRlbnRpY2FsIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKi9cbmZ1bmN0aW9uIHNjYWxlUmFuZ2UocmFuZ2U6IEludGVydmFsLCBmYWN0b3I6IG51bWJlcik6IEludGVydmFsIHtcbiAgdmFyIHNwYW4gPSByYW5nZS5zdG9wIC0gcmFuZ2Uuc3RhcnQsXG4gICAgICBjZW50ZXIgPSBNYXRoLmZsb29yKChyYW5nZS5zdGFydCArIHJhbmdlLnN0b3ApIC8gMiksXG4gICAgICBuZXdTcGFuID0gTWF0aC5yb3VuZChmYWN0b3IgKiBzcGFuIC8gMikgKiAyLFxuICAgICAgc3RhcnQgPSBjZW50ZXIgLSBuZXdTcGFuIC8gMixcbiAgICAgIHN0b3AgPSBjZW50ZXIgKyBuZXdTcGFuIC8gMjsgIC8vIFRPRE86IGNsYW1wXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIC8vIFNoaWZ0IHRvIHRoZSByaWdodCBzbyB0aGF0IHRoZSByYW5nZSBzdGFydHMgYXQgemVyby5cbiAgICBzdG9wIC09IHN0YXJ0O1xuICAgIHN0YXJ0ID0gMDtcbiAgfVxuICByZXR1cm4gbmV3IEludGVydmFsKHN0YXJ0LCBzdG9wKTtcbn1cblxuLyoqXG4gKiBDaGFuZ2VzIHRoZSByYW5nZSBzcGFuIHRvIDIqaGFsZlNwYW4qKmxldmVsICsgMVxuICogTmV3IHJhbmdlIGxvb2tzIGxpa2UgfCBoYWxmU3BhbioqbGV2ZWwgfCBjZW50ZXIgfCBoYWxmU3BhbioqbGV2ZWwgfFxuICogQW4gaW52YXJpYW50IGlzIHRoYXQgdGhlIGNlbnRlciB2YWx1ZSB3aWxsIGJlIGlkZW50aWNhbCBiZWZvcmUgYW5kIGFmdGVyLlxuICovXG5mdW5jdGlvbiBhYnNTY2FsZVJhbmdlKHJhbmdlOiBJbnRlcnZhbCwgbGV2ZWw6IG51bWJlciwgaGFsZlNwYW46IG51bWJlcik6IEludGVydmFsIHtcbiAgdmFyIGNlbnRlciA9IE1hdGguZmxvb3IoKHJhbmdlLnN0YXJ0ICsgcmFuZ2Uuc3RvcCkgLyAyKSxcbiAgICAgIG5ld0hhbGZTcGFuID0gaGFsZlNwYW4qKmxldmVsLFxuICAgICAgc3RhcnQgPSBjZW50ZXIgLSBuZXdIYWxmU3BhbixcbiAgICAgIHN0b3AgPSBjZW50ZXIgKyBuZXdIYWxmU3BhbjsgIC8vIFRPRE86IGNsYW1wXG5cbiAgIGlmIChzdGFydCA8IDApIHtcbiAgICAvLyBTaGlmdCB0byB0aGUgcmlnaHQgc28gdGhhdCB0aGUgcmFuZ2Ugc3RhcnRzIGF0IHplcm8uXG4gICAgc3RvcCAtPSBzdGFydDtcbiAgICBzdGFydCA9IDA7XG4gIH1cbiAgcmV0dXJuIG5ldyBJbnRlcnZhbChzdGFydCwgc3RvcCk7XG59XG5cbi8qKlxuICogUGFyc2UgYSB1c2VyLXNwZWNpZmllZCByYW5nZSBpbnRvIGEgcmFuZ2UuXG4gKiBPbmx5IHRoZSBzcGVjaWZpZWQgcG9ydGlvbnMgb2YgdGhlIHJhbmdlIHdpbGwgYmUgZmlsbGVkIG91dCBpbiB0aGUgcmV0dXJuZWQgb2JqZWN0LlxuICogRm9yIGV4YW1wbGU6XG4gKiAnY2hyMTcnIC0tPiB7Y29udGlnOidjaHIxNyd9XG4gKiAnMTAtMjAnIC0tPiB7c3RhcnQ6IDEwLCBzdG9wOiAyMH1cbiAqICcxNzoxMC0yMCcgLS0+IHtjb250aWc6ICcxNycsIHN0YXJ0OiAxMCwgc3RvcDogMjB9XG4gKiBSZXR1cm5zIG51bGwgaWYgdGhlIHJhbmdlIGNhbid0IGJlIHBhcnNlZC5cbiAqL1xuZnVuY3Rpb24gcGFyc2VSYW5nZShyYW5nZTogc3RyaW5nKTogP1BhcnRpYWxHZW5vbWVSYW5nZSB7XG4gIC8vIEZpcnN0IHRyeSAnY29udGlnOnN0YXJ0LXN0b3AnXG4gIHZhciBtID0gL14oW14gOl0rKTooWzAtOSxdKyktKFswLTksXSspJC8uZXhlYyhyYW5nZSk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRpZzogbVsxXSxcbiAgICAgIHN0YXJ0OiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsyXSksXG4gICAgICBzdG9wOiBwYXJzZU51bWJlcldpdGhDb21tYXMobVszXSlcbiAgICB9O1xuICB9XG5cbiAgLy8gVGhlbiBjb250aWc6bnVtYmVyXG4gIG0gPSAvXihbXiA6XSspOihbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7XG4gICAgICBjb250aWc6IG1bMV0sXG4gICAgICBzdGFydDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMl0pLFxuICAgIH07XG4gIH1cblxuICAvLyBUaGVuICdzdGFydDpzdG9wJ1xuICBtID0gL14oWzAtOSxdKyktKFswLTksXSspJC8uZXhlYyhyYW5nZSk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsxXSksXG4gICAgICBzdG9wOiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsyXSlcbiAgICB9O1xuICB9XG5cbiAgLy8gVGhlbiAnY29udGlnOicgb3Igbm9uLW51bWVyaWMgJ2NvbnRpZydcbiAgbSA9IC9eKFteIDpdKyk6JC8uZXhlYyhyYW5nZSkgfHwgL14oW14wLTldW14gOl0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7IGNvbnRpZzogbVsxXSB9O1xuICB9XG5cbiAgLy8gVGhlbiBwbGFpbi1vbGQgbnVtYmVycy5cbiAgbSA9IC9eKFswLTksXSspJC8uZXhlYyhyYW5nZSk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIHsgc3RhcnQ6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzFdKSB9O1xuICB9XG5cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0SW50ZXJ2YWwoaXY6IEludGVydmFsKTogc3RyaW5nIHtcbiAgcmV0dXJuIG51bWJlcldpdGhDb21tYXMoaXYuc3RhcnQpICsgJy0nICsgbnVtYmVyV2l0aENvbW1hcyhpdi5zdG9wKTtcbn1cblxuLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI5MDEyOTgvMzg4OTUxXG5mdW5jdGlvbiBudW1iZXJXaXRoQ29tbWFzKHg6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZU51bWJlcldpdGhDb21tYXMoeDogc3RyaW5nKTogbnVtYmVyIHtcbiAgcmV0dXJuIHBhcnNlSW50KHgucmVwbGFjZSgvLC9nLCAnJyksIDEwKTtcbn1cblxuZnVuY3Rpb24gZmxhdE1hcDxULCBSPihhcnJheTogVFtdLCBmbjogKHQ6IFQpPT5SW10pOiBSW10ge1xuICByZXR1cm4gXy5mbGF0dGVuKGFycmF5Lm1hcChmbiksIHRydWUgLyogc2hhbGxvdyAqLyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHRoZSBwZXJjZW50aWxlLXRoIGVsZW1lbnQgb2YgeHMuXG4gKiBwZXJjZW50aWxlIHNob3VsZCBiZSBhbiBpbnRlZ2VyIGZyb20gMSB0byA5OS5cbiAqIFRoaXMgd2lsbCBzb3J0IHRoZSB4cy5cbiAqL1xuZnVuY3Rpb24gY29tcHV0ZVBlcmNlbnRpbGUoeHM6IG51bWJlcltdLCBwZXJjZW50aWxlOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAoeHMubGVuZ3RoID09PSAwKSByZXR1cm4gMDsgIC8vIHBsYWNlaG9sZGVyIHZhbHVlXG5cbiAgeHMuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICB2YXIgaWR4ID0gKHhzLmxlbmd0aCAtIDEpICogcGVyY2VudGlsZSAvIDEwMCxcbiAgICAgIGxvID0gTWF0aC5mbG9vcihpZHgpLFxuICAgICAgaGkgPSBNYXRoLmNlaWwoaWR4KTtcblxuICBpZiAobG8gPT0gaGkpIHtcbiAgICByZXR1cm4geHNbbG9dO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB4c1tsb10gKiAoaWR4IC0gbG8pICsgeHNbaGldICogKGhpIC0gaWR4KTtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc3RyaW5nIGludG8gYSBudWxsLCBOYU4sIHVuZGVmaW5lZCwgSW5mIG9yIC1JbmYuIFJldHVybnNcbiAqIG9yaWdpbmFsIHN0cmluZyBpZiBzdHJpbmcgaXMgbm90IGEgc3BlY2lhbCBjYXNlLlxuICogUmV0dXJucyBzdHJpbmcgcGFyc2VkIHRvIHNwZWNpYWwgY2FzZSAobnVsbCwgTmFOLCB1bmRlZmluZWQsIEluZiBvciAtSW5mKVxuICogb3Igb3JpZ2luYWwgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBzdHJpbmdUb0xpdGVyYWwodmFsdWU6IHN0cmluZyk6IGFueSB7XG4gIHZhciBtYXBzID0ge1xuICAgXCJOYU5cIjogTmFOLFxuICAgXCJudWxsXCI6IG51bGwsXG4gICBcInVuZGVmaW5lZFwiOiB1bmRlZmluZWQsXG4gICBcIkluZmluaXR5XCI6IEluZmluaXR5LFxuICAgXCItSW5maW5pdHlcIjogLUluZmluaXR5XG4gICB9O1xuICByZXR1cm4gKCh2YWx1ZSBpbiBtYXBzKSA/IG1hcHNbdmFsdWVdIDogdmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdHVwbGVMZXNzT3JFcXVhbCxcbiAgdHVwbGVSYW5nZU92ZXJsYXBzLFxuICBjb25jYXRBcnJheUJ1ZmZlcnMsXG4gIGluZmxhdGVDb25jYXRlbmF0ZWRHemlwLFxuICBpbmZsYXRlR3ppcCxcbiAgYWx0Q29udGlnTmFtZSxcbiAgcGlwZVByb21pc2UsXG4gIHNjYWxlUmFuZ2UsXG4gIGFic1NjYWxlUmFuZ2UsXG4gIHBhcnNlUmFuZ2UsXG4gIGZvcm1hdEludGVydmFsLFxuICBpc0Nock1hdGNoLFxuICBmbGF0TWFwLFxuICBjb21wdXRlUGVyY2VudGlsZSxcbiAgc3RyaW5nVG9MaXRlcmFsXG59O1xuIiwiLyoqXG4gKiBBYnN0cmFjdENhY2hlXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuLypqc2hpbnQgdW51c2VkOmZhbHNlICovXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcblxuaW1wb3J0IHR5cGUge1Zpc3VhbEFsaWdubWVudH0gZnJvbSAnLi9QaWxldXBDYWNoZSc7XG5pbXBvcnQgR2VuZXJpY0ZlYXR1cmUgZnJvbSAnLi4vZGF0YS9nZW5lcmljRmVhdHVyZS5qcyc7XG5cblxuZXhwb3J0IHR5cGUgVmlzdWFsR3JvdXA8VDogKFZpc3VhbEFsaWdubWVudCB8IEdlbmVyaWNGZWF0dXJlKT4gPSB7XG4gIGtleTogc3RyaW5nO1xuICByb3c6IG51bWJlcjsgIC8vIHBpbGV1cCByb3cuXG4gIHNwYW46IENvbnRpZ0ludGVydmFsPHN0cmluZz47ICAvLyB0aXAtdG8tdGlwIHNwYW4gZm9yIHRoZSByZWFkIGdyb3VwXG4gIGluc2VydDogP0ludGVydmFsOyAgLy8gaW50ZXJ2YWwgZm9yIHRoZSBjb25uZWN0b3IsIGlmIGFwcGxpY2FibGUuXG4gIGl0ZW1zOiBUW107XG59O1xuXG5jbGFzcyBBYnN0cmFjdENhY2hlPFQ6IChWaXN1YWxBbGlnbm1lbnQgfCBHZW5lcmljRmVhdHVyZSk+IHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICBncm91cHM6IHtba2V5OiBzdHJpbmddOiBWaXN1YWxHcm91cDxUPn07IFxuICByZWZUb1BpbGV1cDoge1trZXk6IHN0cmluZ106IEFycmF5PEludGVydmFsW10+fTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UpIHtcbiAgICB0aGlzLmdyb3VwcyA9IHt9O1xuICAgIHRoaXMucmVmVG9QaWxldXAgPSB7fTtcbiAgICB0aGlzLnJlZmVyZW5jZVNvdXJjZSA9IHJlZmVyZW5jZVNvdXJjZTtcbiAgfVxuXG4gIHBpbGV1cEZvclJlZihyZWY6IHN0cmluZyk6IEFycmF5PEludGVydmFsW10+IHtcbiAgICBpZiAocmVmIGluIHRoaXMucmVmVG9QaWxldXApIHtcbiAgICAgIHJldHVybiB0aGlzLnJlZlRvUGlsZXVwW3JlZl07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhbHQgPSB1dGlscy5hbHRDb250aWdOYW1lKHJlZik7XG4gICAgICBpZiAoYWx0IGluIHRoaXMucmVmVG9QaWxldXApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmVG9QaWxldXBbYWx0XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBIb3cgbWFueSByb3dzIHRhbGwgaXMgdGhlIHBpbGV1cCBmb3IgYSBnaXZlbiByZWY/IFRoaXMgaXMgcmVsYXRlZCB0byB0aGVcbiAgLy8gbWF4aW11bSByZWFkIGRlcHRoLiBUaGlzIGlzICdjaHInLWFnbm9zdGljLlxuICBwaWxldXBIZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHZhciBwaWxldXAgPSB0aGlzLnBpbGV1cEZvclJlZihyZWYpO1xuICAgIHJldHVybiBwaWxldXAgPyBwaWxldXAubGVuZ3RoIDogMDtcbiAgfVxuXG4gIC8vIEZpbmQgZ3JvdXBzIG92ZXJsYXBwaW5nIHRoZSByYW5nZS4gVGhpcyBpcyAnY2hyJy1hZ25vc3RpYy5cbiAgZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBWaXN1YWxHcm91cDxUPltdIHtcbiAgICAvLyBUT0RPOiBzcGVlZCB0aGlzIHVwIHVzaW5nIGFuIGludGVydmFsIHRyZWVcbiAgICByZXR1cm4gXy5maWx0ZXIodGhpcy5ncm91cHMsIGdyb3VwID0+IGdyb3VwLnNwYW4uaW50ZXJzZWN0cyhyYW5nZSkpO1xuICB9XG5cbiAgLy8gRGV0ZXJtaW5lIHRoZSBudW1iZXIgb2YgZ3JvdXBzIGF0IGEgbG9jdXMuXG4gIC8vIExpa2UgZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpLmxlbmd0aCA+IDAsIGJ1dCBtb3JlIGVmZmljaWVudC5cbiAgYW55R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBib29sZWFuIHtcbiAgICBmb3IgKHZhciBrIGluIHRoaXMuZ3JvdXBzKSB7XG4gICAgICB2YXIgZ3JvdXAgPSB0aGlzLmdyb3Vwc1trXTtcbiAgICAgIGlmIChncm91cC5zcGFuLmludGVyc2VjdHMocmFuZ2UpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBYnN0cmFjdENhY2hlO1xuIiwiLyoqXG4gKiBEYXRhIG1hbmFnZW1lbnQgZm9yIENvdmVyYWdlVHJhY2suXG4gKlxuICogVGhpcyBjbGFzcyB0cmFja3MgY291bnRzIGFuZCBtaXNtYXRjaGVzIGF0IGVhY2ggbG9jdXMuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7QWxpZ25tZW50fSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IEZlYXR1cmUgZnJvbSAnLi4vZGF0YS9mZWF0dXJlJztcbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7Q292ZXJhZ2VDb3VudH0gZnJvbSAnLi9waWxldXB1dGlscyc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgdHlwZSBCaW5TdW1tYXJ5ID0ge1xuICBjb3VudDogbnVtYmVyO1xuICAvLyBUaGVzZSBwcm9wZXJ0aWVzIHdpbGwgb25seSBiZSBwcmVzZW50IHdoZW4gdGhlcmUgYXJlIG1pc21hdGNoZXMuXG4gIG1pc21hdGNoZXM/OiB7W2tleTogc3RyaW5nXTogbnVtYmVyfTtcbiAgcmVmPzogc3RyaW5nOyAgLy8gd2hhdCBkb2VzIHRoZSByZWZlcmVuY2UgaGF2ZSBoZXJlP1xufTtcblxuLy8gVGhpcyBjbGFzcyBwcm92aWRlcyBkYXRhIG1hbmFnZW1lbnQgZm9yIHRoZSB2aXN1YWxpemF0aW9uLCBncm91cGluZyBwYWlyZWRcbi8vIHJlYWRzIGFuZCBtYW5hZ2luZyB0aGUgcGlsZXVwLlxuY2xhc3MgQ292ZXJhZ2VDYWNoZTxUOiAoQWxpZ25tZW50IHwgRmVhdHVyZSk+IHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICBpdGVtczoge1trZXk6IHN0cmluZ106IFR9O1xuICAvLyByZWYgLS0+IHBvc2l0aW9uIC0tPiBCaW5TdW1tYXJ5XG4gIHJlZlRvQ291bnRzOiB7W2tleTogc3RyaW5nXToge1trZXk6IG51bWJlcl06IEJpblN1bW1hcnl9fTtcbiAgcmVmVG9NYXhDb3ZlcmFnZToge1trZXk6IHN0cmluZ106IG51bWJlcn07XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuXG4gIGNvbnN0cnVjdG9yKHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlKSB7XG4gICAgdGhpcy5pdGVtcyA9IHt9O1xuICAgIHRoaXMucmVmVG9Db3VudHMgPSB7fTtcbiAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2UgPSB7fTtcbiAgICB0aGlzLnJlZmVyZW5jZVNvdXJjZSA9IHJlZmVyZW5jZVNvdXJjZTtcbiAgfVxuXG4gIC8vIExvYWQgYSBuZXcgcmVhZCBpbnRvIHRoZSB2aXN1YWxpemF0aW9uIGNhY2hlLlxuICAvLyBDYWxsaW5nIHRoaXMgbXVsdGlwbGUgdGltZXMgd2l0aCB0aGUgc2FtZSByZWFkIGlzIGEgbm8tb3AuXG4gIGFkZEl0ZW0oaXRlbTogVCkge1xuICAgIHZhciBrZXkgPSBpdGVtLmdldEtleSgpO1xuICAgIGlmIChrZXkgaW4gdGhpcy5pdGVtcykgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBzZWVuIHRoaXMgb25lLlxuICAgIHRoaXMuaXRlbXNba2V5XSA9IGl0ZW07XG4gICAgdmFyIGNvdmVyYWdlQ291bnQgPSBpdGVtLmdldENvdmVyYWdlKHRoaXMucmVmZXJlbmNlU291cmNlKTtcbiAgICB0aGlzLmFkZFRvQ292ZXJhZ2UoY292ZXJhZ2VDb3VudCk7XG4gIH1cblxuICAvLyBVcGRhdGVzIHJlZmVyZW5jZSBtaXNtYXRjaCBpbmZvcm1hdGlvbiBmb3IgcHJldmlvdXNseS1sb2FkZWQgcmVhZHMuXG4gIHVwZGF0ZU1pc21hdGNoZXMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB2YXIgcmVmID0gdGhpcy5fY2Fub25pY2FsUmVmKHJhbmdlLmNvbnRpZyk7XG4gICAgdGhpcy5yZWZUb0NvdW50c1tyZWZdID0ge307ICAvLyBUT0RPOiBjb3VsZCBiZSBtb3JlIGVmZmljaWVudFxuICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdID0gMDtcblxuICAgIGZvciAodmFyIGsgaW4gdGhpcy5pdGVtcykge1xuICAgICAgdmFyIGl0ZW06IChGZWF0dXJlIHwgQWxpZ25tZW50KSA9IHRoaXMuaXRlbXNba107XG4gICAgICBpZiAoaXRlbS5nZXRJbnRlcnZhbCgpLmNock9uQ29udGlnKHJhbmdlLmNvbnRpZykpIHtcbiAgICAgICAgdmFyIGNvdmVyYWdlQ291bnQgPSBpdGVtLmdldENvdmVyYWdlKHRoaXMucmVmZXJlbmNlU291cmNlKTtcbiAgICAgICAgdGhpcy5hZGRUb0NvdmVyYWdlKGNvdmVyYWdlQ291bnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFkZFRvQ292ZXJhZ2UoY292ZXJhZ2VDb3VudDogQ292ZXJhZ2VDb3VudCkge1xuXG4gICAgLy8gQWRkIGNvdmVyYWdlL21pc21hdGNoIGluZm9ybWF0aW9uXG4gICAgdmFyIHJlZiA9IHRoaXMuX2Nhbm9uaWNhbFJlZihjb3ZlcmFnZUNvdW50LnJhbmdlLmNvbnRpZyk7XG4gICAgaWYgKCEocmVmIGluIHRoaXMucmVmVG9Db3VudHMpKSB7XG4gICAgICB0aGlzLnJlZlRvQ291bnRzW3JlZl0gPSB7fTtcbiAgICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdID0gMDtcbiAgICB9XG4gICAgdmFyIGNvdW50cyA9IHRoaXMucmVmVG9Db3VudHNbcmVmXSxcbiAgICAgICAgbWF4ID0gdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0sXG4gICAgICAgIGNvbnRpZyA9IGNvdmVyYWdlQ291bnQucmFuZ2UsXG4gICAgICAgIHN0YXJ0ID0gY29udGlnLnN0YXJ0KCksXG4gICAgICAgIHN0b3AgPSBjb250aWcuc3RvcCgpO1xuICAgIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPD0gc3RvcDsgcG9zKyspIHtcbiAgICAgIGxldCBjID0gY291bnRzW3Bvc107XG4gICAgICBpZiAoIWMpIHtcbiAgICAgICAgY291bnRzW3Bvc10gPSBjID0ge2NvdW50OiAwfTtcbiAgICAgIH1cbiAgICAgIGMuY291bnQgKz0gMTtcbiAgICAgIGlmIChjLmNvdW50ID4gbWF4KSBtYXggPSBjLmNvdW50O1xuICAgIH1cblxuICAgIGlmIChjb3ZlcmFnZUNvdW50Lm9wSW5mbykge1xuICAgICAgZm9yICh2YXIgbW0gb2YgY292ZXJhZ2VDb3VudC5vcEluZm8ubWlzbWF0Y2hlcykge1xuICAgICAgICB2YXIgYmluID0gY291bnRzW21tLnBvc107XG4gICAgICAgIHZhciBtaXNtYXRjaGVzO1xuICAgICAgICBpZiAoYmluLm1pc21hdGNoZXMpIHtcbiAgICAgICAgICBtaXNtYXRjaGVzID0gYmluLm1pc21hdGNoZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWlzbWF0Y2hlcyA9IGJpbi5taXNtYXRjaGVzID0ge307XG4gICAgICAgICAgYmluLnJlZiA9IHRoaXMucmVmZXJlbmNlU291cmNlLmdldFJhbmdlQXNTdHJpbmcoe1xuICAgICAgICAgICAgY29udGlnOiByZWYsIHN0YXJ0OiBtbS5wb3MsIHN0b3A6IG1tLnBvc30pO1xuICAgICAgICB9XG4gICAgICAgIGxldCBjID0gbWlzbWF0Y2hlc1ttbS5iYXNlUGFpcl0gfHwgMDtcbiAgICAgICAgbWlzbWF0Y2hlc1ttbS5iYXNlUGFpcl0gPSAxICsgYztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0gPSBtYXg7XG5cbiAgfVxuXG4gIG1heENvdmVyYWdlRm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0gfHxcbiAgICAgICAgdGhpcy5yZWZUb01heENvdmVyYWdlW3V0aWxzLmFsdENvbnRpZ05hbWUocmVmKV0gfHxcbiAgICAgICAgMDtcbiAgfVxuXG4gIGJpbnNGb3JSZWYocmVmOiBzdHJpbmcpOiB7W2tleTogbnVtYmVyXTogQmluU3VtbWFyeX0ge1xuICAgIHJldHVybiB0aGlzLnJlZlRvQ291bnRzW3JlZl0gfHxcbiAgICAgICAgdGhpcy5yZWZUb0NvdW50c1t1dGlscy5hbHRDb250aWdOYW1lKHJlZildIHx8XG4gICAgICAgIHt9O1xuICB9XG5cbiAgLy8gUmV0dXJucyB3aGljaGV2ZXIgZm9ybSBvZiB0aGUgcmVmIChcImNocjE3XCIsIFwiMTdcIikgaGFzIGJlZW4gc2Vlbi5cbiAgX2Nhbm9uaWNhbFJlZihyZWY6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMucmVmVG9Db3VudHNbcmVmXSkgcmV0dXJuIHJlZjtcbiAgICB2YXIgYWx0ID0gdXRpbHMuYWx0Q29udGlnTmFtZShyZWYpO1xuICAgIGlmICh0aGlzLnJlZlRvQ291bnRzW2FsdF0pIHJldHVybiBhbHQ7XG4gICAgcmV0dXJuIHJlZjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvdmVyYWdlQ2FjaGU7XG4iLCIvKipcbiAqIENvdmVyYWdlIHZpc3VhbGl6YXRpb24gb2YgQWxpZ25tZW50IHNvdXJjZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9EYXRhU291cmNlJztcbmltcG9ydCBGZWF0dXJlIGZyb20gJy4uL2RhdGEvZmVhdHVyZSc7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge0JpblN1bW1hcnl9IGZyb20gJy4vQ292ZXJhZ2VDYWNoZSc7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgdHlwZSB7U3RhdGV9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuXG5pbXBvcnQge1JlYWN0fSBmcm9tICcuLi9TaGltRGVwZW5kZW5jaWVzJztcbmltcG9ydCBzY2FsZSBmcm9tICcuLi9zY2FsZSc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IENvdmVyYWdlQ2FjaGUgZnJvbSAnLi9Db3ZlcmFnZUNhY2hlJztcbmltcG9ydCBUaWxlZENhbnZhcyBmcm9tICcuL1RpbGVkQ2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuXG4vLyBCYXNpYyBzZXR1cCAoVE9ETzogbWFrZSB0aGlzIGNvbmZpZ3VyYWJsZSBieSB0aGUgdXNlcilcbmNvbnN0IFNIT1dfTUlTTUFUQ0hFUyA9IHRydWU7XG5cbi8vIE9ubHkgc2hvdyBtaXNtYXRjaCBpbmZvcm1hdGlvbiB3aGVuIHRoZXJlIGFyZSBtb3JlIHRoYW4gdGhpcyBtYW55XG4vLyByZWFkcyBzdXBwb3J0aW5nIHRoYXQgbWlzbWF0Y2guXG5jb25zdCBNSVNNQVRDSF9USFJFU0hPTEQgPSAxO1xuXG5cbmNsYXNzIENvdmVyYWdlVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIGhlaWdodDogbnVtYmVyO1xuICBvcHRpb25zOiBPYmplY3Q7XG4gIGNhY2hlOiBDb3ZlcmFnZUNhY2hlPCBBbGlnbm1lbnQgfCBGZWF0dXJlPiA7XG5cbiAgY29uc3RydWN0b3IoY2FjaGU6IENvdmVyYWdlQ2FjaGU8KEFsaWdubWVudCB8IEZlYXR1cmUpPiwgaGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmhlaWdodDtcbiAgfVxuXG4gIHVwZGF0ZShoZWlnaHQ6IG51bWJlciwgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgLy8gd29ya2Fyb3VuZCBmb3IgYW4gaXNzdWUgaW4gUGhhbnRvbUpTIHdoZXJlIGhlaWdodCBhbHdheXMgY29tZXMgb3V0IHRvIHplcm8uXG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB5U2NhbGVGb3JSZWYocmVmOiBzdHJpbmcsIGJvdHRvbVBhZGRpbmc6IG51bWJlciwgdG9wUGFkZGluZzpudW1iZXIpOiAoeTogbnVtYmVyKSA9PiBudW1iZXIge1xuICAgIHZhciBtYXhDb3ZlcmFnZSA9IHRoaXMuY2FjaGUubWF4Q292ZXJhZ2VGb3JSZWYocmVmKTtcbiAgICByZXR1cm4gc2NhbGUubGluZWFyKClcbiAgICAgIC5kb21haW4oW21heENvdmVyYWdlLCAwXSlcbiAgICAgIC5yYW5nZShbYm90dG9tUGFkZGluZywgdGhpcy5oZWlnaHQgLSB0b3BQYWRkaW5nXSlcbiAgICAgIC5uaWNlKCk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgeFNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB2YXIgYmlucyA9IHRoaXMuY2FjaGUuYmluc0ZvclJlZihyYW5nZS5jb250aWcpO1xuICAgIHZhciB5U2NhbGUgPSB0aGlzLnlTY2FsZUZvclJlZihyYW5nZS5jb250aWcsIDEwLCAxMCk7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChcbiAgICAgICAgcmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpIC0gMSwgcmFuZ2Uuc3RvcCgpICsgMSk7XG4gICAgcmVuZGVyQmFycyhjdHgsIHhTY2FsZSwgeVNjYWxlLCByZWxheGVkUmFuZ2UsIGJpbnMsIHRoaXMub3B0aW9ucyk7XG4gIH1cbn1cblxuXG4vLyBEcmF3IGNvdmVyYWdlIGJpbnMgJiBtaXNtYXRjaGVzXG5mdW5jdGlvbiByZW5kZXJCYXJzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgeFNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgeVNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgIGJpbnM6IHtba2V5OiBudW1iZXJdOiBCaW5TdW1tYXJ5fSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogT2JqZWN0KSB7XG4gIGlmIChfLmlzRW1wdHkoYmlucykpIHJldHVybjtcblxuICB2YXIgYmFyV2lkdGggPSB4U2NhbGUoMSkgLSB4U2NhbGUoMCk7XG4gIHZhciBzaG93UGFkZGluZyA9IChiYXJXaWR0aCA+IHN0eWxlLkNPVkVSQUdFX01JTl9CQVJfV0lEVEhfRk9SX0dBUCk7XG4gIHZhciBwYWRkaW5nID0gc2hvd1BhZGRpbmcgPyAxIDogMDtcblxuICB2YXIgYmluUG9zID0gZnVuY3Rpb24ocG9zOiBudW1iZXIsIGNvdW50OiBudW1iZXIpIHtcbiAgICAvLyBSb3VuZCB0byBpbnRlZ2VyIGNvb3JkaW5hdGVzIGZvciBjcmlzcCBsaW5lcywgd2l0aG91dCBhbGlhc2luZy5cbiAgICB2YXIgYmFyWDEgPSBNYXRoLnJvdW5kKHhTY2FsZSgxICsgcG9zKSksXG4gICAgICAgIGJhclgyID0gTWF0aC5yb3VuZCh4U2NhbGUoMiArIHBvcykpIC0gcGFkZGluZyxcbiAgICAgICAgYmFyWSA9IE1hdGgucm91bmQoeVNjYWxlKGNvdW50KSk7XG4gICAgcmV0dXJuIHtiYXJYMSwgYmFyWDIsIGJhcll9O1xuICB9O1xuXG4gIHZhciBtaXNtYXRjaEJpbnMgPSAoe30gOiB7W2tleTpudW1iZXJdOiBCaW5TdW1tYXJ5fSk7ICAvLyBrZWVwIHRyYWNrIG9mIHdoaWNoIG9uZXMgaGF2ZSBtaXNtYXRjaGVzXG4gIHZhciB2QmFzZVBvc1kgPSB5U2NhbGUoMCk7ICAvLyB0aGUgdmVyeSBib3R0b20gb2YgdGhlIGNhbnZhc1xuICB2YXIgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgc3RvcCA9IHJhbmdlLnN0b3AoKTtcblxuICAvLyB0cmFjayBsYXN0IGdlbm9taWMgcG9zaXRpb25cbiAgdmFyIGxhc3RQb3MgPSBudWxsO1xuXG4gIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPCBzdG9wOyBwb3MrKykge1xuICAgIHZhciBiaW4gPSBiaW5zW3Bvc107XG4gICAgaWYgKCFiaW4pIGNvbnRpbnVlO1xuXG5cbiAgICBpZiAoIWxhc3RQb3MpIHtcbiAgICAgIGxldCB7YmFyWDF9ID0gYmluUG9zKHBvcywgYmluLmNvdW50KTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5DT1ZFUkFHRV9CSU5fQ09MT1I7XG4gICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICBjdHgubW92ZVRvKGJhclgxLCB2QmFzZVBvc1kpO1xuICAgIH1cblxuICAgIGN0eC5wdXNoT2JqZWN0KGJpbik7XG4gICAgbGV0IHtiYXJYMSwgYmFyWDIsIGJhcll9ID0gYmluUG9zKHBvcywgYmluLmNvdW50KTtcbiAgICBjdHgubGluZVRvKGJhclgxLCBiYXJZKTtcbiAgICBjdHgubGluZVRvKGJhclgyLCBiYXJZKTtcbiAgICBpZiAoc2hvd1BhZGRpbmcpIHtcbiAgICAgIGN0eC5saW5lVG8oYmFyWDIsIHZCYXNlUG9zWSk7XG4gICAgICBjdHgubGluZVRvKGJhclgyICsgMSwgdkJhc2VQb3NZKTtcbiAgICB9XG5cbiAgICBpZiAoU0hPV19NSVNNQVRDSEVTICYmICFfLmlzRW1wdHkoYmluLm1pc21hdGNoZXMpKSB7XG4gICAgICBtaXNtYXRjaEJpbnNbcG9zXSA9IGJpbjtcbiAgICB9XG4gICAgbGFzdFBvcyA9IHBvcztcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cblxuICBpZiAobGFzdFBvcykge1xuICAgIGxldCB7YmFyWDJ9ID0gYmluUG9zKGxhc3RQb3MsIDApOyAvLyBjb3VudCBkb2VzIG5vdCBtYXR0ZXIsIGRyYXdpbmcgdkJhc2VQb3NZXG4gICAgY3R4LmxpbmVUbyhiYXJYMiwgdkJhc2VQb3NZKTsgIC8vIHJpZ2h0IGVkZ2Ugb2YgdGhlIHJpZ2h0IGJhci5cbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcbiAgfVxuXG4gIC8vIE5vdyByZW5kZXIgdGhlIG1pc21hdGNoZXNcbiAgXy5lYWNoKG1pc21hdGNoQmlucywgKGJpbiwgcG9zKSA9PiB7XG4gICAgaWYgKCFiaW4ubWlzbWF0Y2hlcykgcmV0dXJuOyAgLy8gdGhpcyBpcyBoZXJlIGZvciBGbG93OyBpdCBjYW4ndCByZWFsbHkgaGFwcGVuLlxuICAgIGNvbnN0IG1pc21hdGNoZXMgPSBfLmNsb25lKGJpbi5taXNtYXRjaGVzKTtcbiAgICBwb3MgPSBOdW1iZXIocG9zKTsgIC8vIG9iamVjdCBrZXlzIGFyZSBzdHJpbmdzLCBub3QgbnVtYmVycy5cblxuICAgIC8vIElmIHRoaXMgaXMgYSBoaWdoLWZyZXF1ZW5jeSB2YXJpYW50LCBhZGQgaW4gdGhlIHJlZmVyZW5jZS5cbiAgICB2YXIgbWlzbWF0Y2hDb3VudCA9IF8ucmVkdWNlKG1pc21hdGNoZXMsICh4LCB5KSA9PiB4ICsgeSk7XG4gICAgdmFyIG1vc3RGcmVxdWVudE1pc21hdGNoID0gXy5tYXgobWlzbWF0Y2hlcyk7XG4gICAgaWYgKG1vc3RGcmVxdWVudE1pc21hdGNoID4gTUlTTUFUQ0hfVEhSRVNIT0xEICYmXG4gICAgICAgIG1pc21hdGNoQ291bnQgPiBvcHRpb25zLnZhZkNvbG9yVGhyZXNob2xkICogYmluLmNvdW50ICYmXG4gICAgICAgIG1pc21hdGNoQ291bnQgPCBiaW4uY291bnQpIHtcbiAgICAgIGlmIChiaW4ucmVmKSB7ICAvLyBoZXJlIGZvciBmbG93OyBjYW4ndCByZWFseSBoYXBwZW5cbiAgICAgICAgbWlzbWF0Y2hlc1tiaW4ucmVmXSA9IGJpbi5jb3VudCAtIG1pc21hdGNoQ291bnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHtiYXJYMSwgYmFyWDJ9ID0gYmluUG9zKHBvcywgYmluLmNvdW50KTtcbiAgICBjdHgucHVzaE9iamVjdChiaW4pO1xuICAgIHZhciBjb3VudFNvRmFyID0gMDtcbiAgICBfLmNoYWluKG1pc21hdGNoZXMpXG4gICAgICAubWFwKChjb3VudCwgYmFzZSkgPT4gKHtjb3VudCwgYmFzZX0pKSAgLy8gcHVsbCBiYXNlIGludG8gdGhlIG9iamVjdFxuICAgICAgLmZpbHRlcigoe2NvdW50fSkgPT4gY291bnQgPiBNSVNNQVRDSF9USFJFU0hPTEQpXG4gICAgICAuc29ydEJ5KCh7Y291bnR9KSA9PiAtY291bnQpICAvLyB0aGUgbW9zdCBjb21tb24gbWlzbWF0Y2ggYXQgdGhlIGJvdHRvbVxuICAgICAgLmVhY2goKHtjb3VudCwgYmFzZX0pID0+IHtcbiAgICAgICAgdmFyIG1pc01hdGNoT2JqID0ge3Bvc2l0aW9uOiAxICsgcG9zLCBjb3VudCwgYmFzZX07XG4gICAgICAgIGN0eC5wdXNoT2JqZWN0KG1pc01hdGNoT2JqKTsgIC8vIGZvciBkZWJ1Z2dpbmcgYW5kIGNsaWNrLXRyYWNraW5nXG5cbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkJBU0VfQ09MT1JTW2Jhc2VdO1xuICAgICAgICB2YXIgeSA9IHlTY2FsZShjb3VudFNvRmFyKTtcbiAgICAgICAgY3R4LmZpbGxSZWN0KGJhclgxLFxuICAgICAgICAgICAgICAgICAgICAgeSxcbiAgICAgICAgICAgICAgICAgICAgIE1hdGgubWF4KDEsIGJhclgyIC0gYmFyWDEpLCAgLy8gbWluIHdpZHRoIG9mIDFweFxuICAgICAgICAgICAgICAgICAgICAgeVNjYWxlKGNvdW50U29GYXIgKyBjb3VudCkgLSB5KTtcbiAgICAgICAgY291bnRTb0ZhciArPSBjb3VudDtcblxuICAgICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICB9KTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH0pO1xufVxuXG5jbGFzcyBDb3ZlcmFnZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPERhdGFTb3VyY2U8QWxpZ25tZW50IHwgRmVhdHVyZT4+LCBTdGF0ZT4ge1xuICBwcm9wczogVml6UHJvcHM8RGF0YVNvdXJjZTxBbGlnbm1lbnQgfCBGZWF0dXJlID4+O1xuICBzdGF0ZTogU3RhdGU7IC8vIG5vIHN0YXRlLCB1c2VkIHRvIG1ha2UgZmxvdyBoYXBweVxuICBjYWNoZTogQ292ZXJhZ2VDYWNoZTwgQWxpZ25tZW50IHwgRmVhdHVyZSA+O1xuICB0aWxlczogQ292ZXJhZ2VUaWxlZENhbnZhcztcbiAgc3RhdGljIGRlZmF1bHRPcHRpb25zOiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzPERhdGFTb3VyY2U8QWxpZ25tZW50IHwgRmVhdHVyZT4+KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz47XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgQ292ZXJhZ2VDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBDb3ZlcmFnZVRpbGVkQ2FudmFzKHRoaXMuY2FjaGUsIHRoaXMucHJvcHMuaGVpZ2h0LCB0aGlzLnByb3BzLm9wdGlvbnMpO1xuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB2YXIgb2xkTWF4ID0gdGhpcy5jYWNoZS5tYXhDb3ZlcmFnZUZvclJlZihyYW5nZS5jb250aWcpO1xuICAgICAgdGhpcy5wcm9wcy5zb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKVxuICAgICAgICAgICAgICAgICAgICAgICAuZm9yRWFjaChyZWFkID0+IHRoaXMuY2FjaGUuYWRkSXRlbShyZWFkKSk7XG4gICAgICB2YXIgbmV3TWF4ID0gdGhpcy5jYWNoZS5tYXhDb3ZlcmFnZUZvclJlZihyYW5nZS5jb250aWcpO1xuXG4gICAgICBpZiAob2xkTWF4ICE9IG5ld01heCkge1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmlzdWFsaXplQ292ZXJhZ2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy5jYWNoZS51cGRhdGVNaXNtYXRjaGVzKHJhbmdlKTtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudmlzdWFsaXplQ292ZXJhZ2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5oZWlnaHQgIT0gcHJldlByb3BzLmhlaWdodCB8fFxuICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyAhPSBwcmV2UHJvcHMub3B0aW9ucykge1xuICAgICAgICB0aGlzLnRpbGVzLnVwZGF0ZSh0aGlzLnByb3BzLmhlaWdodCwgdGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29udGV4dCgpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgICAvLyBUaGUgdHlwZWNhc3QgdGhyb3VnaCBgYW55YCBpcyBiZWNhdXNlIGdldENvbnRleHQgY291bGQgcmV0dXJuIGEgV2ViR0wgY29udGV4dC5cbiAgICB2YXIgY3R4ID0gKChjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSA6IGFueSkgOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpO1xuICAgIHJldHVybiBjdHg7XG4gIH1cblxuICAvLyBEcmF3IHRocmVlIHRpY2tzIG9uIHRoZSBsZWZ0IHRvIHNldCB0aGUgc2NhbGUgZm9yIHRoZSB1c2VyXG4gIHJlbmRlclRpY2tzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeVNjYWxlOiAobnVtOiBudW1iZXIpPT5udW1iZXIpIHtcbiAgICB2YXIgYXhpc01heCA9IHlTY2FsZS5kb21haW4oKVswXTtcbiAgICBbMCwgTWF0aC5yb3VuZChheGlzTWF4IC8gMiksIGF4aXNNYXhdLmZvckVhY2godGljayA9PiB7XG4gICAgICAvLyBEcmF3IGEgbGluZSBpbmRpY2F0aW5nIHRoZSB0aWNrXG4gICAgICBjdHgucHVzaE9iamVjdCh7dmFsdWU6IHRpY2ssIHR5cGU6ICd0aWNrJ30pO1xuICAgICAgdmFyIHRpY2tQb3NZID0gTWF0aC5yb3VuZCh5U2NhbGUodGljaykpO1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3R5bGUuQ09WRVJBR0VfRk9OVF9DT0xPUjtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgMCwgdGlja1Bvc1ksIHN0eWxlLkNPVkVSQUdFX1RJQ0tfTEVOR1RILCB0aWNrUG9zWSk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG5cbiAgICAgIHZhciB0aWNrTGFiZWwgPSB0aWNrICsgJ1gnO1xuICAgICAgY3R4LnB1c2hPYmplY3Qoe3ZhbHVlOiB0aWNrLCBsYWJlbDogdGlja0xhYmVsLCB0eXBlOiAnbGFiZWwnfSk7XG4gICAgICAvLyBOb3cgcHJpbnQgdGhlIGNvdmVyYWdlIGluZm9ybWF0aW9uXG4gICAgICBjdHguZm9udCA9IHN0eWxlLkNPVkVSQUdFX0ZPTlRfU1RZTEU7XG4gICAgICB2YXIgdGV4dFBvc1ggPSBzdHlsZS5DT1ZFUkFHRV9USUNLX0xFTkdUSCArIHN0eWxlLkNPVkVSQUdFX1RFWFRfUEFERElORyxcbiAgICAgICAgICB0ZXh0UG9zWSA9IHRpY2tQb3NZICsgc3R5bGUuQ09WRVJBR0VfVEVYVF9ZX09GRlNFVDtcbiAgICAgIC8vIFRoZSBzdHJva2UgY3JlYXRlcyBhIGJvcmRlciBhcm91bmQgdGhlIHRleHQgdG8gbWFrZSBpdCBsZWdpYmxlIG92ZXIgdGhlIGJhcnMuXG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDI7XG4gICAgICBjdHguc3Ryb2tlVGV4dCh0aWNrTGFiZWwsIHRleHRQb3NYLCB0ZXh0UG9zWSk7XG4gICAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5DT1ZFUkFHRV9GT05UX0NPTE9SO1xuICAgICAgY3R4LmZpbGxUZXh0KHRpY2tMYWJlbCwgdGV4dFBvc1gsIHRleHRQb3NZKTtcbiAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHZpc3VhbGl6ZUNvdmVyYWdlKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgICAgcmFuZ2UgPSBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSk7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm47XG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dCh0aGlzLmdldENvbnRleHQoKSk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIHZhciB5U2NhbGUgPSB0aGlzLnRpbGVzLnlTY2FsZUZvclJlZihyYW5nZS5jb250aWcsIDEwLCAxMCk7XG5cbiAgICB0aGlzLnRpbGVzLnJlbmRlclRvU2NyZWVuKGN0eCwgcmFuZ2UsIHRoaXMuZ2V0U2NhbGUoKSk7XG4gICAgdGhpcy5yZW5kZXJUaWNrcyhjdHgsIHlTY2FsZSk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFg7XG5cbiAgICAvLyBJdCdzIHNpbXBsZSB0byBmaWd1cmUgb3V0IHdoaWNoIHBvc2l0aW9uIHdhcyBjbGlja2VkIHVzaW5nIHRoZSB4LXNjYWxlLlxuICAgIC8vIE5vIG5lZWQgdG8gcmVuZGVyIHRoZSBzY2VuZSB0byBkZXRlcm1pbmUgd2hhdCB3YXMgY2xpY2tlZC5cbiAgICB2YXIgcmFuZ2UgPSBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSksXG4gICAgICAgIHhTY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgYmlucyA9IHRoaXMuY2FjaGUuYmluc0ZvclJlZihyYW5nZS5jb250aWcpLFxuICAgICAgICBwb3MgPSBNYXRoLmZsb29yKHhTY2FsZS5pbnZlcnQoeCkpIC0gMSxcbiAgICAgICAgYmluID0gYmluc1twb3NdO1xuXG4gICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgIGlmIChiaW4pIHtcbiAgICAgIHZhciBtbUNvdW50ID0gYmluLm1pc21hdGNoZXMgPyBfLnJlZHVjZShiaW4ubWlzbWF0Y2hlcywgKGEsIGIpID0+IGEgKyBiKSA6IDA7XG4gICAgICB2YXIgcmVmID0gYmluLnJlZiB8fCB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5nZXRSYW5nZUFzU3RyaW5nKFxuICAgICAgICAgIHtjb250aWc6IHJhbmdlLmNvbnRpZywgc3RhcnQ6IHBvcywgc3RvcDogcG9zfSk7XG5cbiAgICAgIC8vIENvbnN0cnVjdCBhIEpTT04gb2JqZWN0IHRvIHNob3cgdGhlIHVzZXIuXG4gICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IF8uZXh0ZW5kKFxuICAgICAgICB7XG4gICAgICAgICAgJ3Bvc2l0aW9uJzogcmFuZ2UuY29udGlnICsgJzonICsgKDEgKyBwb3MpLFxuICAgICAgICAgICdyZWFkIGRlcHRoJzogYmluLmNvdW50XG4gICAgICAgIH0sXG4gICAgICAgIGJpbi5taXNtYXRjaGVzKTtcbiAgICAgIG1lc3NhZ2VPYmplY3RbcmVmXSA9IGJpbi5jb3VudCAtIG1tQ291bnQ7XG4gICAgICBhbGVydChKU09OLnN0cmluZ2lmeShtZXNzYWdlT2JqZWN0LCBudWxsLCAnICAnKSk7XG4gICAgfVxuICB9XG59XG5cbkNvdmVyYWdlVHJhY2suZGlzcGxheU5hbWUgPSAnY292ZXJhZ2UnO1xuQ292ZXJhZ2VUcmFjay5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgLy8gQ29sb3IgdGhlIHJlZmVyZW5jZSBiYXNlIGluIHRoZSBiYXIgY2hhcnQgd2hlbiB0aGUgVmFyaWFudCBBbGxlbGUgRnJhY3Rpb25cbiAgLy8gZXhjZWVkcyB0aGlzIGFtb3VudC4gV2hlbiB0aGVyZSBhcmUgPj0yIGFncmVlaW5nIG1pc21hdGNoZXMsIHRoZXkgYXJlXG4gIC8vIGFsd2F5cyByZW5kZXJlZC4gQnV0IGZvciBtaXNtYXRjaGVzIGJlbG93IHRoaXMgdGhyZXNob2xkLCB0aGUgcmVmZXJlbmNlIGlzXG4gIC8vIG5vdCBjb2xvcmVkIGluIHRoZSBiYXIgY2hhcnQuIFRoaXMgZHJhd3MgYXR0ZW50aW9uIHRvIGhpZ2gtVkFGIG1pc21hdGNoZXMuXG4gIHZhZkNvbG9yVGhyZXNob2xkOiAwLjJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQ292ZXJhZ2VUcmFjaztcbiIsIi8qKlxuICogSW5kaXZpZHVhbCBiYXNlIHBhaXJzIGFyZSByZW5kZXJlZCBkaWZmZXJlbnRseSBkZXBlbmRpbmcgb24gdGhlIHNjYWxlLlxuICogVGhpcyBlbnVtICYgYXNzb2NpYXRlZCBmdW5jdGlvbnMgaGVscCB0cmFjayB0aGVzZSB0cmFuc2l0aW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIERpc3BsYXlNb2RlID0ge1xuICBMT09TRTogMSwgICAvLyBMb3RzIG9mIHNwYWNlIC0tIGEgYmlnIGZvbnQgaXMgT0suXG4gIFRJR0hUOiAyLCAgIC8vIExldHRlcnMgbmVlZCB0byBiZSBzaHJ1bmsgdG8gZml0LlxuICBCTE9DS1M6IDMsICAvLyBDaGFuZ2UgZnJvbSBsZXR0ZXJzIHRvIGJsb2NrcyBvZiBjb2xvclxuICBISURERU46IDQsXG5cbiAgZ2V0RGlzcGxheU1vZGUocHhQZXJMZXR0ZXI6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHB4UGVyTGV0dGVyID49IDI1KSB7XG4gICAgICByZXR1cm4gRGlzcGxheU1vZGUuTE9PU0U7XG4gICAgfSBlbHNlIGlmIChweFBlckxldHRlciA+PSAxMCkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLlRJR0hUO1xuICAgIH0gZWxzZSBpZiAocHhQZXJMZXR0ZXIgPj0gMSkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkJMT0NLUztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkhJRERFTjtcbiAgICB9XG4gIH0sXG5cbiAgaXNUZXh0KG1vZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAobW9kZSA9PSBEaXNwbGF5TW9kZS5MT09TRSB8fCBtb2RlID09IERpc3BsYXlNb2RlLlRJR0hUKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEaXNwbGF5TW9kZTtcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiBmZWF0dXJlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0RhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvRGF0YVNvdXJjZSc7XG5pbXBvcnQgRmVhdHVyZSBmcm9tICcuLi9kYXRhL2ZlYXR1cmUnO1xuaW1wb3J0IEdlbmVyaWNGZWF0dXJlIGZyb20gJy4uL2RhdGEvZ2VuZXJpY0ZlYXR1cmUnO1xuaW1wb3J0IHtHZW5lcmljRmVhdHVyZUNhY2hlfSBmcm9tICcuL0dlbmVyaWNGZWF0dXJlQ2FjaGUnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbEdyb3VwfSBmcm9tICcuL0Fic3RyYWN0Q2FjaGUnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCB7UmVhY3R9IGZyb20gJy4uL1NoaW1EZXBlbmRlbmNpZXMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgUmVtb3RlUmVxdWVzdCBmcm9tICcuLi9SZW1vdGVSZXF1ZXN0JztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IFRpbGVkQ2FudmFzIGZyb20gJy4vVGlsZWRDYW52YXMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHt5Rm9yUm93fSBmcm9tICcuL3BpbGV1cHV0aWxzJztcblxuXG5jbGFzcyBGZWF0dXJlVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIG9wdGlvbnM6IE9iamVjdDtcbiAgc291cmNlOiBEYXRhU291cmNlPEZlYXR1cmU+O1xuICBjYWNoZTogR2VuZXJpY0ZlYXR1cmVDYWNoZTtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IERhdGFTb3VyY2U8RmVhdHVyZT4sIGNhY2hlOiBHZW5lcmljRmVhdHVyZUNhY2hlLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgdXBkYXRlKG5ld09wdGlvbnM6IE9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLnBpbGV1cEhlaWdodEZvclJlZihyZWYpICpcbiAgICAgICAgICAgICAgICAgICAgKHN0eWxlLlJFQURfSEVJR0hUICsgc3R5bGUuUkVBRF9TUEFDSU5HKTtcbiAgfVxuXG4gIHJlbmRlcihjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICBzY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgb3JpZ2luYWxSYW5nZTogP0NvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICByZXNvbHV0aW9uOiA/bnVtYmVyKSB7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9XG4gICAgICAgIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCkgLSAxLCByYW5nZS5zdG9wKCkgKyAxKTtcbiAgICAvLyBnZXQgZmVhdHVyZXMgYW5kIHB1dCBpbiBjYWNoZVxuICAgIHZhciBmZWF0dXJlcyA9IHRoaXMuc291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShyZWxheGVkUmFuZ2UsIHJlc29sdXRpb24pO1xuICAgIGZlYXR1cmVzLmZvckVhY2goZiA9PiB0aGlzLmNhY2hlLmFkZEZlYXR1cmUobmV3IEdlbmVyaWNGZWF0dXJlKGYuaWQsIGYucG9zaXRpb24sIGYpKSk7XG5cbiAgICAvLyBnZXQgdmlzdWFsIGZlYXR1cmVzIHdpdGggYXNzaWduZWQgcm93c1xuICAgIHZhciB2RmVhdHVyZXMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJlbGF4ZWRSYW5nZSk7XG4gICAgcmVuZGVyRmVhdHVyZXMoY3R4LCBzY2FsZSwgcmVsYXhlZFJhbmdlLCB2RmVhdHVyZXMpO1xuICB9XG59XG5cbi8vIERyYXcgZmVhdHVyZXNcbmZ1bmN0aW9uIHJlbmRlckZlYXR1cmVzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgdkZlYXR1cmVzOiBWaXN1YWxHcm91cDxHZW5lcmljRmVhdHVyZT5bXSkge1xuXG4gICAgY3R4LmZvbnQgPSBgJHtzdHlsZS5HRU5FX0ZPTlRfU0laRX1weCAke3N0eWxlLkdFTkVfRk9OVH1gO1xuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcblxuICAgIHZGZWF0dXJlcy5mb3JFYWNoKHZGZWF0dXJlID0+IHtcbiAgICAgIHZhciBmZWF0dXJlID0gdkZlYXR1cmUuaXRlbXNbMF0uZ0ZlYXR1cmU7XG4gICAgICBpZiAoIXZGZWF0dXJlLnNwYW4uaW50ZXJzZWN0cyhyYW5nZSkpIHJldHVybjtcbiAgICAgIGN0eC5wdXNoT2JqZWN0KGZlYXR1cmUpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG5cbiAgICAgIC8vIENyZWF0ZSB0cmFuc3BhcmVuY3kgdmFsdWUgYmFzZWQgb24gc2NvcmUuIFNjb3JlIG9mIDw9IDIwMCBpcyB0aGUgc2FtZSB0cmFuc3BhcmVuY3kuXG4gICAgICB2YXIgYWxwaGFTY29yZSA9IE1hdGgubWF4KGZlYXR1cmUuc2NvcmUgLyAxMDAwLjAsIDAuMik7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgJyArIGFscGhhU2NvcmUgKyAnKSc7XG5cbiAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChzY2FsZSh2RmVhdHVyZS5zcGFuLnN0YXJ0KCkpKTtcbiAgICAgIHZhciB3aWR0aCA9IE1hdGguY2VpbChzY2FsZSh2RmVhdHVyZS5zcGFuLnN0b3AoKSkgLSBzY2FsZSh2RmVhdHVyZS5zcGFuLnN0YXJ0KCkpKTtcbiAgICAgIHZhciB5ID0geUZvclJvdyh2RmVhdHVyZS5yb3cpO1xuICAgICAgY3R4LmZpbGxSZWN0KHggLSAwLjUsIHksIHdpZHRoLCBzdHlsZS5SRUFEX0hFSUdIVCk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgfSk7XG59XG5cbmNsYXNzIEZlYXR1cmVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczxEYXRhU291cmNlPEZlYXR1cmU+PiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPERhdGFTb3VyY2U8RmVhdHVyZT4+O1xuICBzdGF0ZTogU3RhdGU7XG4gIHRpbGVzOiBGZWF0dXJlVGlsZWRDYW52YXM7XG4gIGNhY2hlOiBHZW5lcmljRmVhdHVyZUNhY2hlO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBWaXpQcm9wczxEYXRhU291cmNlPEZlYXR1cmU+Pikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbmV0d29ya1N0YXR1czogbnVsbFxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUaGVzZSBzdHlsZXMgYWxsb3cgdmVydGljYWwgc2Nyb2xsaW5nIHRvIHNlZSB0aGUgZnVsbCBwaWxldXAuXG4gICAgLy8gQWRkaW5nIGEgdmVydGljYWwgc2Nyb2xsYmFyIHNocmlua3MgdGhlIHZpc2libGUgYXJlYSwgYnV0IHdlIGhhdmUgdG8gYWN0XG4gICAgLy8gYXMgdGhvdWdoIGl0IGRvZXNuJ3QsIHNpbmNlIGFkanVzdGluZyB0aGUgc2NhbGUgd291bGQgcHV0IGl0IG91dCBvZiBzeW5jXG4gICAgLy8gd2l0aCBvdGhlciB0cmFja3MuXG4gICAgdmFyIGNvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgICdoZWlnaHQnOiAnMTAwJSdcbiAgICB9O1xuXG4gICAgdmFyIHN0YXR1c0VsID0gbnVsbCxcbiAgICAgICAgbmV0d29ya1N0YXR1cyA9IHRoaXMuc3RhdGUubmV0d29ya1N0YXR1cztcbiAgICBpZiAobmV0d29ya1N0YXR1cykge1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtc21hbGwnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlLXNtYWxsJz5cbiAgICAgICAgICAgIExvYWRpbmcgZmVhdHVyZXPigKZcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgICB2YXIgcmFuZ2VMZW5ndGggPSB0aGlzLnByb3BzLnJhbmdlLnN0b3AgLSB0aGlzLnByb3BzLnJhbmdlLnN0YXJ0O1xuICAgIC8vIElmIHJhbmdlIGlzIHRvbyBsYXJnZSwgZG8gbm90IHJlbmRlciAnY2FudmFzJ1xuICAgIGlmIChyYW5nZUxlbmd0aCA+IFJlbW90ZVJlcXVlc3QuTU9OU1RFUl9SRVFVRVNUKSB7XG4gICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjZW50ZXInPlxuICAgICAgICAgICAgICBab29tIGluIHRvIHNlZSBmZWF0dXJlc1xuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8Y2FudmFzIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgIHtzdGF0dXNFbH1cbiAgICAgICAgICA8ZGl2IHJlZj0nY29udGFpbmVyJyBzdHlsZT17Y29udGFpbmVyU3R5bGVzfT5cbiAgICAgICAgICAgIDxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgR2VuZXJpY0ZlYXR1cmVDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBGZWF0dXJlVGlsZWRDYW52YXModGhpcy5wcm9wcy5zb3VyY2UsIHRoaXMuY2FjaGUsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICAvLyBWaXN1YWxpemUgbmV3IHJlZmVyZW5jZSBkYXRhIGFzIGl0IGNvbWVzIGluIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCAocmFuZ2UpID0+IHtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2U7XG5cbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2Vub21lUmFuZ2UuY29udGlnLCBnZW5vbWVSYW5nZS5zdGFydCwgZ2Vub21lUmFuZ2Uuc3RvcCk7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBjYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKSk7XG5cblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gZ2V0IHBhcmVudCBvZiBjYW52YXNcbiAgICAvLyBUaGUgdHlwZWNhc3RzIHRocm91Z2ggYGFueWAgYXJlIHRvIGZvb2wgZmxvdy5cbiAgICB2YXIgcGFyZW50ID0gKChkM3V0aWxzLmZpbmRQYXJlbnQoY2FudmFzLCBcImZlYXR1cmVzXCIpIDogYW55KSA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgICBcbiAgICAvLyBIZWlnaHQgY2FuIG9ubHkgYmUgY29tcHV0ZWQgYWZ0ZXIgdGhlIHBpbGV1cCBoYXMgYmVlbiB1cGRhdGVkLlxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuY2FjaGUucGlsZXVwSGVpZ2h0Rm9yUmVmKHRoaXMucHJvcHMucmFuZ2UuY29udGlnKSk7XG5cbiAgICAvLyByZXNpemUgaGVpZ2h0IGZvciBkZXZpY2VcbiAgICBoZWlnaHQgPSBkM3V0aWxzLmhlaWdodEZvckNhbnZhcyhjYW52YXMsIGhlaWdodCk7XG5cbiAgICAvLyBzZXQgaGVpZ2h0IGZvciBwYXJlbnQgZGl2IHRvIGluY2x1ZGUgYWxsIGZlYXR1cmVzXG4gICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLmhlaWdodCA9IGAke2hlaWdodH1weGA7XG5cbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCByYW5nZSwgdGhpcy5nZXRTY2FsZSgpKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciByYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYLCAvLyByZXNpemUgb2Zmc2V0IHRvIGNhbnZhcyBzaXplXG4gICAgICAgIHkgPSBldi5vZmZzZXRZL3JhdGlvO1xuXG4gICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQodGhpcy5yZWZzLmNhbnZhcyk7XG4gICAgdmFyIHRyYWNraW5nQ3R4ID0gbmV3IGRhdGFDYW52YXMuQ2xpY2tUcmFja2luZ0NvbnRleHQoY3R4LCB4LCB5KTtcblxuICAgIHZhciBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIC8vIGFsbG93IHNvbWUgYnVmZmVyaW5nIHNvIGNsaWNrIGlzbid0IHNvIHNlbnNpdGl2ZVxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LTEsIGdlbm9tZVJhbmdlLnN0b3ArMSksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICB2RmVhdHVyZXMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKTtcblxuICAgIHJlbmRlckZlYXR1cmVzKHRyYWNraW5nQ3R4LCBzY2FsZSwgcmFuZ2UsIHZGZWF0dXJlcyk7XG4gICAgdmFyIGZlYXR1cmUgPSBfLmZpbmQodHJhY2tpbmdDdHguaGl0c1swXSwgaGl0ID0+IGhpdCk7XG5cbiAgICBpZiAoZmVhdHVyZSkge1xuICAgICAgLy91c2VyIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBkaXNwbGF5aW5nIHBvcHVwXG4gICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub3B0aW9ucy5vbkZlYXR1cmVDbGlja2VkICA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIHRoaXMucHJvcHMub3B0aW9ucy5vbkZlYXR1cmVDbGlja2VkKGZlYXR1cmUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBKU09OIG9iamVjdCB0byBzaG93IHRoZSB1c2VyLlxuICAgICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IF8uZXh0ZW5kKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgICdpZCc6ICAgICBmZWF0dXJlLmlkLFxuICAgICAgICAgICAgJ3JhbmdlJzogIGAke2ZlYXR1cmUucG9zaXRpb24uY29udGlnfToke2ZlYXR1cmUucG9zaXRpb24uc3RhcnQoKX0tJHtmZWF0dXJlLnBvc2l0aW9uLnN0b3AoKX1gLFxuICAgICAgICAgICAgJ3Njb3JlJzogIGZlYXR1cmUuc2NvcmVcbiAgICAgICAgICB9KTtcbiAgICAgICAgYWxlcnQoSlNPTi5zdHJpbmdpZnkobWVzc2FnZU9iamVjdCwgbnVsbCwgJyAgJykpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5GZWF0dXJlVHJhY2suZGlzcGxheU5hbWUgPSAnZmVhdHVyZXMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZlYXR1cmVUcmFjaztcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiBnZW5lcywgaW5jbHVkaW5nIGV4b25zIGFuZCBjb2RpbmcgcmVnaW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0cmFuZH0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCBHZW5lIGZyb20gJy4uL2RhdGEvZ2VuZSc7XG5pbXBvcnQgdHlwZSB7RGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9EYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlJztcbmltcG9ydCB7R2VuZXJpY0ZlYXR1cmVDYWNoZX0gZnJvbSAnLi9HZW5lcmljRmVhdHVyZUNhY2hlJztcblxuaW1wb3J0IHtSZWFjdCwgUmVhY3RET019IGZyb20gJy4uL1NoaW1EZXBlbmRlbmNpZXMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgc2hhbGxvd0VxdWFscyBmcm9tICdzaGFsbG93LWVxdWFscyc7XG5cbmltcG9ydCBiZWR0b29scyBmcm9tICcuLi9kYXRhL2JlZHRvb2xzJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxuLy8gRHJhdyBhbiBhcnJvdyBpbiB0aGUgbWlkZGxlIG9mIHRoZSB2aXNpYmxlIHBvcnRpb24gb2YgcmFuZ2UuXG5mdW5jdGlvbiBkcmF3QXJyb3coY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgY2xhbXBlZFNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgICAgICAgICAgIHJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICB0aXBZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgc3RyYW5kOiBTdHJhbmQpIHtcbiAgdmFyIHgxID0gY2xhbXBlZFNjYWxlKDEgKyByYW5nZS5zdGFydCksXG4gICAgICB4MiA9IGNsYW1wZWRTY2FsZSgxICsgcmFuZ2Uuc3RvcCk7XG5cbiAgLy8gaXQncyBvZmYtc2NyZWVuIG9yIHRoZXJlJ3Mgbm90IGVub3VnaCByb29tIHRvIGRyYXcgaXQgbGVnaWJseS5cbiAgaWYgKHgyIC0geDEgPD0gMiAqIHN0eWxlLkdFTkVfQVJST1dfU0laRSkgcmV0dXJuO1xuXG4gIHZhciBjeCA9ICh4MSArIHgyKSAvIDI7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgaWYgKHN0cmFuZCA9PSAnLScpIHtcbiAgICBjdHgubW92ZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfSBlbHNlIHtcbiAgICBjdHgubW92ZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfVxuICBjdHguc3Ryb2tlKCk7XG59XG5cbmZ1bmN0aW9uIGRyYXdHZW5lTmFtZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFtcGVkU2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZUxpbmVZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZTogR2VuZSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0SW50ZXJ2YWxzOiBJbnRlcnZhbFtdKSB7XG4gIHZhciBwID0gZ2VuZS5wb3NpdGlvbixcbiAgICAgIGNlbnRlclggPSAwLjUgKiAoY2xhbXBlZFNjYWxlKDEgKyBwLnN0YXJ0KCkpICsgY2xhbXBlZFNjYWxlKDEgKyBwLnN0b3AoKSkpO1xuICAvLyBkbyBub3QgdXNlIGdlbmUgbmFtZSBpZiBpdCBpcyBudWxsIG9yIGVtcHR5XG4gIHZhciBuYW1lID0gICFfLmlzRW1wdHkodXRpbHMuc3RyaW5nVG9MaXRlcmFsKGdlbmUubmFtZSkpID8gZ2VuZS5uYW1lIDogZ2VuZS5pZDtcbiAgdmFyIHRleHRXaWR0aCA9IGN0eC5tZWFzdXJlVGV4dChuYW1lKS53aWR0aDtcbiAgdmFyIHRleHRJbnRlcnZhbCA9IG5ldyBJbnRlcnZhbChjZW50ZXJYIC0gMC41ICogdGV4dFdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlclggKyAwLjUgKiB0ZXh0V2lkdGgpO1xuICBpZiAoIV8uYW55KHRleHRJbnRlcnZhbHMsIGl2ID0+IHRleHRJbnRlcnZhbC5pbnRlcnNlY3RzKGl2KSkpIHtcbiAgICB0ZXh0SW50ZXJ2YWxzLnB1c2godGV4dEludGVydmFsKTtcbiAgICB2YXIgYmFzZWxpbmVZID0gZ2VuZUxpbmVZICsgc3R5bGUuR0VORV9GT05UX1NJWkUgKyBzdHlsZS5HRU5FX1RFWFRfUEFERElORztcbiAgICBjdHguZmlsbFRleHQobmFtZSwgY2VudGVyWCwgYmFzZWxpbmVZKTtcbiAgfVxufVxuXG5jbGFzcyBHZW5lVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8RGF0YVNvdXJjZTxHZW5lPj4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczxEYXRhU291cmNlPEdlbmU+PjtcbiAgc3RhdGU6IFN0YXRlO1xuICBjYWNoZTogR2VuZXJpY0ZlYXR1cmVDYWNoZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8RGF0YVNvdXJjZTxHZW5lPj4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5ldHdvcmtTdGF0dXM6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgLz47XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IEdlbmVyaWNGZWF0dXJlQ2FjaGUodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgICAgLy8gVmlzdWFsaXplIG5ldyByZWZlcmVuY2UgZGF0YSBhcyBpdCBjb21lcyBpbiBmcm9tIHRoZSBuZXR3b3JrLlxuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgKHJhbmdlKSA9PiB7XG4gICAgICAvLyBhZGQgZ2VuZXMgdG8gZ2VuZXJpYyBjYWNoZVxuICAgICAgdmFyIGdlbmVzID0gdGhpcy5wcm9wcy5zb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKTtcbiAgICAgIGdlbmVzLmZvckVhY2goZiA9PiB0aGlzLmNhY2hlLmFkZEZlYXR1cmUobmV3IEdlbmVyaWNGZWF0dXJlKGYuaWQsIGYucG9zaXRpb24sIGYpKSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrcHJvZ3Jlc3MnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IGV9KTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya2RvbmUnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IG51bGx9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHRoaXMucHJvcHMsIHByZXZQcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHModGhpcy5zdGF0ZSwgcHJldlN0YXRlKSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSxcbiAgICAgICAge3dpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuXG4gICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQsIGdlbm9tZVJhbmdlLnN0b3ApO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgdmFyIHNjID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICAvLyBXZSBjYW4ndCBjbGFtcCBzY2FsZSBkaXJlY3RseSBiZWNhdXNlIG9mIG9mZnNldFB4LlxuICAgICAgICBjbGFtcGVkU2NhbGUgPSBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgLmRvbWFpbihbc2MuaW52ZXJ0KDApLCBzYy5pbnZlcnQod2lkdGgpXSlcbiAgICAgICAgICAgIC5yYW5nZShbMCwgd2lkdGhdKVxuICAgICAgICAgICAgLmNsYW1wKHRydWUpO1xuXG5cblxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBzaXplQ2FudmFzXG4gICAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcblxuICAgICAgY3R4LnJlc2V0KCk7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgICAgdmFyIGdlbmVMaW5lWSA9IE1hdGgucm91bmQoaGVpZ2h0IC8gNCk7XG4gICAgICB2YXIgdGV4dEludGVydmFscyA9IFtdOyAgLy8geC1pbnRlcnZhbHMgd2l0aCByZW5kZXJlZCBnZW5lIG5hbWVzLCB0byBhdm9pZCBvdmVyLWRyYXdpbmcuXG4gICAgICBjdHguZm9udCA9IGAke3N0eWxlLkdFTkVfRk9OVF9TSVpFfXB4ICR7c3R5bGUuR0VORV9GT05UfWA7XG4gICAgICBjdHgudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICB2YXIgdkZlYXR1cmVzID0gXy5mbGF0dGVuKF8ubWFwKHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICBnID0+IGcuaXRlbXMpKTtcblxuICAgICAgdkZlYXR1cmVzLmZvckVhY2godkZlYXR1cmUgPT4ge1xuICAgICAgICB2YXIgZ2VuZSA9IHZGZWF0dXJlLmdGZWF0dXJlO1xuICAgICAgICBpZiAoIWdlbmUucG9zaXRpb24uaW50ZXJzZWN0cyhyYW5nZSkpIHJldHVybjtcbiAgICAgICAgY3R4LnB1c2hPYmplY3QoZ2VuZSk7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTE9SO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuR0VORV9DT0xPUjtcblxuICAgICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGNsYW1wZWRTY2FsZSgxICsgZ2VuZS5wb3NpdGlvbi5zdGFydCgpKSwgZ2VuZUxpbmVZICsgMC41LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYW1wZWRTY2FsZSgxICsgZ2VuZS5wb3NpdGlvbi5zdG9wKCkpLCBnZW5lTGluZVkgKyAwLjUpO1xuXG4gICAgICAgIC8vIFRPRE86IG9ubHkgY29tcHV0ZSBhbGwgdGhlc2UgaW50ZXJ2YWxzIHdoZW4gZGF0YSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAgICAgdmFyIGV4b25zID0gYmVkdG9vbHMuc3BsaXRDb2RpbmdFeG9ucyhnZW5lLmV4b25zLCBnZW5lLmNvZGluZ1JlZ2lvbik7XG4gICAgICAgIGV4b25zLmZvckVhY2goZXhvbiA9PiB7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgZ2VuZUxpbmVZIC0gMyAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpLFxuICAgICAgICAgICAgICAgICAgICAgICBzYyhleG9uLnN0b3AgKyAyKSAtIHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgNiAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGludHJvbnMgPSBnZW5lLnBvc2l0aW9uLmludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoZ2VuZS5leG9ucyk7XG4gICAgICAgIGludHJvbnMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgICAgZHJhd0Fycm93KGN0eCwgY2xhbXBlZFNjYWxlLCByYW5nZSwgZ2VuZUxpbmVZICsgMC41LCBnZW5lLnN0cmFuZCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTVBMRU1FTlRfQ09MT1I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBnZW5lLmV4b25zLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgICAgIGRyYXdBcnJvdyhjdHgsIGNsYW1wZWRTY2FsZSwgcmFuZ2UsIGdlbmVMaW5lWSArIDAuNSwgZ2VuZS5zdHJhbmQpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkcmF3R2VuZU5hbWUoY3R4LCBjbGFtcGVkU2NhbGUsIGdlbmVMaW5lWSwgZ2VuZSwgdGV4dEludGVydmFscyk7XG5cbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgfSk7XG4gICAgfSAvLyBlbmQgdHlwZWNoZWNrIGZvciBjYW52YXPDn1xuICB9XG59XG5cbkdlbmVUcmFjay5kaXNwbGF5TmFtZSA9ICdnZW5lcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2VuZVRyYWNrO1xuIiwiLyoqXG4gKiBEYXRhIG1hbmFnZW1lbnQgZm9yIEZlYXR1cmVUcmFjay5cbiAqXG4gKiBUaGlzIGNsYXNzIGdyb3VwcyBmZWF0dXJlcyBhbmQgcGlsZXMgdGhlbSB1cC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG4vKmpzaGludCB1bnVzZWQ6ZmFsc2UgKi9cbmltcG9ydCBHZW5lcmljRmVhdHVyZSBmcm9tICcuLi9kYXRhL2dlbmVyaWNGZWF0dXJlLmpzJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5cbmltcG9ydCB7YWRkVG9QaWxldXB9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCBBYnN0cmFjdENhY2hlIGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5pbXBvcnQgdHlwZSB7VmlzdWFsR3JvdXB9IGZyb20gJy4vQWJzdHJhY3RDYWNoZSc7XG5cbi8vIFRoaXMgY2xhc3MgcHJvdmlkZXMgZGF0YSBtYW5hZ2VtZW50IGZvciB0aGUgdmlzdWFsaXphdGlvblxuY2xhc3MgR2VuZXJpY0ZlYXR1cmVDYWNoZSBleHRlbmRzIEFic3RyYWN0Q2FjaGU8R2VuZXJpY0ZlYXR1cmU+IHtcbiAgLy8gbWFwcyBncm91cEtleSB0byBWaXN1YWxHcm91cFxuICBncm91cHM6IHtba2V5OiBzdHJpbmddOiBWaXN1YWxHcm91cDxHZW5lcmljRmVhdHVyZT59O1xuICByZWZUb1BpbGV1cDoge1trZXk6IHN0cmluZ106IEFycmF5PEludGVydmFsW10+fTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG5cbiAgY29uc3RydWN0b3IocmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2UpIHtcbiAgICBzdXBlcihyZWZlcmVuY2VTb3VyY2UpO1xuICB9XG5cbiAgLy8gbmFtZSB3b3VsZCBtYWtlIGEgZ29vZCBrZXksIGJ1dCBmZWF0dXJlcyBmcm9tIGRpZmZlcmVudCBjb250aWdzXG4gIC8vIHNob3VsZG4ndCBiZSBncm91cGVkIHZpc3VhbGx5LiBIZW5jZSB3ZSB1c2UgZmVhdHVyZSBuYW1lICsgY29udGlnLlxuICBncm91cEtleShmOiBHZW5lcmljRmVhdHVyZSk6IHN0cmluZyB7XG4gICAgICByZXR1cm4gZi5pZCB8fCBmLnBvc2l0aW9uLnRvU3RyaW5nKCk7XG4gIH1cblxuICAvLyBMb2FkIGEgbmV3IGZlYXR1cmUgaW50byB0aGUgdmlzdWFsaXphdGlvbiBjYWNoZS5cbiAgLy8gQ2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIHdpdGggdGhlIHNhbWUgZmVhdHVyZSBpcyBhIG5vLW9wLlxuICBhZGRGZWF0dXJlKGZlYXR1cmU6IEdlbmVyaWNGZWF0dXJlKSB7XG4gICAgdmFyIGtleSA9IHRoaXMuZ3JvdXBLZXkoZmVhdHVyZSk7XG5cbiAgICBpZiAoIShrZXkgaW4gdGhpcy5ncm91cHMpKSB7XG4gICAgICB0aGlzLmdyb3Vwc1trZXldID0ge1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgc3BhbjogZmVhdHVyZS5wb3NpdGlvbixcbiAgICAgICAgcm93OiAtMSwgIC8vIFRCRFxuICAgICAgICBpbnNlcnQ6IG51bGwsXG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cHNba2V5XTtcblxuICAgIGlmIChfLmZpbmQoZ3JvdXAuaXRlbXMsIGYgPT4gZi5nRmVhdHVyZSA9PSBmZWF0dXJlLmdGZWF0dXJlKSkge1xuICAgICAgcmV0dXJuOyAgLy8gd2UndmUgYWxyZWFkeSBnb3QgaXQuXG4gICAgfVxuXG4gICAgZ3JvdXAuaXRlbXMucHVzaChmZWF0dXJlKTtcblxuICAgIGlmICghKGZlYXR1cmUucG9zaXRpb24uY29udGlnIGluIHRoaXMucmVmVG9QaWxldXApKSB7XG4gICAgICB0aGlzLnJlZlRvUGlsZXVwW2ZlYXR1cmUucG9zaXRpb24uY29udGlnXSA9IFtdO1xuICAgIH1cbiAgICB2YXIgcGlsZXVwID0gdGhpcy5yZWZUb1BpbGV1cFtmZWF0dXJlLnBvc2l0aW9uLmNvbnRpZ107XG4gICAgZ3JvdXAucm93ID0gYWRkVG9QaWxldXAoZ3JvdXAuc3Bhbi5pbnRlcnZhbCwgcGlsZXVwKTtcbiAgIFxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBHZW5lcmljRmVhdHVyZUNhY2hlXG59O1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIGRpc3BsYXlzIGEgcmVmZXJlbmNlIGdlbm9tZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IHtSZWFjdCwgUmVhY3RET019IGZyb20gJy4uL1NoaW1EZXBlbmRlbmNpZXMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBEaXNwbGF5TW9kZSBmcm9tICcuL0Rpc3BsYXlNb2RlJztcbmltcG9ydCBUaWxlZENhbnZhcyBmcm9tICcuL1RpbGVkQ2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxuZnVuY3Rpb24gcmVuZGVyR2Vub21lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgICAgYmFzZVBhaXJzOiBzdHJpbmcpIHtcbiAgdmFyIHB4UGVyTGV0dGVyID0gc2NhbGUoMSkgLSBzY2FsZSgwKTtcbiAgdmFyIG1vZGUgPSBEaXNwbGF5TW9kZS5nZXREaXNwbGF5TW9kZShweFBlckxldHRlcik7XG4gIHZhciBzaG93VGV4dCA9IERpc3BsYXlNb2RlLmlzVGV4dChtb2RlKTtcblxuICAvLyBnZXQgYWRqdXN0ZWQgY2FudmFzIGhlaWdodCBmb3IgZHJhd2luZyBsZXR0ZXJzIGFuZCByZWN0c1xuICB2YXIgYWRqdXN0ZWRIZWlnaHQgPSBoZWlnaHQvd2luZG93LmRldmljZVBpeGVsUmF0aW87XG5cbiAgaWYgKG1vZGUgIT0gRGlzcGxheU1vZGUuSElEREVOKSB7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGN0eC5mb250ID0gc3R5bGUuVEVYVF9TVFlMRShtb2RlLCBhZGp1c3RlZEhlaWdodCk7XG5cbiAgICB2YXIgcHJldmlvdXNCYXNlID0gbnVsbDtcbiAgICB2YXIgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgICBzdG9wID0gcmFuZ2Uuc3RvcCgpO1xuICAgIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPD0gc3RvcDsgcG9zKyspIHtcbiAgICAgIHZhciBsZXR0ZXIgPSBiYXNlUGFpcnNbcG9zIC0gc3RhcnRdO1xuICAgICAgaWYgKGxldHRlciA9PSAnLicpIGNvbnRpbnVlOyAgLy8gbm90IHlldCBrbm93blxuXG4gICAgICBjdHguc2F2ZSgpO1xuICAgICAgY3R4LnB1c2hPYmplY3Qoe3BvcywgbGV0dGVyfSk7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQkFTRV9DT0xPUlNbbGV0dGVyXTtcbiAgICAgIGlmIChzaG93VGV4dCkge1xuICAgICAgICAvLyBXZSBvbmx5IHB1c2ggb2JqZWN0cyBpbiB0aGUgdGV4dCBjYXNlIGFzIGl0IGludm9sdmVzIGNyZWF0aW5nIGFcbiAgICAgICAgLy8gbmV3IG9iamVjdCAmIGNhbiBiZWNvbWUgYSBwZXJmb3JtYW5jZSBpc3N1ZS5cbiAgICAgICAgLy8gMC41ID0gY2VudGVyZWRcbiAgICAgICAgY3R4LmZpbGxUZXh0KGxldHRlciwgc2NhbGUoMSArIDAuNSArIHBvcyksIGFkanVzdGVkSGVpZ2h0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChweFBlckxldHRlciA+PSBzdHlsZS5DT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVApIHtcbiAgICAgICAgICAvLyBXZSB3YW50IGEgd2hpdGUgc3BhY2UgYmV0d2VlbiBibG9ja3MgYXQgdGhpcyBzaXplLCBzbyB3ZSBjYW4gc2VlXG4gICAgICAgICAgLy8gdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBiYXNlcy5cbiAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIHBvcykgKyAwLjUsIDAsICBweFBlckxldHRlciAtIDEuNSwgYWRqdXN0ZWRIZWlnaHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHByZXZpb3VzQmFzZSA9PT0gbGV0dGVyKSB7XG4gICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB3YW50IHJ1bnMgb2YgY29sb3JzIHRvIGJlIGNvbXBsZXRlbHkgc29saWQgLi4uXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBwb3MpIC0gMS41LCAwLCBweFBlckxldHRlciArIDEuNSwgYWRqdXN0ZWRIZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIC4uLiBhbmQgbWluaW1pemUgdGhlIGFtb3VudCBvZiBzbXVkZ2luZyBhbmQgd2hpdGVzcGFjZSBiZXR3ZWVuXG4gICAgICAgICAgLy8gYmFzZXMuXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBwb3MpIC0gMC41LCAwLCAgcHhQZXJMZXR0ZXIgKyAxLjUsIGFkanVzdGVkSGVpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgcHJldmlvdXNCYXNlID0gbGV0dGVyO1xuICAgIH1cbiAgfVxufVxuXG5cbmNsYXNzIEdlbm9tZVRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBzb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgaGVpZ2h0OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBUd29CaXRTb3VyY2UsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAvLyB3b3JrYXJvdW5kIGZvciBhbiBpc3N1ZSBpbiBQaGFudG9tSlMgd2hlcmUgaGVpZ2h0IGFsd2F5cyBjb21lcyBvdXQgdG8gemVyby5cbiAgICB0aGlzLmhlaWdodCA9IE1hdGgubWF4KDEsIGhlaWdodCk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgc2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIC8vIFRoZSArLy0xIGVuc3VyZXMgdGhhdCBwYXJ0aWFsbHktdmlzaWJsZSBiYXNlcyBvbiB0aGUgZWRnZSBhcmUgcmVuZGVyZWQuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0ge1xuICAgICAgY29udGlnOiByYW5nZS5jb250aWcsXG4gICAgICBzdGFydDogTWF0aC5tYXgoMCwgcmFuZ2Uuc3RhcnQoKSAtIDEpLFxuICAgICAgc3RvcDogcmFuZ2Uuc3RvcCgpICsgMVxuICAgIH07XG4gICAgdmFyIGJhc2VQYWlycyA9IHRoaXMuc291cmNlLmdldFJhbmdlQXNTdHJpbmcoZ2Vub21lUmFuZ2UpO1xuICAgIHJlbmRlckdlbm9tZShjdHgsIHNjYWxlLCB0aGlzLmhlaWdodCwgQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKGdlbm9tZVJhbmdlKSwgYmFzZVBhaXJzKTtcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xuICB9XG5cbiAgdXBkYXRlSGVpZ2h0KGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cbn1cblxuY2xhc3MgR2Vub21lVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8VHdvQml0U291cmNlPiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPFR3b0JpdFNvdXJjZT47XG4gIHN0YXRlOiBTdGF0ZTsgIC8vIG5vIHN0YXRlLCB1c2VkIHRvIG1ha2UgZmxvdyBoYXBweVxuICB0aWxlczogR2Vub21lVGlsZWRDYW52YXM7XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgLz47XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnRpbGVzID0gbmV3IEdlbm9tZVRpbGVkQ2FudmFzKHRoaXMucHJvcHMuc291cmNlLCB0aGlzLnByb3BzLmhlaWdodCk7XG5cbiAgICAvLyBWaXN1YWxpemUgbmV3IHJlZmVyZW5jZSBkYXRhIGFzIGl0IGNvbWVzIGluIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuaGVpZ2h0ICE9IHByZXZQcm9wcy5oZWlnaHQpIHtcbiAgICAgICAgdGhpcy50aWxlcy51cGRhdGVIZWlnaHQodGhpcy5wcm9wcy5oZWlnaHQpO1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLFxuICAgICAgICB7d2lkdGgsIGhlaWdodCwgcmFuZ2V9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDApIHJldHVybjtcblxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBzaXplQ2FudmFzXG4gICAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcblxuICAgICAgY3R4LnJlc2V0KCk7XG4gICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpLCB0aGlzLmdldFNjYWxlKCkpO1xuICAgIH0gLy8gZW5kIHR5cGVjaGVjayBmb3IgY2FudmFzXG4gIH1cbn1cblxuR2Vub21lVHJhY2suZGlzcGxheU5hbWUgPSAncmVmZXJlbmNlJztcblxubW9kdWxlLmV4cG9ydHMgPSBHZW5vbWVUcmFjaztcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiBnZW5vdHlwZXNcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZjZkRhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVmNmRGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7VmFyaWFudENvbnRleHR9IGZyb20gJy4uL2RhdGEvdmFyaWFudCc7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCB7UmVhY3R9IGZyb20gJy4uL1NoaW1EZXBlbmRlbmNpZXMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cblxuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBzaGFsbG93RXF1YWxzIGZyb20gJ3NoYWxsb3ctZXF1YWxzJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IFRpbGVkQ2FudmFzIGZyb20gJy4vVGlsZWRDYW52YXMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgdHlwZSB7U3RhdGV9IGZyb20gJy4uL3R5cGVzJztcblxudmFyIE1PTlNURVJfUkVRVUVTVCA9IDEwMDAwO1xudmFyIExBQkVMX1dJRFRIID0gMTAwO1xuXG5jbGFzcyBHZW5vdHlwZVRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBvcHRpb25zOiBPYmplY3Q7XG4gIHNvdXJjZTogVmNmRGF0YVNvdXJjZTtcbiAgY2FsbFNldE5hbWVzOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IFZjZkRhdGFTb3VyY2UsIGNhbGxTZXROYW1lczogc3RyaW5nW10sIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB0aGlzLmNhbGxTZXROYW1lcyA9IGNhbGxTZXROYW1lcztcbiAgfVxuXG4gIHVwZGF0ZShuZXdPcHRpb25zOiBPYmplY3QpIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBuZXdPcHRpb25zO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4geUZvclJvdyh0aGlzLmNhbGxTZXROYW1lcy5sZW5ndGgpO1xuICB9XG5cbiAgcmVuZGVyKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICBvcmlnaW5hbFJhbmdlOiA/Q29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIHZhciByZWxheGVkUmFuZ2UgPVxuICAgICAgICBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpIC0gMSwgcmFuZ2Uuc3RvcCgpICsgMSk7XG5cbiAgICAvLyByZWxheGVkIHJhbmdlIGlzIGp1c3QgZm9yIHRoaXMgdGlsZVxuICAgIHZhciB2R2Vub3R5cGVzID0gdGhpcy5zb3VyY2UuZ2V0R2Vub3R5cGVzSW5SYW5nZShyZWxheGVkUmFuZ2UpO1xuICAgIHJlbmRlckdlbm90eXBlcyhjdHgsIHNjYWxlLCByZWxheGVkUmFuZ2UsIHZHZW5vdHlwZXMsIHRoaXMuY2FsbFNldE5hbWVzKTtcbiAgfVxufVxuLy8gRHJhdyBnZW5vdHlwZXNcbmZ1bmN0aW9uIHJlbmRlckdlbm90eXBlcyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgIHZjczogVmFyaWFudENvbnRleHRbXSxcbiAgICAgICAgICAgICAgICAgICAgY2FsbFNldE5hbWVzOiBzdHJpbmdbXSkge1xuICAgIC8vIGRyYXcgZ2Vub3R5cGVzXG4gICAgdmNzLmZvckVhY2godmMgPT4ge1xuICAgICAgICB2YXIgdmFyaWFudCA9IHZjLnZhcmlhbnQ7XG4gICAgICAgIGN0eC5wdXNoT2JqZWN0KHZhcmlhbnQpO1xuXG4gICAgICAgIHZhciB4ID0gTWF0aC5yb3VuZChzY2FsZSh2YXJpYW50LnBvc2l0aW9uKSk7XG4gICAgICAgIHZhciB3aWR0aCA9IE1hdGgubWF4KDEsIE1hdGgucm91bmQoc2NhbGUodmFyaWFudC5wb3NpdGlvbiArIDEpIC0gc2NhbGUodmFyaWFudC5wb3NpdGlvbikpKTtcbiAgICAgICAgdmMuY2FsbHMuZm9yRWFjaChjYWxsID0+IHtcbiAgICAgICAgICB2YXIgeSA9IHlGb3JSb3coY2FsbFNldE5hbWVzLmluZGV4T2YoY2FsbC5jYWxsU2V0TmFtZSkpO1xuICAgICAgICAgIGN0eC5maWxsU3R5bGUgPSBjYWxsLmdlbm90eXBlLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApID09IDEgPyBzdHlsZS5HRU5PVFlQRV9GSUxMX0hFVCA6IHN0eWxlLkdFTk9UWVBFX0ZJTExfSE9NO1xuICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGN0eC5maWxsU3R5bGU7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHggLSAwLjIsIHksIHdpZHRoLCBzdHlsZS5HRU5PVFlQRV9IRUlHSFQpO1xuICAgICAgICAgIGN0eC5zdHJva2VSZWN0KHggLSAwLjIsIHksIHdpZHRoLCBzdHlsZS5HRU5PVFlQRV9IRUlHSFQpO1xuICAgICAgICB9KTtcbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiB5Rm9yUm93KHJvdykge1xuICByZXR1cm4gcm93ICogKHN0eWxlLkdFTk9UWVBFX0hFSUdIVCArIHN0eWxlLkdFTk9UWVBFX1NQQUNJTkcpO1xufVxuXG5jbGFzcyBHZW5vdHlwZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50PFZpelByb3BzPFZjZkRhdGFTb3VyY2U+LCBTdGF0ZT4ge1xuICBwcm9wczogVml6UHJvcHM8VmNmRGF0YVNvdXJjZT47XG4gIHN0YXRlOiBTdGF0ZTtcbiAgdGlsZXM6IEdlbm90eXBlVGlsZWRDYW52YXM7XG4gIGNhbGxTZXROYW1lczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IE9iamVjdCkge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLmNhbGxTZXROYW1lcyA9IFtdO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuZXR3b3JrU3RhdHVzOiBudWxsXG4gICAgfTtcbiAgICBwcm9wcy5zb3VyY2UuZ2V0Q2FsbE5hbWVzKCkudGhlbihzYW1wbGVzID0+IHtcbiAgICAgIHRoaXMuY2FsbFNldE5hbWVzID0gc2FtcGxlcztcbiAgICAgIHRoaXMudGlsZXMuY2FsbFNldE5hbWVzID0gc2FtcGxlcztcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUaGVzZSBzdHlsZXMgYWxsb3cgdmVydGljYWwgc2Nyb2xsaW5nIHRvIHNlZSB0aGUgZnVsbCBwaWxldXAuXG4gICAgLy8gQWRkaW5nIGEgdmVydGljYWwgc2Nyb2xsYmFyIHNocmlua3MgdGhlIHZpc2libGUgYXJlYSwgYnV0IHdlIGhhdmUgdG8gYWN0XG4gICAgLy8gYXMgdGhvdWdoIGl0IGRvZXNuJ3QsIHNpbmNlIGFkanVzdGluZyB0aGUgc2NhbGUgd291bGQgcHV0IGl0IG91dCBvZiBzeW5jXG4gICAgLy8gd2l0aCBvdGhlciB0cmFja3MuXG4gICAgdmFyIGNvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgICdoZWlnaHQnOiAnMTAwJSdcbiAgICB9O1xuXG4gICAgdmFyIGxhYmVsU3R5bGVzID0ge1xuICAgICAgJ2Zsb2F0JzogJ2xlZnQnLFxuICAgICAgJ292ZXJmbG93JzogJ2hpZGRlbicsXG4gICAgICAnd2lkdGg6JzogYCR7IExBQkVMX1dJRFRIIH1weGBcbiAgICB9O1xuXG4gICAgdmFyIGNhbnZhc1N0eWxlcyA9IHtcbiAgICAgICdvdmVyZmxvdyc6ICdoaWRkZW4nXG4gICAgfTtcblxuICAgIHZhciBzdGF0dXNFbCA9IG51bGwsXG4gICAgICAgIG5ldHdvcmtTdGF0dXMgPSB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0dXM7XG4gICAgaWYgKG5ldHdvcmtTdGF0dXMpIHtcbiAgICAgIHN0YXR1c0VsID0gKFxuICAgICAgICA8ZGl2IHJlZj0nc3RhdHVzJyBjbGFzc05hbWU9J25ldHdvcmstc3RhdHVzLXNtYWxsJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtbWVzc2FnZS1zbWFsbCc+XG4gICAgICAgICAgICBMb2FkaW5nIEdlbm90eXBlc+KAplxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICAgIHZhciByYW5nZUxlbmd0aCA9IHRoaXMucHJvcHMucmFuZ2Uuc3RvcCAtIHRoaXMucHJvcHMucmFuZ2Uuc3RhcnQ7XG4gICAgLy8gSWYgcmFuZ2UgaXMgdG9vIGxhcmdlLCBkbyBub3QgcmVuZGVyICdjYW52YXMnXG4gICAgaWYgKHJhbmdlTGVuZ3RoID49IE1PTlNURVJfUkVRVUVTVCkge1xuICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2VudGVyJz5cbiAgICAgICAgICAgICAgWm9vbSBpbiB0byBzZWUgZ2Vub3R5cGVzXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxjYW52YXMgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge3N0YXR1c0VsfVxuICAgICAgICAgIDxkaXYgcmVmPSdjb250YWluZXInIHN0eWxlPXtjb250YWluZXJTdHlsZXN9PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZW5vdHlwZUxhYmVsc1wiIHN0eWxlPXtsYWJlbFN0eWxlc30+PGNhbnZhcyByZWY9J2xhYmVsQ2FudmFzJyAvPjwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJnZW5vdHlwZVJvd3NcIiBzdHlsZT17Y2FudmFzU3R5bGVzfT48Y2FudmFzIHJlZj0nY2FudmFzJyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+PC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICAgICAgdGhpcy50aWxlcyA9IG5ldyBHZW5vdHlwZVRpbGVkQ2FudmFzKHRoaXMucHJvcHMuc291cmNlLFxuICAgICAgICB0aGlzLmNhbGxTZXROYW1lcywgdGhpcy5wcm9wcy5vcHRpb25zKTtcblxuICAgICAgICAvLyBWaXN1YWxpemUgbmV3IGRhdGEgYXMgaXQgY29tZXMgaW4gZnJvbSB0aGUgbmV0d29yay5cbiAgICAgICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCAocmFuZ2UpID0+IHtcbiAgICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya3Byb2dyZXNzJywgZSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtkb25lJywgZSA9PiB7XG4gICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGggLSBMQUJFTF9XSURUSCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gZHJhd3MgZ2Vub3R5cGUgbGluZXMgdG8gdmlzdWFsbHkgc2VwYXJhdGUgZ2Vub3R5cGUgcm93c1xuICBkcmF3TGluZXMoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgdmFyIHdpZHRoID0gdGhpcy5wcm9wcy53aWR0aDtcblxuICAgIC8vIGRyYXcgYmFja2dyb3VuZCBmb3IgZWFjaCByb3dcbiAgICBpZiAodGhpcy5jYWxsU2V0TmFtZXMgIT09IG51bGwpIHtcbiAgICAgIGN0eC5mb250ID0gXCI5cHggQXJpYWxcIjtcbiAgICAgIHRoaXMuY2FsbFNldE5hbWVzLmZvckVhY2goc2FtcGxlSWQgPT4ge1xuICAgICAgICBjdHgucHVzaE9iamVjdChzYW1wbGVJZCk7XG4gICAgICAgIHZhciB5ID0geUZvclJvdyh0aGlzLmNhbGxTZXROYW1lcy5pbmRleE9mKHNhbXBsZUlkKSk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQUNLR1JPVU5EX0ZJTEw7XG4gICAgICAgIGN0eC5maWxsUmVjdCgwLCB5LCB3aWR0aCwgc3R5bGUuR0VOT1RZUEVfSEVJR0hUKTtcbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLy8gZHJhd3Mgc2FtcGxlIG5hbWVzIG9uIHNpZGUgYmFyLiBUaGlzIG5lZWRzIHRvIGJlIG9ubHkgcmVuZGVyZWQgb25jZS5cbiAgZHJhd0xhYmVscygpIHtcbiAgICAvLyBpZiBhbHJlYWR5IGRyYXduLCByZXR1cm5cbiAgICB2YXIgbGFiZWxDYW52YXMgPSAodGhpcy5yZWZzLmxhYmVsQ2FudmFzIDogSFRNTENhbnZhc0VsZW1lbnQpLFxuICAgICAgICB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGg7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBsYWJlbENhbnZhcyA9PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuXG4gICAgdmFyIGhlaWdodCA9IHlGb3JSb3codGhpcy5jYWxsU2V0TmFtZXMubGVuZ3RoKTtcblxuXG4gICAgLy8gb25seSByZW5kZXIgb25jZSBvbiBsb2FkLlxuICAgIGlmIChsYWJlbENhbnZhcy5jbGllbnRIZWlnaHQgIT0gaGVpZ2h0KSB7XG4gICAgICB2YXIgbGFiZWxDdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGNhbnZhc1V0aWxzLmdldENvbnRleHQobGFiZWxDYW52YXMpKTtcbiAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhsYWJlbENhbnZhcywgTEFCRUxfV0lEVEgsIGhlaWdodCk7XG5cbiAgICAgIC8vIGRyYXcgbGFiZWwgZm9yIGVhY2ggcm93XG4gICAgICBpZiAodGhpcy5jYWxsU2V0TmFtZXMgIT09IG51bGwpIHtcbiAgICAgICAgbGFiZWxDdHguZm9udCA9IFwiOXB4IEFyaWFsXCI7XG4gICAgICAgIHRoaXMuY2FsbFNldE5hbWVzLmZvckVhY2goc2FtcGxlSWQgPT4ge1xuICAgICAgICAgIGxhYmVsQ3R4LnB1c2hPYmplY3Qoc2FtcGxlSWQpO1xuICAgICAgICAgIHZhciB5ID0geUZvclJvdyh0aGlzLmNhbGxTZXROYW1lcy5pbmRleE9mKHNhbXBsZUlkKSk7XG4gICAgICAgICAgbGFiZWxDdHguZmlsbFN0eWxlID0gXCJibGFja1wiO1xuICAgICAgICAgIGxhYmVsQ3R4LmZpbGxUZXh0KHNhbXBsZUlkLCAwLCB5K3N0eWxlLkdFTk9UWVBFX0hFSUdIVCk7XG4gICAgICAgICAgbGFiZWxDdHgucG9wT2JqZWN0KCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9ICh0aGlzLnJlZnMuY2FudmFzIDogSFRNTENhbnZhc0VsZW1lbnQpLFxuICAgICAgICB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGg7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBjYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuY2FsbFNldE5hbWVzLmxlbmd0aCk7XG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGggLSBMQUJFTF9XSURUSCwgaGVpZ2h0KTtcblxuICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKSk7XG4gICAgdGhpcy5kcmF3TGFiZWxzKCk7XG4gICAgdGhpcy5yZW5kZXJTY2VuZShjdHgpO1xuICB9XG5cbiAgcmVuZGVyU2NlbmUoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgdmFyIHJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSxcbiAgICAgICAgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpO1xuXG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICAvLyByZW5kZXIgbGluZXMgYWZ0ZXIgcmVjdGFuZ2xlIGhhcyBiZWVuIGNsZWFyZWRcbiAgICB0aGlzLmRyYXdMaW5lcyhjdHgpO1xuXG4gICAgdGhpcy50aWxlcy5yZW5kZXJUb1NjcmVlbihjdHgsIGludGVydmFsLCBzY2FsZSk7XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYO1xuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSxcbiAgICAgICAgLy8gYWxsb3cgc29tZSBidWZmZXJpbmcgc28gY2xpY2sgaXNuJ3Qgc28gc2Vuc2l0aXZlXG4gICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQtMSwgZ2Vub21lUmFuZ2Uuc3RvcCsxKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIC8vIGxlYXZlIHBhZGRpbmcgb2YgMnB4IHRvIHJlZHVjZSBjbGljayBzcGVjaWZpY2l0eVxuICAgICAgICBjbGlja1N0YXJ0ID0gTWF0aC5mbG9vcihzY2FsZS5pbnZlcnQoeCkpIC0gMixcbiAgICAgICAgY2xpY2tFbmQgPSBjbGlja1N0YXJ0ICsgMixcbiAgICAgICAgLy8gSWYgY2xpY2stdHJhY2tpbmcgZ2V0cyBzbG93LCB0aGlzIHJhbmdlIGNvdWxkIGJlIG5hcnJvd2VkIHRvIG9uZVxuICAgICAgICAvLyBjbG9zZXIgdG8gdGhlIGNsaWNrIGNvb3JkaW5hdGUsIHJhdGhlciB0aGFuIHRoZSB3aG9sZSB2aXNpYmxlIHJhbmdlLlxuICAgICAgICB2R2Vub3R5cGVzID0gdGhpcy5wcm9wcy5zb3VyY2UuZ2V0R2Vub3R5cGVzSW5SYW5nZShyYW5nZSk7XG5cbiAgICB2YXIgZ2Vub3R5cGUgPSBfLmZpbmQodkdlbm90eXBlcywgZiA9PiB1dGlscy50dXBsZVJhbmdlT3ZlcmxhcHMoW1tmLnZhcmlhbnQucG9zaXRpb25dLCBbZi52YXJpYW50LnBvc2l0aW9uKzFdXSwgW1tjbGlja1N0YXJ0XSwgW2NsaWNrRW5kXV0pKTtcbiAgICB2YXIgYWxlcnQgPSB3aW5kb3cuYWxlcnQgfHwgY29uc29sZS5sb2c7XG4gICAgaWYgKGdlbm90eXBlKSB7XG4gICAgICB2YXIgdmFyaWFudFN0cmluZyA9IGB2YXJpYW50OiAke0pTT04uc3RyaW5naWZ5KGdlbm90eXBlLnZhcmlhbnQpfWA7XG4gICAgICB2YXIgY2FsbFNldE5hbWVzID0gZ2Vub3R5cGUuY2FsbHMubWFwKHIgPT4gci5jYWxsU2V0TmFtZSk7XG4gICAgICB2YXIgc2FtcGxlcyA9IGBzYW1wbGVzIHdpdGggdmFyaWFudDogJHtKU09OLnN0cmluZ2lmeShjYWxsU2V0TmFtZXMpfWA7XG4gICAgICBhbGVydChgJHt2YXJpYW50U3RyaW5nfVxcbiR7c2FtcGxlc31gKTtcbiAgICB9XG4gIH1cbn1cblxuR2Vub3R5cGVUcmFjay5kaXNwbGF5TmFtZSA9ICdnZW5vdHlwZXMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdlbm90eXBlVHJhY2s7XG4iLCIvKipcbiAqIEEgdHJhY2sgd2hpY2ggc2hvd3MgdGhlIGxvY2F0aW9uIG9mIHRoZSBiYXNlIGluIHRoZSBtaWRkbGUgb2YgdGhlIHZpZXcuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHR5cGUge1N0YXRlfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge1JlYWN0LCBSZWFjdERPTX0gZnJvbSAnLi4vU2hpbURlcGVuZGVuY2llcyc7XG5pbXBvcnQgRW1wdHlTb3VyY2UgZnJvbSAnLi4vc291cmNlcy9FbXB0eVNvdXJjZSc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5cbmNsYXNzIExvY2F0aW9uVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8dm9pZD4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczx2b2lkPjtcbiAgc3RhdGU6IFN0YXRlOyAgLy8gc3RhdGUgbm90IHVzZWQsIGhlcmUgdG8gbWFrZSBmbG93IGhhcHB5XG4gIHN0YXRpYyBkZWZhdWx0U291cmNlOiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzPHZvaWQ+KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyksXG4gICAgICAgIHtyYW5nZSwgd2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcblxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBzaXplQ2FudmFzXG4gICAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHgucmVzZXQoKTtcbiAgICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgICB2YXIgbWlkUG9pbnQgPSBNYXRoLmZsb29yKChyYW5nZS5zdG9wICsgcmFuZ2Uuc3RhcnQpIC8gMiksXG4gICAgICAgICAgcmlnaHRMaW5lWCA9IE1hdGgucm91bmQoc2NhbGUobWlkUG9pbnQgKyAxKSksXG4gICAgICAgICAgbGVmdExpbmVYID0gTWF0aC5yb3VuZChzY2FsZShtaWRQb2ludCkpO1xuXG4gICAgICAvLyBMZWZ0IGxpbmVcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbGVmdExpbmVYIC0gMC41LCAwLCBsZWZ0TGluZVggLSAwLjUsIGhlaWdodCk7XG5cbiAgICAgIC8vIFJpZ2h0IGxpbmVcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgcmlnaHRMaW5lWCAtIDAuNSwgMCwgcmlnaHRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcblxuICAgICAgLy8gTWlkIGxhYmVsXG4gICAgICB2YXIgbWlkWSA9IGhlaWdodCAvIDI7XG5cbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5MT0NfRk9OVF9DT0xPUjtcbiAgICAgIGN0eC5mb250ID0gc3R5bGUuTE9DX0ZPTlRfU1RZTEU7XG4gICAgICBjdHguZmlsbFRleHQobWlkUG9pbnQudG9Mb2NhbGVTdHJpbmcoKSArICcgYnAnLFxuICAgICAgICAgICAgICAgICAgIHJpZ2h0TGluZVggKyBzdHlsZS5MT0NfVElDS19MRU5HVEggKyBzdHlsZS5MT0NfVEVYVF9QQURESU5HLFxuICAgICAgICAgICAgICAgICAgIG1pZFkgKyBzdHlsZS5MT0NfVEVYVF9ZX09GRlNFVCk7XG5cbiAgICAgIC8vIENvbm5lY3QgbGFiZWwgd2l0aCB0aGUgcmlnaHQgbGluZVxuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCByaWdodExpbmVYIC0gMC41LCBtaWRZIC0gMC41LCByaWdodExpbmVYICsgc3R5bGUuTE9DX1RJQ0tfTEVOR1RIIC0gMC41LCBtaWRZIC0gMC41KTtcblxuICAgICAgLy8gY2xlYW4gdXBcbiAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfSAvLyBlbmQgdHlwZWNoZWNrIGZvciBjYW52YXNcbiAgfVxufVxuXG5Mb2NhdGlvblRyYWNrLmRpc3BsYXlOYW1lID0gJ2xvY2F0aW9uJztcbkxvY2F0aW9uVHJhY2suZGVmYXVsdFNvdXJjZSA9IEVtcHR5U291cmNlLmNyZWF0ZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IExvY2F0aW9uVHJhY2s7XG4iLCIvKipcbiAqIERhdGEgbWFuYWdlbWVudCBmb3IgUGlsZXVwVHJhY2suXG4gKlxuICogVGhpcyBjbGFzcyBncm91cHMgcGFpcmVkIHJlYWRzIGFuZCBwaWxlcyB0aGVtIHVwLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0cmFuZCwgQWxpZ25tZW50fSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtCYXNlUGFpcn0gZnJvbSAnLi9waWxldXB1dGlscyc7XG5pbXBvcnQgQWJzdHJhY3RDYWNoZSBmcm9tICcuL0Fic3RyYWN0Q2FjaGUnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbEdyb3VwfSBmcm9tICcuL0Fic3RyYWN0Q2FjaGUnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IHthZGRUb1BpbGV1cCwgZ2V0T3BJbmZvfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cbi8vIFRoaXMgYnVuZGxlcyBldmVyeXRoaW5nIGludHJpbnNpYyB0byB0aGUgYWxpZ25tZW50IHRoYXQgd2UgbmVlZCB0byBkaXNwbGF5XG4vLyBpdCwgaS5lLiBldmVyeXRoaW5nIG5vdCBkZXBlbmRlbmQgb24gc2NhbGUvdmlld3BvcnQuXG5leHBvcnQgdHlwZSBWaXN1YWxBbGlnbm1lbnQgPSB7XG4gIHJlYWQ6IEFsaWdubWVudDtcbiAgc3RyYW5kOiBTdHJhbmQ7XG4gIHJlZkxlbmd0aDogbnVtYmVyOyAgLy8gc3BhbiBvbiB0aGUgcmVmZXJlbmNlIChhY2NvdW50aW5nIGZvciBpbmRlbHMpXG4gIG1pc21hdGNoZXM6IEFycmF5PEJhc2VQYWlyPjtcbiAgb3BzOiBPYmplY3RbXTtcbn07XG5cbi8vIEluc2VydCBzaXplcyB3aXRoaW4gdGhpcyBwZXJjZW50aWxlIHJhbmdlIHdpbGwgYmUgY29uc2lkZXJlZCBcIm5vcm1hbFwiLlxuY29uc3QgTUlOX09VVExJRVJfUEVSQ0VOVElMRSA9IDAuNTtcbmNvbnN0IE1BWF9PVVRMSUVSX1BFUkNFTlRJTEUgPSA5OS41O1xuY29uc3QgTUFYX0lOU0VSVF9TSVpFID0gMzAwMDA7ICAvLyBpZ25vcmUgaW5zZXJ0cyBsYXJnZXIgdGhhbiB0aGlzIGluIGNhbGN1bGF0aW9uc1xuY29uc3QgTUlOX1JFQURTX0ZPUl9PVVRMSUVSUyA9IDUwMDsgIC8vIG1pbmltdW0gcmVhZHMgZm9yIHJlbGlhYmxlIHN0YXRzXG5cbmV4cG9ydCB0eXBlIEluc2VydFN0YXRzID0ge1xuICBtaW5PdXRsaWVyU2l6ZTogbnVtYmVyO1xuICBtYXhPdXRsaWVyU2l6ZTogbnVtYmVyO1xufTtcblxuLy8gVGhpcyBjbGFzcyBwcm92aWRlcyBkYXRhIG1hbmFnZW1lbnQgZm9yIHRoZSB2aXN1YWxpemF0aW9uLCBncm91cGluZyBwYWlyZWRcbi8vIHJlYWRzIGFuZCBtYW5hZ2luZyB0aGUgcGlsZXVwLlxuY2xhc3MgUGlsZXVwQ2FjaGUgZXh0ZW5kcyBBYnN0cmFjdENhY2hlPFZpc3VhbEFsaWdubWVudD4ge1xuICAvLyBtYXBzIGdyb3VwS2V5IHRvIFZpc3VhbEdyb3VwXG4gIGdyb3Vwczoge1trZXk6IHN0cmluZ106IFZpc3VhbEdyb3VwPFZpc3VhbEFsaWdubWVudD59O1xuICByZWZUb1BpbGV1cDoge1trZXk6IHN0cmluZ106IEFycmF5PEludGVydmFsW10+fTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHZpZXdBc1BhaXJzOiBib29sZWFuO1xuICBfaW5zZXJ0U3RhdHM6ID9JbnNlcnRTdGF0cztcblxuICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZSwgdmlld0FzUGFpcnM6IGJvb2xlYW4pIHtcbiAgICBzdXBlcihyZWZlcmVuY2VTb3VyY2UpO1xuICAgIHRoaXMudmlld0FzUGFpcnMgPSB2aWV3QXNQYWlycztcbiAgICB0aGlzLl9pbnNlcnRTdGF0cyA9IG51bGw7XG4gIH1cblxuICAvLyByZWFkIG5hbWUgd291bGQgbWFrZSBhIGdvb2Qga2V5LCBidXQgcGFpcmVkIHJlYWRzIGZyb20gZGlmZmVyZW50IGNvbnRpZ3NcbiAgLy8gc2hvdWxkbid0IGJlIGdyb3VwZWQgdmlzdWFsbHkuIEhlbmNlIHdlIHVzZSByZWFkIG5hbWUgKyBjb250aWcuXG4gIGdyb3VwS2V5KHJlYWQ6IEFsaWdubWVudCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMudmlld0FzUGFpcnMpIHtcbiAgICAgIHJldHVybiBgJHtyZWFkLm5hbWV9OiR7cmVhZC5yZWZ9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJlYWQuZ2V0S2V5KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gTG9hZCBhIG5ldyByZWFkIGludG8gdGhlIHZpc3VhbGl6YXRpb24gY2FjaGUuXG4gIC8vIENhbGxpbmcgdGhpcyBtdWx0aXBsZSB0aW1lcyB3aXRoIHRoZSBzYW1lIHJlYWQgaXMgYSBuby1vcC5cbiAgYWRkQWxpZ25tZW50KHJlYWQ6IEFsaWdubWVudCkge1xuICAgIHRoaXMuX2luc2VydFN0YXRzID0gbnVsbDsgIC8vIGludmFsaWRhdGVcbiAgICB2YXIga2V5ID0gdGhpcy5ncm91cEtleShyZWFkKSxcbiAgICAgICAgcmFuZ2UgPSByZWFkLmdldEludGVydmFsKCk7XG5cbiAgICBpZiAoIShrZXkgaW4gdGhpcy5ncm91cHMpKSB7XG4gICAgICB0aGlzLmdyb3Vwc1trZXldID0ge1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgcm93OiAtMSwgIC8vIFRCRFxuICAgICAgICBpbnNlcnQ6IG51bGwsICAvLyBUQkRcbiAgICAgICAgc3BhbjogcmFuZ2UsXG4gICAgICAgIGl0ZW1zOiBbXVxuICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cHNba2V5XTtcblxuICAgIGlmIChfLmZpbmQoZ3JvdXAuaXRlbXMsIGEgPT4gYS5yZWFkID09IHJlYWQpKSB7XG4gICAgICByZXR1cm47ICAvLyB3ZSd2ZSBhbHJlYWR5IGdvdCBpdC5cbiAgICB9XG5cbiAgICB2YXIgb3BJbmZvID0gZ2V0T3BJbmZvKHJlYWQsIHRoaXMucmVmZXJlbmNlU291cmNlKTtcbiAgICB2YXIgdmlzdWFsQWxpZ25tZW50ID0ge1xuICAgICAgcmVhZCxcbiAgICAgIHN0cmFuZDogcmVhZC5nZXRTdHJhbmQoKSxcbiAgICAgIHJlZkxlbmd0aDogcmFuZ2UubGVuZ3RoKCksXG4gICAgICBvcHM6IG9wSW5mby5vcHMsXG4gICAgICBtaXNtYXRjaGVzOiBvcEluZm8ubWlzbWF0Y2hlc1xuICAgIH07XG4gICAgZ3JvdXAuaXRlbXMucHVzaCh2aXN1YWxBbGlnbm1lbnQpO1xuXG4gICAgdmFyIG1hdGVJbnRlcnZhbCA9IG51bGw7XG4gICAgaWYgKGdyb3VwLml0ZW1zLmxlbmd0aCA9PSAxKSB7XG4gICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCByZWFkIGluIHRoZSBncm91cC4gSW5mZXIgaXRzIHNwYW4gZnJvbSBpdHMgbWF0ZSBwcm9wZXJ0aWVzLlxuICAgICAgLy8gVE9ETzogaWYgdGhlIG1hdGUgQWxpZ25tZW50IGlzIGFsc28gYXZhaWxhYmxlLCBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gdXNlIHRoYXQuXG4gICAgICBpZiAodGhpcy52aWV3QXNQYWlycykge1xuICAgICAgICB2YXIgbWF0ZVByb3BzID0gcmVhZC5nZXRNYXRlUHJvcGVydGllcygpO1xuICAgICAgICB2YXIgaW50ZXJ2YWxzID0gW3JhbmdlXTtcbiAgICAgICAgaWYgKG1hdGVQcm9wcyAmJiBtYXRlUHJvcHMucmVmICYmIG1hdGVQcm9wcy5yZWYgPT0gcmVhZC5yZWYpIHtcbiAgICAgICAgICBtYXRlSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwobWF0ZVByb3BzLnJlZiwgbWF0ZVByb3BzLnBvcywgbWF0ZVByb3BzLnBvcyArIHJhbmdlLmxlbmd0aCgpKTtcbiAgICAgICAgICBpbnRlcnZhbHMucHVzaChtYXRlSW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGdyb3VwID0gXy5leHRlbmQoZ3JvdXAsIHNwYW5BbmRJbnNlcnQoaW50ZXJ2YWxzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBncm91cC5zcGFuID0gcmFuZ2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghKHJlYWQucmVmIGluIHRoaXMucmVmVG9QaWxldXApKSB7XG4gICAgICAgIHRoaXMucmVmVG9QaWxldXBbcmVhZC5yZWZdID0gW107XG4gICAgICB9XG4gICAgICB2YXIgcGlsZXVwID0gdGhpcy5yZWZUb1BpbGV1cFtyZWFkLnJlZl07XG4gICAgICBncm91cC5yb3cgPSBhZGRUb1BpbGV1cChncm91cC5zcGFuLmludGVydmFsLCBwaWxldXApO1xuICAgIH0gZWxzZSBpZiAoZ3JvdXAuaXRlbXMubGVuZ3RoID09IDIpIHtcbiAgICAgIC8vIFJlZmluZSB0aGUgY29ubmVjdG9yXG4gICAgICBtYXRlSW50ZXJ2YWwgPSBncm91cC5pdGVtc1swXS5yZWFkLmdldEludGVydmFsKCk7XG4gICAgICB2YXIge3NwYW4sIGluc2VydH0gPSBzcGFuQW5kSW5zZXJ0KFtyYW5nZSwgbWF0ZUludGVydmFsXSk7XG4gICAgICBncm91cC5pbnNlcnQgPSBpbnNlcnQ7XG4gICAgICBpZiAoaW5zZXJ0KSB7XG4gICAgICAgIGdyb3VwLnNwYW4gPSBzcGFuO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB0aGlzIG11c3QgYmUgYSBjaGltZXJpYyByZWFkLlxuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZXMgcmVmZXJlbmNlIG1pc21hdGNoIGluZm9ybWF0aW9uIGZvciBwcmV2aW91c2x5LWxvYWRlZCByZWFkcy5cbiAgdXBkYXRlTWlzbWF0Y2hlcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5ncm91cHMpIHtcbiAgICAgIHZhciByZWFkcyA9IHRoaXMuZ3JvdXBzW2tdLml0ZW1zO1xuICAgICAgZm9yICh2YXIgdlJlYWQgb2YgcmVhZHMpIHtcbiAgICAgICAgdmFyIHJlYWQgPSB2UmVhZC5yZWFkO1xuICAgICAgICBpZiAocmVhZC5nZXRJbnRlcnZhbCgpLmludGVyc2VjdHMocmFuZ2UpKSB7XG4gICAgICAgICAgdmFyIG9wSW5mbyA9IGdldE9wSW5mbyhyZWFkLCB0aGlzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgICAgICAgdlJlYWQubWlzbWF0Y2hlcyA9IG9wSW5mby5taXNtYXRjaGVzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gUmUtc29ydCB0aGUgcGlsZXVwIHNvIHRoYXQgcmVhZHMgb3ZlcmxhcHBpbmcgdGhlIGxvY3VzIGFyZSBvbiB0b3AuXG4gIHNvcnRSZWFkc0F0KGNvbnRpZzogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKSB7XG4gICAgLy8gU3RyYXRlZ3k6IEZvciBlYWNoIHBpbGV1cCByb3csIGRldGVybWluZSB3aGV0aGVyIGl0IG92ZXJsYXBzIHRoZSBsb2N1cy5cbiAgICAvLyBUaGVuIHNvcnQgdGhlIGFycmF5IGluZGljZXMgdG8gZ2V0IGEgcGVybXV0YXRpb24uXG4gICAgLy8gQnVpbGQgYSBuZXcgcGlsZXVwIGJ5IHBlcm11dGluZyB0aGUgb2xkIHBpbGV1cFxuICAgIC8vIFVwZGF0ZSBhbGwgdGhlIGByb3dgIHByb3BlcnRpZXMgb2YgdGhlIHJlbGV2YW50IHZpc3VhbCBncm91cHNcblxuICAgIGNvbnN0IHBpbGV1cCA9IHRoaXMucGlsZXVwRm9yUmVmKGNvbnRpZyk7XG5cbiAgICAvLyBGaW5kIHRoZSBncm91cHMgZm9yIHdoaWNoIGFuIGFsaWdubWVudCBvdmVybGFwcyB0aGUgbG9jdXMuXG4gICAgdmFyIGdyb3VwcyA9IF8uZmlsdGVyKHRoaXMuZ3JvdXBzLFxuICAgICAgICAgIGdyb3VwID0+IF8uYW55KGdyb3VwLml0ZW1zLFxuICAgICAgICAgICAgICBhID0+IGEucmVhZC5nZXRJbnRlcnZhbCgpLmNvbnRhaW5zTG9jdXMoY29udGlnLCBwb3NpdGlvbikpKTtcblxuICAgIC8vIEZvciBlYWNoIHJvdywgZmluZCB0aGUgbGVmdC1tb3N0IHBvaW50IChmb3Igc29ydGluZykuXG4gICAgdmFyIHJvd3NPdmVybGFwcGluZyA9XG4gICAgICAgIF8ubWFwT2JqZWN0KF8uZ3JvdXBCeShncm91cHMsIGcgPT4gZy5yb3cpLFxuICAgICAgICAgICAgICAgICAgICBncyA9PiBfLm1pbihncywgZz0+Zy5zcGFuLnN0YXJ0KCkpLnNwYW4uc3RhcnQoKSk7XG5cbiAgICAvLyBTb3J0IGdyb3VwcyBieSB3aGV0aGVyIHRoZXkgb3ZlcmxhcCwgdGhlbiBieSB0aGVpciBzdGFydC5cbiAgICAvLyBUT0RPOiBpcyB0aGVyZSBhbiBlYXNpZXIgd2F5IHRvIGNvbnN0cnVjdCB0aGUgZm9yd2FyZCBtYXAgZGlyZWN0bHk/XG4gICAgdmFyIHBlcm11dGF0aW9uID0gXy5zb3J0QnkoXy5yYW5nZSgwLCBwaWxldXAubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPT4gcm93c092ZXJsYXBwaW5nW2lkeF0gfHwgSW5maW5pdHkpO1xuICAgIHZhciBvbGRUb05ldyA9IChbXTogbnVtYmVyW10pO1xuICAgIHBlcm11dGF0aW9uLmZvckVhY2goKG9sZEluZGV4LCBuZXdJbmRleCkgPT4geyBvbGRUb05ld1tvbGRJbmRleF0gPSBuZXdJbmRleDsgfSk7XG4gICAgdmFyIG5ld1BpbGV1cCA9IF8ucmFuZ2UoMCwgcGlsZXVwLmxlbmd0aCkubWFwKGkgPT4gcGlsZXVwW29sZFRvTmV3W2ldXSk7XG5cbiAgICB2YXIgbm9ybVJlZiA9IGNvbnRpZyBpbiB0aGlzLnJlZlRvUGlsZXVwID8gY29udGlnIDogdXRpbHMuYWx0Q29udGlnTmFtZShjb250aWcpO1xuICAgIHRoaXMucmVmVG9QaWxldXBbbm9ybVJlZl0gPSBuZXdQaWxldXA7XG5cbiAgICBfLmVhY2godGhpcy5ncm91cHMsIGcgPT4ge1xuICAgICAgaWYgKGcuc3Bhbi5jaHJPbkNvbnRpZyhjb250aWcpKSB7XG4gICAgICAgIGcucm93ID0gb2xkVG9OZXdbZy5yb3ddO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5zZXJ0U3RhdHMoKTogSW5zZXJ0U3RhdHMge1xuICAgIGlmICh0aGlzLl9pbnNlcnRTdGF0cykgcmV0dXJuIHRoaXMuX2luc2VydFN0YXRzO1xuICAgIHZhciBpbnNlcnRzID0gXy5tYXAodGhpcy5ncm91cHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBnID0+IGcuaXRlbXNbMF0ucmVhZC5nZXRJbmZlcnJlZEluc2VydFNpemUoKSlcbiAgICAgICAgICAgICAgICAgICAuZmlsdGVyKHggPT4geCA8IE1BWF9JTlNFUlRfU0laRSk7XG4gICAgY29uc3QgaW5zZXJ0U3RhdHMgPSBpbnNlcnRzLmxlbmd0aCA+PSBNSU5fUkVBRFNfRk9SX09VVExJRVJTID8ge1xuICAgICAgbWluT3V0bGllclNpemU6IHV0aWxzLmNvbXB1dGVQZXJjZW50aWxlKGluc2VydHMsIE1JTl9PVVRMSUVSX1BFUkNFTlRJTEUpLFxuICAgICAgbWF4T3V0bGllclNpemU6IHV0aWxzLmNvbXB1dGVQZXJjZW50aWxlKGluc2VydHMsIE1BWF9PVVRMSUVSX1BFUkNFTlRJTEUpXG4gICAgfSA6IHtcbiAgICAgIG1pbk91dGxpZXJTaXplOiAwLFxuICAgICAgbWF4T3V0bGllclNpemU6IEluZmluaXR5XG4gICAgfTtcblxuICAgIHRoaXMuX2luc2VydFN0YXRzID0gaW5zZXJ0U3RhdHM7XG4gICAgcmV0dXJuIGluc2VydFN0YXRzO1xuICB9XG59XG5cbi8vIEhlbHBlciBtZXRob2QgZm9yIGFkZFJlYWQuXG4vLyBHaXZlbiAxLTIgaW50ZXJ2YWxzLCBjb21wdXRlIHRoZWlyIHNwYW4gYW5kIGluc2VydCAoaW50ZXJ2YWwgYmV0d2VlbiB0aGVtKS5cbi8vIEZvciBvbmUgaW50ZXJ2YWwsIHRoZXNlIGFyZSBib3RoIHRyaXZpYWwuXG4vLyBUT0RPOiB3aGF0IHRoaXMgY2FsbHMgYW4gXCJpbnNlcnRcIiBpcyBub3Qgd2hhdCBtb3N0IHBlb3BsZSBtZWFuIGJ5IHRoYXQuXG5mdW5jdGlvbiBzcGFuQW5kSW5zZXJ0KGludGVydmFsczogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPltdKSB7XG4gIGlmIChpbnRlcnZhbHMubGVuZ3RoID09IDEpIHtcbiAgICByZXR1cm4ge2luc2VydDogbnVsbCwgc3BhbjogaW50ZXJ2YWxzWzBdfTtcbiAgfSBlbHNlIGlmIChpbnRlcnZhbHMubGVuZ3RoICE9Mikge1xuICAgIHRocm93IGBDYWxsZWQgc3BhbkFuZEluc2VydCB3aXRoICR7aW50ZXJ2YWxzLmxlbmd0aH0gXFxub3RpbiBbMSwgMl1gO1xuICB9XG5cbiAgaWYgKCFpbnRlcnZhbHNbMF0uY2hyT25Db250aWcoaW50ZXJ2YWxzWzFdLmNvbnRpZykpIHtcbiAgICByZXR1cm4gc3BhbkFuZEluc2VydChbaW50ZXJ2YWxzWzBdXSk7XG4gIH1cbiAgdmFyIGl2MSA9IGludGVydmFsc1swXS5pbnRlcnZhbCxcbiAgICAgIGl2MiA9IGludGVydmFsc1sxXS5pbnRlcnZhbCxcbiAgICAgIGluc2VydCA9IGl2MS5zdGFydCA8IGl2Mi5zdGFydCA/XG4gICAgICAgICAgbmV3IEludGVydmFsKGl2MS5zdG9wLCBpdjIuc3RhcnQpIDpcbiAgICAgICAgICBuZXcgSW50ZXJ2YWwoaXYyLnN0b3AsIGl2MS5zdGFydCk7XG5cbiAgdmFyIHNwYW4gPSBJbnRlcnZhbC5ib3VuZGluZ0ludGVydmFsKFtpdjEsIGl2Ml0pO1xuICByZXR1cm4ge1xuICAgIGluc2VydCxcbiAgICBzcGFuOiBuZXcgQ29udGlnSW50ZXJ2YWwoaW50ZXJ2YWxzWzBdLmNvbnRpZywgc3Bhbi5zdGFydCwgc3Bhbi5zdG9wKVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFBpbGV1cENhY2hlO1xuIiwiLyoqXG4gKiBQaWxldXAgdmlzdWFsaXphdGlvbiBvZiBCQU0gc291cmNlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0RhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvRGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7QWxpZ25tZW50fSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge0Jhc2VQYWlyfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB0eXBlIHtWaXN1YWxBbGlnbm1lbnQsIEluc2VydFN0YXRzfSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCB0eXBlIHtWaXN1YWxHcm91cH0gZnJvbSAnLi9BYnN0cmFjdENhY2hlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZSwgTmV0d29ya1N0YXR1c30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQge1JlYWN0fSBmcm9tICcuLi9TaGltRGVwZW5kZW5jaWVzJztcbmltcG9ydCBzaGFsbG93RXF1YWxzIGZyb20gJ3NoYWxsb3ctZXF1YWxzJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB7Q2lnYXJPcCwgeUZvclJvd30gZnJvbSAnLi9waWxldXB1dGlscyc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IERpc3BsYXlNb2RlIGZyb20gJy4vRGlzcGxheU1vZGUnO1xuaW1wb3J0IFBpbGV1cENhY2hlIGZyb20gJy4vUGlsZXVwQ2FjaGUnO1xuaW1wb3J0IFRpbGVkQ2FudmFzIGZyb20gJy4vVGlsZWRDYW52YXMnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxudmFyIFJFQURfU1RSQU5EX0FSUk9XX1dJRFRIID0gNTtcblxuLy8gUGhhbnRvbUpTIGRvZXMgbm90IHN1cHBvcnQgc2V0TGluZURhc2guXG4vLyBOb2RlIGRvZXNuJ3QgZXZlbiBrbm93IGFib3V0IHRoZSBzeW1ib2wuXG52YXIgU1VQUE9SVFNfREFTSEVTID0gdHlwZW9mKENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICAgICAgICAgICAgISFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQucHJvdG90eXBlLnNldExpbmVEYXNoO1xuXG5jbGFzcyBQaWxldXBUaWxlZENhbnZhcyBleHRlbmRzIFRpbGVkQ2FudmFzIHtcbiAgY2FjaGU6IFBpbGV1cENhY2hlO1xuICBvcHRpb25zOiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IoY2FjaGU6IFBpbGV1cENhY2hlLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgdXBkYXRlKG5ld09wdGlvbnM6IE9iamVjdCkge1xuICAgIHRoaXMub3B0aW9ucyA9IG5ld09wdGlvbnM7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLnBpbGV1cEhlaWdodEZvclJlZihyZWYpICpcbiAgICAgICAgICAgICAgICAgICAgKHN0eWxlLlJFQURfSEVJR0hUICsgc3R5bGUuUkVBRF9TUEFDSU5HKTtcbiAgfVxuXG4gIHJlbmRlcihjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICBzY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9XG4gICAgICAgIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCkgLSAxLCByYW5nZS5zdG9wKCkgKyAxKTtcbiAgICB2YXIgdkdyb3VwcyA9IHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmVsYXhlZFJhbmdlKTtcbiAgICB2YXIgaW5zZXJ0U3RhdHMgPSB0aGlzLm9wdGlvbnMuY29sb3JCeUluc2VydCA/IHRoaXMuY2FjaGUuZ2V0SW5zZXJ0U3RhdHMoKSA6IG51bGw7XG4gICAgcmVuZGVyUGlsZXVwKGN0eCwgc2NhbGUsIHJlbGF4ZWRSYW5nZSwgaW5zZXJ0U3RhdHMsIHRoaXMub3B0aW9ucy5jb2xvckJ5U3RyYW5kLCB2R3JvdXBzKTtcbiAgfVxufVxuXG5cbi8vIFNob3VsZCB0aGUgQ2lnYXIgb3AgYmUgcmVuZGVyZWQgdG8gdGhlIHNjcmVlbj9cbmZ1bmN0aW9uIGlzUmVuZGVyZWQob3ApIHtcbiAgcmV0dXJuIChvcC5vcCA9PSBDaWdhck9wLk1BVENIIHx8XG4gICAgICAgICAgb3Aub3AgPT0gQ2lnYXJPcC5ERUxFVEUgfHxcbiAgICAgICAgICBvcC5vcCA9PSBDaWdhck9wLklOU0VSVCk7XG59XG5cbi8vIFJlbmRlciBhIHBvcnRpb24gb2YgdGhlIHBpbGV1cCBpbnRvIHRoZSBjYW52YXMuXG5mdW5jdGlvbiByZW5kZXJQaWxldXAoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRTdGF0czogP0luc2VydFN0YXRzLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQnlTdHJhbmQ6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgdkdyb3VwczogVmlzdWFsR3JvdXA8VmlzdWFsQWxpZ25tZW50PltdKSB7XG4gIC8vIFNob3VsZCBtaXNtYXRjaGVkIGJhc2UgcGFpcnMgYmUgc2hvd24gYXMgYmxvY2tzIG9mIGNvbG9yIG9yIGFzIGxldHRlcnM/XG4gIHZhciBweFBlckxldHRlciA9IHNjYWxlKDEpIC0gc2NhbGUoMCksXG4gICAgICBtb2RlID0gRGlzcGxheU1vZGUuZ2V0RGlzcGxheU1vZGUocHhQZXJMZXR0ZXIpLFxuICAgICAgc2hvd1RleHQgPSBEaXNwbGF5TW9kZS5pc1RleHQobW9kZSk7XG5cbiAgZnVuY3Rpb24gZHJhd0Fycm93KHBvczogbnVtYmVyLCByZWZMZW5ndGg6IG51bWJlciwgdG9wOiBudW1iZXIsIGRpcmVjdGlvbjogJ0wnIHwgJ1InKSB7XG4gICAgdmFyIGxlZnQgPSBzY2FsZShwb3MgKyAxKSxcbiAgICAgICAgcmlnaHQgPSBzY2FsZShwb3MgKyByZWZMZW5ndGggKyAxKSxcbiAgICAgICAgYm90dG9tID0gdG9wICsgc3R5bGUuUkVBRF9IRUlHSFQsXG4gICAgICAgIC8vIEFycm93aGVhZHMgYmVjb21lIGEgZGlzdHJhY3Rpb24gYXMgeW91IHpvb20gb3V0IGFuZCB0aGUgcmVhZHMgZ2V0XG4gICAgICAgIC8vIHNob3J0ZXIuIFRoZXkgc2hvdWxkIG5ldmVyIGJlIG1vcmUgdGhhbiAxLzYgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICBhcnJvd1NpemUgPSBNYXRoLm1pbihSRUFEX1NUUkFORF9BUlJPV19XSURUSCwgKHJpZ2h0IC0gbGVmdCkgLyA2KTtcblxuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBpZiAoZGlyZWN0aW9uID09ICdSJykge1xuICAgICAgY3R4Lm1vdmVUbyhsZWZ0LCB0b3ApO1xuICAgICAgY3R4LmxpbmVUbyhyaWdodCAtIGFycm93U2l6ZSwgdG9wKTtcbiAgICAgIGN0eC5saW5lVG8ocmlnaHQsICh0b3AgKyBib3R0b20pIC8gMik7XG4gICAgICBjdHgubGluZVRvKHJpZ2h0IC0gYXJyb3dTaXplLCBib3R0b20pO1xuICAgICAgY3R4LmxpbmVUbyhsZWZ0LCBib3R0b20pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHgubW92ZVRvKHJpZ2h0LCB0b3ApO1xuICAgICAgY3R4LmxpbmVUbyhsZWZ0ICsgYXJyb3dTaXplLCB0b3ApO1xuICAgICAgY3R4LmxpbmVUbyhsZWZ0LCAodG9wICsgYm90dG9tKSAvIDIpO1xuICAgICAgY3R4LmxpbmVUbyhsZWZ0ICsgYXJyb3dTaXplLCBib3R0b20pO1xuICAgICAgY3R4LmxpbmVUbyhyaWdodCwgYm90dG9tKTtcbiAgICB9XG4gICAgY3R4LmZpbGwoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYXdTZWdtZW50KG9wLCB5LCB2UmVhZCkge1xuICAgIHN3aXRjaCAob3Aub3ApIHtcbiAgICAgIGNhc2UgQ2lnYXJPcC5NQVRDSDpcbiAgICAgICAgaWYgKG9wLmFycm93KSB7XG4gICAgICAgICAgZHJhd0Fycm93KG9wLnBvcywgb3AubGVuZ3RoLCB5LCBvcC5hcnJvdyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHggPSBzY2FsZShvcC5wb3MgKyAxKTtcbiAgICAgICAgICBjdHguZmlsbFJlY3QoeCwgeSwgc2NhbGUob3AucG9zICsgb3AubGVuZ3RoICsgMSkgLSB4LCBzdHlsZS5SRUFEX0hFSUdIVCk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgQ2lnYXJPcC5ERUxFVEU6XG4gICAgICAgIHZhciB4MSA9IHNjYWxlKG9wLnBvcyArIDEpLFxuICAgICAgICAgICAgeDIgPSBzY2FsZShvcC5wb3MgKyAxICsgb3AubGVuZ3RoKSxcbiAgICAgICAgICAgIHlwID0geSArIHN0eWxlLlJFQURfSEVJR0hUIC8gMiAtIDAuNTtcbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkRFTEVURV9DT0xPUjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHgxLCB5cCwgeDIgLSB4MSwgMSk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENpZ2FyT3AuSU5TRVJUOlxuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuSU5TRVJUX0NPTE9SO1xuICAgICAgICB2YXIgeDAgPSBzY2FsZShvcC5wb3MgKyAxKSAtIDIsICAvLyB0byBjb3ZlciBhIGJpdCBvZiB0aGUgcHJldmlvdXMgc2VnbWVudFxuICAgICAgICAgICAgeTEgPSB5IC0gMSxcbiAgICAgICAgICAgIHkyID0geSArIHN0eWxlLlJFQURfSEVJR0hUICsgMjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHgwLCB5MSwgMSwgeTIgLSB5MSk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYXdBbGlnbm1lbnQodlJlYWQ6IFZpc3VhbEFsaWdubWVudCwgeTogbnVtYmVyKSB7XG4gICAgY3R4LnB1c2hPYmplY3QodlJlYWQpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgaWYgKGNvbG9yQnlTdHJhbmQpIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSB2UmVhZC5zdHJhbmQgPT0gJysnID9cbiAgICAgICAgICBzdHlsZS5BTElHTk1FTlRfUExVU19TVFJBTkRfQ09MT1IgOlxuICAgICAgICAgIHN0eWxlLkFMSUdOTUVOVF9NSU5VU19TVFJBTkRfQ09MT1I7XG4gICAgfVxuICAgIHZSZWFkLm9wcy5mb3JFYWNoKG9wID0+IHtcbiAgICAgIGlmIChpc1JlbmRlcmVkKG9wKSkge1xuICAgICAgICBkcmF3U2VnbWVudChvcCwgeSwgdlJlYWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHZSZWFkLm1pc21hdGNoZXMuZm9yRWFjaChicCA9PiByZW5kZXJNaXNtYXRjaChicCwgeSkpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgY3R4LnBvcE9iamVjdCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gZHJhd0dyb3VwKHZHcm91cDogVmlzdWFsR3JvdXA8VmlzdWFsQWxpZ25tZW50Pikge1xuICAgIGN0eC5zYXZlKCk7XG4gICAgaWYgKGluc2VydFN0YXRzICYmIHZHcm91cC5pbnNlcnQpIHtcbiAgICAgIHZhciBsZW4gPSB2R3JvdXAuc3Bhbi5sZW5ndGgoKTtcbiAgICAgIGlmIChsZW4gPCBpbnNlcnRTdGF0cy5taW5PdXRsaWVyU2l6ZSkge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ2JsdWUnO1xuICAgICAgfSBlbHNlIGlmIChsZW4gPiBpbnNlcnRTdGF0cy5tYXhPdXRsaWVyU2l6ZSkge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gJ3JlZCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQUxJR05NRU5UX0NPTE9SO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQUxJR05NRU5UX0NPTE9SO1xuICAgIH1cbiAgICB2YXIgeSA9IHlGb3JSb3codkdyb3VwLnJvdyk7XG4gICAgY3R4LnB1c2hPYmplY3Qodkdyb3VwKTtcbiAgICBpZiAodkdyb3VwLmluc2VydCkge1xuICAgICAgdmFyIHNwYW4gPSB2R3JvdXAuaW5zZXJ0LFxuICAgICAgICAgIHgxID0gc2NhbGUoc3Bhbi5zdGFydCArIDEpLFxuICAgICAgICAgIHgyID0gc2NhbGUoc3Bhbi5zdG9wICsgMSk7XG4gICAgICBjdHguZmlsbFJlY3QoeDEsIHkgKyBzdHlsZS5SRUFEX0hFSUdIVCAvIDIgLSAwLjUsIHgyIC0geDEsIDEpO1xuICAgIH1cbiAgICB2R3JvdXAuaXRlbXMuZm9yRWFjaCh2UmVhZCA9PiBkcmF3QWxpZ25tZW50KHZSZWFkLCB5KSk7XG4gICAgY3R4LnBvcE9iamVjdCgpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBmdW5jdGlvbiByZW5kZXJNaXNtYXRjaChicDogQmFzZVBhaXIsIHk6IG51bWJlcikge1xuICAgIC8vIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgbWlzbWF0Y2ggaXMgaW4gYSBkaWZmZXJlbnQgdGlsZSwgZm9yIGV4YW1wbGUuXG4gICAgaWYgKCFyYW5nZS5pbnRlcnZhbC5jb250YWlucyhicC5wb3MpKSByZXR1cm47XG5cbiAgICBjdHgucHVzaE9iamVjdChicCk7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQkFTRV9DT0xPUlNbYnAuYmFzZVBhaXJdO1xuICAgIGN0eC5nbG9iYWxBbHBoYSA9IG9wYWNpdHlGb3JRdWFsaXR5KGJwLnF1YWxpdHkpO1xuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICBpZiAoc2hvd1RleHQpIHtcbiAgICAgIC8vIDAuNSA9IGNlbnRlcmVkXG4gICAgICBjdHguZmlsbFRleHQoYnAuYmFzZVBhaXIsIHNjYWxlKDEgKyAwLjUgKyBicC5wb3MpLCB5ICsgc3R5bGUuUkVBRF9IRUlHSFQgLSAyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBicC5wb3MpLCB5LCAgcHhQZXJMZXR0ZXIgLSAxLCBzdHlsZS5SRUFEX0hFSUdIVCk7XG4gICAgfVxuICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgY3R4LnBvcE9iamVjdCgpO1xuICB9XG5cbiAgY3R4LmZvbnQgPSBzdHlsZS5URVhUX1NUWUxFKERpc3BsYXlNb2RlLlRJR0hULCBzdHlsZS5SRUFEX0hFSUdIVCAtIDEpO1xuICB2R3JvdXBzLmZvckVhY2godkdyb3VwID0+IGRyYXdHcm91cCh2R3JvdXApKTtcbn1cblxuLy8gVGhpcyBpcyBhZGFwdGVkIGZyb20gSUdWLlxudmFyIE1JTl9RID0gNSwgIC8vIHRoZXNlIGFyZSBQaHJlZC1zY2FsZWQgc2NvcmVzXG4gICAgTUFYX1EgPSAyMCxcbiAgICBRX1NDQUxFID0gc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAgICAuZG9tYWluKFtNSU5fUSwgTUFYX1FdKVxuICAgICAgICAgICAgICAgICAgIC5yYW5nZShbMC4xLCAwLjldKVxuICAgICAgICAgICAgICAgICAgIC5jbGFtcCh0cnVlKTsgIC8vIGNsYW1wIG91dHB1dCB0byBbMC4xLCAwLjldXG5mdW5jdGlvbiBvcGFjaXR5Rm9yUXVhbGl0eShxdWFsaXR5OiBudW1iZXIpOiBudW1iZXIge1xuICB2YXIgYWxwaGEgPSBRX1NDQUxFKHF1YWxpdHkpO1xuXG4gIC8vIFJvdW5kIGFscGhhIHRvIG5lYXJlc3QgMC4xXG4gIGFscGhhID0gTWF0aC5yb3VuZChhbHBoYSAqIDEwICsgMC41KSAvIDEwLjA7XG4gIHJldHVybiBNYXRoLm1pbigxLjAsIGFscGhhKTtcbn1cblxuY2xhc3MgUGlsZXVwVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8RGF0YVNvdXJjZTxBbGlnbm1lbnQ+PiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPERhdGFTb3VyY2U8QWxpZ25tZW50Pj47XG4gIHN0YXRlOiBTdGF0ZTtcbiAgY2FjaGU6IFBpbGV1cENhY2hlO1xuICB0aWxlczogUGlsZXVwVGlsZWRDYW52YXM7XG4gIHN0YXRpYyBkZWZhdWx0T3B0aW9uczogeyB2aWV3QXNQYWlyczogYm9vbGVhbiB9O1xuICBzdGF0aWMgZ2V0T3B0aW9uc01lbnU6IChvcHRpb25zOiBPYmplY3QpID0+IGFueTtcbiAgc3RhdGljIGhhbmRsZVNlbGVjdE9wdGlvbjogKGtleTogc3RyaW5nLCBvbGRPcHRpb25zOiBPYmplY3QpID0+IE9iamVjdDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8RGF0YVNvdXJjZTxBbGlnbm1lbnQ+Pikge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgbmV0d29ya1N0YXR1czogbnVsbFxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUaGVzZSBzdHlsZXMgYWxsb3cgdmVydGljYWwgc2Nyb2xsaW5nIHRvIHNlZSB0aGUgZnVsbCBwaWxldXAuXG4gICAgLy8gQWRkaW5nIGEgdmVydGljYWwgc2Nyb2xsYmFyIHNocmlua3MgdGhlIHZpc2libGUgYXJlYSwgYnV0IHdlIGhhdmUgdG8gYWN0XG4gICAgLy8gYXMgdGhvdWdoIGl0IGRvZXNuJ3QsIHNpbmNlIGFkanVzdGluZyB0aGUgc2NhbGUgd291bGQgcHV0IGl0IG91dCBvZiBzeW5jXG4gICAgLy8gd2l0aCBvdGhlciB0cmFja3MuXG4gICAgdmFyIGNvbnRhaW5lclN0eWxlcyA9IHtcbiAgICAgICdoZWlnaHQnOiAnMTAwJSdcbiAgICB9O1xuXG4gICAgdmFyIHN0YXR1c0VsID0gbnVsbCxcbiAgICAgICAgbmV0d29ya1N0YXR1cyA9IHRoaXMuc3RhdGUubmV0d29ya1N0YXR1cztcbiAgICBpZiAobmV0d29ya1N0YXR1cykge1xuICAgICAgdmFyIG1lc3NhZ2UgPSB0aGlzLmZvcm1hdFN0YXR1cyhuZXR3b3JrU3RhdHVzKTtcbiAgICAgIHN0YXR1c0VsID0gKFxuICAgICAgICA8ZGl2IHJlZj0nc3RhdHVzJyBjbGFzc05hbWU9J25ldHdvcmstc3RhdHVzJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtbWVzc2FnZSc+XG4gICAgICAgICAgICBMb2FkaW5nIGFsaWdubWVudHPigKYgKHttZXNzYWdlfSlcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2PlxuICAgICAgICB7c3RhdHVzRWx9XG4gICAgICAgIDxkaXYgcmVmPSdjb250YWluZXInIHN0eWxlPXtjb250YWluZXJTdHlsZXN9PlxuICAgICAgICAgIDxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG5cbiAgZm9ybWF0U3RhdHVzKHN0YXR1czogTmV0d29ya1N0YXR1cyk6IHN0cmluZyB7XG4gICAgaWYgKHN0YXR1cy5udW1SZXF1ZXN0cykge1xuICAgICAgdmFyIHBsdXJhbFMgPSBzdGF0dXMubnVtUmVxdWVzdHMgPiAxID8gJ3MnIDogJyc7XG4gICAgICByZXR1cm4gYGlzc3VlZCAke3N0YXR1cy5udW1SZXF1ZXN0c30gcmVxdWVzdCR7cGx1cmFsU31gO1xuICAgIH0gZWxzZSBpZiAoc3RhdHVzLnN0YXR1cykge1xuICAgICAgcmV0dXJuIHN0YXR1cy5zdGF0dXM7XG4gICAgfVxuICAgIHRocm93ICdpbnZhbGlkJztcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMuY2FjaGUgPSBuZXcgUGlsZXVwQ2FjaGUodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UsIHRoaXMucHJvcHMub3B0aW9ucy52aWV3QXNQYWlycyk7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBQaWxldXBUaWxlZENhbnZhcyh0aGlzLmNhY2hlLCB0aGlzLnByb3BzLm9wdGlvbnMpO1xuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVJlYWRzKHJhbmdlKTtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy5jYWNoZS51cGRhdGVNaXNtYXRjaGVzKHJhbmdlKTtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrcHJvZ3Jlc3MnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IGV9KTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya2RvbmUnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IG51bGx9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgdmFyIHNob3VsZFVwZGF0ZSA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMgIT0gcHJldlByb3BzLm9wdGlvbnMpIHtcbiAgICAgIHRoaXMuaGFuZGxlT3B0aW9uc0NoYW5nZShwcmV2UHJvcHMub3B0aW9ucyk7XG4gICAgICBzaG91bGRVcGRhdGUgPSB0cnVlO1xuICAgIH1cblxuICAgIGlmICghc2hhbGxvd0VxdWFscyh0aGlzLnByb3BzLCBwcmV2UHJvcHMpIHx8XG4gICAgICAgICFzaGFsbG93RXF1YWxzKHRoaXMuc3RhdGUsIHByZXZTdGF0ZSkgfHxcbiAgICAgICAgc2hvdWxkVXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVPcHRpb25zQ2hhbmdlKG9sZE9wdHM6IE9iamVjdCkge1xuICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuXG4gICAgaWYgKG9sZE9wdHMudmlld0FzUGFpcnMgIT0gdGhpcy5wcm9wcy5vcHRpb25zLnZpZXdBc1BhaXJzKSB7XG4gICAgICB0aGlzLmNhY2hlID0gbmV3IFBpbGV1cENhY2hlKHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLCB0aGlzLnByb3BzLm9wdGlvbnMudmlld0FzUGFpcnMpO1xuICAgICAgdGhpcy50aWxlcyA9IG5ldyBQaWxldXBUaWxlZENhbnZhcyh0aGlzLmNhY2hlLCB0aGlzLnByb3BzLm9wdGlvbnMpO1xuICAgICAgdGhpcy51cGRhdGVSZWFkcyhDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSkpO1xuICAgIH0gZWxzZSBpZiAob2xkT3B0cy5jb2xvckJ5SW5zZXJ0ICE9IHRoaXMucHJvcHMub3B0aW9ucy5jb2xvckJ5SW5zZXJ0KSB7XG4gICAgICB0aGlzLnRpbGVzLnVwZGF0ZSh0aGlzLnByb3BzLm9wdGlvbnMpO1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKG9sZE9wdHMuaGlkZUFsaWdubWVudHMgIT0gdGhpcy5wcm9wcy5vcHRpb25zLmhpZGVBbGlnbm1lbnRzKSB7XG4gICAgICB0aGlzLnRpbGVzLnVwZGF0ZSh0aGlzLnByb3BzLm9wdGlvbnMpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKG9sZE9wdHMuc29ydCAhPSB0aGlzLnByb3BzLm9wdGlvbnMuc29ydCkge1xuICAgICAgdGhpcy5oYW5kbGVTb3J0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gTG9hZCBuZXcgcmVhZHMgaW50byB0aGUgdmlzdWFsaXphdGlvbiBjYWNoZS5cbiAgdXBkYXRlUmVhZHMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB2YXIgYW55QmVmb3JlID0gdGhpcy5jYWNoZS5hbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKVxuICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2gocmVhZCA9PiB0aGlzLmNhY2hlLmFkZEFsaWdubWVudChyZWFkKSk7XG5cbiAgICBpZiAoIWFueUJlZm9yZSAmJiB0aGlzLmNhY2hlLmFueUdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKSkge1xuICAgICAgLy8gSWYgdGhlc2UgYXJlIHRoZSBmaXJzdCByZWFkcyB0byBiZSBzaG93biBpbiB0aGUgdmlzaWJsZSByYW5nZSxcbiAgICAgIC8vIHRoZW4gc29ydCB0aGVtIHRvIGhpZ2hsaWdodCByZWFkcyBpbiB0aGUgY2VudGVyLlxuICAgICAgdGhpcy5oYW5kbGVTb3J0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVXBkYXRlIHRoZSB2aXN1YWxpemF0aW9uIHRvIHJlZmxlY3QgdGhlIGNhY2hlZCByZWFkcyAmXG4gIC8vIGN1cnJlbnRseS12aXNpYmxlIHJhbmdlLlxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSB0aGlzLnJlZnMuY2FudmFzLFxuICAgICAgICB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGg7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm47XG5cbiAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpO1xuICAgIHZhciBkdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGN0eCk7XG5cbiAgICB0aGlzLnJlbmRlclNjZW5lKGR0eCk7XG5cbiAgfVxuXG4gIHJlbmRlclNjZW5lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIHZhciBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQsIGdlbm9tZVJhbmdlLnN0b3ApLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgY2FudmFzID0gdGhpcy5yZWZzLmNhbnZhcyxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICAvLyBnZXQgcGFyZW50IG9mIGNhbnZhc1xuICAgIC8vIFRoZSB0eXBlY2FzdHMgdGhyb3VnaCBgYW55YCBhcmUgdG8gZm9vbCBmbG93LlxuICAgIHZhciBwYXJlbnQgPSAoKGQzdXRpbHMuZmluZFBhcmVudChjYW52YXMsIFwicGlsZXVwXCIpIDogYW55KSA6IEhUTUxDYW52YXNFbGVtZW50KTtcblxuICAgIGlmICh0aGlzLnByb3BzLm9wdGlvbnMuaGlkZUFsaWdubWVudHMpIHtcbiAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCA2MCk7XG4gICAgICAvLyBpZiBhbGlnbm1lbnRzIGFyZSBoaWRkZW4sIHNldCBwYXJlbnQgZGl2IHRvIDYwcHggdG8gbGVhdmUgcm9vbSBmb3IgZ2VhclxuICAgICAgaWYgKHBhcmVudCkgcGFyZW50LnN0eWxlLm1pbkhlaWdodCA9IFwiNjBweFwiO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHVuc2V0IG1pbmltdW0gaGlnaHQgZm9yIHZpZXdpbmcgYWxpZ25tZW50c1xuICAgIGlmIChwYXJlbnQpIHBhcmVudC5zdHlsZS5taW5IZWlnaHQgPSBcIlwiO1xuXG4gICAgLy8gSGVpZ2h0IGNhbiBvbmx5IGJlIGNvbXB1dGVkIGFmdGVyIHRoZSBwaWxldXAgaGFzIGJlZW4gdXBkYXRlZC5cbiAgICB2YXIgaGVpZ2h0ID0geUZvclJvdyh0aGlzLmNhY2hlLnBpbGV1cEhlaWdodEZvclJlZih0aGlzLnByb3BzLnJhbmdlLmNvbnRpZykpO1xuXG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB0aGlzLnRpbGVzLnJlbmRlclRvU2NyZWVuKGN0eCwgcmFuZ2UsIHNjYWxlKTtcblxuICAgIC8vIFRPRE86IHRoZSBjZW50ZXIgbGluZSBzaG91bGQgZ28gYWJvdmUgYWxpZ25tZW50cywgYnV0IGJlbG93IG1pc21hdGNoZXNcbiAgICB0aGlzLnJlbmRlckNlbnRlckxpbmUoY3R4LCByYW5nZSwgc2NhbGUpO1xuXG4gICAgLy8gVGhpcyBpcyBhIGhhY2sgdG8gbWl0aWdhdGUgIzM1MFxuICAgIHZhciBlbCA9IGQzdXRpbHMuZmluZFBhcmVudCh0aGlzLnJlZnMuY2FudmFzLCAndHJhY2stY29udGVudCcpO1xuICAgIGlmIChlbCkgZWwuc2Nyb2xsTGVmdCA9IDA7XG4gIH1cblxuICAvLyBEcmF3IHRoZSBjZW50ZXIgbGluZShzKSwgd2hpY2ggb3JpZW50IHRoZSB1c2VyXG4gIHJlbmRlckNlbnRlckxpbmUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyKSB7XG4gICAgdmFyIG1pZFBvaW50ID0gTWF0aC5mbG9vcigocmFuZ2Uuc3RvcCgpICsgcmFuZ2Uuc3RhcnQoKSkgLyAyKSxcbiAgICAgICAgcmlnaHRMaW5lWCA9IE1hdGguY2VpbChzY2FsZShtaWRQb2ludCArIDEpKSxcbiAgICAgICAgbGVmdExpbmVYID0gTWF0aC5mbG9vcihzY2FsZShtaWRQb2ludCkpLFxuICAgICAgICBoZWlnaHQgPSBjdHguY2FudmFzLmhlaWdodDtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgIGlmIChTVVBQT1JUU19EQVNIRVMpIHtcbiAgICAgIGN0eC5zZXRMaW5lRGFzaChbNSwgNV0pO1xuICAgIH1cbiAgICBpZiAocmlnaHRMaW5lWCAtIGxlZnRMaW5lWCA8IDMpIHtcbiAgICAgIC8vIElmIHRoZSBsaW5lcyBhcmUgdmVyeSBjbG9zZSwgdGhlbiBqdXN0IGRyYXcgYSBjZW50ZXIgbGluZS5cbiAgICAgIHZhciBtaWRYID0gTWF0aC5yb3VuZCgobGVmdExpbmVYICsgcmlnaHRMaW5lWCkgLyAyKTtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbWlkWCAtIDAuNSwgMCwgbWlkWCAtIDAuNSwgaGVpZ2h0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBsZWZ0TGluZVggLSAwLjUsIDAsIGxlZnRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgcmlnaHRMaW5lWCAtIDAuNSwgMCwgcmlnaHRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxuXG4gIGhhbmRsZVNvcnQoKSB7XG4gICAgdmFyIHtzdGFydCwgc3RvcH0gPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICBtaWRkbGUgPSAoc3RhcnQgKyBzdG9wKSAvIDI7XG4gICAgdGhpcy5jYWNoZS5zb3J0UmVhZHNBdCh0aGlzLnByb3BzLnJhbmdlLmNvbnRpZywgbWlkZGxlKTtcbiAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYLFxuICAgICAgICB5ID0gZXYub2Zmc2V0WTtcbiAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dCh0aGlzLnJlZnMuY2FudmFzKTtcbiAgICB2YXIgdHJhY2tpbmdDdHggPSBuZXcgZGF0YUNhbnZhcy5DbGlja1RyYWNraW5nQ29udGV4dChjdHgsIHgsIHkpO1xuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSxcbiAgICAgICAgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoZ2Vub21lUmFuZ2UuY29udGlnLCBnZW5vbWVSYW5nZS5zdGFydCwgZ2Vub21lUmFuZ2Uuc3RvcCksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICAvLyBJZiBjbGljay10cmFja2luZyBnZXRzIHNsb3csIHRoaXMgcmFuZ2UgY291bGQgYmUgbmFycm93ZWQgdG8gb25lXG4gICAgICAgIC8vIGNsb3NlciB0byB0aGUgY2xpY2sgY29vcmRpbmF0ZSwgcmF0aGVyIHRoYW4gdGhlIHdob2xlIHZpc2libGUgcmFuZ2UuXG4gICAgICAgIHZHcm91cHMgPSB0aGlzLmNhY2hlLmdldEdyb3Vwc092ZXJsYXBwaW5nKHJhbmdlKTtcblxuICAgIHJlbmRlclBpbGV1cCh0cmFja2luZ0N0eCwgc2NhbGUsIHJhbmdlLCBudWxsLCBmYWxzZSwgdkdyb3Vwcyk7XG4gICAgdmFyIHZSZWFkID0gXy5maW5kKHRyYWNraW5nQ3R4LmhpdHNbMF0sIGhpdCA9PiBoaXQucmVhZCk7XG4gICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgIGlmICh2UmVhZCkge1xuICAgICAgYWxlcnQodlJlYWQucmVhZC5kZWJ1Z1N0cmluZygpKTtcbiAgICB9XG4gIH1cbn1cblxuUGlsZXVwVHJhY2suZGlzcGxheU5hbWUgPSAncGlsZXVwJztcblBpbGV1cFRyYWNrLmRlZmF1bHRPcHRpb25zID0ge1xuICB2aWV3QXNQYWlyczogZmFsc2UsXG4gIGNvbG9yQnlJbnNlcnQ6IHRydWUsXG4gIGNvbG9yQnlTdHJhbmQ6IGZhbHNlLFxuICBoaWRlQWxpZ25tZW50czogZmFsc2Vcbn07XG5cblBpbGV1cFRyYWNrLmdldE9wdGlvbnNNZW51ID0gZnVuY3Rpb24ob3B0aW9uczogT2JqZWN0KTogYW55IHtcbiAgcmV0dXJuIFtcbiAgICB7a2V5OiAndmlldy1wYWlycycsIGxhYmVsOiAnVmlldyBhcyBwYWlycycsIGNoZWNrZWQ6IG9wdGlvbnMudmlld0FzUGFpcnN9LFxuICAgICctJyxcbiAgICB7a2V5OiAnY29sb3ItaW5zZXJ0JywgbGFiZWw6ICdDb2xvciBieSBpbnNlcnQgc2l6ZScsIGNoZWNrZWQ6IG9wdGlvbnMuY29sb3JCeUluc2VydH0sXG4gICAge2tleTogJ2NvbG9yLXN0cmFuZCcsIGxhYmVsOiAnQ29sb3IgYnkgc3RyYW5kJywgY2hlY2tlZDogb3B0aW9ucy5jb2xvckJ5U3RyYW5kfSxcbiAgICB7a2V5OiAnaGlkZS1hbGlnbm1lbnRzJywgbGFiZWw6ICdIaWRlIGFsaWdubWVudHMnLCBjaGVja2VkOiBvcHRpb25zLmhpZGVBbGlnbm1lbnRzfSxcbiAgICAnLScsXG4gICAge2tleTogJ3NvcnQnLCBsYWJlbDogJ1NvcnQgYWxpZ25tZW50cyd9XG4gIF07XG59O1xuXG52YXIgbWVzc2FnZUlkID0gMTtcblxuUGlsZXVwVHJhY2suaGFuZGxlU2VsZWN0T3B0aW9uID0gZnVuY3Rpb24oa2V5OiBzdHJpbmcsIG9sZE9wdGlvbnM6IE9iamVjdCk6IE9iamVjdCB7XG4gIHZhciBvcHRzID0gXy5jbG9uZShvbGRPcHRpb25zKTtcbiAgaWYgKGtleSA9PSAndmlldy1wYWlycycpIHtcbiAgICBvcHRzLnZpZXdBc1BhaXJzID0gIW9wdHMudmlld0FzUGFpcnM7XG4gICAgcmV0dXJuIG9wdHM7XG4gIH0gZWxzZSBpZiAoa2V5ID09ICdjb2xvci1pbnNlcnQnKSB7XG4gICAgb3B0cy5jb2xvckJ5SW5zZXJ0ID0gIW9wdHMuY29sb3JCeUluc2VydDtcbiAgICBpZiAob3B0cy5jb2xvckJ5SW5zZXJ0KSBvcHRzLmNvbG9yQnlTdHJhbmQgPSBmYWxzZTtcbiAgICByZXR1cm4gb3B0cztcbiAgfSBlbHNlIGlmIChrZXkgPT0gJ2NvbG9yLXN0cmFuZCcpIHtcbiAgICBvcHRzLmNvbG9yQnlTdHJhbmQgPSAhb3B0cy5jb2xvckJ5U3RyYW5kO1xuICAgIGlmIChvcHRzLmNvbG9yQnlTdHJhbmQpIG9wdHMuY29sb3JCeUluc2VydCA9IGZhbHNlO1xuICAgIHJldHVybiBvcHRzO1xuICB9IGVsc2UgaWYgKGtleSA9PSAnaGlkZS1hbGlnbm1lbnRzJykge1xuICAgIG9wdHMuaGlkZUFsaWdubWVudHMgPSAhb3B0cy5oaWRlQWxpZ25tZW50cztcbiAgICByZXR1cm4gb3B0cztcbiAgfSBlbHNlIGlmIChrZXkgPT0gJ3NvcnQnKSB7XG4gICAgb3B0cy5zb3J0ID0gKG1lc3NhZ2VJZCsrKTtcbiAgICByZXR1cm4gb3B0cztcbiAgfVxuICByZXR1cm4gb2xkT3B0aW9uczsgIC8vIG5vIGNoYW5nZVxufTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFBpbGV1cFRyYWNrO1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIHNob3dzIGEgc2NhbGUgcHJvcG9ydGlvbmFsIHRvIHNsaWNlIG9mIHRoZSBnZW5vbWUgYmVpbmdcbiAqIHNob3duIGJ5IHRoZSByZWZlcmVuY2UgdHJhY2suIFRoaXMgdHJhY2sgdHJpZXMgdG8gc2hvdyBhIHNjYWxlIGluIGticCxcbiAqIG1icCBvciBnYnAgZGVwZW5kaW5nIG9uIHRoZSBzaXplIG9mIHRoZSB2aWV3IGFuZCBhbHNvIHRyaWVzIHRvIHJvdW5kIHRoZVxuICogc2NhbGUgc2l6ZSAoZS5nLiBwcmVmZXJzIFwiMSwwMDAgYnBcIiwgXCIxLDAwMCBrYnBcIiBvdmVyIFwiMSBrYnBcIiBhbmQgXCIxIG1icFwiKVxuICpcbiAqICAgICAgICAgICA8LS0tLS0tLS0tLSAzMCBicCAtLS0tLS0tLS0tPlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgdHlwZSB7U3RhdGV9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7UmVhY3QsIFJlYWN0RE9NfSBmcm9tICcuLi9TaGltRGVwZW5kZW5jaWVzJztcbmltcG9ydCBFbXB0eVNvdXJjZSBmcm9tICcuLi9zb3VyY2VzL0VtcHR5U291cmNlJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcblxuY2xhc3MgU2NhbGVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudDxWaXpQcm9wczx2b2lkPiwgU3RhdGU+IHtcbiAgcHJvcHM6IFZpelByb3BzPHZvaWQ+O1xuICBzdGF0ZTogU3RhdGU7ICAvLyBubyBzdGF0ZSwgdXNlZCB0byBtYWtlIGZsb3cgaGFwcHlcbiAgc3RhdGljIGRlZmF1bHRTb3VyY2U6IE9iamVjdDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHM8dm9pZD4pIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHJldHVybiA8Y2FudmFzIHJlZj0nY2FudmFzJyAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0RE9NTm9kZSgpOiBhbnkge1xuICAgIHJldHVybiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IHRoaXMuZ2V0RE9NTm9kZSgpLFxuICAgICAgICB7cmFuZ2UsIHdpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcztcblxuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdmFyIHZpZXdTaXplID0gcmFuZ2Uuc3RvcCAtIHJhbmdlLnN0YXJ0ICsgMSxcbiAgICAgICAgbWlkWCA9IE1hdGgucm91bmQod2lkdGggLyAyKSxcbiAgICAgICAgbWlkWSA9IE1hdGgucm91bmQoaGVpZ2h0IC8gMik7XG5cbiAgICAvLyBNaWQgbGFiZWxcbiAgICB2YXIge3ByZWZpeCwgdW5pdH0gPSBkM3V0aWxzLmZvcm1hdFJhbmdlKHZpZXdTaXplKTtcbiAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuU0NBTEVfRk9OVF9DT0xPUjtcbiAgICBjdHguZm9udCA9IHN0eWxlLlNDQUxFX0ZPTlRfU1RZTEU7XG4gICAgY3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XG4gICAgY3R4LmZpbGxUZXh0KHByZWZpeCArIFwiIFwiICsgdW5pdCxcbiAgICAgICAgICAgICAgICAgbWlkWCxcbiAgICAgICAgICAgICAgICAgbWlkWSArIHN0eWxlLlNDQUxFX1RFWFRfWV9PRkZTRVQpO1xuXG4gICAgLy8gTGVmdCBsaW5lXG4gICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCAwLjUsIG1pZFkgLSAwLjUsIG1pZFggLSBzdHlsZS5TQ0FMRV9MSU5FX1BBRERJTkcgLSAwLjUsIG1pZFkgLSAwLjUpO1xuICAgIC8vIExlZnQgYXJyb3dcbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgY3R4Lm1vdmVUbygwLjUgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFLCBtaWRZIC0gc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbygwLjUsIG1pZFkgLSAwLjUpO1xuICAgIGN0eC5saW5lVG8oMC41ICsgc3R5bGUuU0NBTEVfQVJST1dfU0laRSwgbWlkWSArIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUgLSAwLjUpO1xuICAgIGN0eC5jbG9zZVBhdGgoKTtcbiAgICBjdHguZmlsbCgpO1xuICAgIGN0eC5zdHJva2UoKTtcblxuICAgIC8vIFJpZ2h0IGxpbmVcbiAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIG1pZFggKyBzdHlsZS5TQ0FMRV9MSU5FX1BBRERJTkcgLSAwLjUsIG1pZFkgLSAwLjUsIHdpZHRoIC0gMC41LCBtaWRZIC0gMC41KTtcbiAgICAvLyBSaWdodCBhcnJvd1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKHdpZHRoIC0gc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSwgbWlkWSAtIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUgLSAwLjUpO1xuICAgIGN0eC5saW5lVG8od2lkdGggLSAwLjUsIG1pZFkgLSAwLjUpO1xuICAgIGN0eC5saW5lVG8od2lkdGggLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41LCBtaWRZICsgc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgLy8gQ2xlYW4gdXAgYWZ0ZXJ3YXJkc1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbn1cblxuU2NhbGVUcmFjay5kaXNwbGF5TmFtZSA9ICdzY2FsZSc7XG5TY2FsZVRyYWNrLmRlZmF1bHRTb3VyY2UgPSBFbXB0eVNvdXJjZS5jcmVhdGUoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTY2FsZVRyYWNrO1xuIiwiLyoqXG4gKiBBIGNhbnZhcyB3aGljaCBtYWludGFpbnMgYSBjYWNoZSBvZiBwcmV2aW91c2x5LXJlbmRlcmVkIHRpbGVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuXG50eXBlIFRpbGUgPSB7XG4gIHBpeGVsc1BlckJhc2U6IG51bWJlcjtcbiAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIGJ1ZmZlcjogSFRNTENhbnZhc0VsZW1lbnQ7XG59O1xuXG5jb25zdCBFUFNJTE9OID0gMWUtNjtcbmNvbnN0IE1JTl9QWF9QRVJfQlVGRkVSID0gNTAwO1xuXG5jb25zdCBERUJVR19SRU5ERVJfVElMRV9FREdFUyA9IGZhbHNlO1xuXG5jbGFzcyBUaWxlZENhbnZhcyB7XG4gIHRpbGVDYWNoZTogVGlsZVtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudGlsZUNhY2hlID0gW107XG4gIH1cblxuICByZW5kZXJUaWxlKHRpbGU6IFRpbGUpIHtcbiAgICB2YXIgcmFuZ2UgPSB0aWxlLnJhbmdlLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodEZvclJlZihyYW5nZS5jb250aWcpLFxuICAgICAgICB3aWR0aCA9IE1hdGgucm91bmQodGlsZS5waXhlbHNQZXJCYXNlICogcmFuZ2UubGVuZ3RoKCkpO1xuICAgIC8vIFRPRE86IGRvZXMgaXQgbWFrZSBzZW5zZSB0byByZS11c2UgY2FudmFzZXM/XG4gICAgdGlsZS5idWZmZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBkM3V0aWxzLnNpemVDYW52YXModGlsZS5idWZmZXIsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgLy8gVGhlIGZhciByaWdodCBlZGdlIG9mIHRoZSB0aWxlIGlzIHRoZSBzdGFydCBvZiB0aGUgX25leHRfIHJhbmdlJ3MgYmFzZVxuICAgIC8vIHBhaXIsIG5vdCB0aGUgc3RhcnQgb2YgdGhlIGxhc3Qgb25lIGluIHRoaXMgdGlsZS5cbiAgICB2YXIgc2MgPSBzY2FsZS5saW5lYXIoKS5kb21haW4oW3JhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSArIDFdKS5yYW5nZShbMCwgd2lkdGhdKTtcbiAgICB2YXIgY3R4ID0gY2FudmFzVXRpbHMuZ2V0Q29udGV4dCh0aWxlLmJ1ZmZlcik7XG4gICAgdmFyIGR0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY3R4KTtcbiAgICB0aGlzLnJlbmRlcihkdHgsIHNjLCByYW5nZSk7XG4gIH1cblxuICAvLyBDcmVhdGUgKGFuZCByZW5kZXIpIG5ldyB0aWxlcyB0byBmaWxsIHRoZSBnYXBzLlxuICBtYWtlTmV3VGlsZXMoZXhpc3RpbmdUaWxlczogSW50ZXJ2YWxbXSxcbiAgICAgICAgICAgICAgIHBpeGVsc1BlckJhc2U6IG51bWJlcixcbiAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVGlsZVtdIHtcbiAgICB2YXIgbmV3SW50ZXJ2YWxzID0gVGlsZWRDYW52YXMuZ2V0TmV3VGlsZVJhbmdlcyhcbiAgICAgICAgICBleGlzdGluZ1RpbGVzLCByYW5nZS5pbnRlcnZhbCwgcGl4ZWxzUGVyQmFzZSk7XG5cbiAgICB2YXIgbmV3VGlsZXMgPSBuZXdJbnRlcnZhbHMubWFwKGl2ID0+ICh7XG4gICAgICBwaXhlbHNQZXJCYXNlLFxuICAgICAgcmFuZ2U6IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIGl2LnN0YXJ0LCBpdi5zdG9wKSxcbiAgICAgIGJ1ZmZlcjogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgICB9KSk7XG5cbiAgICAvLyBUT0RPOiBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gd3JhcCB0aGVzZSBjYWxscyBpbiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUsXG4gICAgLy8gc28gdGhhdCByZW5kZXJpbmcgaXMgZG9uZSBvZmYgdGhlIG1haW4gZXZlbnQgbG9vcC5cbiAgICBuZXdUaWxlcy5mb3JFYWNoKHRpbGUgPT4gdGhpcy5yZW5kZXJUaWxlKHRpbGUpKTtcbiAgICB0aGlzLnRpbGVDYWNoZSA9IHRoaXMudGlsZUNhY2hlLmNvbmNhdChuZXdUaWxlcyk7XG4gICAgdGhpcy50aWxlQ2FjaGUuc29ydCgoYSwgYikgPT4gQ29udGlnSW50ZXJ2YWwuY29tcGFyZShhLnJhbmdlLCBiLnJhbmdlKSk7XG4gICAgcmV0dXJuIG5ld1RpbGVzO1xuICB9XG5cbiAgcmVuZGVyVG9TY3JlZW4oY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIpIHtcbiAgICB2YXIgcGl4ZWxzUGVyQmFzZSA9IHNjYWxlKDEpIC0gc2NhbGUoMCk7XG4gICAgdmFyIHRpbGVzQXRSZXMgPSB0aGlzLnRpbGVDYWNoZS5maWx0ZXIodGlsZSA9PiBNYXRoLmFicyh0aWxlLnBpeGVsc1BlckJhc2UgLSBwaXhlbHNQZXJCYXNlKSA8IEVQU0lMT04gJiYgcmFuZ2UuY2hyT25Db250aWcodGlsZS5yYW5nZS5jb250aWcpKTtcbiAgICB2YXIgaGVpZ2h0ID0gdGhpcy5oZWlnaHRGb3JSZWYocmFuZ2UuY29udGlnKTtcblxuICAgIHZhciBleGlzdGluZ0ludGVydmFscyA9IHRpbGVzQXRSZXMubWFwKHRpbGUgPT4gdGlsZS5yYW5nZS5pbnRlcnZhbCk7XG4gICAgaWYgKCFyYW5nZS5pbnRlcnZhbC5pc0NvdmVyZWRCeShleGlzdGluZ0ludGVydmFscykpIHtcbiAgICAgIHRpbGVzQXRSZXMgPSB0aWxlc0F0UmVzLmNvbmNhdCh0aGlzLm1ha2VOZXdUaWxlcyhleGlzdGluZ0ludGVydmFscywgcGl4ZWxzUGVyQmFzZSwgcmFuZ2UpKTtcbiAgICB9XG5cbiAgICB2YXIgdGlsZXMgPSB0aWxlc0F0UmVzLmZpbHRlcih0aWxlID0+IHJhbmdlLmludGVyc2VjdHModGlsZS5yYW5nZSkpO1xuXG4gICAgdGlsZXMuZm9yRWFjaCh0aWxlID0+IHtcbiAgICAgIHZhciBsZWZ0ID0gTWF0aC5yb3VuZChzY2FsZSh0aWxlLnJhbmdlLnN0YXJ0KCkpKSxcbiAgICAgICAgICBuZXh0TGVmdCA9IE1hdGgucm91bmQoc2NhbGUodGlsZS5yYW5nZS5zdG9wKCkgKyAxKSksXG4gICAgICAgICAgd2lkdGggPSBuZXh0TGVmdCAtIGxlZnQ7XG4gICAgICAvLyBEcmF3aW5nIGEgMHB4IHRhbGwgY2FudmFzIHRocm93cyBpbiBGaXJlZm94LlxuICAgICAgaWYgKHRpbGUuYnVmZmVyLmhlaWdodCA9PT0gMCkgcmV0dXJuO1xuICAgICAgLy8gV2UgY2FuJ3QganVzdCB0aHJvdyB0aGUgaW1hZ2VzIG9uIHRoZSBzY3JlZW4gd2l0aG91dCBzY2FsaW5nIGR1ZSB0b1xuICAgICAgLy8gcm91bmRpbmcgaXNzdWVzLCB3aGljaCBjYW4gcmVzdWx0IGluIDFweCBnYXBzIG9yIG92ZXJkcmF3aW5nLlxuICAgICAgLy8gV2UgYWx3YXlzIGhhdmU6XG4gICAgICAvLyAgIHdpZHRoIC0gdGlsZS5idWZmZXIud2lkdGggXFxpbiB7LTEsIDAsICsxfVxuICAgICAgY3R4LmRyYXdJbWFnZSh0aWxlLmJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgMCwgMCwgdGlsZS5idWZmZXIud2lkdGgsIHRpbGUuYnVmZmVyLmhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdCwgMCwgd2lkdGgsIHRpbGUuYnVmZmVyLmhlaWdodCk7XG5cbiAgICAgIGlmIChERUJVR19SRU5ERVJfVElMRV9FREdFUykge1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnYmxhY2snO1xuICAgICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGxlZnQgLSAwLjUsIDAsIGxlZnQgLSAwLjUsIGhlaWdodCk7XG4gICAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbmV4dExlZnQgLSAwLjUsIDAsIG5leHRMZWZ0IC0gMC41LCBoZWlnaHQpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgaW52YWxpZGF0ZUFsbCgpIHtcbiAgICB0aGlzLnRpbGVDYWNoZSA9IFtdO1xuICB9XG5cbiAgaW52YWxpZGF0ZVJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdGhpcy50aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZS5maWx0ZXIodGlsZSA9PiAhdGlsZS5yYW5nZS5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnO1xuICB9XG5cbiAgcmVuZGVyKGR0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiB2b2lkIHtcbiAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJztcbiAgfVxuXG4gIC8vIHJlcXVpcmVzIHRoYXQgZXhpc3RpbmdJbnRlcnZhbHMgYmUgc29ydGVkLlxuICBzdGF0aWMgZ2V0TmV3VGlsZVJhbmdlcyhleGlzdGluZ0ludGVydmFsczogSW50ZXJ2YWxbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IEludGVydmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwaXhlbHNQZXJCYXNlOiBudW1iZXIpOiBJbnRlcnZhbFtdIHtcbiAgICB2YXIgaXZXaWR0aCA9IE1hdGguY2VpbChNSU5fUFhfUEVSX0JVRkZFUiAvIHBpeGVsc1BlckJhc2UpO1xuICAgIHZhciBmaXJzdFN0YXJ0ID0gTWF0aC5mbG9vcihyYW5nZS5zdGFydCAvIGl2V2lkdGgpICogaXZXaWR0aDtcbiAgICB2YXIgaXZzID0gXy5yYW5nZShmaXJzdFN0YXJ0LCByYW5nZS5zdG9wLCBpdldpZHRoKVxuICAgICAgICAgICAgICAgLm1hcChzdGFydCA9PiBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0YXJ0ICsgaXZXaWR0aCAtIDEpKVxuICAgICAgICAgICAgICAgLmZpbHRlcihpdiA9PiAhaXYuaXNDb3ZlcmVkQnkoZXhpc3RpbmdJbnRlcnZhbHMpKTtcblxuICAgIHJldHVybiB1dGlscy5mbGF0TWFwKGl2cywgaXYgPT4gaXYuY29tcGxlbWVudEludGVydmFscyhleGlzdGluZ0ludGVydmFscykpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihpdiA9PiBpdi5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRpbGVkQ2FudmFzO1xuIiwiLyoqXG4gKiBWaXN1YWxpemF0aW9uIG9mIHZhcmlhbnRzXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5pbXBvcnQge0FsbGVsRnJlcXVlbmN5U3RyYXRlZ3l9IGZyb20gJy4uL3R5cGVzJztcblxuXG5pbXBvcnQgdHlwZSB7VmNmRGF0YVNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9WY2ZEYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZX0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHtSZWFjdCwgUmVhY3RET019IGZyb20gJy4uL1NoaW1EZXBlbmRlbmNpZXMnO1xuXG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuXG5jbGFzcyBWYXJpYW50VHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8Vml6UHJvcHM8VmNmRGF0YVNvdXJjZT4sIFN0YXRlPiB7XG4gIHByb3BzOiBWaXpQcm9wczxWY2ZEYXRhU291cmNlPjtcblxuICBzdGF0ZTogU3RhdGU7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzPFZjZkRhdGFTb3VyY2U+KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCAoKSA9PiB7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIGlmICghc2hhbGxvd0VxdWFscyhwcmV2UHJvcHMsIHRoaXMucHJvcHMpIHx8XG4gICAgICAgICFzaGFsbG93RXF1YWxzKHByZXZTdGF0ZSwgdGhpcy5zdGF0ZSkpIHtcbiAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVZpc3VhbGl6YXRpb24oKSB7XG4gICAgdmFyIGNhbnZhcyA9IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLFxuICAgICAgICB7d2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkgeyAvLyBjaGVjayBmb3IgZ2V0Q29udGV4dFxuICAgICAgaWYgKGNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7IC8vIGNoZWNrIGZvciBzaXplQ2FudmFzXG4gICAgICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgfVxuICAgICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKTtcbiAgICAgIHZhciBkdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGN0eCk7XG4gICAgICB0aGlzLnJlbmRlclNjZW5lKGR0eCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJjYW52YXMgaXMgbm90IGFuIEVsZW1lbnRcIik7XG4gICAgfVxuICB9XG5cbiAgcmVuZGVyU2NlbmUoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgdmFyIHJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSxcbiAgICAgICAgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCksXG4gICAgICAgIHZhcmlhbnRzID0gdGhpcy5wcm9wcy5zb3VyY2UuZ2V0VmFyaWFudHNJblJhbmdlKGludGVydmFsKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIGhlaWdodCA9IHRoaXMucHJvcHMuaGVpZ2h0LFxuICAgICAgICB5ID0gaGVpZ2h0IC0gc3R5bGUuVkFSSUFOVF9IRUlHSFQgLSAxO1xuXG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LnNhdmUoKTtcblxuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5WQVJJQU5UX0ZJTEw7XG4gICAgY3R4LnN0cm9rZVN0eWxlID0gc3R5bGUuVkFSSUFOVF9TVFJPS0U7XG4gICAgdmFyaWFudHMuZm9yRWFjaCh2YXJpYW50ID0+IHtcbiAgICAgIHZhciB2YXJpYW50SGVpZ2h0UmF0aW8gPSAxLjA7XG4gICAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zLnZhcmlhbnRIZWlnaHRCeUZyZXF1ZW5jeSkge1xuICAgICAgICB2YXIgZnJlcXVlbmN5ID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMucHJvcHMub3B0aW9ucy5hbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5ID09PSB1bmRlZmluZWQpIHsgLy9kZWZhdWx0IHN0YXJ0ZWd5XG4gICAgICAgICAgZnJlcXVlbmN5ID0gdmFyaWFudC5tYWpvckZyZXF1ZW5jeTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLm9wdGlvbnMuYWxsZWxGcmVxdWVuY3lTdHJhdGVneSA9PT0gQWxsZWxGcmVxdWVuY3lTdHJhdGVneS5NYWpvcikge1xuICAgICAgICAgIGZyZXF1ZW5jeSA9IHZhcmlhbnQubWFqb3JGcmVxdWVuY3k7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wcy5vcHRpb25zLmFsbGVsRnJlcXVlbmN5U3RyYXRlZ3kgPT09IEFsbGVsRnJlcXVlbmN5U3RyYXRlZ3kuTWlub3IpIHtcbiAgICAgICAgICBmcmVxdWVuY3kgPSB2YXJpYW50Lm1pbm9yRnJlcXVlbmN5O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiVW5rbm93biBBbGxlbEZyZXF1ZW5jeVN0cmF0ZWd5OiBcIix0aGlzLnByb3BzLm9wdGlvbnMuYWxsZWxGcmVxdWVuY3lTdHJhdGVneSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZyZXF1ZW5jeSAhPT0gbnVsbCAmJiBmcmVxdWVuY3kgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHZhcmlhbnRIZWlnaHRSYXRpbyA9IGZyZXF1ZW5jeTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFyIGhlaWdodCA9IHN0eWxlLlZBUklBTlRfSEVJR0hUKnZhcmlhbnRIZWlnaHRSYXRpbztcbiAgICAgIHZhciB2YXJpYW50WSA9IHkgLSAwLjUgKyBzdHlsZS5WQVJJQU5UX0hFSUdIVCAtIGhlaWdodDtcbiAgICAgIHZhciB2YXJpYW50WCA9IE1hdGgucm91bmQoc2NhbGUodmFyaWFudC5wb3NpdGlvbikpIC0gMC41O1xuICAgICAgdmFyIHdpZHRoID0gTWF0aC5tYXgoMSwgTWF0aC5yb3VuZChzY2FsZSh2YXJpYW50LnBvc2l0aW9uICsgMSkgLSBzY2FsZSh2YXJpYW50LnBvc2l0aW9uKSkpO1xuICAgICAgY3R4LnB1c2hPYmplY3QodmFyaWFudCk7XG5cbiAgICAgIGN0eC5maWxsUmVjdCh2YXJpYW50WCwgdmFyaWFudFksIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgY3R4LnN0cm9rZVJlY3QodmFyaWFudFgsIHZhcmlhbnRZLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICB9KTtcblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBoYW5kbGVDbGljayhyZWFjdEV2ZW50OiBhbnkpIHtcbiAgICB2YXIgZXYgPSByZWFjdEV2ZW50Lm5hdGl2ZUV2ZW50LFxuICAgICAgICB4ID0gZXYub2Zmc2V0WCxcbiAgICAgICAgeSA9IGV2Lm9mZnNldFksXG4gICAgICAgIGNhbnZhczogKG51bGwgfCBFbGVtZW50IHwgVGV4dCkgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcblxuICAgIGlmIChjYW52YXMgPT0gbnVsbCApIHJldHVybjtcblxuICAgIGlmIChjYW52YXMgJiYgY2FudmFzIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKSxcbiAgICAgICAgICB0cmFja2luZ0N0eCA9IG5ldyBkYXRhQ2FudmFzLkNsaWNrVHJhY2tpbmdDb250ZXh0KGN0eCwgeCwgeSk7XG4gICAgICB0aGlzLnJlbmRlclNjZW5lKHRyYWNraW5nQ3R4KTtcblxuICAgICAgdmFyIHZhcmlhbnRzID0gdHJhY2tpbmdDdHguaGl0O1xuICAgICAgaWYgKHZhcmlhbnRzICYmIHZhcmlhbnRzLmxlbmd0aD4wKSB7XG4gICAgICAgIHZhciBkYXRhID0gW107XG4gICAgICAgIGZvciAodmFyIGk9MDtpPHZhcmlhbnRzLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICBkYXRhLnB1c2goe1xuICAgICAgICAgICAgaWQ6ICAgICAgIHZhcmlhbnRzW2ldLmlkLFxuICAgICAgICAgICAgdmNmTGluZTogIHZhcmlhbnRzW2ldLnZjZkxpbmUsXG4gICAgICAgICAgICByZWY6ICAgICAgdmFyaWFudHNbaV0ucmVmLFxuICAgICAgICAgICAgYWx0OiAgICAgIHZhcmlhbnRzW2ldLmFsdH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vdXNlciBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZGlzcGxheWluZyBwb3B1cFxuICAgICAgICBpZiAodHlwZW9mIHRoaXMucHJvcHMub3B0aW9ucy5vblZhcmlhbnRDbGlja2VkICA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgdGhpcy5wcm9wcy5vcHRpb25zLm9uVmFyaWFudENsaWNrZWQoZGF0YSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCJWYXJpYW50cyBjbGlja2VkOiBcIiwgZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImNhbnZhcyBpcyBub3QgYW4gRWxlbWVudFwiKTtcbiAgICB9XG4gIH1cbn1cblxuVmFyaWFudFRyYWNrLmRpc3BsYXlOYW1lID0gJ3ZhcmlhbnRzJztcblxubW9kdWxlLmV4cG9ydHMgPSBWYXJpYW50VHJhY2s7XG4iLCIvKipcbiAqIFV0aWxpdHkgY29kZSBmb3Igd29ya2luZyB3aXRoIHRoZSBIVE1MIGNhbnZhcyBlbGVtZW50LlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLy8gUmV0dXJuIHRoZSAyRCBjb250ZXh0IGZvciBhIGNhbnZhcy4gVGhpcyBpcyBoZWxwZnVsIGZvciB0eXBlIHNhZmV0eS5cbmZ1bmN0aW9uIGdldENvbnRleHQoZWw6IEVsZW1lbnQpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xuICAvLyBUaGUgdHlwZWNhc3RzIHRocm91Z2ggYGFueWAgYXJlIHRvIGZvb2wgZmxvdy5cbiAgdmFyIGNhbnZhcyA9ICgoZWwgOiBhbnkpIDogSFRNTENhbnZhc0VsZW1lbnQpO1xuICB2YXIgY3R4ID0gKChjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSA6IGFueSkgOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpO1xuICByZXR1cm4gY3R4O1xufVxuXG4vLyBTdHJva2UgYSBsaW5lIGJldHdlZW4gdHdvIHBvaW50c1xuZnVuY3Rpb24gZHJhd0xpbmUoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHgxOiBudW1iZXIsIHkxOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIpIHtcbiAgY3R4LmJlZ2luUGF0aCgpO1xuICBjdHgubW92ZVRvKHgxLCB5MSk7XG4gIGN0eC5saW5lVG8oeDIsIHkyKTtcbiAgY3R4LnN0cm9rZSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0Q29udGV4dCxcbiAgZHJhd0xpbmVcbn07XG4iLCIvKipcbiAqIEQzL0RPTS1yZWxhdGVkIHV0aWxpdHkgZnVuY3Rpb25zLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuXG4vLyBTdWJ0eXBlIG9mIEdlbm9tZVJhbmdlXG50eXBlIFJhbmdlID0ge1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG59O1xuXG5leHBvcnQgdHlwZSBTY2FsZSA9IChudW06IG51bWJlcikgPT4gbnVtYmVyO1xuXG4vKipcbiAqIFNoYXJlZCB4LWF4aXMgc2NhbGluZyBsb2dpYyBmb3IgdHJhY2tzXG4gKi9cbmZ1bmN0aW9uIGdldFRyYWNrU2NhbGUocmFuZ2U6IFJhbmdlLCB3aWR0aDogbnVtYmVyKTogYW55IHtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuIHNjYWxlLmxpbmVhcigpO1xuICByZXR1cm4gc2NhbGUubGluZWFyKClcbiAgICAgICAgICAuZG9tYWluKFtyYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCArIDFdKSAgLy8gMSBicCB3aWRlXG4gICAgICAgICAgLnJhbmdlKFswLCB3aWR0aF0pO1xufVxuXG52YXIgZm9ybWF0UHJlZml4ZXMgPSBbXCJcIixcImtcIixcIk1cIixcIkdcIixcIlRcIixcIlBcIixcIkVcIixcIlpcIixcIllcIl07XG5cbi8vIFJldHVybnMgdGhlIFNJLXByZWZpeCBmb3IgbnVtLCBhbGEgZDMuZm9ybWF0UHJlZml4LlxuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9tYm9zdG9jay9kMy9ibG9iLzViOTgxYTE4L3NyYy9mb3JtYXQvZm9ybWF0UHJlZml4LmpzXG5mdW5jdGlvbiBmb3JtYXRQcmVmaXgodmFsdWU6IG51bWJlcikge1xuICB2YXIgaSA9IDA7XG4gIGlmICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlICo9IC0xO1xuICAgIGkgPSAxICsgTWF0aC5mbG9vcigxZS0xMiArIE1hdGgubG9nKHZhbHVlKSAvIE1hdGguTE4xMCk7XG4gICAgaSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDI0LCBNYXRoLmZsb29yKChpIC0gMSkgLyAzKSAqIDMpKTtcbiAgfVxuICB2YXIgayA9IE1hdGgucG93KDEwLCBpKTtcbiAgcmV0dXJuIHtcbiAgICBzeW1ib2w6IGZvcm1hdFByZWZpeGVzW2kgLyAzXSxcbiAgICBzY2FsZTogZCA9PiBkIC8ga1xuICB9O1xufVxuXG4vKipcbiAqIEZvcm1hdHMgdGhlIHNpemUgb2YgYSB2aWV3IGFuZCBpbmZlcnMgd2hhdCBwcmVmaXgvdW5pdCB0byBzaG93LlxuICogVGhpcyBmb3JtYXR0aW5nIGZvbGxvd3MgSUdWJ3MgY29udmVudGlvbnMgcmVnYXJkaW5nIHJhbmdlIGRpc3BsYXk6XG4gKiAgXCIxIGJwXCIsIFwiMTAxIGJwXCIsIFwiMSwwMDEgYnBcIiwgXCIxLDAwMSBrYnBcIiwgLi4uXG4gKi9cbmZ1bmN0aW9uIGZvcm1hdFJhbmdlKHZpZXdTaXplOiBudW1iZXIpOiB7cHJlZml4OiBzdHJpbmcsIHVuaXQ6IHN0cmluZ30ge1xuICB2YXIgdG1wVmlld1NpemUgPSB2aWV3U2l6ZSAvIDEwMDAsXG4gICAgICBmcHJlZml4ID0gZm9ybWF0UHJlZml4KE1hdGgubWF4KDEsIHRtcFZpZXdTaXplKSksXG4gICAgICB1bml0ID0gZnByZWZpeC5zeW1ib2wgKyBcImJwXCIsICAvLyBicCwga2JwLCBNYnAsIEdicFxuICAgICAgcHJlZml4ID0gTWF0aC5yb3VuZChmcHJlZml4LnNjYWxlKHZpZXdTaXplKSkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgcmV0dXJuIHtwcmVmaXgsIHVuaXR9O1xufVxuXG5mdW5jdGlvbiBoZWlnaHRGb3JDYW52YXMoZWw6IEhUTUxDYW52YXNFbGVtZW50LCBoZWlnaHQ6IG51bWJlcik6IG51bWJlciB7XG4gIHZhciByYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICByZXR1cm4gKGhlaWdodCAqIHJhdGlvKTtcbn1cblxuLyoqXG4gKiBTaXplcyBhIGNhbnZhcyBhcHByb3ByaWF0ZWx5IGZvciB0aGlzIGRldmljZS5cbiAqL1xuZnVuY3Rpb24gc2l6ZUNhbnZhcyhlbDogSFRNTENhbnZhc0VsZW1lbnQsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gIHZhciByYXRpbyA9IHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvO1xuICBlbC53aWR0aCA9IHdpZHRoICogcmF0aW87XG4gIGVsLmhlaWdodCA9IGhlaWdodCAqIHJhdGlvO1xuICBlbC5zdHlsZS53aWR0aCA9IHdpZHRoICsgJ3B4JztcbiAgZWwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcbiAgdmFyIGN0eCA9IGVsLmdldENvbnRleHQoJzJkJyk7XG4gIGlmIChjdHggIT09IG51bGwgJiYgY3R4IGluc3RhbmNlb2YgQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSB7XG4gICAgY3R4LnNjYWxlKHJhdGlvLCByYXRpbyk7XG4gIH1cbn1cblxuLyoqXG4gKiBGaW5kIHRoZSBjbG9zZXN0IHBhcmVudCB3aXRoIGEgZ2l2ZW4gY2xhc3MgbmFtZS5cbiAqL1xuZnVuY3Rpb24gZmluZFBhcmVudChpbkVsOiBFbGVtZW50LCBjbGFzc05hbWU6IHN0cmluZyk6ID9FbGVtZW50IHtcbiAgdmFyIGVsID0gaW5FbDsgIC8vIHRoaXMgaXMgZm9yIEZsb3cuXG4gIGRvIHtcbiAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHJldHVybiBlbDtcbiAgICBlbCA9IGVsLnBhcmVudEVsZW1lbnQ7XG4gIH0gd2hpbGUgKGVsKTtcbiAgcmV0dXJuIG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBoZWlnaHRGb3JDYW52YXMsXG4gIGZvcm1hdFJhbmdlLFxuICBnZXRUcmFja1NjYWxlLFxuICBzaXplQ2FudmFzLFxuICBmaW5kUGFyZW50XG59O1xuIiwiLyoqIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnQsIENpZ2FyU3ltYm9sfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5cbi8qKlxuICogQ2FsY3VsYXRlIHJvdyBoZWlnaHQgZm9yIHBpbGV1cFxuICogcm93OiByb3cgbnVtYmVyXG4gKiBoZWlnaHQ6IGhlaWdodCBvZiBlbGVtZW50cyB0byBkcmF3XG4gKiBzcGFjaW5nOiBzcGFjaW5nIGJldHdlZW4gZWxlbWVudHMgdG8gZHJhd1xuICogUmV0dXJucyB5IGxvY2F0aW9uIGZvciB0aGlzIHJvd1xuICovXG5mdW5jdGlvbiB5Rm9yUm93KHJvdzogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcj1zdHlsZS5SRUFEX0hFSUdIVCwgc3BhY2luZzogbnVtYmVyPXN0eWxlLlJFQURfU1BBQ0lORyk6IG51bWJlciB7XG4gIHJldHVybiAocm93ICogKGhlaWdodCArIHNwYWNpbmcpKTtcbn1cblxuLyoqXG4gKiBHaXZlbiBhIGxpc3Qgb2YgSW50ZXJ2YWxzLCByZXR1cm4gYSBwYXJhbGxlbCBsaXN0IG9mIHJvdyBudW1iZXJzIGZvciBlYWNoLlxuICogQXNzdW1pbmcgcm93cyA9IHBpbGV1cChyZWFkcyksIHRoZW4geW91ciBndWFyYW50ZWUgaXMgdGhhdFxuICogcm93c1tpXSA9PSByb3dzW2pdID0+ICFyZWFkc1tpXS5pbnRlcnNlY3RzKHJlYWRzW2pdKVxuICovXG5mdW5jdGlvbiBwaWxldXAocmVhZHM6IEludGVydmFsW10pOiBudW1iZXJbXSB7XG4gIHZhciByb3dzID0gbmV3IEFycmF5KHJlYWRzLmxlbmd0aCksXG4gICAgICBsYXN0UmVhZHMgPSBbXTsgIC8vIHJvdyBudW1iZXIgLS0+IGxhc3QgSW50ZXJ2YWwgaW4gdGhhdCByb3dcblxuICAvLyBGb3IgZWFjaCByZWFkLCBmaW5kIHRoZSBmaXJzdCByb3cgdGhhdCBpdCB3aWxsIGZpdCBpbi5cbiAgLy8gVGhpcyBpcyBwb3RlbnRpYWxseSBPKG5eMikgaW4gdGhlIG51bWJlciBvZiByZWFkczsgdGhlcmUncyBwcm9iYWJseSBhXG4gIC8vIGJldHRlciB3YXkuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcmVhZHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgciA9IHJlYWRzW2ldO1xuICAgIHZhciByb3dOdW0gPSBsYXN0UmVhZHMubGVuZ3RoO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGFzdFJlYWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAoIXIuaW50ZXJzZWN0cyhsYXN0UmVhZHNbal0pKSB7XG4gICAgICAgIHJvd051bSA9IGo7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByb3dzW2ldID0gcm93TnVtO1xuICAgIGxhc3RSZWFkc1tyb3dOdW1dID0gcjtcbiAgfVxuXG4gIHJldHVybiByb3dzO1xufVxuXG4vKipcbiAqIEFkZCBhIHJlYWQgdG8gYW4gZXhpc3RpbmcgcGlsZXVwLlxuICogcGlsZXVwIG1hcHMge3JvdyAtLT4gcmVhZHMgaW4gdGhhdCByb3d9XG4gKiBUaGlzIG1vZGlmaWVzIHBpbGV1cCBieSBpbnNlcnRpbmcgdGhlIHJlYWQgaW4gdGhlIGFwcHJvcHJpYXRlIHJvdy5cbiAqIFJldHVybnMgdGhlIGNob3NlbiByb3cgbnVtYmVyLlxuICovXG5mdW5jdGlvbiBhZGRUb1BpbGV1cChyZWFkOiBJbnRlcnZhbCwgcGlsZXVwOiBBcnJheTxJbnRlcnZhbFtdPik6IG51bWJlciB7XG4gIHZhciBjaG9zZW5Sb3cgPSAtMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwaWxldXAubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcmVhZHMgPSBwaWxldXBbaV07XG4gICAgdmFyIG9rID0gdHJ1ZTtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IHJlYWRzLmxlbmd0aDsgaisrKSB7XG4gICAgICBpZiAocmVhZHNbal0uaW50ZXJzZWN0cyhyZWFkKSkge1xuICAgICAgICBvayA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAob2spIHtcbiAgICAgIGNob3NlblJvdyA9IGk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoY2hvc2VuUm93ID09IC0xKSB7XG4gICAgY2hvc2VuUm93ID0gcGlsZXVwLmxlbmd0aDtcbiAgICBwaWxldXBbY2hvc2VuUm93XSA9IFtdOyAgLy8gZ28gZGVlcGVyXG4gIH1cblxuICBwaWxldXBbY2hvc2VuUm93XS5wdXNoKHJlYWQpO1xuICByZXR1cm4gY2hvc2VuUm93O1xufVxuXG5leHBvcnQgdHlwZSBCYXNlUGFpciA9IHtcbiAgcG9zOiBudW1iZXI7XG4gIGJhc2VQYWlyOiBzdHJpbmc7XG4gIHF1YWxpdHk6IG51bWJlcjtcbn1cblxuZnVuY3Rpb24gZmluZE1pc21hdGNoZXMocmVmZXJlbmNlOiBzdHJpbmcsIHNlcTogc3RyaW5nLCByZWZQb3M6IG51bWJlciwgc2NvcmVzOiBudW1iZXJbXSk6IEJhc2VQYWlyW10ge1xuICB2YXIgb3V0ID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc2VxLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBvcyA9IHJlZlBvcyArIGksXG4gICAgICAgIHJlZiA9IHJlZmVyZW5jZS5jaGFyQXQoaSksXG4gICAgICAgIGJhc2VQYWlyID0gc2VxLmNoYXJBdChpKTtcbiAgICBpZiAocmVmICE9IGJhc2VQYWlyICYmIHJlZiAhPSAnLicpIHtcbiAgICAgIG91dC5wdXNoKHtcbiAgICAgICAgcG9zLFxuICAgICAgICBiYXNlUGFpcixcbiAgICAgICAgcXVhbGl0eTogc2NvcmVzW2ldXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuLy8gRGV0ZXJtaW5lIHdoaWNoIGFsaWdubWVudCBzZWdtZW50IHRvIHJlbmRlciBhcyBhbiBhcnJvdy5cbi8vIFRoaXMgaXMgZWl0aGVyIHRoZSBmaXJzdCBvciBsYXN0ICdNJyBzZWN0aW9uLCBleGNsdWRpbmcgc29mdCBjbGlwcGluZy5cbmZ1bmN0aW9uIGdldEFycm93SW5kZXgocmVhZDogQWxpZ25tZW50KTogbnVtYmVyIHtcbiAgdmFyIGksIG9wLCBvcHMgPSByZWFkLmNpZ2FyT3BzO1xuICBpZiAocmVhZC5nZXRTdHJhbmQoKSA9PSAnLScpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBvcCA9IG9wc1tpXTtcbiAgICAgIGlmIChvcC5vcCA9PSAnUycpIGNvbnRpbnVlO1xuICAgICAgaWYgKG9wLm9wID09ICdNJykgcmV0dXJuIGk7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGZvciAoaSA9IG9wcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgb3AgPSBvcHNbaV07XG4gICAgICBpZiAob3Aub3AgPT0gJ1MnKSBjb250aW51ZTtcbiAgICAgIGlmIChvcC5vcCA9PSAnTScpIHJldHVybiBpO1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8vIFRoZSBjb21tZW50cyBiZWxvdyBjb21lIGZyb20gdGhlIFNBTSBzcGVjXG52YXIgQ2lnYXJPcCA9IHtcbiAgTUFUQ0g6ICdNJywgIC8vIGFsaWdubWVudCBtYXRjaCAoY2FuIGJlIGEgc2VxdWVuY2UgbWF0Y2ggb3IgbWlzbWF0Y2gpXG4gIElOU0VSVDogJ0knLCAgLy8gaW5zZXJ0aW9uIHRvIHRoZSByZWZlcmVuY2VcbiAgREVMRVRFOiAnRCcsICAvLyBkZWxldGlvbiBmcm9tIHRoZSByZWZlcmVuY2VcbiAgU0tJUDogJ04nLCAgLy8gc2tpcHBlZCByZWdpb24gZnJvbSB0aGUgcmVmZXJlbmNlXG4gIFNPRlRDTElQOiAnUycsICAvLyBzb2Z0IGNsaXBwaW5nIChjbGlwcGVkIHNlcXVlbmNlcyBwcmVzZW50IGluIFNFUSlcbiAgSEFSRENMSVA6ICdIJywgIC8vIGhhcmQgY2xpcHBpbmcgKGNsaXBwZWQgc2VxdWVuY2VzIE5PVCBwcmVzZW50IGluIFNFUSlcbiAgUEFERElORzogJ1AnLCAgLy8gcGFkZGluZyAoc2lsZW50IGRlbGV0aW9uIGZyb20gcGFkZGVkIHJlZmVyZW5jZSlcbiAgU0VRTUFUQ0g6ICc9JywgIC8vIHNlcXVlbmNlIG1hdGNoXG4gIFNFUU1JU01BVENIOiAnWCcgIC8vIHNlcXVlbmNlIG1pc21hdGNoXG59O1xuXG50eXBlIE9wID0ge1xuICBvcDogQ2lnYXJTeW1ib2w7XG4gIGxlbmd0aDogbnVtYmVyO1xuICBwb3M6IG51bWJlcjtcbiAgYXJyb3c6ID8oJ0wnfCdSJyk7XG59XG5cbmV4cG9ydCB0eXBlIE9wSW5mbyA9IHtcbiAgb3BzOiBPcFtdLFxuICBtaXNtYXRjaGVzOiBCYXNlUGFpcltdXG59XG5cbmV4cG9ydCB0eXBlIENvdmVyYWdlQ291bnQgPSB7XG4gIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICBvcEluZm86ID9PcEluZm9cbn1cblxuLy8gQnJlYWtzIHRoZSByZWFkIGRvd24gaW50byBDaWdhciBPcHMgc3VpdGFibGUgZm9yIGRpc3BsYXlcbmZ1bmN0aW9uIGdldE9wSW5mbyhyZWFkOiBBbGlnbm1lbnQsIHJlZmVyZW5jZVNvdXJjZTogT2JqZWN0KTogT3BJbmZvIHtcbiAgdmFyIG9wcyA9IHJlYWQuY2lnYXJPcHM7XG5cbiAgdmFyIHJhbmdlID0gcmVhZC5nZXRJbnRlcnZhbCgpLFxuICAgICAgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgc2VxID0gcmVhZC5nZXRTZXF1ZW5jZSgpLFxuICAgICAgc2NvcmVzID0gcmVhZC5nZXRRdWFsaXR5U2NvcmVzKCksXG4gICAgICBzZXFQb3MgPSAwLFxuICAgICAgcmVmUG9zID0gc3RhcnQsXG4gICAgICBhcnJvd0luZGV4ID0gZ2V0QXJyb3dJbmRleChyZWFkKTtcblxuICB2YXIgcmVzdWx0OiBPcFtdID0gW107XG4gIHZhciBtaXNtYXRjaGVzID0gKFtdOiBCYXNlUGFpcltdKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb3AgPSBvcHNbaV07XG4gICAgaWYgKG9wLm9wID09ICdNJykge1xuICAgICAgdmFyIHJlZiA9IHJlZmVyZW5jZVNvdXJjZS5nZXRSYW5nZUFzU3RyaW5nKHtcbiAgICAgICAgY29udGlnOiByYW5nZS5jb250aWcsXG4gICAgICAgIHN0YXJ0OiByZWZQb3MsXG4gICAgICAgIHN0b3A6IHJlZlBvcyArIG9wLmxlbmd0aCAtIDFcbiAgICAgIH0pO1xuICAgICAgdmFyIG1TZXEgPSBzZXEuc2xpY2Uoc2VxUG9zLCBzZXFQb3MgKyBvcC5sZW5ndGgpO1xuICAgICAgbWlzbWF0Y2hlcyA9IG1pc21hdGNoZXMuY29uY2F0KGZpbmRNaXNtYXRjaGVzKHJlZiwgbVNlcSwgcmVmUG9zLCBzY29yZXMpKTtcbiAgICB9XG5cbiAgICByZXN1bHQucHVzaCh7XG4gICAgICBvcDogb3Aub3AsXG4gICAgICBsZW5ndGg6IG9wLmxlbmd0aCxcbiAgICAgIHBvczogcmVmUG9zLFxuICAgICAgYXJyb3c6IG51bGwgLy8gZGlyZWN0aW9uIHdpbGwgYmUgc2V0IGJlbG93XG4gICAgfSk7XG5cbiAgICAvLyBUaGVzZSBhcmUgdGhlIGNpZ2FyIG9wZXJhdGlvbnMgd2hpY2ggYWR2YW5jZSBwb3NpdGlvbiBpbiB0aGUgcmVmZXJlbmNlXG4gICAgc3dpdGNoIChvcC5vcCkge1xuICAgICAgY2FzZSBDaWdhck9wLk1BVENIOlxuICAgICAgY2FzZSBDaWdhck9wLkRFTEVURTpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TS0lQOlxuICAgICAgY2FzZSBDaWdhck9wLlNFUU1BVENIOlxuICAgICAgY2FzZSBDaWdhck9wLlNFUU1JU01BVENIOlxuICAgICAgICByZWZQb3MgKz0gb3AubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFRoZXNlIGFyZSB0aGUgY2lnYXIgb3BlcmF0aW9ucyB3aGljaCBhZHZhbmNlIHRoZSBwZXItYWxpZ25tZW50IHNlcXVlbmNlLlxuICAgIHN3aXRjaCAob3Aub3ApIHtcbiAgICAgIGNhc2UgQ2lnYXJPcC5NQVRDSDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5JTlNFUlQ6XG4gICAgICBjYXNlIENpZ2FyT3AuU09GVENMSVA6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUFUQ0g6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUlTTUFUQ0g6XG4gICAgICAgIHNlcVBvcyArPSBvcC5sZW5ndGg7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoYXJyb3dJbmRleCA+PSAwKSB7XG4gICAgcmVzdWx0W2Fycm93SW5kZXhdLmFycm93ID0gcmVhZC5nZXRTdHJhbmQoKSA9PSAnLScgPyAnTCcgOiAnUic7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG9wczogcmVzdWx0LFxuICAgIG1pc21hdGNoZXNcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIHlGb3JSb3csXG4gIHBpbGV1cCxcbiAgYWRkVG9QaWxldXAsXG4gIGdldE9wSW5mbyxcbiAgQ2lnYXJPcFxufTtcbiJdfQ==
